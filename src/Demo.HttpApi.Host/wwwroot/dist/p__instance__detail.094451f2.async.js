(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[164],{57529:function(){},38520:function(be,ne,e){"use strict";e.r(ne),e.d(ne,{default:function(){return Ne}});var B=e(13062),N=e(71230),ge=e(38663),b=e(57529),D=e(22122),C=e(96156),a=e(67294),he=e(94184),R=e.n(he),ye=e(7085),G=e(65632),ce=function(m,n){var s={};for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&n.indexOf(t)<0&&(s[t]=m[t]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,t=Object.getOwnPropertySymbols(m);d<t.length;d++)n.indexOf(t[d])<0&&Object.prototype.propertyIsEnumerable.call(m,t[d])&&(s[t[d]]=m[t[d]]);return s},z=function(n){var s,t,d=n.prefixCls,k=n.className,U=n.color,$=U===void 0?"blue":U,O=n.dot,J=n.pending,Q=J===void 0?!1:J,X=n.position,L=n.label,M=n.children,H=ce(n,["prefixCls","className","color","dot","pending","position","label","children"]),T=a.useContext(G.E_),u=T.getPrefixCls,r=u("timeline",d),_=R()((s={},(0,C.Z)(s,"".concat(r,"-item"),!0),(0,C.Z)(s,"".concat(r,"-item-pending"),Q),s),k),V=R()((t={},(0,C.Z)(t,"".concat(r,"-item-head"),!0),(0,C.Z)(t,"".concat(r,"-item-head-custom"),!!O),(0,C.Z)(t,"".concat(r,"-item-head-").concat($),!0),t)),P=/blue|red|green|gray/.test($||"")?void 0:$;return a.createElement("li",(0,D.Z)({},H,{className:_}),L&&a.createElement("div",{className:"".concat(r,"-item-label")},L),a.createElement("div",{className:"".concat(r,"-item-tail")}),a.createElement("div",{className:V,style:{borderColor:P,color:P}},O),a.createElement("div",{className:"".concat(r,"-item-content")},M))},ae=z,F=e(96159),de=function(m,n){var s={};for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&n.indexOf(t)<0&&(s[t]=m[t]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,t=Object.getOwnPropertySymbols(m);d<t.length;d++)n.indexOf(t[d])<0&&Object.prototype.propertyIsEnumerable.call(m,t[d])&&(s[t[d]]=m[t[d]]);return s},Y=function(n){var s,t=a.useContext(G.E_),d=t.getPrefixCls,k=t.direction,U=n.prefixCls,$=n.pending,O=$===void 0?null:$,J=n.pendingDot,Q=n.children,X=n.className,L=n.reverse,M=L===void 0?!1:L,H=n.mode,T=H===void 0?"":H,u=de(n,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),r=d("timeline",U),_=typeof O=="boolean"?null:O,V=O?a.createElement(ae,{pending:!!O,dot:J||a.createElement(ye.Z,null)},_):null,P=a.Children.toArray(Q);P.push(V),M&&P.reverse();var re=function(w,ee){return T==="alternate"?w.props.position==="right"?"".concat(r,"-item-right"):w.props.position==="left"||ee%2==0?"".concat(r,"-item-left"):"".concat(r,"-item-right"):T==="left"?"".concat(r,"-item-left"):T==="right"||w.props.position==="right"?"".concat(r,"-item-right"):""},se=P.filter(function(E){return!!E}),q=a.Children.count(se),le="".concat(r,"-item-last"),pe=a.Children.map(se,function(E,w){var ee=w===q-2?le:"",ue=w===q-1?le:"";return(0,F.Tm)(E,{className:R()([E.props.className,!M&&!!O?ee:ue,re(E,w)])})}),oe=P.some(function(E){var w;return!!((w=E==null?void 0:E.props)===null||w===void 0?void 0:w.label)}),ie=R()(r,(s={},(0,C.Z)(s,"".concat(r,"-pending"),!!O),(0,C.Z)(s,"".concat(r,"-reverse"),!!M),(0,C.Z)(s,"".concat(r,"-").concat(T),!!T&&!oe),(0,C.Z)(s,"".concat(r,"-label"),oe),(0,C.Z)(s,"".concat(r,"-rtl"),k==="rtl"),s),X);return a.createElement("ul",(0,D.Z)({},u,{className:ie}),pe)};Y.Item=ae;var me=Y,K=me,c=e(20136),i=e(55241),p=e(402),x=e(61859),l=e(89032),g=e(15746),Be=e(58024),xe=e(39144),Ge=e(71153),fe=e(60331),Ye=e(17462),je=e(76772),Ke=e(71194),we=e(50146),ve=e(3182),W=e(2824),Oe=e(94043),A=e.n(Oe),Te=e(41180),Ze=e(90774),$e=e(67265),Pe=e(30381),Ie=e.n(Pe),Ce=e(51615),Se=e(71536),De=e(87831),o=e(85893),Re=function(){var n,s,t,d=(0,Ce.k6)(),k=(0,Ce.TH)(),U=a.useState(),$=(0,W.Z)(U,2),O=$[0],J=$[1],Q=a.useState(),X=(0,W.Z)(Q,2),L=X[0],M=X[1],H=a.useState(),T=(0,W.Z)(H,2),u=T[0],r=T[1],_=a.useState(!1),V=(0,W.Z)(_,2),P=V[0],re=V[1],se=a.useState(),q=(0,W.Z)(se,2),le=q[0],pe=q[1],oe=a.useState([]),ie=(0,W.Z)(oe,2),E=ie[0],w=ie[1],ee=a.useState("logs"),ue=(0,W.Z)(ee,2),te=ue[0],We=ue[1],ke=function(){var f=(0,ve.Z)(A().mark(function v(Z,h){var I,y,j,Ee;return A().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,Te.lE)(Z,h);case 2:if(j=S.sent,j){S.next=6;break}return we.Z.error({title:"Error",content:"The workflow defintion does not exist.",onOk:function(){d.goBack()}}),S.abrupt("return");case 6:return S.next=8,(0,De.MI)((I=j.activities)!==null&&I!==void 0?I:[],(y=j.connections)!==null&&y!==void 0?y:[]);case 8:Ee=S.sent,pe(Ee);case 10:case"end":return S.stop()}},v)}));return function(Z,h){return f.apply(this,arguments)}}(),Le=function(){var f=(0,ve.Z)(A().mark(function v(Z){var h,I;return A().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,Ze.jP)(Z);case 2:I=j.sent,w((h=I==null?void 0:I.items)!==null&&h!==void 0?h:[]);case 4:case"end":return j.stop()}},v)}));return function(Z){return f.apply(this,arguments)}}(),Me=function(){var f=(0,ve.Z)(A().mark(function v(Z){var h;return A().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return re(!0),y.next=3,(0,Ze.mV)(Z);case 3:return h=y.sent,y.next=6,Le(Z);case 6:if(!h){y.next=11;break}r(h),M(h==null?void 0:h.name),y.next=13;break;case 11:return we.Z.error({title:"Error",content:"The workflow instance does not exist.",onOk:function(){d.goBack()}}),y.abrupt("return");case 13:return y.next=15,ke(h.definitionId,h.version);case 15:re(!1);case 16:case"end":return y.stop()}},v)}));return function(Z){return f.apply(this,arguments)}}();return(0,a.useEffect)(function(){var f,v,Z=(f=k==null||(v=k.state)===null||v===void 0?void 0:v.id)!==null&&f!==void 0?f:"";if(!Z){d.goBack();return}J(Z),Me(Z)},[]),(0,o.jsxs)($e.ZP,{title:L,loading:P,children:[(u==null?void 0:u.fault)&&(0,o.jsx)(je.Z,{showIcon:!0,message:u==null?void 0:u.fault.message,type:"error",description:"",style:{marginBottom:10}}),(0,o.jsxs)(N.Z,{gutter:16,children:[(0,o.jsx)(g.Z,{span:14,children:(0,o.jsx)(xe.Z,{title:["Graph ",(0,o.jsx)(fe.Z,{children:u==null?void 0:u.version},"2")],children:(0,o.jsx)(Se.Z,{readonly:!0,showMiniMap:!1,showNodeTypes:!1,showToolbar:!1,graphData:le})})}),(0,o.jsx)(g.Z,{span:10,children:(0,o.jsxs)(xe.Z,{title:"",tabProps:{},activeTabKey:te,tabList:[{key:"logs",tab:"Logs"},{key:"fault",tab:"Fault"},{key:"variables",tab:"Variables"},{key:"data",tab:"Data"}],onTabChange:function(v){We(v)},children:[te==="logs"&&(0,o.jsx)(K,{mode:"left",children:E.map(function(f){var v;return(0,o.jsx)(K.Item,{color:f.eventName=="Faulted"?"red":"green",children:(0,o.jsxs)(i.Z,{title:"Data",placement:"left",content:(0,o.jsx)(x.Z.Text,{style:{display:"block",maxWidth:500,overflow:"hidden",wordWrap:"break-word"},children:(0,o.jsx)("pre",{children:JSON.stringify((v=f.data)!==null&&v!==void 0?v:{})})}),children:[f.eventName," ",(0,o.jsx)(fe.Z,{children:f.activityType}),(0,o.jsx)(fe.Z,{children:Ie()(f.timestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,o.jsx)("p",{children:f.message})]})},f.id)})}),te==="fault"&&(0,o.jsx)(x.Z.Text,{children:(0,o.jsx)("pre",{children:JSON.stringify((n=u==null?void 0:u.fault)!==null&&n!==void 0?n:{})})}),te==="variables"&&(0,o.jsx)(x.Z.Text,{children:(0,o.jsx)("pre",{children:JSON.stringify((s=u==null?void 0:u.variables)!==null&&s!==void 0?s:{})})}),te==="data"&&(0,o.jsx)(x.Z.Text,{children:(0,o.jsx)("pre",{children:JSON.stringify((t=u==null?void 0:u.activityData)!==null&&t!==void 0?t:{})})})]})})]})]})},Ne=Re},90774:function(be,ne,e){"use strict";e.d(ne,{aT:function(){return C},mV:function(){return ce},jP:function(){return ae},qd:function(){return de},C4:function(){return me}});var B=e(11849),N=e(3182),ge=e(94043),b=e.n(ge),D=e(21010);function C(c,i){return a.apply(this,arguments)}function a(){return a=(0,N.Z)(b().mark(function c(i,p){return b().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.WY)("/api/workflow-instances/".concat(i,"/cancel"),(0,B.Z)({method:"POST",getResponse:!0},p||{})));case 1:case"end":return l.stop()}},c)})),a.apply(this,arguments)}function he(c,i,p){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime.mark(function c(i,p,x){return _regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",request("/api/workflow-instances/".concat(i,"/dispatch"),_objectSpread({method:"POST",data:p,getResponse:!0},x||{})));case 1:case"end":return g.stop()}},c)})),R.apply(this,arguments)}function ye(c,i,p){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime.mark(function c(i,p,x){return _regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",request("/api/workflow-instances/".concat(i,"/execute"),_objectSpread({method:"POST",data:p,getResponse:!0},x||{})));case 1:case"end":return g.stop()}},c)})),G.apply(this,arguments)}function ce(c,i){return z.apply(this,arguments)}function z(){return z=(0,N.Z)(b().mark(function c(i,p){return b().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.WY)("/api/workflow-instances/".concat(i),(0,B.Z)({method:"GET"},p||{})));case 1:case"end":return l.stop()}},c)})),z.apply(this,arguments)}function ae(c,i){return F.apply(this,arguments)}function F(){return F=(0,N.Z)(b().mark(function c(i,p){return b().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.WY)("/api/workflow-instances/".concat(i,"/execution-logs"),(0,B.Z)({method:"GET"},p||{})));case 1:case"end":return l.stop()}},c)})),F.apply(this,arguments)}function de(c,i){return Y.apply(this,arguments)}function Y(){return Y=(0,N.Z)(b().mark(function c(i,p){return b().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.WY)("/api/workflow-instances",(0,B.Z)({method:"GET",params:i},p||{})));case 1:case"end":return l.stop()}},c)})),Y.apply(this,arguments)}function me(c,i,p){return K.apply(this,arguments)}function K(){return K=(0,N.Z)(b().mark(function c(i,p,x){return b().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,D.WY)("/api/workflow-instances/".concat(i,"/retry"),(0,B.Z)({method:"POST",data:p,getResponse:!0},x||{})));case 1:case"end":return g.stop()}},c)})),K.apply(this,arguments)}}}]);
