var mT=Object.defineProperty;var Ua=(Tt,me,a)=>(typeof me!="symbol"&&(me+=""),me in Tt?mT(Tt,me,{enumerable:!0,configurable:!0,writable:!0,value:a}):Tt[me]=a);(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[779],{62602:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return T}});var p=a(28991),d=a(67294),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"},O=z,S=a(27029),j=function(F,x){return d.createElement(S.Z,(0,p.Z)((0,p.Z)({},F),{},{ref:x,icon:O}))};j.displayName="ExpandOutlined";var T=d.forwardRef(j)},24557:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return T}});var p=a(28991),d=a(67294),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"},O=z,S=a(27029),j=function(F,x){return d.createElement(S.Z,(0,p.Z)((0,p.Z)({},F),{},{ref:x,icon:O}))};j.displayName="GlobalOutlined";var T=d.forwardRef(j)},92104:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return T}});var p=a(28991),d=a(67294),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},O=z,S=a(27029),j=function(F,x){return d.createElement(S.Z,(0,p.Z)((0,p.Z)({},F),{},{ref:x,icon:O}))};j.displayName="SaveOutlined";var T=d.forwardRef(j)},63434:function(Tt,me,a){"use strict";var p=a(63185),d=a(9676),z=a(22122),O=a(28991),S=a(81253),j=a(67294),T=a(15200),B=a(22270),F=a(64893),x=["options","fieldProps","proFieldProps","valueEnum"],v=j.forwardRef(function(C,M){var E=C.options,_=C.fieldProps,L=C.proFieldProps,N=C.valueEnum,b=(0,S.Z)(C,x);return j.createElement(T.Z,(0,z.Z)({ref:M,valueType:"checkbox",mode:"edit",valueEnum:(0,B.h)(N,void 0),fieldProps:(0,O.Z)({options:E},_),proFieldProps:L},b))}),g=j.forwardRef(function(C,M){var E=C.fieldProps,_=C.children;return j.createElement(d.Z,(0,z.Z)({ref:M},E),_)}),D=(0,F.G)(g,{valuePropName:"checked"}),c=D;c.Group=v,me.Z=c},64317:function(Tt,me,a){"use strict";var p=a(22122),d=a(28991),z=a(81253),O=a(67294),S=a(15200),j=a(22270),T=a(66758),B=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],F=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],x=O.forwardRef(function(C,M){var E=C.fieldProps,_=C.children,L=C.params,N=C.proFieldProps,b=C.mode,I=C.valueEnum,k=C.request,W=C.showSearch,q=C.options,re=(0,z.Z)(C,B),de=(0,O.useContext)(T.Z);return O.createElement(S.Z,(0,p.Z)({mode:"edit",valueEnum:(0,j.h)(I),request:k,params:L,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({options:q,mode:b,showSearch:W,getPopupContainer:de.getPopupContainer},E),ref:M,proFieldProps:N},re),_)}),v=O.forwardRef(function(C,M){var E=C.fieldProps,_=C.children,L=C.params,N=C.proFieldProps,b=C.mode,I=C.valueEnum,k=C.request,W=C.options,q=(0,z.Z)(C,F),re=(0,d.Z)({options:W,mode:b||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},E),de=(0,O.useContext)(T.Z);return O.createElement(S.Z,(0,p.Z)({mode:"edit",valueEnum:(0,j.h)(I),request:k,params:L,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({getPopupContainer:de.getPopupContainer},re),ref:M,proFieldProps:N},q),_)}),g=x,D=v,c=g;c.SearchSelect=D,c.displayName="ProFormComponent",me.Z=c},52688:function(Tt,me,a){"use strict";var p=a(22122),d=a(28991),z=a(81253),O=a(67294),S=a(15200),j=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],T=O.forwardRef(function(B,F){var x=B.fieldProps,v=B.unCheckedChildren,g=B.checkedChildren,D=B.proFieldProps,c=(0,z.Z)(B,j);return O.createElement(S.Z,(0,p.Z)({valueType:"switch",mode:"edit",fieldProps:(0,d.Z)({unCheckedChildren:v,checkedChildren:g},x),ref:F,valuePropName:"checked",proFieldProps:D,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},c))});me.Z=T},5966:function(Tt,me,a){"use strict";var p=a(22122),d=a(81253),z=a(67294),O=a(15200),S=["fieldProps","proFieldProps"],j=["fieldProps","proFieldProps"],T="text",B=function(g){var D=g.fieldProps,c=g.proFieldProps,C=(0,d.Z)(g,S);return z.createElement(O.Z,(0,p.Z)({mode:"edit",valueType:T,fieldProps:D,filedConfig:{valueType:T},proFieldProps:c},C))},F=function(g){var D=g.fieldProps,c=g.proFieldProps,C=(0,d.Z)(g,j);return z.createElement(O.Z,(0,p.Z)({mode:"edit",valueType:"password",fieldProps:D,proFieldProps:c,filedConfig:{valueType:T}},C))},x=B;x.Password=F,x.displayName="ProFormComponent",me.Z=x},90672:function(Tt,me,a){"use strict";var p=a(22122),d=a(81253),z=a(67294),O=a(15200),S=["fieldProps","proFieldProps"],j=function(B,F){var x=B.fieldProps,v=B.proFieldProps,g=(0,d.Z)(B,S);return z.createElement(O.Z,(0,p.Z)({ref:F,mode:"edit",valueType:"textarea",fieldProps:x,proFieldProps:v},g))};me.Z=z.forwardRef(j)},20499:function(){},64851:function(){},59518:function(){},26199:function(){},14156:function(){},71468:function(){},48871:function(){},9871:function(){},25612:function(){},92777:function(){},20159:function(){},61622:function(){},26155:function(Tt,me,a){"use strict";a.d(me,{Vq:function(){return hd}});var p={};a.r(p),a.d(p,{components:function(){return li},dfs:function(){return Pt},dijkstra:function(){return G},dijkstraAll:function(){return ve},findCycles:function(){return Nt},floydWarshall:function(){return Pr},isAcyclic:function(){return wo},postorder:function(){return ts},preorder:function(){return ns},prim:function(){return No},tarjan:function(){return ct},topsort:function(){return va}});const d=e=>typeof e=="string",z=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},O=/-(\w)/g,S=z(e=>e.replace(O,(t,n)=>n?n.toUpperCase():"")),j=Array.isArray,T=e=>typeof e=="number",B=e=>Number.isNaN(Number(e)),F=e=>{const t=parseFloat(e);return B(t)?e:t},x=e=>e!==null&&typeof e=="object",v=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>v(n))}if(typeof e=="object"&&e!=={}){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=v(t[n])}),t}return e},g=(e,t)=>{const n=e[t];return x(n)?n.cell:n},D=(e,t,n)=>{const i=[];for(let r=0;r<e;r++)i[r]=0;return n&&n.forEach(r=>{const l=g(r,"source"),f=g(r,"target");l&&(i[t[l]]+=1),f&&(i[t[f]]+=1)}),i},c=e=>{const t=[],n=e.length;for(let i=0;i<n;i+=1){t[i]=[];for(let r=0;r<n;r+=1)i===r?t[i][r]=0:e[i][r]===0||!e[i][r]?t[i][r]=Infinity:t[i][r]=e[i][r]}for(let i=0;i<n;i+=1)for(let r=0;r<n;r+=1)for(let l=0;l<n;l+=1)t[r][l]>t[r][i]+t[i][l]&&(t[r][l]=t[r][i]+t[i][l]);return t},C=(e,t)=>{const{nodes:n,edges:i}=e,r=[],l={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((f,w)=>{l[f.id]=w;const R=[];r.push(R)}),i&&i.forEach(f=>{const w=g(f,"source"),R=g(f,"target"),H=l[w],Y=l[R];r[H][Y]=1,t||(r[Y][H]=1)}),r},M=(e,t)=>{const n=[];return e.forEach(i=>{const r=[];i.forEach(l=>{r.push(l*t)}),n.push(r)}),n},E=(e,t)=>{if(e&&e.children){for(let n=e.children.length-1;n>=0;n--)if(!E(e.children[n],t))return}return!!t(e)},_=(e,t)=>{typeof t=="function"&&E(e,t)},L=e=>{let t=Infinity,n=Infinity,i=-Infinity,r=-Infinity;return e.forEach(l=>{t>l.x&&(t=l.x),n>l.y&&(n=l.y),i<l.x&&(i=l.x),r<l.y&&(r=l.y)}),{minX:t,minY:n,maxX:i,maxY:r}},N=e=>typeof e=="function",b=(e,t,n)=>{let i;return n?i=n:T(e)?i=()=>e:i=()=>t,i},I=(e,t,n=!0)=>!t&&t!==0?i=>i.size?j(i.size)?i.size[0]>i.size[1]?i.size[0]:i.size[1]:x(i.size)?i.size.width>i.size.height?i.size.width:i.size.height:i.size:e:N(t)?t:T(t)?()=>t:j(t)?()=>{if(n){const i=Math.max(...t);return isNaN(i)?e:i}return t}:x(t)?()=>{if(n){const i=Math.max(t.width,t.height);return isNaN(i)?e:i}return[t.width,t.height]}:()=>e,k=new Map,W=(e,t)=>{if(k.get(e)&&console.warn(`The layout with the name ${e} exists already, it will be overridden`),isObject(t)){class n extends Base{constructor(r){super();const l=this,f={},w=l.getDefaultCfg();Object.assign(f,w,t,r),Object.keys(f).forEach(R=>{const H=f[R];l[R]=H})}}k.set(e,n)}else k.set(e,t);return k.get(e)},q=e=>{k.has(e)&&k.delete(e)},re=e=>k.has(e)?k.get(e):null;class de{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class pe extends de{constructor(t){super();this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const t=this,{nodes:n,edges:i,begin:r}=t,l=n.length;if(l===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i};if(l===1)return n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i};let{sortBy:f,width:w,height:R}=t;const{condense:H,preventOverlapPadding:Y,preventOverlap:fe,nodeSpacing:Le,nodeSize:Me}=t,We=[];n.forEach(it=>{We.push(it)});const Ze={};if(We.forEach((it,ut)=>{Ze[it.id]=ut}),(f==="degree"||!d(f)||We[0][f]===void 0)&&(f="degree",B(n[0].degree))){const it=D(We.length,Ze,i);We.forEach((ut,Mt)=>{ut.degree=it[Mt]})}We.sort((it,ut)=>ut[f]-it[f]),!w&&typeof window!="undefined"&&(w=window.innerWidth),!R&&typeof window!="undefined"&&(R=window.innerHeight);const He=t.rows,et=t.cols!=null?t.cols:t.columns;if(t.cells=l,He!=null&&et!=null?(t.rows=He,t.cols=et):He!=null&&et==null?(t.rows=He,t.cols=Math.ceil(t.cells/t.rows)):He==null&&et!=null?(t.cols=et,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){const it=t.small(),ut=t.large();(it-1)*ut>=t.cells?t.small(it-1):(ut-1)*it>=t.cells&&t.large(ut-1)}else for(;t.cols*t.rows<t.cells;){const it=t.small(),ut=t.large();(ut+1)*it>=t.cells?t.large(ut+1):t.small(it+1)}if(t.cellWidth=w/t.cols,t.cellHeight=R/t.rows,H&&(t.cellWidth=0,t.cellHeight=0),fe||Le){const it=I(10,Le),ut=I(30,Me,!1);We.forEach(Mt=>{(!Mt.x||!Mt.y)&&(Mt.x=0,Mt.y=0);const[Rt=30,un=30]=ut(Mt),jn=it!==void 0?it(Mt):Y,xn=Rt+jn,ei=un+jn;t.cellWidth=Math.max(t.cellWidth,xn),t.cellHeight=Math.max(t.cellHeight,ei)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(let it=0;it<We.length;it++){const ut=We[it];let Mt;if(t.position&&(Mt=t.position(ut)),Mt&&(Mt.row!==void 0||Mt.col!==void 0)){const Rt={row:Mt.row,col:Mt.col};if(Rt.col===void 0)for(Rt.col=0;t.used(Rt.row,Rt.col);)Rt.col++;else if(Rt.row===void 0)for(Rt.row=0;t.used(Rt.row,Rt.col);)Rt.row++;t.id2manPos[ut.id]=Rt,t.use(Rt.row,Rt.col)}t.getPos(ut)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:i,nodes:We}}small(t){const n=this;let i;const r=n.rows||5,l=n.cols||5;return t==null?i=Math.min(r,l):Math.min(r,l)===n.rows?n.rows=t:n.cols=t,i}large(t){const n=this;let i;const r=n.rows||5,l=n.cols||5;return t==null?i=Math.max(r,l):Math.max(r,l)===n.rows?n.rows=t:n.cols=t,i}used(t,n){return this.cellUsed[`c-${t}-${n}`]||!1}use(t,n){const i=this;i.cellUsed[`c-${t}-${n}`]=!0}moveToNextCell(){const t=this,n=t.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)}getPos(t){const n=this,{begin:i,cellWidth:r,cellHeight:l}=n;let f,w;const R=n.id2manPos[t.id];if(R)f=R.col*r+r/2+i[0],w=R.row*l+l/2+i[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();f=n.col*r+r/2+i[0],w=n.row*l+l/2+i[1],n.use(n.row,n.col),n.moveToNextCell()}t.x=f,t.y=w}getType(){return"grid"}}const ae=(e,t)=>{let n;return e?T(e)?n=i=>e:n=e:n=i=>t||1,n};class ue extends de{constructor(t){super();this.maxIteration=500,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.collideStrength=1,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.animate=!0,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){var t,n;const i=this,r=i.nodes;if(i.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(i.timeInterval),!r||r.length===0){(t=i.onLayoutEnd)===null||t===void 0||t.call(i);return}!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);const l=i.center;if(r.length===1){r[0].x=l[0],r[0].y=l[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}const f={},w={};r.forEach((fe,Le)=>{T(fe.x)||(fe.x=Math.random()*i.width),T(fe.y)||(fe.y=Math.random()*i.height),f[fe.id]=fe,w[fe.id]=Le}),i.nodeMap=f,i.nodeIdxMap=w,i.linkDistance=ae(i.linkDistance,1),i.nodeStrength=ae(i.nodeStrength,1),i.edgeStrength=ae(i.edgeStrength,1);const R=i.nodeSize;let H;if(i.preventOverlap){const fe=i.nodeSpacing;let Le;T(fe)?Le=()=>fe:N(fe)?Le=fe:Le=()=>0,R?j(R)?H=Me=>Math.max(R[0],R[1])+Le(Me):H=Me=>R+Le(Me):H=Me=>Me.size?j(Me.size)?Math.max(Me.size[0],Me.size[1])+Le(Me):x(Me.size)?Math.max(Me.size.width,Me.size.height)+Le(Me):Me.size+Le(Me):10+Le(Me)}i.nodeSize=H;const Y=i.edges;i.degrees=D(r.length,i.nodeIdxMap,Y),i.getMass||(i.getMass=fe=>fe.mass||i.degrees[i.nodeIdxMap[fe.id]]||1),i.run()}run(){var t;const n=this,{maxIteration:i,nodes:r,workerEnabled:l,minMovement:f,animate:w}=n;if(!!r)if(l||!w){for(let R=0;R<i;R++){const H=n.runOneStep(R);if(n.reachMoveThreshold(r,H,f))break}(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window=="undefined")return;let R=0;this.timeInterval=window.setInterval(()=>{var H,Y;if(!r)return;const fe=n.runOneStep(R)||[];n.reachMoveThreshold(r,fe,f)&&((H=n.onLayoutEnd)===null||H===void 0||H.call(n),window.clearInterval(n.timeInterval)),R++,R>=i&&((Y=n.onLayoutEnd)===null||Y===void 0||Y.call(n),window.clearInterval(n.timeInterval))},0)}}reachMoveThreshold(t,n,i){let r=0;return t.forEach((l,f)=>{const w=l.x-n[f].x,R=l.y-n[f].y;r+=Math.sqrt(w*w+R*R)}),r/=t.length,r<i}runOneStep(t){var n;const i=this,{nodes:r,edges:l}=i,f=[],w=[];if(!r)return;r.forEach((Y,fe)=>{f[2*fe]=0,f[2*fe+1]=0,w[2*fe]=0,w[2*fe+1]=0}),i.calRepulsive(f,r),l&&i.calAttractive(f,l),i.calGravity(f,r);const R=Math.max(.02,i.interval-t*.002);i.updateVelocity(f,w,R,r);const H=[];return r.forEach(Y=>{H.push({x:Y.x,y:Y.y})}),i.updatePosition(w,R,r),(n=i.tick)===null||n===void 0||n.call(i),H}calRepulsive(t,n){const i=this,{getMass:r,factor:l,coulombDisScale:f,preventOverlap:w,collideStrength:R=1}=i,H=i.nodeStrength,Y=i.nodeSize;n.forEach((fe,Le)=>{const Me=r?r(fe):1;n.forEach((We,Ze)=>{if(Le>=Ze)return;let He=fe.x-We.x,et=fe.y-We.y;He===0&&et===0&&(He=Math.random()*.01,et=Math.random()*.01);const it=He*He+et*et,ut=Math.sqrt(it),Mt=(ut+.1)*f,Rt=He/ut,un=et/ut,jn=(H(fe)+H(We))*.5*l/(Mt*Mt),xn=r?r(We):1;if(t[2*Le]+=Rt*jn,t[2*Le+1]+=un*jn,t[2*Ze]-=Rt*jn,t[2*Ze+1]-=un*jn,w&&(Y(fe)+Y(We))/2>ut){const ei=R*(H(fe)+H(We))*.5/it;t[2*Le]+=Rt*ei/Me,t[2*Le+1]+=un*ei/Me,t[2*Ze]-=Rt*ei/xn,t[2*Ze+1]-=un*ei/xn}})})}calAttractive(t,n){const i=this,{nodeMap:r,nodeIdxMap:l,linkDistance:f,edgeStrength:w}=i,R=i.nodeSize,H=i.getMass;n.forEach((Y,fe)=>{const Le=g(Y,"source"),Me=g(Y,"target"),We=r[Le],Ze=r[Me];let He=Ze.x-We.x,et=Ze.y-We.y;He===0&&et===0&&(He=Math.random()*.01,et=Math.random()*.01);const it=Math.sqrt(He*He+et*et),ut=He/it,Mt=et/it,jn=((f(Y,We,Ze)||1+(R(We)+R(We)||0)/2)-it)*w(Y),xn=l[Le],ei=l[Me],ti=H?H(We):1,_i=H?H(Ze):1;t[2*xn]-=ut*jn/ti,t[2*xn+1]-=Mt*jn/ti,t[2*ei]+=ut*jn/_i,t[2*ei+1]+=Mt*jn/_i})}calGravity(t,n){const i=this,r=i.center,l=i.gravity,f=i.degrees,w=n.length;for(let R=0;R<w;R++){const H=n[R];let Y=H.x-r[0],fe=H.y-r[1],Le=l;if(i.getCenter){const Me=i.getCenter(H,f[R]);Me&&T(Me[0])&&T(Me[1])&&T(Me[2])&&(Y=H.x-Me[0],fe=H.y-Me[1],Le=Me[2])}!Le||(t[2*R]-=Le*Y,t[2*R+1]-=Le*fe)}}updateVelocity(t,n,i,r){const l=this,f=i*l.damping;r.forEach((w,R)=>{let H=t[2*R]*f||.01,Y=t[2*R+1]*f||.01;const fe=Math.sqrt(H*H+Y*Y);if(fe>l.maxSpeed){const Le=l.maxSpeed/fe;H=Le*H,Y=Le*Y}n[2*R]=H,n[2*R+1]=Y})}updatePosition(t,n,i){i.forEach((r,l)=>{if(T(r.fx)&&T(r.fy)){r.x=r.fx,r.y=r.fy;return}const f=t[2*l]*n,w=t[2*l+1]*n;r.x+=f,r.y+=w})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"gForce"}}function te(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return K(this.cover(t,n),t,n,e)}function K(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,l=e._root,f={data:i},w=e._x0,R=e._y0,H=e._x1,Y=e._y1,fe,Le,Me,We,Ze,He,et,it;if(!l)return e._root=f,e;for(;l.length;)if((Ze=t>=(fe=(w+H)/2))?w=fe:H=fe,(He=n>=(Le=(R+Y)/2))?R=Le:Y=Le,r=l,!(l=l[et=He<<1|Ze]))return r[et]=f,e;if(Me=+e._x.call(null,l.data),We=+e._y.call(null,l.data),t===Me&&n===We)return f.next=l,r?r[et]=f:e._root=f,e;do r=r?r[et]=new Array(4):e._root=new Array(4),(Ze=t>=(fe=(w+H)/2))?w=fe:H=fe,(He=n>=(Le=(R+Y)/2))?R=Le:Y=Le;while((et=He<<1|Ze)==(it=(We>=Le)<<1|Me>=fe));return r[it]=l,r[et]=f,e}function U(e){var t,n,i=e.length,r,l,f=new Array(i),w=new Array(i),R=Infinity,H=Infinity,Y=-Infinity,fe=-Infinity;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(l=+this._y.call(null,t))||(f[n]=r,w[n]=l,r<R&&(R=r),r>Y&&(Y=r),l<H&&(H=l),l>fe&&(fe=l));if(R>Y||H>fe)return this;for(this.cover(R,H).cover(Y,fe),n=0;n<i;++n)K(this,f[n],w[n],e[n]);return this}function ee(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,l=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,l=(i=Math.floor(t))+1;else{for(var f=r-n||1,w=this._root,R,H;n>e||e>=r||i>t||t>=l;)switch(H=(t<i)<<1|e<n,R=new Array(4),R[H]=w,w=R,f*=2,H){case 0:r=n+f,l=i+f;break;case 1:n=r-f,l=i+f;break;case 2:r=n+f,i=l-f;break;case 3:n=r-f,i=l-f;break}this._root&&this._root.length&&(this._root=w)}return this._x0=n,this._y0=i,this._x1=r,this._y1=l,this}function X(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function le(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function oe(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Ce(e,t,n){var i,r=this._x0,l=this._y0,f,w,R,H,Y=this._x1,fe=this._y1,Le=[],Me=this._root,We,Ze;for(Me&&Le.push(new oe(Me,r,l,Y,fe)),n==null?n=Infinity:(r=e-n,l=t-n,Y=e+n,fe=t+n,n*=n);We=Le.pop();)if(!(!(Me=We.node)||(f=We.x0)>Y||(w=We.y0)>fe||(R=We.x1)<r||(H=We.y1)<l))if(Me.length){var He=(f+R)/2,et=(w+H)/2;Le.push(new oe(Me[3],He,et,R,H),new oe(Me[2],f,et,He,H),new oe(Me[1],He,w,R,et),new oe(Me[0],f,w,He,et)),(Ze=(t>=et)<<1|e>=He)&&(We=Le[Le.length-1],Le[Le.length-1]=Le[Le.length-1-Ze],Le[Le.length-1-Ze]=We)}else{var it=e-+this._x.call(null,Me.data),ut=t-+this._y.call(null,Me.data),Mt=it*it+ut*ut;if(Mt<n){var Rt=Math.sqrt(n=Mt);r=e-Rt,l=t-Rt,Y=e+Rt,fe=t+Rt,i=Me.data}}return i}function ye(e){if(isNaN(Y=+this._x.call(null,e))||isNaN(fe=+this._y.call(null,e)))return this;var t,n=this._root,i,r,l,f=this._x0,w=this._y0,R=this._x1,H=this._y1,Y,fe,Le,Me,We,Ze,He,et;if(!n)return this;if(n.length)for(;;){if((We=Y>=(Le=(f+R)/2))?f=Le:R=Le,(Ze=fe>=(Me=(w+H)/2))?w=Me:H=Me,t=n,!(n=n[He=Ze<<1|We]))return this;if(!n.length)break;(t[He+1&3]||t[He+2&3]||t[He+3&3])&&(i=t,et=He)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(l=n.next)&&delete n.next,r?(l?r.next=l:delete r.next,this):t?(l?t[He]=l:delete t[He],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[et]=n:this._root=n),this):(this._root=l,this)}function ke(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Te(){return this._root}function ge(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function we(e){var t=[],n,i=this._root,r,l,f,w,R;for(i&&t.push(new oe(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,l=n.x0,f=n.y0,w=n.x1,R=n.y1)&&i.length){var H=(l+w)/2,Y=(f+R)/2;(r=i[3])&&t.push(new oe(r,H,Y,w,R)),(r=i[2])&&t.push(new oe(r,l,Y,H,R)),(r=i[1])&&t.push(new oe(r,H,f,w,Y)),(r=i[0])&&t.push(new oe(r,l,f,H,Y))}return this}function ze(e){var t=[],n=[],i;for(this._root&&t.push(new oe(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var l,f=i.x0,w=i.y0,R=i.x1,H=i.y1,Y=(f+R)/2,fe=(w+H)/2;(l=r[0])&&t.push(new oe(l,f,w,Y,fe)),(l=r[1])&&t.push(new oe(l,Y,w,R,fe)),(l=r[2])&&t.push(new oe(l,f,fe,Y,H)),(l=r[3])&&t.push(new oe(l,Y,fe,R,H))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Qe(e){return e[0]}function Pe(e){return arguments.length?(this._x=e,this):this._x}function Oe(e){return e[1]}function qe(e){return arguments.length?(this._y=e,this):this._y}function Je(e,t,n){var i=new Ne(t??Qe,n??Oe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Ne(e,t,n,i,r,l){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=l,this._root=void 0}function Fe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ne=Je.prototype=Ne.prototype;ne.copy=function(){var e=new Ne(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=Fe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=Fe(i));return e},ne.add=te,ne.addAll=U,ne.cover=ee,ne.data=X,ne.extent=le,ne.find=Ce,ne.remove=ye,ne.removeAll=ke,ne.root=Te,ne.size=ge,ne.visit=we,ne.visitAfter=ze,ne.x=Pe,ne.y=qe;function Q(e){return function(){return e}}function ie(e){return(e()-.5)*1e-6}var xe={value:function(){}};function be(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ge(n)}function Ge(e){this._=e}function nt(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ge.prototype=be.prototype={constructor:Ge,on:function(t,n){var i=this._,r=nt(t+"",i),l,f=-1,w=r.length;if(arguments.length<2){for(;++f<w;)if((l=(t=r[f]).type)&&(l=_t(i[l],t.name)))return l;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++f<w;)if(l=(t=r[f]).type)i[l]=Ot(i[l],t.name,n);else if(n==null)for(l in i)i[l]=Ot(i[l],t.name,null);return this},copy:function(){var t={},n=this._;for(var i in n)t[i]=n[i].slice();return new Ge(t)},call:function(t,n){if((l=arguments.length-2)>0)for(var i=new Array(l),r=0,l,f;r<l;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(f=this._[t],r=0,l=f.length;r<l;++r)f[r].value.apply(n,i)},apply:function(t,n,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],l=0,f=r.length;l<f;++l)r[l].value.apply(n,i)}};function _t(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Ot(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=xe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var rn=be,gt=0,Ue=0,Ye=0,dt=1e3,Re,Ve,at=0,pt=0,Be=0,je=typeof performance=="object"&&performance.now?performance:Date,Et=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Dt(){return pt||(Et(Xe),pt=je.now()+Be)}function Xe(){pt=0}function ft(){this._call=this._time=this._next=null}ft.prototype=an.prototype={constructor:ft,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Dt():+n)+(t==null?0:+t),!this._next&&Ve!==this&&(Ve?Ve._next=this:Re=this,Ve=this),this._call=e,this._time=n,pn()},stop:function(){this._call&&(this._call=null,this._time=Infinity,pn())}};function an(e,t,n){var i=new ft;return i.restart(e,t,n),i}function An(){Dt(),++gt;for(var e=Re,t;e;)(t=pt-e._time)>=0&&e._call.call(null,t),e=e._next;--gt}function Fn(){pt=(at=je.now())+Be,gt=Ue=0;try{An()}finally{gt=0,Kt(),pt=0}}function Ht(){var e=je.now(),t=e-at;t>dt&&(Be-=t,at=e)}function Kt(){for(var e,t=Re,n,i=Infinity;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Re=n);Ve=e,pn(i)}function pn(e){if(!gt){Ue&&(Ue=clearTimeout(Ue));var t=e-pt;t>24?(e<Infinity&&(Ue=setTimeout(Fn,e-je.now()-Be)),Ye&&(Ye=clearInterval(Ye))):(Ye||(at=je.now(),Ye=setInterval(Ht,dt)),gt=1,Et(Fn))}}var Vn=1664525,kt=1013904223,Zt=4294967296;function wn(){var e=1;return function(){return(e=(Vn*e+kt)%Zt)/Zt}}function Pi(e){return e.x}function Fi(e){return e.y}var Ji=10,si=Math.PI*(3-Math.sqrt(5));function zt(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),l=0,f=.6,w=new Map,R=an(fe),H=rn("tick","end"),Y=wn();e==null&&(e=[]);function fe(){Le(),H.call("tick",t),n<i&&(R.stop(),H.call("end",t))}function Le(Ze){var He,et=e.length,it;Ze===void 0&&(Ze=1);for(var ut=0;ut<Ze;++ut)for(n+=(l-n)*r,w.forEach(function(Mt){Mt(n)}),He=0;He<et;++He)it=e[He],it.fx==null?it.x+=it.vx*=f:(it.x=it.fx,it.vx=0),it.fy==null?it.y+=it.vy*=f:(it.y=it.fy,it.vy=0);return t}function Me(){for(var Ze=0,He=e.length,et;Ze<He;++Ze){if(et=e[Ze],et.index=Ze,et.fx!=null&&(et.x=et.fx),et.fy!=null&&(et.y=et.fy),isNaN(et.x)||isNaN(et.y)){var it=Ji*Math.sqrt(.5+Ze),ut=Ze*si;et.x=it*Math.cos(ut),et.y=it*Math.sin(ut)}(isNaN(et.vx)||isNaN(et.vy))&&(et.vx=et.vy=0)}}function We(Ze){return Ze.initialize&&Ze.initialize(e,Y),Ze}return Me(),t={tick:Le,restart:function(){return R.restart(fe),t},stop:function(){return R.stop(),t},nodes:function(He){return arguments.length?(e=He,Me(),w.forEach(We),t):e},alpha:function(He){return arguments.length?(n=+He,t):n},alphaMin:function(He){return arguments.length?(i=+He,t):i},alphaDecay:function(He){return arguments.length?(r=+He,t):+r},alphaTarget:function(He){return arguments.length?(l=+He,t):l},velocityDecay:function(He){return arguments.length?(f=1-He,t):1-f},randomSource:function(He){return arguments.length?(Y=He,w.forEach(We),t):Y},force:function(He,et){return arguments.length>1?(et==null?w.delete(He):w.set(He,We(et)),t):w.get(He)},find:function(He,et,it){var ut=0,Mt=e.length,Rt,un,jn,xn,ei;for(it==null?it=Infinity:it*=it,ut=0;ut<Mt;++ut)xn=e[ut],Rt=He-xn.x,un=et-xn.y,jn=Rt*Rt+un*un,jn<it&&(ei=xn,it=jn);return ei},on:function(He,et){return arguments.length>1?(H.on(He,et),t):H.on(He)}}}function Vt(){var e,t,n,i,r=Q(-30),l,f=1,w=Infinity,R=.81;function H(Me){var We,Ze=e.length,He=Je(e,Pi,Fi).visitAfter(fe);for(i=Me,We=0;We<Ze;++We)t=e[We],He.visit(Le)}function Y(){if(!!e){var Me,We=e.length,Ze;for(l=new Array(We),Me=0;Me<We;++Me)Ze=e[Me],l[Ze.index]=+r(Ze,Me,e)}}function fe(Me){var We=0,Ze,He,et=0,it,ut,Mt;if(Me.length){for(it=ut=Mt=0;Mt<4;++Mt)(Ze=Me[Mt])&&(He=Math.abs(Ze.value))&&(We+=Ze.value,et+=He,it+=He*Ze.x,ut+=He*Ze.y);Me.x=it/et,Me.y=ut/et}else{Ze=Me,Ze.x=Ze.data.x,Ze.y=Ze.data.y;do We+=l[Ze.data.index];while(Ze=Ze.next)}Me.value=We}function Le(Me,We,Ze,He){if(!Me.value)return!0;var et=Me.x-t.x,it=Me.y-t.y,ut=He-We,Mt=et*et+it*it;if(ut*ut/R<Mt)return Mt<w&&(et===0&&(et=ie(n),Mt+=et*et),it===0&&(it=ie(n),Mt+=it*it),Mt<f&&(Mt=Math.sqrt(f*Mt)),t.vx+=et*Me.value*i/Mt,t.vy+=it*Me.value*i/Mt),!0;if(Me.length||Mt>=w)return;(Me.data!==t||Me.next)&&(et===0&&(et=ie(n),Mt+=et*et),it===0&&(it=ie(n),Mt+=it*it),Mt<f&&(Mt=Math.sqrt(f*Mt)));do Me.data!==t&&(ut=l[Me.data.index]*i/Mt,t.vx+=et*ut,t.vy+=it*ut);while(Me=Me.next)}return H.initialize=function(Me,We){e=Me,n=We,Y()},H.strength=function(Me){return arguments.length?(r=typeof Me=="function"?Me:Q(+Me),Y(),H):r},H.distanceMin=function(Me){return arguments.length?(f=Me*Me,H):Math.sqrt(f)},H.distanceMax=function(Me){return arguments.length?(w=Me*Me,H):Math.sqrt(w)},H.theta=function(Me){return arguments.length?(R=Me*Me,H):Math.sqrt(R)},H}function vn(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var l,f=n.length,w,R=0,H=0;for(l=0;l<f;++l)w=n[l],R+=w.x,H+=w.y;for(R=(R/f-e)*i,H=(H/f-t)*i,l=0;l<f;++l)w=n[l],w.x-=R,w.y-=H}return r.initialize=function(l){n=l},r.x=function(l){return arguments.length?(e=+l,r):e},r.y=function(l){return arguments.length?(t=+l,r):t},r.strength=function(l){return arguments.length?(i=+l,r):i},r}function Sn(e){return e.index}function Bn(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function mn(e){var t=Sn,n=fe,i,r=Q(30),l,f,w,R,H,Y=1;e==null&&(e=[]);function fe(He){return 1/Math.min(w[He.source.index],w[He.target.index])}function Le(He){for(var et=0,it=e.length;et<Y;++et)for(var ut=0,Mt,Rt,un,jn,xn,ei,ti;ut<it;++ut)Mt=e[ut],Rt=Mt.source,un=Mt.target,jn=un.x+un.vx-Rt.x-Rt.vx||ie(H),xn=un.y+un.vy-Rt.y-Rt.vy||ie(H),ei=Math.sqrt(jn*jn+xn*xn),ei=(ei-l[ut])/ei*He*i[ut],jn*=ei,xn*=ei,un.vx-=jn*(ti=R[ut]),un.vy-=xn*ti,Rt.vx+=jn*(ti=1-ti),Rt.vy+=xn*ti}function Me(){if(!!f){var He,et=f.length,it=e.length,ut=new Map(f.map(function(Rt,un){return[t(Rt,un,f),Rt]})),Mt;for(He=0,w=new Array(et);He<it;++He)Mt=e[He],Mt.index=He,typeof Mt.source!="object"&&(Mt.source=Bn(ut,Mt.source)),typeof Mt.target!="object"&&(Mt.target=Bn(ut,Mt.target)),w[Mt.source.index]=(w[Mt.source.index]||0)+1,w[Mt.target.index]=(w[Mt.target.index]||0)+1;for(He=0,R=new Array(it);He<it;++He)Mt=e[He],R[He]=w[Mt.source.index]/(w[Mt.source.index]+w[Mt.target.index]);i=new Array(it),We(),l=new Array(it),Ze()}}function We(){if(!!f)for(var He=0,et=e.length;He<et;++He)i[He]=+n(e[He],He,e)}function Ze(){if(!!f)for(var He=0,et=e.length;He<et;++He)l[He]=+r(e[He],He,e)}return Le.initialize=function(He,et){f=He,H=et,Me()},Le.links=function(He){return arguments.length?(e=He,Me(),Le):e},Le.id=function(He){return arguments.length?(t=He,Le):t},Le.iterations=function(He){return arguments.length?(Y=+He,Le):Y},Le.strength=function(He){return arguments.length?(n=typeof He=="function"?He:Q(+He),We(),Le):n},Le.distance=function(He){return arguments.length?(r=typeof He=="function"?He:Q(+He),Ze(),Le):r},Le}function Jt(e){return e.x+e.vx}function En(e){return e.y+e.vy}function $t(e){var t,n,i,r=1,l=1;typeof e!="function"&&(e=Q(e==null?1:+e));function f(){for(var H,Y=t.length,fe,Le,Me,We,Ze,He,et=0;et<l;++et)for(fe=Je(t,Jt,En).visitAfter(w),H=0;H<Y;++H)Le=t[H],Ze=n[Le.index],He=Ze*Ze,Me=Le.x+Le.vx,We=Le.y+Le.vy,fe.visit(it);function it(ut,Mt,Rt,un,jn){var xn=ut.data,ei=ut.r,ti=Ze+ei;if(xn){if(xn.index>Le.index){var _i=Me-xn.x-xn.vx,Hn=We-xn.y-xn.vy,Li=_i*_i+Hn*Hn;Li<ti*ti&&(_i===0&&(_i=ie(i),Li+=_i*_i),Hn===0&&(Hn=ie(i),Li+=Hn*Hn),Li=(ti-(Li=Math.sqrt(Li)))/Li*r,Le.vx+=(_i*=Li)*(ti=(ei*=ei)/(He+ei)),Le.vy+=(Hn*=Li)*ti,xn.vx-=_i*(ti=1-ti),xn.vy-=Hn*ti)}return}return Mt>Me+ti||un<Me-ti||Rt>We+ti||jn<We-ti}}function w(H){if(H.data)return H.r=n[H.data.index];for(var Y=H.r=0;Y<4;++Y)H[Y]&&H[Y].r>H.r&&(H.r=H[Y].r)}function R(){if(!!t){var H,Y=t.length,fe;for(n=new Array(Y),H=0;H<Y;++H)fe=t[H],n[fe.index]=+e(fe,H,t)}}return f.initialize=function(H,Y){t=H,i=Y,R()},f.iterations=function(H){return arguments.length?(l=+H,f):l},f.strength=function(H){return arguments.length?(r=+H,f):r},f.radius=function(H){return arguments.length?(e=typeof H=="function"?H:Q(+H),R(),f):e},f}function sn(e){var t=Q(.1),n,i,r;typeof e!="function"&&(e=Q(e==null?0:+e));function l(w){for(var R=0,H=n.length,Y;R<H;++R)Y=n[R],Y.vx+=(r[R]-Y.x)*i[R]*w}function f(){if(!!n){var w,R=n.length;for(i=new Array(R),r=new Array(R),w=0;w<R;++w)i[w]=isNaN(r[w]=+e(n[w],w,n))?0:+t(n[w],w,n)}}return l.initialize=function(w){n=w,f()},l.strength=function(w){return arguments.length?(t=typeof w=="function"?w:Q(+w),f(),l):t},l.x=function(w){return arguments.length?(e=typeof w=="function"?w:Q(+w),f(),l):e},l}function Tn(e){var t=Q(.1),n,i,r;typeof e!="function"&&(e=Q(e==null?0:+e));function l(w){for(var R=0,H=n.length,Y;R<H;++R)Y=n[R],Y.vy+=(r[R]-Y.y)*i[R]*w}function f(){if(!!n){var w,R=n.length;for(i=new Array(R),r=new Array(R),w=0;w<R;++w)i[w]=isNaN(r[w]=+e(n[w],w,n))?0:+t(n[w],w,n)}}return l.initialize=function(w){n=w,f()},l.strength=function(w){return arguments.length?(t=typeof w=="function"?w:Q(+w),f(),l):t},l.y=function(w){return arguments.length?(e=typeof w=="function"?w:Q(+w),f(),l):e},l}function ri(){function e(ur){return()=>ur}let t=ur=>ur.cluster,n=e(1),i=e(-1),r=e(100),l=e(.1),f=[0,0],w=[],R={},H=[],Y=100,fe=100,Le={none:{x:0,y:0}},Me=[],We,Ze="force",He=!0,et=.1;function it(ur){if(!He)return it;We.tick(),xn();for(let Ao=0,gs=w.length,po,Wo=ur*et;Ao<gs;++Ao)po=w[Ao],po.vx+=(Le[t(po)].x-po.x)*Wo,po.vy+=(Le[t(po)].y-po.y)*Wo}function ut(){!w||Mt()}function Mt(){if(!w||!w.length)return;if(t(w[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const ur=Rt();We=zt(ur.nodes).force("x",sn(Y).strength(.1)).force("y",Tn(fe).strength(.1)).force("collide",$t(Ao=>Ao.r).iterations(4)).force("charge",Vt().strength(i)).force("links",mn(ur.nodes.length?ur.links:[]).distance(r).strength(l)),Me=We.nodes(),xn()}function Rt(){const ur=[],Ao=[],gs={};let po=[],Wo={},fo=[];return Wo=un(w),fo=jn(H),po=Object.keys(Wo),po.forEach((ds,Ka)=>{const ys=Wo[ds];ur.push({id:ds,size:ys.count,r:Math.sqrt(ys.sumforceNodeSize/Math.PI)}),gs[ds]=Ka}),fo.forEach(ds=>{const Ka=g(ds,"source"),ys=g(ds,"target"),Qc=gs[Ka],Jc=gs[ys];Qc!==void 0&&Jc!==void 0&&Ao.push({source:Qc,target:Jc,count:ds.count})}),{nodes:ur,links:Ao}}function un(ur){const Ao={};return ur.forEach(gs=>{const po=t(gs);Ao[po]||(Ao[po]={count:0,sumforceNodeSize:0})}),ur.forEach(gs=>{const po=t(gs),Wo=n(gs),fo=Ao[po];fo.count=fo.count+1,fo.sumforceNodeSize=fo.sumforceNodeSize+Math.PI*(Wo*Wo)*1.3,Ao[po]=fo}),Ao}function jn(ur){const Ao={},gs=[];return ur.forEach(Wo=>{const fo=ei(Wo);let ds=0;Ao[fo]!==void 0&&(ds=Ao[fo]),ds+=1,Ao[fo]=ds}),Object.entries(Ao).forEach(([Wo,fo])=>{const ds=Wo.split("~")[0],Ka=Wo.split("~")[1];ds!==void 0&&Ka!==void 0&&gs.push({source:ds,target:Ka,count:fo})}),gs}function xn(){return Le={none:{x:0,y:0}},Me.forEach(ur=>{Le[ur.id]={x:ur.x-f[0],y:ur.y-f[1]}}),Le}function ei(ur){const Ao=g(ur,"source"),gs=g(ur,"target"),po=t(R[Ao]),Wo=t(R[gs]);return po<=Wo?`${po}~${Wo}`:`${Wo}~${po}`}function ti(ur){R={},ur.forEach(Ao=>{R[Ao.id]=Ao})}function _i(ur){return arguments.length?(Ze=ur,ut(),it):Ze}function Hn(ur){return arguments.length?typeof ur=="string"?(t=Ao=>Ao[ur],it):(t=ur,it):t}function Li(ur){return arguments.length?(He=ur,it):He}function yi(ur){return arguments.length?(et=ur,it):et}function fr(ur){return arguments.length?(Y=ur,it):Y}function To(ur){return arguments.length?(fe=ur,it):fe}function Oo(ur){return arguments.length?(ti(ur||[]),w=ur||[],it):w}function Mo(ur){return arguments.length?(H=ur||[],ut(),it):H}function Os(ur){return arguments.length?(typeof ur=="function"?n=ur:n=e(+ur),ut(),it):n}function Aa(ur){return arguments.length?(typeof ur=="function"?i=ur:i=e(+ur),ut(),it):i}function eo(ur){return arguments.length?(typeof ur=="function"?r=ur:r=e(+ur),ut(),it):r}function xo(ur){return arguments.length?(typeof ur=="function"?l=ur:l=e(+ur),ut(),it):l}function Gs(ur){return arguments.length?(f=ur,it):f}return it.initialize=ur=>{w=ur,ut()},it.template=_i,it.groupBy=Hn,it.enableGrouping=Li,it.strength=yi,it.centerX=fr,it.centerY=To,it.nodes=Oo,it.links=Mo,it.forceNodeSize=Os,it.nodeSize=it.forceNodeSize,it.forceCharge=Aa,it.forceLinkDistance=eo,it.forceLinkStrength=xo,it.offset=Gs,it.getFocis=xn,it}const oi={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},On={gForce:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};class Qn extends de{constructor(t){super();this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,t&&this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(t){const n=this;n.nodes=t.nodes||[];const i=t.edges||[];n.edges=i.map(r=>{const l={},f=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(r).forEach(w=>{f.indexOf(w)>-1||(l[w]=r[w])}),l}),n.ticking=!1}execute(t){const n=this,i=n.nodes,r=n.edges;if(n.ticking)return;let l=n.forceSimulation;const f=n.alphaMin,w=n.alphaDecay,R=n.alpha;if(l){if(t){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(i),n.clusterForce.links(r)),l.nodes(i),r&&n.edgeForce)n.edgeForce.links(r);else if(r&&!n.edgeForce){const H=mn().id(Y=>Y.id).links(r);n.edgeStrength&&H.strength(n.edgeStrength),n.linkDistance&&H.distance(n.linkDistance),n.edgeForce=H,l.force("link",H)}}n.preventOverlap&&n.overlapProcess(l),l.alpha(R).restart(),this.ticking=!0}else try{const H=Vt();if(n.nodeStrength&&H.strength(n.nodeStrength),l=zt().nodes(i),n.clustering){const Y=ri();Y.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),r&&Y.links(r),i&&Y.nodes(i),Y.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=Y,l.force("group",Y)}if(l.force("center",vn(n.center[0],n.center[1])).force("charge",H).alpha(R).alphaDecay(w).alphaMin(f),n.preventOverlap&&n.overlapProcess(l),r){const Y=mn().id(fe=>fe.id).links(r);n.edgeStrength&&Y.strength(n.edgeStrength),n.linkDistance&&Y.distance(n.linkDistance),n.edgeForce=Y,l.force("link",Y)}if(n.workerEnabled&&!Lr()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)l.on("tick",()=>{n.tick()}).on("end",()=>{n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{l.stop();const Y=Yi(l);for(let fe=1;fe<=Y;fe++)l.tick(),postMessage({nodes:i,currentTick:fe,totalTicks:Y,type:oi.TICK},void 0);n.ticking=!1}n.forceSimulation=l,n.ticking=!0}catch(H){n.ticking=!1,console.warn(H)}}overlapProcess(t){const n=this,i=n.nodeSize,r=n.nodeSpacing;let l,f;const w=n.collideStrength;if(T(r)?f=()=>r:N(r)?f=r:f=()=>0,!i)l=R=>R.size?j(R.size)?(R.size[0]>R.size[1]?R.size[0]:R.size[1])/2+f(R):x(R.size)?(R.size.width>R.size.height?R.size.width:R.size.height)/2+f(R):R.size/2+f(R):10+f(R);else if(N(i))l=R=>i(R)+f(R);else if(j(i)){const H=(i[0]>i[1]?i[0]:i[1])/2;l=Y=>H+f(Y)}else if(T(i)){const R=i/2;l=H=>R+f(H)}else l=()=>10;t.force("collisionForce",$t(l).strength(w))}updateCfg(t){const n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,t)}destroy(){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0}}function Yi(e){const t=e.alphaMin(),n=e.alphaTarget(),i=e.alpha(),r=Math.log((t-n)/(i-n))/Math.log(1-e.alphaDecay());return Math.ceil(r)}function Lr(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Dr(e,t,n,i){e.forEach((r,l)=>{e[l].children=[],e[l].parent=[]}),i?t.forEach(r=>{const l=g(r,"source"),f=g(r,"target");let w=0;l&&(w=n[l]);let R=0;f&&(R=n[f]);const H=e[w].children,Y=e[R].parent;H.push(e[R].id),Y.push(e[w].id)}):t.forEach(r=>{const l=g(r,"source"),f=g(r,"target");let w=0;l&&(w=n[l]);let R=0;f&&(R=n[f]);const H=e[w].children,Y=e[R].children;H.push(e[R].id),Y.push(e[w].id)})}function Fr(e,t,n){const i=n.length;for(let r=0;r<i;r++){const l=g(n[r],"source"),f=g(n[r],"target");if(e.id===l&&t.id===f||t.id===l&&e.id===f)return!0}return!1}function Sr(e,t){const n=e.degree,i=t.degree;return n<i?-1:n>i?1:0}class Ro extends de{constructor(t){super();this.radius=null,this.nodeSize=void 0,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(t)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){var t;const n=this,i=n.nodes,r=n.edges,l=i.length;if(l===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);const f=n.center;if(l===1){i[0].x=f[0],i[0].y=f[1],n.onLayoutEnd&&n.onLayoutEnd();return}let{radius:w,startRadius:R,endRadius:H}=n;const{divisions:Y,startAngle:fe,endAngle:Le,angleRatio:Me,ordering:We,clockwise:Ze,nodeSpacing:He,nodeSize:et}=n,it=(Le-fe)/l,ut={};i.forEach((xn,ei)=>{ut[xn.id]=ei}),n.nodeMap=ut;const Mt=D(i.length,ut,r);if(n.degrees=Mt,He){const xn=I(10,He),ei=I(10,et);let ti=-Infinity;i.forEach(Hn=>{const Li=ei(Hn);ti<Li&&(ti=Li)});let _i=0;i.forEach((Hn,Li)=>{Li===0?_i+=ti||10:_i+=(xn(Hn)||0)+(ti||10)}),w=_i/(2*Math.PI)}else!w&&!R&&!H?w=n.height>n.width?n.width/2:n.height/2:!R&&H?R=H:R&&!H&&(H=R);const Rt=it*Me;let un=[];We==="topology"?un=n.topologyOrdering():We==="topology-directed"?un=n.topologyOrdering(!0):We==="degree"?un=n.degreeOrdering():un=i;const jn=Math.ceil(l/Y);for(let xn=0;xn<l;++xn){let ei=w;!ei&&R!==null&&H!==null&&(ei=R+xn*(H-R)/(l-1)),ei||(ei=10+xn*100/(l-1));let ti=fe+xn%jn*Rt+2*Math.PI/Y*Math.floor(xn/jn);Ze||(ti=Le-xn%jn*Rt-2*Math.PI/Y*Math.floor(xn/jn)),un[xn].x=f[0]+Math.cos(ti)*ei,un[xn].y=f[1]+Math.sin(ti)*ei,un[xn].weight=Mt[xn]}return(t=n.onLayoutEnd)===null||t===void 0||t.call(n),{nodes:un,edges:this.edges}}topologyOrdering(t=!1){const n=this,i=n.degrees,r=n.edges,l=n.nodes,f=v(l),w=n.nodeMap,R=[f[0]],H=[l[0]],Y=[],fe=l.length;Y[0]=!0,Dr(f,r,w,t);let Le=0;return f.forEach((Me,We)=>{if(We!==0)if((We===fe-1||i[We]!==i[We+1]||Fr(R[Le],Me,r))&&!Y[We])R.push(Me),H.push(l[w[Me.id]]),Y[We]=!0,Le++;else{const Ze=R[Le].children;let He=!1;for(let it=0;it<Ze.length;it++){const ut=w[Ze[it]];if(i[ut]===i[We]&&!Y[ut]){R.push(f[ut]),H.push(l[w[f[ut].id]]),Y[ut]=!0,He=!0;break}}let et=0;for(;!He&&(Y[et]||(R.push(f[et]),H.push(l[w[f[et].id]]),Y[et]=!0,He=!0),et++,et!==fe););}}),H}degreeOrdering(){const t=this,n=t.nodes,i=[],r=t.degrees;return n.forEach((l,f)=>{l.degree=r[f],i.push(l)}),i.sort(Sr),i}getType(){return"circular"}}const to=(e,t)=>{if(e!=="next"&&e!=="prev")return t},no=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};class dr{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return no(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&no(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let i=n.prev;for(;i!==n;)t.push(JSON.stringify(i,to)),i=i==null?void 0:i.prev;return`[${t.join(", ")}]`}}var kn;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(kn||(kn={}));function bt(e,t){var n=e.get(t)||0;e.set(t,n+1)}function Bt(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function At(e,t,n,i){var r=String(t),l=String(n);if(!e&&r>l){var f=r;r=l,l=f}return r+kn.EDGE_KEY_DELIM+l+kn.EDGE_KEY_DELIM+(i===void 0?kn.DEFAULT_EDGE_NAME:i)}function Ke(e,t,n,i){var r=String(t),l=String(n),f={v:t,w:n};if(!e&&r>l){var w=f.v;f.v=f.w,f.w=w}return i!==void 0&&(f.name=i),f}function vt(e,t){return At(e,t.v,t.w,t.name)}function Lt(e){return typeof e=="function"}function tn(e){return e instanceof Graph}var dn=function(t){return t.nodes().map(function(n){var i=t.node(n),r=t.parent(n),l={id:n,value:i,parent:r};return l.value===void 0&&delete l.value,l.parent===void 0&&delete l.parent,l})},hn=function(t){return t.edges().map(function(n){var i=t.edge(n),r={v:n.v,w:n.w,value:i,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},Wn=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:dn(t),edges:hn(t),value:t.graph()};return n.value===void 0&&delete n.value,n},Gn=function(t){var n=new nr(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(i){n.setNode(i.id,i.value),i.parent&&n.setParent(i.id,i.parent)}),t.edges.forEach(function(i){n.setEdge(i.v,i.w,i.value,i.name)}),n};function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wi(Object(n),!0).forEach(function(i){Xi(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yr(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(H){throw H},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,f=!1,w;return{s:function(){n=n.call(e)},n:function(){var H=n.next();return l=H.done,H},e:function(H){f=!0,w=H},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(f)throw w}}}}function yr(e,t){if(!!e){if(typeof e=="string")return Xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xr(e,t)}}function Xr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Jr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $o(e,t,n){return t&&Jr(e.prototype,t),n&&Jr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ms(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cs={compound:!1,multigraph:!1,directed:!0},nr=$o(function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ms(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=kn.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return Lt(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var l;return!((l=t.inEdgesMap.get(r))===null||l===void 0?void 0:l.size)})},this.sinks=function(){return t.nodes().filter(function(r){var l;return!((l=t.outEdgesMap.get(r))===null||l===void 0?void 0:l.size)})},this.setNode=function(r,l){var f=t.nodesLabelMap,w=t.defaultNodeLabelFn,R=t.isCompound,H=t.parentMap,Y=t.childrenMap,fe=t.inEdgesMap,Le=t.outEdgesMap,Me=t.predecessorsMap,We=t.successorsMap;if(f.has(r))return l!==void 0&&f.set(r,l),t;if(f.set(r,l||w(r)),R()){var Ze;H==null||H.set(r,t.GRAPH_NODE),Y==null||Y.set(r,new Map),(Y==null?void 0:Y.has(t.GRAPH_NODE))||Y==null||Y.set(t.GRAPH_NODE,new Map),Y==null||(Ze=Y.get(t.GRAPH_NODE))===null||Ze===void 0||Ze.set(r,!0)}return[fe,Le,Me,We].forEach(function(He){return He.set(r,new Map)}),t.nodeCountNum+=1,t},this.setNodes=function(r,l){return r.map(function(f){return t.setNode(f,l)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var l,f=(l=t.parentMap)===null||l===void 0?void 0:l.get(r);if(f!==t.GRAPH_NODE)return f}},this.removeFromParentsChildList=function(r){var l=t.parentMap.get(r);t.childrenMap.get(l).delete(r)},this.setParent=function(r,l){var f,w;t.checkCompound();for(var R=l===void 0?t.GRAPH_NODE:l,H=t.parent(R);H;){if(r===H)throw new Error("Setting "+l+" as parent of "+r+" would create a cycle");H=t.parent(H)}l&&t.setNode(l),t.setNode(r),t.removeFromParentsChildList(r),(f=t.parentMap)===null||f===void 0||f.set(r,R);var Y=t.childrenMap.get(R);return Y.set(r,!0),(w=t.childrenMap)===null||w===void 0||w.set(R,Y),t},this.children=function(r){var l=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var f,w=(f=t.childrenMap)===null||f===void 0?void 0:f.get(l);return w?Array.from(w.keys()):void 0}if(l===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var l=t.predecessorsMap.get(r);return l?Array.from(l.keys()):void 0},this.successors=function(r){var l=t.successorsMap.get(r);return l?Array.from(l.keys()):void 0},this.neighbors=function(r){var l;if(!!t.hasNode(r))return Array.from(new Set((l=t.predecessors(r))===null||l===void 0?void 0:l.concat(t.successors(r))))},this.isLeaf=function(r){var l;if(t.isDirected()){var f;return!((f=t.successors(r))===null||f===void 0?void 0:f.length)}return!((l=t.neighbors(r))===null||l===void 0?void 0:l.length)},this.filterNodes=function(r){var l=t.directed,f=t.multigraph,w=t.compound,R=new e({directed:l,multigraph:f,compound:w});if(R.setGraph(t.graph()),t.nodes().forEach(function(Y){r(Y)&&R.setNode(Y,t.node(Y))}),t.edges().forEach(function(Y){R.hasNode(Y.v)&&R.hasNode(Y.w)&&R.setEdgeObj(Y,t.edge(Y))}),w){var H=function(fe){for(var Le=t.parent(fe);Le!==void 0&&!R.hasNode(Le);)Le=t.parent(Le);return Le};R.nodes().forEach(function(Y){R.setParent(Y,H(Y))})}return R},this.removeNode=function(r){if(t.hasNode(r)){var l=function(et){t.removeEdge(et.v,et.w,et.name)},f=t.inEdgesMap,w=t.outEdgesMap,R=t.predecessorsMap,H=t.successorsMap,Y=t.nodesLabelMap;if(t.isCompound()){var fe,Le,Me;t.removeFromParentsChildList(r),(fe=t.parentMap)===null||fe===void 0||fe.delete(r),(Le=t.children(r))===null||Le===void 0||Le.forEach(function(He){return t.setParent(He)}),(Me=t.childrenMap)===null||Me===void 0||Me.delete(r)}var We=f.get(r),Ze=w.get(r);Array.from(We.values()).forEach(function(He){return l(He)}),Array.from(Ze.values()).forEach(function(He){return l(He)}),Y.delete(r),f.delete(r),w.delete(r),R.delete(r),H.delete(r),t.nodeCountNum-=1}return t},this.setDefaultEdgeLabel=function(r){return Lt(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdge=function(r,l,f,w){var R,H,Y=Ke(t.isDirected(),r,l,w),fe=vt(t.isDirected(),Y),Le=Y.v,Me=Y.w;if(t.edgesLabelsMap.has(fe))return t.edgesLabelsMap.set(fe,f),t;if(w!==void 0&&!t.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");t.setNode(Le),t.setNode(Me),t.edgesLabelsMap.set(fe,f||t.defaultEdgeLabelFn(Le,Me,w)),Object.freeze(Y),t.edgesMap.set(fe,Y);var We=t.predecessorsMap.get(Me),Ze=t.successorsMap.get(Le);return bt(We,Le),bt(Ze,Me),(R=t.inEdgesMap.get(Me))===null||R===void 0||R.set(fe,Y),(H=t.outEdgesMap.get(Le))===null||H===void 0||H.set(fe,Y),t.edgeCountNum+=1,t},this.setEdgeObj=function(r,l){return t.setEdge(r.v,r.w,l,r.name)},this.setPath=function(r,l){return r.reduce(function(f,w){return t.setEdge(f,w,l),w}),t},this.edgeFromArgs=function(r,l,f){return t.edge({v:r,w:l,name:f})},this.edge=function(r){return t.edgesLabelsMap.get(vt(t.isDirected(),r))},this.hasEdge=function(r,l,f){return t.edgesLabelsMap.has(vt(t.isDirected(),{v:r,w:l,name:f}))},this.removeEdge=function(r,l,f){var w=At(t.isDirected(),r,l,f),R=t.edgesMap.get(w);if(R){var H=Ke(t.isDirected(),r,l,f),Y=H.v,fe=H.w;t.edgesLabelsMap.delete(w),t.edgesMap.delete(w);var Le=t.predecessorsMap.get(fe),Me=t.successorsMap.get(Y);Bt(Le,Y),Bt(Me,fe),t.inEdgesMap.get(fe).delete(w),t.outEdgesMap.get(Y).delete(w),t.edgeCountNum-=1}return t},this.removeEdgeObj=function(r){var l=r.v,f=r.w,w=r.name;return t.removeEdge(l,f,w)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,l){var f=t.inEdgesMap.get(r);if(f)return Array.from(f.values()).filter(function(w){return!l||w.v===l})},this.outEdges=function(r,l){var f=t.outEdgesMap.get(r);if(f)return Array.from(f.values()).filter(function(w){return!l||w.w===l})},this.nodeEdges=function(r,l){var f;if(!!t.hasNode(r))return(f=t.inEdges(r,l))===null||f===void 0?void 0:f.concat(t.outEdges(r,l))},this.toJSON=function(){return Wn(t)},this.nodeInDegree=function(r){var l=t.inEdgesMap.get(r);return l?l.size:0},this.nodeOutDegree=function(r){var l=t.outEdgesMap.get(r);return l?l.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w},this.countSelfLoops=function(){var r=0,l=Nr(t.edges()),f;try{for(l.s();!(f=l.n()).done;){var w=f.value;w.v===w.w&&(r+=1)}}catch(R){l.e(R)}finally{l.f()}return r};var i=Ci(Ci({},cs),n);this.compound=i.compound,this.directed=i.directed,this.multigraph=i.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)});nr.fromJSON=Gn;function tr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Br(e,t,n){return t&&tr(e.prototype,t),n&&tr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var so=Br(function e(){var t=this;Mr(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var i=t.keyIndice.get(n);if(i!==void 0)return t.arr[i].priority},this.swap=function(n,i){var r=t.arr,l=t.keyIndice,f=[r[n],r[i]],w=f[0],R=f[1];r[n]=R,r[i]=w,l.set(w.key,i),l.set(R.key,n)},this.innerDecrease=function(n){for(var i=t.arr,r=i[n].priority,l,f=n;f!==0;){var w;if(l=f>>1,((w=i[l])===null||w===void 0?void 0:w.priority)<r)break;t.swap(f,l),f=l}},this.heapify=function(n){var i=t.arr,r=n<<1,l=r+1,f=n;r<i.length&&(f=i[r].priority<i[f].priority?r:f,l<i.length&&(f=i[l].priority<i[f].priority?l:f),f!==n&&(t.swap(n,f),t.heapify(f)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,i){var r=t.keyIndice,l=t.arr;if(!r.has(n)){var f=l.length;return r.set(n,f),l.push({key:n,priority:i}),t.innerDecrease(f),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,i){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(i>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(i));t.arr[r].priority=i,t.innerDecrease(r)}}),jr=function(t,n){var i=new nr,r=new Map,l=new so,f;function w(Y){var fe=Y.v===f?Y.w:Y.v,Le=l.priority(fe);if(Le!==void 0){var Me=n(Y);Me<Le&&(r.set(fe,f),l.decrease(fe,Me))}}if(t.nodeCount()===0)return i;t.nodes().forEach(function(Y){l.add(Y,Number.POSITIVE_INFINITY),i.setNode(Y)}),l.decrease(t.nodes()[0],0);for(var R=!1;l.size()>0;){var H;if(f=l.removeMin(),r.has(f))i.setEdge(f,r.get(f));else{if(R)throw new Error("Input graph is not connected: "+t.graph());R=!0}(H=t.nodeEdges(f))===null||H===void 0||H.forEach(w)}return i},No=jr,ko=function(t){var n=new Set,i=[],r=t.nodes();return r.forEach(function(l){for(var f=[],w=[l];w.length>0;){var R=w.pop();if(!n.has(R)){var H,Y;n.add(R),f.push(R),(H=t.successors(R))===null||H===void 0||H.forEach(function(fe){return w.push(fe)}),(Y=t.predecessors(R))===null||Y===void 0||Y.forEach(function(fe){return w.push(fe)})}}f.length&&i.push(f)}),i},li=ko,tt=function e(t,n,i,r,l,f){r.includes(n)||(r.push(n),i||f.push(n),l(n).forEach(function(w){return e(t,w,i,r,l,f)}),i&&f.push(n))},St=function(t,n,i){var r=Array.isArray(n)?n:[n],l=function(H){return t.isDirected()?t.successors(H):t.neighbors(H)},f=[],w=[];return r.forEach(function(R){if(t.hasNode(R))tt(t,R,i==="post",w,l,f);else throw new Error("Graph does not have node: "+R)}),f},Pt=St;function Yt(e,t){return ot(e)||Ae(e,t)||Ct(e,t)||en()}function en(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ct(e,t){if(!!e){if(typeof e=="string")return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}}function J(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ae(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],r=!0,l=!1,f,w;try{for(n=n.call(e);!(r=(f=n.next()).done)&&(i.push(f.value),!(t&&i.length===t));r=!0);}catch(R){l=!0,w=R}finally{try{!r&&n.return!=null&&n.return()}finally{if(l)throw w}}return i}}function ot(e){if(Array.isArray(e))return e}var Ee=function(){return 1},m=function(t,n,i,r){return V(t,n,i||Ee,r||function(l){return t.outEdges(l)})},V=function(t,n,i,r){var l=new Map,f=new so,w,R,H=function(Le){var Me=Le.v!==w?Le.v:Le.w,We=l.get(Me),Ze=i(Le),He=R.distance+Ze;if(Ze<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Le+" Weight: "+Ze);He<We.distance&&(We.distance=He,We.predecessor=w,f.decrease(Me,He))};for(t.nodes().forEach(function(fe){var Le=fe===n?0:Number.POSITIVE_INFINITY;l.set(fe,{distance:Le}),f.add(fe,Le)});f.size()>0&&(w=f.removeMin(),R=l.get(w),!(R&&R.distance===Number.POSITIVE_INFINITY));)r(w).forEach(H);var Y={};return Array.from(l.entries()).forEach(function(fe){var Le=Yt(fe,2),Me=Le[0],We=Le[1];return Y[String(Me)]=We,Y}),Y},G=m,ce=function(t,n,i){var r={};return t.nodes().forEach(function(l){return r[String(l)]=G(t,l,n,i),r}),r},ve=ce,De=function(t){var n=0,i=[],r=new Map,l=[];function f(w){var R,H={onStack:!0,lowlink:n,index:n};if(r.set(w,H),n+=1,i.push(w),(R=t.successors(w))===null||R===void 0||R.forEach(function(Me){var We;if(r.has(Me)){if((We=r.get(Me))===null||We===void 0?void 0:We.onStack){var He=r.get(Me);H.lowlink=Math.min(H.lowlink,He.index)}}else{f(Me);var Ze=r.get(Me);H.lowlink=Math.min(H.lowlink,Ze.lowlink)}}),H.lowlink===H.index){var Y=[],fe;do{fe=i.pop();var Le=r.get(fe);Le.onStack=!1,Y.push(fe)}while(w!==fe);l.push(Y)}}return t.nodes().forEach(function(w){r.has(w)||f(w)}),l},ct=De,lt=function(t){return ct(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})},Nt=lt;function It(e){return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jt(e,t,n){return t&&Ft(e.prototype,t),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jo(e,t)}function Xn(e){var t=fn();return function(){var i=Uo(e),r;if(t){var l=Uo(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return gi(this,r)}}function gi(e,t){if(t&&(It(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ji(e)}function ji(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vr(e){var t=typeof Map=="function"?new Map:void 0;return vr=function(i){if(i===null||!Vo(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(i))return t.get(i);t.set(i,r)}function r(){return Un(i,arguments,Uo(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),jo(r,i)},vr(e)}function Un(e,t,n){return fn()?Un=Reflect.construct:Un=function(r,l,f){var w=[null];w.push.apply(w,l);var R=Function.bind.apply(r,w),H=new R;return f&&jo(H,f.prototype),H},Un.apply(null,arguments)}function fn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Vo(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function jo(e,t){return jo=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},jo(e,t)}function Uo(e){return Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Uo(e)}var qs=function(e){Zn(n,e);var t=Xn(n);function n(){return bn(this,n),t.apply(this,arguments)}return jt(n)}(vr(Error));function ss(e){var t=new Set,n=new Set,i=[];function r(l){if(n.has(l))throw new qs;if(!t.has(l)){var f;n.add(l),t.add(l),(f=e.predecessors(l))===null||f===void 0||f.forEach(r),n.delete(l),i.push(l)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new qs;return i}var va=ss,ps=function(t){try{va(t)}catch(n){if(n instanceof qs)return!1;throw n}return!0},wo=ps,Ss=function(t,n){return Pt(t,n,"post")},ts=Ss,gr=function(t,n){return Pt(t,n,"pre")},ns=gr,xr=function(){return 1};function Jn(e,t,n){return hr(e,t||xr,n||function(i){return e.outEdges(i)})}function hr(e,t,n){var i={},r=e.nodes();return r.forEach(function(l){var f=String(l);i[f]={},i[f][f]={distance:0},r.forEach(function(w){l!==w&&(i[f][String(w)]={distance:Number.POSITIVE_INFINITY})}),n(l).forEach(function(w){var R=w.v===l?w.w:w.v,H=t(w);i[f][String(R)]={distance:H,predecessor:l}})}),r.forEach(function(l){var f=String(l),w=i[f];r.forEach(function(R){var H=String(R),Y=i[H];r.forEach(function(fe){var Le=String(fe),Me=Y[f],We=w[Le],Ze=Y[Le],He=Me.distance+We.distance;He<Ze.distance&&(Ze.distance=He,Ze.predecessor=We.predecessor)})})}),i}var Pr=Jn;class Po extends dr{}class Cs extends nr{}const Ns=()=>1,as=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const i=hl(e,t||Ns);return(n=is(i.graph,i.buckets,i.zeroIdx).map(l=>e.outEdges(l.v,l.w)))===null||n===void 0?void 0:n.flat()},is=(e,t,n)=>{let i=[];const r=t[t.length-1],l=t[0];let f;for(;e.nodeCount();){for(;f=l.dequeue();)Xs(e,t,n,f);for(;f=r.dequeue();)Xs(e,t,n,f);if(e.nodeCount()){for(let w=t.length-2;w>0;--w)if(f=t[w].dequeue(),f){i=i.concat(Xs(e,t,n,f,!0));break}}}return i},Xs=(e,t,n,i,r)=>{var l,f;const w=[];return(l=e.inEdges(i.v))===null||l===void 0||l.forEach(R=>{const H=e.edge(R),Y=e.node(R.v);r&&w.push({v:R.v,w:R.w,in:0,out:0}),Y.out===void 0&&(Y.out=0),Y.out-=H,za(t,n,Y)}),(f=e.outEdges(i.v))===null||f===void 0||f.forEach(R=>{const H=e.edge(R),Y=R.w,fe=e.node(Y);fe.in===void 0&&(fe.in=0),fe.in-=H,za(t,n,fe)}),e.removeNode(i.v),r?w:void 0},hl=(e,t)=>{const n=new Cs;let i=0,r=0;e.nodes().forEach(R=>{n.setNode(R,{v:R,in:0,out:0})}),e.edges().forEach(R=>{const H=n.edge(R)||0,Y=(t==null?void 0:t(R))||1,fe=H+Y;n.setEdge(R.v,R.w,fe),r=Math.max(r,n.node(R.v).out+=Y),i=Math.max(i,n.node(R.w).in+=Y)});const l=[],f=r+i+3;for(let R=0;R<f;R++)l.push(new Po);const w=i+1;return n.nodes().forEach(R=>{za(l,w,n.node(R))}),{buckets:l,zeroIdx:w,graph:n}},za=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)};var fc=as;const xl=e=>{const t=i=>r=>{var l;return((l=i.edge(r))===null||l===void 0?void 0:l.weight)||1},n=e.graph().acyclicer==="greedy"?fc(e,t(e)):fl(e);n==null||n.forEach(i=>{const r=e.edge(i);e.removeEdgeObj(i),r.forwardName=i.name,r.reversed=!0,e.setEdge(i.w,i.v,r,`rev-${Math.random()}`)})},fl=e=>{const t=[],n={},i={},r=l=>{var f;i[l]||(i[l]=!0,n[l]=!0,(f=e.outEdges(l))===null||f===void 0||f.forEach(w=>{n[w.w]?t.push(w):r(w.w)}),delete n[l])};return e.nodes().forEach(r),t};var Su={run:xl,undo:e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const i=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,i)}})}};class js extends nr{}const eu=(e,t)=>Number(e)-Number(t),_a=(e,t,n,i)=>{let r;do r=`${i}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},gl=e=>{const t=new js().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const i=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:i.weight+r.weight,minlen:Math.max(i.minlen,r.minlen)})}),t},ea=e=>{const t=new js({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var i;((i=e.children(n))===null||i===void 0?void 0:i.length)||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},jl=(e,t)=>e==null?void 0:e.reduce((n,i,r)=>(n[i]=t[r],n),{}),sa=e=>{const t={};return e.nodes().forEach(n=>{var i;const r={};(i=e.outEdges(n))===null||i===void 0||i.forEach(l=>{var f;r[l.w]=(r[l.w]||0)+(((f=e.edge(l))===null||f===void 0?void 0:f.weight)||0)}),t[n]=r}),t},ml=e=>{const t=e.nodes(),n=t.map(i=>{var r;const l={};return(r=e.inEdges(i))===null||r===void 0||r.forEach(f=>{l[f.v]=(l[f.v]||0)+e.edge(f).weight}),l});return jl(t,n)},pl=(e,t)=>{const n=Number(e.x),i=Number(e.y),r=Number(t.x)-n,l=Number(t.y)-i;let f=Number(e.width)/2,w=Number(e.height)/2;if(!r&&!l)return{x:0,y:0};let R,H;return Math.abs(l)*f>Math.abs(r)*w?(l<0&&(w=-w),R=w*r/l,H=w):(r<0&&(f=-f),R=f,H=f*l/r),{x:n+R,y:i+H}},el=e=>{const t=[],n=Eu(e)+1;for(let i=0;i<n;i++)t.push([]);e.nodes().forEach(i=>{const l=e.node(i).rank;l!==void 0&&t[l]&&t[l].push(i)});for(let i=0;i<n;i++)t[i]=t[i].sort((r,l)=>{var f,w;return eu((f=e.node(r))===null||f===void 0?void 0:f.order,(w=e.node(l))===null||w===void 0?void 0:w.order)});return t},vl=e=>{const t=e.nodes().filter(i=>{var r;return((r=e.node(i))===null||r===void 0?void 0:r.rank)!==void 0}).map(i=>e.node(i).rank),n=Math.min(...t);e.nodes().forEach(i=>{const r=e.node(i);r.hasOwnProperty("rank")&&n!==Infinity&&(r.rank-=n)})},Rc=e=>{const t=e.nodes(),n=t.filter(w=>{var R;return((R=e.node(w))===null||R===void 0?void 0:R.rank)!==void 0}).map(w=>e.node(w).rank),i=Math.min(...n),r=[];t.forEach(w=>{var R;const H=(((R=e.node(w))===null||R===void 0?void 0:R.rank)||0)-i;r[H]||(r[H]=[]),r[H].push(w)});let l=0;const f=e.graph().nodeRankFactor||0;for(let w=0;w<r.length;w++){const R=r[w];R===void 0?w%f!=0&&(l-=1):l&&(R==null||R.forEach(H=>{const Y=e.node(H);Y&&(Y.rank=Y.rank||0,Y.rank+=l)}))}},tu=(e,t,n,i)=>{const r={width:0,height:0};return T(n)&&T(i)&&(r.rank=n,r.order=i),_a(e,"border",r,t)},Eu=e=>{let t;return e.nodes().forEach(n=>{var i;const r=(i=e.node(n))===null||i===void 0?void 0:i.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},td=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(i=>{t(i)?n.lhs.push(i):n.rhs.push(i)}),n},Za=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},Pc=(e,t)=>t(),Oc=(e,t)=>e.reduce((n,i)=>{const r=t(n),l=t(i);return r>l?i:n}),nu=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>Il(e,t))},Il=(e,t)=>{let n=t.v,i=e.node(n).rank;const r=t.w,l=e.node(r).rank,f=t.name,w=e.edge(t),R=w.labelRank;if(l===i+1)return;e.removeEdgeObj(t);const H=e.graph();let Y,fe,Le;for(Le=0,++i;i<l;++Le,++i)w.points=[],fe={edgeLabel:w,width:0,height:0,edgeObj:t,rank:i},Y=_a(e,"edge",fe,"_d"),i===R&&(fe.width=w.width,fe.height=w.height,fe.dummy="edge-label",fe.labelpos=w.labelpos),e.setEdge(n,Y,{weight:w.weight},f),Le===0&&(H.dummyChains||(H.dummyChains=[]),H.dummyChains.push(Y)),n=Y;e.setEdge(n,r,{weight:w.weight},f)};var Kl={run:nu,undo:e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let i=e.node(n);const r=i.edgeLabel;let l;i.edgeObj&&e.setEdgeObj(i.edgeObj,r);let f=n;for(;i.dummy;)l=e.successors(f)[0],e.removeNode(f),r.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height),f=l,i=e.node(f)})}};const ta=e=>{var t;const n={},i=r=>{var l;const f=e.node(r);if(n[r])return f.rank;n[r]=!0;let w;return(l=e.outEdges(r))===null||l===void 0||l.forEach(R=>{const H=i(R.w),Y=e.edge(R).minlen,fe=H-Y;fe&&(w===void 0||fe<w)&&(w=fe)}),w||(w=0),f.rank=w,w};(t=e.sources())===null||t===void 0||t.forEach(r=>i(r))},Pa=e=>{var t;const n={};let i;const r=f=>{var w;const R=e.node(f);if(n[f])return R.rank;n[f]=!0;let H;return(w=e.outEdges(f))===null||w===void 0||w.forEach(Y=>{const fe=r(Y.w),Le=e.edge(Y).minlen,Me=fe-Le;Me&&(H===void 0||Me<H)&&(H=Me)}),H||(H=0),(i===void 0||H<i)&&(i=H),R.rank=H,H};(t=e.sources())===null||t===void 0||t.forEach(f=>r(f)),i===void 0&&(i=0);const l=(f,w)=>{var R;const H=e.node(f),Y=isNaN(H.layer)?w:H.layer;(H.rank===void 0||H.rank<Y)&&(H.rank=Y),(R=e.outEdges(f))===null||R===void 0||R.map(fe=>{l(fe.w,Y+e.edge(fe).minlen)})};e.nodes().forEach(f=>{const w=e.node(f);isNaN(w.layer)?w.rank-=i:l(f,w.layer)})},Wr=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen;var Oa={longestPath:ta,longestPathWithLayer:Pa,slack:Wr};const Ca=e=>{const t=new js({directed:!1}),n=e.nodes()[0],i=e.nodeCount();t.setNode(n,{});let r,l;for(;na(t,e)<i;)r=$l(t,e),l=t.hasNode(r.v)?Wr(e,r):-Wr(e,r),os(t,e,l);return t},na=(e,t)=>{const n=i=>{t.nodeEdges(i).forEach(r=>{const l=r.v,f=i===l?r.w:l;!e.hasNode(f)&&!Wr(t,r)&&(e.setNode(f,{}),e.setEdge(i,f,{}),n(f))})};return e.nodes().forEach(n),e.nodeCount()},ia=e=>{const t=new js({directed:!1}),n=e.nodes()[0],i=e.nodeCount();t.setNode(n,{});let r,l;for(;Lu(t,e)<i;)r=$l(t,e),l=t.hasNode(r.v)?Wr(e,r):-Wr(e,r),os(t,e,l);return t},Lu=(e,t)=>{const n=i=>{var r;(r=t.nodeEdges(i))===null||r===void 0||r.forEach(l=>{const f=l.v,w=i===f?l.w:f;!e.hasNode(w)&&(t.node(w).layer!==void 0||!Wr(t,l))&&(e.setNode(w,{}),e.setEdge(i,w,{}),n(w))})};return e.nodes().forEach(n),e.nodeCount()},$l=(e,t)=>Oc(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Wr(t,n):Infinity),os=(e,t,n)=>{e.nodes().forEach(i=>{t.node(i).rank||(t.node(i).rank=0),t.node(i).rank+=n})};var So={feasibleTree:Ca,feasibleTreeWithLayer:ia};const{preorder:zo,postorder:bs}=p,Ws=e=>{const t=gl(e);ta(t);const n=Ca(t);Nl(n),aa(n,t);let i,r;for(;i=dh(n);)r=hh(n,t,i),nd(n,t,i,r)},aa=(e,t)=>{let n=bs(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(i=>{ks(e,t,i)})},ks=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=tl(e,t,n)},tl=(e,t,n)=>{var i;const l=e.node(n).parent;let f=!0,w=t.edgeFromArgs(n,l),R=0;return w||(f=!1,w=t.edgeFromArgs(l,n)),R=w.weight,(i=t.nodeEdges(n))===null||i===void 0||i.forEach(H=>{const Y=H.v===n,fe=Y?H.w:H.v;if(fe!==l){const Le=Y===f,Me=t.edge(H).weight;if(R+=Le?Me:-Me,Zo(e,n,fe)){const We=e.edgeFromArgs(n,fe).cutvalue;R+=Le?-We:We}}}),R},Nl=(e,t=e.nodes()[0])=>{ra(e,{},1,t)},ra=(e,t,n,i,r)=>{var l;const f=n;let w=n;const R=e.node(i);return t[i]=!0,(l=e.neighbors(i))===null||l===void 0||l.forEach(H=>{t[H]||(w=ra(e,t,w,H,i))}),R.low=f,R.lim=w++,r?R.parent=r:delete R.parent,w},dh=e=>e.edges().find(t=>e.edge(t).cutvalue<0),hh=(e,t,n)=>{let i=n.v,r=n.w;t.hasEdge(i,r)||(i=n.w,r=n.v);const l=e.node(i),f=e.node(r);let w=l,R=!1;l.lim>f.lim&&(w=f,R=!0);const H=t.edges().filter(Y=>R===Fc(e,e.node(Y.v),w)&&R!==Fc(e,e.node(Y.w),w));return Oc(H,Y=>Wr(t,Y))},nd=(e,t,n,i)=>{const r=n.v,l=n.w;e.removeEdge(r,l),e.setEdge(i.v,i.w,{}),Nl(e),aa(e,t),qh(e,t)},qh=(e,t)=>{const n=e.nodes().find(r=>{var l;return!((l=t.node(r))===null||l===void 0?void 0:l.parent)});let i=zo(e,n);i=i==null?void 0:i.slice(1),i==null||i.forEach(r=>{const l=e.node(r).parent;let f=t.edgeFromArgs(r,l),w=!1;f||(f=t.edgeFromArgs(l,r),w=!0),t.node(r).rank=t.node(l).rank+(w?f.minlen:-f.minlen)})},Zo=(e,t,n)=>e.hasEdge(t,n),Fc=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim;var iu=Ws;const _l=e=>{switch(e.graph().ranker){case"network-simplex":id(e);break;case"tight-tree":Tl(e);break;case"longest-path":ba(e);break;default:Tl(e)}},ba=ta,Tl=e=>{Pa(e),ia(e)},id=e=>{iu(e)};var ru=_l;const Du=e=>{var t;const n={};let i=0;const r=l=>{var f;const w=i;(f=e.children(l))===null||f===void 0||f.forEach(r),n[l]={low:w,lim:i++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},xa=(e,t,n,i)=>{const r=[],l=[],f=Math.min(t[n].low,t[i].low),w=Math.max(t[n].lim,t[i].lim);let R,H;R=n;do R=e.parent(R),r.push(R);while(R&&(t[R].low>f||w>t[R].lim));for(H=R,R=i;R&&R!==H;)l.push(R),R=e.parent(R);return{lca:H,path:r.concat(l.reverse())}};var nl=e=>{var t;const n=Du(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(i=>{var r,l;let f=i,w=e.node(f);const R=w.edgeObj;if(!R)return;const H=xa(e,n,R.v,R.w),Y=H.path,fe=H.lca;let Le=0,Me=Y[Le],We=!0;for(;f!==R.w;){if(w=e.node(f),We){for(;Me!==fe&&((r=e.node(Me))===null||r===void 0?void 0:r.maxRank)<w.rank;)Le++,Me=Y[Le];Me===fe&&(We=!1)}if(!We){for(;Le<Y.length-1&&((l=e.node(Y[Le+1]))===null||l===void 0?void 0:l.minRank)<=w.rank;)Le++;Me=Y[Le]}e.setParent(f,Me),f=e.successors(f)[0]}})};const fh=e=>{var t;const n=_a(e,"root",{},"_root"),i=Ys(e);let r=Math.max(...Object.values(i));Math.abs(r)===Infinity&&(r=1);const l=r-1,f=2*l+1;e.graph().nestingRoot=n,e.edges().forEach(R=>{e.edge(R).minlen*=f});const w=gc(e)+1;(t=e.children())===null||t===void 0||t.forEach(R=>{Zl(e,n,f,w,l,i,R)}),e.graph().nodeRankFactor=f},Zl=(e,t,n,i,r,l,f)=>{const w=e.children(f);if(!(w==null?void 0:w.length)){f!==t&&e.setEdge(t,f,{weight:0,minlen:n});return}const R=tu(e,"_bt"),H=tu(e,"_bb"),Y=e.node(f);e.setParent(R,f),Y.borderTop=R,e.setParent(H,f),Y.borderBottom=H,w==null||w.forEach(fe=>{Zl(e,t,n,i,r,l,fe);const Le=e.node(fe),Me=Le.borderTop?Le.borderTop:fe,We=Le.borderBottom?Le.borderBottom:fe,Ze=Le.borderTop?i:2*i,He=Me!==We?1:r-l[f]+1;e.setEdge(R,Me,{minlen:He,weight:Ze,nestingEdge:!0}),e.setEdge(We,H,{minlen:He,weight:Ze,nestingEdge:!0})}),e.parent(f)||e.setEdge(t,R,{weight:0,minlen:r+l[f]})},Ys=e=>{var t;const n={},i=(r,l)=>{const f=e.children(r);f==null||f.forEach(w=>i(w,l+1)),n[r]=l};return(t=e.children())===null||t===void 0||t.forEach(r=>i(r,1)),n},gc=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t};var Ml={run:fh,cleanup:e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})}};const ou=e=>{var t;const n=i=>{const r=e.children(i),l=e.node(i);if((r==null?void 0:r.length)&&r.forEach(f=>n(f)),l.hasOwnProperty("minRank")){l.borderLeft=[],l.borderRight=[];for(let f=l.minRank,w=l.maxRank+1;f<w;f+=1)su(e,"borderLeft","_bl",i,l,f),su(e,"borderRight","_br",i,l,f)}};(t=e.children())===null||t===void 0||t.forEach(i=>n(i))},su=(e,t,n,i,r,l)=>{const f={rank:l,borderType:t,width:0,height:0},w=r[t][l-1],R=_a(e,"border",f,n);r[t][l]=R,e.setParent(R,i),w&&e.setEdge(w,R,{weight:1})};var Od=ou;const gh=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&Iu(e)},kd=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&au(e),(n==="lr"||n==="rl")&&(ef(e),Iu(e))},Iu=e=>{e.nodes().forEach(t=>{Al(e.node(t))}),e.edges().forEach(t=>{Al(e.edge(t))})},Al=e=>{const t=e.width;e.width=e.height,e.height=t},au=e=>{e.nodes().forEach(t=>{mc(e.node(t))}),e.edges().forEach(t=>{var n;const i=e.edge(t);(n=i.points)===null||n===void 0||n.forEach(r=>mc(r)),i.hasOwnProperty("y")&&mc(i)})},mc=e=>{(e==null?void 0:e.y)&&(e.y=-e.y)},ef=e=>{e.nodes().forEach(t=>{la(e.node(t))}),e.edges().forEach(t=>{var n;const i=e.edge(t);(n=i.points)===null||n===void 0||n.forEach(r=>la(r)),i.hasOwnProperty("x")&&la(i)})},la=e=>{const t=e.x;e.x=e.y,e.y=t};var Cl={adjust:gh,undo:kd},Xl=e=>{const t={},n=e.nodes().filter(Y=>{var fe;return!((fe=e.children(Y))===null||fe===void 0?void 0:fe.length)}),i=n.map(Y=>e.node(Y).rank),r=Math.max(...i),l=[];for(let Y=0;Y<r+1;Y++)l.push([]);const f=Y=>{var fe;if(t.hasOwnProperty(Y))return;t[Y]=!0;const Le=e.node(Y);isNaN(Le.rank)||l[Le.rank].push(Y),(fe=e.successors(Y))===null||fe===void 0||fe.forEach(Me=>f(Me))},w=n.sort((Y,fe)=>e.node(Y).rank-e.node(fe).rank),H=w.filter(Y=>e.node(Y).fixorder!==void 0).sort((Y,fe)=>e.node(Y).fixorder-e.node(fe).fixorder);return H==null||H.forEach(Y=>{isNaN(e.node(Y).rank)||l[e.node(Y).rank].push(Y),t[Y]=!0}),w==null||w.forEach(f),l};const Ba=(e,t,n)=>{const i=jl(n,n.map((Y,fe)=>fe)),l=t.map(Y=>{var fe;const Le=(fe=e.outEdges(Y))===null||fe===void 0?void 0:fe.map(Me=>({pos:i[Me.w]||0,weight:e.edge(Me).weight}));return Le==null?void 0:Le.sort((Me,We)=>Me.pos-We.pos)}).flat().filter(Y=>Y!==void 0);let f=1;for(;f<n.length;)f<<=1;const w=2*f-1;f-=1;const R=Array(w).fill(0,0,w);let H=0;return l==null||l.forEach(Y=>{if(Y){let fe=Y.pos+f;R[fe]+=Y.weight;let Le=0;for(;fe>0;)fe%2&&(Le+=R[fe+1]),fe=fe-1>>1,R[fe]+=Y.weight;H+=Y.weight*Le}}),H};var od=(e,t)=>{let n=0;for(let i=1;i<(t==null?void 0:t.length);i+=1)n+=Ba(e,t[i-1],t[i]);return n};const Rl=(e,t,n)=>{const i=sd(e),r=new js({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(l=>e.node(l));return e.nodes().forEach(l=>{var f;const w=e.node(l),R=e.parent(l);(w.rank===t||w.minRank<=t&&t<=w.maxRank)&&(r.setNode(l),r.setParent(l,R||i),(f=e[n](l))===null||f===void 0||f.forEach(H=>{const Y=H.v===l?H.w:H.v,fe=r.edgeFromArgs(Y,l),Le=fe!==void 0?fe.weight:0;r.setEdge(Y,l,{weight:e.edge(H).weight+Le})}),w.hasOwnProperty("minRank")&&r.setNode(l,{borderLeft:w.borderLeft[t],borderRight:w.borderRight[t]}))}),r},sd=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t};var pc=Rl,Tu=(e,t,n)=>{const i={};let r;n==null||n.forEach(l=>{let f=e.parent(l),w,R;for(;f;){if(w=e.parent(f),w?(R=i[w],i[w]=f):(R=r,r=f),R&&R!==f){t.setEdge(R,f);return}f=w}})},cd=(e,t)=>t.map(n=>{const i=e.inEdges(n);if(!(i==null?void 0:i.length))return{v:n};{const r={sum:0,weight:0};return i==null||i.forEach(l=>{const f=e.edge(l),w=e.node(l.v);r.sum+=f.weight*w.order,r.weight+=f.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}});const Fd=(e,t)=>{var n,i,r;const l={};e==null||e.forEach((w,R)=>{l[w.v]={i:R,indegree:0,in:[],out:[],vs:[w.v]};const H=l[w.v];w.barycenter!==void 0&&(H.barycenter=w.barycenter,H.weight=w.weight)}),(n=t.edges())===null||n===void 0||n.forEach(w=>{const R=l[w.v],H=l[w.w];R!==void 0&&H!==void 0&&(H.indegree++,R.out.push(l[w.w]))});const f=(r=(i=Object.values(l)).filter)===null||r===void 0?void 0:r.call(i,w=>!w.indegree);return il(f)},il=e=>{var t,n;const i=[],r=R=>H=>{H.merged||(H.barycenter===void 0||R.barycenter===void 0||H.barycenter>=R.barycenter)&&Ia(R,H)},l=R=>H=>{H.in.push(R),--H.indegree==0&&e.push(H)};for(;e==null?void 0:e.length;){const R=e.pop();i.push(R),(t=R.in.reverse())===null||t===void 0||t.forEach(H=>r(R)(H)),(n=R.out)===null||n===void 0||n.forEach(H=>l(R)(H))}const f=i.filter(R=>!R.merged),w=["vs","i","barycenter","weight"];return f.map(R=>{const H={};return w==null||w.forEach(Y=>{R[Y]!==void 0&&(H[Y]=R[Y])}),H})},Ia=(e,t)=>{var n;let i=0,r=0;e.weight&&(i+=e.barycenter*e.weight,r+=e.weight),t.weight&&(i+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=i/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0};var Na=Fd;const Vs=(e,t,n)=>{const i=td(e,fe=>fe.hasOwnProperty("fixorder")&&!isNaN(fe.fixorder)||fe.hasOwnProperty("barycenter")),r=i.lhs,l=i.rhs.sort((fe,Le)=>-fe.i- -Le.i),f=[];let w=0,R=0,H=0;r==null||r.sort(vc(!!t,!!n)),H=Ta(f,l,H),r==null||r.forEach(fe=>{var Le;H+=(Le=fe.vs)===null||Le===void 0?void 0:Le.length,f.push(fe.vs),w+=fe.barycenter*fe.weight,R+=fe.weight,H=Ta(f,l,H)});const Y={vs:f.flat()};return R&&(Y.barycenter=w/R,Y.weight=R),Y},Ta=(e,t,n)=>{let i=n,r;for(;t.length&&(r=t[t.length-1]).i<=i;)t.pop(),e==null||e.push(r.vs),i++;return i},vc=(e,t)=>(n,i)=>{if(n.fixorder!==void 0&&i.fixorder!==void 0)return n.fixorder-i.fixorder;if(n.barycenter<i.barycenter)return-1;if(n.barycenter>i.barycenter)return 1;if(t&&n.order!==void 0&&i.order!==void 0){if(n.order<i.order)return-1;if(n.order>i.order)return 1}return e?i.i-n.i:n.i-i.i};var _c=Vs;const ud=(e,t,n,i,r)=>{var l,f,w,R;let H=e.children(t);const Y=e.node(t),fe=Y?Y.borderLeft:void 0,Le=Y?Y.borderRight:void 0,Me={};fe&&(H=H==null?void 0:H.filter(et=>et!==fe&&et!==Le));const We=cd(e,H||[]);We==null||We.forEach(et=>{var it;if((it=e.children(et.v))===null||it===void 0?void 0:it.length){const ut=ud(e,et.v,n,i);Me[et.v]=ut,ut.hasOwnProperty("barycenter")&&Bd(et,ut)}});const Ze=Na(We,n);bl(Ze,Me),(l=Ze.filter(et=>et.vs.length>0))===null||l===void 0||l.forEach(et=>{const it=e.node(et.vs[0]);it&&(et.fixorder=it.fixorder,et.order=it.order)});const He=_c(Ze,i,r);if(fe&&(He.vs=[fe,He.vs,Le].flat(),(f=e.predecessors(fe))===null||f===void 0?void 0:f.length)){const et=e.node(((w=e.predecessors(fe))===null||w===void 0?void 0:w[0])||""),it=e.node(((R=e.predecessors(Le))===null||R===void 0?void 0:R[0])||"");He.hasOwnProperty("barycenter")||(He.barycenter=0,He.weight=0),He.barycenter=(He.barycenter*He.weight+et.order+it.order)/(He.weight+2),He.weight+=2}return He},bl=(e,t)=>{e==null||e.forEach(n=>{var i;const r=(i=n.vs)===null||i===void 0?void 0:i.map(l=>t[l]?t[l].vs:l);n.vs=r.flat()})},Bd=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)};var Cc=ud;const Ql=e=>{const t=Eu(e),n=[],i=[];for(let H=1;H<t+1;H++)n.push(H);for(let H=t-1;H>-1;H--)i.push(H);const r=bc(e,n,"inEdges"),l=bc(e,i,"outEdges");let f=Xl(e);Mu(e,f);let w=Number.POSITIVE_INFINITY,R;for(let H=0,Y=0;Y<4;++H,++Y){dd(H%2?r:l,H%4>=2),f=el(e);const fe=od(e,f);fe<w&&(Y=0,R=v(f),w=fe)}f=Xl(e),Mu(e,f);for(let H=0,Y=0;Y<4;++H,++Y){dd(H%2?r:l,H%4>=2,!0),f=el(e);const fe=od(e,f);fe<w&&(Y=0,R=v(f),w=fe)}Mu(e,R)},bc=(e,t,n)=>t.map(i=>pc(e,i,n)),dd=(e,t,n)=>{const i=new js;e==null||e.forEach(r=>{var l;const f=r.graph().root,w=Cc(r,f,i,t,n);for(let R=0;R<((l=w.vs)===null||l===void 0?void 0:l.length);R++){const H=r.node(w.vs[R]);H&&(H.order=R)}Tu(r,i,w.vs)})},Mu=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((i,r)=>{e.node(i).order=r})})};var mh=Ql;class Wd extends nr{}const Au=(e,t)=>{const n={},i=(r,l)=>{let f=0,w=0;const R=r.length,H=l==null?void 0:l[(l==null?void 0:l.length)-1];return l==null||l.forEach((Y,fe)=>{var Le;const Me=Vd(e,Y),We=Me?e.node(Me).order:R;(Me||Y===H)&&((Le=l.slice(w,fe+1))===null||Le===void 0||Le.forEach(Ze=>{var He;(He=e.predecessors(Ze))===null||He===void 0||He.forEach(et=>{var it;const ut=e.node(et),Mt=ut.order;(Mt<f||We<Mt)&&!(ut.dummy&&((it=e.node(Ze))===null||it===void 0?void 0:it.dummy))&&wc(n,et,Ze)})}),w=fe+1,f=We)}),l};return(t==null?void 0:t.length)&&t.reduce(i),n},yc=(e,t)=>{const n={},i=(l,f,w,R,H)=>{let Y;const fe=[];for(let Le=f;Le<w;Le++)fe.push(Le);fe.forEach(Le=>{var Me,We;Y=l[Le],((Me=e.node(Y))===null||Me===void 0?void 0:Me.dummy)&&((We=e.predecessors(Y))===null||We===void 0||We.forEach(Ze=>{const He=e.node(Ze);He.dummy&&(He.order<R||He.order>H)&&wc(n,Ze,Y)}))})},r=(l,f)=>{let w=-1,R,H=0;return f==null||f.forEach((Y,fe)=>{var Le;if(((Le=e.node(Y))===null||Le===void 0?void 0:Le.dummy)==="border"){const Me=e.predecessors(Y)||[];Me.length&&(R=e.node(Me[0]).order,i(f,H,fe,w,R),H=fe,w=R)}i(f,H,f.length,R,l.length)}),f};return(t==null?void 0:t.length)&&t.reduce(r),n},Vd=(e,t)=>{var n,i;if((n=e.node(t))===null||n===void 0?void 0:n.dummy)return(i=e.predecessors(t))===null||i===void 0?void 0:i.find(r=>e.node(r).dummy)},wc=(e,t,n)=>{let i=t,r=n;if(i>r){const f=i;i=r,r=f}let l=e[i];l||(e[i]=l={}),l[r]=!0},ph=(e,t,n)=>{let i=t,r=n;if(i>r){const l=t;i=r,r=l}return!!e[i]},Ut=(e,t,n,i)=>{const r={},l={},f={};return t==null||t.forEach(w=>{w==null||w.forEach((R,H)=>{r[R]=R,l[R]=R,f[R]=H})}),t==null||t.forEach(w=>{let R=-1;w==null||w.forEach(H=>{let Y=i(H);if(Y.length){Y=Y.sort((Le,Me)=>f[Le]-f[Me]);const fe=(Y.length-1)/2;for(let Le=Math.floor(fe),Me=Math.ceil(fe);Le<=Me;++Le){const We=Y[Le];l[H]===H&&R<f[We]&&!ph(n,H,We)&&(l[We]=H,l[H]=r[H]=r[We],R=f[We])}}})}),{root:r,align:l}},o=(e,t,n,i,r)=>{var l;const f={},w=h(e,t,n,r),R=r?"borderLeft":"borderRight",H=(Le,Me)=>{let We=w.nodes(),Ze=We.pop();const He={};for(;Ze;)He[Ze]?Le(Ze):(He[Ze]=!0,We.push(Ze),We=We.concat(Me(Ze))),Ze=We.pop()},Y=Le=>{f[Le]=(w.inEdges(Le)||[]).reduce((Me,We)=>Math.max(Me,(f[We.v]||0)+w.edge(We)),0)},fe=Le=>{const Me=(w.outEdges(Le)||[]).reduce((Ze,He)=>Math.min(Ze,(f[He.w]||0)-w.edge(He)),Number.POSITIVE_INFINITY),We=e.node(Le);Me!==Number.POSITIVE_INFINITY&&We.borderType!==R&&(f[Le]=Math.max(f[Le],Me))};return H(Y,w.predecessors.bind(w)),H(fe,w.successors.bind(w)),(l=Object.values(i))===null||l===void 0||l.forEach(Le=>{f[Le]=f[n[Le]]}),f},h=(e,t,n,i)=>{const r=new Wd,l=e.graph(),f=$e(l.nodesep,l.edgesep,i);return t==null||t.forEach(w=>{let R;w==null||w.forEach(H=>{const Y=n[H];if(r.setNode(Y),R){const fe=n[R],Le=r.edgeFromArgs(fe,Y);r.setEdge(fe,Y,Math.max(f(e,H,R),Le||0))}R=H})}),r},A=(e,t)=>Oc(Object.values(t),n=>{var i;let r=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;return(i=Object.keys(n))===null||i===void 0||i.forEach(f=>{const w=n[f],R=rt(e,f)/2;r=Math.max(w+R,r),l=Math.min(w-R,l)}),r-l});function Z(e,t){const n=Object.values(t),i=Math.min(...n),r=Math.max(...n);["u","d"].forEach(l=>{["l","r"].forEach(f=>{const w=l+f,R=e[w];let H;if(R===t)return;const Y=Object.values(R);H=f==="l"?i-Math.min(...Y):r-Math.max(...Y),H&&(e[w]={},Object.keys(R).forEach(fe=>{e[w][fe]=R[fe]+H}))})})}const se=(e,t)=>{const n={};return Object.keys(e.ul).forEach(i=>{if(t)n[i]=e[t.toLowerCase()][i];else{const l=Object.values(e).map(f=>f[i]).sort((f,w)=>f-w);n[i]=(l[1]+l[2])/2}}),n},Se=e=>{const t=buildLayerMatrix(e),n=Object.assign(Au(e,t),yc(e,t)),i={};let r;["u","d"].forEach(f=>{r=f==="u"?t:Object.values(t).reverse(),["l","r"].forEach(w=>{w==="r"&&(r=r.map(fe=>Object.values(fe).reverse()));const R=(f==="u"?e.predecessors:e.successors).bind(e),H=Ut(e,r,n,R),Y=o(e,r,H.root,H.align,w==="r");w==="r"&&Object.keys(Y).forEach(fe=>{Y[fe]=-Y[fe]}),i[f+w]=Y})});const l=A(e,i);return Z(i,l),se(i,e.graph().align)},$e=(e,t,n)=>(i,r,l)=>{const f=i.node(r),w=i.node(l);let R=0,H;if(R+=f.width/2,f.hasOwnProperty("labelpos"))switch((f.labelpos||"").toLowerCase()){case"l":H=-f.width/2;break;case"r":H=f.width/2;break}if(H&&(R+=n?H:-H),H=0,R+=(f.dummy?t:e)/2,R+=(w.dummy?t:e)/2,R+=w.width/2,w.labelpos)switch((w.labelpos||"").toLowerCase()){case"l":H=w.width/2;break;case"r":H=-w.width/2;break}return H&&(R+=n?H:-H),H=0,R},rt=(e,t)=>e.node(t).width||0,ht=e=>{const t=el(e),n=e.graph().ranksep;let i=0;t==null||t.forEach(r=>{const l=r.map(w=>e.node(w).height),f=Math.max(...l);r==null||r.forEach(w=>{e.node(w).y=i+f/2}),i+=f+n})},xt=e=>{const t=el(e),n=Object.assign(Au(e,t),yc(e,t)),i={};let r=[];["u","d"].forEach(f=>{r=f==="u"?t:Object.values(t).reverse(),["l","r"].forEach(w=>{w==="r"&&(r=r.map(fe=>Object.values(fe).reverse()));const R=(f==="u"?e.predecessors:e.successors).bind(e),H=Ut(e,r,n,R),Y=o(e,r,H.root,H.align,w==="r");w==="r"&&Object.keys(Y).forEach(fe=>Y[fe]=-Y[fe]),i[f+w]=Y})});const l=A(e,i);return l&&Z(i,l),se(i,e.graph().align)};var qt=e=>{var t;const n=ea(e);ht(n);const i=xt(n);(t=Object.keys(i))===null||t===void 0||t.forEach(r=>{n.node(r).x=i[r]})},_n=(e,t)=>{const i=e.nodes().filter(f=>{var w;return!((w=e.children(f))===null||w===void 0?void 0:w.length)}).map(f=>e.node(f).rank),r=Math.max(...i),l=Array(r+1).fill([]);t==null||t.forEach(f=>{const w=e.node(f);!w||(w==null?void 0:w.dummy)||isNaN(w.rank)||(w.fixorder=l[w.rank].length,l[w.rank].push(f))})};const Mn=(e,t)=>{const n=t&&t.debugTiming?Za:Pc;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{vi(e,t.prevGraph)});const i=n("  buildLayoutGraph",()=>Kr(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{us(i)});try{n("  runLayout",()=>{$n(i,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{Ii(e,i)})})},$n=(e,t,n)=>{t("    removeSelfEdges",()=>{Ud(e)}),t("    acyclic",()=>{Su.run(e)}),t("    nestingGraph.run",()=>{Ml.run(e)}),t("    rank",()=>{ru(ea(e))}),t("    injectEdgeLabelProxies",()=>{hs(e)}),t("    removeEmptyRanks",()=>{Rc(e)}),t("    nestingGraph.cleanup",()=>{Ml.cleanup(e)}),t("    normalizeRanks",()=>{vl(e)}),t("    assignRankMinMax",()=>{Es(e)}),t("    removeEdgeLabelProxies",()=>{go(e)}),t("    normalize.run",()=>{Kl.run(e)}),t("    parentDummyChains",()=>{nl(e)}),t("    addBorderSegments",()=>{Od(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{_n(e,n.nodeOrder)}),t("    order",()=>{mh(e)}),t("    insertSelfEdges",()=>{_h(e)}),t("    adjustCoordinateSystem",()=>{Cl.adjust(e)}),t("    position",()=>{qt(e)}),t("    positionSelfEdges",()=>{Ch(e)}),t("    removeBorderNodes",()=>{vh(e)}),t("    normalize.undo",()=>{Kl.undo(e)}),t("    fixupEdgeLabelCoords",()=>{Ts(e)}),t("    undoCoordinateSystem",()=>{Cl.undo(e)}),t("    translateGraph",()=>{Ks(e)}),t("    assignNodeIntersects",()=>{Ls(e)}),t("    reversePoints",()=>{La(e)}),t("    acyclic.undo",()=>{Su.undo(e)})},vi=(e,t)=>{e.nodes().forEach(n=>{const i=e.node(n),r=t.node(n);r!==void 0?(i.fixorder=r._order,delete r._order):delete i.fixorder})},Ii=(e,t)=>{e.nodes().forEach(n=>{var i;const r=e.node(n);if(r){const l=t.node(n);r.x=l.x,r.y=l.y,r._order=l.order,r._rank=l.rank,((i=t.children(n))===null||i===void 0?void 0:i.length)&&(r.width=l.width,r.height=l.height)}}),e.edges().forEach(n=>{const i=e.edge(n),r=t.edge(n);i.points=r.points,r.hasOwnProperty("x")&&(i.x=r.x,i.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},Di=["nodesep","edgesep","ranksep","marginx","marginy"],mr={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},or=["acyclicer","ranker","rankdir","align"],Tr=["width","height","layer","fixorder"],Er={width:0,height:0},cr=["minlen","weight","width","height","labeloffset"],Or={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Lo=["labelpos"],Kr=e=>{const t=new js({multigraph:!0,compound:!0}),n=Pu(e.graph()),i={};return or==null||or.forEach(r=>{n[r]!==void 0&&(i[r]=n[r])}),t.setGraph(Object.assign({},mr,Ru(n,Di),i)),e.nodes().forEach(r=>{const l=Pu(e.node(r)),f=Object.assign(Object.assign({},Er),l),w=Ru(f,Tr);t.setNode(r,w),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const l=Pu(e.edge(r)),f={};Lo==null||Lo.forEach(w=>{l[w]!==void 0&&(f[w]=l[w])}),t.setEdgeObj(r,Object.assign({},Or,Ru(l,cr),f))}),t},us=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const i=e.node(n);isNaN(i.layer)||(i.layer?i.layer*=2:i.layer=0)}),e.edges().forEach(n=>{var i;const r=e.edge(n);r.minlen*=2,((i=r.labelpos)===null||i===void 0?void 0:i.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},hs=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const i=e.node(t.v),r=e.node(t.w),l={e:t,rank:(r.rank-i.rank)/2+i.rank};_a(e,"edge-proxy",l,"_ep")}})},Es=e=>{let t=0;e.nodes().forEach(n=>{var i,r;const l=e.node(n);l.borderTop&&(l.minRank=(i=e.node(l.borderTop))===null||i===void 0?void 0:i.rank,l.maxRank=(r=e.node(l.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,l.maxRank||-Infinity))}),e.graph().maxRank=t},go=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},Ks=e=>{let t,n=0,i,r=0;const l=e.graph(),f=l.marginx||0,w=l.marginy||0,R=H=>{if(!H)return;const Y=H.x,fe=H.y,Le=H.width,Me=H.height;!isNaN(Y)&&!isNaN(Le)&&(t===void 0&&(t=Y-Le/2),t=Math.min(t,Y-Le/2),n=Math.max(n,Y+Le/2)),!isNaN(fe)&&!isNaN(Me)&&(i===void 0&&(i=fe-Me/2),i=Math.min(i,fe-Me/2),r=Math.max(r,fe+Me/2))};e.nodes().forEach(H=>{R(e.node(H))}),e.edges().forEach(H=>{const Y=e.edge(H);(Y==null?void 0:Y.hasOwnProperty("x"))&&R(Y)}),t-=f,i-=w,e.nodes().forEach(H=>{const Y=e.node(H);Y&&(Y.x-=t,Y.y-=i)}),e.edges().forEach(H=>{var Y;const fe=e.edge(H);(Y=fe.points)===null||Y===void 0||Y.forEach(Le=>{Le.x-=t,Le.y-=i}),fe.hasOwnProperty("x")&&(fe.x-=t),fe.hasOwnProperty("y")&&(fe.y-=i)}),l.width=n-t+f,l.height=r-i+w},Ls=e=>{e.edges().forEach(t=>{const n=e.edge(t),i=e.node(t.v),r=e.node(t.w);let l,f;n.points?(l=n.points[0],f=n.points[n.points.length-1]):(n.points=[],l=r,f=i),n.points.unshift(pl(i,l)),n.points.push(pl(r,f))})},Ts=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n==null?void 0:n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},La=e=>{e.edges().forEach(t=>{var n;const i=e.edge(t);i.reversed&&((n=i.points)===null||n===void 0||n.reverse())})},vh=e=>{e.nodes().forEach(t=>{var n,i,r;if((n=e.children(t))===null||n===void 0?void 0:n.length){const l=e.node(t),f=e.node(l.borderTop),w=e.node(l.borderBottom),R=e.node(l.borderLeft[((i=l.borderLeft)===null||i===void 0?void 0:i.length)-1]),H=e.node(l.borderRight[((r=l.borderRight)===null||r===void 0?void 0:r.length)-1]);l.width=Math.abs((H==null?void 0:H.x)-(R==null?void 0:R.x))||10,l.height=Math.abs((w==null?void 0:w.y)-(f==null?void 0:f.y))||10,l.x=((R==null?void 0:R.x)||0)+l.width/2,l.y=((f==null?void 0:f.y)||0)+l.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},Ud=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},_h=e=>{const t=el(e);t==null||t.forEach(n=>{let i=0;n==null||n.forEach((r,l)=>{var f;const w=e.node(r);w.order=l+i,(f=w.selfEdges)===null||f===void 0||f.forEach(R=>{_a(e,"selfedge",{width:R.label.width,height:R.label.height,rank:w.rank,order:l+ ++i,e:R.e,label:R.label},"_se")}),delete w.selfEdges})})},Ch=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const i=e.node(n.e.v),r=i.x+i.width/2,l=i.y,f=n.x-r,w=i.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*f/3,y:l-w},{x:r+5*f/6,y:l-w},{y:l,x:r+f},{x:r+5*f/6,y:l+w},{x:r+2*f/3,y:l+w}],n.label.x=n.x,n.label.y=n.y}})},Ru=(e,t)=>{const n={};return t==null||t.forEach(i=>{e[i]!==void 0&&(n[i]=+e[i])}),n},Pu=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t};var tf=Mn,nf={layout:tf,util:{time:Za,notime:Pc}};class hd extends de{constructor(t){super();this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const i=this,{nodes:r}=i,l=r.find(f=>f.id===n);return l?l.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t;const n=this,{nodes:i,nodeSize:r,rankdir:l,combos:f,begin:w,radial:R}=n;if(!i)return;const H=n.edges||[],Y=new js({multigraph:!0,compound:!0});let fe;r?j(r)?fe=()=>r:fe=()=>[r,r]:fe=ut=>ut.size?j(ut.size)?ut.size:x(ut.size)?[ut.size.width||40,ut.size.height||40]:[ut.size,ut.size]:[40,40];const Le=b(n.ranksep,50,n.ranksepFunc),Me=b(n.nodesep,50,n.nodesepFunc);let We=Me,Ze=Le;(l==="LR"||l==="RL")&&(We=Le,Ze=Me),Y.setDefaultEdgeLabel(()=>({})),Y.setGraph(n);const He={};this.sortByCombo&&f&&f.forEach(ut=>{!ut.parentId||(He[ut.parentId]||(He[ut.parentId]=!0,Y.setNode(ut.parentId,{})),Y.setParent(ut.id,ut.parentId))}),i.filter(ut=>ut.layout!==!1).forEach(ut=>{const Mt=fe(ut),Rt=Ze(ut),un=We(ut),jn=Mt[0]+2*un,xn=Mt[1]+2*Rt,ei=ut.layer;T(ei)?Y.setNode(ut.id,{width:jn,height:xn,layer:ei}):Y.setNode(ut.id,{width:jn,height:xn}),this.sortByCombo&&ut.comboId&&(He[ut.comboId]||(He[ut.comboId]=!0,Y.setNode(ut.comboId,{})),Y.setParent(ut.id,ut.comboId))}),H.forEach(ut=>{const Mt=g(ut,"source"),Rt=g(ut,"target");this.layoutNode(Mt)&&this.layoutNode(Rt)&&Y.setEdge(Mt,Rt,{weight:ut.weight||1})});let et;n.preset&&(et=new js({multigraph:!0,compound:!0}),n.preset.nodes.forEach(ut=>{et==null||et.setNode(ut.id,ut)})),nf.layout(Y,{prevGraph:et,edgeLabelSpace:n.edgeLabelSpace,keepNodeOrder:Boolean(!!n.nodeOrder),nodeOrder:n.nodeOrder});const it=[0,0];if(w){let ut=Infinity,Mt=Infinity;Y.nodes().forEach(Rt=>{const un=Y.node(Rt);ut>un.x&&(ut=un.x),Mt>un.y&&(Mt=un.y)}),Y.edges().forEach(Rt=>{var un;(un=Y.edge(Rt).points)===null||un===void 0||un.forEach(xn=>{ut>xn.x&&(ut=xn.x),Mt>xn.y&&(Mt=xn.y)})}),it[0]=w[0]-ut,it[1]=w[1]-Mt}if(R){const{focusNode:ut,ranksep:Mt,getRadialPos:Rt}=this,un=d(ut)?ut:ut==null?void 0:ut.id,jn=un?(t=Y.node(un))===null||t===void 0?void 0:t._rank:0,xn=[],ei=l==="LR"||l==="RL",ti=ei?"y":"x",_i=ei?"height":"width";let Hn=Infinity,Li=-Infinity;Y.nodes().forEach(eo=>{const xo=Y.node(eo),Gs=i.findIndex(po=>po.id===eo);if(!i[Gs])return;const ur=Me(i[Gs]);if(jn===0)xn[xo._rank]||(xn[xo._rank]={nodes:[],totalWidth:0,maxSize:-Infinity}),xn[xo._rank].nodes.push(eo),xn[xo._rank].totalWidth+=ur*2+xo[_i],xn[xo._rank].maxSize<Math.max(xo.width,xo.height)&&(xn[xo._rank].maxSize=Math.max(xo.width,xo.height));else{const po=xo._rank-jn;if(po===0)xn[po]||(xn[po]={nodes:[],totalWidth:0,maxSize:-Infinity}),xn[po].nodes.push(eo),xn[po].totalWidth+=ur*2+xo[_i],xn[po].maxSize<Math.max(xo.width,xo.height)&&(xn[po].maxSize=Math.max(xo.width,xo.height));else{const Wo=Math.abs(po);xn[Wo]||(xn[Wo]={left:[],right:[],totalWidth:0,maxSize:-Infinity}),xn[Wo].totalWidth+=ur*2+xo[_i],xn[Wo].maxSize<Math.max(xo.width,xo.height)&&(xn[Wo].maxSize=Math.max(xo.width,xo.height)),po<0?xn[Wo].left.push(eo):xn[Wo].right.push(eo)}}const Ao=xo[ti]-xo[_i]/2-ur,gs=xo[ti]+xo[_i]/2+ur;Ao<Hn&&(Hn=Ao),gs>Li&&(Li=gs)});let yi=Mt||50;const fr={},To=(Li-Hn)/.9,Oo=[(Hn+Li-To)*.5,(Hn+Li+To)*.5],Mo=(eo,xo,Gs=-Infinity,ur=[0,1])=>{let Ao=Gs;return eo.forEach(gs=>{const po=Y.node(gs);fr[gs]=xo;const{x:Wo,y:fo}=Rt(po[ti],Oo,To,xo,ur),ds=i.findIndex(ys=>ys.id===gs);if(!i[ds])return;i[ds].x=Wo+it[0],i[ds].y=fo+it[1],i[ds]._order=po._order;const Ka=Le(i[ds]);Ao<Ka&&(Ao=Ka)}),Ao};let Os=!0;const Aa=0;xn.forEach(eo=>{var xo,Gs,ur,Ao,gs,po,Wo;if(!((xo=eo==null?void 0:eo.nodes)===null||xo===void 0?void 0:xo.length)&&!((Gs=eo==null?void 0:eo.left)===null||Gs===void 0?void 0:Gs.length)&&!((ur=eo==null?void 0:eo.right)===null||ur===void 0?void 0:ur.length))return;if(Os&&eo.nodes.length===1){const ds=i.findIndex(Ka=>Ka.id===eo.nodes[0]);i[ds].x=it[0],i[ds].y=it[1],fr[eo.nodes[0]]=0,yi=Le(i[ds]),Os=!1;return}yi=Math.max(yi,eo.totalWidth/(2*Math.PI));let fo=-Infinity;if(jn===0||((Ao=eo.nodes)===null||Ao===void 0?void 0:Ao.length))fo=Mo(eo.nodes,yi,fo,[0,1]);else{const ds=((gs=eo.left)===null||gs===void 0?void 0:gs.length)/(((po=eo.left)===null||po===void 0?void 0:po.length)+((Wo=eo.right)===null||Wo===void 0?void 0:Wo.length));fo=Mo(eo.left,yi,fo,[0,ds]),fo=Mo(eo.right,yi,fo,[ds+.05,1])}yi+=fo,Os=!1,Aa-eo.maxSize}),Y.edges().forEach(eo=>{var xo,Gs,ur;const Ao=Y.edge(eo),gs=H.findIndex(po=>{const Wo=g(po,"source"),fo=g(po,"target");return Wo===eo.v&&fo===eo.w});if(n.edgeLabelSpace&&n.controlPoints&&H[gs].type!=="loop"){const po=ti==="x"?"y":"x",Wo=(xo=Ao==null?void 0:Ao.points)===null||xo===void 0?void 0:xo.slice(1,Ao.points.length-1),fo=[],ds=(Gs=Y.node(eo.v))===null||Gs===void 0?void 0:Gs[po],Ka=ds-((ur=Y.node(eo.w))===null||ur===void 0?void 0:ur[po]),ys=fr[eo.v],Qc=ys-fr[eo.w];Wo==null||Wo.forEach(Jc=>{const sh=(Jc[po]-ds)/Ka*Qc+ys,qu=Rt(Jc[ti],Oo,To,sh);fo.push({x:qu.x+it[0],y:qu.y+it[1]})}),H[gs].controlPoints=fo}})}else Y.nodes().forEach(ut=>{const Mt=Y.node(ut),Rt=i.findIndex(un=>un.id===ut);!i[Rt]||(i[Rt].x=Mt.x+it[0],i[Rt].y=Mt.y+it[1],i[Rt]._order=Mt._order)}),Y.edges().forEach(ut=>{var Mt;const Rt=Y.edge(ut),un=H.findIndex(jn=>{const xn=g(jn,"source"),ei=g(jn,"target");return xn===ut.v&&ei===ut.w});n.edgeLabelSpace&&n.controlPoints&&H[un].type!=="loop"&&(H[un].controlPoints=(Mt=Rt==null?void 0:Rt.points)===null||Mt===void 0?void 0:Mt.slice(1,Rt.points.length-1),H[un].controlPoints.forEach(jn=>{jn.x+=it[0],jn.y+=it[1]}))});return n.onLayoutEnd&&n.onLayoutEnd(),{nodes:i,edges:H}}getRadialPos(t,n,i,r,l=[0,1]){let f=(t-n[0])/i;f=f*(l[1]-l[0])+l[0];const w=f*2*Math.PI;return{x:Math.cos(w)*r,y:Math.sin(w)*r}}getType(){return"dagre"}}const Sc={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function lu(e={},t=Sc){var n,i,r,l;const f=JSON.parse(JSON.stringify(t)),w=((n=e==null?void 0:e.graph)===null||n===void 0?void 0:n.meta)||{},R=((i=e==null?void 0:e.subScene)===null||i===void 0?void 0:i.meta)||{},H=((r=e==null?void 0:e.nodeSize)===null||r===void 0?void 0:r.meta)||{},Y=((l=e==null?void 0:e.nodeSize)===null||l===void 0?void 0:l.node)||{},fe=f.nodeSize.bridge;return{graph:{meta:Object.assign(f.graph.meta,w)},subScene:{meta:Object.assign(f.subScene.meta,R)},nodeSize:{meta:Object.assign(f.nodeSize.meta,H),node:Object.assign(f.nodeSize.node,Y),bridge:fe}}}function Ec(e){return`\u25EC${e}\u25EC`}const Jl=Ec("ROOT"),bh=Ec("BRIDGE_GRAPH");var Da,cu,Ou,ku;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(Da||(Da={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(cu||(cu={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(Ou||(Ou={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(ku||(ku={}));var fd=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof a.g!="undefined"?a.g:typeof self!="undefined"?self:{};function gd(e,t){return e(t={exports:{}},t.exports),t.exports}var yh=function(){this.__data__=[],this.size=0},Xa=function(e,t){return e===t||e!=e&&t!=t},Bc=function(e,t){for(var n=e.length;n--;)if(Xa(e[n][0],t))return n;return-1},md=Array.prototype.splice,rf=function(e){var t=this.__data__,n=Bc(t,e);return!(n<0)&&(n==t.length-1?t.pop():md.call(t,n,1),--this.size,!0)},Fu=function(e){var t=this.__data__,n=Bc(t,e);return n<0?void 0:t[n][1]},uu=function(e){return Bc(this.__data__,e)>-1},wh=function(e,t){var n=this.__data__,i=Bc(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};function Lc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Lc.prototype.clear=yh,Lc.prototype.delete=rf,Lc.prototype.get=Fu,Lc.prototype.has=uu,Lc.prototype.set=wh;var Wc=Lc,Vc=function(){this.__data__=new Wc,this.size=0},Bu=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Sh=function(e){return this.__data__.get(e)},yl=function(e){return this.__data__.has(e)},wl=typeof fd=="object"&&fd&&fd.Object===Object&&fd,du=typeof self=="object"&&self&&self.Object===Object&&self,ya=wl||du||Function("return this")(),ca=ya.Symbol,Uc=Object.prototype,zc=Uc.hasOwnProperty,Dc=Uc.toString,Pl=ca?ca.toStringTag:void 0,zd=function(e){var t=zc.call(e,Pl),n=e[Pl];try{e[Pl]=void 0;var i=!0}catch(l){}var r=Dc.call(e);return i&&(t?e[Pl]=n:delete e[Pl]),r},Ol=Object.prototype.toString,pd=function(e){return Ol.call(e)},Hd=ca?ca.toStringTag:void 0,Ya=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Hd&&Hd in Object(e)?zd(e):pd(e)},ua=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},ql,Wu=function(e){if(!ua(e))return!1;var t=Ya(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Vu=ya["__core-js_shared__"],hu=(ql=/[^.]+$/.exec(Vu&&Vu.keys&&Vu.keys.IE_PROTO||""))?"Symbol(src)_1."+ql:"",Gd=function(e){return!!hu&&hu in e},vd=Function.prototype.toString,rl=function(e){if(e!=null){try{return vd.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Hc=/^\[object .+?Constructor\]$/,Eh=Function.prototype,Lh=Object.prototype,Qa=Eh.toString,of=Lh.hasOwnProperty,sf=RegExp("^"+Qa.call(of).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tg=function(e){return!(!ua(e)||Gd(e))&&(Wu(e)?sf:Hc).test(rl(e))},Dh=function(e,t){return e==null?void 0:e[t]},fu=function(e,t){var n=Dh(e,t);return tg(n)?n:void 0},_d=fu(ya,"Map"),ec=fu(Object,"create"),af=function(){this.__data__=ec?ec(null):{},this.size=0},Gc=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ng=Object.prototype.hasOwnProperty,lf=function(e){var t=this.__data__;if(ec){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return ng.call(t,e)?t[e]:void 0},jd=Object.prototype.hasOwnProperty,Cd=function(e){var t=this.__data__;return ec?t[e]!==void 0:jd.call(t,e)},bd=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ec&&t===void 0?"__lodash_hash_undefined__":t,this};function kl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}kl.prototype.clear=af,kl.prototype.delete=Gc,kl.prototype.get=lf,kl.prototype.has=Cd,kl.prototype.set=bd;var Uu=kl,yd=function(){this.size=0,this.__data__={hash:new Uu,map:new(_d||Wc),string:new Uu}},Kd=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},tc=function(e,t){var n=e.__data__;return Kd(t)?n[typeof t=="string"?"string":"hash"]:n.map},xh=function(e){var t=tc(this,e).delete(e);return this.size-=t?1:0,t},zu=function(e){return tc(this,e).get(e)},$d=function(e){return tc(this,e).has(e)},Hu=function(e,t){var n=tc(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function da(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}da.prototype.clear=yd,da.prototype.delete=xh,da.prototype.get=zu,da.prototype.has=$d,da.prototype.set=Hu;var jc=da,wd=function(e,t){var n=this.__data__;if(n instanceof Wc){var i=n.__data__;if(!_d||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new jc(i)}return n.set(e,t),this.size=n.size,this};function nc(e){var t=this.__data__=new Wc(e);this.size=t.size}nc.prototype.clear=Vc,nc.prototype.delete=Bu,nc.prototype.get=Sh,nc.prototype.has=yl,nc.prototype.set=wd;var Fl=nc,gu=function(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e},ic=function(){try{var e=fu(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Bl=function(e,t,n){t=="__proto__"&&ic?ic(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ig=Object.prototype.hasOwnProperty,Sd=function(e,t,n){var i=e[t];ig.call(e,t)&&Xa(i,n)&&(n!==void 0||t in e)||Bl(e,t,n)},Ed=function(e,t,n,i){var r=!n;n||(n={});for(var l=-1,f=t.length;++l<f;){var w=t[l],R=i?i(n[w],e[w],w,n,e):void 0;R===void 0&&(R=e[w]),r?Bl(n,w,R):Sd(n,w,R)}return n},rg=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i},Wl=function(e){return e!=null&&typeof e=="object"},rc=function(e){return Wl(e)&&Ya(e)=="[object Arguments]"},Zd=Object.prototype,cf=Zd.hasOwnProperty,Vl=Zd.propertyIsEnumerable,Gu=rc(function(){return arguments}())?rc:function(e){return Wl(e)&&cf.call(e,"callee")&&!Vl.call(e,"callee")},Ms=Array.isArray,og=function(){return!1},Yo=gd(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n?ya.Buffer:void 0,l=(r?r.isBuffer:void 0)||og;e.exports=l}),Xd=/^(?:0|[1-9]\d*)$/,xc=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&Xd.test(e))&&e>-1&&e%1==0&&e<t},oc=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},As={};As["[object Float32Array]"]=As["[object Float64Array]"]=As["[object Int8Array]"]=As["[object Int16Array]"]=As["[object Int32Array]"]=As["[object Uint8Array]"]=As["[object Uint8ClampedArray]"]=As["[object Uint16Array]"]=As["[object Uint32Array]"]=!0,As["[object Arguments]"]=As["[object Array]"]=As["[object ArrayBuffer]"]=As["[object Boolean]"]=As["[object DataView]"]=As["[object Date]"]=As["[object Error]"]=As["[object Function]"]=As["[object Map]"]=As["[object Number]"]=As["[object Object]"]=As["[object RegExp]"]=As["[object Set]"]=As["[object String]"]=As["[object WeakMap]"]=!1;var Wa=function(e){return Wl(e)&&oc(e.length)&&!!As[Ya(e)]},Ic=function(e){return function(t){return e(t)}},sc=gd(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n&&wl.process,l=function(){try{var f=i&&i.require&&i.require("util").types;return f||r&&r.binding&&r.binding("util")}catch(w){}}();e.exports=l}),wa=sc&&sc.isTypedArray,Ha=wa?Ic(wa):Wa,$s=Object.prototype.hasOwnProperty,ka=function(e,t){var n=Ms(e),i=!n&&Gu(e),r=!n&&!i&&Yo(e),l=!n&&!i&&!r&&Ha(e),f=n||i||r||l,w=f?rg(e.length,String):[],R=w.length;for(var H in e)!t&&!$s.call(e,H)||f&&(H=="length"||r&&(H=="offset"||H=="parent")||l&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||xc(H,R))||w.push(H);return w},Ih=Object.prototype,ju=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||Ih)},uf=function(e,t){return function(n){return e(t(n))}},df=uf(Object.keys,Object),Nh=Object.prototype.hasOwnProperty,Yd=function(e){if(!ju(e))return df(e);var t=[];for(var n in Object(e))Nh.call(e,n)&&n!="constructor"&&t.push(n);return t},ol=function(e){return e!=null&&oc(e.length)&&!Wu(e)},ac=function(e){return ol(e)?ka(e):Yd(e)},hf=function(e,t){return e&&Ed(t,ac(t),e)},mu=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},Th=Object.prototype.hasOwnProperty,Qd=function(e){if(!ua(e))return mu(e);var t=ju(e),n=[];for(var i in e)(i!="constructor"||!t&&Th.call(e,i))&&n.push(i);return n},sl=function(e){return ol(e)?ka(e,!0):Qd(e)},Ld=function(e,t){return e&&Ed(t,sl(t),e)},ff=gd(function(e,t){var n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,r=i&&i.exports===n?ya.Buffer:void 0,l=r?r.allocUnsafe:void 0;e.exports=function(f,w){if(w)return f.slice();var R=f.length,H=l?l(R):new f.constructor(R);return f.copy(H),H}}),gf=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t},Mh=function(e,t){for(var n=-1,i=e==null?0:e.length,r=0,l=[];++n<i;){var f=e[n];t(f,n,e)&&(l[r++]=f)}return l},mf=function(){return[]},mt=Object.prototype.propertyIsEnumerable,Qt=Object.getOwnPropertySymbols,Cn=Qt?function(e){return e==null?[]:(e=Object(e),Mh(Qt(e),function(t){return mt.call(e,t)}))}:mf,hi=function(e,t){return Ed(e,Cn(e),t)},Ei=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},di=uf(Object.getPrototypeOf,Object),mi=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ei(t,Cn(e)),e=di(e);return t}:mf,Wi=function(e,t){return Ed(e,mi(e),t)},Vi=function(e,t,n){var i=t(e);return Ms(e)?i:Ei(i,n(e))},Ki=function(e){return Vi(e,ac,Cn)},zi=function(e){return Vi(e,sl,mi)},Qi=fu(ya,"DataView"),ir=fu(ya,"Promise"),Oi=fu(ya,"Set"),Zi=fu(ya,"WeakMap"),Yn=rl(Qi),fi=rl(_d),$i=rl(ir),ar=rl(Oi),Mi=rl(Zi),sr=Ya;(Qi&&sr(new Qi(new ArrayBuffer(1)))!="[object DataView]"||_d&&sr(new _d)!="[object Map]"||ir&&sr(ir.resolve())!="[object Promise]"||Oi&&sr(new Oi)!="[object Set]"||Zi&&sr(new Zi)!="[object WeakMap]")&&(sr=function(e){var t=Ya(e),n=t=="[object Object]"?e.constructor:void 0,i=n?rl(n):"";if(i)switch(i){case Yn:return"[object DataView]";case fi:return"[object Map]";case $i:return"[object Promise]";case ar:return"[object Set]";case Mi:return"[object WeakMap]"}return t});var Ni=sr,qi=Object.prototype.hasOwnProperty,Ri=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&qi.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Ui=ya.Uint8Array,Vr=function(e){var t=new e.constructor(e.byteLength);return new Ui(t).set(new Ui(e)),t},co=function(e,t){var n=t?Vr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},rr=/\w*$/,ki=function(e){var t=new e.constructor(e.source,rr.exec(e));return t.lastIndex=e.lastIndex,t},Ti=ca?ca.prototype:void 0,Yr=Ti?Ti.valueOf:void 0,Eo=function(e){return Yr?Object(Yr.call(e)):{}},br=function(e,t){var n=t?Vr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Fo=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return Vr(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return co(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return br(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return ki(e);case"[object Set]":return new i;case"[object Symbol]":return Eo(e)}},uo=Object.create,vo=function(){function e(){}return function(t){if(!ua(t))return{};if(uo)return uo(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Qo=function(e){return typeof e.constructor!="function"||ju(e)?{}:vo(di(e))},Rs=function(e){return Wl(e)&&Ni(e)=="[object Map]"},ha=sc&&sc.isMap,Go=ha?Ic(ha):Rs,Us=function(e){return Wl(e)&&Ni(e)=="[object Set]"},vs=sc&&sc.isSet,Ps=vs?Ic(vs):Us,Do={};Do["[object Arguments]"]=Do["[object Array]"]=Do["[object ArrayBuffer]"]=Do["[object DataView]"]=Do["[object Boolean]"]=Do["[object Date]"]=Do["[object Float32Array]"]=Do["[object Float64Array]"]=Do["[object Int8Array]"]=Do["[object Int16Array]"]=Do["[object Int32Array]"]=Do["[object Map]"]=Do["[object Number]"]=Do["[object Object]"]=Do["[object RegExp]"]=Do["[object Set]"]=Do["[object String]"]=Do["[object Symbol]"]=Do["[object Uint8Array]"]=Do["[object Uint8ClampedArray]"]=Do["[object Uint16Array]"]=Do["[object Uint32Array]"]=!0,Do["[object Error]"]=Do["[object Function]"]=Do["[object WeakMap]"]=!1;var oa=function e(t,n,i,r,l,f){var w,R=1&n,H=2&n,Y=4&n;if(i&&(w=l?i(t,r,l,f):i(t)),w!==void 0)return w;if(!ua(t))return t;var fe=Ms(t);if(fe){if(w=Ri(t),!R)return gf(t,w)}else{var Le=Ni(t),Me=Le=="[object Function]"||Le=="[object GeneratorFunction]";if(Yo(t))return ff(t,R);if(Le=="[object Object]"||Le=="[object Arguments]"||Me&&!l){if(w=H||Me?{}:Qo(t),!R)return H?Wi(t,Ld(w,t)):hi(t,hf(w,t))}else{if(!Do[Le])return l?t:{};w=Fo(t,Le,R)}}f||(f=new Fl);var We=f.get(t);if(We)return We;f.set(t,w),Ps(t)?t.forEach(function(He){w.add(e(He,n,i,He,t,f))}):Go(t)&&t.forEach(function(He,et){w.set(et,e(He,n,i,et,t,f))});var Ze=fe?void 0:(Y?H?zi:Ki:H?sl:ac)(t);return gu(Ze||t,function(He,et){Ze&&(He=t[et=He]),Sd(w,et,e(He,n,i,et,t,f))}),w},Sa=function(e){return oa(e,4)},fa=function(e){return function(){return e}},zs=function(e){return function(t,n,i){for(var r=-1,l=Object(t),f=i(t),w=f.length;w--;){var R=f[e?w:++r];if(n(l[R],R,l)===!1)break}return t}}(),_o=function(e,t){return e&&zs(e,t,ac)},Qs=function(e,t){return function(n,i){if(n==null)return n;if(!ol(n))return e(n,i);for(var r=n.length,l=t?r:-1,f=Object(n);(t?l--:++l<r)&&i(f[l],l,f)!==!1;);return n}}(_o),Xo=function(e){return e},Zr=function(e){return typeof e=="function"?e:Xo},Co=function(e,t){return(Ms(e)?gu:Qs)(e,Zr(t))},Jo=Co,Js=function(e,t){var n=[];return Qs(e,function(i,r,l){t(i,r,l)&&n.push(i)}),n},Ul=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Kc=function(e){return this.__data__.has(e)};function gn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new jc;++t<n;)this.add(e[t])}gn.prototype.add=gn.prototype.push=Ul,gn.prototype.has=Kc;var ai=gn,ci=function(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},pr=function(e,t){return e.has(t)},bo=function(e,t,n,i,r,l){var f=1&n,w=e.length,R=t.length;if(w!=R&&!(f&&R>w))return!1;var H=l.get(e),Y=l.get(t);if(H&&Y)return H==t&&Y==e;var fe=-1,Le=!0,Me=2&n?new ai:void 0;for(l.set(e,t),l.set(t,e);++fe<w;){var We=e[fe],Ze=t[fe];if(i)var He=f?i(Ze,We,fe,t,e,l):i(We,Ze,fe,e,t,l);if(He!==void 0){if(He)continue;Le=!1;break}if(Me){if(!ci(t,function(et,it){if(!pr(Me,it)&&(We===et||r(We,et,n,i,l)))return Me.push(it)})){Le=!1;break}}else if(We!==Ze&&!r(We,Ze,n,i,l)){Le=!1;break}}return l.delete(e),l.delete(t),Le},ln=function(e){var t=-1,n=Array(e.size);return e.forEach(function(i,r){n[++t]=[r,i]}),n},Gt=function(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n},Dn=ca?ca.prototype:void 0,Pn=Dn?Dn.valueOf:void 0,qn=function(e,t,n,i,r,l,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!l(new Ui(e),new Ui(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Xa(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var w=ln;case"[object Set]":var R=1&i;if(w||(w=Gt),e.size!=t.size&&!R)return!1;var H=f.get(e);if(H)return H==t;i|=2,f.set(e,t);var Y=bo(w(e),w(t),i,r,l,f);return f.delete(e),Y;case"[object Symbol]":if(Pn)return Pn.call(e)==Pn.call(t)}return!1},In=Object.prototype.hasOwnProperty,yn=function(e,t,n,i,r,l){var f=1&n,w=Ki(e),R=w.length;if(R!=Ki(t).length&&!f)return!1;for(var H=R;H--;){var Y=w[H];if(!(f?Y in t:In.call(t,Y)))return!1}var fe=l.get(e),Le=l.get(t);if(fe&&Le)return fe==t&&Le==e;var Me=!0;l.set(e,t),l.set(t,e);for(var We=f;++H<R;){var Ze=e[Y=w[H]],He=t[Y];if(i)var et=f?i(He,Ze,Y,t,e,l):i(Ze,He,Y,e,t,l);if(!(et===void 0?Ze===He||r(Ze,He,n,i,l):et)){Me=!1;break}We||(We=Y=="constructor")}if(Me&&!We){var it=e.constructor,ut=t.constructor;it==ut||!("constructor"in e)||!("constructor"in t)||typeof it=="function"&&it instanceof it&&typeof ut=="function"&&ut instanceof ut||(Me=!1)}return l.delete(e),l.delete(t),Me},zn=Object.prototype.hasOwnProperty,cn=function(e,t,n,i,r,l){var f=Ms(e),w=Ms(t),R=f?"[object Array]":Ni(e),H=w?"[object Array]":Ni(t),Y=(R=R=="[object Arguments]"?"[object Object]":R)=="[object Object]",fe=(H=H=="[object Arguments]"?"[object Object]":H)=="[object Object]",Le=R==H;if(Le&&Yo(e)){if(!Yo(t))return!1;f=!0,Y=!1}if(Le&&!Y)return l||(l=new Fl),f||Ha(e)?bo(e,t,n,i,r,l):qn(e,t,R,n,i,r,l);if(!(1&n)){var Me=Y&&zn.call(e,"__wrapped__"),We=fe&&zn.call(t,"__wrapped__");if(Me||We){var Ze=Me?e.value():e,He=We?t.value():t;return l||(l=new Fl),r(Ze,He,n,i,l)}}return!!Le&&(l||(l=new Fl),yn(e,t,n,i,r,l))},Ln=function e(t,n,i,r,l){return t===n||(t==null||n==null||!Wl(t)&&!Wl(n)?t!=t&&n!=n:cn(t,n,i,r,e,l))},nn=function(e,t,n,i){var r=n.length,l=r,f=!i;if(e==null)return!l;for(e=Object(e);r--;){var w=n[r];if(f&&w[2]?w[1]!==e[w[0]]:!(w[0]in e))return!1}for(;++r<l;){var R=(w=n[r])[0],H=e[R],Y=w[1];if(f&&w[2]){if(H===void 0&&!(R in e))return!1}else{var fe=new Fl;if(i)var Le=i(H,Y,R,e,t,fe);if(!(Le===void 0?Ln(Y,H,3,i,fe):Le))return!1}}return!0},Kn=function(e){return e==e&&!ua(e)},ni=function(e){for(var t=ac(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Kn(r)]}return t},bi=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},Si=function(e){var t=ni(e);return t.length==1&&t[0][2]?bi(t[0][0],t[0][1]):function(n){return n===e||nn(n,e,t)}},pi=function(e){return typeof e=="symbol"||Wl(e)&&Ya(e)=="[object Symbol]"},Hi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kr=/^\w*$/,mo=function(e,t){if(Ms(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!pi(e))||kr.test(e)||!Hi.test(e)||t!=null&&e in Object(t)};function _r(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],l=n.cache;if(l.has(r))return l.get(r);var f=e.apply(this,i);return n.cache=l.set(r,f)||l,f};return n.cache=new(_r.Cache||jc),n}_r.Cache=jc;var qr=_r,ho=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qo=/\\(\\)?/g,Fs=function(e){var t=qr(e,function(i){return n.size===500&&n.clear(),i}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ho,function(n,i,r,l){t.push(r?l.replace(qo,"$1"):i||n)}),t}),Ea=function(e,t){for(var n=-1,i=e==null?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r},Ku=ca?ca.prototype:void 0,al=Ku?Ku.toString:void 0,pf=function e(t){if(typeof t=="string")return t;if(Ms(t))return Ea(t,e)+"";if(pi(t))return al?al.call(t):"";var n=t+"";return n=="0"&&1/t==-Infinity?"-0":n},Sl=function(e){return e==null?"":pf(e)},pu=function(e,t){return Ms(e)?e:mo(e,t)?[e]:Fs(Sl(e))},$r=function(e){if(typeof e=="string"||pi(e))return e;var t=e+"";return t=="0"&&1/e==-Infinity?"-0":t},Jd=function(e,t){for(var n=0,i=(t=pu(t,e)).length;e!=null&&n<i;)e=e[$r(t[n++])];return n&&n==i?e:void 0},_s=function(e,t,n){var i=e==null?void 0:Jd(e,t);return i===void 0?n:i},Ep=function(e,t){return e!=null&&t in Object(e)},sg=function(e,t,n){for(var i=-1,r=(t=pu(t,e)).length,l=!1;++i<r;){var f=$r(t[i]);if(!(l=e!=null&&n(e,f)))break;e=e[f]}return l||++i!=r?l:!!(r=e==null?0:e.length)&&oc(r)&&xc(f,r)&&(Ms(e)||Gu(e))},qg=function(e,t){return e!=null&&sg(e,t,Ep)},vf=function(e,t){return mo(e)&&Kn(t)?bi($r(e),t):function(n){var i=_s(n,e);return i===void 0&&i===t?qg(n,e):Ln(t,i,3)}},_f=function(e){return function(t){return t==null?void 0:t[e]}},ag=function(e){return function(t){return Jd(t,e)}},em=function(e){return mo(e)?_f($r(e)):ag(e)},$c=function(e){return typeof e=="function"?e:e==null?Xo:typeof e=="object"?Ms(e)?vf(e[0],e[1]):Si(e):em(e)},tm=function(e,t){return(Ms(e)?Mh:Js)(e,$c(t))},Lp=Object.prototype.hasOwnProperty,Dp=function(e,t){return e!=null&&Lp.call(e,t)},nm=function(e,t){return e!=null&&sg(e,t,Dp)},xp=Object.prototype.hasOwnProperty,Ip=function(e){if(e==null)return!0;if(ol(e)&&(Ms(e)||typeof e=="string"||typeof e.splice=="function"||Yo(e)||Ha(e)||Gu(e)))return!e.length;var t=Ni(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(ju(e))return!Yd(e).length;for(var n in e)if(xp.call(e,n))return!1;return!0},im=function(e){return e===void 0},rm=function(e,t){var n=-1,i=ol(e)?Array(e.length):[];return Qs(e,function(r,l,f){i[++n]=t(r,l,f)}),i},om=function(e,t){return(Ms(e)?Ea:rm)(e,$c(t))},Np=function(e,t,n,i){var r=-1,l=e==null?0:e.length;for(i&&l&&(n=e[++r]);++r<l;)n=t(n,e[r],r,e);return n},Tp=function(e,t,n,i,r){return r(e,function(l,f,w){n=i?(i=!1,l):t(n,l,f,w)}),n},sm=function(e,t,n){var i=Ms(e)?Np:Tp,r=arguments.length<3;return i(e,$c(t),n,r,Qs)},Mp=function(e){return typeof e=="string"||!Ms(e)&&Wl(e)&&Ya(e)=="[object String]"},Ap=_f("length"),Rp=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Pp=function(e){return Rp.test(e)},Op="[\\ud800-\\udfff]",lg="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",cg="\\ud83c[\\udffb-\\udfff]",am="[^\\ud800-\\udfff]",lm="(?:\\ud83c[\\udde6-\\uddff]){2}",cm="[\\ud800-\\udbff][\\udc00-\\udfff]",um="(?:"+lg+"|"+cg+")?",kp="[\\ufe0e\\ufe0f]?"+um+("(?:\\u200d(?:"+[am,lm,cm].join("|")+")[\\ufe0e\\ufe0f]?"+um+")*"),Fp="(?:"+[am+lg+"?",lg,lm,cm,Op].join("|")+")",dm=RegExp(cg+"(?="+cg+")|"+Fp+kp,"g"),Cf=function(e){for(var t=dm.lastIndex=0;dm.test(e);)++t;return t},hm=function(e){return Pp(e)?Cf(e):Ap(e)},Bp=function(e){if(e==null)return 0;if(ol(e))return Mp(e)?hm(e):e.length;var t=Ni(e);return t=="[object Map]"||t=="[object Set]"?e.size:Yd(e).length},fm=function(e,t,n){var i=Ms(e),r=i||Yo(e)||Ha(e);if(t=$c(t),n==null){var l=e&&e.constructor;n=r?i?new l:[]:ua(e)&&Wu(l)?vo(di(e)):{}}return(r?gu:_o)(e,function(f,w,R){return t(n,f,w,R)}),n},bf=ca?ca.isConcatSpreadable:void 0,Wp=function(e){return Ms(e)||Gu(e)||!!(bf&&e&&e[bf])},ug=function e(t,n,i,r,l){var f=-1,w=t.length;for(i||(i=Wp),l||(l=[]);++f<w;){var R=t[f];n>0&&i(R)?n>1?e(R,n-1,i,r,l):Ei(l,R):r||(l[l.length]=R)}return l},dg=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},gm=Math.max,hg=function(e,t,n){return t=gm(t===void 0?e.length-1:t,0),function(){for(var i=arguments,r=-1,l=gm(i.length-t,0),f=Array(l);++r<l;)f[r]=i[t+r];r=-1;for(var w=Array(t+1);++r<t;)w[r]=i[r];return w[t]=n(f),dg(e,this,w)}},Vp=ic?function(e,t){return ic(e,"toString",{configurable:!0,enumerable:!1,value:fa(t),writable:!0})}:Xo,Up=Date.now,mm=function(e){var t=0,n=0;return function(){var i=Up(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Vp),yf=function(e,t){return mm(hg(e,t,Xo),e+"")},pm=function(e,t,n,i){for(var r=e.length,l=n+(i?1:-1);i?l--:++l<r;)if(t(e[l],l,e))return l;return-1},zp=function(e){return e!=e},Hp=function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1},Ah=function(e,t,n){return t==t?Hp(e,t,n):pm(e,zp,n)},Gp=function(e,t){return!!(e==null?0:e.length)&&Ah(e,t,0)>-1},jp=function(e,t,n){for(var i=-1,r=e==null?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1},vm=function(){},Kp=Oi&&1/Gt(new Oi([,-0]))[1]==1/0?function(e){return new Oi(e)}:vm,_m=function(e,t,n){var i=-1,r=Gp,l=e.length,f=!0,w=[],R=w;if(n)f=!1,r=jp;else if(l>=200){var H=t?null:Kp(e);if(H)return Gt(H);f=!1,r=pr,R=new ai}else R=t?[]:w;e:for(;++i<l;){var Y=e[i],fe=t?t(Y):Y;if(Y=n||Y!==0?Y:0,f&&fe==fe){for(var Le=R.length;Le--;)if(R[Le]===fe)continue e;t&&R.push(fe),w.push(Y)}else r(R,fe,n)||(R!==w&&R.push(fe),w.push(Y))}return w},wf=function(e){return Wl(e)&&ol(e)},$p=yf(function(e){return _m(ug(e,1,wf,!0))}),Zp=function(e,t){return Ea(t,function(n){return e[n]})},Sf,Cm=function(e){return e==null?[]:Zp(e,ac(e))};try{Sf={clone:Sa,constant:fa,each:Jo,filter:tm,has:nm,isArray:Ms,isEmpty:Ip,isFunction:Wu,isUndefined:im,keys:ac,map:om,reduce:sm,size:Bp,transform:fm,union:$p,values:Cm}}catch(e){}Sf||(Sf=window._);var Ar=Sf,fg=ls;function ls(e){this._isDirected=!Ar.has(e,"directed")||e.directed,this._isMultigraph=!!Ar.has(e,"multigraph")&&e.multigraph,this._isCompound=!!Ar.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Ar.constant(void 0),this._defaultEdgeLabelFn=Ar.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function bm(e,t){e[t]?e[t]++:e[t]=1}function ym(e,t){--e[t]||delete e[t]}function Rh(e,t,n,i){var r=""+t,l=""+n;if(!e&&r>l){var f=r;r=l,l=f}return r+""+l+""+(Ar.isUndefined(i)?"\0":i)}function Xp(e,t,n,i){var r=""+t,l=""+n;if(!e&&r>l){var f=r;r=l,l=f}var w={v:r,w:l};return i&&(w.name=i),w}function gg(e,t){return Rh(e,t.v,t.w,t.name)}ls.prototype._nodeCount=0,ls.prototype._edgeCount=0,ls.prototype.isDirected=function(){return this._isDirected},ls.prototype.isMultigraph=function(){return this._isMultigraph},ls.prototype.isCompound=function(){return this._isCompound},ls.prototype.setGraph=function(e){return this._label=e,this},ls.prototype.graph=function(){return this._label},ls.prototype.setDefaultNodeLabel=function(e){return Ar.isFunction(e)||(e=Ar.constant(e)),this._defaultNodeLabelFn=e,this},ls.prototype.nodeCount=function(){return this._nodeCount},ls.prototype.nodes=function(){return Ar.keys(this._nodes)},ls.prototype.sources=function(){var e=this;return Ar.filter(this.nodes(),function(t){return Ar.isEmpty(e._in[t])})},ls.prototype.sinks=function(){var e=this;return Ar.filter(this.nodes(),function(t){return Ar.isEmpty(e._out[t])})},ls.prototype.setNodes=function(e,t){var n=arguments,i=this;return Ar.each(e,function(r){n.length>1?i.setNode(r,t):i.setNode(r)}),this},ls.prototype.setNode=function(e,t){return Ar.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},ls.prototype.node=function(e){return this._nodes[e]},ls.prototype.hasNode=function(e){return Ar.has(this._nodes,e)},ls.prototype.removeNode=function(e){var t=this;if(Ar.has(this._nodes,e)){var n=function(i){t.removeEdge(t._edgeObjs[i])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Ar.each(this.children(e),function(i){t.setParent(i)}),delete this._children[e]),Ar.each(Ar.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],Ar.each(Ar.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},ls.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Ar.isUndefined(t))t="\0";else{for(var n=t+="";!Ar.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},ls.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},ls.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},ls.prototype.children=function(e){if(Ar.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return Ar.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},ls.prototype.predecessors=function(e){var t=this._preds[e];if(t)return Ar.keys(t)},ls.prototype.successors=function(e){var t=this._sucs[e];if(t)return Ar.keys(t)},ls.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return Ar.union(t,this.successors(e))},ls.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},ls.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;Ar.each(this._nodes,function(l,f){e(f)&&t.setNode(f,l)}),Ar.each(this._edgeObjs,function(l){t.hasNode(l.v)&&t.hasNode(l.w)&&t.setEdge(l,n.edge(l))});var i={};function r(l){var f=n.parent(l);return f===void 0||t.hasNode(f)?(i[l]=f,f):f in i?i[f]:r(f)}return this._isCompound&&Ar.each(t.nodes(),function(l){t.setParent(l,r(l))}),t},ls.prototype.setDefaultEdgeLabel=function(e){return Ar.isFunction(e)||(e=Ar.constant(e)),this._defaultEdgeLabelFn=e,this},ls.prototype.edgeCount=function(){return this._edgeCount},ls.prototype.edges=function(){return Ar.values(this._edgeObjs)},ls.prototype.setPath=function(e,t){var n=this,i=arguments;return Ar.reduce(e,function(r,l){return i.length>1?n.setEdge(r,l,t):n.setEdge(r,l),l}),this},ls.prototype.setEdge=function(){var e,t,n,i,r=!1,l=arguments[0];typeof l=="object"&&l!==null&&"v"in l?(e=l.v,t=l.w,n=l.name,arguments.length===2&&(i=arguments[1],r=!0)):(e=l,t=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],r=!0)),e=""+e,t=""+t,Ar.isUndefined(n)||(n=""+n);var f=Rh(this._isDirected,e,t,n);if(Ar.has(this._edgeLabels,f))return r&&(this._edgeLabels[f]=i),this;if(!Ar.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[f]=r?i:this._defaultEdgeLabelFn(e,t,n);var w=Xp(this._isDirected,e,t,n);return e=w.v,t=w.w,Object.freeze(w),this._edgeObjs[f]=w,bm(this._preds[t],e),bm(this._sucs[e],t),this._in[t][f]=w,this._out[e][f]=w,this._edgeCount++,this},ls.prototype.edge=function(e,t,n){var i=arguments.length===1?gg(this._isDirected,arguments[0]):Rh(this._isDirected,e,t,n);return this._edgeLabels[i]},ls.prototype.hasEdge=function(e,t,n){var i=arguments.length===1?gg(this._isDirected,arguments[0]):Rh(this._isDirected,e,t,n);return Ar.has(this._edgeLabels,i)},ls.prototype.removeEdge=function(e,t,n){var i=arguments.length===1?gg(this._isDirected,arguments[0]):Rh(this._isDirected,e,t,n),r=this._edgeObjs[i];return r&&(e=r.v,t=r.w,delete this._edgeLabels[i],delete this._edgeObjs[i],ym(this._preds[t],e),ym(this._sucs[e],t),delete this._in[t][i],delete this._out[e][i],this._edgeCount--),this},ls.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var i=Ar.values(n);return t?Ar.filter(i,function(r){return r.v===t}):i}},ls.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var i=Ar.values(n);return t?Ar.filter(i,function(r){return r.w===t}):i}},ls.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var wm={Graph:fg,version:"2.1.8"},Yp={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Qp(e),edges:Jp(e)};return Ar.isUndefined(e.graph())||(t.value=Ar.clone(e.graph())),t},read:function(e){var t=new fg(e.options).setGraph(e.value);return Ar.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),Ar.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Qp(e){return Ar.map(e.nodes(),function(t){var n=e.node(t),i=e.parent(t),r={v:t};return Ar.isUndefined(n)||(r.value=n),Ar.isUndefined(i)||(r.parent=i),r})}function Jp(e){return Ar.map(e.edges(),function(t){var n=e.edge(t),i={v:t.v,w:t.w};return Ar.isUndefined(t.name)||(i.name=t.name),Ar.isUndefined(n)||(i.value=n),i})}var qp=function(e){var t,n={},i=[];function r(l){Ar.has(n,l)||(n[l]=!0,t.push(l),Ar.each(e.successors(l),r),Ar.each(e.predecessors(l),r))}return Ar.each(e.nodes(),function(l){t=[],r(l),t.length&&i.push(t)}),i},Sm=lc;function lc(){this._arr=[],this._keyIndices={}}lc.prototype.size=function(){return this._arr.length},lc.prototype.keys=function(){return this._arr.map(function(e){return e.key})},lc.prototype.has=function(e){return Ar.has(this._keyIndices,e)},lc.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},lc.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},lc.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!Ar.has(n,e)){var i=this._arr,r=i.length;return n[e]=r,i.push({key:e,priority:t}),this._decrease(r),!0}return!1},lc.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},lc.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},lc.prototype._heapify=function(e){var t=this._arr,n=2*e,i=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,i<t.length&&(r=t[i].priority<t[r].priority?i:r),r!==e&&(this._swap(e,r),this._heapify(r)))},lc.prototype._decrease=function(e){for(var t,n=this._arr,i=n[e].priority;e!==0&&!(n[t=e>>1].priority<i);)this._swap(e,t),e=t},lc.prototype._swap=function(e,t){var n=this._arr,i=this._keyIndices,r=n[e],l=n[t];n[e]=l,n[t]=r,i[l.key]=e,i[r.key]=t};var Em=function(e,t,n,i){return function(r,l,f,w){var R,H,Y={},fe=new Sm,Le=function(Me){var We=Me.v!==R?Me.v:Me.w,Ze=Y[We],He=f(Me),et=H.distance+He;if(He<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Me+" Weight: "+He);et<Ze.distance&&(Ze.distance=et,Ze.predecessor=R,fe.decrease(We,et))};for(r.nodes().forEach(function(Me){var We=Me===l?0:Number.POSITIVE_INFINITY;Y[Me]={distance:We},fe.add(Me,We)});fe.size()>0&&(R=fe.removeMin(),(H=Y[R]).distance!==Number.POSITIVE_INFINITY);)w(R).forEach(Le);return Y}(e,String(t),n||ev,i||function(r){return e.outEdges(r)})},ev=Ar.constant(1),tv=function(e,t,n){return Ar.transform(e.nodes(),function(i,r){i[r]=Em(e,r,t,n)},{})},Lm=function(e){var t=0,n=[],i={},r=[];function l(f){var w=i[f]={onStack:!0,lowlink:t,index:t++};if(n.push(f),e.successors(f).forEach(function(Y){Ar.has(i,Y)?i[Y].onStack&&(w.lowlink=Math.min(w.lowlink,i[Y].index)):(l(Y),w.lowlink=Math.min(w.lowlink,i[Y].lowlink))}),w.lowlink===w.index){var R,H=[];do R=n.pop(),i[R].onStack=!1,H.push(R);while(f!==R);r.push(H)}}return e.nodes().forEach(function(f){Ar.has(i,f)||l(f)}),r},nv=function(e){return Ar.filter(Lm(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},iv=function(e,t,n){return function(i,r,l){var f={},w=i.nodes();return w.forEach(function(R){f[R]={},f[R][R]={distance:0},w.forEach(function(H){R!==H&&(f[R][H]={distance:Number.POSITIVE_INFINITY})}),l(R).forEach(function(H){var Y=H.v===R?H.w:H.v,fe=r(H);f[R][Y]={distance:fe,predecessor:R}})}),w.forEach(function(R){var H=f[R];w.forEach(function(Y){var fe=f[Y];w.forEach(function(Le){var Me=fe[R],We=H[Le],Ze=fe[Le],He=Me.distance+We.distance;He<Ze.distance&&(Ze.distance=He,Ze.predecessor=We.predecessor)})})}),f}(e,t||rv,n||function(i){return e.outEdges(i)})},rv=Ar.constant(1),mg=Dm;function Dm(e){var t={},n={},i=[];if(Ar.each(e.sinks(),function r(l){if(Ar.has(n,l))throw new Ef;Ar.has(t,l)||(n[l]=!0,t[l]=!0,Ar.each(e.predecessors(l),r),delete n[l],i.push(l))}),Ar.size(t)!==e.nodeCount())throw new Ef;return i}function Ef(){}Dm.CycleException=Ef,Ef.prototype=new Error;var Lf=function(e,t,n){Ar.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],l={};return Ar.each(t,function(f){if(!e.hasNode(f))throw new Error("Graph does not have node: "+f);Va(e,f,n==="post",l,i,r)}),r};function Va(e,t,n,i,r,l){Ar.has(i,t)||(i[t]=!0,n||l.push(t),Ar.each(r(t),function(f){Va(e,f,n,i,r,l)}),n&&l.push(t))}var Df,ov={Graph:wm.Graph,json:Yp,alg:{components:qp,dijkstra:Em,dijkstraAll:tv,findCycles:nv,floydWarshall:iv,isAcyclic:function(e){try{mg(e)}catch(t){if(t instanceof mg.CycleException)return!1;throw t}return!0},postorder:function(e,t){return Lf(e,t,"post")},preorder:function(e,t){return Lf(e,t,"pre")},prim:function(e,t){var n,i=new fg,r={},l=new Sm;function f(R){var H=R.v===n?R.w:R.v,Y=l.priority(H);if(Y!==void 0){var fe=t(R);fe<Y&&(r[H]=n,l.decrease(H,fe))}}if(e.nodeCount()===0)return i;Ar.each(e.nodes(),function(R){l.add(R,Number.POSITIVE_INFINITY),i.setNode(R)}),l.decrease(e.nodes()[0],0);for(var w=!1;l.size()>0;){if(n=l.removeMin(),Ar.has(r,n))i.setEdge(n,r[n]);else{if(w)throw new Error("Input graph is not connected: "+e);w=!0}e.nodeEdges(n).forEach(f)}return i},tarjan:Lm,topsort:mg},version:wm.version};try{Df=ov}catch(e){}Df||(Df=window.graphlib);var Nc=Df,sv=function(e){return oa(e,5)},Ph=function(e,t,n){if(!ua(n))return!1;var i=typeof t;return!!(i=="number"?ol(n)&&xc(t,n.length):i=="string"&&t in n)&&Xa(n[t],e)},xm=Object.prototype,av=xm.hasOwnProperty,lv=yf(function(e,t){e=Object(e);var n=-1,i=t.length,r=i>2?t[2]:void 0;for(r&&Ph(t[0],t[1],r)&&(i=1);++n<i;)for(var l=t[n],f=sl(l),w=-1,R=f.length;++w<R;){var H=f[w],Y=e[H];(Y===void 0||Xa(Y,xm[H])&&!av.call(e,H))&&(e[H]=l[H])}return e}),cv=function(e){return function(t,n,i){var r=Object(t);if(!ol(t)){var l=$c(n);t=ac(t),n=function(w){return l(r[w],w,r)}}var f=e(t,n,i);return f>-1?r[l?t[f]:f]:void 0}},uv=/^\s+|\s+$/g,dv=/^[-+]0x[0-9a-f]+$/i,hv=/^0b[01]+$/i,fv=/^0o[0-7]+$/i,gv=parseInt,P=function(e){if(typeof e=="number")return e;if(pi(e))return NaN;if(ua(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ua(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(uv,"");var n=hv.test(e);return n||fv.test(e)?gv(e.slice(2),n?2:8):dv.test(e)?NaN:+e},s=function(e){return e?(e=P(e))===Infinity||e===-Infinity?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},u=function(e){var t=s(e),n=t%1;return t==t?n?t-n:t:0},y=Math.max,$=cv(function(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var r=n==null?0:u(n);return r<0&&(r=y(i+r,0)),pm(e,$c(t),r)}),he=function(e){return(e==null?0:e.length)?ug(e,1):[]},_e=function(e,t){return e==null?e:zs(e,Zr(t),sl)},Ie=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},st=function(e,t){var n={};return t=$c(t),_o(e,function(i,r,l){Bl(n,r,t(i,r,l))}),n},yt=function(e,t,n){for(var i=-1,r=e.length;++i<r;){var l=e[i],f=t(l);if(f!=null&&(w===void 0?f==f&&!pi(f):n(f,w)))var w=f,R=l}return R},wt=function(e,t){return e>t},Xt=function(e){return e&&e.length?yt(e,Xo,wt):void 0},Rn=function(e,t,n){(n!==void 0&&!Xa(e[t],n)||n===void 0&&!(t in e))&&Bl(e,t,n)},ui=Function.prototype,Ai=Object.prototype,Gi=ui.toString,Cr=Ai.hasOwnProperty,Gr=Gi.call(Object),io=function(e){if(!Wl(e)||Ya(e)!="[object Object]")return!1;var t=di(e);if(t===null)return!0;var n=Cr.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Gi.call(n)==Gr},Ir=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},Rr=function(e){return Ed(e,sl(e))},rs=function(e,t,n,i,r,l,f){var w=Ir(e,n),R=Ir(t,n),H=f.get(R);if(H)Rn(e,n,H);else{var Y=l?l(w,R,n+"",e,t,f):void 0,fe=Y===void 0;if(fe){var Le=Ms(R),Me=!Le&&Yo(R),We=!Le&&!Me&&Ha(R);Y=R,Le||Me||We?Ms(w)?Y=w:wf(w)?Y=gf(w):Me?(fe=!1,Y=ff(R,!0)):We?(fe=!1,Y=br(R,!0)):Y=[]:io(R)||Gu(R)?(Y=w,Gu(w)?Y=Rr(w):ua(w)&&!Wu(w)||(Y=Qo(R))):fe=!1}fe&&(f.set(R,Y),r(Y,R,i,l,f),f.delete(R)),Rn(e,n,Y)}},Ho=function e(t,n,i,r,l){t!==n&&zs(n,function(f,w){if(l||(l=new Fl),ua(f))rs(t,n,w,i,e,r,l);else{var R=r?r(Ir(t,w),f,w+"",t,n,l):void 0;R===void 0&&(R=f),Rn(t,w,R)}},sl)},Ur=function(e){return yf(function(t,n){var i=-1,r=n.length,l=r>1?n[r-1]:void 0,f=r>2?n[2]:void 0;for(l=e.length>3&&typeof l=="function"?(r--,l):void 0,f&&Ph(n[0],n[1],f)&&(l=r<3?void 0:l,r=1),t=Object(t);++i<r;){var w=n[i];w&&e(t,w,i,l)}return t})}(function(e,t,n){Ho(e,t,n)}),wr=function(e,t){return e<t},ro=function(e){return e&&e.length?yt(e,Xo,wr):void 0},zr=function(e,t){return e&&e.length?yt(e,$c(t),wr):void 0},Ko=function(){return ya.Date.now()},Ds=function(e,t,n,i){if(!ua(e))return e;for(var r=-1,l=(t=pu(t,e)).length,f=l-1,w=e;w!=null&&++r<l;){var R=$r(t[r]),H=n;if(R==="__proto__"||R==="constructor"||R==="prototype")return e;if(r!=f){var Y=w[R];(H=i?i(Y,R,w):void 0)===void 0&&(H=ua(Y)?Y:xc(t[r+1])?[]:{})}Sd(w,R,H),w=w[R]}return e},oo=function(e,t,n){for(var i=-1,r=t.length,l={};++i<r;){var f=t[i],w=Jd(e,f);n(w,f)&&Ds(l,pu(f,e),w)}return l},Zs=function(e,t){return oo(e,t,function(n,i){return qg(e,i)})},Ja=function(e){return mm(hg(e,void 0,he),e+"")}(function(e,t){return e==null?{}:Zs(e,t)}),Hs=Math.ceil,ll=Math.max,zl=function(e,t,n,i){for(var r=-1,l=ll(Hs((t-e)/(n||1)),0),f=Array(l);l--;)f[i?l:++r]=e,e+=n;return f},cc=function(e){return function(t,n,i){return i&&typeof i!="number"&&Ph(t,n,i)&&(n=i=void 0),t=s(t),n===void 0?(n=t,t=0):n=s(n),i=i===void 0?t<n?1:-1:s(i),zl(t,n,i,e)}}(),Tc=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},El=function(e,t){if(e!==t){var n=e!==void 0,i=e===null,r=e==e,l=pi(e),f=t!==void 0,w=t===null,R=t==t,H=pi(t);if(!w&&!H&&!l&&e>t||l&&f&&R&&!w&&!H||i&&f&&R||!n&&R||!r)return 1;if(!i&&!l&&!H&&e<t||H&&n&&r&&!i&&!l||w&&n&&r||!f&&r||!R)return-1}return 0},xf=function(e,t,n){for(var i=-1,r=e.criteria,l=t.criteria,f=r.length,w=n.length;++i<f;){var R=El(r[i],l[i]);if(R)return i>=w?R:R*(n[i]=="desc"?-1:1)}return e.index-t.index},Im=function(e,t,n){t=t.length?Ea(t,function(l){return Ms(l)?function(f){return Jd(f,l.length===1?l[0]:l)}:l}):[Xo];var i=-1;t=Ea(t,Ic($c));var r=rm(e,function(l,f,w){return{criteria:Ea(t,function(R){return R(l)}),index:++i,value:l}});return Tc(r,function(l,f){return xf(l,f,n)})},If=yf(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Ph(e,t[0],t[1])?t=[]:n>2&&Ph(t[0],t[1],t[2])&&(t=[t[0]]),Im(e,ug(t,1),[])}),mv=0,pv=function(e){var t=++mv;return Sl(e)+t},MS=function(e,t,n){for(var i=-1,r=e.length,l=t.length,f={};++i<r;){var w=i<l?t[i]:void 0;n(f,e[i],w)}return f},Nm,AS=function(e,t){return MS(e||[],t||[],Sd)};try{Nm={cloneDeep:sv,constant:fa,defaults:lv,each:Jo,filter:tm,find:$,flatten:he,forEach:Co,forIn:_e,has:nm,isUndefined:im,last:Ie,map:om,mapValues:st,max:Xt,merge:Ur,min:ro,minBy:zr,now:Ko,pick:Ja,range:cc,reduce:sm,sortBy:If,uniqueId:pv,values:Cm,zipObject:AS}}catch(e){}Nm||(Nm=window._);var Nn=Nm,RS=Tm;function Tm(){var e={};e._next=e._prev=e,this._sentinel=e}function D0(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function PS(e,t){if(e!=="_next"&&e!=="_prev")return t}Tm.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return D0(t),t},Tm.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&D0(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},Tm.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,PS)),n=n._prev;return"["+e.join(", ")+"]"};var OS=Nc.Graph,kS=function(e,t){if(e.nodeCount()<=1)return[];var n=function(r,l){var f=new OS,w=0,R=0;Nn.forEach(r.nodes(),function(fe){f.setNode(fe,{v:fe,in:0,out:0})}),Nn.forEach(r.edges(),function(fe){var Le=f.edge(fe.v,fe.w)||0,Me=l(fe),We=Le+Me;f.setEdge(fe.v,fe.w,We),R=Math.max(R,f.node(fe.v).out+=Me),w=Math.max(w,f.node(fe.w).in+=Me)});var H=Nn.range(R+w+3).map(function(){return new RS}),Y=w+1;return Nn.forEach(f.nodes(),function(fe){_v(H,Y,f.node(fe))}),{graph:f,buckets:H,zeroIdx:Y}}(e,t||FS),i=function(r,l,f){for(var w,R=[],H=l[l.length-1],Y=l[0];r.nodeCount();){for(;w=Y.dequeue();)vv(r,l,f,w);for(;w=H.dequeue();)vv(r,l,f,w);if(r.nodeCount()){for(var fe=l.length-2;fe>0;--fe)if(w=l[fe].dequeue()){R=R.concat(vv(r,l,f,w,!0));break}}}return R}(n.graph,n.buckets,n.zeroIdx);return Nn.flatten(Nn.map(i,function(r){return e.outEdges(r.v,r.w)}),!0)},FS=Nn.constant(1);function vv(e,t,n,i,r){var l=r?[]:void 0;return Nn.forEach(e.inEdges(i.v),function(f){var w=e.edge(f),R=e.node(f.v);r&&l.push({v:f.v,w:f.w}),R.out-=w,_v(t,n,R)}),Nn.forEach(e.outEdges(i.v),function(f){var w=e.edge(f),R=f.w,H=e.node(R);H.in-=w,_v(t,n,H)}),e.removeNode(i.v),l}function _v(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var x0={run:function(e){var t=e.graph().acyclicer==="greedy"?kS(e,function(n){return function(i){return n.edge(i).weight}}(e)):function(n){var i=[],r={},l={};function f(w){Nn.has(l,w)||(l[w]=!0,r[w]=!0,Nn.forEach(n.outEdges(w),function(R){Nn.has(r,R.w)?i.push(R):f(R.w)}),delete r[w])}return Nn.forEach(n.nodes(),f),i}(e);Nn.forEach(t,function(n){var i=e.edge(n);e.removeEdge(n),i.forwardName=n.name,i.reversed=!0,e.setEdge(n.w,n.v,i,Nn.uniqueId("rev"))})},undo:function(e){Nn.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var i=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,i)}})}},I0=Nc.Graph,qa={addDummyNode:N0,simplify:function(e){var t=new I0().setGraph(e.graph());return Nn.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),Nn.forEach(e.edges(),function(n){var i=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:i.weight+r.weight,minlen:Math.max(i.minlen,r.minlen)})}),t},asNonCompoundGraph:function(e){var t=new I0({multigraph:e.isMultigraph()}).setGraph(e.graph());return Nn.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),Nn.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t},successorWeights:function(e){var t=Nn.map(e.nodes(),function(n){var i={};return Nn.forEach(e.outEdges(n),function(r){i[r.w]=(i[r.w]||0)+e.edge(r).weight}),i});return Nn.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=Nn.map(e.nodes(),function(n){var i={};return Nn.forEach(e.inEdges(n),function(r){i[r.v]=(i[r.v]||0)+e.edge(r).weight}),i});return Nn.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,i,r=e.x,l=e.y,f=t.x-r,w=t.y-l,R=e.width/2,H=e.height/2;if(!f&&!w)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(w)*R>Math.abs(f)*H?(w<0&&(H=-H),n=H*f/w,i=H):(f<0&&(R=-R),n=R,i=R*w/f),{x:r+n,y:l+i}},buildLayerMatrix:function(e){var t=Nn.map(Nn.range(T0(e)+1),function(){return[]});return Nn.forEach(e.nodes(),function(n){var i=e.node(n),r=i.rank;Nn.isUndefined(r)||(t[r][i.order]=n)}),t},normalizeRanks:function(e){var t=Nn.min(Nn.map(e.nodes(),function(n){return e.node(n).rank}));Nn.forEach(e.nodes(),function(n){var i=e.node(n);Nn.has(i,"rank")&&(i.rank-=t)})},removeEmptyRanks:function(e){var t=Nn.min(Nn.map(e.nodes(),function(l){return e.node(l).rank})),n=[];Nn.forEach(e.nodes(),function(l){var f=e.node(l).rank-t;n[f]||(n[f]=[]),n[f].push(l)});var i=0,r=e.graph().nodeRankFactor;Nn.forEach(n,function(l,f){Nn.isUndefined(l)&&f%r!=0?--i:i&&Nn.forEach(l,function(w){e.node(w).rank+=i})})},addBorderNode:function(e,t,n,i){var r={width:0,height:0};return arguments.length>=4&&(r.rank=n,r.order=i),N0(e,"border",r,t)},maxRank:T0,partition:function(e,t){var n={lhs:[],rhs:[]};return Nn.forEach(e,function(i){t(i)?n.lhs.push(i):n.rhs.push(i)}),n},time:function(e,t){var n=Nn.now();try{return t()}finally{console.log(e+" time: "+(Nn.now()-n)+"ms")}},notime:function(e,t){return t()}};function N0(e,t,n,i){var r;do r=Nn.uniqueId(i);while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}function T0(e){return Nn.max(Nn.map(e.nodes(),function(t){var n=e.node(t).rank;if(!Nn.isUndefined(n))return n}))}var M0={run:function(e){e.graph().dummyChains=[],Nn.forEach(e.edges(),function(t){(function(n,i){var r,l,f,w=i.v,R=n.node(w).rank,H=i.w,Y=n.node(H).rank,fe=i.name,Le=n.edge(i),Me=Le.labelRank;if(Y!==R+1){for(n.removeEdge(i),f=0,++R;R<Y;++f,++R)Le.points=[],l={width:0,height:0,edgeLabel:Le,edgeObj:i,rank:R},r=qa.addDummyNode(n,"edge",l,"_d"),R===Me&&(l.width=Le.width,l.height=Le.height,l.dummy="edge-label",l.labelpos=Le.labelpos),n.setEdge(w,r,{weight:Le.weight},fe),f===0&&n.graph().dummyChains.push(r),w=r;n.setEdge(w,H,{weight:Le.weight},fe)}})(e,t)})},undo:function(e){Nn.forEach(e.graph().dummyChains,function(t){var n,i=e.node(t),r=i.edgeLabel;for(e.setEdge(i.edgeObj,r);i.dummy;)n=e.successors(t)[0],e.removeNode(t),r.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height),t=n,i=e.node(t)})}},A0=function(e){var t={};Nn.forEach(e.sources(),function n(i){var r=e.node(i);if(Nn.has(t,i))return r.rank;t[i]=!0;var l=Nn.min(Nn.map(e.outEdges(i),function(f){return n(f.w)-e.edge(f).minlen}));return l!==Number.POSITIVE_INFINITY&&l!=null||(l=0),r.rank=l})},R0=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen},BS=Nc.Graph,Mm=R0,P0=function(e){var t,n,i=new BS({directed:!1}),r=e.nodes()[0],l=e.nodeCount();for(i.setNode(r,{});WS(i,e)<l;)t=VS(i,e),n=i.hasNode(t.v)?Mm(e,t):-Mm(e,t),US(i,e,n);return i};function WS(e,t){return Nn.forEach(e.nodes(),function n(i){Nn.forEach(t.nodeEdges(i),function(r){var l=r.v,f=i===l?r.w:l;e.hasNode(f)||Mm(t,r)||(e.setNode(f,{}),e.setEdge(i,f,{}),n(f))})}),e.nodeCount()}function VS(e,t){return Nn.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return Mm(t,n)})}function US(e,t,n){Nn.forEach(e.nodes(),function(i){t.node(i).rank+=n})}var zS=R0,HS=A0,GS=Nc.alg.preorder,jS=Nc.alg.postorder,KS=qa.simplify,$S=Oh;function Oh(e){e=KS(e),HS(e);var t,n=P0(e);for(bv(n),Cv(n,e);t=F0(n);)W0(n,e,t,B0(n,e,t))}function Cv(e,t){var n=jS(e,e.nodes());n=n.slice(0,n.length-1),Nn.forEach(n,function(i){(function(r,l,f){var w=r.node(f).parent;r.edge(f,w).cutvalue=O0(r,l,f)})(e,t,i)})}function O0(e,t,n){var i=e.node(n).parent,r=!0,l=t.edge(n,i),f=0;return l||(r=!1,l=t.edge(i,n)),f=l.weight,Nn.forEach(t.nodeEdges(n),function(w){var R,H,Y=w.v===n,fe=Y?w.w:w.v;if(fe!==i){var Le=Y===r,Me=t.edge(w).weight;if(f+=Le?Me:-Me,R=n,H=fe,e.hasEdge(R,H)){var We=e.edge(n,fe).cutvalue;f+=Le?-We:We}}}),f}function bv(e,t){arguments.length<2&&(t=e.nodes()[0]),k0(e,{},1,t)}function k0(e,t,n,i,r){var l=n,f=e.node(i);return t[i]=!0,Nn.forEach(e.neighbors(i),function(w){Nn.has(t,w)||(n=k0(e,t,n,w,i))}),f.low=l,f.lim=n++,r?f.parent=r:delete f.parent,n}function F0(e){return Nn.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function B0(e,t,n){var i=n.v,r=n.w;t.hasEdge(i,r)||(i=n.w,r=n.v);var l=e.node(i),f=e.node(r),w=l,R=!1;l.lim>f.lim&&(w=f,R=!0);var H=Nn.filter(t.edges(),function(Y){return R===V0(e,e.node(Y.v),w)&&R!==V0(e,e.node(Y.w),w)});return Nn.minBy(H,function(Y){return zS(t,Y)})}function W0(e,t,n,i){var r=n.v,l=n.w;e.removeEdge(r,l),e.setEdge(i.v,i.w,{}),bv(e),Cv(e,t),function(f,w){var R=Nn.find(f.nodes(),function(Y){return!w.node(Y).parent}),H=GS(f,R);H=H.slice(1),Nn.forEach(H,function(Y){var fe=f.node(Y).parent,Le=w.edge(Y,fe),Me=!1;Le||(Le=w.edge(fe,Y),Me=!0),w.node(Y).rank=w.node(fe).rank+(Me?Le.minlen:-Le.minlen)})}(e,t)}function V0(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}Oh.initLowLimValues=bv,Oh.initCutValues=Cv,Oh.calcCutValue=O0,Oh.leaveEdge=F0,Oh.enterEdge=B0,Oh.exchangeEdges=W0;var U0=A0,ZS=function(e){switch(e.graph().ranker){case"network-simplex":z0(e);break;case"tight-tree":(function(t){U0(t),P0(t)})(e);break;case"longest-path":XS(e);break;default:z0(e)}},XS=U0;function z0(e){$S(e)}var YS=function(e){var t=function(n){var i={},r=0;function l(f){var w=r;Nn.forEach(n.children(f),l),i[f]={low:w,lim:r++}}return Nn.forEach(n.children(),l),i}(e);Nn.forEach(e.graph().dummyChains,function(n){for(var i=e.node(n),r=i.edgeObj,l=function(fe,Le,Me,We){var Ze,He,et=[],it=[],ut=Math.min(Le[Me].low,Le[We].low),Mt=Math.max(Le[Me].lim,Le[We].lim);Ze=Me;do Ze=fe.parent(Ze),et.push(Ze);while(Ze&&(Le[Ze].low>ut||Mt>Le[Ze].lim));for(He=Ze,Ze=We;(Ze=fe.parent(Ze))!==He;)it.push(Ze);return{path:et.concat(it.reverse()),lca:He}}(e,t,r.v,r.w),f=l.path,w=l.lca,R=0,H=f[R],Y=!0;n!==r.w;){if(i=e.node(n),Y){for(;(H=f[R])!==w&&e.node(H).maxRank<i.rank;)R++;H===w&&(Y=!1)}if(!Y){for(;R<f.length-1&&e.node(H=f[R+1]).minRank<=i.rank;)R++;H=f[R]}e.setParent(n,H),n=e.successors(n)[0]}})},H0={run:function(e){var t=qa.addDummyNode(e,"root",{},"_root"),n=function(f){var w={};function R(H,Y){var fe=f.children(H);fe&&fe.length&&Nn.forEach(fe,function(Le){R(Le,Y+1)}),w[H]=Y}return Nn.forEach(f.children(),function(H){R(H,1)}),w}(e),i=Nn.max(Nn.values(n))-1,r=2*i+1;e.graph().nestingRoot=t,Nn.forEach(e.edges(),function(f){e.edge(f).minlen*=r});var l=function(f){return Nn.reduce(f.edges(),function(w,R){return w+f.edge(R).weight},0)}(e)+1;Nn.forEach(e.children(),function(f){G0(e,t,r,l,i,n,f)}),e.graph().nodeRankFactor=r},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Nn.forEach(e.edges(),function(n){e.edge(n).nestingEdge&&e.removeEdge(n)})}};function G0(e,t,n,i,r,l,f){var w=e.children(f);if(w.length){var R=qa.addBorderNode(e,"_bt"),H=qa.addBorderNode(e,"_bb"),Y=e.node(f);e.setParent(R,f),Y.borderTop=R,e.setParent(H,f),Y.borderBottom=H,Nn.forEach(w,function(fe){G0(e,t,n,i,r,l,fe);var Le=e.node(fe),Me=Le.borderTop?Le.borderTop:fe,We=Le.borderBottom?Le.borderBottom:fe,Ze=Le.borderTop?i:2*i,He=Me!==We?1:r-l[f]+1;e.setEdge(R,Me,{weight:Ze,minlen:He,nestingEdge:!0}),e.setEdge(We,H,{weight:Ze,minlen:He,nestingEdge:!0})}),e.parent(f)||e.setEdge(t,R,{weight:0,minlen:r+l[f]})}else f!==t&&e.setEdge(t,f,{weight:0,minlen:n})}var QS=function(e){Nn.forEach(e.children(),function t(n){var i=e.children(n),r=e.node(n);if(i.length&&Nn.forEach(i,t),Nn.has(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(var l=r.minRank,f=r.maxRank+1;l<f;++l)j0(e,"borderLeft","_bl",n,r,l),j0(e,"borderRight","_br",n,r,l)}})};function j0(e,t,n,i,r,l){var f={width:0,height:0,rank:l,borderType:t},w=r[t][l-1],R=qa.addDummyNode(e,"border",f,n);r[t][l]=R,e.setParent(R,i),w&&e.setEdge(w,R,{weight:1})}var K0={adjust:function(e){var t=e.graph().rankdir.toLowerCase();t!=="lr"&&t!=="rl"||$0(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();t!=="bt"&&t!=="rl"||function(n){Nn.forEach(n.nodes(),function(i){yv(n.node(i))}),Nn.forEach(n.edges(),function(i){var r=n.edge(i);Nn.forEach(r.points,yv),Nn.has(r,"y")&&yv(r)})}(e),t!=="lr"&&t!=="rl"||(function(n){Nn.forEach(n.nodes(),function(i){wv(n.node(i))}),Nn.forEach(n.edges(),function(i){var r=n.edge(i);Nn.forEach(r.points,wv),Nn.has(r,"x")&&wv(r)})}(e),$0(e))}};function $0(e){Nn.forEach(e.nodes(),function(t){Z0(e.node(t))}),Nn.forEach(e.edges(),function(t){Z0(e.edge(t))})}function Z0(e){var t=e.width;e.width=e.height,e.height=t}function yv(e){e.y=-e.y}function wv(e){var t=e.x;e.x=e.y,e.y=t}var JS=function(e){var t={},n=Nn.filter(e.nodes(),function(w){return!e.children(w).length}),i=Nn.max(Nn.map(n,function(w){return e.node(w).rank})),r=Nn.map(Nn.range(i+1),function(){return[]});function l(w){if(!Nn.has(t,w)){t[w]=!0;var R=e.node(w);r[R.rank].push(w),Nn.forEach(e.successors(w),l)}}var f=Nn.sortBy(n,function(w){return e.node(w).rank});return Nn.forEach(f,l),r},qS=function(e,t){for(var n=0,i=1;i<t.length;++i)n+=eE(e,t[i-1],t[i]);return n};function eE(e,t,n){for(var i=Nn.zipObject(n,Nn.map(n,function(H,Y){return Y})),r=Nn.flatten(Nn.map(t,function(H){return Nn.sortBy(Nn.map(e.outEdges(H),function(Y){return{pos:i[Y.w],weight:e.edge(Y).weight}}),"pos")}),!0),l=1;l<n.length;)l<<=1;var f=2*l-1;l-=1;var w=Nn.map(new Array(f),function(){return 0}),R=0;return Nn.forEach(r.forEach(function(H){var Y=H.pos+l;w[Y]+=H.weight;for(var fe=0;Y>0;)Y%2&&(fe+=w[Y+1]),w[Y=Y-1>>1]+=H.weight;R+=H.weight*fe})),R}var tE=function(e,t){return Nn.map(t,function(n){var i=e.inEdges(n);if(i.length){var r=Nn.reduce(i,function(l,f){var w=e.edge(f),R=e.node(f.v);return{sum:l.sum+w.weight*R.order,weight:l.weight+w.weight}},{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}return{v:n}})},nE=function(e,t){var n={};return Nn.forEach(e,function(i,r){var l=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:r};Nn.isUndefined(i.barycenter)||(l.barycenter=i.barycenter,l.weight=i.weight)}),Nn.forEach(t.edges(),function(i){var r=n[i.v],l=n[i.w];Nn.isUndefined(r)||Nn.isUndefined(l)||(l.indegree++,r.out.push(n[i.w]))}),function(i){var r=[];function l(R){return function(H){H.merged||(Nn.isUndefined(H.barycenter)||Nn.isUndefined(R.barycenter)||H.barycenter>=R.barycenter)&&function(Y,fe){var Le=0,Me=0;Y.weight&&(Le+=Y.barycenter*Y.weight,Me+=Y.weight),fe.weight&&(Le+=fe.barycenter*fe.weight,Me+=fe.weight),Y.vs=fe.vs.concat(Y.vs),Y.barycenter=Le/Me,Y.weight=Me,Y.i=Math.min(fe.i,Y.i),fe.merged=!0}(R,H)}}function f(R){return function(H){H.in.push(R),--H.indegree==0&&i.push(H)}}for(;i.length;){var w=i.pop();r.push(w),Nn.forEach(w.in.reverse(),l(w)),Nn.forEach(w.out,f(w))}return Nn.map(Nn.filter(r,function(R){return!R.merged}),function(R){return Nn.pick(R,["vs","i","barycenter","weight"])})}(Nn.filter(n,function(i){return!i.indegree}))},iE=function(e,t){var n=qa.partition(e,function(fe){return Nn.has(fe,"barycenter")}),i=n.lhs,r=Nn.sortBy(n.rhs,function(fe){return-fe.i}),l=[],f=0,w=0,R=0;i.sort((H=!!t,function(fe,Le){return fe.barycenter<Le.barycenter?-1:fe.barycenter>Le.barycenter?1:H?Le.i-fe.i:fe.i-Le.i})),R=X0(l,r,R),Nn.forEach(i,function(fe){R+=fe.vs.length,l.push(fe.vs),f+=fe.barycenter*fe.weight,w+=fe.weight,R=X0(l,r,R)});var H,Y={vs:Nn.flatten(l,!0)};return w&&(Y.barycenter=f/w,Y.weight=w),Y};function X0(e,t,n){for(var i;t.length&&(i=Nn.last(t)).i<=n;)t.pop(),e.push(i.vs),n++;return n}var rE=function e(t,n,i,r){var l=t.children(n),f=t.node(n),w=f?f.borderLeft:void 0,R=f?f.borderRight:void 0,H={};w&&(l=Nn.filter(l,function(Ze){return Ze!==w&&Ze!==R}));var Y=tE(t,l);Nn.forEach(Y,function(Ze){if(t.children(Ze.v).length){var He=e(t,Ze.v,i,r);H[Ze.v]=He,Nn.has(He,"barycenter")&&(et=Ze,it=He,Nn.isUndefined(et.barycenter)?(et.barycenter=it.barycenter,et.weight=it.weight):(et.barycenter=(et.barycenter*et.weight+it.barycenter*it.weight)/(et.weight+it.weight),et.weight+=it.weight))}var et,it});var fe=nE(Y,i);(function(Ze,He){Nn.forEach(Ze,function(et){et.vs=Nn.flatten(et.vs.map(function(it){return He[it]?He[it].vs:it}),!0)})})(fe,H);var Le=iE(fe,r);if(w&&(Le.vs=Nn.flatten([w,Le.vs,R],!0),t.predecessors(w).length)){var Me=t.node(t.predecessors(w)[0]),We=t.node(t.predecessors(R)[0]);Nn.has(Le,"barycenter")||(Le.barycenter=0,Le.weight=0),Le.barycenter=(Le.barycenter*Le.weight+Me.order+We.order)/(Le.weight+2),Le.weight+=2}return Le},oE=Nc.Graph,sE=function(e,t,n){var i=function(l){for(var f;l.hasNode(f=Nn.uniqueId("_root")););return f}(e),r=new oE({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(l){return e.node(l)});return Nn.forEach(e.nodes(),function(l){var f=e.node(l),w=e.parent(l);(f.rank===t||f.minRank<=t&&t<=f.maxRank)&&(r.setNode(l),r.setParent(l,w||i),Nn.forEach(e[n](l),function(R){var H=R.v===l?R.w:R.v,Y=r.edge(H,l),fe=Nn.isUndefined(Y)?0:Y.weight;r.setEdge(H,l,{weight:e.edge(R).weight+fe})}),Nn.has(f,"minRank")&&r.setNode(l,{borderLeft:f.borderLeft[t],borderRight:f.borderRight[t]}))}),r},aE=function(e,t,n){var i,r={};Nn.forEach(n,function(l){for(var f,w,R=e.parent(l);R;){if((f=e.parent(R))?(w=r[f],r[f]=R):(w=i,i=R),w&&w!==R)return void t.setEdge(w,R);R=f}})},lE=Nc.Graph,cE=function(e){var t=qa.maxRank(e),n=Y0(e,Nn.range(1,t+1),"inEdges"),i=Y0(e,Nn.range(t-1,-1,-1),"outEdges"),r=JS(e);Q0(e,r);for(var l,f=Number.POSITIVE_INFINITY,w=0,R=0;R<4;++w,++R){uE(w%2?n:i,w%4>=2),r=qa.buildLayerMatrix(e);var H=qS(e,r);H<f&&(R=0,l=Nn.cloneDeep(r),f=H)}Q0(e,l)};function Y0(e,t,n){return Nn.map(t,function(i){return sE(e,i,n)})}function uE(e,t){var n=new lE;Nn.forEach(e,function(i){var r=i.graph().root,l=rE(i,r,n,t);Nn.forEach(l.vs,function(f,w){i.node(f).order=w}),aE(i,n,l.vs)})}function Q0(e,t){Nn.forEach(t,function(n){Nn.forEach(n,function(i,r){e.node(i).order=r})})}var dE=Nc.Graph,hE=function(e){var t,n=qa.buildLayerMatrix(e),i=Nn.merge(fE(e,n),gE(e,n)),r={};Nn.forEach(["u","d"],function(f){t=f==="u"?n:Nn.values(n).reverse(),Nn.forEach(["l","r"],function(w){w==="r"&&(t=Nn.map(t,function(fe){return Nn.values(fe).reverse()}));var R=(f==="u"?e.predecessors:e.successors).bind(e),H=pE(e,t,i,R),Y=vE(e,t,H.root,H.align,w==="r");w==="r"&&(Y=Nn.mapValues(Y,function(fe){return-fe})),r[f+w]=Y})});var l=_E(e,r);return CE(r,l),bE(r,e.graph().align)};function fE(e,t){var n={};return Nn.reduce(t,function(i,r){var l=0,f=0,w=i.length,R=Nn.last(r);return Nn.forEach(r,function(H,Y){var fe=function(Me,We){if(Me.node(We).dummy)return Nn.find(Me.predecessors(We),function(Ze){return Me.node(Ze).dummy})}(e,H),Le=fe?e.node(fe).order:w;(fe||H===R)&&(Nn.forEach(r.slice(f,Y+1),function(Me){Nn.forEach(e.predecessors(Me),function(We){var Ze=e.node(We),He=Ze.order;!(He<l||Le<He)||Ze.dummy&&e.node(Me).dummy||J0(n,We,Me)})}),f=Y+1,l=Le)}),r}),n}function gE(e,t){var n={};function i(r,l,f,w,R){var H;Nn.forEach(Nn.range(l,f),function(Y){H=r[Y],e.node(H).dummy&&Nn.forEach(e.predecessors(H),function(fe){var Le=e.node(fe);Le.dummy&&(Le.order<w||Le.order>R)&&J0(n,fe,H)})})}return Nn.reduce(t,function(r,l){var f,w=-1,R=0;return Nn.forEach(l,function(H,Y){if(e.node(H).dummy==="border"){var fe=e.predecessors(H);fe.length&&(f=e.node(fe[0]).order,i(l,R,Y,w,f),R=Y,w=f)}i(l,R,l.length,f,r.length)}),l}),n}function J0(e,t,n){if(t>n){var i=t;t=n,n=i}var r=e[t];r||(e[t]=r={}),r[n]=!0}function mE(e,t,n){if(t>n){var i=t;t=n,n=i}return Nn.has(e[t],n)}function pE(e,t,n,i){var r={},l={},f={};return Nn.forEach(t,function(w){Nn.forEach(w,function(R,H){r[R]=R,l[R]=R,f[R]=H})}),Nn.forEach(t,function(w){var R=-1;Nn.forEach(w,function(H){var Y=i(H);if(Y.length)for(var fe=((Y=Nn.sortBy(Y,function(Ze){return f[Ze]})).length-1)/2,Le=Math.floor(fe),Me=Math.ceil(fe);Le<=Me;++Le){var We=Y[Le];l[H]===H&&R<f[We]&&!mE(n,H,We)&&(l[We]=H,l[H]=r[H]=r[We],R=f[We])}})}),{root:r,align:l}}function vE(e,t,n,i,r){var l={},f=function(H,Y,fe,Le){var Me=new dE,We=H.graph(),Ze=function(He,et,it){return function(ut,Mt,Rt){var un,jn=ut.node(Mt),xn=ut.node(Rt),ei=0;if(ei+=jn.width/2,Nn.has(jn,"labelpos"))switch(jn.labelpos.toLowerCase()){case"l":un=-jn.width/2;break;case"r":un=jn.width/2}if(un&&(ei+=it?un:-un),un=0,ei+=(jn.dummy?et:He)/2,ei+=(xn.dummy?et:He)/2,ei+=xn.width/2,Nn.has(xn,"labelpos"))switch(xn.labelpos.toLowerCase()){case"l":un=xn.width/2;break;case"r":un=-xn.width/2}return un&&(ei+=it?un:-un),un=0,ei}}(We.nodesep,We.edgesep,Le);return Nn.forEach(Y,function(He){var et;Nn.forEach(He,function(it){var ut=fe[it];if(Me.setNode(ut),et){var Mt=fe[et],Rt=Me.edge(Mt,ut);Me.setEdge(Mt,ut,Math.max(Ze(H,it,et),Rt||0))}et=it})}),Me}(e,t,n,r),w=r?"borderLeft":"borderRight";function R(H,Y){for(var fe=f.nodes(),Le=fe.pop(),Me={};Le;)Me[Le]?H(Le):(Me[Le]=!0,fe.push(Le),fe=fe.concat(Y(Le))),Le=fe.pop()}return R(function(H){l[H]=f.inEdges(H).reduce(function(Y,fe){return Math.max(Y,l[fe.v]+f.edge(fe))},0)},f.predecessors.bind(f)),R(function(H){var Y=f.outEdges(H).reduce(function(Le,Me){return Math.min(Le,l[Me.w]-f.edge(Me))},Number.POSITIVE_INFINITY),fe=e.node(H);Y!==Number.POSITIVE_INFINITY&&fe.borderType!==w&&(l[H]=Math.max(l[H],Y))},f.successors.bind(f)),Nn.forEach(i,function(H){l[H]=l[n[H]]}),l}function _E(e,t){return Nn.minBy(Nn.values(t),function(n){var i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return Nn.forIn(n,function(l,f){var w=function(R,H){return R.node(H).width}(e,f)/2;i=Math.max(l+w,i),r=Math.min(l-w,r)}),i-r})}function CE(e,t){var n=Nn.values(t),i=Nn.min(n),r=Nn.max(n);Nn.forEach(["u","d"],function(l){Nn.forEach(["l","r"],function(f){var w,R=l+f,H=e[R];if(H!==t){var Y=Nn.values(H);(w=f==="l"?i-Nn.min(Y):r-Nn.max(Y))&&(e[R]=Nn.mapValues(H,function(fe){return fe+w}))}})})}function bE(e,t){return Nn.mapValues(e.ul,function(n,i){if(t)return e[t.toLowerCase()][i];var r=Nn.sortBy(Nn.map(e,i));return(r[1]+r[2])/2})}var yE=hE,wE=function(e){(function(t){var n=qa.buildLayerMatrix(t),i=t.graph().ranksep,r=0;Nn.forEach(n,function(l){var f=Nn.max(Nn.map(l,function(w){return t.node(w).height}));Nn.forEach(l,function(w){t.node(w).y=r+f/2}),r+=f+i})})(e=qa.asNonCompoundGraph(e)),Nn.forEach(yE(e),function(t,n){e.node(n).x=t})},SE=qa.normalizeRanks,EE=qa.removeEmptyRanks,qd=qa,LE=Nc.Graph,DE=function(e,t){var n=t&&t.debugTiming?qd.time:qd.notime;n("layout",function(){var i=n("  buildLayoutGraph",function(){return function(r){var l=new LE({multigraph:!0,compound:!0}),f=Ev(r.graph());return l.setGraph(Nn.merge({},IE,Sv(f,xE),Nn.pick(f,NE))),Nn.forEach(r.nodes(),function(w){var R=Ev(r.node(w));l.setNode(w,Nn.defaults(Sv(R,TE),ME)),l.setParent(w,r.parent(w))}),Nn.forEach(r.edges(),function(w){var R=Ev(r.edge(w));l.setEdge(w,Nn.merge({},RE,Sv(R,AE),Nn.pick(R,PE)))}),l}(e)});n("  runLayout",function(){(function(r,l){l("    makeSpaceForEdgeLabels",function(){(function(f){var w=f.graph();w.ranksep/=2,Nn.forEach(f.edges(),function(R){var H=f.edge(R);H.minlen*=2,H.labelpos.toLowerCase()!=="c"&&(w.rankdir==="TB"||w.rankdir==="BT"?H.width+=H.labeloffset:H.height+=H.labeloffset)})})(r)}),l("    removeSelfEdges",function(){(function(f){Nn.forEach(f.edges(),function(w){if(w.v===w.w){var R=f.node(w.v);R.selfEdges||(R.selfEdges=[]),R.selfEdges.push({e:w,label:f.edge(w)}),f.removeEdge(w)}})})(r)}),l("    acyclic",function(){x0.run(r)}),l("    nestingGraph.run",function(){H0.run(r)}),l("    rank",function(){ZS(qd.asNonCompoundGraph(r))}),l("    injectEdgeLabelProxies",function(){(function(f){Nn.forEach(f.edges(),function(w){var R=f.edge(w);if(R.width&&R.height){var H=f.node(w.v),Y={rank:(f.node(w.w).rank-H.rank)/2+H.rank,e:w};qd.addDummyNode(f,"edge-proxy",Y,"_ep")}})})(r)}),l("    removeEmptyRanks",function(){EE(r)}),l("    nestingGraph.cleanup",function(){H0.cleanup(r)}),l("    normalizeRanks",function(){SE(r)}),l("    assignRankMinMax",function(){(function(f){var w=0;Nn.forEach(f.nodes(),function(R){var H=f.node(R);H.borderTop&&(H.minRank=f.node(H.borderTop).rank,H.maxRank=f.node(H.borderBottom).rank,w=Nn.max(w,H.maxRank))}),f.graph().maxRank=w})(r)}),l("    removeEdgeLabelProxies",function(){(function(f){Nn.forEach(f.nodes(),function(w){var R=f.node(w);R.dummy==="edge-proxy"&&(f.edge(R.e).labelRank=R.rank,f.removeNode(w))})})(r)}),l("    normalize.run",function(){M0.run(r)}),l("    parentDummyChains",function(){YS(r)}),l("    addBorderSegments",function(){QS(r)}),l("    order",function(){cE(r)}),l("    insertSelfEdges",function(){(function(f){var w=qd.buildLayerMatrix(f);Nn.forEach(w,function(R){var H=0;Nn.forEach(R,function(Y,fe){var Le=f.node(Y);Le.order=fe+H,Nn.forEach(Le.selfEdges,function(Me){qd.addDummyNode(f,"selfedge",{width:Me.label.width,height:Me.label.height,rank:Le.rank,order:fe+ ++H,e:Me.e,label:Me.label},"_se")}),delete Le.selfEdges})})})(r)}),l("    adjustCoordinateSystem",function(){K0.adjust(r)}),l("    position",function(){wE(r)}),l("    positionSelfEdges",function(){(function(f){Nn.forEach(f.nodes(),function(w){var R=f.node(w);if(R.dummy==="selfedge"){var H=f.node(R.e.v),Y=H.x+H.width/2,fe=H.y,Le=R.x-Y,Me=H.height/2;f.setEdge(R.e,R.label),f.removeNode(w),R.label.points=[{x:Y+2*Le/3,y:fe-Me},{x:Y+5*Le/6,y:fe-Me},{x:Y+Le,y:fe},{x:Y+5*Le/6,y:fe+Me},{x:Y+2*Le/3,y:fe+Me}],R.label.x=R.x,R.label.y=R.y}})})(r)}),l("    removeBorderNodes",function(){(function(f){Nn.forEach(f.nodes(),function(w){if(f.children(w).length){var R=f.node(w),H=f.node(R.borderTop),Y=f.node(R.borderBottom),fe=f.node(Nn.last(R.borderLeft)),Le=f.node(Nn.last(R.borderRight));R.width=Math.abs(Le.x-fe.x),R.height=Math.abs(Y.y-H.y),R.x=fe.x+R.width/2,R.y=H.y+R.height/2}}),Nn.forEach(f.nodes(),function(w){f.node(w).dummy==="border"&&f.removeNode(w)})})(r)}),l("    normalize.undo",function(){M0.undo(r)}),l("    fixupEdgeLabelCoords",function(){(function(f){Nn.forEach(f.edges(),function(w){var R=f.edge(w);if(Nn.has(R,"x"))switch(R.labelpos!=="l"&&R.labelpos!=="r"||(R.width-=R.labeloffset),R.labelpos){case"l":R.x-=R.width/2+R.labeloffset;break;case"r":R.x+=R.width/2+R.labeloffset}})})(r)}),l("    undoCoordinateSystem",function(){K0.undo(r)}),l("    translateGraph",function(){(function(f){var w=Number.POSITIVE_INFINITY,R=0,H=Number.POSITIVE_INFINITY,Y=0,fe=f.graph(),Le=fe.marginx||0,Me=fe.marginy||0;function We(Ze){var He=Ze.x,et=Ze.y,it=Ze.width,ut=Ze.height;w=Math.min(w,He-it/2),R=Math.max(R,He+it/2),H=Math.min(H,et-ut/2),Y=Math.max(Y,et+ut/2)}Nn.forEach(f.nodes(),function(Ze){We(f.node(Ze))}),Nn.forEach(f.edges(),function(Ze){var He=f.edge(Ze);Nn.has(He,"x")&&We(He)}),w-=Le,H-=Me,Nn.forEach(f.nodes(),function(Ze){var He=f.node(Ze);He.x-=w,He.y-=H}),Nn.forEach(f.edges(),function(Ze){var He=f.edge(Ze);Nn.forEach(He.points,function(et){et.x-=w,et.y-=H}),Nn.has(He,"x")&&(He.x-=w),Nn.has(He,"y")&&(He.y-=H)}),fe.width=R-w+Le,fe.height=Y-H+Me})(r)}),l("    assignNodeIntersects",function(){(function(f){Nn.forEach(f.edges(),function(w){var R,H,Y=f.edge(w),fe=f.node(w.v),Le=f.node(w.w);Y.points?(R=Y.points[0],H=Y.points[Y.points.length-1]):(Y.points=[],R=Le,H=fe),Y.points.unshift(qd.intersectRect(fe,R)),Y.points.push(qd.intersectRect(Le,H))})})(r)}),l("    reversePoints",function(){(function(f){Nn.forEach(f.edges(),function(w){var R=f.edge(w);R.reversed&&R.points.reverse()})})(r)}),l("    acyclic.undo",function(){x0.undo(r)})})(i,n)}),n("  updateInputGraph",function(){(function(r,l){Nn.forEach(r.nodes(),function(f){var w=r.node(f),R=l.node(f);w&&(w.x=R.x,w.y=R.y,l.children(f).length&&(w.width=R.width,w.height=R.height))}),Nn.forEach(r.edges(),function(f){var w=r.edge(f),R=l.edge(f);w.points=R.points,Nn.has(R,"x")&&(w.x=R.x,w.y=R.y)}),r.graph().width=l.graph().width,r.graph().height=l.graph().height})(e,i)})})},xE=["nodesep","edgesep","ranksep","marginx","marginy"],IE={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},NE=["acyclicer","ranker","rankdir","align"],TE=["width","height"],ME={width:0,height:0},AE=["minlen","weight","width","height","labeloffset"],RE={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},PE=["labelpos"];function Sv(e,t){return Nn.mapValues(Nn.pick(e,t),Number)}function Ev(e){var t={};return Nn.forEach(e,function(n,i){t[i.toLowerCase()]=n}),t}var OE=Nc.Graph,q0={graphlib:Nc,layout:DE,debug:{debugOrdering:function(e){var t=qa.buildLayerMatrix(e),n=new OE({compound:!0,multigraph:!0}).setGraph({});return Nn.forEach(e.nodes(),function(i){n.setNode(i,{label:i}),n.setParent(i,"layer"+e.node(i).rank)}),Nn.forEach(e.edges(),function(i){n.setEdge(i.v,i.w,{},i.name)}),Nn.forEach(t,function(i,r){var l="layer"+r;n.setNode(l,{rank:"same"}),Nn.reduce(i,function(f,w){return n.setEdge(f,w,{style:"invis"}),w})}),n}},util:{time:qa.time,notime:qa.notime},version:"0.8.5"},kE=q0.graphlib,FE=q0.layout;class BE{constructor(t){this.cardinality=1,this.include=cu.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=Da.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class WE{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function VE(e){const t=new WE;return e.nodes.map(n=>new BE(n)).forEach(n=>{t.nodes[n.name]=n,n.inputs.forEach(i=>{(function(r,l,f){f.name!==l.name&&r.edges.push(Object.assign(Object.assign({},f.attr),{v:f.name,w:l.name}))})(t,n,i)})}),t}class UE{constructor(t,n={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=cu.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=Da.META,this.path=[],this.name=t,this.metaGraph=Lv(t,Ou.META,n)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(t=>this.metaGraph.node(t))}leaves(){let t,n=[],i=[this];for(;i.length;){let r=i.shift();r.isGroupNode?(t=r.metaGraph,t.nodes().forEach(l=>i.push(t.node(l)))):n.push(r.name)}return n}}class zE{constructor(t,n){this.v=t,this.w=n,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,n){this.baseEdgeList.push(t)}}function e_(e,t={}){return new UE(e,t)}function t_(e,t){return new zE(e,t)}function Lv(e,t,n){const i=n||{},r=new kE.Graph(i);return r.setGraph({name:e,rankdir:i.rankdir,type:t,align:i.align}),r}class HE{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=e_(Jl,this.graphOptions),this.index[Jl]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,n){this.index[t]=n}getBridgeGraph(t){const n=this.index[t];if(!n)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in n))return null;const i=n;if(i.bridgeGraph)return i.bridgeGraph;const r=Lv(bh,Ou.BRIDGE,this.graphOptions);if(i.bridgeGraph=r,!n.parentNode||!("metaGraph"in n.parentNode))return r;const l=n.parentNode;return[l.metaGraph,this.getBridgeGraph(l.name)].forEach(f=>{f.edges().filter(w=>w.v===t||w.w===t).forEach(w=>{const R=w.w===t;f.edge(w).baseEdgeList.forEach(H=>{const[Y,fe]=R?[H.w,w.v]:[H.v,w.w],Le=this.getChildName(t,Y),Me={v:R?fe:Le,w:R?Le:fe};let We=r.edge(Me);We||(We=t_(Me.v,Me.w),We.inbound=R,r.setEdge(Me.v,Me.w,We)),We.addBaseEdge(H,this)})})}),r}getChildName(t,n){let i=this.index[n];for(;i;){if(i.parentNode&&i.parentNode.name===t)return i.name;i=i.parentNode}throw Error("Could not find immediate child for descendant: "+n)}getPredecessors(t){const n=this.index[t];if(!n)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(n,!0)}getSuccessors(t){const n=this.index[t];if(!n)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(n,!1)}getOneWayEdges(t,n){const i=[];if(!t.parentNode||!t.parentNode.isGroupNode)return i;const r=t.parentNode,l=r.metaGraph,f=this.getBridgeGraph(r.name);return n_(l,t,n,i),n_(f,t,n,i),i}}function GE(e,t){const{rankDirection:n,align:i}=t,r=new HE({rankdir:n,align:i});return function(l,f){Object.keys(f.nodes).forEach(w=>{const R=f.nodes[w],H=R.path;let Y=l.root;Y.depth=Math.max(H.length,Y.depth);for(let fe=0;fe<H.length&&(Y.depth=Math.max(Y.depth,H.length-fe),Y.cardinality+=R.cardinality,fe!==H.length-1);fe++){const Le=H[fe];let Me=l.node(Le);Me||(Me=e_(Le,l.graphOptions),Me.path=R.path.slice(0,fe+1),Me.parentNode=Y,l.setNode(Le,Me),Y.metaGraph.setNode(Le,Me)),Y=Me}l.setNode(R.name,R),R.parentNode=Y,Y.metaGraph.setNode(R.name,R)})}(r,e),function(l,f){const w=l.getNodeMap();let R=[],H=[];const Y=(fe,Le)=>{let Me=0;for(;fe;)Le[Me++]=fe.name,fe=fe.parentNode;return Me-1};f.edges.forEach(fe=>{R=[],H=[];let Le=Y(f.nodes[fe.v],R),Me=Y(f.nodes[fe.w],H);for(;R[Le]===H[Me];)if(Le--,Me--,Le<0||Me<0)throw Error("No difference found between ancestor paths.");const We=w[R[Le+1]],Ze=R[Le],He=H[Me];let et=We.metaGraph.edge(Ze,He);et||(et=t_(Ze,He),We.metaGraph.setEdge(Ze,He,et)),et.addBaseEdge(fe,l)})}(r,e),r}function n_(e,t,n,i){(n?e.inEdges(t.name):e.outEdges(t.name)).forEach(r=>{const l=e.edge(r);i.push(l)})}class jE{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new r_(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(t){if(t in this.hasSubHierarchy)return;this.hasSubHierarchy[t]=!0;const n=this.index[t];if(n.node.type!==Da.META)return;const i=n,r=i.node.metaGraph,l=i.coreGraph;r.nodes().forEach(Y=>{const fe=this.getOrCreateRenderNodeByName(Y);l.setNode(Y,fe)}),r.edges().forEach(Y=>{const fe=r.edge(Y),Le=new i_(fe);l.setEdge(Y.v,Y.w,Le)});const f=i.node.parentNode;if(!f)return;const w=this.getRenderNodeByName(f.name),R=(Y,...fe)=>fe.concat([Y?"IN":"OUT"]).join("~~"),H=this.hierarchy.getBridgeGraph(t);H.edges().forEach(Y=>{const fe=H.edge(Y),Le=!!r.node(Y.w),[Me,We]=Le?[Y.w,Y.v]:[Y.v,Y.w],Ze=Rt=>{const un=Le?{v:Rt,w:t}:{v:t,w:Rt};return w.coreGraph.edge(un)};let He=Ze(We);He||(He=Ze(R(Le,We,f.name)));const et=R(Le,t),it=R(Le,We,t);let ut=l.node(it);if(!ut){let Rt=l.node(et);if(!Rt){const jn={name:et,type:Da.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:cu.UNSPECIFIED,inbound:Le,attr:{}};Rt=new Am(jn),this.index[et]=Rt,l.setNode(et,Rt)}const un={name:it,type:Da.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:cu.UNSPECIFIED,inbound:Le,attr:{}};ut=new Am(un),this.index[it]=ut,l.setNode(it,ut),l.setParent(it,et),Rt.node.cardinality++}const Mt=new i_(fe);Mt.adjoiningMetaEdge=He,Le?l.setEdge(it,Me,Mt):l.setEdge(Me,it,Mt)})}getOrCreateRenderNodeByName(t){if(!t)return null;if(t in this.index)return this.index[t];const n=this.getNodeByName(t);return n?(this.index[t]=n.isGroupNode?new r_(n,this.hierarchy.graphOptions):new Am(n),this.index[t]):null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class Am{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class i_{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class r_ extends Am{constructor(t,n){super(t);const i=t.metaGraph.graph();n.compound=!0,this.coreGraph=Lv(i.name,Ou.CORE,n)}}function o_(e,t){e.node.isGroupNode&&function(n,i){const r=lu(i);n.coreGraph.nodes().map(l=>n.coreGraph.node(l)).forEach(l=>{var f,w,R,H,Y,fe;const{height:Le,width:Me}=l;switch(l.node.type){case Da.NODE:Object.assign(l,r.nodeSize.node),l.height=Le||r.nodeSize.node.height,l.width=Me||r.nodeSize.node.width;break;case Da.BRIDGE:Object.assign(l,r.nodeSize.bridge);break;case Da.META:l.expanded?o_(l,i):(Object.assign(l,r.nodeSize.meta),l.height=r.nodeSize.meta.height,l.width=r.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+l.node.type)}if(!l.expanded){const We=l.attr;(function(Ze,He=!1){if(Ze.coreBox.width=Ze.width,Ze.coreBox.height=Ze.height,!He){const et=`${Ze.displayName}`.length,it=3;Ze.width=Math.max(Ze.coreBox.width,et*it)}})(l,i&&(l.node.type===0&&!!((w=(f=i==null?void 0:i.nodeSize)===null||f===void 0?void 0:f.meta)===null||w===void 0?void 0:w.width)||l.node.type===1&&(!!((H=(R=i==null?void 0:i.nodeSize)===null||R===void 0?void 0:R.node)===null||H===void 0?void 0:H.width)||!!We.width)||l.node.type===2&&!!((fe=(Y=i==null?void 0:i.nodeSize)===null||Y===void 0?void 0:Y.bridge)===null||fe===void 0?void 0:fe.width)))}})}(e,t),e.node.type===Da.META&&function(n,i){const r=lu(i),l=r.subScene.meta;Object.assign(n,l);const{nodeSep:f,rankSep:w,edgeSep:R,align:H}=r.graph.meta,Y={nodesep:f,ranksep:w,edgesep:R,align:H};Object.assign(n.coreBox,function(Me,We){const{ranksep:Ze,nodesep:He,edgesep:et,align:it}=We;Object.assign(Me.graph(),{ranksep:Ze,nodesep:He,edgesep:et,align:it});const ut=[];if(Me.nodes().forEach(xn=>{Me.node(xn).node.type!==Da.BRIDGE&&ut.push(xn)}),!ut.length)return{width:0,height:0};FE(Me);let Mt=1/0,Rt=1/0,un=-1/0,jn=-1/0;return ut.forEach(xn=>{const ei=Me.node(xn),ti=.5*ei.width,_i=ei.x-ti,Hn=ei.x+ti;Mt=_i<Mt?_i:Mt,un=Hn>un?Hn:un;const Li=.5*ei.height,yi=ei.y-Li,fr=ei.y+Li;Rt=yi<Rt?yi:Rt,jn=fr>jn?fr:jn}),Me.edges().forEach(xn=>{const ei=Me.edge(xn),ti=Me.node(ei.metaEdge.v),_i=Me.node(ei.metaEdge.w);if(ei.points.length===3&&function(yi){let fr=s_(yi[0],yi[1]);for(let To=1;To<yi.length-1;To++){const Oo=s_(yi[To],yi[To+1]);if(Math.abs(Oo-fr)>1)return!1;fr=Oo}return!0}(ei.points)){if(ti!=null){const yi=ti.expanded?ti.x:Dv(ti);ei.points[0].x=yi}if(_i!=null){const yi=_i.expanded?_i.x:Dv(_i);ei.points[2].x=yi}ei.points=[ei.points[0],ei.points[1]]}const Hn=ei.points[ei.points.length-2];_i!=null&&(ei.points[ei.points.length-1]=a_(Hn,_i));const Li=ei.points[1];ti!=null&&(ei.points[0]=a_(Li,ti)),ei.points.forEach(yi=>{Mt=yi.x<Mt?yi.x:Mt,un=yi.x>un?yi.x:un,Rt=yi.y<Rt?yi.y:Rt,jn=yi.y>jn?yi.y:jn})}),Me.nodes().forEach(xn=>{const ei=Me.node(xn);ei.x-=Mt,ei.y-=Rt}),Me.edges().forEach(xn=>{Me.edge(xn).points.forEach(ei=>{ei.x-=Mt,ei.y-=Rt})}),{width:un-Mt,height:jn-Rt}}(n.coreGraph,Y));let fe=0;n.coreGraph.nodeCount()>0&&fe++;const Le=fe<=1?0:fe;n.coreBox.width+=Le+Le,n.coreBox.height=l.labelHeight+n.coreBox.height,n.width=n.coreBox.width+l.paddingLeft+l.paddingRight,n.height=n.paddingTop+n.coreBox.height+n.paddingBottom}(e,t)}function s_(e,t){const n=t.x-e.x,i=t.y-e.y;return 180*Math.atan(i/n)/Math.PI}function Dv(e){return e.expanded?e.x:e.x-e.width/2+0+e.coreBox.width/2}function a_(e,t){const n=t.expanded?t.x:Dv(t),i=t.y,r=e.x-n,l=e.y-i;let f,w,R=t.expanded?t.width:t.coreBox.width,H=t.expanded?t.height:t.coreBox.height;return Math.abs(l)*R/2>Math.abs(r)*H/2?(l<0&&(H=-H),f=l===0?0:H/2*r/l,w=H/2):(r<0&&(R=-R),f=R/2,w=r===0?0:R/2*l/r),{x:n+f,y:i+w}}function KE(e,t,n){var i,r,l,f;const w=e.nodes.filter((fe,Le,Me)=>Me.findIndex(We=>We.id===fe.id)!==Le).map(fe=>fe.id);if(w.length)throw new Error(`Duplicated ids found: ${w.join(", ")}`);const R=function(fe){const Le={nodes:[]},Me=fe.compound,We=Object.keys(Me||{}),Ze=new Map,He=(it,ut=[])=>{if(Ze.has(it))return Ze.get(it);for(let Mt=0;Mt<We.length;Mt++){let Rt=We[Mt];if(Me&&Me[Rt].indexOf(it)!==-1)return ut.unshift(Rt),He(Rt,ut)}return ut.length===0&&Ze.set(it,ut),ut},et=it=>fe.edges.filter(ut=>ut.w===it).map(ut=>({name:ut.v}));return fe.nodes.forEach(it=>{const ut=it.id,Mt=[...He(ut),ut];let Rt=et(ut);Le.nodes.push({name:ut,path:Mt,inputs:Rt,width:it.width,height:it.height,attr:Object.assign({},it)})}),Le}(e),H=function(fe,Le){const Me=(Ze,He)=>{for(let et of He.values())if(et.includes(Ze))return!0;return!1},We=(Ze,He=[])=>{if(Object.keys(Ze).length===0)return[...new Set(He)];const et=new Map(Object.keys(Ze).map(ut=>[ut,Ze[ut]])),it={};for(let[ut,Mt]of et)Me(ut,et)?it[ut]=Mt:He=He.concat(ut,Mt);return We(it,He)};return We(fe).filter(Ze=>Le.includes(Ze))}(e.compound||{},(t==null?void 0:t.expanded)||[]),Y=function(fe,Le){return function(Me){return new jE(Me)}(GE(VE(fe),Le))}(R,{rankDirection:((r=(i=n==null?void 0:n.graph)===null||i===void 0?void 0:i.meta)===null||r===void 0?void 0:r.rankDir)||(t==null?void 0:t.rankDirection)||Sc.graph.meta.rankDir,align:((f=(l=n==null?void 0:n.graph)===null||l===void 0?void 0:l.meta)===null||f===void 0?void 0:f.align)||Sc.graph.meta.align});return function(fe,Le){Le.forEach(Me=>{const We=fe.getRenderInfoNodes().find(et=>et.displayName===Me);let Ze=We&&We.node&&We.node.name||"";const He=fe.getRenderNodeByName(Ze);if(!He)throw new Error(`No nodes found: ${Ze}`);He.expanded=!0,fe.buildSubHierarchy(Ze)})}(Y,H),o_(Y.root,n),c_(Y.root)}function $E(e,t=!1){const n=JSON.parse(JSON.stringify(e)),i={nodes:[n],edges:[...n.edges]};return n.nodes.forEach(function r(l){(l.type===0||l.type===1)&&i.nodes.push(l),l.type===0&&(i.edges=i.edges.concat(l.edges)),Array.isArray(l.nodes)&&l.nodes.forEach(r)}),t&&i.nodes.forEach(r=>{const l=i.nodes.find(f=>f.id===r.parentNodeName);if(l){const f=l.x-l.width/2+l.paddingLeft,w=l.y-l.height/2+l.labelHeight+l.paddingTop;l.id!==Jl&&(r.x+=f,r.y+=w),r.type===0&&r.edges.forEach(R=>{R.points.forEach(H=>{H.x+=r.x-r.width/2+r.paddingLeft,H.y+=r.y-r.height/2+r.labelHeight+r.paddingTop})})}}),i}function l_(e,t,n,i){var r,l;let f=[];const w=((r=n.find(fe=>fe.id===e))===null||r===void 0?void 0:r.path)||[],R=((l=n.find(fe=>fe.id===t))===null||l===void 0?void 0:l.path)||[],H=[Jl,...w].slice(0,w.length).reverse(),Y=[Jl,...R].slice(0,R.length);return H.forEach(fe=>{const Le=n.find(Me=>Me.id===fe);f=f.concat(Le.edges.filter(Me=>Me.baseEdgeList.some(We=>We.v===((i==null?void 0:i.v)||e)&&We.w===((i==null?void 0:i.w)||t))))}),Y.filter(fe=>!H.includes(fe)).forEach(fe=>{const Le=n.find(Me=>Me.id===fe);f=f.concat(Le.edges.filter(Me=>Me.baseEdgeList.some(We=>We.v===((i==null?void 0:i.v)||e)&&We.w===((i==null?void 0:i.w)||t))))}),f}function c_(e){const t=e.coreGraph.nodes().map(i=>e.coreGraph.node(i));return Object.assign(Object.assign({},u_(e)),{expanded:e.expanded,nodes:e.expanded?(n=t,n.map(i=>i.node.type===Da.META?c_(i):u_(i))):[],edges:e.expanded?ZE(e):[]});var n}function u_(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}function ZE(e){return e.coreGraph.edges().map(t=>({renderInfoEdge:e.coreGraph.edge(t),edge:t})).filter(({renderInfoEdge:t})=>t.metaEdge).map(({edge:t,renderInfoEdge:n})=>{const i=function(r,l){const f=l.points.map(w=>Object.assign({},w));if(l.adjoiningMetaEdge){const w=l.adjoiningMetaEdge.points,R=l.metaEdge.inbound,H=R?w[w.length-1]:w[0],Y=f[R?0:f.length-1],fe=r.x-r.width/2,Le=r.y-r.height/2,Me=H.x-fe,We=H.y-Le,Ze=-r.paddingLeft,He=-(r.paddingTop+r.labelHeight);Y.x=Me+Ze,Y.y=We+He}return f}(e,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:t.w,v:t.v,points:i,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:e.node.name}})}class XE extends de{constructor(t){super();this.rankdir="TB",this.nodesep=50,this.edgesep=5,this.ranksep=50,this.controlPoints=!0,this.anchorPoint=!0,this.nodes=[],this.edges=[],this.combos=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}}init(t){const n=t.hiddenNodes||[],i=t.hiddenEdges||[],r=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(n)),this.edges=this.getDataByOrder((t.edges||[]).concat(i)),this.combos=(t.combos||[]).concat(r.map(l=>Object.assign(Object.assign({},l),{collapsed:!0})))}execute(){const t=this,{nodes:n,edges:i}=t;if(!n)return;const{graphDef:r,graphOption:l,graphSettings:f}=t.getLayoutConfig(),w=KE(r,l,f),R=$E(w,!0);return this.updatePosition(R),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i}}getNodePath(t){const n=this,{nodes:i,combos:r}=n,l=i.find(w=>w.id===t),f=(w,R=[])=>{const H=r.find(Y=>Y.id===w);return H?(R.unshift(w),H.parentId?f(H.parentId,R):R):R};return l&&l.comboId?f(l.comboId,[t]):[t]}getLayoutConfig(){var t,n,i;const r=this,{nodes:l,edges:f,combos:w,nodeSize:R,rankdir:H,align:Y,edgesep:fe,nodesep:Le,ranksep:Me,settings:We}=r,Ze=(w||[]).reduce((Li,yi)=>{const fr=l.filter(Oo=>Oo.comboId===yi.id).map(Oo=>Oo.id),To=(w||[]).filter(Oo=>Oo.parentId===yi.id).map(Oo=>Oo.id);return(fr.length||To.length)&&(Li[yi.id]=[...fr,...To]),Li},{});let He;R?j(R)?He=()=>R:He=()=>[R,R]:He=Li=>Li&&Li.size?j(Li.size)?Li.size:x(Li.size)?[Li.size.width||40,Li.size.height||40]:[Li.size,Li.size]:[40,40];const et=Li=>Li&&Li.size?j(Li.size)?Li.size:[Li.size,Li.size]:[80,40],[it,ut]=et(w==null?void 0:w[0]),Mt=(n=(t=r.graphSettings)===null||t===void 0?void 0:t.subScene)===null||n===void 0?void 0:n.meta,[Rt,un,jn,xn]=((i=w.find(Li=>!Li.collapsed))===null||i===void 0?void 0:i.padding)||[20,20,20,20],ei={compound:Ze,nodes:[...(l||[]).map(Li=>{const yi=He(Li),fr=yi[0],To=yi[1];return Object.assign(Object.assign({},Li),{width:fr,height:To})})],edges:[...(f||[]).map(Li=>Object.assign(Object.assign({},Li),{v:Li.source,w:Li.target}))]},ti={expanded:(w||[]).filter(Li=>!Li.collapsed).map(Li=>Li.id)},_i={graph:{meta:{align:Y,rankDir:H,nodeSep:Le,edgeSep:fe,rankSep:Me}},subScene:{meta:{paddingTop:Rt||(Mt==null?void 0:Mt.paddingTop)||20,paddingRight:un||(Mt==null?void 0:Mt.paddingRight)||20,paddingBottom:jn||(Mt==null?void 0:Mt.paddingBottom)||20,paddingLeft:xn||(Mt==null?void 0:Mt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:it,height:ut}}},Hn=lu(We,Object.assign({},lu(_i,Sc)));return r.graphSettings=Hn,{graphDef:ei,graphOption:ti,graphSettings:Hn}}updatePosition(t){const{nodes:n,edges:i}=t;this.updateNodePosition(n,i),this.updateEdgePosition(n,i)}getBegin(t,n){const i=this,{begin:r}=i,l=[0,0];if(r){let f=Infinity,w=Infinity;t.forEach(R=>{f>R.x&&(f=R.x),w>R.y&&(w=R.y)}),n.forEach(R=>{R.points.forEach(H=>{f>H.x&&(f=H.x),w>H.y&&(w=H.y)})}),l[0]=r[0]-f,l[1]=r[1]-w}return l}updateNodePosition(t,n){const i=this,{combos:r,nodes:l,edges:f,anchorPoint:w,graphSettings:R}=i,H=this.getBegin(t,n);t.forEach(Y=>{var fe;const{x:Le,y:Me,id:We,type:Ze,coreBox:He}=Y;if(Ze===ku.META&&We!==Jl){const et=r.findIndex(ut=>ut.id===We),it=(fe=R==null?void 0:R.subScene)===null||fe===void 0?void 0:fe.meta;r[et].offsetX=Le+H[0],r[et].offsetY=Me+H[1],r[et].fixSize=[He.width,He.height],r[et].fixCollapseSize=[He.width,He.height],Y.expanded?r[et].padding=[it==null?void 0:it.paddingTop,it==null?void 0:it.paddingRight,it==null?void 0:it.paddingBottom,it==null?void 0:it.paddingLeft]:r[et].padding=[0,0,0,0]}else if(Ze===ku.OP){const et=l.findIndex(it=>it.id===We);if(l[et].x=Le+H[0],l[et].y=Me+H[1],w){const it=[],ut=n.filter(Rt=>Rt.v===We),Mt=n.filter(Rt=>Rt.w===We);ut.length>0&&ut.forEach(Rt=>{const un=Rt.points[0],jn=(un.x-Le)/Y.width+.5,xn=(un.y-Me)/Y.height+.5;it.push([jn,xn]),Rt.baseEdgeList.forEach(ei=>{const ti=f.find(_i=>_i.source===ei.v&&_i.target===ei.w);ti&&(ti.sourceAnchor=it.length-1)})}),Mt.length>0&&Mt.forEach(Rt=>{const un=Rt.points[Rt.points.length-1],jn=(un.x-Le)/Y.width+.5,xn=(un.y-Me)/Y.height+.5;it.push([jn,xn]),Rt.baseEdgeList.forEach(ei=>{const ti=f.find(_i=>_i.source===ei.v&&_i.target===ei.w);ti&&(ti.targetAnchor=it.length-1)})}),l[et].anchorPoints=it.length>0?it:l[et].anchorPoints||[]}}})}updateEdgePosition(t,n){const i=this,{combos:r,edges:l,controlPoints:f}=i,w=this.getBegin(t,n);f&&(r.forEach(R=>{R.inEdges=[],R.outEdges=[]}),l.forEach(R=>{var H,Y,fe,Le;let Me=t.find(et=>et.id===R.source),We=t.find(et=>et.id===R.target),Ze=[],He=[];if(Me&&We)He=l_(Me==null?void 0:Me.id,We==null?void 0:We.id,t);else if(!Me||!We){const et=i.getNodePath(R.source),it=i.getNodePath(R.target),ut=et.reverse().slice(Me?0:1).find(Rt=>t.find(un=>un.id===Rt)),Mt=it.reverse().slice(We?0:1).find(Rt=>t.find(un=>un.id===Rt));Me=t.find(Rt=>Rt.id===ut),We=t.find(Rt=>Rt.id===Mt),He=l_(Me==null?void 0:Me.id,We==null?void 0:We.id,t,{v:R.source,w:R.target})}if(Ze=He.reduce((et,it)=>[...et,...it.points.map(ut=>Object.assign(Object.assign({},ut),{x:ut.x+w[0],y:ut.y+w[1]}))],[]),Ze=Ze.slice(1,-1),R.controlPoints=Ze,(We==null?void 0:We.type)===Da.META){const et=r.findIndex(it=>it.id===(We==null?void 0:We.id));if(!r[et]||((H=r[et].inEdges)===null||H===void 0?void 0:H.some(it=>it.source===Me.id&&it.target===We.id)))return;(Y=r[et].inEdges)===null||Y===void 0||Y.push({source:Me.id,target:We.id,controlPoints:Ze})}if((Me==null?void 0:Me.type)===Da.META){const et=r.findIndex(it=>it.id===(Me==null?void 0:Me.id));if(!r[et]||((fe=r[et].outEdges)===null||fe===void 0?void 0:fe.some(it=>it.source===Me.id&&it.target===We.id)))return;(Le=r[et].outEdges)===null||Le===void 0||Le.push({source:Me.id,target:We.id,controlPoints:Ze})}}))}getType(){return"dagreCompound"}getDataByOrder(t){return t.every(n=>n.layoutOrder!==void 0)||t.forEach((n,i)=>{n.layoutOrder=i}),t.sort((n,i)=>n.layoutOrder-i.layoutOrder)}}var YE=a(40670),d_=a(81306),h_=a(59206),Rm=a(69610),Pm=a(54941);const QE=Object.prototype.toString;function Mc(e){return QE.call(e).endsWith("Array]")}function JE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Mc(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var n=t.fromIndex,i=n===void 0?0:n,r=t.toIndex,l=r===void 0?e.length:r;if(i<0||i>=e.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(l<=i||l>e.length||!Number.isInteger(l))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var f=e[i],w=i+1;w<l;w++)e[w]>f&&(f=e[w]);return f}function qE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Mc(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var n=t.fromIndex,i=n===void 0?0:n,r=t.toIndex,l=r===void 0?e.length:r;if(i<0||i>=e.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(l<=i||l>e.length||!Number.isInteger(l))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var f=e[i],w=i+1;w<l;w++)e[w]<f&&(f=e[w]);return f}function f_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Mc(e)){if(e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(t.output!==void 0){if(!Mc(t.output))throw new TypeError("output option must be an array if specified");n=t.output}else n=new Array(e.length);var i=qE(e),r=JE(e);if(i===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var l=t.min,f=l===void 0?t.autoMinMax?i:0:l,w=t.max,R=w===void 0?t.autoMinMax?r:1:w;if(f>=R)throw new RangeError("min option must be smaller than max option");for(var H=(R-f)/(r-i),Y=0;Y<e.length;Y++)n[Y]=(e[Y]-i)*H+f;return n}var Om=" ".repeat(2),g_=" ".repeat(4);function eL(){return m_(this)}function m_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxRows,i=n===void 0?15:n,r=t.maxColumns,l=r===void 0?10:r,f=t.maxNumSize,w=f===void 0?8:f;return"".concat(e.constructor.name,` {
`).concat(Om,`[
`).concat(g_).concat(tL(e,i,l,w),`
`).concat(Om,`]
`).concat(Om,"rows: ").concat(e.rows,`
`).concat(Om,"columns: ").concat(e.columns,`
}`)}function tL(e,t,n,i){for(var r=e.rows,l=e.columns,f=Math.min(r,t),w=Math.min(l,n),R=[],H=0;H<f;H++){for(var Y=[],fe=0;fe<w;fe++)Y.push(nL(e.get(H,fe),i));R.push("".concat(Y.join(" ")))}return w!==l&&(R[R.length-1]+=" ... ".concat(l-n," more columns")),f!==r&&R.push("... ".concat(r-t," more rows")),R.join(`
`.concat(g_))}function nL(e,t){var n=String(e);if(n.length<=t)return n.padEnd(t," ");var i=e.toPrecision(t-2);if(i.length<=t)return i;var r=e.toExponential(t-2),l=r.indexOf("e"),f=r.slice(l);return r.slice(0,t-f.length)+f}function iL(e,t){e.prototype.add=function(i){return typeof i=="number"?this.addS(i):this.addM(i)},e.prototype.addS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)+i);return this},e.prototype.addM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)+i.get(r,l));return this},e.add=function(i,r){var l=new t(i);return l.add(r)},e.prototype.sub=function(i){return typeof i=="number"?this.subS(i):this.subM(i)},e.prototype.subS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)-i);return this},e.prototype.subM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)-i.get(r,l));return this},e.sub=function(i,r){var l=new t(i);return l.sub(r)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(i){return typeof i=="number"?this.mulS(i):this.mulM(i)},e.prototype.mulS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)*i);return this},e.prototype.mulM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)*i.get(r,l));return this},e.mul=function(i,r){var l=new t(i);return l.mul(r)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(i){return typeof i=="number"?this.divS(i):this.divM(i)},e.prototype.divS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)/i);return this},e.prototype.divM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)/i.get(r,l));return this},e.div=function(i,r){var l=new t(i);return l.div(r)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(i){return typeof i=="number"?this.modS(i):this.modM(i)},e.prototype.modS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)%i);return this},e.prototype.modM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)%i.get(r,l));return this},e.mod=function(i,r){var l=new t(i);return l.mod(r)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(i){return typeof i=="number"?this.andS(i):this.andM(i)},e.prototype.andS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)&i);return this},e.prototype.andM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)&i.get(r,l));return this},e.and=function(i,r){var l=new t(i);return l.and(r)},e.prototype.or=function(i){return typeof i=="number"?this.orS(i):this.orM(i)},e.prototype.orS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)|i);return this},e.prototype.orM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)|i.get(r,l));return this},e.or=function(i,r){var l=new t(i);return l.or(r)},e.prototype.xor=function(i){return typeof i=="number"?this.xorS(i):this.xorM(i)},e.prototype.xorS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)^i);return this},e.prototype.xorM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)^i.get(r,l));return this},e.xor=function(i,r){var l=new t(i);return l.xor(r)},e.prototype.leftShift=function(i){return typeof i=="number"?this.leftShiftS(i):this.leftShiftM(i)},e.prototype.leftShiftS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)<<i);return this},e.prototype.leftShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)<<i.get(r,l));return this},e.leftShift=function(i,r){var l=new t(i);return l.leftShift(r)},e.prototype.signPropagatingRightShift=function(i){return typeof i=="number"?this.signPropagatingRightShiftS(i):this.signPropagatingRightShiftM(i)},e.prototype.signPropagatingRightShiftS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)>>i);return this},e.prototype.signPropagatingRightShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)>>i.get(r,l));return this},e.signPropagatingRightShift=function(i,r){var l=new t(i);return l.signPropagatingRightShift(r)},e.prototype.rightShift=function(i){return typeof i=="number"?this.rightShiftS(i):this.rightShiftM(i)},e.prototype.rightShiftS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)>>>i);return this},e.prototype.rightShiftM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,this.get(r,l)>>>i.get(r,l));return this},e.rightShift=function(i,r){var l=new t(i);return l.rightShift(r)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,~this.get(i,r));return this},e.not=function(i){var r=new t(i);return r.not()},e.prototype.abs=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.abs(this.get(i,r)));return this},e.abs=function(i){var r=new t(i);return r.abs()},e.prototype.acos=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.acos(this.get(i,r)));return this},e.acos=function(i){var r=new t(i);return r.acos()},e.prototype.acosh=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.acosh(this.get(i,r)));return this},e.acosh=function(i){var r=new t(i);return r.acosh()},e.prototype.asin=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.asin(this.get(i,r)));return this},e.asin=function(i){var r=new t(i);return r.asin()},e.prototype.asinh=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.asinh(this.get(i,r)));return this},e.asinh=function(i){var r=new t(i);return r.asinh()},e.prototype.atan=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.atan(this.get(i,r)));return this},e.atan=function(i){var r=new t(i);return r.atan()},e.prototype.atanh=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.atanh(this.get(i,r)));return this},e.atanh=function(i){var r=new t(i);return r.atanh()},e.prototype.cbrt=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.cbrt(this.get(i,r)));return this},e.cbrt=function(i){var r=new t(i);return r.cbrt()},e.prototype.ceil=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.ceil(this.get(i,r)));return this},e.ceil=function(i){var r=new t(i);return r.ceil()},e.prototype.clz32=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.clz32(this.get(i,r)));return this},e.clz32=function(i){var r=new t(i);return r.clz32()},e.prototype.cos=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.cos(this.get(i,r)));return this},e.cos=function(i){var r=new t(i);return r.cos()},e.prototype.cosh=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.cosh(this.get(i,r)));return this},e.cosh=function(i){var r=new t(i);return r.cosh()},e.prototype.exp=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.exp(this.get(i,r)));return this},e.exp=function(i){var r=new t(i);return r.exp()},e.prototype.expm1=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.expm1(this.get(i,r)));return this},e.expm1=function(i){var r=new t(i);return r.expm1()},e.prototype.floor=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.floor(this.get(i,r)));return this},e.floor=function(i){var r=new t(i);return r.floor()},e.prototype.fround=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.fround(this.get(i,r)));return this},e.fround=function(i){var r=new t(i);return r.fround()},e.prototype.log=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.log(this.get(i,r)));return this},e.log=function(i){var r=new t(i);return r.log()},e.prototype.log1p=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.log1p(this.get(i,r)));return this},e.log1p=function(i){var r=new t(i);return r.log1p()},e.prototype.log10=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.log10(this.get(i,r)));return this},e.log10=function(i){var r=new t(i);return r.log10()},e.prototype.log2=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.log2(this.get(i,r)));return this},e.log2=function(i){var r=new t(i);return r.log2()},e.prototype.round=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.round(this.get(i,r)));return this},e.round=function(i){var r=new t(i);return r.round()},e.prototype.sign=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.sign(this.get(i,r)));return this},e.sign=function(i){var r=new t(i);return r.sign()},e.prototype.sin=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.sin(this.get(i,r)));return this},e.sin=function(i){var r=new t(i);return r.sin()},e.prototype.sinh=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.sinh(this.get(i,r)));return this},e.sinh=function(i){var r=new t(i);return r.sinh()},e.prototype.sqrt=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.sqrt(this.get(i,r)));return this},e.sqrt=function(i){var r=new t(i);return r.sqrt()},e.prototype.tan=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.tan(this.get(i,r)));return this},e.tan=function(i){var r=new t(i);return r.tan()},e.prototype.tanh=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.tanh(this.get(i,r)));return this},e.tanh=function(i){var r=new t(i);return r.tanh()},e.prototype.trunc=function(){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,Math.trunc(this.get(i,r)));return this},e.trunc=function(i){var r=new t(i);return r.trunc()},e.pow=function(i,r){var l=new t(i);return l.pow(r)},e.prototype.pow=function(i){return typeof i=="number"?this.powS(i):this.powM(i)},e.prototype.powS=function(i){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,Math.pow(this.get(r,l),i));return this},e.prototype.powM=function(i){if(i=t.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.set(r,l,Math.pow(this.get(r,l),i.get(r,l)));return this}}function vu(e,t,n){var i=n?e.rows:e.rows-1;if(t<0||t>i)throw new RangeError("Row index out of range")}function _u(e,t,n){var i=n?e.columns:e.columns-1;if(t<0||t>i)throw new RangeError("Column index out of range")}function Nf(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function Tf(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function rL(e,t){if(!Mc(t))throw new TypeError("row indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.rows)throw new RangeError("row indices are out of range")}function oL(e,t){if(!Mc(t))throw new TypeError("column indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.columns)throw new RangeError("column indices are out of range")}function p_(e,t,n,i,r){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Fm("startRow",t),Fm("endRow",n),Fm("startColumn",i),Fm("endColumn",r),t>n||i>r||t<0||t>=e.rows||n<0||n>=e.rows||i<0||i>=e.columns||r<0||r>=e.columns)throw new RangeError("Submatrix indices are out of range")}function km(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],i=0;i<e;i++)n.push(t);return n}function Fm(e,t){if(typeof t!="number")throw new TypeError("".concat(e," must be a number"))}function Mf(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}function sL(e){for(var t=km(e.rows),n=0;n<e.rows;++n)for(var i=0;i<e.columns;++i)t[n]+=e.get(n,i);return t}function aL(e){for(var t=km(e.columns),n=0;n<e.rows;++n)for(var i=0;i<e.columns;++i)t[i]+=e.get(n,i);return t}function lL(e){for(var t=0,n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)t+=e.get(n,i);return t}function cL(e){for(var t=km(e.rows,1),n=0;n<e.rows;++n)for(var i=0;i<e.columns;++i)t[n]*=e.get(n,i);return t}function uL(e){for(var t=km(e.columns,1),n=0;n<e.rows;++n)for(var i=0;i<e.columns;++i)t[i]*=e.get(n,i);return t}function dL(e){for(var t=1,n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)t*=e.get(n,i);return t}function hL(e,t,n){for(var i=e.rows,r=e.columns,l=[],f=0;f<i;f++){for(var w=0,R=0,H=0,Y=0;Y<r;Y++)H=e.get(f,Y)-n[f],w+=H,R+=H*H;t?l.push((R-w*w/r)/(r-1)):l.push((R-w*w/r)/r)}return l}function fL(e,t,n){for(var i=e.rows,r=e.columns,l=[],f=0;f<r;f++){for(var w=0,R=0,H=0,Y=0;Y<i;Y++)H=e.get(Y,f)-n[f],w+=H,R+=H*H;t?l.push((R-w*w/i)/(i-1)):l.push((R-w*w/i)/i)}return l}function gL(e,t,n){for(var i=e.rows,r=e.columns,l=i*r,f=0,w=0,R=0,H=0;H<i;H++)for(var Y=0;Y<r;Y++)R=e.get(H,Y)-n,f+=R,w+=R*R;return t?(w-f*f/l)/(l-1):(w-f*f/l)/l}function mL(e,t){for(var n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)e.set(n,i,e.get(n,i)-t[n])}function pL(e,t){for(var n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)e.set(n,i,e.get(n,i)-t[i])}function vL(e,t){for(var n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)e.set(n,i,e.get(n,i)-t)}function _L(e){for(var t=[],n=0;n<e.rows;n++){for(var i=0,r=0;r<e.columns;r++)i+=Math.pow(e.get(n,r),2)/(e.columns-1);t.push(Math.sqrt(i))}return t}function CL(e,t){for(var n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)e.set(n,i,e.get(n,i)/t[n])}function bL(e){for(var t=[],n=0;n<e.columns;n++){for(var i=0,r=0;r<e.rows;r++)i+=Math.pow(e.get(r,n),2)/(e.rows-1);t.push(Math.sqrt(i))}return t}function yL(e,t){for(var n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)e.set(n,i,e.get(n,i)/t[i])}function wL(e){for(var t=e.size-1,n=0,i=0;i<e.columns;i++)for(var r=0;r<e.rows;r++)n+=Math.pow(e.get(r,i),2)/t;return Math.sqrt(n)}function SL(e,t){for(var n=0;n<e.rows;n++)for(var i=0;i<e.columns;i++)e.set(n,i,e.get(n,i)/t)}var Ga=function(){function e(){(0,Rm.Z)(this,e)}return(0,Pm.Z)(e,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(n){if(typeof n!="function")throw new TypeError("callback must be a function");for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)n.call(this,i,r);return this}},{key:"to1DArray",value:function(){for(var n=[],i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)n.push(this.get(i,r));return n}},{key:"to2DArray",value:function(){for(var n=[],i=0;i<this.rows;i++){n.push([]);for(var r=0;r<this.columns;r++)n[i].push(this.get(i,r))}return n}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var n=0;n<this.rows;n++)for(var i=0;i<=n;i++)if(this.get(n,i)!==this.get(i,n))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var n=0,i=0,r=-1,l=!0,f=!1;n<this.rows&&l;){for(i=0,f=!1;i<this.columns&&f===!1;)this.get(n,i)===0?i++:this.get(n,i)===1&&i>r?(f=!0,r=i):(l=!1,f=!0);n++}return l}},{key:"isReducedEchelonForm",value:function(){for(var n=0,i=0,r=-1,l=!0,f=!1;n<this.rows&&l;){for(i=0,f=!1;i<this.columns&&f===!1;)this.get(n,i)===0?i++:this.get(n,i)===1&&i>r?(f=!0,r=i):(l=!1,f=!0);for(var w=i+1;w<this.rows;w++)this.get(n,w)!==0&&(l=!1);n++}return l}},{key:"echelonForm",value:function(){for(var n=this.clone(),i=0,r=0;i<n.rows&&r<n.columns;){for(var l=i,f=i;f<n.rows;f++)n.get(f,r)>n.get(l,r)&&(l=f);if(n.get(l,r)===0)r++;else{n.swapRows(i,l);for(var w=n.get(i,r),R=r;R<n.columns;R++)n.set(i,R,n.get(i,R)/w);for(var H=i+1;H<n.rows;H++){var Y=n.get(H,r)/n.get(i,r);n.set(H,r,0);for(var fe=r+1;fe<n.columns;fe++)n.set(H,fe,n.get(H,fe)-n.get(i,fe)*Y)}i++,r++}}return n}},{key:"reducedEchelonForm",value:function(){for(var n=this.echelonForm(),i=n.columns,r=n.rows,l=r-1;l>=0;)if(n.maxRow(l)===0)l--;else{for(var f=0,w=!1;f<r&&w===!1;)n.get(l,f)===1?w=!0:f++;for(var R=0;R<l;R++)for(var H=n.get(R,f),Y=f;Y<i;Y++){var fe=n.get(R,Y)-H*n.get(l,Y);n.set(R,Y,fe)}l--}return n}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof n!="object")throw new TypeError("options must be an object");var i=n.rows,r=i===void 0?1:i,l=n.columns,f=l===void 0?1:l;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(f)||f<=0)throw new TypeError("columns must be a positive integer");for(var w=new Bo(this.rows*r,this.columns*f),R=0;R<r;R++)for(var H=0;H<f;H++)w.setSubMatrix(this,this.rows*R,this.columns*H);return w}},{key:"fill",value:function(n){for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,n);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(n){vu(this,n);for(var i=[],r=0;r<this.columns;r++)i.push(this.get(n,r));return i}},{key:"getRowVector",value:function(n){return Bo.rowVector(this.getRow(n))}},{key:"setRow",value:function(n,i){vu(this,n),i=Nf(this,i);for(var r=0;r<this.columns;r++)this.set(n,r,i[r]);return this}},{key:"swapRows",value:function(n,i){vu(this,n),vu(this,i);for(var r=0;r<this.columns;r++){var l=this.get(n,r);this.set(n,r,this.get(i,r)),this.set(i,r,l)}return this}},{key:"getColumn",value:function(n){_u(this,n);for(var i=[],r=0;r<this.rows;r++)i.push(this.get(r,n));return i}},{key:"getColumnVector",value:function(n){return Bo.columnVector(this.getColumn(n))}},{key:"setColumn",value:function(n,i){_u(this,n),i=Tf(this,i);for(var r=0;r<this.rows;r++)this.set(r,n,i[r]);return this}},{key:"swapColumns",value:function(n,i){_u(this,n),_u(this,i);for(var r=0;r<this.rows;r++){var l=this.get(r,n);this.set(r,n,this.get(r,i)),this.set(r,i,l)}return this}},{key:"addRowVector",value:function(n){n=Nf(this,n);for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)+n[r]);return this}},{key:"subRowVector",value:function(n){n=Nf(this,n);for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)-n[r]);return this}},{key:"mulRowVector",value:function(n){n=Nf(this,n);for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)*n[r]);return this}},{key:"divRowVector",value:function(n){n=Nf(this,n);for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)/n[r]);return this}},{key:"addColumnVector",value:function(n){n=Tf(this,n);for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)+n[i]);return this}},{key:"subColumnVector",value:function(n){n=Tf(this,n);for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)-n[i]);return this}},{key:"mulColumnVector",value:function(n){n=Tf(this,n);for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)*n[i]);return this}},{key:"divColumnVector",value:function(n){n=Tf(this,n);for(var i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)this.set(i,r,this.get(i,r)/n[i]);return this}},{key:"mulRow",value:function(n,i){vu(this,n);for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*i);return this}},{key:"mulColumn",value:function(n,i){_u(this,n);for(var r=0;r<this.rows;r++)this.set(r,n,this.get(r,n)*i);return this}},{key:"max",value:function(n){if(this.isEmpty())return NaN;switch(n){case"row":{for(var i=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.get(r,l)>i[r]&&(i[r]=this.get(r,l));return i}case"column":{for(var f=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),w=0;w<this.rows;w++)for(var R=0;R<this.columns;R++)this.get(w,R)>f[R]&&(f[R]=this.get(w,R));return f}case void 0:{for(var H=this.get(0,0),Y=0;Y<this.rows;Y++)for(var fe=0;fe<this.columns;fe++)this.get(Y,fe)>H&&(H=this.get(Y,fe));return H}default:throw new Error("invalid option: ".concat(n))}}},{key:"maxIndex",value:function(){Mf(this);for(var n=this.get(0,0),i=[0,0],r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.get(r,l)>n&&(n=this.get(r,l),i[0]=r,i[1]=l);return i}},{key:"min",value:function(n){if(this.isEmpty())return NaN;switch(n){case"row":{for(var i=new Array(this.rows).fill(Number.POSITIVE_INFINITY),r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.get(r,l)<i[r]&&(i[r]=this.get(r,l));return i}case"column":{for(var f=new Array(this.columns).fill(Number.POSITIVE_INFINITY),w=0;w<this.rows;w++)for(var R=0;R<this.columns;R++)this.get(w,R)<f[R]&&(f[R]=this.get(w,R));return f}case void 0:{for(var H=this.get(0,0),Y=0;Y<this.rows;Y++)for(var fe=0;fe<this.columns;fe++)this.get(Y,fe)<H&&(H=this.get(Y,fe));return H}default:throw new Error("invalid option: ".concat(n))}}},{key:"minIndex",value:function(){Mf(this);for(var n=this.get(0,0),i=[0,0],r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)this.get(r,l)<n&&(n=this.get(r,l),i[0]=r,i[1]=l);return i}},{key:"maxRow",value:function(n){if(vu(this,n),this.isEmpty())return NaN;for(var i=this.get(n,0),r=1;r<this.columns;r++)this.get(n,r)>i&&(i=this.get(n,r));return i}},{key:"maxRowIndex",value:function(n){vu(this,n),Mf(this);for(var i=this.get(n,0),r=[n,0],l=1;l<this.columns;l++)this.get(n,l)>i&&(i=this.get(n,l),r[1]=l);return r}},{key:"minRow",value:function(n){if(vu(this,n),this.isEmpty())return NaN;for(var i=this.get(n,0),r=1;r<this.columns;r++)this.get(n,r)<i&&(i=this.get(n,r));return i}},{key:"minRowIndex",value:function(n){vu(this,n),Mf(this);for(var i=this.get(n,0),r=[n,0],l=1;l<this.columns;l++)this.get(n,l)<i&&(i=this.get(n,l),r[1]=l);return r}},{key:"maxColumn",value:function(n){if(_u(this,n),this.isEmpty())return NaN;for(var i=this.get(0,n),r=1;r<this.rows;r++)this.get(r,n)>i&&(i=this.get(r,n));return i}},{key:"maxColumnIndex",value:function(n){_u(this,n),Mf(this);for(var i=this.get(0,n),r=[0,n],l=1;l<this.rows;l++)this.get(l,n)>i&&(i=this.get(l,n),r[0]=l);return r}},{key:"minColumn",value:function(n){if(_u(this,n),this.isEmpty())return NaN;for(var i=this.get(0,n),r=1;r<this.rows;r++)this.get(r,n)<i&&(i=this.get(r,n));return i}},{key:"minColumnIndex",value:function(n){_u(this,n),Mf(this);for(var i=this.get(0,n),r=[0,n],l=1;l<this.rows;l++)this.get(l,n)<i&&(i=this.get(l,n),r[0]=l);return r}},{key:"diag",value:function(){for(var n=Math.min(this.rows,this.columns),i=[],r=0;r<n;r++)i.push(this.get(r,r));return i}},{key:"norm",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",i=0;if(n==="max")return this.max();if(n==="frobenius"){for(var r=0;r<this.rows;r++)for(var l=0;l<this.columns;l++)i=i+this.get(r,l)*this.get(r,l);return Math.sqrt(i)}else throw new RangeError("unknown norm type: ".concat(n))}},{key:"cumulativeSum",value:function(){for(var n=0,i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)n+=this.get(i,r),this.set(i,r,n);return this}},{key:"dot",value:function(n){e.isMatrix(n)&&(n=n.to1DArray());var i=this.to1DArray();if(i.length!==n.length)throw new RangeError("vectors do not have the same size");for(var r=0,l=0;l<i.length;l++)r+=i[l]*n[l];return r}},{key:"mmul",value:function(n){n=Bo.checkMatrix(n);for(var i=this.rows,r=this.columns,l=n.columns,f=new Bo(i,l),w=new Float64Array(r),R=0;R<l;R++){for(var H=0;H<r;H++)w[H]=n.get(H,R);for(var Y=0;Y<i;Y++){for(var fe=0,Le=0;Le<r;Le++)fe+=this.get(Y,Le)*w[Le];f.set(Y,R,fe)}}return f}},{key:"strassen2x2",value:function(n){n=Bo.checkMatrix(n);var i=new Bo(2,2),r=this.get(0,0),l=n.get(0,0),f=this.get(0,1),w=n.get(0,1),R=this.get(1,0),H=n.get(1,0),Y=this.get(1,1),fe=n.get(1,1),Le=(r+Y)*(l+fe),Me=(R+Y)*l,We=r*(w-fe),Ze=Y*(H-l),He=(r+f)*fe,et=(R-r)*(l+w),it=(f-Y)*(H+fe),ut=Le+Ze-He+it,Mt=We+He,Rt=Me+Ze,un=Le-Me+We+et;return i.set(0,0,ut),i.set(0,1,Mt),i.set(1,0,Rt),i.set(1,1,un),i}},{key:"strassen3x3",value:function(n){n=Bo.checkMatrix(n);var i=new Bo(3,3),r=this.get(0,0),l=this.get(0,1),f=this.get(0,2),w=this.get(1,0),R=this.get(1,1),H=this.get(1,2),Y=this.get(2,0),fe=this.get(2,1),Le=this.get(2,2),Me=n.get(0,0),We=n.get(0,1),Ze=n.get(0,2),He=n.get(1,0),et=n.get(1,1),it=n.get(1,2),ut=n.get(2,0),Mt=n.get(2,1),Rt=n.get(2,2),un=(r+l+f-w-R-fe-Le)*et,jn=(r-w)*(-We+et),xn=R*(-Me+We+He-et-it-ut+Rt),ei=(-r+w+R)*(Me-We+et),ti=(w+R)*(-Me+We),_i=r*Me,Hn=(-r+Y+fe)*(Me-Ze+it),Li=(-r+Y)*(Ze-it),yi=(Y+fe)*(-Me+Ze),fr=(r+l+f-R-H-Y-fe)*it,To=fe*(-Me+Ze+He-et-it-ut+Mt),Oo=(-f+fe+Le)*(et+ut-Mt),Mo=(f-Le)*(et-Mt),Os=f*ut,Aa=(fe+Le)*(-ut+Mt),eo=(-f+R+H)*(it+ut-Rt),xo=(f-H)*(it-Rt),Gs=(R+H)*(-ut+Rt),ur=l*He,Ao=H*Mt,gs=w*Ze,po=Y*We,Wo=Le*Rt,fo=_i+Os+ur,ds=un+ei+ti+_i+Oo+Os+Aa,Ka=_i+Hn+yi+fr+Os+eo+Gs,ys=jn+xn+ei+_i+Os+eo+xo,Qc=jn+ei+ti+_i+Ao,Jc=Os+eo+xo+Gs+gs,sh=_i+Hn+Li+To+Oo+Mo+Os,qu=Oo+Mo+Os+Aa+po,Xf=_i+Hn+Li+yi+Wo;return i.set(0,0,fo),i.set(0,1,ds),i.set(0,2,Ka),i.set(1,0,ys),i.set(1,1,Qc),i.set(1,2,Jc),i.set(2,0,sh),i.set(2,1,qu),i.set(2,2,Xf),i}},{key:"mmulStrassen",value:function(n){n=Bo.checkMatrix(n);var i=this.clone(),r=i.rows,l=i.columns,f=n.rows,w=n.columns;l!==f&&console.warn("Multiplying ".concat(r," x ").concat(l," and ").concat(f," x ").concat(w," matrix: dimensions do not match."));function R(Le,Me,We){var Ze=Le.rows,He=Le.columns;if(Ze===Me&&He===We)return Le;var et=e.zeros(Me,We);return et=et.setSubMatrix(Le,0,0),et}var H=Math.max(r,f),Y=Math.max(l,w);i=R(i,H,Y),n=R(n,H,Y);function fe(Le,Me,We,Ze){if(We<=512||Ze<=512)return Le.mmul(Me);We%2==1&&Ze%2==1?(Le=R(Le,We+1,Ze+1),Me=R(Me,We+1,Ze+1)):We%2==1?(Le=R(Le,We+1,Ze),Me=R(Me,We+1,Ze)):Ze%2==1&&(Le=R(Le,We,Ze+1),Me=R(Me,We,Ze+1));var He=parseInt(Le.rows/2,10),et=parseInt(Le.columns/2,10),it=Le.subMatrix(0,He-1,0,et-1),ut=Me.subMatrix(0,He-1,0,et-1),Mt=Le.subMatrix(0,He-1,et,Le.columns-1),Rt=Me.subMatrix(0,He-1,et,Me.columns-1),un=Le.subMatrix(He,Le.rows-1,0,et-1),jn=Me.subMatrix(He,Me.rows-1,0,et-1),xn=Le.subMatrix(He,Le.rows-1,et,Le.columns-1),ei=Me.subMatrix(He,Me.rows-1,et,Me.columns-1),ti=fe(e.add(it,xn),e.add(ut,ei),He,et),_i=fe(e.add(un,xn),ut,He,et),Hn=fe(it,e.sub(Rt,ei),He,et),Li=fe(xn,e.sub(jn,ut),He,et),yi=fe(e.add(it,Mt),ei,He,et),fr=fe(e.sub(un,it),e.add(ut,Rt),He,et),To=fe(e.sub(Mt,xn),e.add(jn,ei),He,et),Oo=e.add(ti,Li);Oo.sub(yi),Oo.add(To);var Mo=e.add(Hn,yi),Os=e.add(_i,Li),Aa=e.sub(ti,_i);Aa.add(Hn),Aa.add(fr);var eo=e.zeros(2*Oo.rows,2*Oo.columns);return eo=eo.setSubMatrix(Oo,0,0),eo=eo.setSubMatrix(Mo,Oo.rows,0),eo=eo.setSubMatrix(Os,0,Oo.columns),eo=eo.setSubMatrix(Aa,Oo.rows,Oo.columns),eo.subMatrix(0,We-1,0,Ze-1)}return fe(i,n,H,Y)}},{key:"scaleRows",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof n!="object")throw new TypeError("options must be an object");var i=n.min,r=i===void 0?0:i,l=n.max,f=l===void 0?1:l;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(f))throw new TypeError("max must be a number");if(r>=f)throw new RangeError("min must be smaller than max");for(var w=new Bo(this.rows,this.columns),R=0;R<this.rows;R++){var H=this.getRow(R);H.length>0&&f_(H,{min:r,max:f,output:H}),w.setRow(R,H)}return w}},{key:"scaleColumns",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof n!="object")throw new TypeError("options must be an object");var i=n.min,r=i===void 0?0:i,l=n.max,f=l===void 0?1:l;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(f))throw new TypeError("max must be a number");if(r>=f)throw new RangeError("min must be smaller than max");for(var w=new Bo(this.rows,this.columns),R=0;R<this.columns;R++){var H=this.getColumn(R);H.length&&f_(H,{min:r,max:f,output:H}),w.setColumn(R,H)}return w}},{key:"flipRows",value:function(){for(var n=Math.ceil(this.columns/2),i=0;i<this.rows;i++)for(var r=0;r<n;r++){var l=this.get(i,r),f=this.get(i,this.columns-1-r);this.set(i,r,f),this.set(i,this.columns-1-r,l)}return this}},{key:"flipColumns",value:function(){for(var n=Math.ceil(this.rows/2),i=0;i<this.columns;i++)for(var r=0;r<n;r++){var l=this.get(r,i),f=this.get(this.rows-1-r,i);this.set(r,i,f),this.set(this.rows-1-r,i,l)}return this}},{key:"kroneckerProduct",value:function(n){n=Bo.checkMatrix(n);for(var i=this.rows,r=this.columns,l=n.rows,f=n.columns,w=new Bo(i*l,r*f),R=0;R<i;R++)for(var H=0;H<r;H++)for(var Y=0;Y<l;Y++)for(var fe=0;fe<f;fe++)w.set(l*R+Y,f*H+fe,this.get(R,H)*n.get(Y,fe));return w}},{key:"kroneckerSum",value:function(n){if(n=Bo.checkMatrix(n),!this.isSquare()||!n.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var i=this.rows,r=n.rows,l=this.kroneckerProduct(Bo.eye(r,r)),f=Bo.eye(i,i).kroneckerProduct(n);return l.add(f)}},{key:"transpose",value:function(){for(var n=new Bo(this.columns,this.rows),i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)n.set(r,i,this.get(i,r));return n}},{key:"sortRows",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v_,i=0;i<this.rows;i++)this.setRow(i,this.getRow(i).sort(n));return this}},{key:"sortColumns",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v_,i=0;i<this.columns;i++)this.setColumn(i,this.getColumn(i).sort(n));return this}},{key:"subMatrix",value:function(n,i,r,l){p_(this,n,i,r,l);for(var f=new Bo(i-n+1,l-r+1),w=n;w<=i;w++)for(var R=r;R<=l;R++)f.set(w-n,R-r,this.get(w,R));return f}},{key:"subMatrixRow",value:function(n,i,r){if(i===void 0&&(i=0),r===void 0&&(r=this.columns-1),i>r||i<0||i>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var l=new Bo(n.length,r-i+1),f=0;f<n.length;f++)for(var w=i;w<=r;w++){if(n[f]<0||n[f]>=this.rows)throw new RangeError("Row index out of range: ".concat(n[f]));l.set(f,w-i,this.get(n[f],w))}return l}},{key:"subMatrixColumn",value:function(n,i,r){if(i===void 0&&(i=0),r===void 0&&(r=this.rows-1),i>r||i<0||i>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var l=new Bo(r-i+1,n.length),f=0;f<n.length;f++)for(var w=i;w<=r;w++){if(n[f]<0||n[f]>=this.columns)throw new RangeError("Column index out of range: ".concat(n[f]));l.set(w-i,f,this.get(w,n[f]))}return l}},{key:"setSubMatrix",value:function(n,i,r){if(n=Bo.checkMatrix(n),n.isEmpty())return this;var l=i+n.rows-1,f=r+n.columns-1;p_(this,i,l,r,f);for(var w=0;w<n.rows;w++)for(var R=0;R<n.columns;R++)this.set(i+w,r+R,n.get(w,R));return this}},{key:"selection",value:function(n,i){rL(this,n),oL(this,i);for(var r=new Bo(n.length,i.length),l=0;l<n.length;l++)for(var f=n[l],w=0;w<i.length;w++){var R=i[w];r.set(l,w,this.get(f,R))}return r}},{key:"trace",value:function(){for(var n=Math.min(this.rows,this.columns),i=0,r=0;r<n;r++)i+=this.get(r,r);return i}},{key:"clone",value:function(){for(var n=new Bo(this.rows,this.columns),i=0;i<this.rows;i++)for(var r=0;r<this.columns;r++)n.set(i,r,this.get(i,r));return n}},{key:"sum",value:function(n){switch(n){case"row":return sL(this);case"column":return aL(this);case void 0:return lL(this);default:throw new Error("invalid option: ".concat(n))}}},{key:"product",value:function(n){switch(n){case"row":return cL(this);case"column":return uL(this);case void 0:return dL(this);default:throw new Error("invalid option: ".concat(n))}}},{key:"mean",value:function(n){var i=this.sum(n);switch(n){case"row":{for(var r=0;r<this.rows;r++)i[r]/=this.columns;return i}case"column":{for(var l=0;l<this.columns;l++)i[l]/=this.rows;return i}case void 0:return i/this.size;default:throw new Error("invalid option: ".concat(n))}}},{key:"variance",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="object"&&(i=n,n=void 0),typeof i!="object")throw new TypeError("options must be an object");var r=i,l=r.unbiased,f=l===void 0?!0:l,w=r.mean,R=w===void 0?this.mean(n):w;if(typeof f!="boolean")throw new TypeError("unbiased must be a boolean");switch(n){case"row":{if(!Mc(R))throw new TypeError("mean must be an array");return hL(this,f,R)}case"column":{if(!Mc(R))throw new TypeError("mean must be an array");return fL(this,f,R)}case void 0:{if(typeof R!="number")throw new TypeError("mean must be a number");return gL(this,f,R)}default:throw new Error("invalid option: ".concat(n))}}},{key:"standardDeviation",value:function(n,i){typeof n=="object"&&(i=n,n=void 0);var r=this.variance(n,i);if(n===void 0)return Math.sqrt(r);for(var l=0;l<r.length;l++)r[l]=Math.sqrt(r[l]);return r}},{key:"center",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="object"&&(i=n,n=void 0),typeof i!="object")throw new TypeError("options must be an object");var r=i,l=r.center,f=l===void 0?this.mean(n):l;switch(n){case"row":{if(!Mc(f))throw new TypeError("center must be an array");return mL(this,f),this}case"column":{if(!Mc(f))throw new TypeError("center must be an array");return pL(this,f),this}case void 0:{if(typeof f!="number")throw new TypeError("center must be a number");return vL(this,f),this}default:throw new Error("invalid option: ".concat(n))}}},{key:"scale",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof n=="object"&&(i=n,n=void 0),typeof i!="object")throw new TypeError("options must be an object");var r=i.scale;switch(n){case"row":{if(r===void 0)r=_L(this);else if(!Mc(r))throw new TypeError("scale must be an array");return CL(this,r),this}case"column":{if(r===void 0)r=bL(this);else if(!Mc(r))throw new TypeError("scale must be an array");return yL(this,r),this}case void 0:{if(r===void 0)r=wL(this);else if(typeof r!="number")throw new TypeError("scale must be a number");return SL(this,r),this}default:throw new Error("invalid option: ".concat(n))}}},{key:"toString",value:function(n){return m_(this,n)}}],[{key:"from1DArray",value:function(n,i,r){var l=n*i;if(l!==r.length)throw new RangeError("data length does not match given dimensions");for(var f=new Bo(n,i),w=0;w<n;w++)for(var R=0;R<i;R++)f.set(w,R,r[w*i+R]);return f}},{key:"rowVector",value:function(n){for(var i=new Bo(1,n.length),r=0;r<n.length;r++)i.set(0,r,n[r]);return i}},{key:"columnVector",value:function(n){for(var i=new Bo(n.length,1),r=0;r<n.length;r++)i.set(r,0,n[r]);return i}},{key:"zeros",value:function(n,i){return new Bo(n,i)}},{key:"ones",value:function(n,i){return new Bo(n,i).fill(1)}},{key:"rand",value:function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof r!="object")throw new TypeError("options must be an object");for(var l=r.random,f=l===void 0?Math.random:l,w=new Bo(n,i),R=0;R<n;R++)for(var H=0;H<i;H++)w.set(R,H,f());return w}},{key:"randInt",value:function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof r!="object")throw new TypeError("options must be an object");var l=r.min,f=l===void 0?0:l,w=r.max,R=w===void 0?1e3:w,H=r.random,Y=H===void 0?Math.random:H;if(!Number.isInteger(f))throw new TypeError("min must be an integer");if(!Number.isInteger(R))throw new TypeError("max must be an integer");if(f>=R)throw new RangeError("min must be smaller than max");for(var fe=R-f,Le=new Bo(n,i),Me=0;Me<n;Me++)for(var We=0;We<i;We++){var Ze=f+Math.round(Y()*fe);Le.set(Me,We,Ze)}return Le}},{key:"eye",value:function(n,i,r){i===void 0&&(i=n),r===void 0&&(r=1);for(var l=Math.min(n,i),f=this.zeros(n,i),w=0;w<l;w++)f.set(w,w,r);return f}},{key:"diag",value:function(n,i,r){var l=n.length;i===void 0&&(i=l),r===void 0&&(r=i);for(var f=Math.min(l,i,r),w=this.zeros(i,r),R=0;R<f;R++)w.set(R,R,n[R]);return w}},{key:"min",value:function(n,i){n=this.checkMatrix(n),i=this.checkMatrix(i);for(var r=n.rows,l=n.columns,f=new Bo(r,l),w=0;w<r;w++)for(var R=0;R<l;R++)f.set(w,R,Math.min(n.get(w,R),i.get(w,R)));return f}},{key:"max",value:function(n,i){n=this.checkMatrix(n),i=this.checkMatrix(i);for(var r=n.rows,l=n.columns,f=new this(r,l),w=0;w<r;w++)for(var R=0;R<l;R++)f.set(w,R,Math.max(n.get(w,R),i.get(w,R)));return f}},{key:"checkMatrix",value:function(n){return e.isMatrix(n)?n:new Bo(n)}},{key:"isMatrix",value:function(n){return n!=null&&n.klass==="Matrix"}}]),e}();Ga.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Ga.prototype[Symbol.for("nodejs.util.inspect.custom")]=eL);function v_(e,t){return e-t}Ga.random=Ga.rand,Ga.randomInt=Ga.randInt,Ga.diagonal=Ga.diag,Ga.prototype.diagonal=Ga.prototype.diag,Ga.identity=Ga.eye,Ga.prototype.negate=Ga.prototype.neg,Ga.prototype.tensorProduct=Ga.prototype.kroneckerProduct;var Bo=function(e){(0,d_.Z)(n,e);var t=(0,h_.Z)(n);function n(i,r){var l;if((0,Rm.Z)(this,n),l=t.call(this),n.isMatrix(i))return(0,YE.Z)(l,i.clone());if(Number.isInteger(i)&&i>=0)if(l.data=[],Number.isInteger(r)&&r>=0)for(var f=0;f<i;f++)l.data.push(new Float64Array(r));else throw new TypeError("nColumns must be a positive integer");else if(Mc(i)){var w=i;if(i=w.length,r=i?w[0].length:0,typeof r!="number")throw new TypeError("Data must be a 2D array with at least one element");l.data=[];for(var R=0;R<i;R++){if(w[R].length!==r)throw new RangeError("Inconsistent array dimensions");l.data.push(Float64Array.from(w[R]))}}else throw new TypeError("First argument must be a positive number or an array");return l.rows=i,l.columns=r,l}return(0,Pm.Z)(n,[{key:"set",value:function(r,l,f){return this.data[r][l]=f,this}},{key:"get",value:function(r,l){return this.data[r][l]}},{key:"removeRow",value:function(r){return vu(this,r),this.data.splice(r,1),this.rows-=1,this}},{key:"addRow",value:function(r,l){return l===void 0&&(l=r,r=this.rows),vu(this,r,!0),l=Float64Array.from(Nf(this,l)),this.data.splice(r,0,l),this.rows+=1,this}},{key:"removeColumn",value:function(r){_u(this,r);for(var l=0;l<this.rows;l++){for(var f=new Float64Array(this.columns-1),w=0;w<r;w++)f[w]=this.data[l][w];for(var R=r+1;R<this.columns;R++)f[R-1]=this.data[l][R];this.data[l]=f}return this.columns-=1,this}},{key:"addColumn",value:function(r,l){typeof l=="undefined"&&(l=r,r=this.columns),_u(this,r,!0),l=Tf(this,l);for(var f=0;f<this.rows;f++){for(var w=new Float64Array(this.columns+1),R=0;R<r;R++)w[R]=this.data[f][R];for(w[R++]=l[f];R<this.columns+1;R++)w[R]=this.data[f][R-1];this.data[f]=w}return this.columns+=1,this}}]),n}(Ga);iL(Ga,Bo);var EL=function(e){(0,d_.Z)(n,e);var t=(0,h_.Z)(n);function n(i){var r;return(0,Rm.Z)(this,n),r=t.call(this),r.data=i,r.rows=i.length,r.columns=i[0].length,r}return(0,Pm.Z)(n,[{key:"set",value:function(r,l,f){return this.data[r][l]=f,this}},{key:"get",value:function(r,l){return this.data[r][l]}}]),n}(Ga);function Af(e,t){var n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):t!==0?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}var __=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,Rm.Z)(this,e),t=EL.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");var i=t.rows,r=t.columns,l=n.computeLeftSingularVectors,f=l===void 0?!0:l,w=n.computeRightSingularVectors,R=w===void 0?!0:w,H=n.autoTranspose,Y=H===void 0?!1:H,fe=Boolean(f),Le=Boolean(R),Me=!1,We;if(i<r)if(!Y)We=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{We=t.transpose(),i=We.rows,r=We.columns,Me=!0;var Ze=fe;fe=Le,Le=Ze}else We=t.clone();for(var He=Math.min(i,r),et=Math.min(i+1,r),it=new Float64Array(et),ut=new Bo(i,He),Mt=new Bo(r,r),Rt=new Float64Array(r),un=new Float64Array(i),jn=new Float64Array(et),xn=0;xn<et;xn++)jn[xn]=xn;for(var ei=Math.min(i-1,r),ti=Math.max(0,Math.min(r-2,i)),_i=Math.max(ei,ti),Hn=0;Hn<_i;Hn++){if(Hn<ei){it[Hn]=0;for(var Li=Hn;Li<i;Li++)it[Hn]=Af(it[Hn],We.get(Li,Hn));if(it[Hn]!==0){We.get(Hn,Hn)<0&&(it[Hn]=-it[Hn]);for(var yi=Hn;yi<i;yi++)We.set(yi,Hn,We.get(yi,Hn)/it[Hn]);We.set(Hn,Hn,We.get(Hn,Hn)+1)}it[Hn]=-it[Hn]}for(var fr=Hn+1;fr<r;fr++){if(Hn<ei&&it[Hn]!==0){for(var To=0,Oo=Hn;Oo<i;Oo++)To+=We.get(Oo,Hn)*We.get(Oo,fr);To=-To/We.get(Hn,Hn);for(var Mo=Hn;Mo<i;Mo++)We.set(Mo,fr,We.get(Mo,fr)+To*We.get(Mo,Hn))}Rt[fr]=We.get(Hn,fr)}if(fe&&Hn<ei)for(var Os=Hn;Os<i;Os++)ut.set(Os,Hn,We.get(Os,Hn));if(Hn<ti){Rt[Hn]=0;for(var Aa=Hn+1;Aa<r;Aa++)Rt[Hn]=Af(Rt[Hn],Rt[Aa]);if(Rt[Hn]!==0){Rt[Hn+1]<0&&(Rt[Hn]=0-Rt[Hn]);for(var eo=Hn+1;eo<r;eo++)Rt[eo]/=Rt[Hn];Rt[Hn+1]+=1}if(Rt[Hn]=-Rt[Hn],Hn+1<i&&Rt[Hn]!==0){for(var xo=Hn+1;xo<i;xo++)un[xo]=0;for(var Gs=Hn+1;Gs<i;Gs++)for(var ur=Hn+1;ur<r;ur++)un[Gs]+=Rt[ur]*We.get(Gs,ur);for(var Ao=Hn+1;Ao<r;Ao++)for(var gs=-Rt[Ao]/Rt[Hn+1],po=Hn+1;po<i;po++)We.set(po,Ao,We.get(po,Ao)+gs*un[po])}if(Le)for(var Wo=Hn+1;Wo<r;Wo++)Mt.set(Wo,Hn,Rt[Wo])}}var fo=Math.min(r,i+1);if(ei<r&&(it[ei]=We.get(ei,ei)),i<fo&&(it[fo-1]=0),ti+1<fo&&(Rt[ti]=We.get(ti,fo-1)),Rt[fo-1]=0,fe){for(var ds=ei;ds<He;ds++){for(var Ka=0;Ka<i;Ka++)ut.set(Ka,ds,0);ut.set(ds,ds,1)}for(var ys=ei-1;ys>=0;ys--)if(it[ys]!==0){for(var Qc=ys+1;Qc<He;Qc++){for(var Jc=0,sh=ys;sh<i;sh++)Jc+=ut.get(sh,ys)*ut.get(sh,Qc);Jc=-Jc/ut.get(ys,ys);for(var qu=ys;qu<i;qu++)ut.set(qu,Qc,ut.get(qu,Qc)+Jc*ut.get(qu,ys))}for(var Xf=ys;Xf<i;Xf++)ut.set(Xf,ys,-ut.get(Xf,ys));ut.set(ys,ys,1+ut.get(ys,ys));for(var o0=0;o0<ys-1;o0++)ut.set(o0,ys,0)}else{for(var s0=0;s0<i;s0++)ut.set(s0,ys,0);ut.set(ys,ys,1)}}if(Le)for(var hc=r-1;hc>=0;hc--){if(hc<ti&&Rt[hc]!==0)for(var zg=hc+1;zg<r;zg++){for(var up=0,dp=hc+1;dp<r;dp++)up+=Mt.get(dp,hc)*Mt.get(dp,zg);up=-up/Mt.get(hc+1,hc);for(var Hg=hc+1;Hg<r;Hg++)Mt.set(Hg,zg,Mt.get(Hg,zg)+up*Mt.get(Hg,hc))}for(var a0=0;a0<r;a0++)Mt.set(a0,hc,0);Mt.set(hc,hc,1)}for(var Qw=fo-1,l0=0,Jw=Number.EPSILON;fo>0;){var Io=void 0,Gg=void 0;for(Io=fo-2;Io>=-1&&Io!==-1;Io--){var dT=Number.MIN_VALUE+Jw*Math.abs(it[Io]+Math.abs(it[Io+1]));if(Math.abs(Rt[Io])<=dT||Number.isNaN(Rt[Io])){Rt[Io]=0;break}}if(Io===fo-2)Gg=4;else{var Ac=void 0;for(Ac=fo-1;Ac>=Io&&Ac!==Io;Ac--){var hT=(Ac!==fo?Math.abs(Rt[Ac]):0)+(Ac!==Io+1?Math.abs(Rt[Ac-1]):0);if(Math.abs(it[Ac])<=Jw*hT){it[Ac]=0;break}}Ac===Io?Gg=3:Ac===fo-1?Gg=1:(Gg=2,Io=Ac)}switch(Io++,Gg){case 1:{var c0=Rt[fo-2];Rt[fo-2]=0;for(var qc=fo-2;qc>=Io;qc--){var jg=Af(it[qc],c0),u0=it[qc]/jg,d0=c0/jg;if(it[qc]=jg,qc!==Io&&(c0=-d0*Rt[qc-1],Rt[qc-1]=u0*Rt[qc-1]),Le)for(var ah=0;ah<r;ah++)jg=u0*Mt.get(ah,qc)+d0*Mt.get(ah,fo-1),Mt.set(ah,fo-1,-d0*Mt.get(ah,qc)+u0*Mt.get(ah,fo-1)),Mt.set(ah,qc,jg)}break}case 2:{var h0=Rt[Io-1];Rt[Io-1]=0;for(var bu=Io;bu<fo;bu++){var Kg=Af(it[bu],h0),f0=it[bu]/Kg,g0=h0/Kg;if(it[bu]=Kg,h0=-g0*Rt[bu],Rt[bu]=f0*Rt[bu],fe)for(var lh=0;lh<i;lh++)Kg=f0*ut.get(lh,bu)+g0*ut.get(lh,Io-1),ut.set(lh,Io-1,-g0*ut.get(lh,bu)+f0*ut.get(lh,Io-1)),ut.set(lh,bu,Kg)}break}case 3:{var $g=Math.max(Math.abs(it[fo-1]),Math.abs(it[fo-2]),Math.abs(Rt[fo-2]),Math.abs(it[Io]),Math.abs(Rt[Io])),Yf=it[fo-1]/$g,qw=it[fo-2]/$g,hp=Rt[fo-2]/$g,m0=it[Io]/$g,fT=Rt[Io]/$g,Zh=((qw+Yf)*(qw-Yf)+hp*hp)/2,fp=Yf*hp*(Yf*hp),Zg=0;(Zh!==0||fp!==0)&&(Zh<0?Zg=0-Math.sqrt(Zh*Zh+fp):Zg=Math.sqrt(Zh*Zh+fp),Zg=fp/(Zh+Zg));for(var Xh=(m0+Yf)*(m0-Yf)+Zg,Qf=m0*fT,ws=Io;ws<fo-1;ws++){var Gl=Af(Xh,Qf);Gl===0&&(Gl=Number.MIN_VALUE);var yu=Xh/Gl,wu=Qf/Gl;if(ws!==Io&&(Rt[ws-1]=Gl),Xh=yu*it[ws]+wu*Rt[ws],Rt[ws]=yu*Rt[ws]-wu*it[ws],Qf=wu*it[ws+1],it[ws+1]=yu*it[ws+1],Le)for(var ch=0;ch<r;ch++)Gl=yu*Mt.get(ch,ws)+wu*Mt.get(ch,ws+1),Mt.set(ch,ws+1,-wu*Mt.get(ch,ws)+yu*Mt.get(ch,ws+1)),Mt.set(ch,ws,Gl);if(Gl=Af(Xh,Qf),Gl===0&&(Gl=Number.MIN_VALUE),yu=Xh/Gl,wu=Qf/Gl,it[ws]=Gl,Xh=yu*Rt[ws]+wu*it[ws+1],it[ws+1]=-wu*Rt[ws]+yu*it[ws+1],Qf=wu*Rt[ws+1],Rt[ws+1]=yu*Rt[ws+1],fe&&ws<i-1)for(var uh=0;uh<i;uh++)Gl=yu*ut.get(uh,ws)+wu*ut.get(uh,ws+1),ut.set(uh,ws+1,-wu*ut.get(uh,ws)+yu*ut.get(uh,ws+1)),ut.set(uh,ws,Gl)}Rt[fo-2]=Xh,l0=l0+1;break}case 4:{if(it[Io]<=0&&(it[Io]=it[Io]<0?-it[Io]:0,Le))for(var gp=0;gp<=Qw;gp++)Mt.set(gp,Io,-Mt.get(gp,Io));for(;Io<Qw&&!(it[Io]>=it[Io+1]);){var Xg=it[Io];if(it[Io]=it[Io+1],it[Io+1]=Xg,Le&&Io<r-1)for(var Jf=0;Jf<r;Jf++)Xg=Mt.get(Jf,Io+1),Mt.set(Jf,Io+1,Mt.get(Jf,Io)),Mt.set(Jf,Io,Xg);if(fe&&Io<i-1)for(var qf=0;qf<i;qf++)Xg=ut.get(qf,Io+1),ut.set(qf,Io+1,ut.get(qf,Io)),ut.set(qf,Io,Xg);Io++}l0=0,fo--;break}}}if(Me){var gT=Mt;Mt=ut,ut=gT}this.m=i,this.n=r,this.s=it,this.U=ut,this.V=Mt}return(0,Pm.Z)(e,[{key:"solve",value:function(n){for(var i=n,r=this.threshold,l=this.s.length,f=Bo.zeros(l,l),w=0;w<l;w++)Math.abs(this.s[w])<=r?f.set(w,w,0):f.set(w,w,1/this.s[w]);for(var R=this.U,H=this.rightSingularVectors,Y=H.mmul(f),fe=H.rows,Le=R.rows,Me=Bo.zeros(fe,Le),We=0;We<fe;We++)for(var Ze=0;Ze<Le;Ze++){for(var He=0,et=0;et<l;et++)He+=Y.get(We,et)*R.get(Ze,et);Me.set(We,Ze,He)}return Me.mmul(i)}},{key:"solveForDiagonal",value:function(n){return this.solve(Bo.diag(n))}},{key:"inverse",value:function(){for(var n=this.V,i=this.threshold,r=n.rows,l=n.columns,f=new Bo(r,this.s.length),w=0;w<r;w++)for(var R=0;R<l;R++)Math.abs(this.s[R])>i&&f.set(w,R,n.get(w,R)/this.s[R]);for(var H=this.U,Y=H.rows,fe=H.columns,Le=new Bo(r,Y),Me=0;Me<r;Me++)for(var We=0;We<Y;We++){for(var Ze=0,He=0;He<fe;He++)Ze+=f.get(Me,He)*H.get(We,He);Le.set(Me,We,Ze)}return Le}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var n=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,i=0,r=this.s,l=0,f=r.length;l<f;l++)r[l]>n&&i++;return i}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Bo.diag(this.s)}}]),e}();class LL{constructor(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}layout(){const t=this,{dimension:n,distances:i,linkDistance:r}=t;try{const l=Bo.mul(Bo.pow(i,2),-.5),f=l.mean("row"),w=l.mean("column"),R=l.mean();l.add(R).subRowVector(f).subColumnVector(w);const H=new __(l),Y=Bo.sqrt(H.diagonalMatrix).diagonal();return H.leftSingularVectors.toJSON().map(fe=>Bo.mul([fe],[Y]).toJSON()[0].splice(0,n))}catch(l){const f=[];for(let w=0;w<i.length;w++){const R=Math.random()*r,H=Math.random()*r;f.push([R,H])}return f}}}const DL=800;class xL{constructor(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}layout(){const t=this,n=t.positions,i=[],r=t.iterations,l=t.width/10;t.maxDisplace=l,t.disp=i;for(let f=0;f<r;f++)n.forEach((w,R)=>{i[R]={x:0,y:0}}),t.getRepulsion(),t.updatePositions();return n}getRepulsion(){const t=this,n=t.positions,i=t.nodes,r=t.disp,l=t.k,f=t.radii||[];n.forEach((w,R)=>{r[R]={x:0,y:0},n.forEach((H,Y)=>{if(R===Y||f[R]!==f[Y])return;let fe=w[0]-H[0],Le=w[1]-H[1],Me=Math.sqrt(fe*fe+Le*Le);if(Me===0){Me=1;const We=R>Y?1:-1;fe=.01*We,Le=.01*We}if(Me<t.nodeSizeFunc(i[R])/2+t.nodeSizeFunc(i[Y])/2){const We=l*l/Me;r[R].x+=fe/Me*We,r[R].y+=Le/Me*We}})})}updatePositions(){const t=this,n=t.positions,i=t.disp,r=t.speed,l=t.strictRadial,f=t.focusID,w=t.maxDisplace||t.width/10;l&&i.forEach((H,Y)=>{const fe=n[Y][0]-n[f][0],Le=n[Y][1]-n[f][1],Me=Math.sqrt(fe*fe+Le*Le);let We=Le/Me,Ze=-fe/Me;const He=Math.sqrt(H.x*H.x+H.y*H.y);let et=Math.acos((We*H.x+Ze*H.y)/He);et>Math.PI/2&&(et-=Math.PI/2,We*=-1,Ze*=-1);const it=Math.cos(et)*He;H.x=We*it,H.y=Ze*it});const R=t.radii;n.forEach((H,Y)=>{if(Y===f)return;const fe=Math.sqrt(i[Y].x*i[Y].x+i[Y].y*i[Y].y);if(fe>0&&Y!==f){const Le=Math.min(w*(r/DL),fe);if(H[0]+=i[Y].x/fe*Le,H[1]+=i[Y].y/fe*Le,l){let Me=H[0]-n[f][0],We=H[1]-n[f][1];const Ze=Math.sqrt(Me*Me+We*We);Me=Me/Ze*R[Y],We=We/Ze*R[Y],H[0]=n[f][0]+Me,H[1]=n[f][1]+We}}})}}function IL(e){const t=e.length,n=e[0].length,i=[];for(let r=0;r<t;r++){const l=[];for(let f=0;f<n;f++)e[r][f]!==0?l.push(1/(e[r][f]*e[r][f])):l.push(0);i.push(l)}return i}function NL(e,t){let n=-1;return e.forEach((i,r)=>{i.id===t&&(n=r)}),n}function C_(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}class TL extends de{constructor(t){super();this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const t=this,n=t.nodes,i=t.edges||[];if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}const l=t.linkDistance;let f=null;if(d(t.focusNode)){let _i=!1;for(let Hn=0;Hn<n.length;Hn++)n[Hn].id===t.focusNode&&(f=n[Hn],t.focusNode=f,_i=!0,Hn=n.length);_i||(f=null)}else f=t.focusNode;f||(f=n[0],t.focusNode=f);let w=NL(n,f.id);w<0&&(w=0),t.focusIndex=w;const R=C({nodes:n,edges:i},!1),H=c(R),Y=t.maxToFocus(H,w);t.handleInfinity(H,w,Y+1),t.distances=H;const fe=H[w],Le=t.width||500,Me=t.height||500;let We=Le-r[0]>r[0]?r[0]:Le-r[0],Ze=Me-r[1]>r[1]?r[1]:Me-r[1];We===0&&(We=Le/2),Ze===0&&(Ze=Me/2);const He=Ze>We?We:Ze,et=Math.max(...fe),it=[];fe.forEach((_i,Hn)=>{t.unitRadius||(t.unitRadius=He/et),it[Hn]=_i*t.unitRadius}),t.radii=it;const ut=t.eIdealDisMatrix();t.eIdealDistances=ut;const Mt=IL(ut);t.weights=Mt;let un=new LL({linkDistance:l,distances:ut}).layout();un.forEach(_i=>{B(_i[0])&&(_i[0]=Math.random()*l),B(_i[1])&&(_i[1]=Math.random()*l)}),t.positions=un,un.forEach((_i,Hn)=>{n[Hn].x=_i[0]+r[0],n[Hn].y=_i[1]+r[1]}),un.forEach(_i=>{_i[0]-=un[w][0],_i[1]-=un[w][1]}),t.run();const jn=t.preventOverlap,xn=t.nodeSize;let ei;const ti=t.strictRadial;if(jn){const _i=t.nodeSpacing;let Hn;T(_i)?Hn=()=>_i:N(_i)?Hn=_i:Hn=()=>0,xn?j(xn)?ei=fr=>(xn[0]>xn[1]?xn[0]:xn[1])+Hn(fr):ei=fr=>xn+Hn(fr):ei=fr=>fr.size?j(fr.size)?(fr.size[0]>fr.size[1]?fr.size[0]:fr.size[1])+Hn(fr):x(fr.size)?(fr.size.width>fr.size.height?fr.size.width:fr.size.height)+Hn(fr):fr.size+Hn(fr):10+Hn(fr);const Li={nodes:n,nodeSizeFunc:ei,adjMatrix:R,positions:un,radii:it,height:Me,width:Le,strictRadial:ti,focusID:w,iterations:t.maxPreventOverlapIteration||200,k:un.length/4.5};un=new xL(Li).layout()}return un.forEach((_i,Hn)=>{n[Hn].x=_i[0]+r[0],n[Hn].y=_i[1]+r[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i}}run(){const t=this,n=t.maxIteration,i=t.positions||[],r=t.weights||[],l=t.eIdealDistances||[],f=t.radii||[];for(let w=0;w<=n;w++){const R=w/n;t.oneIteration(R,i,f,l,r)}}oneIteration(t,n,i,r,l){const f=this,w=1-t,R=f.focusIndex;n.forEach((H,Y)=>{const fe=C_(H,[0,0]),Le=fe===0?0:1/fe;if(Y===R)return;let Me=0,We=0,Ze=0;n.forEach((et,it)=>{if(Y===it)return;const ut=C_(H,et),Mt=ut===0?0:1/ut,Rt=r[it][Y];Ze+=l[Y][it],Me+=l[Y][it]*(et[0]+Rt*(H[0]-et[0])*Mt),We+=l[Y][it]*(et[1]+Rt*(H[1]-et[1])*Mt)});const He=i[Y]===0?0:1/i[Y];Ze*=w,Ze+=t*He*He,Me*=w,Me+=t*He*H[0]*Le,H[0]=Me/Ze,We*=w,We+=t*He*H[1]*Le,H[1]=We/Ze})}eIdealDisMatrix(){const t=this,n=t.nodes;if(!n)return[];const i=t.distances,r=t.linkDistance,l=t.radii||[],f=t.unitRadius||50,w=[];return i&&i.forEach((R,H)=>{const Y=[];R.forEach((fe,Le)=>{if(H===Le)Y.push(0);else if(l[H]===l[Le])if(t.sortBy==="data")Y.push(fe*(Math.abs(H-Le)*t.sortStrength)/(l[H]/f));else if(t.sortBy){let Me=n[H][t.sortBy]||0,We=n[Le][t.sortBy]||0;d(Me)&&(Me=Me.charCodeAt(0)),d(We)&&(We=We.charCodeAt(0)),Y.push(fe*(Math.abs(Me-We)*t.sortStrength)/(l[H]/f))}else Y.push(fe*r/(l[H]/f));else{const Me=(r+f)/2;Y.push(fe*Me)}}),w.push(Y)}),w}handleInfinity(t,n,i){const r=t.length;for(let l=0;l<r;l++)if(t[n][l]===Infinity){t[n][l]=i,t[l][n]=i;for(let f=0;f<r;f++)t[l][f]!==Infinity&&t[n][f]===Infinity&&(t[n][f]=i+t[l][f],t[f][n]=i+t[l][f])}for(let l=0;l<r;l++)if(l!==n){for(let f=0;f<r;f++)if(t[l][f]===Infinity){let w=Math.abs(t[n][l]-t[n][f]);w=w===0?1:w,t[l][f]=w}}}maxToFocus(t,n){let i=0;for(let r=0;r<t[n].length;r++)t[n][r]!==Infinity&&(i=t[n][r]>i?t[n][r]:i);return i}getType(){return"radial"}}class b_ extends de{constructor(t){super();this.nodeSize=30,this.minNodeSpacing=10,this.nodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){var t,n;const i=this,{nodes:r,edges:l}=i,f=r.length;if(f===0){(t=i.onLayoutEnd)===null||t===void 0||t.call(i);return}!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);const w=i.center;if(f===1){r[0].x=w[0],r[0].y=w[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}const{nodeSize:R,nodeSpacing:H}=i,Y=[];let fe,Le=0;j(R)?fe=Math.max(R[0],R[1]):fe=R,j(H)?Le=Math.max(H[0],H[1]):T(H)&&(Le=H),r.forEach(ut=>{Y.push(ut);let Mt=fe;j(ut.size)?Mt=Math.max(ut.size[0],ut.size[1]):T(ut.size)?Mt=ut.size:x(ut.size)&&(Mt=Math.max(ut.size.width,ut.size.height)),fe=Math.max(fe,Mt),N(H)&&(Le=Math.max(H(ut),Le))}),i.clockwise=i.counterclockwise!==void 0?!i.counterclockwise:i.clockwise;const Me={},We={};if(Y.forEach((ut,Mt)=>{Me[ut.id]=ut,We[ut.id]=Mt}),(i.sortBy==="degree"||!d(i.sortBy)||Y[0][i.sortBy]===void 0)&&(i.sortBy="degree",!T(r[0].degree))){const ut=D(r.length,We,l);Y.forEach((Mt,Rt)=>{Mt.degree=ut[Rt]})}Y.sort((ut,Mt)=>Mt[i.sortBy]-ut[i.sortBy]),i.maxValueNode=Y[0],i.maxLevelDiff=i.maxLevelDiff||i.maxValueNode[i.sortBy]/4;const Ze=[[]];let He=Ze[0];Y.forEach(ut=>{if(He.length>0){const Mt=Math.abs(He[0][i.sortBy]-ut[i.sortBy]);i.maxLevelDiff&&Mt>=i.maxLevelDiff&&(He=[],Ze.push(He))}He.push(ut)});let et=fe+(Le||i.minNodeSpacing);if(!i.preventOverlap){const ut=Ze.length>0&&Ze[0].length>1,Rt=(Math.min(i.width,i.height)/2-et)/(Ze.length+(ut?1:0));et=Math.min(et,Rt)}let it=0;if(Ze.forEach(ut=>{let Mt=i.sweep;Mt===void 0&&(Mt=2*Math.PI-2*Math.PI/ut.length);const Rt=ut.dTheta=Mt/Math.max(1,ut.length-1);if(ut.length>1&&i.preventOverlap){const un=Math.cos(Rt)-Math.cos(0),jn=Math.sin(Rt)-Math.sin(0),xn=Math.sqrt(et*et/(un*un+jn*jn));it=Math.max(xn,it)}ut.r=it,it+=et}),i.equidistant){let ut=0,Mt=0;for(let Rt=0;Rt<Ze.length;Rt++){const jn=Ze[Rt].r-Mt;ut=Math.max(ut,jn)}Mt=0,Ze.forEach((Rt,un)=>{un===0&&(Mt=Rt.r),Rt.r=Mt,Mt+=ut})}return Ze.forEach(ut=>{const Mt=ut.dTheta,Rt=ut.r;ut.forEach((un,jn)=>{const xn=i.startAngle+(i.clockwise?1:-1)*Mt*jn;un.x=w[0]+Rt*Math.cos(xn),un.y=w[1]+Rt*Math.sin(xn)})}),i.onLayoutEnd&&i.onLayoutEnd(),{nodes:r,edges:l}}getType(){return"concentric"}}class y_ extends de{constructor(t){super();this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const t=this,{nodes:n,edges:i=[]}=t,r=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}const l=t.linkDistance,f=C({nodes:n,edges:i},!1),w=c(f);t.handleInfinity(w);const R=M(w,l);t.scaledDistances=R;const H=t.runMDS();return t.positions=H,H.forEach((Y,fe)=>{n[fe].x=Y[0]+r[0],n[fe].y=Y[1]+r[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i}}runMDS(){const t=this,n=2,i=t.scaledDistances,r=Bo.mul(Bo.pow(i,2),-.5),l=r.mean("row"),f=r.mean("column"),w=r.mean();r.add(w).subRowVector(l).subColumnVector(f);const R=new __(r),H=Bo.sqrt(R.diagonalMatrix).diagonal();return R.leftSingularVectors.toJSON().map(Y=>Bo.mul([Y],[H]).toJSON()[0].splice(0,n))}handleInfinity(t){let n=-999999;t.forEach(i=>{i.forEach(r=>{r!==Infinity&&n<r&&(n=r)})}),t.forEach((i,r)=>{i.forEach((l,f)=>{l===Infinity&&(t[r][f]=n)})})}getType(){return"mds"}}const ML=800;class AL extends de{constructor(t){super();this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.animate=!0,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}}execute(){var t,n;const i=this,r=i.nodes;if(i.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(i.timeInterval),!r||r.length===0){(t=i.onLayoutEnd)===null||t===void 0||t.call(i);return}!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);const l=i.center;if(r.length===1){r[0].x=l[0],r[0].y=l[1],(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}const f={},w={};return r.forEach((R,H)=>{T(R.x)||(R.x=Math.random()*this.width),T(R.y)||(R.y=Math.random()*this.height),f[R.id]=R,w[R.id]=H}),i.nodeMap=f,i.nodeIdxMap=w,i.run()}run(){var t;const n=this,i=n.nodes;if(!i)return;const{edges:r,maxIteration:l,workerEnabled:f,clustering:w,animate:R}=n,H={};if(w&&i.forEach(Y=>{H[Y.cluster]===void 0&&(H[Y.cluster]={name:Y.cluster,cx:0,cy:0,count:0})}),f||!R){for(let Y=0;Y<l;Y++)n.runOneStep(H);(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window=="undefined")return;let Y=0;this.timeInterval=window.setInterval(()=>{var fe;n.runOneStep(H),Y++,Y>=l&&((fe=n.onLayoutEnd)===null||fe===void 0||fe.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:i,edges:r}}runOneStep(t){var n;const i=this,r=i.nodes;if(!r)return;const{edges:l,center:f,gravity:w,speed:R,clustering:H}=i,Y=i.height*i.width,fe=Math.sqrt(Y)/10,Le=Y/(r.length+1),Me=Math.sqrt(Le),We=[];if(r.forEach((Ze,He)=>{We[He]={x:0,y:0}}),i.applyCalculate(r,l,We,Me,Le),H){for(const He in t)t[He].cx=0,t[He].cy=0,t[He].count=0;r.forEach(He=>{const et=t[He.cluster];T(He.x)&&(et.cx+=He.x),T(He.y)&&(et.cy+=He.y),et.count++});for(const He in t)t[He].cx/=t[He].count,t[He].cy/=t[He].count;const Ze=i.clusterGravity||w;r.forEach((He,et)=>{if(!T(He.x)||!T(He.y))return;const it=t[He.cluster],ut=Math.sqrt((He.x-it.cx)*(He.x-it.cx)+(He.y-it.cy)*(He.y-it.cy)),Mt=Me*Ze;We[et].x-=Mt*(He.x-it.cx)/ut,We[et].y-=Mt*(He.y-it.cy)/ut})}r.forEach((Ze,He)=>{if(!T(Ze.x)||!T(Ze.y))return;const et=.01*Me*w;We[He].x-=et*(Ze.x-f[0]),We[He].y-=et*(Ze.y-f[1])}),r.forEach((Ze,He)=>{if(T(Ze.fx)&&T(Ze.fy)){Ze.x=Ze.fx,Ze.y=Ze.fy;return}if(!T(Ze.x)||!T(Ze.y))return;const et=Math.sqrt(We[He].x*We[He].x+We[He].y*We[He].y);if(et>0){const it=Math.min(fe*(R/ML),et);Ze.x+=We[He].x/et*it,Ze.y+=We[He].y/et*it}}),(n=i.tick)===null||n===void 0||n.call(i)}applyCalculate(t,n,i,r,l){const f=this;f.calRepulsive(t,i,l),n&&f.calAttractive(n,i,r)}calRepulsive(t,n,i){t.forEach((r,l)=>{n[l]={x:0,y:0},t.forEach((f,w)=>{if(l===w||!T(r.x)||!T(f.x)||!T(r.y)||!T(f.y))return;let R=r.x-f.x,H=r.y-f.y,Y=R*R+H*H;if(Y===0){Y=1;const Le=l>w?1:-1;R=.01*Le,H=.01*Le}const fe=i/Y;n[l].x+=R*fe,n[l].y+=H*fe})})}calAttractive(t,n,i){t.forEach(r=>{const l=g(r,"source"),f=g(r,"target");if(!l||!f)return;const w=this.nodeIdxMap[l],R=this.nodeIdxMap[f];if(w===R)return;const H=this.nodeMap[l],Y=this.nodeMap[f];if(!T(Y.x)||!T(H.x)||!T(Y.y)||!T(H.y))return;const fe=Y.x-H.x,Le=Y.y-H.y,Me=Math.sqrt(fe*fe+Le*Le),We=Me*Me/i;n[R].x-=fe/Me*We,n[R].y-=Le/Me*We,n[w].x+=fe/Me*We,n[w].y+=Le/Me*We})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"fruchterman"}}function ao(e,t,n,i){!n||Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}var Qr=a(6610),yo=a(5991);function lo(e,t,n,i,r){var l={};return Object.keys(i).forEach(function(f){l[f]=i[f]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=n.slice().reverse().reduce(function(f,w){return w(e,t,f)||f},l),r&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(r):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(e,t,l),l=null),l}var pT=a(28660),RL=a(87757),Hr=a.n(RL),fs=a(92137),PL=-1,OL=1;function $u(){return OL++}var kh=function e(t){(0,Qr.Z)(this,e)},Fh=function(){function e(t){(0,Qr.Z)(this,e),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=t}return(0,yo.Z)(e,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(n){return this.lookup[n]>-1}},{key:"create",value:function(n,i){this.lookup[n]=this.components.length;var r=new this.clazz(i||{});return this.components.push(r),this.entities.push(n),r}},{key:"remove",value:function(n){var i=this.lookup[n];i>-1&&i<this.components.length-1&&(this.components[i]=this.components[this.components.length-1],this.entities[i]=this.entities[this.entities.length-1],this.lookup[this.entities[i]]=i),this.components.pop(),this.entities.pop(),delete this.lookup[n]}},{key:"removeKeepSorted",value:function(n){var i=this.lookup[n];if(i>-1){var r=this.entities[i];if(i<this.components.length-1){for(var l=i+1;l<this.components.length;++l)this.components[l-1]=this.components[l];for(var f=i+1;f<this.entities.length;++f)this.entities[f-1]=this.entities[f],this.lookup[this.entities[f-1]]=f-1}this.components.pop(),this.entities.pop(),delete this.lookup[r]}}},{key:"moveItem",value:function(n,i){if(n!==i){for(var r=this.components[n],l=this.entities[n],f=n<i?1:-1,w=n;w!==i;w+=f){var R=w+f;this.components[w]=this.components[R],this.entities[w]=this.entities[R],this.lookup[this.entities[w]]=w}this.components[i]=r,this.entities[i]=l,this.lookup[l]=i}}},{key:"getEntity",value:function(n){return this.entities[n]}},{key:"getComponent",value:function(n){return this.components[n]}},{key:"getComponentByEntity",value:function(n){var i=this.lookup[n];return i>-1?this.components[i]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(n){for(var i=0,r=Object.keys(this.lookup);i<r.length;i++){var l=r[i],f=Number(l);if(this.lookup[f]===n)return f}return PL}},{key:"find",value:function(n){for(var i=0;i<this.getCount();i++){var r=this.getComponent(i);if(n(r,i))return r}return null}},{key:"findIndex",value:function(n){for(var i=0;i<this.getCount();i++){var r=this.getComponent(i);if(n(r,i))return i}return-1}},{key:"forEach",value:function(n){for(var i=0,r=Object.keys(this.lookup);i<r.length;i++){var l=r[i],f=Number(l),w=this.lookup[f];n(f,this.getComponent(w))}}},{key:"forEachAsync",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){var l,f,w,R,H;return Hr().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:l=0,f=Object.keys(this.lookup);case 1:if(!(l<f.length)){fe.next=10;break}return w=f[l],R=Number(w),H=this.lookup[R],fe.next=7,r(R,this.getComponent(H));case 7:l++,fe.next=1;break;case 10:case"end":return fe.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"map",value:function(n){for(var i=[],r=0,l=Object.keys(this.lookup);r<l.length;r++){var f=l[r],w=Number(f),R=this.lookup[w];i.push(n(w,this.getComponent(R)))}return i}}]),e}(),Bm=a(28481),er=a(86700),Bi={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},kL=function e(){(0,Qr.Z)(this,e),this.index=void 0},FL=function e(){(0,Qr.Z)(this,e),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},BL=function(){function e(){(0,Qr.Z)(this,e),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return(0,yo.Z)(e,[{key:"read",value:function(n){return this.reads.find(function(i){return i.index===n.index})||this.reads.push(n),n}},{key:"sample",value:function(n){return this.read(n),n}},{key:"write",value:function(n,i){var r=this.writes.find(function(R){return R.index===i.index});if(r)return i;var l=n.getResourceNode(i);l.resource.version++,l.resource.imported&&(this.hasSideEffect=!0);var f=n.createResourceNode(l.resource),w=n.getResourceNode(f);return w.writer=this,this.writes.push(f),f}}]),e}(),Ll=a(10379),Dl=a(46070),xs=a(77608),WL=function e(){(0,Qr.Z)(this,e),this.first=void 0,this.last=void 0};function VL(e){var t=UL();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function UL(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var w_=function(e){(0,Ll.Z)(n,e);var t=VL(n);function n(){var i;(0,Qr.Z)(this,n);for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return i=t.call.apply(t,[this].concat(l)),i.version=0,i.refs=0,i.name=void 0,i.imported=void 0,i.priority=void 0,i.discardStart=!0,i.discardEnd=!1,i.descriptor=void 0,i.resource=void 0,i}return(0,yo.Z)(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){!this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){!this.imported}}]),n}(WL),zL=function e(){(0,Qr.Z)(this,e),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},S_,E_,L_,xv,D_,x_;function Zc(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=HL(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(H){throw H},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,f=!1,w;return{s:function(){n=e[Symbol.iterator]()},n:function(){var H=n.next();return l=H.done,H},e:function(H){f=!0,w=H},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(f)throw w}}}}function HL(e,t){if(!!e){if(typeof e=="string")return I_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I_(e,t)}}function I_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var GL=(S_=(0,er.b2)(),E_=(0,er.f3)(Bi.RenderEngine),S_(L_=(xv=(x_=function(){function e(){(0,Qr.Z)(this,e),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],ao(this,"engine",D_,this)}return(0,yo.Z)(e,[{key:"execute",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){return Hr().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.compile(),f.next=3,this.executePassNodes(r);case 3:case"end":return f.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(n){n.tearDown&&n.tearDown()}),this.reset()}},{key:"addPass",value:function(n,i,r,l){var f=new FL;f.execute=r,l&&(f.tearDown=l),f.name=n;var w=new BL;return w.name=n,this.passNodes.push(w),this.frameGraphPasses.push(f),i(this,w,f),f}},{key:"getPass",value:function(n){return this.frameGraphPasses.find(function(i){return i.name===n})}},{key:"compile",value:function(){var n=this,i=Zc(this.passNodes),r;try{for(i.s();!(r=i.n()).done;){var l=r.value;l.refCount=l.writes.length+(l.hasSideEffect?1:0),l.reads.forEach(function(Mo){n.resourceNodes[Mo.index].readerCount++})}}catch(Mo){i.e(Mo)}finally{i.f()}var f=[],w=Zc(this.resourceNodes),R;try{for(w.s();!(R=w.n()).done;){var H=R.value;H.readerCount===0&&f.push(H)}}catch(Mo){w.e(Mo)}finally{w.f()}for(;f.length;){var Y=f.pop(),fe=Y&&Y.writer;if(fe&&--fe.refCount==0){var Le=Zc(fe.reads),Me;try{for(Le.s();!(Me=Le.n()).done;){var We=Me.value,Ze=this.resourceNodes[We.index];--Ze.readerCount==0&&f.push(Ze)}}catch(Mo){Le.e(Mo)}finally{Le.f()}}}this.resourceNodes.forEach(function(Mo){Mo.resource.refs+=Mo.readerCount});var He=Zc(this.passNodes),et;try{for(He.s();!(et=He.n()).done;){var it=et.value;if(!!it.refCount){var ut=Zc(it.reads),Mt;try{for(ut.s();!(Mt=ut.n()).done;){var Rt=Mt.value,un=this.resourceNodes[Rt.index].resource;un.first=un.first?un.first:it,un.last=it}}catch(Mo){ut.e(Mo)}finally{ut.f()}var jn=Zc(it.writes),xn;try{for(jn.s();!(xn=jn.n()).done;){var ei=xn.value,ti=this.resourceNodes[ei.index].resource;ti.first=ti.first?ti.first:it,ti.last=it}}catch(Mo){jn.e(Mo)}finally{jn.f()}}}}catch(Mo){He.e(Mo)}finally{He.f()}for(var _i=0;_i<2;_i++){var Hn=Zc(this.resourceNodes),Li;try{for(Hn.s();!(Li=Hn.n()).done;){var yi=Li.value,fr=yi.resource;if(fr.priority===_i&&fr.refs){var To=fr.first,Oo=fr.last;To&&Oo&&(To.devirtualize.push(fr),Oo.destroy.push(fr))}}}catch(Mo){Hn.e(Mo)}finally{Hn.f()}}}},{key:"executePassNodes",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){var l,f,w,R,H,Y,fe,Le,Me,We,Ze,He,et,it,ut,Mt,Rt;return Hr().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:l=Zc(this.passNodes.entries()),jn.prev=1,l.s();case 3:if((f=l.n()).done){jn.next=18;break}if(w=(0,Bm.Z)(f.value,2),R=w[0],H=w[1],!H.refCount){jn.next=16;break}Y=Zc(H.devirtualize);try{for(Y.s();!(fe=Y.n()).done;)Le=fe.value,Le.preExecuteDevirtualize(this.engine)}catch(xn){Y.e(xn)}finally{Y.f()}Me=Zc(H.destroy);try{for(Me.s();!(We=Me.n()).done;)Ze=We.value,Ze.preExecuteDestroy(this.engine)}catch(xn){Me.e(xn)}finally{Me.f()}return jn.next=12,this.frameGraphPasses[R].execute(this,this.frameGraphPasses[R],r);case 12:He=Zc(H.devirtualize);try{for(He.s();!(et=He.n()).done;)it=et.value,it.postExecuteDevirtualize(this.engine)}catch(xn){He.e(xn)}finally{He.f()}ut=Zc(H.destroy);try{for(ut.s();!(Mt=ut.n()).done;)Rt=Mt.value,Rt.postExecuteDestroy(this.engine)}catch(xn){ut.e(xn)}finally{ut.f()}case 16:jn.next=3;break;case 18:jn.next=23;break;case 20:jn.prev=20,jn.t0=jn.catch(1),l.e(jn.t0);case 23:return jn.prev=23,l.f(),jn.finish(23);case 26:this.reset();case 27:case"end":return jn.stop()}},i,this,[[1,20,23,26]])}));function n(i){return t.apply(this,arguments)}return n}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(n){return this.resourceNodes[n.index]}},{key:"createResourceNode",value:function(n){var i=new zL;i.resource=n,i.version=n.version,this.resourceNodes.push(i);var r=new kL;return r.index=this.resourceNodes.length-1,r}},{key:"createTexture",value:function(n,i,r){var l=new w_;return l.name=i,l.descriptor=r,this.createResourceNode(l)}},{key:"createRenderTarget",value:function(n,i,r){var l=new w_;return l.name=i,l.descriptor=r,this.createResourceNode(l)}},{key:"present",value:function(n){this.addPass("Present",function(i,r){r.read(n),r.hasSideEffect=!0},(0,fs.Z)(Hr().mark(function i(){return Hr().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:case"end":return l.stop()}},i)})))}}]),e}(),x_),D_=lo(xv.prototype,"engine",[E_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xv))||L_),xi=a(96156),Ma=a(63349),Dd=1e-6,cl=typeof Float32Array!="undefined"?Float32Array:Array,vT=Math.random;function _T(e){cl=e}var jL=Math.PI/180;function CT(e){return e*jL}function bT(e,t){return Math.abs(e-t)<=Dd*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function pg(){var e=new cl(4);return cl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function KL(e){var t=new cl(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function N_(e,t,n,i){var r=new cl(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function $L(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ZL(e,t,n,i,r){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e}function XL(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function yT(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function wT(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function ST(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function ET(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function LT(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function DT(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function xT(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function IT(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function YL(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function NT(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e}function TT(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],l=t[3]-e[3];return Math.hypot(n,i,r,l)}function MT(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],l=t[3]-e[3];return n*n+i*i+r*r+l*l}function QL(e){var t=e[0],n=e[1],i=e[2],r=e[3];return Math.hypot(t,n,i,r)}function JL(e){var t=e[0],n=e[1],i=e[2],r=e[3];return t*t+n*n+i*i+r*r}function AT(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function RT(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function qL(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=n*n+i*i+r*r+l*l;return f>0&&(f=1/Math.sqrt(f)),e[0]=n*f,e[1]=i*f,e[2]=r*f,e[3]=l*f,e}function eD(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function PT(e,t,n,i){var r=n[0]*i[1]-n[1]*i[0],l=n[0]*i[2]-n[2]*i[0],f=n[0]*i[3]-n[3]*i[0],w=n[1]*i[2]-n[2]*i[1],R=n[1]*i[3]-n[3]*i[1],H=n[2]*i[3]-n[3]*i[2],Y=t[0],fe=t[1],Le=t[2],Me=t[3];return e[0]=fe*H-Le*R+Me*w,e[1]=-(Y*H)+Le*f-Me*l,e[2]=Y*R-fe*f+Me*r,e[3]=-(Y*w)+fe*l-Le*r,e}function tD(e,t,n,i){var r=t[0],l=t[1],f=t[2],w=t[3];return e[0]=r+i*(n[0]-r),e[1]=l+i*(n[1]-l),e[2]=f+i*(n[2]-f),e[3]=w+i*(n[3]-w),e}function OT(e,t){t=t||1;var n,i,r,l,f,w;do n=glMatrix.RANDOM()*2-1,i=glMatrix.RANDOM()*2-1,f=n*n+i*i;while(f>=1);do r=glMatrix.RANDOM()*2-1,l=glMatrix.RANDOM()*2-1,w=r*r+l*l;while(w>=1);var R=Math.sqrt((1-f)/w);return e[0]=t*n,e[1]=t*i,e[2]=t*r*R,e[3]=t*l*R,e}function vg(e,t,n){var i=t[0],r=t[1],l=t[2],f=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*l+n[12]*f,e[1]=n[1]*i+n[5]*r+n[9]*l+n[13]*f,e[2]=n[2]*i+n[6]*r+n[10]*l+n[14]*f,e[3]=n[3]*i+n[7]*r+n[11]*l+n[15]*f,e}function kT(e,t,n){var i=t[0],r=t[1],l=t[2],f=n[0],w=n[1],R=n[2],H=n[3],Y=H*i+w*l-R*r,fe=H*r+R*i-f*l,Le=H*l+f*r-w*i,Me=-f*i-w*r-R*l;return e[0]=Y*H+Me*-f+fe*-R-Le*-w,e[1]=fe*H+Me*-w+Le*-f-Y*-R,e[2]=Le*H+Me*-R+Y*-w-fe*-f,e[3]=t[3],e}function FT(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function BT(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function nD(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function iD(e,t){var n=e[0],i=e[1],r=e[2],l=e[3],f=t[0],w=t[1],R=t[2],H=t[3];return Math.abs(n-f)<=Dd*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-w)<=Dd*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(r-R)<=Dd*Math.max(1,Math.abs(r),Math.abs(R))&&Math.abs(l-H)<=Dd*Math.max(1,Math.abs(l),Math.abs(H))}var WT=null,VT=null,UT=null,zT=null,HT=null,GT=null,jT=null,KT=function(){var e=pg();return function(t,n,i,r,l,f){var w,R;for(n||(n=4),i||(i=0),r?R=Math.min(r*n+i,t.length):R=t.length,w=i;w<R;w+=n)e[0]=t[w],e[1]=t[w+1],e[2]=t[w+2],e[3]=t[w+3],l(e,e,f),t[w]=e[0],t[w+1]=e[1],t[w+2]=e[2],t[w+3]=e[3];return t}}();function _g(){var e=new cl(9);return cl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function rD(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function $T(e){var t=new glMatrix.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ZT(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function XT(e,t,n,i,r,l,f,w,R){var H=new glMatrix.ARRAY_TYPE(9);return H[0]=e,H[1]=t,H[2]=n,H[3]=i,H[4]=r,H[5]=l,H[6]=f,H[7]=w,H[8]=R,H}function YT(e,t,n,i,r,l,f,w,R,H){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=l,e[5]=f,e[6]=w,e[7]=R,e[8]=H,e}function QT(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function JT(e,t){if(e===t){var n=t[1],i=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function qT(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=t[4],w=t[5],R=t[6],H=t[7],Y=t[8],fe=Y*f-w*H,Le=-Y*l+w*R,Me=H*l-f*R,We=n*fe+i*Le+r*Me;return We?(We=1/We,e[0]=fe*We,e[1]=(-Y*i+r*H)*We,e[2]=(w*i-r*f)*We,e[3]=Le*We,e[4]=(Y*n-r*R)*We,e[5]=(-w*n+r*l)*We,e[6]=Me*We,e[7]=(-H*n+i*R)*We,e[8]=(f*n-i*l)*We,e):null}function eM(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=t[4],w=t[5],R=t[6],H=t[7],Y=t[8];return e[0]=f*Y-w*H,e[1]=r*H-i*Y,e[2]=i*w-r*f,e[3]=w*R-l*Y,e[4]=n*Y-r*R,e[5]=r*l-n*w,e[6]=l*H-f*R,e[7]=i*R-n*H,e[8]=n*f-i*l,e}function tM(e){var t=e[0],n=e[1],i=e[2],r=e[3],l=e[4],f=e[5],w=e[6],R=e[7],H=e[8];return t*(H*l-f*R)+n*(-H*r+f*w)+i*(R*r-l*w)}function nM(e,t,n){var i=t[0],r=t[1],l=t[2],f=t[3],w=t[4],R=t[5],H=t[6],Y=t[7],fe=t[8],Le=n[0],Me=n[1],We=n[2],Ze=n[3],He=n[4],et=n[5],it=n[6],ut=n[7],Mt=n[8];return e[0]=Le*i+Me*f+We*H,e[1]=Le*r+Me*w+We*Y,e[2]=Le*l+Me*R+We*fe,e[3]=Ze*i+He*f+et*H,e[4]=Ze*r+He*w+et*Y,e[5]=Ze*l+He*R+et*fe,e[6]=it*i+ut*f+Mt*H,e[7]=it*r+ut*w+Mt*Y,e[8]=it*l+ut*R+Mt*fe,e}function iM(e,t,n){var i=t[0],r=t[1],l=t[2],f=t[3],w=t[4],R=t[5],H=t[6],Y=t[7],fe=t[8],Le=n[0],Me=n[1];return e[0]=i,e[1]=r,e[2]=l,e[3]=f,e[4]=w,e[5]=R,e[6]=Le*i+Me*f+H,e[7]=Le*r+Me*w+Y,e[8]=Le*l+Me*R+fe,e}function rM(e,t,n){var i=t[0],r=t[1],l=t[2],f=t[3],w=t[4],R=t[5],H=t[6],Y=t[7],fe=t[8],Le=Math.sin(n),Me=Math.cos(n);return e[0]=Me*i+Le*f,e[1]=Me*r+Le*w,e[2]=Me*l+Le*R,e[3]=Me*f-Le*i,e[4]=Me*w-Le*r,e[5]=Me*R-Le*l,e[6]=H,e[7]=Y,e[8]=fe,e}function oM(e,t,n){var i=n[0],r=n[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function sM(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function aM(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=-n,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function lM(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function cM(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function uM(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=n+n,w=i+i,R=r+r,H=n*f,Y=i*f,fe=i*w,Le=r*f,Me=r*w,We=r*R,Ze=l*f,He=l*w,et=l*R;return e[0]=1-fe-We,e[3]=Y-et,e[6]=Le+He,e[1]=Y+et,e[4]=1-H-We,e[7]=Me-Ze,e[2]=Le-He,e[5]=Me+Ze,e[8]=1-H-fe,e}function oD(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=t[4],w=t[5],R=t[6],H=t[7],Y=t[8],fe=t[9],Le=t[10],Me=t[11],We=t[12],Ze=t[13],He=t[14],et=t[15],it=n*w-i*f,ut=n*R-r*f,Mt=n*H-l*f,Rt=i*R-r*w,un=i*H-l*w,jn=r*H-l*R,xn=Y*Ze-fe*We,ei=Y*He-Le*We,ti=Y*et-Me*We,_i=fe*He-Le*Ze,Hn=fe*et-Me*Ze,Li=Le*et-Me*He,yi=it*Li-ut*Hn+Mt*_i+Rt*ti-un*ei+jn*xn;return yi?(yi=1/yi,e[0]=(w*Li-R*Hn+H*_i)*yi,e[1]=(R*ti-f*Li-H*ei)*yi,e[2]=(f*Hn-w*ti+H*xn)*yi,e[3]=(r*Hn-i*Li-l*_i)*yi,e[4]=(n*Li-r*ti+l*ei)*yi,e[5]=(i*ti-n*Hn-l*xn)*yi,e[6]=(Ze*jn-He*un+et*Rt)*yi,e[7]=(He*Mt-We*jn-et*ut)*yi,e[8]=(We*un-Ze*Mt+et*it)*yi,e):null}function dM(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function hM(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function fM(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function gM(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function mM(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function pM(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function vM(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e[6]=t[6]+n[6]*i,e[7]=t[7]+n[7]*i,e[8]=t[8]+n[8]*i,e}function _M(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function CM(e,t){var n=e[0],i=e[1],r=e[2],l=e[3],f=e[4],w=e[5],R=e[6],H=e[7],Y=e[8],fe=t[0],Le=t[1],Me=t[2],We=t[3],Ze=t[4],He=t[5],et=t[6],it=t[7],ut=t[8];return Math.abs(n-fe)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(fe))&&Math.abs(i-Le)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(Le))&&Math.abs(r-Me)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(Me))&&Math.abs(l-We)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(We))&&Math.abs(f-Ze)<=glMatrix.EPSILON*Math.max(1,Math.abs(f),Math.abs(Ze))&&Math.abs(w-He)<=glMatrix.EPSILON*Math.max(1,Math.abs(w),Math.abs(He))&&Math.abs(R-et)<=glMatrix.EPSILON*Math.max(1,Math.abs(R),Math.abs(et))&&Math.abs(H-it)<=glMatrix.EPSILON*Math.max(1,Math.abs(H),Math.abs(it))&&Math.abs(Y-ut)<=glMatrix.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ut))}var bM=null,yM=null;function Is(){var e=new cl(3);return cl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function xd(e){var t=new cl(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Wm(e){var t=e[0],n=e[1],i=e[2];return Math.hypot(t,n,i)}function es(e,t,n){var i=new cl(3);return i[0]=e,i[1]=t,i[2]=n,i}function ul(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Rf(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}function Id(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Iv(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function sD(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function wM(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function SM(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function EM(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function LM(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function DM(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function xM(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Cg(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function IM(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function aD(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return Math.hypot(n,i,r)}function NM(e,t){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return n*n+i*i+r*r}function TM(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i}function MM(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function AM(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function bg(e,t){var n=t[0],i=t[1],r=t[2],l=n*n+i*i+r*r;return l>0&&(l=1/Math.sqrt(l)),e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e}function yg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Nv(e,t,n){var i=t[0],r=t[1],l=t[2],f=n[0],w=n[1],R=n[2];return e[0]=r*R-l*w,e[1]=l*f-i*R,e[2]=i*w-r*f,e}function Bh(e,t,n,i){var r=t[0],l=t[1],f=t[2];return e[0]=r+i*(n[0]-r),e[1]=l+i*(n[1]-l),e[2]=f+i*(n[2]-f),e}function RM(e,t,n,i,r,l){var f=l*l,w=f*(2*l-3)+1,R=f*(l-2)+l,H=f*(l-1),Y=f*(3-2*l);return e[0]=t[0]*w+n[0]*R+i[0]*H+r[0]*Y,e[1]=t[1]*w+n[1]*R+i[1]*H+r[1]*Y,e[2]=t[2]*w+n[2]*R+i[2]*H+r[2]*Y,e}function PM(e,t,n,i,r,l){var f=1-l,w=f*f,R=l*l,H=w*f,Y=3*l*w,fe=3*R*f,Le=R*l;return e[0]=t[0]*H+n[0]*Y+i[0]*fe+r[0]*Le,e[1]=t[1]*H+n[1]*Y+i[1]*fe+r[1]*Le,e[2]=t[2]*H+n[2]*Y+i[2]*fe+r[2]*Le,e}function OM(e,t){t=t||1;var n=glMatrix.RANDOM()*2*Math.PI,i=glMatrix.RANDOM()*2-1,r=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*r,e[1]=Math.sin(n)*r,e[2]=i*t,e}function Tv(e,t,n){var i=t[0],r=t[1],l=t[2],f=n[3]*i+n[7]*r+n[11]*l+n[15];return f=f||1,e[0]=(n[0]*i+n[4]*r+n[8]*l+n[12])/f,e[1]=(n[1]*i+n[5]*r+n[9]*l+n[13])/f,e[2]=(n[2]*i+n[6]*r+n[10]*l+n[14])/f,e}function Mv(e,t,n){var i=t[0],r=t[1],l=t[2];return e[0]=i*n[0]+r*n[3]+l*n[6],e[1]=i*n[1]+r*n[4]+l*n[7],e[2]=i*n[2]+r*n[5]+l*n[8],e}function lD(e,t,n){var i=n[0],r=n[1],l=n[2],f=n[3],w=t[0],R=t[1],H=t[2],Y=r*H-l*R,fe=l*w-i*H,Le=i*R-r*w,Me=r*Le-l*fe,We=l*Y-i*Le,Ze=i*fe-r*Y,He=f*2;return Y*=He,fe*=He,Le*=He,Me*=2,We*=2,Ze*=2,e[0]=w+Y+Me,e[1]=R+fe+We,e[2]=H+Le+Ze,e}function kM(e,t,n,i){var r=[],l=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],l[0]=r[0],l[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),l[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function FM(e,t,n,i){var r=[],l=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],l[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),l[1]=r[1],l[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function BM(e,t,n,i){var r=[],l=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],l[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),l[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),l[2]=r[2],e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function WM(e,t){var n=e[0],i=e[1],r=e[2],l=t[0],f=t[1],w=t[2],R=Math.sqrt(n*n+i*i+r*r),H=Math.sqrt(l*l+f*f+w*w),Y=R*H,fe=Y&&yg(e,t)/Y;return Math.acos(Math.min(Math.max(fe,-1),1))}function VM(e){return e[0]=0,e[1]=0,e[2]=0,e}function UM(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function zM(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function HM(e,t){var n=e[0],i=e[1],r=e[2],l=t[0],f=t[1],w=t[2];return Math.abs(n-l)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-f)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-w)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(w))}var Av=Iv,GM=null,jM=null,T_=aD,KM=null,M_=Wm,$M=null,ZM=function(){var e=Is();return function(t,n,i,r,l,f){var w,R;for(n||(n=3),i||(i=0),r?R=Math.min(r*n+i,t.length):R=t.length,w=i;w<R;w+=n)e[0]=t[w],e[1]=t[w+1],e[2]=t[w+2],l(e,e,f),t[w]=e[0],t[w+1]=e[1],t[w+2]=e[2];return t}}(),Pf=a(90484),cD=9007199254740991,uD="[object Arguments]",dD="[object Array]",hD="[object Boolean]",fD="[object Date]",gD="[object Error]",mD="[object Function]",pD="[object Map]",vD="[object Number]",_D="[object Object]",CD="[object RegExp]",bD="[object Set]",yD="[object String]",wD="[object WeakMap]",SD="[object ArrayBuffer]",ED="[object DataView]",LD="[object Float32Array]",DD="[object Float64Array]",xD="[object Int8Array]",ID="[object Int16Array]",ND="[object Int32Array]",TD="[object Uint8Array]",MD="[object Uint8ClampedArray]",AD="[object Uint16Array]",RD="[object Uint32Array]",ga={};ga[LD]=ga[DD]=ga[xD]=ga[ID]=ga[ND]=ga[TD]=ga[MD]=ga[AD]=ga[RD]=!0,ga[uD]=ga[dD]=ga[SD]=ga[hD]=ga[ED]=ga[fD]=ga[gD]=ga[mD]=ga[pD]=ga[vD]=ga[_D]=ga[CD]=ga[bD]=ga[yD]=ga[wD]=!1;function XM(e){return function(t){return e(t)}}var PD=Object.prototype,OD=PD.toString;function kD(e){return BD(e)&&FD(e.length)&&!!ga[OD.call(e)]}function FD(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=cD}function BD(e){return!!e&&(0,Pf.Z)(e)==="object"}var A_=kD;function R_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function P_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R_(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function WD(e){var t=VD();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function VD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var UD=function(e){(0,Ll.Z)(n,e);var t=WD(n);function n(i){var r;return(0,Qr.Z)(this,n),r=t.call(this,i),r.dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=0,r.maxInstancedCount=void 0,r.aabb=void 0,r.entity=void 0,Object.assign((0,Ma.Z)(r),i),r}return(0,yo.Z)(n,[{key:"setAttribute",value:function(r,l,f,w){var R=this.attributes.find(function(H){return H.name===r});return R?(R.data=l,R.dirty=!0):this.attributes.push(P_(P_({dirty:!0,name:r,data:l},f),{},{bufferGetter:w})),this.dirty=!0,this}},{key:"setIndex",value:function(r){return this.indices=new Uint32Array(r.buffer?r.buffer:r),this.dirty=!0,this}},{key:"applyMatrix",value:function(r){var l=this.attributes.find(function(Le){var Me=Le.name;return Me==="position"}),f=this.attributes.find(function(Le){var Me=Le.name;return Me==="normal"});if(l&&(l.dirty=!0,l.data&&l.data.length))for(var w=0;w<l.data.length;w+=3){var R=N_(l.data[w],l.data[w+1],l.data[w+2],1);vg(R,R,r),A_(l.data)?l.data.set([R[0],R[1],R[2]],w):(l.data[w]=R[0],l.data[w+1]=R[1],l.data[w+2]=R[2])}if(f){var H=oD(_g(),r);if(f.data&&f.data.length)for(var Y=0;Y<f.data.length;Y+=3){var fe=es(f.data[Y],f.data[Y+1],f.data[Y+2]);Mv(fe,fe,H),bg(fe,fe),A_(f.data)?f.data.set([fe[0],fe[1],fe[2]],Y):(f.data[Y]=fe[0],f.data[Y+1]=fe[1],f.data[Y+2]=fe[2])}}}}]),n}(kh),ii;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(ii||(ii={}));var O_,k_,F_,B_,Vm,W_,V_,U_,zD=(O_=(0,er.b2)(),k_=(0,er.f3)(Bi.GeometryComponentManager),F_=(0,er.f3)(Bi.RenderEngine),O_(B_=(Vm=(U_=function(){function e(){(0,Qr.Z)(this,e),ao(this,"geometry",W_,this),ao(this,"engine",V_,this)}return(0,yo.Z)(e,[{key:"execute",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r=this;return Hr().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:this.geometry.forEach(function(w,R){R.dirty&&(R.attributes.forEach(function(H){if(H.dirty&&H.data){if(!H.buffer)H.buffer=r.engine.createBuffer({data:H.data,type:ii.FLOAT});else{var Y;(Y=H.buffer)===null||Y===void 0||Y.subData({data:H.data,offset:0})}H.dirty=!1}}),R.indices&&(R.indicesBuffer?R.indicesBuffer.subData({data:R.indices,offset:0}):R.indicesBuffer=r.engine.createElements({data:R.indices,count:R.indices.length,type:ii.UNSIGNED_INT,usage:ii.STATIC_DRAW})),R.dirty=!1)});case 1:case"end":return f.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"tearDown",value:function(){this.geometry.forEach(function(n,i){i.indicesBuffer&&i.indicesBuffer.destroy(),i.attributes.forEach(function(r){r.buffer&&r.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},i=n.vertexCount,r=$u();return this.geometry.create(r,{vertexCount:i})}},{key:"createInstancedBufferGeometry",value:function(n){var i=n.maxInstancedCount,r=n.vertexCount,l=$u();return this.geometry.create(l,{maxInstancedCount:i,vertexCount:r})}}]),e}(),U_),W_=lo(Vm.prototype,"geometry",[k_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V_=lo(Vm.prototype,"engine",[F_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vm))||B_);function z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function H_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z_(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function HD(e){var t=GD();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function GD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var jD=function(e){(0,Ll.Z)(n,e);var t=HD(n);function n(i){var r;return(0,Qr.Z)(this,n),r=t.call(this,i),r.vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.defines={},r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:ii.BACK},r.depth={enable:!0},r.blend=void 0,r.entity=void 0,r.type=void 0,Object.assign((0,Ma.Z)(r),i),r}return(0,yo.Z)(n,[{key:"setDefines",value:function(r){return this.defines=H_(H_({},this.defines),r),this}},{key:"setCull",value:function(r){return this.cull=r,this}},{key:"setDepth",value:function(r){return this.depth=r,this}},{key:"setBlend",value:function(r){return this.blend=r,this}},{key:"setUniform",value:function(r,l){var f=this;if(typeof r!="string")return Object.keys(r).forEach(function(R){return f.setUniform(R,r[R])}),this;var w=this.uniforms.find(function(R){return R.name===r});return w?(w.dirty=!0,w.data=l):this.uniforms.push({name:r,dirty:!0,data:l}),this.dirty=!0,this}}]),n}(kh),G_,j_,K_,$_,Z_,wg,X_,Y_,Q_,J_;function q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function e1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q_(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var KD=(G_=(0,er.b2)(),j_=(0,er.f3)(Bi.MaterialComponentManager),K_=(0,er.f3)(Bi.RenderEngine),$_=(0,er.f3)(Bi.ShaderModuleService),G_(Z_=(wg=(J_=function(){function e(){(0,Qr.Z)(this,e),ao(this,"material",X_,this),ao(this,"engine",Y_,this),ao(this,"shaderModule",Q_,this)}return(0,yo.Z)(e,[{key:"execute",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){return Hr().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:case"end":return l.stop()}},i)}));function n(){return t.apply(this,arguments)}return n}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(n){var i=$u(),r=n.vertexShader,l=n.fragmentShader,f=[];if(!this.engine.supportWebGPU){var w="material-".concat(i);this.shaderModule.registerModule(w,{vs:n.vertexShader,fs:n.fragmentShader});var R=this.shaderModule.getModule(w);r=R.vs,l=R.fs,R.uniforms&&(f=Object.keys(R.uniforms).map(function(H){return{dirty:!0,name:H,data:R.uniforms[H]}}))}return this.material.create(i,e1(e1({vertexShaderGLSL:r,fragmentShaderGLSL:l},n),{},{uniforms:f}))}}]),e}(),J_),X_=lo(wg.prototype,"material",[j_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y_=lo(wg.prototype,"engine",[K_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q_=lo(wg.prototype,"shaderModule",[$_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wg))||Z_);function $D(e){var t=ZD();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function ZD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Rv;(function(e){e[e.Standard=0]="Standard"})(Rv||(Rv={}));var XD=function(e){(0,Ll.Z)(n,e);var t=$D(n);function n(i){var r;return(0,Qr.Z)(this,n),r=t.call(this,i),r.strategy=Rv.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign((0,Ma.Z)(r),i),r}return n}(kh),Pv=function(){function e(t,n){(0,Qr.Z)(this,e),this.center=void 0,this.halfExtents=void 0,this.min=Is(),this.max=Is(),this.update(t,n)}return(0,yo.Z)(e,[{key:"update",value:function(n,i){this.center=n||Is(),this.halfExtents=i||es(.5,.5,.5),this.min=Av(this.min,this.center,this.halfExtents),this.max=Id(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(n,i){Id(this.center,i,n),Cg(this.center,this.center,.5),Av(this.halfExtents,i,n),Cg(this.halfExtents,this.halfExtents,.5),ul(this.min,n),ul(this.max,i)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(n){var i=this.center,r=i[0],l=i[1],f=i[2],w=this.halfExtents,R=w[0],H=w[1],Y=w[2],fe=r-R,Le=r+R,Me=l-H,We=l+H,Ze=f-Y,He=f+Y,et=n.center,it=et[0],ut=et[1],Mt=et[2],Rt=n.halfExtents,un=Rt[0],jn=Rt[1],xn=Rt[2],ei=it-un,ti=it+un,_i=ut-jn,Hn=ut+jn,Li=Mt-xn,yi=Mt+xn;ei<fe&&(fe=ei),ti>Le&&(Le=ti),_i<Me&&(Me=_i),Hn>We&&(We=Hn),Li<Ze&&(Ze=Li),yi>He&&(He=yi),i[0]=(fe+Le)*.5,i[1]=(Me+We)*.5,i[2]=(Ze+He)*.5,w[0]=(Le-fe)*.5,w[1]=(We-Me)*.5,w[2]=(He-Ze)*.5,this.min[0]=fe,this.min[1]=Me,this.min[2]=Ze,this.max[0]=Le,this.max[1]=We,this.max[2]=He}},{key:"intersects",value:function(n){var i=this.getMax(),r=this.getMin(),l=n.getMax(),f=n.getMin();return r[0]<=l[0]&&i[0]>=f[0]&&r[1]<=l[1]&&i[1]>=f[1]&&r[2]<=l[2]&&i[2]>=f[2]}},{key:"containsPoint",value:function(n){var i=this.getMin(),r=this.getMax();return!(n[0]<i[0]||n[0]>r[0]||n[1]<i[1]||n[1]>r[1]||n[2]<i[2]||n[2]>r[2])}},{key:"getNegativeFarPoint",value:function(n){return n.pnVertexFlag===273?ul(Is(),this.min):n.pnVertexFlag===272?es(this.min[0],this.min[1],this.max[2]):n.pnVertexFlag===257?es(this.min[0],this.max[1],this.min[2]):n.pnVertexFlag===256?es(this.min[0],this.max[1],this.max[2]):n.pnVertexFlag===17?es(this.max[0],this.min[1],this.min[2]):n.pnVertexFlag===16?es(this.max[0],this.min[1],this.max[2]):n.pnVertexFlag===1?es(this.max[0],this.max[1],this.min[2]):es(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(n){return n.pnVertexFlag===273?ul(Is(),this.max):n.pnVertexFlag===272?es(this.max[0],this.max[1],this.min[2]):n.pnVertexFlag===257?es(this.max[0],this.min[1],this.max[2]):n.pnVertexFlag===256?es(this.max[0],this.min[1],this.min[2]):n.pnVertexFlag===17?es(this.min[0],this.max[1],this.max[2]):n.pnVertexFlag===16?es(this.min[0],this.max[1],this.min[2]):n.pnVertexFlag===1?es(this.min[0],this.min[1],this.max[2]):es(this.min[0],this.min[1],this.min[2])}}]),e}();function YD(e){var t=QD();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function QD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var JD=function(e){(0,Ll.Z)(n,e);var t=YD(n);function n(i){var r;return(0,Qr.Z)(this,n),r=t.call(this,i),r.material=void 0,r.geometry=void 0,r.aabb=new Pv,r.aabbDirty=!0,r.model=void 0,r.visible=!0,r.children=[],Object.assign((0,Ma.Z)(r),i),r}return n}(kh),qD=function(){function e(t,n){(0,Qr.Z)(this,e),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=t||0,this.normal=n||es(0,1,0),this.updatePNVertexFlag()}return(0,yo.Z)(e,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(n){return yg(n,this.normal)-this.distance}},{key:"normalize",value:function(){var n=1/M_(this.normal);Cg(this.normal,this.normal,n),this.distance*=n}},{key:"intersectsLine",value:function(n,i,r){var l=this.distanceToPoint(n),f=this.distanceToPoint(i),w=l/(l-f),R=w>=0&&w<=1;return R&&r&&Bh(r,n,i,w),R}}]),e}(),eh;(function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"})(eh||(eh={}));var ex=function(){function e(t){if((0,Qr.Z)(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new qD)}return(0,yo.Z)(e,[{key:"extractFromVPMatrix",value:function(n){var i=(0,Bm.Z)(n,16),r=i[0],l=i[1],f=i[2],w=i[3],R=i[4],H=i[5],Y=i[6],fe=i[7],Le=i[8],Me=i[9],We=i[10],Ze=i[11],He=i[12],et=i[13],it=i[14],ut=i[15];Rf(this.planes[0].normal,w-r,fe-R,Ze-Le),this.planes[0].distance=-(ut-He),Rf(this.planes[1].normal,w+r,fe+R,Ze+Le),this.planes[1].distance=-(ut+He),Rf(this.planes[2].normal,w+l,fe+H,Ze+Me),this.planes[2].distance=-(ut+et),Rf(this.planes[3].normal,w-l,fe-H,Ze-Me),this.planes[3].distance=-(ut-et),Rf(this.planes[4].normal,w-f,fe-Y,Ze-We),this.planes[4].distance=-(ut-it),Rf(this.planes[5].normal,w+f,fe+Y,Ze+We),this.planes[5].distance=-(ut+it),this.planes.forEach(function(Mt){Mt.normalize(),Mt.updatePNVertexFlag()})}}]),e}();function YM(e){return typeof e=="number"}function QM(e){return e===void 0?0:e>360||e<-360?e%360:e}function JM(e,t,n){return isNumber(e)?vec3.fromValues(e,t,n):e.length===3?vec3.clone(e):vec3.fromValues(e[0],e[1],e[2])}function tx(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function nx(e){var t=(0,Bm.Z)(e,3),n=t[0],i=t[1],r=t[2],l=n+i*256+r*65536-1;return l}function qM(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}var t1,n1,i1,r1,o1,s1,a1,Wh,l1,c1,u1,d1,h1,f1;function g1(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=ix(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(H){throw H},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,f=!1,w;return{s:function(){n=e[Symbol.iterator]()},n:function(){var H=n.next();return l=H.done,H},e:function(H){f=!0,w=H},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(f)throw w}}}}function ix(e,t){if(!!e){if(typeof e=="string")return m1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m1(e,t)}}function m1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var rx=(t1=(0,er.b2)(),n1=(0,er.f3)(Bi.MeshComponentManager),i1=(0,er.f3)(Bi.CullableComponentManager),r1=(0,er.f3)(Bi.GeometryComponentManager),o1=(0,er.f3)(Bi.HierarchyComponentManager),s1=(0,er.f3)(Bi.TransformComponentManager),t1(a1=(Wh=(f1=function(){function e(){(0,Qr.Z)(this,e),ao(this,"mesh",l1,this),ao(this,"cullable",c1,this),ao(this,"geometry",u1,this),ao(this,"hierarchy",d1,this),ao(this,"transform",h1,this),this.planes=void 0}return(0,yo.Z)(e,[{key:"setFrustumPlanes",value:function(n){this.planes=n}},{key:"execute",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){var l,f,w,R,H,Y,fe,Le,Me,We,Ze,He,et,it,ut,Mt,Rt,un,jn,xn,ei;return Hr().wrap(function(_i){for(;;)switch(_i.prev=_i.next){case 0:l=g1(r);try{for(l.s();!(f=l.n()).done;){w=f.value,R=w.getScene(),H=w.getCamera(),Y=g1(R.getEntities());try{for(Y.s();!(fe=Y.n()).done;)Le=fe.value,Me=this.mesh.getComponentByEntity(Le),Me&&(We=this.hierarchy.getComponentByEntity(Le),Ze=this.cullable.getComponentByEntity(Le),He=Me.geometry,et=this.transform.getComponentByEntity(Le),He&&He.aabb&&et&&Me.aabbDirty&&(it=et.worldTransform,ut=He.aabb,Mt=ut.center,Rt=ut.halfExtents,un=Tv(Is(),Mt,it),jn=tx(it,_g()),xn=Mv(Is(),Rt,jn),Me.aabb.update(un,xn),Me.aabbDirty=!1),Ze&&He&&(ei=this.cullable.getComponentByEntity((We==null?void 0:We.parentID)||-1),Ze.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(Me.aabb,(ei==null?void 0:ei.visibilityPlaneMask)||eh.INDETERMINATE,this.planes||H.getFrustum().planes),Ze.visible=Ze.visibilityPlaneMask!==eh.OUTSIDE))}catch(Hn){Y.e(Hn)}finally{Y.f()}}}catch(Hn){l.e(Hn)}finally{l.f()}case 2:case"end":return _i.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(n,i,r){if(i===eh.OUTSIDE||i===eh.INSIDE)return i;for(var l=eh.INSIDE,f=0,w=r.length;f<w;++f){var R=f<31?1<<f:0;if(!(f<31&&(i&R)==0)){var H=r[f],Y=H.normal,fe=H.distance;if(yg(Y,n.getNegativeFarPoint(r[f]))+fe>0)return eh.OUTSIDE;yg(Y,n.getPositiveFarPoint(r[f]))+fe>0&&(l|=R)}}return l}}]),e}(),f1),l1=lo(Wh.prototype,"mesh",[n1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c1=lo(Wh.prototype,"cullable",[i1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u1=lo(Wh.prototype,"geometry",[r1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d1=lo(Wh.prototype,"hierarchy",[o1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h1=lo(Wh.prototype,"transform",[s1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wh))||a1);function uc(){var e=new cl(16);return cl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ox(e){var t=new cl(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ov(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function eA(e,t,n,i,r,l,f,w,R,H,Y,fe,Le,Me,We,Ze){var He=new glMatrix.ARRAY_TYPE(16);return He[0]=e,He[1]=t,He[2]=n,He[3]=i,He[4]=r,He[5]=l,He[6]=f,He[7]=w,He[8]=R,He[9]=H,He[10]=Y,He[11]=fe,He[12]=Le,He[13]=Me,He[14]=We,He[15]=Ze,He}function tA(e,t,n,i,r,l,f,w,R,H,Y,fe,Le,Me,We,Ze,He){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=l,e[5]=f,e[6]=w,e[7]=R,e[8]=H,e[9]=Y,e[10]=fe,e[11]=Le,e[12]=Me,e[13]=We,e[14]=Ze,e[15]=He,e}function p1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function nA(e,t){if(e===t){var n=t[1],i=t[2],r=t[3],l=t[6],f=t[7],w=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=l,e[11]=t[14],e[12]=r,e[13]=f,e[14]=w}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Um(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=t[4],w=t[5],R=t[6],H=t[7],Y=t[8],fe=t[9],Le=t[10],Me=t[11],We=t[12],Ze=t[13],He=t[14],et=t[15],it=n*w-i*f,ut=n*R-r*f,Mt=n*H-l*f,Rt=i*R-r*w,un=i*H-l*w,jn=r*H-l*R,xn=Y*Ze-fe*We,ei=Y*He-Le*We,ti=Y*et-Me*We,_i=fe*He-Le*Ze,Hn=fe*et-Me*Ze,Li=Le*et-Me*He,yi=it*Li-ut*Hn+Mt*_i+Rt*ti-un*ei+jn*xn;return yi?(yi=1/yi,e[0]=(w*Li-R*Hn+H*_i)*yi,e[1]=(r*Hn-i*Li-l*_i)*yi,e[2]=(Ze*jn-He*un+et*Rt)*yi,e[3]=(Le*un-fe*jn-Me*Rt)*yi,e[4]=(R*ti-f*Li-H*ei)*yi,e[5]=(n*Li-r*ti+l*ei)*yi,e[6]=(He*Mt-We*jn-et*ut)*yi,e[7]=(Y*jn-Le*Mt+Me*ut)*yi,e[8]=(f*Hn-w*ti+H*xn)*yi,e[9]=(i*ti-n*Hn-l*xn)*yi,e[10]=(We*un-Ze*Mt+et*it)*yi,e[11]=(fe*Mt-Y*un-Me*it)*yi,e[12]=(w*ei-f*_i-R*xn)*yi,e[13]=(n*_i-i*ei+r*xn)*yi,e[14]=(Ze*ut-We*Rt-He*it)*yi,e[15]=(Y*Rt-fe*ut+Le*it)*yi,e):null}function iA(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=t[4],w=t[5],R=t[6],H=t[7],Y=t[8],fe=t[9],Le=t[10],Me=t[11],We=t[12],Ze=t[13],He=t[14],et=t[15];return e[0]=w*(Le*et-Me*He)-fe*(R*et-H*He)+Ze*(R*Me-H*Le),e[1]=-(i*(Le*et-Me*He)-fe*(r*et-l*He)+Ze*(r*Me-l*Le)),e[2]=i*(R*et-H*He)-w*(r*et-l*He)+Ze*(r*H-l*R),e[3]=-(i*(R*Me-H*Le)-w*(r*Me-l*Le)+fe*(r*H-l*R)),e[4]=-(f*(Le*et-Me*He)-Y*(R*et-H*He)+We*(R*Me-H*Le)),e[5]=n*(Le*et-Me*He)-Y*(r*et-l*He)+We*(r*Me-l*Le),e[6]=-(n*(R*et-H*He)-f*(r*et-l*He)+We*(r*H-l*R)),e[7]=n*(R*Me-H*Le)-f*(r*Me-l*Le)+Y*(r*H-l*R),e[8]=f*(fe*et-Me*Ze)-Y*(w*et-H*Ze)+We*(w*Me-H*fe),e[9]=-(n*(fe*et-Me*Ze)-Y*(i*et-l*Ze)+We*(i*Me-l*fe)),e[10]=n*(w*et-H*Ze)-f*(i*et-l*Ze)+We*(i*H-l*w),e[11]=-(n*(w*Me-H*fe)-f*(i*Me-l*fe)+Y*(i*H-l*w)),e[12]=-(f*(fe*He-Le*Ze)-Y*(w*He-R*Ze)+We*(w*Le-R*fe)),e[13]=n*(fe*He-Le*Ze)-Y*(i*He-r*Ze)+We*(i*Le-r*fe),e[14]=-(n*(w*He-R*Ze)-f*(i*He-r*Ze)+We*(i*R-r*w)),e[15]=n*(w*Le-R*fe)-f*(i*Le-r*fe)+Y*(i*R-r*w),e}function rA(e){var t=e[0],n=e[1],i=e[2],r=e[3],l=e[4],f=e[5],w=e[6],R=e[7],H=e[8],Y=e[9],fe=e[10],Le=e[11],Me=e[12],We=e[13],Ze=e[14],He=e[15],et=t*f-n*l,it=t*w-i*l,ut=t*R-r*l,Mt=n*w-i*f,Rt=n*R-r*f,un=i*R-r*w,jn=H*We-Y*Me,xn=H*Ze-fe*Me,ei=H*He-Le*Me,ti=Y*Ze-fe*We,_i=Y*He-Le*We,Hn=fe*He-Le*Ze;return et*Hn-it*_i+ut*ti+Mt*ei-Rt*xn+un*jn}function Vh(e,t,n){var i=t[0],r=t[1],l=t[2],f=t[3],w=t[4],R=t[5],H=t[6],Y=t[7],fe=t[8],Le=t[9],Me=t[10],We=t[11],Ze=t[12],He=t[13],et=t[14],it=t[15],ut=n[0],Mt=n[1],Rt=n[2],un=n[3];return e[0]=ut*i+Mt*w+Rt*fe+un*Ze,e[1]=ut*r+Mt*R+Rt*Le+un*He,e[2]=ut*l+Mt*H+Rt*Me+un*et,e[3]=ut*f+Mt*Y+Rt*We+un*it,ut=n[4],Mt=n[5],Rt=n[6],un=n[7],e[4]=ut*i+Mt*w+Rt*fe+un*Ze,e[5]=ut*r+Mt*R+Rt*Le+un*He,e[6]=ut*l+Mt*H+Rt*Me+un*et,e[7]=ut*f+Mt*Y+Rt*We+un*it,ut=n[8],Mt=n[9],Rt=n[10],un=n[11],e[8]=ut*i+Mt*w+Rt*fe+un*Ze,e[9]=ut*r+Mt*R+Rt*Le+un*He,e[10]=ut*l+Mt*H+Rt*Me+un*et,e[11]=ut*f+Mt*Y+Rt*We+un*it,ut=n[12],Mt=n[13],Rt=n[14],un=n[15],e[12]=ut*i+Mt*w+Rt*fe+un*Ze,e[13]=ut*r+Mt*R+Rt*Le+un*He,e[14]=ut*l+Mt*H+Rt*Me+un*et,e[15]=ut*f+Mt*Y+Rt*We+un*it,e}function Sg(e,t,n){var i=n[0],r=n[1],l=n[2],f,w,R,H,Y,fe,Le,Me,We,Ze,He,et;return t===e?(e[12]=t[0]*i+t[4]*r+t[8]*l+t[12],e[13]=t[1]*i+t[5]*r+t[9]*l+t[13],e[14]=t[2]*i+t[6]*r+t[10]*l+t[14],e[15]=t[3]*i+t[7]*r+t[11]*l+t[15]):(f=t[0],w=t[1],R=t[2],H=t[3],Y=t[4],fe=t[5],Le=t[6],Me=t[7],We=t[8],Ze=t[9],He=t[10],et=t[11],e[0]=f,e[1]=w,e[2]=R,e[3]=H,e[4]=Y,e[5]=fe,e[6]=Le,e[7]=Me,e[8]=We,e[9]=Ze,e[10]=He,e[11]=et,e[12]=f*i+Y*r+We*l+t[12],e[13]=w*i+fe*r+Ze*l+t[13],e[14]=R*i+Le*r+He*l+t[14],e[15]=H*i+Me*r+et*l+t[15]),e}function oA(e,t,n){var i=n[0],r=n[1],l=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*l,e[9]=t[9]*l,e[10]=t[10]*l,e[11]=t[11]*l,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function sA(e,t,n,i){var r=i[0],l=i[1],f=i[2],w=Math.hypot(r,l,f),R,H,Y,fe,Le,Me,We,Ze,He,et,it,ut,Mt,Rt,un,jn,xn,ei,ti,_i,Hn,Li,yi,fr;return w<glMatrix.EPSILON?null:(w=1/w,r*=w,l*=w,f*=w,R=Math.sin(n),H=Math.cos(n),Y=1-H,fe=t[0],Le=t[1],Me=t[2],We=t[3],Ze=t[4],He=t[5],et=t[6],it=t[7],ut=t[8],Mt=t[9],Rt=t[10],un=t[11],jn=r*r*Y+H,xn=l*r*Y+f*R,ei=f*r*Y-l*R,ti=r*l*Y-f*R,_i=l*l*Y+H,Hn=f*l*Y+r*R,Li=r*f*Y+l*R,yi=l*f*Y-r*R,fr=f*f*Y+H,e[0]=fe*jn+Ze*xn+ut*ei,e[1]=Le*jn+He*xn+Mt*ei,e[2]=Me*jn+et*xn+Rt*ei,e[3]=We*jn+it*xn+un*ei,e[4]=fe*ti+Ze*_i+ut*Hn,e[5]=Le*ti+He*_i+Mt*Hn,e[6]=Me*ti+et*_i+Rt*Hn,e[7]=We*ti+it*_i+un*Hn,e[8]=fe*Li+Ze*yi+ut*fr,e[9]=Le*Li+He*yi+Mt*fr,e[10]=Me*Li+et*yi+Rt*fr,e[11]=We*Li+it*yi+un*fr,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function sx(e,t,n){var i=Math.sin(n),r=Math.cos(n),l=t[4],f=t[5],w=t[6],R=t[7],H=t[8],Y=t[9],fe=t[10],Le=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=l*r+H*i,e[5]=f*r+Y*i,e[6]=w*r+fe*i,e[7]=R*r+Le*i,e[8]=H*r-l*i,e[9]=Y*r-f*i,e[10]=fe*r-w*i,e[11]=Le*r-R*i,e}function ax(e,t,n){var i=Math.sin(n),r=Math.cos(n),l=t[0],f=t[1],w=t[2],R=t[3],H=t[8],Y=t[9],fe=t[10],Le=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*r-H*i,e[1]=f*r-Y*i,e[2]=w*r-fe*i,e[3]=R*r-Le*i,e[8]=l*i+H*r,e[9]=f*i+Y*r,e[10]=w*i+fe*r,e[11]=R*i+Le*r,e}function aA(e,t,n){var i=Math.sin(n),r=Math.cos(n),l=t[0],f=t[1],w=t[2],R=t[3],H=t[4],Y=t[5],fe=t[6],Le=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*r+H*i,e[1]=f*r+Y*i,e[2]=w*r+fe*i,e[3]=R*r+Le*i,e[4]=H*r-l*i,e[5]=Y*r-f*i,e[6]=fe*r-w*i,e[7]=Le*r-R*i,e}function lA(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function cA(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function uA(e,t,n){var i=n[0],r=n[1],l=n[2],f=Math.hypot(i,r,l),w,R,H;return f<glMatrix.EPSILON?null:(f=1/f,i*=f,r*=f,l*=f,w=Math.sin(t),R=Math.cos(t),H=1-R,e[0]=i*i*H+R,e[1]=r*i*H+l*w,e[2]=l*i*H-r*w,e[3]=0,e[4]=i*r*H-l*w,e[5]=r*r*H+R,e[6]=l*r*H+i*w,e[7]=0,e[8]=i*l*H+r*w,e[9]=r*l*H-i*w,e[10]=l*l*H+R,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function dA(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hA(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fA(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lx(e,t,n){var i=t[0],r=t[1],l=t[2],f=t[3],w=i+i,R=r+r,H=l+l,Y=i*w,fe=i*R,Le=i*H,Me=r*R,We=r*H,Ze=l*H,He=f*w,et=f*R,it=f*H;return e[0]=1-(Me+Ze),e[1]=fe+it,e[2]=Le-et,e[3]=0,e[4]=fe-it,e[5]=1-(Y+Ze),e[6]=We+He,e[7]=0,e[8]=Le+et,e[9]=We-He,e[10]=1-(Y+Me),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function gA(e,t){var n=new glMatrix.ARRAY_TYPE(3),i=-t[0],r=-t[1],l=-t[2],f=t[3],w=t[4],R=t[5],H=t[6],Y=t[7],fe=i*i+r*r+l*l+f*f;return fe>0?(n[0]=(w*f+Y*i+R*l-H*r)*2/fe,n[1]=(R*f+Y*r+H*i-w*l)*2/fe,n[2]=(H*f+Y*l+w*r-R*i)*2/fe):(n[0]=(w*f+Y*i+R*l-H*r)*2,n[1]=(R*f+Y*r+H*i-w*l)*2,n[2]=(H*f+Y*l+w*r-R*i)*2),lx(e,t,n),e}function Eg(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Of(e,t){var n=t[0],i=t[1],r=t[2],l=t[4],f=t[5],w=t[6],R=t[8],H=t[9],Y=t[10];return e[0]=Math.hypot(n,i,r),e[1]=Math.hypot(l,f,w),e[2]=Math.hypot(R,H,Y),e}function Lg(e,t){var n=new cl(3);Of(n,t);var i=1/n[0],r=1/n[1],l=1/n[2],f=t[0]*i,w=t[1]*r,R=t[2]*l,H=t[4]*i,Y=t[5]*r,fe=t[6]*l,Le=t[8]*i,Me=t[9]*r,We=t[10]*l,Ze=f+Y+We,He=0;return Ze>0?(He=Math.sqrt(Ze+1)*2,e[3]=.25*He,e[0]=(fe-Me)/He,e[1]=(Le-R)/He,e[2]=(w-H)/He):f>Y&&f>We?(He=Math.sqrt(1+f-Y-We)*2,e[3]=(fe-Me)/He,e[0]=.25*He,e[1]=(w+H)/He,e[2]=(Le+R)/He):Y>We?(He=Math.sqrt(1+Y-f-We)*2,e[3]=(Le-R)/He,e[0]=(w+H)/He,e[1]=.25*He,e[2]=(fe+Me)/He):(He=Math.sqrt(1+We-f-Y)*2,e[3]=(w-H)/He,e[0]=(Le+R)/He,e[1]=(fe+Me)/He,e[2]=.25*He),e}function cx(e,t,n,i){var r=t[0],l=t[1],f=t[2],w=t[3],R=r+r,H=l+l,Y=f+f,fe=r*R,Le=r*H,Me=r*Y,We=l*H,Ze=l*Y,He=f*Y,et=w*R,it=w*H,ut=w*Y,Mt=i[0],Rt=i[1],un=i[2];return e[0]=(1-(We+He))*Mt,e[1]=(Le+ut)*Mt,e[2]=(Me-it)*Mt,e[3]=0,e[4]=(Le-ut)*Rt,e[5]=(1-(fe+He))*Rt,e[6]=(Ze+et)*Rt,e[7]=0,e[8]=(Me+it)*un,e[9]=(Ze-et)*un,e[10]=(1-(fe+We))*un,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function mA(e,t,n,i,r){var l=t[0],f=t[1],w=t[2],R=t[3],H=l+l,Y=f+f,fe=w+w,Le=l*H,Me=l*Y,We=l*fe,Ze=f*Y,He=f*fe,et=w*fe,it=R*H,ut=R*Y,Mt=R*fe,Rt=i[0],un=i[1],jn=i[2],xn=r[0],ei=r[1],ti=r[2],_i=(1-(Ze+et))*Rt,Hn=(Me+Mt)*Rt,Li=(We-ut)*Rt,yi=(Me-Mt)*un,fr=(1-(Le+et))*un,To=(He+it)*un,Oo=(We+ut)*jn,Mo=(He-it)*jn,Os=(1-(Le+Ze))*jn;return e[0]=_i,e[1]=Hn,e[2]=Li,e[3]=0,e[4]=yi,e[5]=fr,e[6]=To,e[7]=0,e[8]=Oo,e[9]=Mo,e[10]=Os,e[11]=0,e[12]=n[0]+xn-(_i*xn+yi*ei+Oo*ti),e[13]=n[1]+ei-(Hn*xn+fr*ei+Mo*ti),e[14]=n[2]+ti-(Li*xn+To*ei+Os*ti),e[15]=1,e}function v1(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=n+n,w=i+i,R=r+r,H=n*f,Y=i*f,fe=i*w,Le=r*f,Me=r*w,We=r*R,Ze=l*f,He=l*w,et=l*R;return e[0]=1-fe-We,e[1]=Y+et,e[2]=Le-He,e[3]=0,e[4]=Y-et,e[5]=1-H-We,e[6]=Me+Ze,e[7]=0,e[8]=Le+He,e[9]=Me-Ze,e[10]=1-H-fe,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pA(e,t,n,i,r,l,f){var w=1/(n-t),R=1/(r-i),H=1/(l-f);return e[0]=l*2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l*2*R,e[6]=0,e[7]=0,e[8]=(n+t)*w,e[9]=(r+i)*R,e[10]=(f+l)*H,e[11]=-1,e[12]=0,e[13]=0,e[14]=f*l*2*H,e[15]=0,e}function ux(e,t,n,i,r){var l=1/Math.tan(t/2),f;return e[0]=l/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,r!=null&&r!==Infinity?(f=1/(i-r),e[10]=(r+i)*f,e[14]=2*r*i*f):(e[10]=-1,e[14]=-2*i),e}var dx=ux;function vA(e,t,n,i,r){var l=1/Math.tan(t/2),f;return e[0]=l/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,r!=null&&r!==Infinity?(f=1/(i-r),e[10]=r*f,e[14]=r*i*f):(e[10]=-1,e[14]=-i),e}function _A(e,t,n,i){var r=Math.tan(t.upDegrees*Math.PI/180),l=Math.tan(t.downDegrees*Math.PI/180),f=Math.tan(t.leftDegrees*Math.PI/180),w=Math.tan(t.rightDegrees*Math.PI/180),R=2/(f+w),H=2/(r+l);return e[0]=R,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=H,e[6]=0,e[7]=0,e[8]=-((f-w)*R*.5),e[9]=(r-l)*H*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e}function hx(e,t,n,i,r,l,f){var w=1/(t-n),R=1/(i-r),H=1/(l-f);return e[0]=-2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*R,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*H,e[11]=0,e[12]=(t+n)*w,e[13]=(r+i)*R,e[14]=(f+l)*H,e[15]=1,e}var fx=hx;function CA(e,t,n,i,r,l,f){var w=1/(t-n),R=1/(i-r),H=1/(l-f);return e[0]=-2*w,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*R,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=H,e[11]=0,e[12]=(t+n)*w,e[13]=(r+i)*R,e[14]=l*H,e[15]=1,e}function gx(e,t,n,i){var r,l,f,w,R,H,Y,fe,Le,Me,We=t[0],Ze=t[1],He=t[2],et=i[0],it=i[1],ut=i[2],Mt=n[0],Rt=n[1],un=n[2];return Math.abs(We-Mt)<Dd&&Math.abs(Ze-Rt)<Dd&&Math.abs(He-un)<Dd?p1(e):(Y=We-Mt,fe=Ze-Rt,Le=He-un,Me=1/Math.hypot(Y,fe,Le),Y*=Me,fe*=Me,Le*=Me,r=it*Le-ut*fe,l=ut*Y-et*Le,f=et*fe-it*Y,Me=Math.hypot(r,l,f),Me?(Me=1/Me,r*=Me,l*=Me,f*=Me):(r=0,l=0,f=0),w=fe*f-Le*l,R=Le*r-Y*f,H=Y*l-fe*r,Me=Math.hypot(w,R,H),Me?(Me=1/Me,w*=Me,R*=Me,H*=Me):(w=0,R=0,H=0),e[0]=r,e[1]=w,e[2]=Y,e[3]=0,e[4]=l,e[5]=R,e[6]=fe,e[7]=0,e[8]=f,e[9]=H,e[10]=Le,e[11]=0,e[12]=-(r*We+l*Ze+f*He),e[13]=-(w*We+R*Ze+H*He),e[14]=-(Y*We+fe*Ze+Le*He),e[15]=1,e)}function bA(e,t,n,i){var r=t[0],l=t[1],f=t[2],w=i[0],R=i[1],H=i[2],Y=r-n[0],fe=l-n[1],Le=f-n[2],Me=Y*Y+fe*fe+Le*Le;Me>0&&(Me=1/Math.sqrt(Me),Y*=Me,fe*=Me,Le*=Me);var We=R*Le-H*fe,Ze=H*Y-w*Le,He=w*fe-R*Y;return Me=We*We+Ze*Ze+He*He,Me>0&&(Me=1/Math.sqrt(Me),We*=Me,Ze*=Me,He*=Me),e[0]=We,e[1]=Ze,e[2]=He,e[3]=0,e[4]=fe*He-Le*Ze,e[5]=Le*We-Y*He,e[6]=Y*Ze-fe*We,e[7]=0,e[8]=Y,e[9]=fe,e[10]=Le,e[11]=0,e[12]=r,e[13]=l,e[14]=f,e[15]=1,e}function yA(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function wA(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function SA(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function EA(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function LA(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function DA(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e[6]=t[6]+n[6]*i,e[7]=t[7]+n[7]*i,e[8]=t[8]+n[8]*i,e[9]=t[9]+n[9]*i,e[10]=t[10]+n[10]*i,e[11]=t[11]+n[11]*i,e[12]=t[12]+n[12]*i,e[13]=t[13]+n[13]*i,e[14]=t[14]+n[14]*i,e[15]=t[15]+n[15]*i,e}function xA(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function IA(e,t){var n=e[0],i=e[1],r=e[2],l=e[3],f=e[4],w=e[5],R=e[6],H=e[7],Y=e[8],fe=e[9],Le=e[10],Me=e[11],We=e[12],Ze=e[13],He=e[14],et=e[15],it=t[0],ut=t[1],Mt=t[2],Rt=t[3],un=t[4],jn=t[5],xn=t[6],ei=t[7],ti=t[8],_i=t[9],Hn=t[10],Li=t[11],yi=t[12],fr=t[13],To=t[14],Oo=t[15];return Math.abs(n-it)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(it))&&Math.abs(i-ut)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(ut))&&Math.abs(r-Mt)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(Mt))&&Math.abs(l-Rt)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(Rt))&&Math.abs(f-un)<=glMatrix.EPSILON*Math.max(1,Math.abs(f),Math.abs(un))&&Math.abs(w-jn)<=glMatrix.EPSILON*Math.max(1,Math.abs(w),Math.abs(jn))&&Math.abs(R-xn)<=glMatrix.EPSILON*Math.max(1,Math.abs(R),Math.abs(xn))&&Math.abs(H-ei)<=glMatrix.EPSILON*Math.max(1,Math.abs(H),Math.abs(ei))&&Math.abs(Y-ti)<=glMatrix.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ti))&&Math.abs(fe-_i)<=glMatrix.EPSILON*Math.max(1,Math.abs(fe),Math.abs(_i))&&Math.abs(Le-Hn)<=glMatrix.EPSILON*Math.max(1,Math.abs(Le),Math.abs(Hn))&&Math.abs(Me-Li)<=glMatrix.EPSILON*Math.max(1,Math.abs(Me),Math.abs(Li))&&Math.abs(We-yi)<=glMatrix.EPSILON*Math.max(1,Math.abs(We),Math.abs(yi))&&Math.abs(Ze-fr)<=glMatrix.EPSILON*Math.max(1,Math.abs(Ze),Math.abs(fr))&&Math.abs(He-To)<=glMatrix.EPSILON*Math.max(1,Math.abs(He),Math.abs(To))&&Math.abs(et-Oo)<=glMatrix.EPSILON*Math.max(1,Math.abs(et),Math.abs(Oo))}var NA=null,TA=null,_1,C1,b1,y1,w1,S1,E1,L1,D1,x1,I1,N1,Cu,T1,M1,A1,R1,P1,O1,k1,F1,B1,W1,V1;function zm(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=mx(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(H){throw H},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,f=!1,w;return{s:function(){n=e[Symbol.iterator]()},n:function(){var H=n.next();return l=H.done,H},e:function(H){f=!0,w=H},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(f)throw w}}}}function mx(e,t){if(!!e){if(typeof e=="string")return U1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U1(e,t)}}function U1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var kf=(_1=(0,er.b2)(),C1=(0,er.f3)(Bi.MeshComponentManager),b1=(0,er.f3)(Bi.GeometryComponentManager),y1=(0,er.f3)(Bi.MaterialComponentManager),w1=(0,er.f3)(Bi.CullableComponentManager),S1=(0,er.f3)(Bi.TransformComponentManager),E1=(0,er.f3)(Bi.HierarchyComponentManager),L1=(0,er.f3)(Bi.Systems),D1=(0,er.t6)(Bi.FrameGraphSystem),x1=(0,er.f3)(Bi.RenderEngine),I1=(0,er.f3)(Bi.ResourcePool),_1(N1=(Cu=(V1=W1=function(){function e(){var t=this;(0,Qr.Z)(this,e),ao(this,"mesh",T1,this),ao(this,"geometry",M1,this),ao(this,"material",A1,this),ao(this,"cullable",R1,this),ao(this,"transform",P1,this),ao(this,"hierarchy",O1,this),ao(this,"frameGraphSystem",k1,this),ao(this,"engine",F1,this),ao(this,"resourcePool",B1,this),this.modelCache={},this.setup=function(n,i,r){var l=n.createRenderTarget(i,"color buffer",{width:1,height:1,usage:ii.RENDER_ATTACHMENT|ii.SAMPLED|ii.COPY_SRC});r.data={output:i.write(n,l)}},this.execute=function(){var n=(0,fs.Z)(Hr().mark(function i(r,l,f){var w,R,H,Y,fe,Le;return Hr().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:w=r.getResourceNode(l.data.output),R=t.resourcePool.getOrCreateResource(w.resource),H=zm(f),We.prev=3,H.s();case 5:if((Y=H.n()).done){We.next=11;break}return fe=Y.value,We.next=9,t.initView(fe);case 9:We.next=5;break;case 11:We.next=16;break;case 13:We.prev=13,We.t0=We.catch(3),H.e(We.t0);case 16:return We.prev=16,H.f(),We.finish(16);case 19:Le=t.engine.getCanvas(),R.resize({width:Le.width,height:Le.height}),t.engine.setScissor({enable:!1}),t.engine.clear({framebuffer:R,color:f[0].getClearColor(),depth:1}),t.engine.useFramebuffer(R,function(){var Ze=zm(f),He;try{for(Ze.s();!(He=Ze.n()).done;){var et=He.value;t.renderView(et)}}catch(it){Ze.e(it)}finally{Ze.f()}});case 24:case"end":return We.stop()}},i,null,[[3,13,16,19]])}));return function(i,r,l){return n.apply(this,arguments)}}()}return(0,yo.Z)(e,[{key:"renderView",value:function(n){var i=n.getScene(),r=n.getCamera(),l=r.getViewTransform(),f=Vh(uc(),r.getPerspective(),l);r.getFrustum().extractFromVPMatrix(f);var w=n.getViewport(),R=w.x,H=w.y,Y=w.width,fe=w.height;this.engine.viewport({x:R,y:H,width:Y,height:fe});var Le=zm(i.getEntities()),Me;try{for(Le.s();!(Me=Le.n()).done;){var We=Me.value;this.renderMesh(We,{camera:r,view:n,viewMatrix:l})}}catch(Ze){Le.e(Ze)}finally{Le.f()}}},{key:"renderMesh",value:function(n,i){var r=i.camera,l=i.view,f=i.viewMatrix,w=this.mesh.getComponentByEntity(n);if(!(!w||!w.visible)){var R=w.material,H=w.geometry;if(!(!H||H.dirty||!R)){var Y=this.transform.getComponentByEntity(n),fe=Vh(uc(),f,Y.worldTransform),Le=l.getViewport(),Me=Le.width,We=Le.height;R.setUniform({projectionMatrix:r.getPerspective(),modelViewMatrix:fe,modelMatrix:Y.worldTransform,viewMatrix:f,cameraPosition:r.getPosition(),u_viewport:[Me,We]}),w.model&&(w.model.draw({uniforms:R.uniforms.reduce(function(Ze,He){return Ze[He.name]=He.data,Ze},{})}),R.uniforms.forEach(function(Ze){Ze.dirty=!1}),R.dirty=!1)}}}},{key:"initMesh",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r,l){var f,w,R,H,Y,fe,Le,Me;return Hr().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(f=this.mesh.getComponentByEntity(r),f){Ze.next=3;break}return Ze.abrupt("return");case 3:if(w=f.material,R=f.geometry,!(!R||R.dirty||!w)){Ze.next=7;break}return Ze.abrupt("return");case 7:if(f.model){Ze.next=24;break}if(H="m-".concat(w.entity,"-g-").concat(R.entity),!this.modelCache[H]){Ze.next=12;break}return f.model=this.modelCache[H],Ze.abrupt("return");case 12:return w.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),Y=this.engine,fe=Y.createModel,Le=Y.createAttribute,Me={vs:w.vertexShaderGLSL,fs:w.fragmentShaderGLSL,defines:w.defines,attributes:R.attributes.reduce(function(He,et){return et.data&&et.buffer&&(He[et.name]=Le({buffer:et.buffer,attributes:et.attributes,arrayStride:et.arrayStride,stepMode:et.stepMode,divisor:et.stepMode==="vertex"?0:1})),He},{}),uniforms:w.uniforms.reduce(function(He,et){return He[et.name]=et.data,He},{}),scissor:{enable:!0,box:function(){return l.getViewport()}}},w.cull&&(Me.cull=w.cull),w.depth&&(Me.depth=w.depth),w.blend&&(Me.blend=w.blend),R.indicesBuffer&&(Me.elements=R.indicesBuffer),R.maxInstancedCount&&(Me.instances=R.maxInstancedCount,Me.count=R.vertexCount||3),Ze.next=22,fe(Me);case 22:f.model=Ze.sent,this.modelCache[H]=f.model;case 24:case"end":return Ze.stop()}},i,this)}));function n(i,r){return t.apply(this,arguments)}return n}()},{key:"initView",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){var l,f,w,R;return Hr().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:l=r.getScene(),f=zm(l.getEntities()),Y.prev=2,f.s();case 4:if((w=f.n()).done){Y.next=10;break}return R=w.value,Y.next=8,this.initMesh(R,r);case 8:Y.next=4;break;case 10:Y.next=15;break;case 12:Y.prev=12,Y.t0=Y.catch(2),f.e(Y.t0);case 15:return Y.prev=15,f.f(),Y.finish(15);case 18:case"end":return Y.stop()}},i,this,[[2,12,15,18]])}));function n(i){return t.apply(this,arguments)}return n}()}]),e}(),W1.IDENTIFIER="Render Pass",V1),T1=lo(Cu.prototype,"mesh",[C1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M1=lo(Cu.prototype,"geometry",[b1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A1=lo(Cu.prototype,"material",[y1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R1=lo(Cu.prototype,"cullable",[w1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P1=lo(Cu.prototype,"transform",[S1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O1=lo(Cu.prototype,"hierarchy",[E1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k1=lo(Cu.prototype,"frameGraphSystem",[L1,D1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F1=lo(Cu.prototype,"engine",[x1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B1=lo(Cu.prototype,"resourcePool",[I1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cu))||N1),z1,H1,G1,j1,K1,$1,Ff,Z1,X1,Y1,Q1,J1,q1;function kv(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=px(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(H){throw H},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,f=!1,w;return{s:function(){n=e[Symbol.iterator]()},n:function(){var H=n.next();return l=H.done,H},e:function(H){f=!0,w=H},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(f)throw w}}}}function px(e,t){if(!!e){if(typeof e=="string")return eC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eC(e,t)}}function eC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Fv={NONE:0,ENCODE:1,HIGHLIGHT:2},Bv=(z1=(0,er.b2)(),H1=(0,er.f3)(Bi.RenderEngine),G1=(0,er.f3)(Bi.ResourcePool),j1=(0,er.f3)(Bi.RenderPassFactory),K1=(0,er.f3)(Bi.MeshComponentManager),z1($1=(Ff=(q1=J1=function(){function e(){var t=this;(0,Qr.Z)(this,e),ao(this,"engine",Z1,this),ao(this,"resourcePool",X1,this),ao(this,"renderPassFactory",Y1,this),ao(this,"mesh",Q1,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(n,i,r){var l=n.createRenderTarget(i,"picking fbo",{width:1,height:1});r.data={output:i.write(n,l)},i.hasSideEffect=!0},this.execute=function(){var n=(0,fs.Z)(Hr().mark(function i(r,l,f){var w,R,H;return Hr().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(t.views=f,!t.alreadyInRendering){fe.next=3;break}return fe.abrupt("return");case 3:w=kv(f);try{for(H=function(){var Me=R.value,We=Me.getViewport(),Ze=We.width,He=We.height;t.alreadyInRendering=!0;var et=r.getResourceNode(l.data.output);t.pickingFBO=t.resourcePool.getOrCreateResource(et.resource),t.pickingFBO.resize({width:Ze,height:He}),t.engine.useFramebuffer(t.pickingFBO,function(){t.engine.clear({framebuffer:t.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var it=t.renderPassFactory(kf.IDENTIFIER),ut=[],Mt=Me.getScene(),Rt=kv(Mt.getEntities()),un;try{for(Rt.s();!(un=Rt.n()).done;){var jn=un.value,xn=t.mesh.getComponentByEntity(jn),ei=xn.material;ei.setUniform("u_PickingStage",Fv.ENCODE),ut.push(xn)}}catch(ti){Rt.e(ti)}finally{Rt.f()}it.renderView(Me),ut.forEach(function(ti){var _i=ti.material;_i.setUniform("u_PickingStage",Fv.HIGHLIGHT)}),t.alreadyInRendering=!1})},w.s();!(R=w.n()).done;)H()}catch(Le){w.e(Le)}finally{w.f()}case 5:case"end":return fe.stop()}},i)}));return function(i,r,l){return n.apply(this,arguments)}}(),this.pick=function(n,i){var r=n.x,l=n.y,f=t.engine,w=f.readPixels,R=f.useFramebuffer,H=i.getViewport(),Y=H.width,fe=H.height,Le=r*window.devicePixelRatio,Me=l*window.devicePixelRatio;if(!(Le>Y||Le<0||Me>fe||Me<0)){var We,Ze;return R(t.pickingFBO,function(){We=w({x:Math.round(Le),y:Math.round(fe-(l+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:t.pickingFBO}),(We[0]!==0||We[1]!==0||We[2]!==0)&&(Ze=nx(We),t.highlightEnabled&&t.highlightPickedFeature(We,i))}),Ze}}}return(0,yo.Z)(e,[{key:"enableHighlight",value:function(n){this.highlightEnabled=n}},{key:"setHighlightColor",value:function(n){this.highlightColor=n}},{key:"highlightPickedFeature",value:function(n,i){if(n){var r=kv(i.getScene().getEntities()),l;try{for(r.s();!(l=r.n()).done;){var f=l.value,w=this.mesh.getComponentByEntity(f),R=w.material;R.setUniform("u_PickingStage",Fv.HIGHLIGHT),R.setUniform("u_PickingColor",[n[0],n[1],n[2]]),R.setUniform("u_HighlightColor",this.highlightColor)}}catch(H){r.e(H)}finally{r.f()}}}}]),e}(),J1.IDENTIFIER="PixelPicking Pass",q1),Z1=lo(Ff.prototype,"engine",[H1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X1=lo(Ff.prototype,"resourcePool",[G1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y1=lo(Ff.prototype,"renderPassFactory",[j1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q1=lo(Ff.prototype,"mesh",[K1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ff))||$1),tC,nC,iC,rC,Hm,oC,sC,aC,lC,vx=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,_x=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Cx=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,bx=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Gm=(tC=(0,er.b2)(),nC=(0,er.f3)(Bi.RenderEngine),iC=(0,er.f3)(Bi.ResourcePool),tC(rC=(Hm=(lC=aC=function e(){var t=this;(0,Qr.Z)(this,e),ao(this,"engine",oC,this),ao(this,"resourcePool",sC,this),this.model=void 0,this.setup=function(n,i,r){var l=n.getPass(kf.IDENTIFIER);if(l){var f=n.createRenderTarget(i,"render to screen",{width:1,height:1});r.data={input:i.read(l.data.output),output:i.write(n,f)}}},this.execute=function(){var n=(0,fs.Z)(Hr().mark(function i(r,l){var f,w,R,H,Y,fe,Le;return Hr().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(f=t.engine,w=f.createModel,R=f.createAttribute,H=f.createBuffer,t.model){We.next=6;break}return We.next=4,w({vs:t.engine.supportWebGPU?bx:_x,fs:t.engine.supportWebGPU?Cx:vx,attributes:{a_Position:R({buffer:H({data:[-4,-4,4,-4,0,4],type:ii.FLOAT}),size:2,arrayStride:2*4,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:Y=We.sent,t.model=Y;case 6:fe=r.getResourceNode(l.data.input),Le=t.resourcePool.getOrCreateResource(fe.resource),t.engine.useFramebuffer(null,function(){t.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),t.model.draw({uniforms:{u_Texture:Le}})});case 9:case"end":return We.stop()}},i)}));return function(i,r){return n.apply(this,arguments)}}(),this.tearDown=function(){t.model=void 0}},aC.IDENTIFIER="Copy Pass",lC),oC=lo(Hm.prototype,"engine",[nC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sC=lo(Hm.prototype,"resourcePool",[iC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hm))||rC),cC,uC,dC,hC,fC,gC,mC,Bf,pC,vC,_C,CC,bC,yx=(cC=(0,er.b2)(),uC=(0,er.f3)(Bi.Systems),dC=(0,er.t6)(Bi.FrameGraphSystem),hC=(0,er.f3)(Bi.RenderPassFactory),fC=(0,er.f3)(Bi.ConfigService),gC=(0,er.f3)(Bi.ResourcePool),cC(mC=(Bf=(bC=function(){function e(){(0,Qr.Z)(this,e),ao(this,"frameGraphSystem",pC,this),ao(this,"renderPassFactory",vC,this),ao(this,"configService",_C,this),ao(this,"resourcePool",CC,this)}return(0,yo.Z)(e,[{key:"execute",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){var l,f,w,R,H,Y,fe,Le,Me;return Hr().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:l=this.renderPassFactory(kf.IDENTIFIER),f=l.setup,w=l.execute,R=this.frameGraphSystem.addPass(kf.IDENTIFIER,f,w),H=this.renderPassFactory(Gm.IDENTIFIER),Y=H.setup,fe=H.execute,Le=H.tearDown,Me=this.frameGraphSystem.addPass(Gm.IDENTIFIER,Y,fe,Le),this.frameGraphSystem.present(Me.data.output);case 5:case"end":return Ze.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(n,i){var r=this.renderPassFactory(Bv.IDENTIFIER);return r.pick(n,i)}}]),e}(),bC),pC=lo(Bf.prototype,"frameGraphSystem",[uC,dC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vC=lo(Bf.prototype,"renderPassFactory",[hC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_C=lo(Bf.prototype,"configService",[fC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),CC=lo(Bf.prototype,"resourcePool",[gC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bf))||mC);function wx(e){var t=Sx();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function Sx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Ex=function(e){(0,Ll.Z)(n,e);var t=wx(n);function n(i){var r;return(0,Qr.Z)(this,n),r=t.call(this,i),r.parentID=void 0,Object.assign((0,Ma.Z)(r),i),r}return n}(kh),yC,wC,SC,EC,LC,Dg,DC,xC,IC,NC,Lx=(yC=(0,er.b2)(),wC=(0,er.f3)(Bi.HierarchyComponentManager),SC=(0,er.f3)(Bi.TransformComponentManager),EC=(0,er.f3)(Bi.MeshComponentManager),yC(LC=(Dg=(NC=function(){function e(){(0,Qr.Z)(this,e),ao(this,"hierarchy",DC,this),ao(this,"transform",xC,this),ao(this,"mesh",IC,this)}return(0,yo.Z)(e,[{key:"execute",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){return Hr().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return l.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var n=this;this.transform.forEach(function(i,r){(r.isDirty()||r.isLocalDirty())&&(n.setMeshAABBDirty(n.mesh.getComponentByEntity(i)),r.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var n=this;this.hierarchy.forEach(function(i,r){var l=n.transform.getComponentByEntity(i),f=n.transform.getComponentByEntity(r.parentID);l!==null&&f!==null&&l.updateTransformWithParent(f)})}},{key:"attach",value:function(n,i,r){this.hierarchy.contains(n)&&this.detach(n),this.hierarchy.create(n,{parentID:i});var l=this.mesh.getComponentByEntity(i);if(this.setMeshAABBDirty(l),l&&l.children.indexOf(n)===-1&&l.children.push(n),this.hierarchy.getCount()>1)for(var f=this.hierarchy.getCount()-1;f>0;--f)for(var w=this.hierarchy.getEntity(f),R=0;R<f;++R){var H=this.hierarchy.getComponent(R);if(H.parentID===w){this.hierarchy.moveItem(f,R),++f;break}}var Y=this.hierarchy.getComponentByEntity(n),fe=this.transform.getComponentByEntity(i);fe===null&&(fe=this.transform.create(i));var Le=this.transform.getComponentByEntity(n);Le===null&&(Le=this.transform.create(n),fe=this.transform.getComponentByEntity(i)),Le.parent=fe,!r&&fe&&(Le.matrixTransform(Um(uc(),fe.worldTransform)),Le.updateTransform()),fe&&Le.updateTransformWithParent(fe)}},{key:"detach",value:function(n){var i=this.hierarchy.getComponentByEntity(n);if(i!==null){var r=this.transform.getComponentByEntity(n);r!==null&&(r.parent=null,r.applyTransform()),this.hierarchy.removeKeepSorted(n);var l=this.mesh.getComponentByEntity(i.parentID);if(l){var f=l.children.indexOf(n);l.children.splice(f,1)}this.setMeshAABBDirty(l)}}},{key:"detachChildren",value:function(n){var i=this.mesh.getComponentByEntity(n);i&&(i.children=[]);for(var r=0;r<this.hierarchy.getCount();){var l;if(((l=this.hierarchy.getComponent(r))===null||l===void 0?void 0:l.parentID)===n){var f=this.hierarchy.getEntity(r);this.detach(f)}else++r}}},{key:"setMeshAABBDirty",value:function(n){n&&(n.aabbDirty=!0)}}]),e}(),NC),DC=lo(Dg.prototype,"hierarchy",[wC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xC=lo(Dg.prototype,"transform",[SC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IC=lo(Dg.prototype,"mesh",[EC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dg))||LC);function ja(){var e=new cl(4);return cl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function MA(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Uh(e,t,n){n=n*.5;var i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function AA(e,t){var n=Math.acos(t[3])*2,i=Math.sin(n/2);return i>glMatrix.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function RA(e,t){var n=Mx(e,t);return Math.acos(2*n*n-1)}function Xc(e,t,n){var i=t[0],r=t[1],l=t[2],f=t[3],w=n[0],R=n[1],H=n[2],Y=n[3];return e[0]=i*Y+f*w+r*H-l*R,e[1]=r*Y+f*R+l*w-i*H,e[2]=l*Y+f*H+i*R-r*w,e[3]=f*Y-i*w-r*R-l*H,e}function PA(e,t,n){n*=.5;var i=t[0],r=t[1],l=t[2],f=t[3],w=Math.sin(n),R=Math.cos(n);return e[0]=i*R+f*w,e[1]=r*R+l*w,e[2]=l*R-r*w,e[3]=f*R-i*w,e}function OA(e,t,n){n*=.5;var i=t[0],r=t[1],l=t[2],f=t[3],w=Math.sin(n),R=Math.cos(n);return e[0]=i*R-l*w,e[1]=r*R+f*w,e[2]=l*R+i*w,e[3]=f*R-r*w,e}function kA(e,t,n){n*=.5;var i=t[0],r=t[1],l=t[2],f=t[3],w=Math.sin(n),R=Math.cos(n);return e[0]=i*R+r*w,e[1]=r*R-i*w,e[2]=l*R+f*w,e[3]=f*R-l*w,e}function FA(e,t){var n=t[0],i=t[1],r=t[2];return e[0]=n,e[1]=i,e[2]=r,e[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),e}function Dx(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=Math.sqrt(n*n+i*i+r*r),w=Math.exp(l),R=f>0?w*Math.sin(f)/f:0;return e[0]=n*R,e[1]=i*R,e[2]=r*R,e[3]=w*Math.cos(f),e}function xx(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=Math.sqrt(n*n+i*i+r*r),w=f>0?Math.atan2(f,l)/f:0;return e[0]=n*w,e[1]=i*w,e[2]=r*w,e[3]=.5*Math.log(n*n+i*i+r*r+l*l),e}function BA(e,t,n){return xx(e,t),Tx(e,e,n),Dx(e,e),e}function jm(e,t,n,i){var r=t[0],l=t[1],f=t[2],w=t[3],R=n[0],H=n[1],Y=n[2],fe=n[3],Le,Me,We,Ze,He;return Me=r*R+l*H+f*Y+w*fe,Me<0&&(Me=-Me,R=-R,H=-H,Y=-Y,fe=-fe),1-Me>Dd?(Le=Math.acos(Me),We=Math.sin(Le),Ze=Math.sin((1-i)*Le)/We,He=Math.sin(i*Le)/We):(Ze=1-i,He=i),e[0]=Ze*r+He*R,e[1]=Ze*l+He*H,e[2]=Ze*f+He*Y,e[3]=Ze*w+He*fe,e}function WA(e){var t=glMatrix.RANDOM(),n=glMatrix.RANDOM(),i=glMatrix.RANDOM(),r=Math.sqrt(1-t),l=Math.sqrt(t);return e[0]=r*Math.sin(2*Math.PI*n),e[1]=r*Math.cos(2*Math.PI*n),e[2]=l*Math.sin(2*Math.PI*i),e[3]=l*Math.cos(2*Math.PI*i),e}function TC(e,t){var n=t[0],i=t[1],r=t[2],l=t[3],f=n*n+i*i+r*r+l*l,w=f?1/f:0;return e[0]=-n*w,e[1]=-i*w,e[2]=-r*w,e[3]=l*w,e}function VA(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Ix(e,t){var n=t[0]+t[4]+t[8],i;if(n>0)i=Math.sqrt(n+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[r*3+r]&&(r=2);var l=(r+1)%3,f=(r+2)%3;i=Math.sqrt(t[r*3+r]-t[l*3+l]-t[f*3+f]+1),e[r]=.5*i,i=.5/i,e[3]=(t[l*3+f]-t[f*3+l])*i,e[l]=(t[l*3+r]+t[r*3+l])*i,e[f]=(t[f*3+r]+t[r*3+f])*i}return e}function Wv(e,t,n,i){var r=.5*Math.PI/180;t*=r,n*=r,i*=r;var l=Math.sin(t),f=Math.cos(t),w=Math.sin(n),R=Math.cos(n),H=Math.sin(i),Y=Math.cos(i);return e[0]=l*R*Y-f*w*H,e[1]=f*w*Y+l*R*H,e[2]=f*R*H-l*w*Y,e[3]=f*R*Y+l*w*H,e}function UA(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var zA=KL,Vv=N_,xg=$L,HA=ZL,GA=XL,Nx=Xc,Tx=YL,Mx=eD,jA=tD,KA=QL,$A=null,ZA=JL,XA=null,Wf=qL,YA=nD,QA=iD,JA=function(){var e=Is(),t=es(1,0,0),n=es(0,1,0);return function(i,r,l){var f=yg(r,l);return f<-.999999?(Nv(e,t,r),M_(e)<1e-6&&Nv(e,n,r),bg(e,e),Uh(i,e,Math.PI),i):f>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(Nv(e,r,l),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=1+f,Wf(i,i))}}(),qA=function(){var e=ja(),t=ja();return function(n,i,r,l,f,w){return jm(e,i,f,w),jm(t,r,l,w),jm(n,e,t,2*w*(1-w)),n}}(),eR=function(){var e=_g();return function(t,n,i,r){return e[0]=i[0],e[3]=i[1],e[6]=i[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Wf(t,Ix(t,e))}}();function Ax(e){var t=Rx();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function Rx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var MC=function(e){(0,Ll.Z)(n,e);var t=Ax(n);function n(i){var r;return(0,Qr.Z)(this,n),r=t.call(this,i),r.dirtyFlag=void 0,r.localDirtyFlag=void 0,r.parent=null,r.localPosition=es(0,0,0),r.localRotation=Vv(0,0,0,1),r.localScale=es(1,1,1),r.localTransform=uc(),r.position=es(0,0,0),r.rotation=Vv(0,0,0,1),r.scaling=es(1,1,1),r.worldTransform=uc(),r.matrixTransform=function(){var l=uc();return function(f){Vh(l,r.getLocalTransform(),f),Of(r.localScale,l),Eg(r.localPosition,l),Lg(r.localRotation,l)}}(),r.rotateRollPitchYaw=function(){var l=ja(),f=ja(),w=ja();return function(R,H,Y){r.setDirty(),Wv(l,R,0,0),Wv(f,0,H,0),Wv(w,0,0,Y),Xc(r.localRotation,l,r.localRotation),Xc(r.localRotation,r.localRotation,f),Xc(r.localRotation,w,r.localRotation),Wf(r.localRotation,r.localRotation)}}(),r.lerp=function(){var l=Is(),f=ja(),w=Is(),R=Is(),H=ja(),Y=Is();return function(fe,Le,Me){r.setDirty(),Of(l,fe.worldTransform),Eg(w,fe.worldTransform),Lg(f,fe.worldTransform),Of(R,Le.worldTransform),Eg(Y,Le.worldTransform),Lg(H,Le.worldTransform),Bh(r.localScale,l,R,Me),jm(r.localRotation,f,H,Me),Bh(r.localPosition,w,Y,Me)}}(),r.translate=function(){var l=Is();return function(f){return Id(l,r.getPosition(),f),r.setPosition(l),r.setDirty(!0),(0,Ma.Z)(r)}}(),r.translateLocal=function(){return function(l){return lD(l,l,r.localRotation),Id(r.localPosition,r.localPosition,l),r.setLocalDirty(!0),(0,Ma.Z)(r)}}(),r.setPosition=function(){var l=uc();return function(f){return r.position=f,r.setLocalDirty(!0),r.parent===null?ul(r.localPosition,f):(Ov(l,r.parent.worldTransform),Um(l,l),Tv(r.localPosition,f,l)),(0,Ma.Z)(r)}}(),r.rotate=function(){var l=ja();return function(f){if(r.parent===null)Xc(r.localRotation,r.localRotation,f),Wf(r.localRotation,r.localRotation);else{var w=r.getRotation(),R=r.parent.getRotation();xg(l,R),TC(l,l),Xc(l,l,f),Xc(r.localRotation,f,w),Wf(r.localRotation,r.localRotation)}return r.setLocalDirty(),(0,Ma.Z)(r)}}(),r.rotateLocal=function(){return function(l){return Xc(r.localRotation,r.localRotation,l),Wf(r.localRotation,r.localRotation),r.setLocalDirty(!0),(0,Ma.Z)(r)}}(),r.setRotation=function(){var l=ja();return function(f){return r.parent===null?xg(r.localRotation,f):(xg(l,r.parent.getRotation()),TC(l,l),xg(r.localRotation,l),Nx(r.localRotation,r.localRotation,f)),r.setLocalDirty(!0),(0,Ma.Z)(r)}}(),r}return(0,yo.Z)(n,[{key:"setLocalPosition",value:function(r){ul(this.localPosition,r),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(r){ul(this.localScale,r),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(r){return xg(this.localRotation,r),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;r?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;r?(this.localDirtyFlag|=n.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(Ov(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(r){Vh(this.worldTransform,r.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),Of(this.localScale,this.worldTransform),Eg(this.localPosition,this.worldTransform),Lg(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=es(0,0,0),this.localRotation=Vv(0,0,0,1),this.localScale=es(1,1,1)}},{key:"scaleLocal",value:function(r){return this.setLocalDirty(),sD(this.localScale,this.localScale,r),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(cx(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return Eg(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return Lg(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return Of(this.scaling,this.worldTransform),this.scaling}}]),n}(kh);MC.DIRTY=1<<0;var Px=a(84879),AC,RC,PC,Uv,OC,kC,Ox=(AC=(0,er.b2)(),RC=(0,er.f3)(Bi.RenderEngine),AC(PC=(Uv=(kC=function(){function e(){(0,Qr.Z)(this,e),ao(this,"engine",OC,this),this.resourcePool={}}return(0,yo.Z)(e,[{key:"getOrCreateResource",value:function(n){if(!this.resourcePool[n.name]){var i=n.descriptor,r=i.width,l=i.height,f=i.usage;this.resourcePool[n.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:r,height:l,wrapS:ii.CLAMP_TO_EDGE,wrapT:ii.CLAMP_TO_EDGE,usage:f})})}return this.resourcePool[n.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),e}(),kC),OC=lo(Uv.prototype,"engine",[RC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uv))||PC);function kx(e){var t=Fx();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function Fx(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Bx=function(e){(0,Ll.Z)(n,e);var t=kx(n);function n(i){var r;return(0,Qr.Z)(this,n),r=t.call(this,i),r.name=void 0,r.name=i.name||"",r}return n}(kh),FC,BC,WC,Wx=(FC=(0,er.b2)(),FC(BC=(WC=function(){function e(){(0,Qr.Z)(this,e),this.config=void 0}return(0,yo.Z)(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(n){this.config=n}}]),e}(),WC))||BC),VC,UC,zC;(function(e){e.PANSTART="PANSTART",e.PANEND="PANEND",e.PANMOVE="PANMOVE",e.PINCH="PINCH",e.KEYDOWN="KEYDOWN",e.KEYUP="KEYUP",e.HOVER="HOVER"})(zC||(zC={}));var Vx=(VC=(0,er.b2)(),VC(UC=function(){function e(){(0,Qr.Z)(this,e)}return(0,yo.Z)(e,[{key:"listen",value:function(n){}},{key:"on",value:function(n,i){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),e}())||UC);function Ux(e){var t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16;break;default:}return t}var zx=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function HC(e){var t={};return e=e.replace(zx,function(n,i,r){var l=r.split(":"),f=l[0].trim(),w="";switch(l.length>1&&(w=l[1].trim()),i){case"bool":w=w==="true";break;case"float":case"int":w=Number(w);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":w?w=w.replace("[","").replace("]","").split(",").reduce(function(R,H){return R.push(Number(H.trim())),R},[]):w=new Array(Ux(i)).fill(0);break;default:}return t[f]=w,"uniform ".concat(i," ").concat(f,`;
`)}),{content:e,uniforms:t}}function Hx(e){return e.filter(function(t,n,i){return i.indexOf(t)===n})}var GC,jC,KC;function $C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Ig(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$C(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var Gx=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,jx=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,Kx=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,$x=/precision\s+(high|low|medium)p\s+float/,Zx=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Xx=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Yx=(GC=(0,er.b2)(),GC(jC=(KC=function(){function e(){(0,Qr.Z)(this,e),this.moduleCache={},this.rawContentCache={}}return(0,yo.Z)(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:jx,fs:Gx}),this.registerModule("sdf2d",{vs:"",fs:Kx})}},{key:"registerModule",value:function(n,i){if(!this.rawContentCache[n]){var r=i.vs,l=r===void 0?"":r,f=i.fs,w=f===void 0?"":f,R=i.uniforms,H=HC(l),Y=H.content,fe=H.uniforms,Le=HC(w),Me=Le.content,We=Le.uniforms;this.rawContentCache[n]={fs:Me,uniforms:Ig(Ig(Ig({},fe),We),R),vs:Y}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(n){var i=this;if(this.moduleCache[n])return this.moduleCache[n];var r=this.rawContentCache[n].vs||"",l=this.rawContentCache[n].fs||"",f=this.processModule(r,[],"vs"),w=f.content,R=f.includeList,H=this.processModule(l,[],"fs"),Y=H.content,fe=H.includeList,Le=Y,Me=Hx(R.concat(fe).concat(n)).reduce(function(We,Ze){return Ig(Ig({},We),i.rawContentCache[Ze].uniforms)},{});return $x.test(Y)||(Le=Zx+Y),this.moduleCache[n]={fs:Le.trim(),uniforms:Me,vs:w.trim()},this.moduleCache[n]}},{key:"processModule",value:function(n,i,r){var l=this,f=n.replace(Xx,function(w,R){var H=R.split(" "),Y=H[0].replace(/"/g,"");if(i.indexOf(Y)>-1)return"";var fe=l.rawContentCache[Y][r];i.push(Y);var Le=l.processModule(fe||"",i,r),Me=Le.content;return Me});return{content:f,includeList:i}}}]),e}(),KC))||jC),Zu=new er.W2,ZC=(0,Px.Z)(Zu,!1),tR=function(t){var n=ZC.lazyInject(t);return function(i,r,l){n.call(this,i,r),l&&(l.initializer=function(){return i[r]})}},nR=function(t){var n=ZC.lazyMultiInject(t);return function(i,r,l){n.call(this,i,r),l&&(l.initializer=function(){return i[r]})}};Zu.bind(Bi.ShaderModuleService).to(Yx).inSingletonScope(),Zu.bind(Bi.NameComponentManager).toConstantValue(new Fh(Bx)),Zu.bind(Bi.HierarchyComponentManager).toConstantValue(new Fh(Ex)),Zu.bind(Bi.TransformComponentManager).toConstantValue(new Fh(MC)),Zu.bind(Bi.MeshComponentManager).toConstantValue(new Fh(JD)),Zu.bind(Bi.CullableComponentManager).toConstantValue(new Fh(XD)),Zu.bind(Bi.GeometryComponentManager).toConstantValue(new Fh(UD)),Zu.bind(Bi.MaterialComponentManager).toConstantValue(new Fh(jD));function Qx(){var e=new er.W2;return e.parent=Zu,e.bind(Bi.Systems).to(Lx).inSingletonScope().whenTargetNamed(Bi.SceneGraphSystem),e.bind(Bi.Systems).to(GL).inSingletonScope().whenTargetNamed(Bi.FrameGraphSystem),e.bind(Bi.Systems).to(rx).inSingletonScope().whenTargetNamed(Bi.MeshSystem),e.bind(Bi.Systems).to(zD).inSingletonScope().whenTargetNamed(Bi.GeometrySystem),e.bind(Bi.Systems).to(KD).inSingletonScope().whenTargetNamed(Bi.MaterialSystem),e.bind(Bi.Systems).to(yx).inSingletonScope().whenTargetNamed(Bi.RendererSystem),e.bind(Bi.ResourcePool).to(Ox).inSingletonScope(),e.bind(Bi.ConfigService).to(Wx).inSingletonScope(),e.bind(Bi.InteractorService).to(Vx).inSingletonScope(),e.bind(Bi.RenderPass).to(kf).inSingletonScope().whenTargetNamed(kf.IDENTIFIER),e.bind(Bi.RenderPass).to(Gm).inSingletonScope().whenTargetNamed(Gm.IDENTIFIER),e.bind(Bi.RenderPass).to(Bv).inSingletonScope().whenTargetNamed(Bv.IDENTIFIER),e.bind(Bi.RenderPassFactory).toFactory(function(t){return function(n){return t.container.getNamed(Bi.RenderPass,n)}}),e}function zv(e){for(var t=new Pv,n=es(e[0],e[1],e[2]),i=es(e[0],e[1],e[2]),r=3;r<e.length;){var l=e[r++],f=e[r++],w=e[r++];l<n[0]&&(n[0]=l),f<n[1]&&(n[1]=f),w<n[2]&&(n[2]=w),l>i[0]&&(i[0]=l),f>i[1]&&(i[1]=f),w>i[2]&&(i[2]=w)}return t.setMinMax(n,i),t}var dc=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),iR=Is(),rR=null,oR=Is(),sR=Is(),aR=Is(),lR=Is(),cR=Is(),uR=null,dR=a(59518),hR=a(26199),fR=a(14156),gR=a(71468),mR=a(48871),pR=a(9871),XC;(function(e){e.Normal="normal",e.PostProcessing="post-processing"})(XC||(XC={}));var vR=a(25612),_R=a(92777),CR=a(20159),bR=a(61622),yR=a(20499),wR=a(64851),zh;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(zh||(zh={}));var YC;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(YC||(YC={}));var th;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(th||(th={}));var Ng;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(Ng||(Ng={}));var Jx="__DefineValuePlaceholder__";function Hv(e){return typeof e=="number"}function Nd(e){return e===void 0?0:e>360||e<-360?e%360:e}function Hh(e,t,n){return Hv(e)?es(e,t,n):e.length===3?xd(e):es(e[0],e[1],e[2])}var QC=function(){function e(t,n){(0,Qr.Z)(this,e),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=t,this.matrix=ox(n.matrix),this.right=xd(n.right),this.up=xd(n.up),this.forward=xd(n.forward),this.position=xd(n.position),this.focalPoint=xd(n.focalPoint),this.distanceVector=xd(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return(0,yo.Z)(e,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(n){n.matrix=Ov(n.matrix,this.matrix),n.right=ul(n.right,this.right),n.up=ul(n.up,this.up),n.forward=ul(n.forward,this.forward),n.position=ul(n.position,this.position),n.focalPoint=ul(n.focalPoint,this.focalPoint),n.distanceVector=ul(n.distanceVector,this.distanceVector),n.azimuth=this.azimuth,n.elevation=this.elevation,n.roll=this.roll,n.relAzimuth=this.relAzimuth,n.relElevation=this.relElevation,n.relRoll=this.relRoll,n.dollyingStep=this.dollyingStep,n.distance=this.distance}}]),e}(),JC,qC,eb,Gv,tb,nb,ib,Bs;(function(e){e.ORBITING="ORBITING",e.EXPLORING="EXPLORING",e.TRACKING="TRACKING"})(Bs||(Bs={}));var Km;(function(e){e.DEFAULT="DEFAULT",e.ROTATIONAL="ROTATIONAL",e.TRANSLATIONAL="TRANSLATIONAL",e.CINEMATIC="CINEMATIC"})(Km||(Km={}));var Gh;(function(e){e.ORTHOGRAPHIC="ORTHOGRAPHIC",e.PERSPECTIVE="PERSPECTIVE"})(Gh||(Gh={}));var Td=Math.PI/180,nh=180/Math.PI,rb=(JC=(0,er.b2)(),qC=(0,er.f3)(Bi.InteractorService),JC(eb=(Gv=(ib=nb=function(){function e(){(0,Qr.Z)(this,e),this.matrix=uc(),this.right=es(1,0,0),this.up=es(0,1,0),this.forward=es(0,0,1),this.position=es(0,0,1),this.focalPoint=es(0,0,0),this.distanceVector=es(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=Infinity,this.minDistance=-Infinity,this.rotateWorld=!1,ao(this,"interactor",tb,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=uc(),this.view=void 0,this.following=void 0,this.type=Bs.EXPLORING,this.trackingMode=Km.DEFAULT,this.projectionMode=Gh.PERSPECTIVE,this.frustum=new ex,this.landmarks=[],this.landmarkAnimationID=void 0}return(0,yo.Z)(e,[{key:"clone",value:function(){var n=new e;return n.setType(this.type,void 0),n.interactor=this.interactor,n}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(n,i){return this.type=n,this.type===Bs.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Bs.TRACKING&&i!==void 0&&this.setTrackingMode(i),this}},{key:"setProjectionMode",value:function(n){return this.projectionMode=n,this}},{key:"setTrackingMode",value:function(n){if(this.type!==Bs.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=n,this}},{key:"setWorldRotation",value:function(n){this.rotateWorld=n,this._getAngles()}},{key:"getViewTransform",value:function(){return Um(uc(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(n){return this.matrix=n,this._update(),this}},{key:"setAspect",value:function(n){return this.setPerspective(this.near,this.far,this.fov,n),this}},{key:"setViewOffset",value:function(n,i,r,l,f,w){return this.aspect=n/i,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=l,this.view.width=f,this.view.height=w,this.projectionMode===Gh.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Gh.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(n,i,r,l){return this.projectionMode=Gh.PERSPECTIVE,this.fov=r,this.near=n,this.far=i,this.aspect=l,dx(this.perspective,this.fov*Td,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(n,i,r,l,f,w){this.projectionMode=Gh.ORTHOGRAPHIC,this.rright=i,this.left=n,this.top=r,this.bottom=l,this.near=f,this.far=w;var R=(this.rright-this.left)/(2*this.zoom),H=(this.top-this.bottom)/(2*this.zoom),Y=(this.rright+this.left)/2,fe=(this.top+this.bottom)/2,Le=Y-R,Me=Y+R,We=fe+H,Ze=fe-H;if(this.view!==void 0&&this.view.enabled){var He=(this.rright-this.left)/this.view.fullWidth/this.zoom,et=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Le+=He*this.view.offsetX,Me=Le+He*this.view.width,We-=et*this.view.offsetY,Ze=We-et*this.view.height}return fx(this.perspective,Le,Me,We,Ze,f,w),this}},{key:"setPosition",value:function(n,i,r){return this._setPosition(n,i,r),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(n,i,r){var l=es(0,1,0);if(this.focalPoint=Hh(n,i,r),this.trackingMode===Km.CINEMATIC){var f=Iv(Is(),this.focalPoint,this.position);n=f[0],i=f[1],r=f[2];var w=Wm(f),R=Math.asin(i/w)*nh,H=90+Math.atan2(r,n)*nh,Y=uc();ax(Y,Y,H*Td),sx(Y,Y,R*Td),l=Tv(Is(),[0,1,0],Y)}return Um(this.matrix,gx(uc(),this.position,this.focalPoint,l)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(n){if(!(this.distance===n||n<0)){this.distance=n,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var i=Is();n=this.distance;var r=this.forward,l=this.focalPoint;return i[0]=n*r[0]+l[0],i[1]=n*r[1]+l[1],i[2]=n*r[2]+l[2],this._setPosition(i),this}}},{key:"setMaxDistance",value:function(n){return this.maxDistance=n,this}},{key:"setMinDistance",value:function(n){return this.minDistance=n,this}},{key:"changeAzimuth",value:function(n){return this.setAzimuth(this.azimuth+n),this}},{key:"changeElevation",value:function(n){return this.setElevation(this.elevation+n),this}},{key:"changeRoll",value:function(n){return this.setRoll(this.roll+n),this}},{key:"setAzimuth",value:function(n){return this.azimuth=Nd(n),this.computeMatrix(),this._getAxes(),this.type===Bs.ORBITING||this.type===Bs.EXPLORING?this._getPosition():this.type===Bs.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(n){return this.elevation=Nd(n),this.computeMatrix(),this._getAxes(),this.type===Bs.ORBITING||this.type===Bs.EXPLORING?this._getPosition():this.type===Bs.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(n){return this.roll=Nd(n),this.computeMatrix(),this._getAxes(),this.type===Bs.ORBITING||this.type===Bs.EXPLORING?this._getPosition():this.type===Bs.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(n,i,r){if(this.type===Bs.EXPLORING){n=Nd(n),i=Nd(i),r=Nd(r);var l=Uh(ja(),[1,0,0],(this.rotateWorld?1:-1)*i*Td),f=Uh(ja(),[0,1,0],(this.rotateWorld?1:-1)*n*Td),w=Uh(ja(),[0,0,1],r*Td),R=Xc(ja(),f,l);R=Xc(ja(),R,w);var H=v1(uc(),R);Sg(this.matrix,this.matrix,[0,0,-this.distance]),Vh(this.matrix,this.matrix,H),Sg(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+i)>90)return;this.relElevation=Nd(i),this.relAzimuth=Nd(n),this.relRoll=Nd(r),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Bs.ORBITING||this.type===Bs.EXPLORING?this._getPosition():this.type===Bs.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(n,i){var r=Hh(n,i,0),l=xd(this.position);return Id(l,l,Cg(Is(),this.right,r[0])),Id(l,l,Cg(Is(),this.up,r[1])),this._setPosition(l),this}},{key:"dolly",value:function(n){var i=this.forward,r=xd(this.position),l=n*this.dollyingStep,f=this.distance+n*this.dollyingStep;return l=Math.max(Math.min(f,this.maxDistance),this.minDistance)-this.distance,r[0]+=l*i[0],r[1]+=l*i[1],r[2]+=l*i[2],this._setPosition(r),this.type===Bs.ORBITING||this.type===Bs.EXPLORING?this._getDistance():this.type===Bs.TRACKING&&Id(this.focalPoint,r,this.distanceVector),this}},{key:"createLandmark",value:function(n,i){var r=this.clone();r.setPosition(i.position),r.setFocalPoint(i.focalPoint),i.roll!==void 0&&r.setRoll(i.roll);var l=new QC(n,r);return this.landmarks.push(l),l}},{key:"setLandmark",value:function(n){var i=new QC(n,this);return this.landmarks.push(i),this}},{key:"gotoLandmark",value:function(n){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,l=this.landmarks.find(function(fe){return fe.name===n});if(l){if(r===0){l.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var f=l.getPosition(),w=l.getFocalPoint(),R=l.getRoll(),H,Y=function fe(Le){H===void 0&&(H=Le);var Me=Le-H,We=(1-Math.cos(Me/r*Math.PI))/2,Ze=Is(),He=Is(),et=0;Bh(Ze,i.focalPoint,w,We),Bh(He,i.position,f,We),et=i.roll*(1-We)+R*We,i.setFocalPoint(Ze),i.setPosition(He),i.setRoll(et),i.computeMatrix();var it=T_(Ze,w)+T_(He,f);if(!(it>.01)){i.setFocalPoint(Ze),i.setPosition(He),i.setRoll(et),i.computeMatrix(),i.interactor.connect();return}Me<r&&(i.landmarkAnimationID=window.requestAnimationFrame(fe))};window.requestAnimationFrame(Y)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var n,i,r=Uh(ja(),[0,0,1],this.roll*Td);p1(this.matrix),n=Uh(ja(),[1,0,0],(this.rotateWorld&&this.type!==Bs.TRACKING||this.type===Bs.TRACKING?1:-1)*this.elevation*Td),i=Uh(ja(),[0,1,0],(this.rotateWorld&&this.type!==Bs.TRACKING||this.type===Bs.TRACKING?1:-1)*this.azimuth*Td);var l=Xc(ja(),i,n);l=Xc(ja(),l,r);var f=v1(uc(),l);this.type===Bs.ORBITING||this.type===Bs.EXPLORING?(Sg(this.matrix,this.matrix,this.focalPoint),Vh(this.matrix,this.matrix,f),Sg(this.matrix,this.matrix,[0,0,this.distance])):this.type===Bs.TRACKING&&(Sg(this.matrix,this.matrix,this.position),Vh(this.matrix,this.matrix,f))}},{key:"_setPosition",value:function(n,i,r){this.position=Hh(n,i,r);var l=this.matrix;l[12]=this.position[0],l[13]=this.position[1],l[14]=this.position[2],l[15]=1}},{key:"_getAxes",value:function(){ul(this.right,Hh(vg(pg(),[1,0,0,0],this.matrix))),ul(this.up,Hh(vg(pg(),[0,1,0,0],this.matrix))),ul(this.forward,Hh(vg(pg(),[0,0,1,0],this.matrix))),bg(this.right,this.right),bg(this.up,this.up),bg(this.forward,this.forward)}},{key:"_getAngles",value:function(){var n=this.distanceVector[0],i=this.distanceVector[1],r=this.distanceVector[2],l=Wm(this.distanceVector);if(l===0){this.elevation=0,this.azimuth=0;return}this.type===Bs.TRACKING?(this.elevation=Math.asin(i/l)*nh,this.azimuth=Math.atan2(-n,-r)*nh):this.rotateWorld?(this.elevation=Math.asin(i/l)*nh,this.azimuth=Math.atan2(-n,-r)*nh):(this.elevation=-Math.asin(i/l)*nh,this.azimuth=-Math.atan2(-n,-r)*nh)}},{key:"_getPosition",value:function(){ul(this.position,Hh(vg(pg(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Mv(this.distanceVector,[0,0,-this.distance],rD(_g(),this.matrix)),Id(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Iv(Is(),this.focalPoint,this.position),this.distance=Wm(this.distanceVector),this.dollyingStep=this.distance/100}}]),e}(),nb.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},ib),tb=lo(Gv.prototype,"interactor",[qC],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gv))||eb),ob,sb,ab,jv,lb,Tg,cb,ih=(ob=(0,er.b2)(),sb=(0,er.f3)(Bi.GeometryComponentManager),ob(ab=(jv=(cb=Tg=function(){function e(){(0,Qr.Z)(this,e),this.config=void 0,ao(this,"geometry",lb,this),this.entity=void 0,this.component=void 0}return(0,yo.Z)(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(n){this.config=n}},{key:"setEntity",value:function(n){this.entity=n,this.component=this.geometry.create(n),this.component.entity=n,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),e}(),Tg.BOX="box",Tg.SPHERE="sphere",Tg.PLANE="plane",Tg.MERGED="merged",cb),lb=lo(jv.prototype,"geometry",[sb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jv))||ab),lr=a(49469);function ub(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var qx={}.toString,eI=function(t,n){return qx.call(t)==="[object "+n+"]"},tI=eI,nI=function(e){return Array.isArray?Array.isArray(e):tI(e,"Array")},iI=9007199254740991,rI="[object Arguments]",oI="[object Array]",sI="[object Boolean]",aI="[object Date]",lI="[object Error]",cI="[object Function]",uI="[object Map]",dI="[object Number]",hI="[object Object]",fI="[object RegExp]",gI="[object Set]",mI="[object String]",pI="[object WeakMap]",vI="[object ArrayBuffer]",_I="[object DataView]",CI="[object Float32Array]",bI="[object Float64Array]",yI="[object Int8Array]",wI="[object Int16Array]",SI="[object Int32Array]",EI="[object Uint8Array]",LI="[object Uint8ClampedArray]",DI="[object Uint16Array]",xI="[object Uint32Array]",ma={};ma[CI]=ma[bI]=ma[yI]=ma[wI]=ma[SI]=ma[EI]=ma[LI]=ma[DI]=ma[xI]=!0,ma[rI]=ma[oI]=ma[vI]=ma[sI]=ma[_I]=ma[aI]=ma[lI]=ma[cI]=ma[uI]=ma[dI]=ma[hI]=ma[fI]=ma[gI]=ma[mI]=ma[pI]=!1;function SR(e){return function(t){return e(t)}}var II=Object.prototype,NI=II.toString;function TI(e){return AI(e)&&MI(e.length)&&!!ma[NI.call(e)]}function MI(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=iI}function AI(e){return!!e&&(0,Pf.Z)(e)==="object"}var db=TI,hb,fb,gb,mb,$m,pb,vb,_b;function Cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function bb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cb(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var yb=(hb=(0,er.b2)(),fb=(0,er.f3)(Bi.RenderEngine),gb=(0,er.f3)(Bi.ConfigService),hb(mb=($m=(_b=function(){function e(){(0,Qr.Z)(this,e),ao(this,"engine",pb,this),ao(this,"configService",vb,this),this.entity=$u(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,yo.Z)(e,[{key:"init",value:function(){var n=this.configService.get(),i=n.canvas,r=n.engineOptions;this.initPromise=this.engine.init(bb({canvas:i||ub(),swapChainFormat:lr.EV.BGRA8Unorm,antialiasing:!1},r))}},{key:"setBundle",value:function(n){this.compiledBundle=JSON.parse(JSON.stringify(n))}},{key:"setDispatch",value:function(n){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=n),this}},{key:"setMaxIteration",value:function(n){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=n),this}},{key:"setBinding",value:function(n,i){var r=this;if(typeof n=="string"){var l=Hv(i)||db(i)||nI(i);if(this.compiledBundle&&this.compiledBundle.context){var f=this.compiledBundle.context.defines.find(function(R){return R.name===n});if(f)return f.value=i,this;var w=this.compiledBundle.context.uniforms.find(function(R){return R.name===n});w&&(l?(w.data=i,w.isReferer=!1,w.storageClass===th.Uniform?this.model&&this.model.updateUniform(n,i):this.model&&this.model.updateBuffer(n,i)):(w.isReferer=!0,w.data=i))}}else Object.keys(n).forEach(function(R){r.setBinding(R,n[R])});return this}},{key:"execute",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r=this,l,f,w=arguments;return Hr().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(l=w.length>0&&w[0]!==void 0?w[0]:1,!this.dirty){H.next=6;break}return this.compiledBundle.context&&(l>1?this.compiledBundle.context.maxIteration=l:this.compiledBundle.context.maxIteration++),H.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(Y){var fe=Y.isReferer;return fe}).forEach(function(Y){var fe=Y.data,Le=Y.name;r.model.confirmInput(fe.model,Le)}),f=0;f<l;f++)this.model.run();return this.engine.endFrame(),H.abrupt("return",this);case 12:case"end":return H.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"getOutput",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){return Hr().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.model.readData());case 1:case"end":return l.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"compile",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r,l,f;return Hr().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,this.initPromise;case 2:return r=bb({},this.compiledBundle.context),l=this.engine.supportWebGPU?this.engine.useWGSL?Ng.WGSL:Ng.GLSL450:Ng.GLSL100,f=this.compiledBundle.shaders[l],r.defines.filter(function(H){return H.runtime}).forEach(function(H){var Y="".concat(Jx).concat(H.name);f=f.replace(Y,"".concat(H.value))}),r.shader=f,r.uniforms.forEach(function(H){if(!H.data&&H.storageClass===th.StorageBuffer){var Y=1;H.type===zh.FloatArray?Y=1:H.type===zh.Vector4FloatArray&&(Y=4),H.data=new Float32Array(r.output.length*Y).fill(0)}}),this.compiledBundle.context=r,R.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=R.sent;case 12:case"end":return R.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()}]),e}(),_b),pb=lo($m.prototype,"engine",[fb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vb=lo($m.prototype,"configService",[gb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$m))||mb),wb,Sb,Eb,Kv,Lb,Db,xb,Ib=(wb=(0,er.b2)(),Sb=(0,er.f3)(Bi.MaterialComponentManager),wb(Eb=(Kv=(xb=Db=function(){function e(){(0,Qr.Z)(this,e),this.config=void 0,ao(this,"material",Lb,this),this.entity=void 0,this.component=void 0}return(0,yo.Z)(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(n){this.config=n}},{key:"setEntity",value:function(n,i){this.entity=n,this.component=this.material.create(n),this.component.entity=n,this.component.type=i,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),e}(),Db.BASIC="basic",xb),Lb=lo(Kv.prototype,"material",[Sb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kv))||Eb),Nb,Tb,Mb,Ab,Rb,Pb,Ob,Vf,kb,Fb,Bb,Wb,Zm,Vb,rh=(Nb=(0,er.b2)(),Tb=(0,er.f3)(Bi.MeshComponentManager),Mb=(0,er.f3)(Bi.CullableComponentManager),Ab=(0,er.f3)(Bi.TransformComponentManager),Rb=(0,er.f3)(Bi.Systems),Pb=(0,er.t6)(Bi.SceneGraphSystem),Nb(Ob=(Vf=(Vb=Zm=function(){function e(){(0,Qr.Z)(this,e),this.attributes={},this.config=void 0,ao(this,"mesh",kb,this),ao(this,"cullable",Fb,this),ao(this,"transform",Bb,this),ao(this,"sceneGraphSystem",Wb,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return(0,yo.Z)(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(n){this.config=n}},{key:"setEntity",value:function(n){this.entity=n,this.cullable.create(n),this.meshComponent=this.mesh.create(n),this.transformComponent=this.transform.create(n),this.onEntityCreated()}},{key:"setMaterial",value:function(n){return this.meshComponent.material=n,this}},{key:"setGeometry",value:function(n){return this.meshComponent.geometry=n,this}},{key:"setAttributes",value:function(n){var i=this;Object.keys(n).forEach(function(r){n[r]!==void 0&&n[r]!==i.attributes[r]&&(i.onAttributeChanged({name:r,data:n[r]}),i.attributes[r]=n[r])})}},{key:"setVisible",value:function(n){var i=this;return this.meshComponent.visible=n,this.meshComponent.children.forEach(function(r){var l=i.mesh.getComponentByEntity(r);l&&(l.visible=n)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(n){return this.sceneGraphSystem.attach(this.entity,n.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(n){var i=n.name,r=n.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(i),r)}},{key:"convertAttributeName2UniformName",value:function(n){return n}}]),e}(),Zm.POINT="point",Zm.LINE="line",Zm.GRID="grid",Vb),kb=lo(Vf.prototype,"mesh",[Tb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fb=lo(Vf.prototype,"cullable",[Mb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bb=lo(Vf.prototype,"transform",[Ab],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wb=lo(Vf.prototype,"sceneGraphSystem",[Rb,Pb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vf))||Ob),RI=a(81550),PI=a.n(RI),OI=function(){function e(t,n){(0,Qr.Z)(this,e),this.attribute=void 0,this.buffer=void 0;var i=n.buffer,r=n.offset,l=n.stride,f=n.normalized,w=n.size,R=n.divisor;this.buffer=i,this.attribute={buffer:i.get(),offset:r||0,stride:l||0,normalized:f||!1,divisor:R||0},w&&(this.attribute.size=w)}return(0,yo.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),Md,Mg,Ad,Yc,Ag,oh,Rg,Xm,Xu,jh,dl,Yu,Qu,Ym,kI=(Md={},(0,xi.Z)(Md,ii.POINTS,"points"),(0,xi.Z)(Md,ii.LINES,"lines"),(0,xi.Z)(Md,ii.LINE_LOOP,"line loop"),(0,xi.Z)(Md,ii.LINE_STRIP,"line strip"),(0,xi.Z)(Md,ii.TRIANGLES,"triangles"),(0,xi.Z)(Md,ii.TRIANGLE_FAN,"triangle fan"),(0,xi.Z)(Md,ii.TRIANGLE_STRIP,"triangle strip"),Md),Ub=(Mg={},(0,xi.Z)(Mg,ii.STATIC_DRAW,"static"),(0,xi.Z)(Mg,ii.DYNAMIC_DRAW,"dynamic"),(0,xi.Z)(Mg,ii.STREAM_DRAW,"stream"),Mg),$v=(Ad={},(0,xi.Z)(Ad,ii.BYTE,"int8"),(0,xi.Z)(Ad,ii.UNSIGNED_INT,"int16"),(0,xi.Z)(Ad,ii.INT,"int32"),(0,xi.Z)(Ad,ii.UNSIGNED_BYTE,"uint8"),(0,xi.Z)(Ad,ii.UNSIGNED_SHORT,"uint16"),(0,xi.Z)(Ad,ii.UNSIGNED_INT,"uint32"),(0,xi.Z)(Ad,ii.FLOAT,"float"),Ad),FI=(Yc={},(0,xi.Z)(Yc,ii.ALPHA,"alpha"),(0,xi.Z)(Yc,ii.LUMINANCE,"luminance"),(0,xi.Z)(Yc,ii.LUMINANCE_ALPHA,"luminance alpha"),(0,xi.Z)(Yc,ii.RGB,"rgb"),(0,xi.Z)(Yc,ii.RGBA,"rgba"),(0,xi.Z)(Yc,ii.RGBA4,"rgba4"),(0,xi.Z)(Yc,ii.RGB5_A1,"rgb5 a1"),(0,xi.Z)(Yc,ii.RGB565,"rgb565"),(0,xi.Z)(Yc,ii.DEPTH_COMPONENT,"depth"),(0,xi.Z)(Yc,ii.DEPTH_STENCIL,"depth stencil"),Yc),BI=(Ag={},(0,xi.Z)(Ag,ii.DONT_CARE,"dont care"),(0,xi.Z)(Ag,ii.NICEST,"nice"),(0,xi.Z)(Ag,ii.FASTEST,"fast"),Ag),zb=(oh={},(0,xi.Z)(oh,ii.NEAREST,"nearest"),(0,xi.Z)(oh,ii.LINEAR,"linear"),(0,xi.Z)(oh,ii.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,xi.Z)(oh,ii.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,xi.Z)(oh,ii.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,xi.Z)(oh,ii.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),oh),Hb=(Rg={},(0,xi.Z)(Rg,ii.REPEAT,"repeat"),(0,xi.Z)(Rg,ii.CLAMP_TO_EDGE,"clamp"),(0,xi.Z)(Rg,ii.MIRRORED_REPEAT,"mirror"),Rg),WI=(Xm={},(0,xi.Z)(Xm,ii.NONE,"none"),(0,xi.Z)(Xm,ii.BROWSER_DEFAULT_WEBGL,"browser"),Xm),VI=(Xu={},(0,xi.Z)(Xu,ii.NEVER,"never"),(0,xi.Z)(Xu,ii.ALWAYS,"always"),(0,xi.Z)(Xu,ii.LESS,"less"),(0,xi.Z)(Xu,ii.LEQUAL,"lequal"),(0,xi.Z)(Xu,ii.GREATER,"greater"),(0,xi.Z)(Xu,ii.GEQUAL,"gequal"),(0,xi.Z)(Xu,ii.EQUAL,"equal"),(0,xi.Z)(Xu,ii.NOTEQUAL,"notequal"),Xu),Gb=(jh={},(0,xi.Z)(jh,ii.FUNC_ADD,"add"),(0,xi.Z)(jh,ii.MIN_EXT,"min"),(0,xi.Z)(jh,ii.MAX_EXT,"max"),(0,xi.Z)(jh,ii.FUNC_SUBTRACT,"subtract"),(0,xi.Z)(jh,ii.FUNC_REVERSE_SUBTRACT,"reverse subtract"),jh),Qm=(dl={},(0,xi.Z)(dl,ii.ZERO,"zero"),(0,xi.Z)(dl,ii.ONE,"one"),(0,xi.Z)(dl,ii.SRC_COLOR,"src color"),(0,xi.Z)(dl,ii.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,xi.Z)(dl,ii.SRC_ALPHA,"src alpha"),(0,xi.Z)(dl,ii.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,xi.Z)(dl,ii.DST_COLOR,"dst color"),(0,xi.Z)(dl,ii.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,xi.Z)(dl,ii.DST_ALPHA,"dst alpha"),(0,xi.Z)(dl,ii.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,xi.Z)(dl,ii.CONSTANT_COLOR,"constant color"),(0,xi.Z)(dl,ii.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,xi.Z)(dl,ii.CONSTANT_ALPHA,"constant alpha"),(0,xi.Z)(dl,ii.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,xi.Z)(dl,ii.SRC_ALPHA_SATURATE,"src alpha saturate"),dl),UI=(Yu={},(0,xi.Z)(Yu,ii.NEVER,"never"),(0,xi.Z)(Yu,ii.ALWAYS,"always"),(0,xi.Z)(Yu,ii.LESS,"less"),(0,xi.Z)(Yu,ii.LEQUAL,"lequal"),(0,xi.Z)(Yu,ii.GREATER,"greater"),(0,xi.Z)(Yu,ii.GEQUAL,"gequal"),(0,xi.Z)(Yu,ii.EQUAL,"equal"),(0,xi.Z)(Yu,ii.NOTEQUAL,"notequal"),Yu),Uf=(Qu={},(0,xi.Z)(Qu,ii.ZERO,"zero"),(0,xi.Z)(Qu,ii.KEEP,"keep"),(0,xi.Z)(Qu,ii.REPLACE,"replace"),(0,xi.Z)(Qu,ii.INVERT,"invert"),(0,xi.Z)(Qu,ii.INCR,"increment"),(0,xi.Z)(Qu,ii.DECR,"decrement"),(0,xi.Z)(Qu,ii.INCR_WRAP,"increment wrap"),(0,xi.Z)(Qu,ii.DECR_WRAP,"decrement wrap"),Qu),zI=(Ym={},(0,xi.Z)(Ym,ii.FRONT,"front"),(0,xi.Z)(Ym,ii.BACK,"back"),Ym),HI=function(){function e(t,n){(0,Qr.Z)(this,e),this.buffer=void 0;var i=n.data,r=n.usage,l=n.type;this.buffer=t.buffer({data:i,usage:Ub[r||ii.STATIC_DRAW],type:$v[l||ii.UNSIGNED_BYTE]})}return(0,yo.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(n){var i=n.data,r=n.offset;this.buffer.subdata(i,r)}}]),e}(),Fa=a(85061),GI=9007199254740991,jI="[object Arguments]",KI="[object Array]",$I="[object Boolean]",ZI="[object Date]",XI="[object Error]",YI="[object Function]",QI="[object Map]",JI="[object Number]",qI="[object Object]",e2="[object RegExp]",t2="[object Set]",n2="[object String]",i2="[object WeakMap]",r2="[object ArrayBuffer]",o2="[object DataView]",s2="[object Float32Array]",a2="[object Float64Array]",l2="[object Int8Array]",c2="[object Int16Array]",u2="[object Int32Array]",d2="[object Uint8Array]",h2="[object Uint8ClampedArray]",f2="[object Uint16Array]",g2="[object Uint32Array]",pa={};pa[s2]=pa[a2]=pa[l2]=pa[c2]=pa[u2]=pa[d2]=pa[h2]=pa[f2]=pa[g2]=!0,pa[jI]=pa[KI]=pa[r2]=pa[$I]=pa[o2]=pa[ZI]=pa[XI]=pa[YI]=pa[QI]=pa[JI]=pa[qI]=pa[e2]=pa[t2]=pa[n2]=pa[i2]=!1;function ER(e){return function(t){return e(t)}}var m2=Object.prototype,p2=m2.toString;function v2(e){return C2(e)&&_2(e.length)&&!!pa[p2.call(e)]}function _2(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=GI}function C2(e){return!!e&&(0,Pf.Z)(e)==="object"}var Zv=v2;function jb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Kb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jb(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var b2=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,$b=0,Jm=!1,y2=function(){function e(t,n){var i=this;(0,Qr.Z)(this,e),this.reGl=t,this.context=n,this.entity=$u(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var r={};this.context.uniforms.forEach(function(H){var Y=H.name,fe=H.type,Le=H.data,Me=H.isReferer,We=H.storageClass;if(We===th.StorageBuffer){if(Me)i.textureCache[Y]={data:void 0},r["".concat(Y,"Size")]=function(){return Le.compiledBundle.context.output.textureSize};else{i.textureCache[Y]=i.calcDataTexture(Y,fe,Le);var Ze=i.textureCache[Y],He=Ze.textureWidth,et=Ze.isOutput;r["".concat(Y,"Size")]=[He,He],et&&(i.outputTextureName=Y,i.context.needPingpong&&(i.outputTextureName="".concat(Y,"Output"),i.textureCache[i.outputTextureName]=i.calcDataTexture(Y,fe,Le)))}r[Y]=function(){return Jm&&console.log("[".concat(i.entity,"]: ").concat(Y," ").concat(i.textureCache[Y].id)),i.textureCache[Y].texture}}else if(We===th.Uniform){if(Le&&(Array.isArray(Le)||Zv(Le))&&Le.length>16)throw new Error("invalid data type ".concat(fe));r[Y]=function(){return H.data}}});var l=this.getOuputDataTexture(),f=l.textureWidth,w=l.texelCount;r.u_OutputTextureSize=[f,f],r.u_OutputTexelCount=w,this.context.output.textureSize=[f,f];var R={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:r,vert:b2,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(R)}return(0,yo.Z)(e,[{key:"run",value:function(){var n=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){n.computeCommand()}),Jm&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r=this,l,f,w,R,H,Y,fe,Le;return Hr().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){l=r.reGl.read()}),!l){We.next=6;break}if(f=this.getOuputDataTexture(),w=f.originalDataLength,R=f.elementsPerTexel,H=f.typedArrayConstructor,Y=H===void 0?Float32Array:H,fe=[],R!==4)for(Le=0;Le<l.length;Le+=4)R===1?fe.push(l[Le]):R===2?fe.push(l[Le],l[Le+1]):fe.push(l[Le],l[Le+1],l[Le+2]);else fe=l;return We.abrupt("return",new Y(fe.slice(0,w)));case 6:return We.abrupt("return",new Float32Array);case 7:case"end":return We.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"confirmInput",value:function(n,i){var r;this.entity===n.entity?(this.dynamicPingpong=!0,r=this):r=n,this.textureCache[i].id=r.getOuputDataTexture().id,this.textureCache[i].texture=r.getOuputDataTexture().texture,Jm&&console.log("[".concat(this.entity,"]: confirm input ").concat(i," from model ").concat(r.entity,", ").concat(r.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=this.context.uniforms.find(function(H){var Y=H.name;return Y===n});if(l){var f=this.calcDataTexture(n,l.type,i),w=f.texture,R=f.data;this.textureCache[n].data=R,this.textureCache[n].texture=w}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var n=this.context.output.name;this.textureCache[n].id=this.getOuputDataTexture().id,this.textureCache[n].texture=this.getOuputDataTexture().texture}var i=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=i,Jm&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var n=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=n}},{key:"cloneDataTexture",value:function(n){var i=n.data,r=n.textureWidth;return Kb(Kb({},n),{},{id:$b++,texture:this.reGl.texture({width:r,height:r,data:i,type:"float"})})}},{key:"calcDataTexture",value:function(n,i,r){var l=1;i===zh.Vector4FloatArray&&(l=4);for(var f=[],w=0;w<r.length;w+=l)l===1?f.push(r[w],0,0,0):l===2?f.push(r[w],r[w+1],0,0):l===3?f.push(r[w],r[w+1],r[w+2],0):l===4&&f.push(r[w],r[w+1],r[w+2],r[w+3]);var R=r.length,H=Math.ceil(R/l),Y=Math.ceil(Math.sqrt(H)),fe=Y*Y;H<fe&&f.push.apply(f,(0,Fa.Z)(new Array((fe-H)*4).fill(0)));var Le=this.reGl.texture({width:Y,height:Y,data:f,type:"float"});return{id:$b++,data:f,originalDataLength:R,typedArrayConstructor:Zv(r)?r.constructor:void 0,textureWidth:Y,texture:Le,texelCount:H,elementsPerTexel:l,isOutput:n===this.context.output.name}}}]),e}(),w2=function(){function e(t,n){(0,Qr.Z)(this,e),this.elements=void 0;var i=n.data,r=n.usage,l=n.type,f=n.count;this.elements=t.elements({data:i,usage:Ub[r||ii.STATIC_DRAW],type:$v[l||ii.UNSIGNED_BYTE],count:f})}return(0,yo.Z)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var i=n.data;this.elements.subdata(i)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}(),S2=function(){function e(t,n){(0,Qr.Z)(this,e),this.framebuffer=void 0;var i=n.width,r=n.height,l=n.color,f=n.colors,w=n.depth,R=n.stencil,H={width:i,height:r};Array.isArray(f)&&(H.colors=f.map(function(Y){return Y.get()})),l&&typeof l!="boolean"&&(H.color=l.get()),this.framebuffer=t.framebuffer(H)}return(0,yo.Z)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var i=n.width,r=n.height;this.framebuffer.resize(i,r)}}]),e}();function E2(e){var t=(0,Pf.Z)(e);return e!=null&&(t==="object"||t==="function")}function Pg(e){var t={};return Object.keys(e).forEach(function(n){Xv(n,e[n],t,"")}),t}function Xv(e,t,n,i){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||Zv(t)||t===""||t.resize!==void 0){n["".concat(i&&i+".").concat(e)]=t;return}E2(t)&&Object.keys(t).forEach(function(r){Xv(r,t[r],n,"".concat(i&&i+".").concat(e))}),Array.isArray(t)&&t.forEach(function(r,l){Object.keys(r).forEach(function(f){Xv(f,r[f],n,"".concat(i&&i+".").concat(e,"[").concat(l,"]"))})})}function Zb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function zf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zb(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var L2=function(){function e(t,n){(0,Qr.Z)(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var i=n.vs,r=n.fs,l=n.defines,f=n.attributes,w=n.uniforms,R=n.primitive,H=n.count,Y=n.elements,fe=n.depth,Le=n.blend,Me=n.stencil,We=n.cull,Ze=n.instances,He=n.scissor,et=n.viewport,it={};w&&(this.uniforms=Pg(w),Object.keys(w).forEach(function(un){it[un]=t.prop(un)}));var ut={};Object.keys(f).forEach(function(un){ut[un]=f[un].get()});var Mt=l&&this.generateDefines(l)||"",Rt={attributes:ut,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Mt,`
`).concat(r),uniforms:it,vert:`
`.concat(Mt,`
`).concat(i),primitive:kI[R===void 0?ii.TRIANGLES:R]};Ze&&(Rt.instances=Ze),H&&(Rt.count=H),Y&&(Rt.elements=Y.get()),He&&(Rt.scissor=He),et&&(Rt.viewport=et),this.initDepthDrawParams({depth:fe},Rt),this.initBlendDrawParams({blend:Le},Rt),this.initStencilDrawParams({stencil:Me},Rt),this.initCullDrawParams({cull:We},Rt),this.drawCommand=t(Rt)}return(0,yo.Z)(e,[{key:"addUniforms",value:function(n){this.uniforms=zf(zf({},this.uniforms),Pg(n))}},{key:"draw",value:function(n){var i=zf(zf({},this.uniforms),Pg(n.uniforms||{})),r={};Object.keys(i).forEach(function(l){var f=(0,Pf.Z)(i[l]);f==="boolean"||f==="number"||Array.isArray(i[l])||i[l].BYTES_PER_ELEMENT?r[l]=i[l]:f==="string"||(r[l]=i[l].get())}),this.drawCommand(r)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(n,i){var r=n.depth;r&&(i.depth={enable:r.enable===void 0?!0:!!r.enable,mask:r.mask===void 0?!0:!!r.mask,func:VI[r.func||ii.LESS],range:r.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,i){var r=n.blend;if(r){var l=r.enable,f=r.func,w=r.equation,R=r.color,H=R===void 0?[0,0,0,0]:R;i.blend={enable:!!l,func:{srcRGB:Qm[f&&f.srcRGB||ii.SRC_ALPHA],srcAlpha:Qm[f&&f.srcAlpha||ii.SRC_ALPHA],dstRGB:Qm[f&&f.dstRGB||ii.ONE_MINUS_SRC_ALPHA],dstAlpha:Qm[f&&f.dstAlpha||ii.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Gb[w&&w.rgb||ii.FUNC_ADD],alpha:Gb[w&&w.alpha||ii.FUNC_ADD]},color:H}}}},{key:"initStencilDrawParams",value:function(n,i){var r=n.stencil;if(r){var l=r.enable,f=r.mask,w=f===void 0?-1:f,R=r.func,H=R===void 0?{cmp:ii.ALWAYS,ref:0,mask:-1}:R,Y=r.opFront,fe=Y===void 0?{fail:ii.KEEP,zfail:ii.KEEP,zpass:ii.KEEP}:Y,Le=r.opBack,Me=Le===void 0?{fail:ii.KEEP,zfail:ii.KEEP,zpass:ii.KEEP}:Le;i.stencil={enable:!!l,mask:w,func:zf(zf({},H),{},{cmp:UI[H.cmp]}),opFront:{fail:Uf[fe.fail],zfail:Uf[fe.zfail],zpass:Uf[fe.zpass]},opBack:{fail:Uf[Me.fail],zfail:Uf[Me.zfail],zpass:Uf[Me.zpass]}}}}},{key:"initCullDrawParams",value:function(n,i){var r=n.cull;if(r){var l=r.enable,f=r.face,w=f===void 0?ii.BACK:f;i.cull={enable:!!l,face:zI[w]}}}},{key:"generateDefines",value:function(n){return Object.keys(n).map(function(i){return"#define ".concat(i," ").concat(Number(n[i]))}).join(`
`)}}]),e}(),D2=function(){function e(t,n){(0,Qr.Z)(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var i=n.data,r=n.type,l=r===void 0?ii.UNSIGNED_BYTE:r,f=n.width,w=n.height,R=n.flipY,H=R===void 0?!1:R,Y=n.format,fe=Y===void 0?ii.RGBA:Y,Le=n.mipmap,Me=Le===void 0?!1:Le,We=n.wrapS,Ze=We===void 0?ii.CLAMP_TO_EDGE:We,He=n.wrapT,et=He===void 0?ii.CLAMP_TO_EDGE:He,it=n.aniso,ut=it===void 0?0:it,Mt=n.alignment,Rt=Mt===void 0?1:Mt,un=n.premultiplyAlpha,jn=un===void 0?!1:un,xn=n.mag,ei=xn===void 0?ii.NEAREST:xn,ti=n.min,_i=ti===void 0?ii.NEAREST:ti,Hn=n.colorSpace,Li=Hn===void 0?ii.BROWSER_DEFAULT_WEBGL:Hn;this.width=f,this.height=w;var yi={width:f,height:w,type:$v[l],format:FI[fe],wrapS:Hb[Ze],wrapT:Hb[et],mag:zb[ei],min:zb[_i],alignment:Rt,flipY:H,colorSpace:WI[Li],premultiplyAlpha:jn,aniso:ut};i&&(yi.data=i),typeof Me=="number"?yi.mipmap=BI[Me]:typeof Me=="boolean"&&(yi.mipmap=Me),this.texture=t.texture(yi)}return(0,yo.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var i=n.width,r=n.height;this.texture.resize(i,r),this.width=i,this.height=r}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),Xb,Yb,Qb,x2=(Xb=(0,er.b2)(),Xb(Yb=(Qb=function(){function e(){var t=this;(0,Qr.Z)(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var n=(0,fs.Z)(Hr().mark(function i(r){return Hr().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!r.uniforms){f.next=3;break}return f.next=3,Promise.all(Object.keys(r.uniforms).map(function(){var w=(0,fs.Z)(Hr().mark(function R(H){var Y;return Hr().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(!(r.uniforms[H]&&r.uniforms[H].load!==void 0)){Le.next=5;break}return Le.next=3,r.uniforms[H].load();case 3:Y=Le.sent,r.uniforms[H]=Y;case 5:case"end":return Le.stop()}},R)}));return function(R){return w.apply(this,arguments)}}()));case 3:return f.abrupt("return",new L2(t.gl,r));case 4:case"end":return f.stop()}},i)}));return function(i){return n.apply(this,arguments)}}(),this.createAttribute=function(n){return new OI(t.gl,n)},this.createBuffer=function(n){return new HI(t.gl,n)},this.createElements=function(n){return new w2(t.gl,n)},this.createTexture2D=function(n){return new D2(t.gl,n)},this.createFramebuffer=function(n){return new S2(t.gl,n)},this.useFramebuffer=function(n,i){t.gl({framebuffer:n?n.get():null})(i)},this.createComputeModel=function(){var n=(0,fs.Z)(Hr().mark(function i(r){return Hr().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",new y2(t.gl,r));case 1:case"end":return f.stop()}},i)}));return function(i){return n.apply(this,arguments)}}(),this.clear=function(n){var i=n.color,r=n.depth,l=n.stencil,f=n.framebuffer,w=f===void 0?null:f,R={color:i,depth:r,stencil:l};R.framebuffer=w===null?w:w.get(),t.gl.clear(R)},this.setScissor=function(n){t.gl&&t.gl._gl&&(n.enable&&n.box?(t.gl._gl.enable(ii.SCISSOR_TEST),t.gl._gl.scissor(n.box.x,n.box.y,n.box.width,n.box.height)):t.gl._gl.disable(ii.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(n){var i=n.x,r=n.y,l=n.width,f=n.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(i,r,l,f),t.gl._refresh())},this.readPixels=function(n){var i=n.framebuffer,r=n.x,l=n.y,f=n.width,w=n.height,R={x:r,y:l,width:f,height:w};return i&&(R.framebuffer=i.get()),t.gl.read(R)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}return(0,yo.Z)(e,[{key:"init",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){return Hr().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!this.inited){f.next=2;break}return f.abrupt("return");case 2:return this.$canvas=r.canvas,f.next=5,new Promise(function(w,R){PI()({canvas:r.canvas,attributes:{alpha:!0,antialias:r.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Y,fe){(Y||!fe)&&R(Y),w(fe)}})});case 5:this.gl=f.sent,this.inited=!0;case 7:case"end":return f.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}(),Qb))||Yb);function I2(){return typeof window!="undefined"}function N2(e,t,n,i){if(!!I2()){var r=document.getElementsByTagName("head")[0],l=document.createElement("script");l.setAttribute("type","text/javascript"),l.setAttribute("src",e),i&&(l.id=i),l.onload=function(){t&&t()},l.onerror=function(f){n&&n("Unable to load script '".concat(e,"'"),f)},r.appendChild(l)}}function T2(e,t){return new Promise(function(n,i){N2(e,function(){n()},function(r,l){i(l)})})}var qm;function M2(){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,fs.Z)(Hr().mark(function e(){return Hr().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!qm){n.next=2;break}return n.abrupt("return",qm);case 2:return n.next=4,T2("https://preview.babylonjs.com/glslang/glslang.js");case 4:return qm=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),n.abrupt("return",qm);case 6:case"end":return n.stop()}},e)})),Yv.apply(this,arguments)}var A2=function(){function e(t,n){(0,Qr.Z)(this,e),this.engine=t,this.options=n,this.attribute=void 0,this.buffer=void 0;var i=n,r=i.buffer,l=i.offset,f=i.stride,w=i.normalized,R=i.size,H=i.divisor,Y=i.arrayStride,fe=i.attributes,Le=i.stepMode;this.buffer=r,this.attribute={buffer:r.get(),offset:l||0,stride:f||0,normalized:w||!1,divisor:H||0,arrayStride:Y||0,attributes:fe,stepMode:Le||"vertex"},R&&(this.attribute.size=R)}return(0,yo.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),Hf=function(){function e(t,n){(0,Qr.Z)(this,e),this.engine=t,this.options=n,this.buffer=void 0;var i=n,r=i.data,l=i.usage,f=i.type;this.buffer=this.createBuffer(r instanceof Array?new Float32Array(r):r,l||lr.FB.Vertex|lr.FB.CopyDst)}return(0,yo.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(n){var i=n.data,r=n.offset;this.setSubData(this.buffer,r,i instanceof Array?new Float32Array(i):i)}},{key:"createBuffer",value:function(n,i){var r=n.byteLength%4,l={size:n.byteLength+r,usage:i},f=this.engine.device.createBuffer(l);return this.setSubData(f,0,n),f}},{key:"setSubData",value:function(n,i,r){var l=dc?this.engine.device.getQueue():this.engine.device.defaultQueue;l.writeBuffer(n,i,r)}}]),e}();function R2(e){return typeof e=="number"}var P2=function(){function e(t,n){(0,Qr.Z)(this,e),this.engine=t,this.context=n,this.entity=$u(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return(0,yo.Z)(e,[{key:"init",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r=this,l,f,w,R,H,Y,fe;return Hr().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:l=Me.sent,f=l.computeStage,w=this.context.uniforms.filter(function(We){return We.storageClass===th.StorageBuffer}),R=this.context.uniforms.filter(function(We){return We.storageClass===th.Uniform}),H=R.length?1:0,this.bindGroupEntries=[],H&&(Y=0,fe=[],R.forEach(function(We){if(R2(We.data))r.uniformGPUBufferLayout.push({name:We.name,offset:Y}),Y+=4,fe.push(We.data);else{var Ze,He=((Ze=We.data)===null||Ze===void 0?void 0:Ze.length)||1;He===3&&(He=4,We.data.push(0));var et=Y/4%4;if(et>0){var it=4-et;if(He>1&&He<=it)He===2&&(it===3&&(Y+=4,fe.push(0)),fe.push.apply(fe,(0,Fa.Z)(We.data)),r.uniformGPUBufferLayout.push({name:We.name,offset:Y}));else{for(var ut=0;ut<it;ut++)Y+=4,fe.push(0);fe.push.apply(fe,(0,Fa.Z)(We.data)),r.uniformGPUBufferLayout.push({name:We.name,offset:Y})}}Y+=4*He}}),this.uniformBuffer=new Hf(this.engine,{data:fe instanceof Array?new Float32Array(fe):fe,usage:lr.FB.Uniform|lr.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),w.forEach(function(We){if(We.data!==null&&(We.type===zh.Vector4FloatArray||We.type===zh.FloatArray)){var Ze;We.name===r.context.output.name?(Ze=new Hf(r.engine,{data:isFinite(Number(We.data))?[We.data]:We.data,usage:lr.FB.Storage|lr.FB.CopyDst|lr.FB.CopySrc}),r.outputBuffer=Ze,r.context.output={name:We.name,length:isFinite(Number(We.data))?1:We.data.length,typedArrayConstructor:Float32Array,gpuBuffer:Ze.get()}):We.isReferer?We.data.model&&We.data.model.outputBuffer&&(Ze=We.data.model.outputBuffer):Ze=new Hf(r.engine,{data:isFinite(Number(We.data))?[We.data]:We.data,usage:lr.FB.Storage|lr.FB.CopyDst|lr.FB.CopySrc}),r.vertexBuffers[We.name]=Ze,r.bindGroupEntries.push({binding:H,resource:{name:We.name,refer:Ze?void 0:We.data,buffer:Ze?Ze.get():void 0}}),H++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:f}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return Me.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"destroy",value:function(){var n=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(i){return n.vertexBuffers[i].destroy()})}},{key:"readData",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r,l,f,w,R,H,Y,fe,Le,Me;return Hr().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(r=this.context.output,!r){Ze.next=16;break}if(l=r.length,f=r.typedArrayConstructor,w=r.gpuBuffer,!w){Ze.next=16;break}return R=l*f.BYTES_PER_ELEMENT,H=this.engine.device.createBuffer({size:R,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),Y=this.engine.device.createCommandEncoder(),Y.copyBufferToBuffer(w,0,H,0,R),fe=dc?this.engine.device.getQueue():this.engine.device.defaultQueue,fe.submit([Y.finish()]),Ze.next=12,H.mapAsync(lr.gc.Read);case 12:return Le=H.getMappedRange(),Me=new f(Le.slice(0)),H.unmap(),Ze.abrupt("return",Me);case 16:return Ze.abrupt("return",new Float32Array);case 17:case"end":return Ze.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"run",value:function(){if(this.engine.currentComputePass){var n;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(n=this.engine.currentComputePass).dispatch.apply(n,(0,Fa.Z)(this.context.dispatch))}}},{key:"updateBuffer",value:function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=this.vertexBuffers[n];l&&l.subData({data:i,offset:r})}},{key:"updateUniform",value:function(n,i){var r=this.uniformGPUBufferLayout.find(function(l){return l.name===n});r&&this.uniformBuffer.subData({data:Number.isFinite(i)?new Float32Array([i]):new Float32Array(i),offset:r.offset})}},{key:"confirmInput",value:function(n,i){var r=this.vertexBuffers[i],l=n.outputBuffer;if(r&&l&&r!==l){var f=this.engine.device.createCommandEncoder(),w=n.context.output,R=w.length,H=w.typedArrayConstructor,Y=R*H.BYTES_PER_ELEMENT;f.copyBufferToBuffer(l.get(),0,r.get(),0,Y);var fe=dc?this.engine.device.getQueue():this.engine.device.defaultQueue;fe.submit([f.finish()])}}},{key:"compileShaderToSpirV",value:function(n,i,r){return this.compileRawShaderToSpirV(r+n,i)}},{key:"compileRawShaderToSpirV",value:function(n,i){return this.engine.glslang.compileGLSL(n,i)}},{key:"compileComputePipelineStageDescriptor",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){var l,f;return Hr().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(l=r,f=`#version 450
`,this.engine.options.useWGSL){R.next=6;break}return R.next=5,this.compileShaderToSpirV(r,"compute",f);case 5:l=R.sent;case 6:return R.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:l,isWHLSL:dc}),entryPoint:"main"}});case 7:case"end":return R.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()}]),e}(),O2=function(){function e(t,n){(0,Qr.Z)(this,e),this.engine=t,this.options=n,this.indexCount=void 0,this.buffer=void 0;var i=n,r=i.data,l=i.usage,f=i.type,w=i.count;this.indexCount=w||0,this.buffer=new Hf(t,{data:r instanceof Array?new Uint16Array(r):r,usage:lr.FB.Index|lr.FB.CopyDst})}return(0,yo.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),k2=function(){function e(t,n){(0,Qr.Z)(this,e),this.engine=t,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var i=n,r=i.width,l=i.height,f=i.color,w=i.colors,R=i.depth,H=i.stencil;f&&(this.colorTexture=f),R&&(this.depthTexture=R)}return(0,yo.Z)(e,[{key:"get",value:function(){var n,i;return{color:(n=this.colorTexture)===null||n===void 0?void 0:n.get(),depth:(i=this.depthTexture)===null||i===void 0?void 0:i.get()}}},{key:"destroy",value:function(){var n,i;(n=this.colorTexture)===null||n===void 0||n.destroy(),(i=this.depthTexture)===null||i===void 0||i.destroy()}},{key:"resize",value:function(n){var i=n.width,r=n.height;if(i!==this.width||r!==this.height){var l,f;(l=this.colorTexture)===null||l===void 0||l.resize({width:i,height:r}),(f=this.depthTexture)===null||f===void 0||f.resize({width:i,height:r})}this.width=i,this.height=r}}]),e}(),Rd,Ju,Kh,Hl,Gf,ep,Og,F2=(Rd={},(0,xi.Z)(Rd,ii.POINTS,lr.YV.PointList),(0,xi.Z)(Rd,ii.LINES,lr.YV.LineList),(0,xi.Z)(Rd,ii.LINE_LOOP,lr.YV.LineList),(0,xi.Z)(Rd,ii.LINE_STRIP,lr.YV.LineStrip),(0,xi.Z)(Rd,ii.TRIANGLES,lr.YV.TriangleList),(0,xi.Z)(Rd,ii.TRIANGLE_FAN,lr.YV.TriangleList),(0,xi.Z)(Rd,ii.TRIANGLE_STRIP,lr.YV.TriangleStrip),Rd),B2=(Ju={},(0,xi.Z)(Ju,ii.NEVER,lr.wb.Never),(0,xi.Z)(Ju,ii.ALWAYS,lr.wb.Always),(0,xi.Z)(Ju,ii.LESS,lr.wb.Less),(0,xi.Z)(Ju,ii.LEQUAL,lr.wb.LessEqual),(0,xi.Z)(Ju,ii.GREATER,lr.wb.Greater),(0,xi.Z)(Ju,ii.GEQUAL,lr.wb.GreaterEqual),(0,xi.Z)(Ju,ii.EQUAL,lr.wb.Equal),(0,xi.Z)(Ju,ii.NOTEQUAL,lr.wb.NotEqual),Ju),Jb=(Kh={},(0,xi.Z)(Kh,ii.FUNC_ADD,lr.db.Add),(0,xi.Z)(Kh,ii.MIN_EXT,lr.db.Min),(0,xi.Z)(Kh,ii.MAX_EXT,lr.db.Max),(0,xi.Z)(Kh,ii.FUNC_SUBTRACT,lr.db.Subtract),(0,xi.Z)(Kh,ii.FUNC_REVERSE_SUBTRACT,lr.db.ReverseSubtract),Kh),tp=(Hl={},(0,xi.Z)(Hl,ii.ZERO,lr.zi.Zero),(0,xi.Z)(Hl,ii.ONE,lr.zi.One),(0,xi.Z)(Hl,ii.SRC_COLOR,lr.zi.SrcColor),(0,xi.Z)(Hl,ii.ONE_MINUS_SRC_COLOR,lr.zi.OneMinusSrcColor),(0,xi.Z)(Hl,ii.SRC_ALPHA,lr.zi.SrcAlpha),(0,xi.Z)(Hl,ii.ONE_MINUS_SRC_ALPHA,lr.zi.OneMinusSrcAlpha),(0,xi.Z)(Hl,ii.DST_COLOR,lr.zi.DstColor),(0,xi.Z)(Hl,ii.ONE_MINUS_DST_COLOR,lr.zi.OneMinusDstColor),(0,xi.Z)(Hl,ii.DST_ALPHA,lr.zi.DstAlpha),(0,xi.Z)(Hl,ii.ONE_MINUS_DST_ALPHA,lr.zi.OneMinusDstAlpha),(0,xi.Z)(Hl,ii.CONSTANT_COLOR,lr.zi.BlendColor),(0,xi.Z)(Hl,ii.ONE_MINUS_CONSTANT_COLOR,lr.zi.OneMinusBlendColor),(0,xi.Z)(Hl,ii.SRC_ALPHA_SATURATE,lr.zi.SrcAlphaSaturated),Hl),W2=(Gf={},(0,xi.Z)(Gf,ii.ALPHA,"r8unorm"),(0,xi.Z)(Gf,ii.RGBA,"rgba8unorm"),(0,xi.Z)(Gf,ii.DEPTH_COMPONENT,"depth32float"),(0,xi.Z)(Gf,ii.DEPTH_STENCIL,"depth24plus-stencil8"),Gf),qb=(ep={},(0,xi.Z)(ep,ii.NEAREST,"nearest"),(0,xi.Z)(ep,ii.LINEAR,"linear"),ep),Qv=(Og={},(0,xi.Z)(Og,ii.REPEAT,"repeat"),(0,xi.Z)(Og,ii.CLAMP_TO_EDGE,"clamp-to-edge"),(0,xi.Z)(Og,ii.MIRRORED_REPEAT,"mirror-repeat"),Og);function V2(e){var t=e.cull;if(!t||!t.enable)return lr.Wf.None;if(t.face)return t.face===ii.FRONT?lr.Wf.Front:lr.Wf.Back}function U2(e){var t=e.depth,n=e.stencil,i={compare:lr.wb.Always,depthFailOp:lr.xS.Keep,failOp:lr.xS.Keep,passOp:lr.xS.Keep};return{depthWriteEnabled:t&&t.enable,depthCompare:B2[(t==null?void 0:t.func)||ii.ALWAYS],format:lr.EV.Depth24PlusStencil8,stencilFront:i,stencilBack:i,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function z2(e,t){var n=e.blend;return[{format:t,alphaBlend:{srcFactor:tp[n&&n.func&&n.func.srcAlpha||ii.ONE],dstFactor:tp[n&&n.func&&n.func.dstAlpha||ii.ZERO],operation:Jb[n&&n.equation&&n.equation.alpha||ii.FUNC_ADD]},colorBlend:{srcFactor:tp[n&&n.func&&n.func.srcRGB||ii.ONE],dstFactor:tp[n&&n.func&&n.func.dstRGB||ii.ZERO],operation:Jb[n&&n.equation&&n.equation.rgb||ii.FUNC_ADD]},writeMask:lr.Yw.All}]}function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function jf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ey(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function H2(e){for(var t=0,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var l=0,f=i;l<f.length;l++){var w=f[l];t+=w.length}for(var R=new e(t),H=0,Y=0,fe=i;Y<fe.length;Y++){var Le=fe[Y];R.set(Le,H),H+=Le.length}return R}var G2=function(){function e(t,n){(0,Qr.Z)(this,e),this.engine=t,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return(0,yo.Z)(e,[{key:"init",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r=this,l,f,w,R,H,Y,fe,Le,Me,We,Ze,He,et,it,ut,Mt,Rt,un;return Hr().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return l=this.options,f=l.vs,w=l.fs,R=l.attributes,H=l.uniforms,Y=l.primitive,fe=l.count,Le=l.elements,Me=l.depth,We=l.blend,Ze=l.stencil,He=l.cull,et=l.instances,xn.next=3,this.compilePipelineStageDescriptor(f,w,null);case 3:it=xn.sent,ut=it.vertexStage,Mt=it.fragmentStage,H&&this.buildUniformBindGroup(H),Le&&(this.indexBuffer=Le.get(),this.indexCount=Le.indexCount),Rt={vertexBuffers:Object.keys(R).map(function(ei,ti){var _i=R[ei],Hn=_i.get(),Li=Hn.arrayStride,yi=Hn.stepMode,fr=Hn.attributes;return r.attributeCache[ei]=_i,{arrayStride:Li,stepMode:yi,attributes:fr}})},un={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:F2[Y||ii.TRIANGLES],rasterizationState:jf(jf({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:V2({cull:He})}),depthStencilState:U2({depth:Me,stencil:Ze}),colorStates:z2({blend:We},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:ut,fragmentStage:Mt,vertexState:Rt},this.renderPipeline=this.engine.device.createRenderPipeline(un);case 11:case"end":return xn.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"addUniforms",value:function(n){this.uniforms=jf(jf({},this.uniforms),Pg(n))}},{key:"draw",value:function(n){var i=this,r=this.engine.getCurrentRenderPass(),l=jf(jf({},this.uniforms),Pg(n.uniforms||{})),f=[];Object.keys(l).forEach(function(w){var R=(0,Pf.Z)(l[w]);if(R==="boolean"||R==="number"||Array.isArray(l[w])||l[w].BYTES_PER_ELEMENT){var H,Y=(H=i.uniformGPUBufferLayout.find(function(et){var it=et.name;return it===w}))===null||H===void 0?void 0:H.offset;Y!==null&&i.uniformBuffer.subData({data:l[w],offset:Y})}else{var fe,Le=(fe=i.uniformGPUBufferLayout.find(function(et){var it=et.name;return it===w}))===null||fe===void 0?void 0:fe.offset;if(Le!==null){var Me=l[w].get(),We=Me.color||Me,Ze=We.texture,He=We.sampler;He&&(f.push({binding:Le,resource:He}),Le++),f.push({binding:Le,resource:Ze.createView()})}}}),this.uniformBuffer&&(f[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:f}),this.renderPipeline&&r.setPipeline(this.renderPipeline),r.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&r.setIndexBuffer(this.indexBuffer.get(),lr.iD.Uint32,0),Object.keys(this.attributeCache).forEach(function(w,R){r.setVertexBuffer(0+R,i.attributeCache[w].get().buffer,0)}),this.indexBuffer?r.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):r.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r,l,f){var w,R,H;return Hr().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(w=`#version 450
`,R=r,H=l,this.engine.options.useWGSL){fe.next=10;break}return fe.next=6,this.compileShaderToSpirV(r,"vertex",w);case 6:return R=fe.sent,fe.next=9,this.compileShaderToSpirV(l,"fragment",w);case 9:H=fe.sent;case 10:return fe.abrupt("return",this.createPipelineStageDescriptor(R,H));case 11:case"end":return fe.stop()}},i,this)}));function n(i,r,l){return t.apply(this,arguments)}return n}()},{key:"compileShaderToSpirV",value:function(n,i,r){return this.compileRawShaderToSpirV(r+n,i)}},{key:"compileRawShaderToSpirV",value:function(n,i){return this.engine.glslang.compileGLSL(n,i)}},{key:"createPipelineStageDescriptor",value:function(n,i){return{vertexStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:dc}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:i,isWHLSL:dc}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:lr.zX.CCW,cullMode:lr.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(n){var i=this,r=0,l=H2.apply(void 0,[Float32Array].concat((0,Fa.Z)(Object.keys(n).map(function(R){return n[R]?(i.uniformGPUBufferLayout.push({name:R,offset:r}),r+=(n[R].length||1)*4,n[R]):[]})))),f=[],w=!1;l.length&&(w=!0,f.push({binding:0,visibility:lr.$X.Fragment|lr.$X.Vertex,type:lr.$l.UniformBuffer})),Object.keys(n).filter(function(R){return n[R]===null}).forEach(function(R,H){i.uniformGPUBufferLayout.push({name:R,offset:H*2+(w?1:0)}),f.push({binding:H*2+(w?1:0),visibility:lr.$X.Fragment,type:lr.$l.Sampler},{binding:H*2+(w?1:0)+1,visibility:lr.$X.Fragment,type:lr.$l.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:f}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),w&&(this.uniformBuffer=new Hf(this.engine,{data:l instanceof Array?new Float32Array(l):l,usage:lr.FB.Uniform|lr.FB.CopyDst}))}}]),e}(),j2=function(){function e(t,n){(0,Qr.Z)(this,e),this.engine=t,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return(0,yo.Z)(e,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(n){var i=n.width,r=n.height;(i!==this.width||r!==this.height)&&(this.destroy(),this.createTexture()),this.width=i,this.height=r}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var n=this.options,i=n.data,r=n.type,l=r===void 0?ii.UNSIGNED_BYTE:r,f=n.width,w=n.height,R=n.flipY,H=R===void 0?!1:R,Y=n.format,fe=Y===void 0?ii.RGBA:Y,Le=n.mipmap,Me=Le===void 0?!1:Le,We=n.wrapS,Ze=We===void 0?ii.CLAMP_TO_EDGE:We,He=n.wrapT,et=He===void 0?ii.CLAMP_TO_EDGE:He,it=n.aniso,ut=it===void 0?0:it,Mt=n.alignment,Rt=Mt===void 0?1:Mt,un=n.premultiplyAlpha,jn=un===void 0?!1:un,xn=n.mag,ei=xn===void 0?ii.NEAREST:xn,ti=n.min,_i=ti===void 0?ii.NEAREST:ti,Hn=n.colorSpace,Li=Hn===void 0?ii.BROWSER_DEFAULT_WEBGL:Hn,yi=n.usage;this.width=f,this.height=w,this.texture=this.engine.device.createTexture({size:[f,w,1],mipLevelCount:1,sampleCount:1,dimension:lr.kd.E2d,format:W2[fe],usage:yi||lr.v2.Sampled|lr.v2.CopyDst}),(!yi||yi&lr.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Qv[Ze],addressModeV:Qv[et],addressModeW:Qv[Ze],magFilter:qb[ei],minFilter:qb[_i],maxAnisotropy:ut}))}}]),e}(),ty,ny,iy,K2=(ty=(0,er.b2)(),ty(ny=(iy=function(){function e(){var t=this;(0,Qr.Z)(this,e),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:Infinity,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(n){var i=n.framebuffer,r=n.color,l=n.depth,f=n.stencil;t.options.supportCompute&&t.startComputePass(),t.currentRenderTarget?(t.currentRenderPass&&t.endRenderTargetRenderPass(),t.startRenderTargetRenderPass(t.currentRenderTarget,r||null,!!l,!!f)):(t.mainColorAttachments[0].loadValue=r||lr.Ws.Load,t.mainDepthAttachment.depthLoadValue=l||lr.Ws.Load,t.mainDepthAttachment.stencilLoadValue=f?t.clearStencilValue:lr.Ws.Load,t.mainRenderPass&&t.endMainRenderPass(),t.startMainRenderPass())},this.createModel=function(){var n=(0,fs.Z)(Hr().mark(function i(r){var l;return Hr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return l=new G2(t,r),w.next=3,l.init();case 3:return w.abrupt("return",l);case 4:case"end":return w.stop()}},i)}));return function(i){return n.apply(this,arguments)}}(),this.createAttribute=function(n){return new A2(t,n)},this.createBuffer=function(n){return new Hf(t,n)},this.createElements=function(n){return new O2(t,n)},this.createTexture2D=function(n){return new j2(t,n)},this.createFramebuffer=function(n){return new k2(t,n)},this.useFramebuffer=function(n,i){t.currentRenderTarget&&t.unbindFramebuffer(t.currentRenderTarget),t.currentRenderTarget=n,t.currentRenderTargetViewDescriptor={dimension:lr.p_.E2d,arrayLayerCount:1,aspect:lr.H7.All},t.currentRenderPass=null,i()},this.createComputeModel=function(){var n=(0,fs.Z)(Hr().mark(function i(r){var l;return Hr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return l=new P2(t,r),w.next=3,l.init();case 3:return w.abrupt("return",l);case 4:case"end":return w.stop()}},i)}));return function(i){return n.apply(this,arguments)}}(),this.getCanvas=function(){return t.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(n){var i=n.x,r=n.y,l=n.width,f=n.height;if(!t.currentRenderPass)t.transientViewport={x:i,y:r,width:l,height:f};else if(t.transientViewport.x!==Infinity){var w=t.getCurrentRenderPass();w.setViewport(t.transientViewport.x,t.transientViewport.y,t.transientViewport.width,t.transientViewport.height,0,1)}else if(i!==t.cachedViewport.x||r!==t.cachedViewport.y||l!==t.cachedViewport.width||f!==t.cachedViewport.height){t.cachedViewport={x:i,y:r,width:l,height:f};var R=t.getCurrentRenderPass();R.setViewport(i,r,l,f,0,1)}},this.readPixels=function(n){throw new Error("Method not implemented.")}}return(0,yo.Z)(e,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var t=(0,fs.Z)(Hr().mark(function i(r){return Hr().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.canvas=r.canvas,this.options=r,this.useWGSL=!!r.useWGSL,this.mainPassSampleCount=r.antialiasing?this.defaultSampleCount:1,f.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return f.stop()}},i,this)}));function n(i){return t.apply(this,arguments)}return n}()},{key:"setScissor",value:function(n){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(n){return n.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),dc?this.device.getQueue().submit(this.commandBuffers.filter(function(n){return n})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(n){return n}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r,l;return Hr().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,M2();case 2:return this.glslang=w.sent,w.next=5,(r=navigator)===null||r===void 0||(l=r.gpu)===null||l===void 0?void 0:l.requestAdapter();case 5:return this.adapter=w.sent,w.next=8,this.adapter.requestDevice();case 8:this.device=w.sent;case 9:case"end":return w.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(dc?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:lr.v2.OutputAttachment|lr.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var n={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:lr.kd.E2d,format:lr.EV.BGRA8Unorm,usage:lr.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(n),this.mainColorAttachments=[{attachment:dc?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:lr.EG.Store}]}else this.mainColorAttachments=[{attachment:dc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:lr.EG.Store}];var i={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:lr.kd.E2d,format:dc?"depth32float-stencil8":lr.EV.Depth24PlusStencil8,usage:lr.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(i),this.mainDepthAttachment={attachment:dc?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:lr.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:lr.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=dc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=dc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(n,i,r){var l,f,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,R=(l=n.get().color)===null||l===void 0?void 0:l.texture,H;R&&(H=R.createView(this.currentRenderTargetViewDescriptor));var Y=(f=n.get().depth)===null||f===void 0?void 0:f.texture,fe;Y&&(fe=Y.createView());var Le=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:H,loadValue:i!==null?i:lr.Ws.Load,storeOp:lr.EG.Store}],depthStencilAttachment:Y&&fe?{attachment:fe,depthLoadValue:r?this.clearDepthValue:lr.Ws.Load,depthStoreOp:lr.EG.Store,stencilLoadValue:w?this.clearStencilValue:lr.Ws.Load,stencilStoreOp:lr.EG.Store}:void 0});this.currentRenderPass=Le,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(n){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=Infinity,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),e}(),iy))||ny),ry,oy;function $2(e){var t=Z2();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function Z2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Jv=4/64,sy=1-Jv*2,X2=(ry=(0,er.b2)(),ry(oy=function(e){(0,Ll.Z)(n,e);var t=$2(n);function n(){return(0,Qr.Z)(this,n),t.apply(this,arguments)}return(0,yo.Z)(n,[{key:"onEntityCreated",value:function(){var r=this.config,l=r.widthSegments,f=l===void 0?1:l,w=r.heightSegments,R=w===void 0?1:w,H=r.depthSegments,Y=H===void 0?1:H,fe=r.halfExtents,Le=fe===void 0?es(.5,.5,.5):fe,Me=f,We=R,Ze=Y,He=(0,Bm.Z)(Le,3),et=He[0],it=He[1],ut=He[2],Mt=[es(-et,-it,ut),es(et,-it,ut),es(et,it,ut),es(-et,it,ut),es(et,-it,-ut),es(-et,-it,-ut),es(-et,it,-ut),es(et,it,-ut)],Rt=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],un=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],jn={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},xn=[],ei=[],ti=[],_i=[],Hn=[],Li=0,yi=function(Mo,Os,Aa){var eo,xo,Gs,ur;for(Gs=0;Gs<=Os;Gs++)for(ur=0;ur<=Aa;ur++){var Ao=Is(),gs=Is(),po=Is(),Wo=Is();Bh(Ao,Mt[Rt[Mo][0]],Mt[Rt[Mo][1]],Gs/Os),Bh(gs,Mt[Rt[Mo][0]],Mt[Rt[Mo][2]],ur/Aa),Av(po,gs,Mt[Rt[Mo][0]]),Id(Wo,Ao,po),eo=Gs/Os,xo=ur/Aa,xn.push(Wo[0],Wo[1],Wo[2]),ei.push(un[Mo][0],un[Mo][1],un[Mo][2]),ti.push(eo,xo),eo/=3,xo/=3,eo=eo*sy+Jv,xo=xo*sy+Jv,eo+=Mo%3/3,xo+=Math.floor(Mo/3)/3,_i.push(eo,xo),Gs<Os&&ur<Aa&&(Hn.push(Li+Aa+1,Li+1,Li),Hn.push(Li+Aa+1,Li+Aa+2,Li+1)),Li++}};yi(jn.FRONT,Me,We),yi(jn.BACK,Me,We),yi(jn.TOP,Me,Ze),yi(jn.BOTTOM,Me,Ze),yi(jn.RIGHT,Ze,We),yi(jn.LEFT,Ze,We);var fr=zv(xn),To=this.getComponent();To.indices=Uint32Array.from(Hn),To.aabb=fr,To.vertexCount=Li,To.attributes=[{dirty:!0,name:"position",data:Float32Array.from(xn),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(ei),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(ti),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(ih))||oy);function Y2(e,t){if(!e&&!t)throw new Error("Please specify valid arguments for parameters a and b.");if(!t||t.length===0)return e;if(!e||e.length===0)return t;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(t))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}var ay,ly;function Q2(e){var t=J2();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function J2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var q2=(ay=(0,er.b2)(),ay(ly=function(e){(0,Ll.Z)(n,e);var t=Q2(n);function n(){return(0,Qr.Z)(this,n),t.apply(this,arguments)}return(0,yo.Z)(n,[{key:"onEntityCreated",value:function(){var r=this.config.geometries,l=r===void 0?[]:r,f=this.getComponent();f.aabb=new Pv;var w=[],R=[],H=0;l.forEach(function(Y){var fe=Y.aabb,Le=Y.indices,Me=Y.vertexCount,We=Y.attributes;f.aabb.add(fe),f.vertexCount+=Me,Le&&R.push.apply(R,(0,Fa.Z)(Le.map(function(Ze){return Ze+H}))),H+=Me,We.forEach(function(Ze,He){w[He]?Ze.data&&(Hv(Ze.data)?w[He].push(Ze.data):db(Ze.data)?w[He].data=Y2(w[He].data,Ze.data):w[He].data=w[He].data.concat(Ze.data)):(w[He]=Ze,w[He].dirty=!0)})}),f.attributes=w,f.indices=Uint32Array.from(R),f.dirty=!0}}]),n}(ih))||ly),cy,uy;function eN(e){var t=tN();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function tN(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var nN=(cy=(0,er.b2)(),cy(uy=function(e){(0,Ll.Z)(n,e);var t=eN(n);function n(){return(0,Qr.Z)(this,n),t.apply(this,arguments)}return(0,yo.Z)(n,[{key:"onEntityCreated",value:function(){for(var r=this.config,l=r.halfExtents,f=l===void 0?[.5,.5]:l,w=r.widthSegments,R=w===void 0?5:w,H=r.lengthSegments,Y=H===void 0?5:H,fe=[],Le=[],Me=[],We=[],Ze=0,He=0;He<=R;He++)for(var et=0;et<=Y;et++){var it=-f[0]+2*f[0]*He/R,ut=0,Mt=-(-f[1]+2*f[1]*et/Y),Rt=He/R,un=et/Y;fe.push(it,ut,Mt),Le.push(0,1,0),Me.push(Rt,un),He<R&&et<Y&&(We.push(Ze+Y+1,Ze+1,Ze),We.push(Ze+Y+1,Ze+Y+2,Ze+1)),Ze++}var jn=zv(fe),xn=this.getComponent();xn.indices=Uint32Array.from(We),xn.aabb=jn,xn.vertexCount=Ze,xn.attributes=[{dirty:!0,name:"position",data:Float32Array.from(fe),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Le),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Me),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(ih))||uy),dy,hy;function iN(e){var t=rN();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function rN(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var oN=(dy=(0,er.b2)(),dy(hy=function(e){(0,Ll.Z)(n,e);var t=iN(n);function n(){return(0,Qr.Z)(this,n),t.apply(this,arguments)}return(0,yo.Z)(n,[{key:"onEntityCreated",value:function(){for(var r=this.config,l=r.radius,f=l===void 0?.5:l,w=r.latitudeBands,R=w===void 0?16:w,H=r.longitudeBands,Y=H===void 0?16:H,fe=[],Le=[],Me=[],We=[],Ze=0;Ze<=R;Ze++)for(var He=Ze*Math.PI/R,et=Math.sin(He),it=Math.cos(He),ut=0;ut<=Y;ut++){var Mt=ut*2*Math.PI/Y-Math.PI/2,Rt=Math.sin(Mt),un=Math.cos(Mt),jn=un*et,xn=it,ei=Rt*et,ti=1-ut/Y,_i=1-Ze/R;fe.push(jn*f,xn*f,ei*f),Le.push(jn,xn,ei),Me.push(ti,_i)}for(var Hn=0;Hn<R;++Hn)for(var Li=0;Li<Y;++Li){var yi=Hn*(Y+1)+Li,fr=yi+Y+1;We.push(yi+1,fr,yi),We.push(yi+1,fr+1,fr)}var To=zv(fe),Oo=this.getComponent();Oo.indices=Uint32Array.from(We),Oo.aabb=To,Oo.vertexCount=fe.length/3,Oo.attributes=[{dirty:!0,name:"position",data:Float32Array.from(fe),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Le),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Me),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(ih))||hy),fy,gy,my,py,np,vy,_y,Cy;function sN(e){var t=aN();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function aN(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var lN=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,cN=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,uN=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,dN=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,hN=(fy=(0,er.b2)(),gy=(0,er.f3)(Bi.RenderEngine),my=(0,er.f3)(Bi.ShaderModuleService),fy(py=(np=(Cy=function(e){(0,Ll.Z)(n,e);var t=sN(n);function n(){var i;(0,Qr.Z)(this,n);for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return i=t.call.apply(t,[this].concat(l)),ao(i,"engine",vy,(0,Ma.Z)(i)),ao(i,"shaderModuleService",_y,(0,Ma.Z)(i)),i}return(0,yo.Z)(n,[{key:"onEntityCreated",value:function(){var r=this.getComponent(),l=this.engine.supportWebGPU?dN:cN,f=this.engine.supportWebGPU?uN:lN;this.shaderModuleService.registerModule("material-basic",{vs:l,fs:f});var w=this.shaderModuleService.getModule("material-basic"),R=w.vs,H=w.fs,Y=w.uniforms;r.vertexShaderGLSL=R,r.fragmentShaderGLSL=H,r.setUniform(Y),this.config.map&&(r.setDefines({USE_UV:1,USE_MAP:1}),r.setUniform({map:this.config.map,uvTransform:_g()}))}}]),n}(Ib),Cy),vy=lo(np.prototype,"engine",[gy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_y=lo(np.prototype,"shaderModuleService",[my],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),np))||py),by,yy,wy,Sy,Ey,Ly,Dy,kg,xy,Iy,Ny,Ty;function fN(e){var t=gN();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function gN(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var mN=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,pN=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,vN=(by=(0,er.b2)(),yy=(0,er.f3)(Bi.Systems),wy=(0,er.t6)(Bi.MaterialSystem),Sy=(0,er.f3)(Bi.Systems),Ey=(0,er.t6)(Bi.GeometrySystem),Ly=(0,er.f3)(Bi.ShaderModuleService),by(Dy=(kg=(Ty=function(e){(0,Ll.Z)(n,e);var t=fN(n);function n(){var i;(0,Qr.Z)(this,n);for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return i=t.call.apply(t,[this].concat(l)),ao(i,"materialSystem",xy,(0,Ma.Z)(i)),ao(i,"geometrySystem",Iy,(0,Ma.Z)(i)),ao(i,"shaderModuleService",Ny,(0,Ma.Z)(i)),i}return(0,yo.Z)(n,[{key:"onAttributeChanged",value:function(r){var l=r.name,f=r.data,w=this.getMeshComponent();w&&w.material&&(l==="gridColor"?(w.material.setUniform("u_GridColor",f),w.material.setUniform("u_GridColor2",f)):l==="gridSize"&&(w.material.setUniform("u_GridSize",f),w.material.setUniform("u_GridSize2",f)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:pN,fs:mN});var r=this.shaderModuleService.getModule("grid"),l=r.vs,f=r.fs,w=r.uniforms,R=this.materialSystem.createShaderMaterial({vertexShader:l,fragmentShader:f});this.setMaterial(R);var H=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(H),R.setCull({enable:!1,face:ii.BACK}).setDepth({enable:!0,func:ii.LESS}),R.setUniform(w),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),H.setIndex([0,3,2,2,1,0]),H.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(rh),Ty),xy=lo(kg.prototype,"materialSystem",[yy,wy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Iy=lo(kg.prototype,"geometrySystem",[Sy,Ey],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ny=lo(kg.prototype,"shaderModuleService",[Ly],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kg))||Dy),ip=a(32644),$h=a(40582);function rp(e,t,n,i,r){Fg(t,i,-r),Fg(t,i,r),e.push(n),e.push(n)}function Fg(e,t,n){e.push([[t[0],t[1]],n])}function _N(e,t,n){var i=[0,0],r=[0,0],l=[0,0],f=[0,0],w=-1,R=!1,H=null,Y=(0,ip.create)(),fe=n||0,Le=3,Me=[],We=[],Ze=[],He=[0,0];t&&(e=e.slice(),e.push(e[0]));for(var et=e.length,it=1;it<et;it++){var ut=fe,Mt=e[it-1],Rt=e[it],un=it<e.length-1?e[it+1]:null;if(He.push(it/et,it/et),(0,$h.o7)(i,Rt,Mt),H||(H=[0,0],(0,$h.mJ)(H,i)),R||(R=!0,rp(We,Me,Mt,H,1)),Ze.push([ut+0,ut+1,ut+2]),!un)(0,$h.mJ)(H,i),rp(We,Me,Rt,H,1),Ze.push(w===1?[ut,ut+2,ut+3]:[ut+2,ut+1,ut+3]),fe+=2;else{(0,$h.o7)(r,un,Rt);var jn=(0,$h.x7)(l,f,i,r,1),xn=(0,ip.dot)(l,H)<0?-1:1,ei=jn>Le;if(!isFinite(jn)){(0,$h.mJ)(H,i),rp(We,Me,Rt,H,1),Ze.push(w===1?[ut,ut+2,ut+3]:[ut+2,ut+1,ut+3]),fe+=2,w=xn;continue}ei?(jn=Le,He.push(it/et),Fg(Me,H,-xn),We.push(Rt),Fg(Me,f,jn*xn),We.push(Rt),Ze.push(w!==-xn?[ut,ut+2,ut+3]:[ut+2,ut+1,ut+3]),Ze.push([ut+2,ut+3,ut+4]),(0,$h.mJ)(Y,r),(0,ip.copy)(H,Y),Fg(Me,H,-xn),We.push(Rt),fe+=3):(rp(We,Me,Rt,f,jn),Ze.push(w===1?[ut,ut+2,ut+3]:[ut+2,ut+1,ut+3]),xn=-1,(0,ip.copy)(H,f),fe+=2),w=xn}}return{normals:Me,attrIndex:Ze,attrPos:We,attrCounters:He}}var My,Ay,Ry,Py,Oy,ky,Fy,Bg,By,Wy,Vy,Uy;function CN(e){var t=bN();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function bN(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var yN=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,wN=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,SN=(My=(0,er.b2)(),Ay=(0,er.f3)(Bi.Systems),Ry=(0,er.t6)(Bi.MaterialSystem),Py=(0,er.f3)(Bi.Systems),Oy=(0,er.t6)(Bi.GeometrySystem),ky=(0,er.f3)(Bi.ShaderModuleService),My(Fy=(Bg=(Uy=function(e){(0,Ll.Z)(n,e);var t=CN(n);function n(){var i;(0,Qr.Z)(this,n);for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return i=t.call.apply(t,[this].concat(l)),ao(i,"materialSystem",By,(0,Ma.Z)(i)),ao(i,"geometrySystem",Wy,(0,Ma.Z)(i)),ao(i,"shaderModuleService",Vy,(0,Ma.Z)(i)),i.vertexCount=void 0,i}return(0,yo.Z)(n,[{key:"onAttributeChanged",value:function(r){var l=r.name,f=r.data,w=this.getMeshComponent();if(w&&w.material)switch(l){case"dashArray":w.material.setUniform("u_dash_array",f);break;case"dashOffset":w.material.setUniform("u_dash_offset",f);break;case"dashRatio":w.material.setUniform("u_dash_ratio",f);break;case"thickness":w.material.setUniform("u_thickness",f);break;case"color":var R=new Array(this.vertexCount).fill(void 0).map(function(){return f}).reduce(function(H,Y){return[].concat((0,Fa.Z)(H),(0,Fa.Z)(Y))},[]);w.geometry.setAttribute("a_color",Float32Array.from(R),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var r=this;this.shaderModuleService.registerModule("line",{vs:wN,fs:yN});var l=this.shaderModuleService.getModule("line"),f=l.vs,w=l.fs,R=l.uniforms,H=this.materialSystem.createShaderMaterial({vertexShader:f,fragmentShader:w}),Y=_N(this.config.points,!1),fe=Y.normals,Le=Y.attrIndex,Me=Y.attrPos,We=Y.attrCounters,Ze=Me.length;this.vertexCount=Ze;var He=this.geometrySystem.createBufferGeometry({vertexCount:Ze});this.setMaterial(H),this.setGeometry(He),H.setCull({enable:!1,face:ii.BACK}).setUniform(R),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var et=[],it=[];fe.forEach(function(Mt){var Rt=Mt[0],un=Mt[1];et.push([Rt[0],Rt[1]]),it.push(un)}),He.setIndex(Le.reduce(function(Mt,Rt){return[].concat((0,Fa.Z)(Mt),(0,Fa.Z)(Rt))},[])),He.setAttribute("a_pos",Float32Array.from(Me.reduce(function(Mt,Rt){return[].concat((0,Fa.Z)(Mt),(0,Fa.Z)(Rt))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var ut=new Array(Ze).fill(void 0).map(function(){return(0,Fa.Z)(r.config.color)}).reduce(function(Mt,Rt){return[].concat((0,Fa.Z)(Mt),(0,Fa.Z)(Rt))},[]);He.setAttribute("a_color",Float32Array.from(ut),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),He.setAttribute("a_line_miter",Float32Array.from(it),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),He.setAttribute("a_line_normal",Float32Array.from(et.reduce(function(Mt,Rt){return[].concat((0,Fa.Z)(Mt),(0,Fa.Z)(Rt))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),He.setAttribute("a_counters",Float32Array.from(We),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(rh),Uy),By=lo(Bg.prototype,"materialSystem",[Ay,Ry],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wy=lo(Bg.prototype,"geometrySystem",[Py,Oy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vy=lo(Bg.prototype,"shaderModuleService",[ky],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bg))||Fy);function EN(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}var zy,Hy,Gy,jy,Ky,$y,Zy,Wg,Xy,Yy,Qy,Jy;function qy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function LN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qy(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qy(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function DN(e){var t=xN();return function(){var i=(0,xs.Z)(e),r;if(t){var l=(0,xs.Z)(this).constructor;r=Reflect.construct(i,arguments,l)}else r=i.apply(this,arguments);return(0,Dl.Z)(this,r)}}function xN(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var IN=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,NN=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,TN=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],MN=(zy=(0,er.b2)(),Hy=(0,er.f3)(Bi.Systems),Gy=(0,er.t6)(Bi.MaterialSystem),jy=(0,er.f3)(Bi.Systems),Ky=(0,er.t6)(Bi.GeometrySystem),$y=(0,er.f3)(Bi.ShaderModuleService),zy(Zy=(Wg=(Jy=function(e){(0,Ll.Z)(n,e);var t=DN(n);function n(){var i;(0,Qr.Z)(this,n);for(var r=arguments.length,l=new Array(r),f=0;f<r;f++)l[f]=arguments[f];return i=t.call.apply(t,[this].concat(l)),ao(i,"materialSystem",Xy,(0,Ma.Z)(i)),ao(i,"geometrySystem",Yy,(0,Ma.Z)(i)),ao(i,"shaderModuleService",Qy,(0,Ma.Z)(i)),i}return(0,yo.Z)(n,[{key:"onAttributeChanged",value:function(r){var l=r.name,f=r.data,w=this.getMeshComponent();w&&w.material&&(l==="strokeWidth"?w.material.setUniform("u_stroke_width",f):l==="strokeColor"?w.material.setUniform("u_stroke_color",f):l==="strokeOpacity"?w.material.setUniform("u_stroke_opacity",f):l==="opacity"?w.material.setUniform("u_opacity",f):l==="blur"&&w.material.setUniform("u_blur",f))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:NN,fs:IN});var r=this.shaderModuleService.getModule("grid"),l=r.vs,f=r.fs,w=r.uniforms,R=this.materialSystem.createShaderMaterial({vertexShader:l,fragmentShader:f,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:ii.SRC_ALPHA,dstRGB:ii.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});R.setUniform(LN({u_device_pixel_ratio:window.devicePixelRatio},w));var H=this.buildAttributes(),Y=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:H.instancedOffsets.length/2,vertexCount:6});Y.setIndex([0,2,1,0,3,2]),Y.setAttribute("position",Float32Array.from(H.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),Y.setAttribute("offset",Float32Array.from(H.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),Y.setAttribute("color",Float32Array.from(H.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),Y.setAttribute("size",Float32Array.from(H.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),Y.setAttribute("shape",Float32Array.from(H.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),Y.setAttribute("a_PickingColor",Float32Array.from(H.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(R),this.setGeometry(Y)}},{key:"buildAttribute",value:function(r,l,f){var w,R,H,Y;(w=l.instancedPickingColors).push.apply(w,(0,Fa.Z)(EN(r.id||f))),l.instancedShapes.push(TN.indexOf(r.shape||"circle")),(R=l.instancedColors).push.apply(R,(0,Fa.Z)(r.color||[1,0,0,1])),(H=l.instancedOffsets).push.apply(H,(0,Fa.Z)(r.position||[0,0])),(Y=l.instancedSizes).push.apply(Y,(0,Fa.Z)(r.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var r=this,l={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(f,w){r.buildAttribute(f,l,w)}):this.buildAttribute(this.config,l,0),l}}]),n}(rh),Jy),Xy=lo(Wg.prototype,"materialSystem",[Hy,Gy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yy=lo(Wg.prototype,"geometrySystem",[jy,Ky],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qy=lo(Wg.prototype,"shaderModuleService",[$y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wg))||Zy),ew,tw,nw,iw,rw,Vg,ow,sw,aw,lw;function cw(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=AN(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(H){throw H},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,f=!1,w;return{s:function(){n=e[Symbol.iterator]()},n:function(){var H=n.next();return l=H.done,H},e:function(H){f=!0,w=H},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(f)throw w}}}}function AN(e,t){if(!!e){if(typeof e=="string")return uw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uw(e,t)}}function uw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var RN=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,PN=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,ON=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,kN=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,FN=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,dw=(ew=(0,er.b2)(),tw=(0,er.f3)(Bi.RenderEngine),nw=(0,er.f3)(Bi.ShaderModuleService),iw=(0,er.f3)(Bi.ConfigService),ew(rw=(Vg=(lw=function(){function e(){(0,Qr.Z)(this,e),this.container=void 0,ao(this,"engine",ow,this),ao(this,"shaderModule",sw,this),ao(this,"configService",aw,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return(0,yo.Z)(e,[{key:"init",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r,l,f,w,R;return Hr().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:kN}),this.shaderModule.registerModule("uv.vert.main",{vs:FN}),this.shaderModule.registerModule("uv.frag.declaration",{fs:ON}),this.shaderModule.registerModule("map.frag.declaration",{fs:RN}),this.shaderModule.registerModule("map.frag.main",{fs:PN}),r=this.container.getAll(Bi.Systems),l=this.configService.get(),!l.canvas){Y.next=30;break}return Y.next=11,this.engine.init({canvas:l.canvas,swapChainFormat:lr.EV.BGRA8Unorm,antialiasing:!1});case 11:f=cw(r),Y.prev=12,f.s();case 14:if((w=f.n()).done){Y.next=21;break}if(R=w.value,!R.initialize){Y.next=19;break}return Y.next=19,R.initialize();case 19:Y.next=14;break;case 21:Y.next=26;break;case 23:Y.prev=23,Y.t0=Y.catch(12),f.e(Y.t0);case 26:return Y.prev=26,f.f(),Y.finish(26);case 29:this.inited=!0;case 30:case"end":return Y.stop()}},i,this,[[12,23,26,29]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"render",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r,l,f,w,R,H,Y,fe=arguments;return Hr().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(!(!this.inited||this.rendering)){Me.next=2;break}return Me.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(We){We()}),this.rendering=!0,this.engine.beginFrame(),r=this.container.getAll(Bi.Systems),l=fe.length,f=new Array(l),w=0;w<l;w++)f[w]=fe[w];R=cw(r),Me.prev=8,R.s();case 10:if((H=R.n()).done){Me.next=17;break}if(Y=H.value,!Y.execute){Me.next=15;break}return Me.next=15,Y.execute(f);case 15:Me.next=10;break;case 17:Me.next=22;break;case 19:Me.prev=19,Me.t0=Me.catch(8),R.e(Me.t0);case 22:return Me.prev=22,R.f(),Me.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Me.stop()}},i,this,[[8,19,22,25]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"clear",value:function(n){var i=this;return this.inited?this.engine.clear(n):this.pendings.unshift(function(){i.engine.clear(n),i.pendings.shift()}),this}},{key:"setSize",value:function(n){var i=n.width,r=n.height,l=this.engine.getCanvas();return this.size={width:i,height:r},l.width=i,l.height=r,this}},{key:"getSize",value:function(){return this.size}}]),e}(),lw),ow=lo(Vg.prototype,"engine",[tw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sw=lo(Vg.prototype,"shaderModule",[nw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aw=lo(Vg.prototype,"configService",[iw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vg))||rw),hw,fw,gw,mw=(hw=(0,er.b2)(),hw(fw=(gw=function(){function e(){(0,Qr.Z)(this,e),this.entities=[]}return(0,yo.Z)(e,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(n){return this.addEntity(n.getEntity()),this}},{key:"removeRenderable",value:function(n){return this.removeEntity(n.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(n){return this.entities.indexOf(n)===-1&&this.entities.push(n),this}},{key:"removeEntity",value:function(n){var i=this.entities.indexOf(n);return this.entities.splice(i,1),this}}]),e}(),gw))||fw),pw,vw,_w,Cw=(pw=(0,er.b2)(),pw(vw=(_w=function(){function e(){(0,Qr.Z)(this,e),this.cache={}}return(0,yo.Z)(e,[{key:"get",value:function(n){return this.cache[n]}},{key:"set",value:function(n,i){this.cache[n]=i}}]),e}(),_w))||vw),bw,yw,ww,Sw,op,Ew,Lw,Dw;function xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Iw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xw(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var Nw=(bw=(0,er.b2)(),yw=(0,er.f3)(Cw),ww=(0,er.f3)(Bi.RenderEngine),bw(Sw=(op=(Dw=function(){function e(){(0,Qr.Z)(this,e),ao(this,"textureCache",Ew,this),ao(this,"engine",Lw,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return(0,yo.Z)(e,[{key:"setConfig",value:function(n){this.config=n}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r=this;return Hr().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!this.config.url){f.next=4;break}return f.abrupt("return",new Promise(function(w,R){var H=r.textureCache.get(r.config.url);if(H)w(H);else{var Y=new Image;Y.crossOrigin="Anonymous",Y.src=r.config.url,Y.onload=function(){var fe=r.engine.createTexture2D(Iw(Iw({},r.config),{},{data:Y,width:Y.width,height:Y.height,flipY:!0}));r.textureCache.set(r.config.url,fe),r.texture=fe,r.loaded=!0,w(fe)},Y.onerror=function(){R()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),f.abrupt("return",this.texture);case 7:case"end":return f.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()}]),e}(),Dw),Ew=lo(op.prototype,"textureCache",[yw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lw=lo(op.prototype,"engine",[ww],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),op))||Sw),Tw,Mw,Aw,Rw,qv,Pw,Ow,kw=(Tw=(0,er.b2)(),Mw=(0,er.f3)(Bi.Systems),Aw=(0,er.t6)(Bi.RendererSystem),Tw(Rw=(qv=(Ow=function(){function e(){(0,Qr.Z)(this,e),ao(this,"rendererSystem",Pw,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return(0,yo.Z)(e,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(n){return this.camera=n,this}},{key:"setScene",value:function(n){return this.scene=n,this}},{key:"setViewport",value:function(n){return this.viewport=n,this}},{key:"setClearColor",value:function(n){return this.clearColor=n,this}},{key:"pick",value:function(n){return this.rendererSystem.pick(n,this)}}]),e}(),Ow),Pw=lo(qv.prototype,"rendererSystem",[Mw,Aw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qv))||Rw),Fw,Bw,Ww,e0,Vw,Uw;function zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function BN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zw(Object(n),!0).forEach(function(i){(0,xi.Z)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zw(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var sp=(Fw=(0,er.b2)(),Bw=(0,er.f3)(Bi.ConfigService),Fw(Ww=(e0=(Uw=function(){function e(){(0,Qr.Z)(this,e),ao(this,"configService",Vw,this),this.container=void 0}return(0,yo.Z)(e,[{key:"getEngine",value:function(){var t=(0,fs.Z)(Hr().mark(function i(){var r,l,f,w;return Hr().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return r=this.container.get(Bi.RenderEngine),l=this.configService.get(),f=l.canvas,w=l.engineOptions,H.next=4,r.init(BN({canvas:f||ub(),swapChainFormat:lr.EV.BGRA8Unorm,antialiasing:!1},w));case 4:return H.abrupt("return",r);case 5:case"end":return H.stop()}},i,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"getTransformComponent",value:function(n){var i=this.container.get(Bi.TransformComponentManager);return i.getComponentByEntity(n)}},{key:"getMeshComponent",value:function(n){var i=this.container.get(Bi.MeshComponentManager);return i.getComponentByEntity(n)}},{key:"setConfig",value:function(n){this.configService.set(n)}},{key:"setContainer",value:function(n){this.container=n}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return $u()}},{key:"createScene",value:function(){return this.container.get(mw)}},{key:"createCamera",value:function(){return this.container.get(rb)}},{key:"createView",value:function(){return this.container.get(kw)}},{key:"createRenderable",value:function(n,i){var r=n?this.container.getNamed(Bi.Renderable,n):this.container.get(rh),l=$u();return r.setConfig(i||{}),r.setEntity(l),r}},{key:"createGeometry",value:function(n,i){var r=this.container.getNamed(Bi.Geometry,n),l=$u();return r.setConfig(i||{}),r.setEntity(l),r.getComponent()}},{key:"createMaterial",value:function(n,i){var r=this.container.getNamed(Bi.Material,n),l=$u();return r.setConfig(i||{}),r.setEntity(l,n),r.getComponent()}},{key:"createTexture2D",value:function(n){var i=this.container.get(Nw);return i.setConfig(n),i}},{key:"createBufferGeometry",value:function(n){var i=this.container.getNamed(Bi.Systems,Bi.GeometrySystem);return i.createBufferGeometry(n)}},{key:"createInstancedBufferGeometry",value:function(n){var i=this.container.getNamed(Bi.Systems,Bi.GeometrySystem);return i.createInstancedBufferGeometry(n)}},{key:"createShaderMaterial",value:function(n){var i=this.container.getNamed(Bi.Systems,Bi.MaterialSystem);return i.createShaderMaterial(n)}},{key:"createKernel",value:function(n){var i=this.container.get(yb);return typeof n=="string"?i.setBundle(JSON.parse(n)):i.setBundle(n),i.init(),i}},{key:"createRenderer",value:function(){var n=this.container.get(dw);return n.container=this.container,n.init(),n}},{key:"destroy",value:function(){var n=this.container.getAll(Bi.Systems);n.forEach(function(l){l.tearDown&&l.tearDown()});var i=this.container.get(Bi.RenderEngine);i.destroy();var r=this.container.get(Bi.InteractorService);r.destroy()}}],[{key:"create",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Qx(),r=navigator.gpu?K2:x2;i.isBound(Bi.RenderEngine)||i.bind(Bi.RenderEngine).to(r).inSingletonScope(),i.bind(dw).toSelf(),i.bind(yb).toSelf(),i.bind(rh).toSelf(),i.bind(kw).toSelf(),i.bind(rb).toSelf(),i.bind(mw).toSelf(),i.bind(e).toSelf(),i.bind(Cw).toSelf(),i.bind(Nw).toSelf(),i.bind(Bi.Geometry).to(X2).whenTargetNamed(ih.BOX),i.bind(Bi.Geometry).to(oN).whenTargetNamed(ih.SPHERE),i.bind(Bi.Geometry).to(nN).whenTargetNamed(ih.PLANE),i.bind(Bi.Geometry).to(q2).whenTargetNamed(ih.MERGED),i.bind(Bi.Material).to(hN).whenTargetNamed(Ib.BASIC),i.bind(Bi.Renderable).to(MN).whenTargetNamed(rh.POINT),i.bind(Bi.Renderable).to(SN).whenTargetNamed(rh.LINE),i.bind(Bi.Renderable).to(vN).whenTargetNamed(rh.GRID);var l=i.get(e);return l.setContainer(i),l.setConfig(n),l}}]),e}(),Uw),Vw=lo(e0.prototype,"configService",[Bw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e0))||Ww);const Kf=(e,t)=>{let n;return e?T(e)?n=()=>e:n=e:n=()=>t||1,n},WN=(e,t)=>{const n=[],i=[],r={};let l=0;for(l=0;l<e.length;l++){const w=e[l];r[w.id]=l,n.push(w.x),n.push(w.y),n.push(0),n.push(0),i.push([])}for(l=0;l<t.length;l++){const w=t[l],R=g(w,"source"),H=g(w,"target");i[r[R]].push(r[H]),i[r[H]].push(r[R])}let f=0;for(l=0;l<e.length;l++){const w=n.length,R=i[l],H=R.length;n[l*4+2]=w,n[l*4+3]=R.length,f=Math.max(f,R.length);for(let Y=0;Y<H;++Y){const fe=R[Y];n.push(+fe)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:f,array:new Float32Array(n)}},VN=(e,t,n,i)=>{const r=[],l=[],f={};let w=0;for(w=0;w<e.length;w++){const H=e[w];f[H.id]=w,r.push(H.x),r.push(H.y),r.push(0),r.push(0),l.push([])}for(w=0;w<t.length;w++){const H=t[w],Y=g(H,"source"),fe=g(H,"target");l[f[Y]].push(f[fe]),l[f[Y]].push(n(H)),l[f[Y]].push(i(H)),l[f[Y]].push(0),l[f[fe]].push(f[Y]),l[f[fe]].push(n(H)),l[f[fe]].push(i(H)),l[f[fe]].push(0)}let R=0;for(w=0;w<e.length;w++){const H=r.length,Y=l[w],fe=Y.length;r[w*4+2]=H+1048576*fe/4,r[w*4+3]=0,R=Math.max(R,fe/4);for(let Le=0;Le<fe;++Le){const Me=Y[Le];r.push(+Me)}}for(;r.length%4!=0;)r.push(0);return{maxEdgePerVetex:R,array:new Float32Array(r)}},UN=(e,t)=>{const n=[],i=e.length,r={};return t.forEach(l=>{e.forEach((f,w)=>{if(r[l[f]]===void 0&&(r[l[f]]=Object.keys(r).length),n.push(r[l[f]]),w===i-1)for(;n.length%4!=0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(r).length}},Hw=e=>{const t=[],n=e.length,i=e[0].length;for(let r=0;r<i;r++)e.forEach((l,f)=>{if(t.push(l[r]),f===n-1)for(;t.length%4!=0;)t.push(0)});return new Float32Array(t)},LR=null,zN='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',DR=null,HN='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var ap=function(e,t,n,i){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function w(Y){try{H(i.next(Y))}catch(fe){f(fe)}}function R(Y){try{H(i.throw(Y))}catch(fe){f(fe)}}function H(Y){Y.done?l(Y.value):r(Y.value).then(w,R)}H((i=i.apply(e,t||[])).next())})};class GN extends de{constructor(t){super();this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return ap(this,void 0,void 0,function*(){const t=this,n=t.nodes;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}const r={},l={};n.forEach((f,w)=>{T(f.x)||(f.x=Math.random()*this.width),T(f.y)||(f.y=Math.random()*this.height),r[f.id]=f,l[f.id]=w}),t.nodeMap=r,t.nodeIdxMap=l,yield t.run()})}executeWithWorker(t,n){return ap(this,void 0,void 0,function*(){const i=this,r=i.nodes,l=i.center;if(!r||r.length===0)return;if(r.length===1){r[0].x=l[0],r[0].y=l[1];return}const f={},w={};r.forEach((R,H)=>{T(R.x)||(R.x=Math.random()*this.width),T(R.y)||(R.y=Math.random()*this.height),f[R.id]=R,w[R.id]=H}),i.nodeMap=f,i.nodeIdxMap=w,yield i.run(t,n)})}run(t,n){return ap(this,void 0,void 0,function*(){const i=this,r=i.nodes,l=i.edges,f=i.maxIteration,w=i.center,R=i.height*i.width;let H=Math.sqrt(R)/10;const Y=R/(r.length+1),fe=Math.sqrt(Y),Le=i.speed,Me=i.clustering,{array:We,count:Ze}=UN([i.clusterField],r);r.forEach((ti,_i)=>{let Hn=0,Li=0;T(ti.fx)&&T(ti.fy)&&(Hn=ti.fx||.001,Li=ti.fy||.001),We[4*_i+1]=Hn,We[4*_i+2]=Li});const He=r.length,{maxEdgePerVetex:et,array:it}=WN(r,l),ut=i.workerEnabled;let Mt;ut?Mt=sp.create({canvas:t,engineOptions:{supportCompute:!0}}):Mt=sp.create({engineOptions:{supportCompute:!0}});const Rt=i.onLayoutEnd,un=[];for(let ti=0;ti<Ze;ti++)un.push(0,0,0,0);const jn=Mt.createKernel(zN).setDispatch([He,1,1]).setBinding({u_Data:it,u_K:fe,u_K2:Y,u_Gravity:i.gravity,u_ClusterGravity:i.clusterGravity||i.gravity||1,u_Speed:Le,u_MaxDisplace:H,u_Clustering:Me?1:0,u_Center:w,u_AttributeArray:We,u_ClusterCenters:un,MAX_EDGE_PER_VERTEX:et,VERTEX_COUNT:He});let xn;Me&&(xn=Mt.createKernel(HN).setDispatch([Ze,1,1]).setBinding({u_Data:it,u_NodeAttributes:We,u_ClusterCenters:un,VERTEX_COUNT:He,CLUSTER_COUNT:Ze})),yield(()=>ap(this,void 0,void 0,function*(){for(let _i=0;_i<f;_i++)yield jn.execute(),Me&&(xn.setBinding({u_Data:jn}),yield xn.execute(),jn.setBinding({u_ClusterCenters:xn})),jn.setBinding({u_MaxDisplace:H*=.99});const ti=yield jn.getOutput();t?n.postMessage({type:oi.GPUEND,vertexEdgeData:ti}):r.forEach((_i,Hn)=>{const Li=ti[4*Hn],yi=ti[4*Hn+1];_i.x=Li,_i.y=yi}),Rt&&Rt()}))()})}getType(){return"fruchterman-gpu"}}const xR=null,jN='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',IR=null,KN='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var t0=function(e,t,n,i){function r(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function w(Y){try{H(i.next(Y))}catch(fe){f(fe)}}function R(Y){try{H(i.throw(Y))}catch(fe){f(fe)}}function H(Y){Y.done?l(Y.value):r(Y.value).then(w,R)}H((i=i.apply(e,t||[])).next())})};class $N extends de{constructor(t){super();this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return t0(this,void 0,void 0,function*(){const t=this,n=t.nodes;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}const r={},l={};n.forEach((f,w)=>{T(f.x)||(f.x=Math.random()*t.width),T(f.y)||(f.y=Math.random()*t.height),r[f.id]=f,l[f.id]=w}),t.nodeMap=r,t.nodeIdxMap=l,t.nodeStrength=Kf(t.nodeStrength,1),t.edgeStrength=Kf(t.edgeStrength,1),yield t.run()})}executeWithWorker(t,n){const i=this,r=i.nodes,l=i.center;if(!r||r.length===0)return;if(r.length===1){r[0].x=l[0],r[0].y=l[1];return}const f={},w={};r.forEach((R,H)=>{T(R.x)||(R.x=Math.random()*i.width),T(R.y)||(R.y=Math.random()*i.height),f[R.id]=R,w[R.id]=H}),i.nodeMap=f,i.nodeIdxMap=w,i.nodeStrength=Kf(i.nodeStrength,1),i.edgeStrength=Kf(i.edgeStrength,1),i.run(t,n)}run(t,n){return t0(this,void 0,void 0,function*(){const i=this,r=i.nodes,l=i.edges,f=i.maxIteration;!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight);const w=r.length;i.linkDistance=Kf(i.linkDistance),i.edgeStrength=Kf(i.edgeStrength);const{maxEdgePerVetex:R,array:H}=VN(r,l,i.linkDistance,i.edgeStrength);i.degrees=D(r.length,i.nodeIdxMap,l);const Y=[],fe=[],Le=[],Me=[],We=[],Ze=[],He=[];i.getMass||(i.getMass=Hn=>i.degrees[i.nodeIdxMap[Hn.id]]||1);const et=i.gravity,it=i.center;r.forEach((Hn,Li)=>{Y.push(i.getMass(Hn)),fe.push(i.nodeStrength(Hn)),i.degrees[Li]||(i.degrees[Li]=0);let yi=[it[0],it[1],et];if(i.getCenter){const fr=i.getCenter(Hn,i.degrees[Li]);fr&&T(fr[0])&&T(fr[1])&&T(fr[2])&&(yi=fr)}Le.push(yi[0]),Me.push(yi[1]),We.push(yi[2]),T(Hn.fx)&&T(Hn.fy)?(Ze.push(Hn.fx||.001),He.push(Hn.fy||.001)):(Ze.push(0),He.push(0))});const ut=Hw([Y,i.degrees,fe,Ze]),Mt=Hw([Le,Me,We,He]),Rt=i.workerEnabled;let un;Rt?un=sp.create({canvas:t,engineOptions:{supportCompute:!0}}):un=sp.create({engineOptions:{supportCompute:!0}});const jn=i.onLayoutEnd,xn=[];H.forEach(Hn=>{xn.push(Hn)});for(let Hn=0;Hn<4;Hn++)xn.push(0);const ei=un.createKernel(jN).setDispatch([w,1,1]).setBinding({u_Data:H,u_damping:i.damping,u_maxSpeed:i.maxSpeed,u_minMovement:i.minMovement,u_coulombDisScale:i.coulombDisScale,u_factor:i.factor,u_NodeAttributeArray1:ut,u_NodeAttributeArray2:Mt,MAX_EDGE_PER_VERTEX:R,VERTEX_COUNT:w,u_AveMovement:xn,u_interval:i.interval}),ti=un.createKernel(KN).setDispatch([1,1,1]).setBinding({u_Data:H,VERTEX_COUNT:w,u_AveMovement:[0,0,0,0]});yield(()=>t0(this,void 0,void 0,function*(){for(let Li=0;Li<f;Li++){yield ei.execute(),ti.setBinding({u_Data:ei}),yield ti.execute();const yi=Math.max(.02,i.interval-Li*.002);ei.setBinding({u_interval:yi,u_AveMovement:ti})}const Hn=yield ei.getOutput();t?n.postMessage({type:oi.GPUEND,vertexEdgeData:Hn}):r.forEach((Li,yi)=>{const fr=Hn[4*yi],To=Hn[4*yi+1];Li.x=fr,Li.y=To}),jn&&jn()}))()})}getType(){return"gForce-gpu"}}class ZN extends de{constructor(t){super();this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const t=this,n=t.nodes,i=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){const t=this,n=t.nodes,i=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const r=t.center,l=t.velocityDecay,f=t.comboMap;t.previousLayouted||t.initPos(f);for(let H=0;H<i;H++){const Y=[];n.forEach((fe,Le)=>{Y[Le]={x:0,y:0}}),t.applyCalculate(Y),t.applyComboCenterForce(Y),n.forEach((fe,Le)=>{!T(fe.x)||!T(fe.y)||(fe.x+=Y[Le].x*l,fe.y+=Y[Le].y*l)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}const w=[0,0];n.forEach(H=>{!T(H.x)||!T(H.y)||(w[0]+=H.x,w[1]+=H.y)}),w[0]/=n.length,w[1]/=n.length;const R=[r[0]-w[0],r[1]-w[1]];n.forEach((H,Y)=>{!T(H.x)||!T(H.y)||(H.x+=R[0],H.y+=R[1])}),t.combos.forEach(H=>{const Y=f[H.id];Y&&Y.empty&&(H.x=Y.cx||H.x,H.y=Y.cy||H.y)}),t.previousLayouted=!0}initVals(){const t=this,n=t.edges,i=t.nodes,r=t.combos,l={},f={},w={};i.forEach((ti,_i)=>{f[ti.id]=ti,w[ti.id]=_i}),t.nodeMap=f,t.indexMap=w;const R={};r.forEach(ti=>{R[ti.id]=ti}),t.oriComboMap=R,t.comboMap=t.getComboMap();const H=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||H,t.preventNodeOverlap=t.preventNodeOverlap||H;const Y=t.collideStrength;Y&&(t.comboCollideStrength=Y,t.nodeCollideStrength=Y),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(let ti=0;ti<n.length;++ti){const _i=g(n[ti],"source"),Hn=g(n[ti],"target");l[_i]?l[_i]++:l[_i]=1,l[Hn]?l[Hn]++:l[Hn]=1}const fe=[];for(let ti=0;ti<n.length;++ti){const _i=g(n[ti],"source"),Hn=g(n[ti],"target");fe[ti]=l[_i]/(l[_i]+l[Hn])}this.bias=fe;const Le=t.nodeSize,Me=t.nodeSpacing;let We,Ze;if(T(Me)?Ze=()=>Me:N(Me)?Ze=Me:Ze=()=>0,this.nodeSpacing=Ze,!Le)We=ti=>ti.size?j(ti.size)?(ti.size[0]>ti.size[1]?ti.size[0]:ti.size[1])/2:x(ti.size)?(ti.size.width>ti.size.height?ti.size.width:ti.size.height)/2:ti.size/2:10;else if(N(Le))We=ti=>Le(ti);else if(j(Le)){const _i=(Le[0]>Le[1]?Le[0]:Le[1])/2;We=Hn=>_i}else{const ti=Le/2;We=_i=>ti}this.nodeSize=We;const He=t.comboSpacing;let et;T(He)?et=()=>He:N(He)?et=He:et=()=>0,this.comboSpacing=et;const it=t.comboPadding;let ut;T(it)?ut=()=>it:j(it)?ut=()=>Math.max.apply(null,it):N(it)?ut=it:ut=()=>0,this.comboPadding=ut;let Mt=this.linkDistance,Rt;Mt||(Mt=10),T(Mt)?Rt=ti=>Mt:Rt=Mt,this.linkDistance=Rt;let un=this.edgeStrength,jn;un||(un=1),T(un)?jn=ti=>un:jn=un,this.edgeStrength=jn;let xn=this.nodeStrength,ei;xn||(xn=30),T(xn)?ei=ti=>xn:ei=xn,this.nodeStrength=ei}initPos(t){this.nodes.forEach((r,l)=>{const f=r.comboId,w=t[f];f&&w?(r.x=w.cx+100/(l+1),r.y=w.cy+100/(l+1)):(r.x=100/(l+1),r.y=100/(l+1))})}getComboMap(){const t=this,n=t.nodeMap,i=t.comboTrees,r=t.oriComboMap,l={};return(i||[]).forEach(f=>{const w=[];_(f,R=>{if(R.itemType==="node"||!r[R.id])return!0;if(l[R.id]===void 0){const fe={id:R.id,name:R.id,cx:0,cy:0,count:0,depth:t.oriComboMap[R.id].depth||0,children:[]};l[R.id]=fe}const H=R.children;H&&H.forEach(fe=>{if(!l[fe.id]&&!n[fe.id])return!0;w.push(fe)});const Y=l[R.id];if(Y.cx=0,Y.cy=0,w.length===0){Y.empty=!0;const fe=r[R.id];Y.cx=fe.x,Y.cy=fe.y}return w.forEach(fe=>{if(Y.count++,fe.itemType!=="node"){const Me=l[fe.id];T(Me.cx)&&(Y.cx+=Me.cx),T(Me.cy)&&(Y.cy+=Me.cy);return}const Le=n[fe.id];!Le||(T(Le.x)&&(Y.cx+=Le.x),T(Le.y)&&(Y.cy+=Le.y))}),Y.cx/=Y.count||1,Y.cy/=Y.count||1,Y.children=w,!0})}),l}applyComboCenterForce(t){const n=this,i=n.gravity,r=n.comboGravity||i,l=this.alpha,f=n.comboTrees,w=n.indexMap,R=n.nodeMap,H=n.comboMap;(f||[]).forEach(Y=>{_(Y,fe=>{if(fe.itemType==="node"||!H[fe.id])return!0;const Me=H[fe.id],We=(Me.depth+1)/10*.5,Ze=Me.cx,He=Me.cy;return Me.cx=0,Me.cy=0,Me.children.forEach(et=>{if(et.itemType!=="node"){const xn=H[et.id];xn&&T(xn.cx)&&(Me.cx+=xn.cx),xn&&T(xn.cy)&&(Me.cy+=xn.cy);return}const it=R[et.id],ut=it.x-Ze||.005,Mt=it.y-He||.005,Rt=Math.sqrt(ut*ut+Mt*Mt),un=w[it.id],jn=r*l/Rt*We;t[un].x-=ut*jn,t[un].y-=Mt*jn,T(it.x)&&(Me.cx+=it.x),T(it.y)&&(Me.cy+=it.y)}),Me.cx/=Me.count||1,Me.cy/=Me.count||1,!0})})}applyCalculate(t){const n=this,i=n.comboMap,r=n.nodes,l={};r.forEach((w,R)=>{r.forEach((H,Y)=>{if(R<Y)return;const fe=w.x-H.x||.005,Le=w.y-H.y||.005;let Me=fe*fe+Le*Le;const We=Math.sqrt(Me);Me<1&&(Me=We),l[`${w.id}-${H.id}`]={vx:fe,vy:Le,vl2:Me,vl:We},l[`${H.id}-${w.id}`]={vl2:Me,vl:We,vx:-fe,vy:-Le}})}),n.updateComboSizes(i),n.calRepulsive(t,l),n.calAttractive(t,l),n.preventComboOverlap&&n.comboNonOverlapping(t,i)}updateComboSizes(t){const n=this,i=n.comboTrees,r=n.nodeMap,l=n.nodeSize,f=n.comboSpacing,w=n.comboPadding;(i||[]).forEach(R=>{const H=[];_(R,Y=>{if(Y.itemType==="node")return!0;const fe=t[Y.id];if(!fe)return!1;const Le=Y.children;Le&&Le.forEach(Ze=>{!t[Ze.id]&&!r[Ze.id]||H.push(Ze)}),fe.minX=Infinity,fe.minY=Infinity,fe.maxX=-Infinity,fe.maxY=-Infinity,H.forEach(Ze=>{if(Ze.itemType!=="node")return!0;const He=r[Ze.id];if(!He)return!0;const et=l(He),it=He.x-et,ut=He.y-et,Mt=He.x+et,Rt=He.y+et;fe.minX>it&&(fe.minX=it),fe.minY>ut&&(fe.minY=ut),fe.maxX<Mt&&(fe.maxX=Mt),fe.maxY<Rt&&(fe.maxY=Rt)});let Me=n.oriComboMap[Y.id].size||10;j(Me)&&(Me=Me[0]);const We=Math.max(fe.maxX-fe.minX,fe.maxY-fe.minY,Me);return fe.r=We/2+f(fe)/2+w(fe),!0})})}comboNonOverlapping(t,n){const i=this,r=i.comboTree,l=i.comboCollideStrength,f=i.indexMap,w=i.nodeMap;_(r,R=>{if(!n[R.id]&&!w[R.id]&&R.id!=="comboTreeRoot")return!1;const H=R.children;return H&&H.length>1&&H.forEach((Y,fe)=>{if(Y.itemType==="node")return!1;const Le=n[Y.id];!Le||H.forEach((Me,We)=>{if(fe<=We||Me.itemType==="node")return!1;const Ze=n[Me.id];if(!Ze)return!1;const He=Le.cx-Ze.cx||.005,et=Le.cy-Ze.cy||.005,it=He*He+et*et,ut=Le.r||1,Mt=Ze.r||1,Rt=ut+Mt,un=Mt*Mt,jn=ut*ut;if(it<Rt*Rt){const xn=Y.children;if(!xn||xn.length===0)return!1;const ei=Me.children;if(!ei||ei.length===0)return!1;const ti=Math.sqrt(it),_i=(Rt-ti)/ti*l,Hn=He*_i,Li=et*_i,yi=un/(jn+un),fr=1-yi;xn.forEach(To=>{if(To.itemType!=="node")return!1;if(!w[To.id])return;const Oo=f[To.id];ei.forEach(Mo=>{if(Mo.itemType!=="node"||!w[Mo.id])return!1;const Os=f[Mo.id];t[Oo].x+=Hn*yi,t[Oo].y+=Li*yi,t[Os].x-=Hn*fr,t[Os].y-=Li*fr})})}})}),!0})}calRepulsive(t,n){const i=this,r=i.nodes,l=i.width*i.optimizeRangeFactor,f=i.nodeStrength,w=i.alpha,R=i.nodeCollideStrength,H=i.preventNodeOverlap,Y=i.nodeSize,fe=i.nodeSpacing,Le=i.depthRepulsiveForceScale,Me=i.center;r.forEach((We,Ze)=>{if(!(!We.x||!We.y)){if(Me){const He=i.gravity,et=We.x-Me[0]||.005,it=We.y-Me[1]||.005,ut=Math.sqrt(et*et+it*it);t[Ze].x-=et*He*w/ut,t[Ze].y-=it*He*w/ut}r.forEach((He,et)=>{if(Ze===et||!He.x||!He.y)return;const{vl2:it,vl:ut}=n[`${We.id}-${He.id}`];if(ut>l)return;const{vx:Mt,vy:Rt}=n[`${We.id}-${He.id}`];let un=Math.log(Math.abs(He.depth-We.depth)/10)+1||1;un=un<1?1:un,He.comboId!==We.comboId&&(un+=1);const jn=un?Math.pow(Le,un):1,xn=f(He)*w/it*jn;if(t[Ze].x+=Mt*xn,t[Ze].y+=Rt*xn,Ze<et&&H){const ei=Y(We)+fe(We)||1,ti=Y(He)+fe(He)||1,_i=ei+ti;if(it<_i*_i){const Hn=(_i-ut)/ut*R,Li=ti*ti;let yi=Li/(ei*ei+Li);const fr=Mt*Hn,To=Rt*Hn;t[Ze].x+=fr*yi,t[Ze].y+=To*yi,yi=1-yi,t[et].x-=fr*yi,t[et].y-=To*yi}}})}})}calAttractive(t,n){const i=this,r=i.edges,l=i.linkDistance,f=i.alpha,w=i.edgeStrength,R=i.bias,H=i.depthAttractiveForceScale;r.forEach((Y,fe)=>{const Le=g(Y,"source"),Me=g(Y,"target");if(!Le||!Me||Le===Me)return;const We=i.indexMap[Le],Ze=i.indexMap[Me],He=i.nodeMap[Le],et=i.nodeMap[Me];if(!He||!et)return;let it=He.depth===et.depth?0:Math.log(Math.abs(He.depth-et.depth)/10);He.comboId===et.comboId&&(it=it/2);let ut=it?Math.pow(H,it):1;if(He.comboId!==et.comboId&&ut===1?ut=H/2:He.comboId===et.comboId&&(ut=2),!T(et.x)||!T(He.x)||!T(et.y)||!T(He.y))return;const{vl:Mt,vx:Rt,vy:un}=n[`${Me}-${Le}`],jn=(Mt-l(Y))/Mt*f*w(Y)*ut,xn=Rt*jn,ei=un*jn,ti=R[fe];t[Ze].x-=xn*ti,t[Ze].y-=ei*ti,t[We].x+=xn*(1-ti),t[We].y+=ei*(1-ti)})}getType(){return"comboForce"}}class XN extends de{constructor(t){super();this.center=[0,0],this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.comboPadding=10,this.comboTrees=[],this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,n=t.nodes,i=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){var t;const n=this,{nodes:i,edges:r,combos:l,comboEdges:f,center:w}=n,R=n.getInnerGraphs(),H={};i.forEach(et=>{H[et.id]=et});const Y={};l.forEach(et=>{Y[et.id]=et});const fe=[],Le=[],Me={};let We=!0;this.comboTrees.forEach(et=>{const it=R[et.id],ut={id:et.id,x:it.x||Y[et.id].x,y:it.y||Y[et.id].y,fx:it.fx||Y[et.id].fx,fy:it.fy||Y[et.id].fy,mass:it.mass||Y[et.id].mass,size:it.size};Le.push(ut),!isNaN(ut.x)&&ut.x!==0&&!isNaN(ut.y)&&ut.y!==0?We=!1:(ut.x=Math.random()*100,ut.y=Math.random()*100),fe.push(et.id),_(et,Mt=>(Mt.id!==et.id&&(Me[Mt.id]=et.id),!0))}),i.forEach(et=>{if(et.comboId&&Y[et.comboId])return;const it={id:et.id,x:et.x,y:et.y,fx:et.fx,fy:et.fy,mass:et.mass,size:et.size};Le.push(it),!isNaN(it.x)&&it.x!==0&&!isNaN(it.y)&&it.y!==0?We=!1:(it.x=Math.random()*100,it.y=Math.random()*100),fe.push(et.id)});const Ze=[];if(r.concat(f).forEach(et=>{const it=Me[et.source]||et.source,ut=Me[et.target]||et.target;it!==ut&&fe.includes(it)&&fe.includes(ut)&&Ze.push({source:it,target:ut})}),Le==null?void 0:Le.length){if(Le.length===1)Le[0].x=w[0],Le[0].y=w[1];else{const et={nodes:Le,edges:Ze},it=this.outerLayout||new ue({gravity:1,factor:2,linkDistance:(Mt,Rt,un)=>{var jn,xn;const ei=((((jn=Rt.size)===null||jn===void 0?void 0:jn[0])||30)+(((xn=un.size)===null||xn===void 0?void 0:xn[0])||30))/2;return Math.min(ei*1.5,700)}}),ut=(t=it.getType)===null||t===void 0?void 0:t.call(it);it.updateCfg({center:w,kg:5,preventOverlap:!0,animate:!1}),We&&On[ut]&&(Le.length<100?new y_:new pe).layout(et),it.layout(et)}Le.forEach(et=>{const it=R[et.id];if(!it){const ut=H[et.id];ut&&(ut.x=et.x,ut.y=et.y);return}it.visited=!0,it.x=et.x,it.y=et.y,it.nodes.forEach(ut=>{ut.x+=et.x,ut.y+=et.y})})}const He=Object.keys(R);for(let et=He.length-1;et>=0;et--){const it=He[et],ut=R[it];!ut||(ut.nodes.forEach(Mt=>{ut.visited||(Mt.x+=ut.x||0,Mt.y+=ut.y||0),H[Mt.id]&&(H[Mt.id].x=Mt.x,H[Mt.id].y=Mt.y)}),Y[it]&&(Y[it].x=ut.x,Y[it].y=ut.y))}return{nodes:i,edges:r,combos:l,comboEdges:f}}getInnerGraphs(){const t=this,{comboTrees:n,nodeSize:i,edges:r,comboPadding:l,spacing:f}=t,w={},R=this.innerLayout||new b_({sortBy:"id"});return R.center=[0,0],R.preventOverlap=!0,R.nodeSpacing=f,(n||[]).forEach(H=>{_(H,Y=>{var fe;let Le=(l==null?void 0:l(Y))||10;if(j(Le)&&(Le=Math.max(...Le)),(fe=Y.children)===null||fe===void 0?void 0:fe.length){const Me=Y.children.map(un=>un.itemType==="combo"?w[un.id]:Object.assign({},un)),We=Me.map(un=>un.id),Ze={nodes:Me,edges:r.filter(un=>We.includes(un.source)&&We.includes(un.target))};let He=Infinity;Me.forEach(un=>{var jn;un.size||(un.size=((jn=w[un.id])===null||jn===void 0?void 0:jn.size)||(i==null?void 0:i(un))||[30,30]),T(un.size)&&(un.size=[un.size,un.size]),He>un.size[0]&&(He=un.size[0]),He>un.size[1]&&(He=un.size[1])}),R.layout(Ze);const{minX:et,minY:it,maxX:ut,maxY:Mt}=L(Me),Rt=Math.max(ut-et,Mt-it,He)+Le*2;w[Y.id]={id:Y.id,nodes:Me,size:[Rt,Rt]}}else if(Y.itemType==="combo"){const Me=Le?[Le*2,Le*2]:[30,30];w[Y.id]={id:Y.id,nodes:[],size:Me}}return!0})}),w}initVals(){const t=this,n=t.nodeSize,i=t.spacing;let r,l;if(T(i)?l=()=>i:N(i)?l=i:l=()=>0,this.spacing=l,!n)r=R=>{const H=l(R);return R.size?j(R.size)?((R.size[0]>R.size[1]?R.size[0]:R.size[1])+H)/2:x(R.size)?((R.size.width>R.size.height?R.size.width:R.size.height)+H)/2:(R.size+H)/2:10+H/2};else if(N(n))r=R=>{const H=n(R),Y=l(R);return j(R.size)?((R.size[0]>R.size[1]?R.size[0]:R.size[1])+Y)/2:((H||10)+Y)/2};else if(j(n)){const H=(n[0]>n[1]?n[0]:n[1])/2;r=Y=>H+l(Y)/2}else{const R=n/2;r=H=>R+l(H)/2}this.nodeSize=r;const f=t.comboPadding;let w;T(f)?w=()=>f:j(f)?w=()=>Math.max.apply(null,f):N(f)?w=f:w=()=>0,this.comboPadding=w}getType(){return"comboCombined"}}class n0{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const n=this.rx-t.rx,i=this.ry-t.ry;return Math.hypot(n,i)}setPos(t,n){this.rx=t,this.ry=n}resetForce(){this.fx=0,this.fy=0}addForce(t){const n=t.rx-this.rx,i=t.ry-this.ry;let r=Math.hypot(n,i);r=r<1e-4?1e-4:r;const l=this.g*(this.degree+1)*(t.degree+1)/r;this.fx+=l*n/r,this.fy+=l*i/r}in(t){return t.contains(this.rx,this.ry)}add(t){const n=this.mass+t.mass,i=(this.rx*this.mass+t.rx*t.mass)/n,r=(this.ry*this.mass+t.ry*t.mass)/n,l=this.degree+t.degree,f={rx:i,ry:r,mass:n,degree:l};return new n0(f)}}class $f{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,n){const i=this.length/2;return t<=this.xmid+i&&t>=this.xmid-i&&n<=this.ymid+i&&n>=this.ymid-i}NW(){const t=this.xmid-this.length/4,n=this.ymid+this.length/4,i=this.length/2,r={xmid:t,ymid:n,length:i};return new $f(r)}NE(){const t=this.xmid+this.length/4,n=this.ymid+this.length/4,i=this.length/2,r={xmid:t,ymid:n,length:i};return new $f(r)}SW(){const t=this.xmid-this.length/4,n=this.ymid-this.length/4,i=this.length/2,r={xmid:t,ymid:n,length:i};return new $f(r)}SE(){const t=this.xmid+this.length/4,n=this.ymid-this.length/4,i=this.length/2,r={xmid:t,ymid:n,length:i};return new $f(r)}}class Zf{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,t!=null&&(this.quad=t)}insert(t){if(this.body==null){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new Zf(this.quad.NW()),this.NE=new Zf(this.quad.NE()),this.SW=new Zf(this.quad.SW()),this.SE=new Zf(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(t){!this.quad||(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(t){if(!(this.body==null||t===this.body))if(this._isExternal())t.addForce(this.body);else{const n=this.quad?this.quad.getLength():0,i=this.body.distanceTo(t);n/i<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}class YN extends de{constructor(t){super();this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,{nodes:n,onLayoutEnd:i,prune:r}=t;let l=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const f=[],w=n.length;for(let R=0;R<w;R+=1){const H=n[R];let Y=10,fe=10;T(H.size)&&(Y=H.size,fe=H.size),j(H.size)?(isNaN(H.size[0])||(Y=H.size[0]),isNaN(H.size[1])||(fe=H.size[1])):x(H.size)&&(Y=H.size.width,fe=H.size.height),t.getWidth&&!isNaN(t.getWidth(H))&&(fe=t.getWidth(H)),t.getHeight&&!isNaN(t.getHeight(H))&&(Y=t.getHeight(H));const Le=Math.max(Y,fe);f.push(Le)}t.barnesHut===void 0&&w>250&&(t.barnesHut=!0),t.prune===void 0&&w>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(l=250,w<=200&&w>100?l=1e3:w>200&&(l=1200),this.maxIteration=l):this.maxIteration===0&&r&&(l=100,w<=200&&w>100?l=500:w>200&&(l=950),this.maxIteration=l),t.kr||(t.kr=50,w>100&&w<=500?t.kr=20:w>500&&(t.kr=1)),t.kg||(t.kg=20,w>100&&w<=500?t.kg=10:w>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(f),i()}updateNodesByForces(t){const n=this,{edges:i,maxIteration:r}=n;let l=n.nodes;const f=i.filter(We=>{const Ze=g(We,"source"),He=g(We,"target");return Ze!==He}),w=l.length,R=f.length,H=[],Y={},fe={},Le=[];for(let We=0;We<w;We+=1)Y[l[We].id]=We,H[We]=0,(l[We].x===void 0||isNaN(l[We].x))&&(l[We].x=Math.random()*1e3),(l[We].y===void 0||isNaN(l[We].y))&&(l[We].y=Math.random()*1e3),Le.push({x:l[We].x,y:l[We].y});for(let We=0;We<R;We+=1){let Ze,He,et=0,it=0;for(let ut=0;ut<w;ut+=1){const Mt=g(f[We],"source"),Rt=g(f[We],"target");l[ut].id===Mt?(Ze=l[ut],et=ut):l[ut].id===Rt&&(He=l[ut],it=ut),fe[We]={sourceIdx:et,targetIdx:it}}Ze&&(H[Y[Ze.id]]+=1),He&&(H[Y[He.id]]+=1)}let Me=r;if(l=this.iterate(Me,Y,fe,R,H,t),n.prune){for(let We=0;We<R;We+=1)H[fe[We].sourceIdx]<=1?(l[fe[We].sourceIdx].x=l[fe[We].targetIdx].x,l[fe[We].sourceIdx].y=l[fe[We].targetIdx].y):H[fe[We].targetIdx]<=1&&(l[fe[We].targetIdx].x=l[fe[We].sourceIdx].x,l[fe[We].targetIdx].y=l[fe[We].sourceIdx].y);n.prune=!1,n.barnesHut=!1,Me=100,l=this.iterate(Me,Y,fe,R,H,t)}return l}iterate(t,n,i,r,l,f){const w=this;let{nodes:R}=w;const{kr:H,preventOverlap:Y}=w,{barnesHut:fe}=w,Le=R.length;let Me=0;const We=100;let Ze=t;const He=50;let et=[];const it=[],ut=[];for(let Mt=0;Mt<Le;Mt+=1)if(et[2*Mt]=0,et[2*Mt+1]=0,fe){const Rt={id:Mt,rx:R[Mt].x,ry:R[Mt].y,mass:1,g:H,degree:l[Mt]};ut[Mt]=new n0(Rt)}for(;Ze>0;){for(let Rt=0;Rt<Le;Rt+=1)it[2*Rt]=et[2*Rt],it[2*Rt+1]=et[2*Rt+1],et[2*Rt]=0,et[2*Rt+1]=0;et=this.getAttrForces(Ze,He,r,n,i,l,f,et),fe&&(Y&&Ze>He||!Y)?et=this.getOptRepGraForces(et,ut,l):et=this.getRepGraForces(Ze,He,et,We,f,l);const Mt=this.updatePos(et,it,Me,l);R=Mt.nodes,Me=Mt.sg,Ze--,w.tick&&w.tick()}return R}getAttrForces(t,n,i,r,l,f,w,R){const H=this,{nodes:Y,preventOverlap:fe,dissuadeHubs:Le,mode:Me,prune:We}=H;for(let Ze=0;Ze<i;Ze+=1){const He=Y[l[Ze].sourceIdx],et=l[Ze].sourceIdx,it=Y[l[Ze].targetIdx],ut=l[Ze].targetIdx;if(We&&(f[et]<=1||f[ut]<=1))continue;const Mt=[it.x-He.x,it.y-He.y];let Rt=Math.hypot(Mt[0],Mt[1]);Rt=Rt<1e-4?1e-4:Rt,Mt[0]=Mt[0]/Rt,Mt[1]=Mt[1]/Rt,fe&&t<n&&(Rt=Rt-w[et]-w[ut]);let un=Rt,jn=un;Me==="linlog"&&(un=Math.log(1+Rt),jn=un),Le&&(un=Rt/f[et],jn=Rt/f[ut]),fe&&t<n&&Rt<=0?(un=0,jn=0):fe&&t<n&&Rt>0&&(un=Rt,jn=Rt),R[2*r[He.id]]+=un*Mt[0],R[2*r[it.id]]-=jn*Mt[0],R[2*r[He.id]+1]+=un*Mt[1],R[2*r[it.id]+1]-=jn*Mt[1]}return R}getRepGraForces(t,n,i,r,l,f){const w=this,{nodes:R,preventOverlap:H,kr:Y,kg:fe,center:Le,prune:Me}=w,We=R.length;for(let Ze=0;Ze<We;Ze+=1){for(let ut=Ze+1;ut<We;ut+=1){if(Me&&(f[Ze]<=1||f[ut]<=1))continue;const Mt=[R[ut].x-R[Ze].x,R[ut].y-R[Ze].y];let Rt=Math.hypot(Mt[0],Mt[1]);Rt=Rt<1e-4?1e-4:Rt,Mt[0]=Mt[0]/Rt,Mt[1]=Mt[1]/Rt,H&&t<n&&(Rt=Rt-l[Ze]-l[ut]);let un=Y*(f[Ze]+1)*(f[ut]+1)/Rt;H&&t<n&&Rt<0?un=r*(f[Ze]+1)*(f[ut]+1):H&&t<n&&Rt===0?un=0:H&&t<n&&Rt>0&&(un=Y*(f[Ze]+1)*(f[ut]+1)/Rt),i[2*Ze]-=un*Mt[0],i[2*ut]+=un*Mt[0],i[2*Ze+1]-=un*Mt[1],i[2*ut+1]+=un*Mt[1]}const He=[R[Ze].x-Le[0],R[Ze].y-Le[1]],et=Math.hypot(He[0],He[1]);He[0]=He[0]/et,He[1]=He[1]/et;const it=fe*(f[Ze]+1);i[2*Ze]-=it*He[0],i[2*Ze+1]-=it*He[1]}return i}getOptRepGraForces(t,n,i){const r=this,{nodes:l,kg:f,center:w,prune:R}=r,H=l.length;let Y=9e10,fe=-9e10,Le=9e10,Me=-9e10;for(let it=0;it<H;it+=1)R&&i[it]<=1||(n[it].setPos(l[it].x,l[it].y),l[it].x>=fe&&(fe=l[it].x),l[it].x<=Y&&(Y=l[it].x),l[it].y>=Me&&(Me=l[it].y),l[it].y<=Le&&(Le=l[it].y));const We=Math.max(fe-Y,Me-Le),Ze={xmid:(fe+Y)/2,ymid:(Me+Le)/2,length:We,massCenter:w,mass:H},He=new $f(Ze),et=new Zf(He);for(let it=0;it<H;it+=1)R&&i[it]<=1||n[it].in(He)&&et.insert(n[it]);for(let it=0;it<H;it+=1){if(R&&i[it]<=1)continue;n[it].resetForce(),et.updateForce(n[it]),t[2*it]-=n[it].fx,t[2*it+1]-=n[it].fy;const ut=[l[it].x-w[0],l[it].y-w[1]];let Mt=Math.hypot(ut[0],ut[1]);Mt=Mt<1e-4?1e-4:Mt,ut[0]=ut[0]/Mt,ut[1]=ut[1]/Mt;const Rt=f*(i[it]+1);t[2*it]-=Rt*ut[0],t[2*it+1]-=Rt*ut[1]}return t}updatePos(t,n,i,r){const l=this,{nodes:f,ks:w,tao:R,prune:H,ksmax:Y}=l,fe=f.length,Le=[],Me=[];let We=0,Ze=0;for(let et=0;et<fe;et+=1){if(H&&r[et]<=1)continue;const it=[t[2*et]-n[2*et],t[2*et+1]-n[2*et+1]],ut=Math.hypot(it[0],it[1]),Mt=[t[2*et]+n[2*et],t[2*et+1]+n[2*et+1]],Rt=Math.hypot(Mt[0],Mt[1]);Le[et]=ut,Me[et]=Rt/2,We+=(r[et]+1)*Le[et],Ze+=(r[et]+1)*Me[et]}const He=i;i=R*Ze/We,He!==0&&(i=i>1.5*He?1.5*He:i);for(let et=0;et<fe;et+=1){if(H&&r[et]<=1)continue;let it=w*i/(1+i*Math.sqrt(Le[et])),ut=Math.hypot(t[2*et],t[2*et+1]);ut=ut<1e-4?1e-4:ut;const Mt=Y/ut;it=it>Mt?Mt:it;const Rt=it*t[2*et],un=it*t[2*et+1];f[et].x+=Rt,f[et].y+=un}return{nodes:f,sg:i}}}class Pd{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(t,n,i){this.cells=[],this.CELL_W=i.CELL_W||Pd.DEFAULT_CELL_W,this.CELL_H=i.CELL_H||Pd.DEFAULT_CELL_H,this.columnNum=Math.ceil(t/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),Pd.MIN_DIST=Math.pow(t,2)+Math.pow(n,2);for(let r=0;r<this.columnNum;r++){const l=[];for(let f=0;f<this.rowNum;f++){const w={dx:r,dy:f,x:r*this.CELL_W,y:f*this.CELL_H,occupied:!1};l.push(w)}this.cells.push(l)}}findGridByNodeId(t){var n,i;for(let r=0;r<this.columnNum;r++)for(let l=0;l<this.rowNum;l++)if(this.cells[r][l].node&&((i=(n=this.cells[r][l])===null||n===void 0?void 0:n.node)===null||i===void 0?void 0:i.id)===t)return{column:r,row:l};return null}sqdist(t,n){return Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)}occupyNearest(t){let n=Pd.MIN_DIST,i,r=null;for(let l=0;l<this.columnNum;l++)for(let f=0;f<this.rowNum;f++)!this.cells[l][f].occupied&&(i=this.sqdist(t,this.cells[l][f]))<n&&(n=i,r=this.cells[l][f]);return r&&(r.occupied=!0),r}insertColumn(t,n){if(!(n<=0)){for(let i=0;i<n;i++){this.cells[i+this.columnNum]=[];for(let r=0;r<this.rowNum;r++)this.cells[i+this.columnNum][r]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null}}for(let i=this.columnNum-1;i>t;i--)for(let r=0;r<this.rowNum;r++)this.cells[i+n][r]=Object.assign(Object.assign({},this.cells[i][r]),{x:(i+n)*this.CELL_W,y:r*this.CELL_H}),this.cells[i][r]={x:i*this.CELL_W,y:r*this.CELL_H,occupied:!0,node:null};for(let i=0;i<this.additionColumn.length;i++)this.additionColumn[i]>=t&&(this.additionColumn[i]+=n);for(let i=0;i<n;i++)this.additionColumn.push(t+i+1);this.columnNum+=n}}insertRow(t,n){if(!(n<=0)){for(let i=0;i<n;i++)for(let r=0;r<this.columnNum;r++)this.cells[r][i+this.rowNum]={dx:r,dy:i,x:r*this.CELL_W,y:i*this.CELL_H,occupied:!1,node:null};for(let i=0;i<this.columnNum;i++)for(let r=this.rowNum-1;r>t;r--)this.cells[i][r+n]=Object.assign(Object.assign({},this.cells[i][r]),{dx:i,dy:r+n,x:i*this.CELL_W,y:(r+n)*this.CELL_H}),this.cells[i][r]={dx:i,dy:r,x:i*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(let i=0;i<this.additionRow.length;i++)this.additionRow[i]>=t&&(this.additionRow[i]+=n);for(let i=0;i<n;i++)this.additionRow.push(t+i+1);this.rowNum+=n}}getNodes(){const t=[];for(let n=0;n<this.columnNum;n++)for(let i=0;i<this.rowNum;i++)this.cells[n][i].node&&t.push(this.cells[n][i]);return t}}Pd.MIN_DIST=50,Pd.DEFAULT_CELL_W=80,Pd.DEFAULT_CELL_H=80;function QN(e,t){if(!e.nodes||e.nodes.length===0)return e;const n=t.width,i=t.height,r=t.nodeMinGap;let l=1e4,f=1e4;e.nodes.forEach(R=>{const H=R.size[0]||50,Y=R.size[1]||50;l=Math.min(H,l),f=Math.min(Y,f)});const w=new Pd;w.init(n,i,{CELL_H:f,CELL_W:l}),e.nodes.forEach(R=>{const H=w.occupyNearest(R);H&&(H.node={id:R.id,size:R.size},R.x=H.x,R.y=H.y,R.dx=H.dx,R.dy=H.dy)});for(let R=0;R<e.nodes.length;R++){const H=e.nodes[R],Y=w.findGridByNodeId(H.id);if(!Y)throw new Error("can not find node cell");const{column:fe,row:Le}=Y;if(H.size[0]+r>l){const Me=Math.ceil((H.size[0]+r)/l)-1;let We=Me;for(let Ze=0;Ze<Me&&(w.additionColumn.indexOf(fe+Ze+1)>-1&&!w.cells[fe+Ze+1][Le].node);Ze++)We--;w.insertColumn(fe,We)}if(H.size[1]+r>f){const Me=Math.ceil((H.size[1]+r)/f)-1;let We=Me;for(let Ze=0;Ze<Me&&(w.additionRow.indexOf(Le+Ze+1)>-1&&!w.cells[fe][Le+Ze+1].node);Ze++)We--;w.insertRow(Le,We)}}for(let R=0;R<w.columnNum;R++)for(let H=0;H<w.rowNum;H++){const Y=w.cells[R][H];if(Y.node){const fe=e.nodes.find(Le=>{var Me;return Le.id===((Me=Y==null?void 0:Y.node)===null||Me===void 0?void 0:Me.id)});fe&&(fe.x=Y.x+fe.size[0]/2,fe.y=Y.y+fe.size[1]/2)}}}const Gw=1200,jw=800,lp=1e7,Ug=10,Kw=3.141592653589793,i0=1.5707963267948966,JN=Kw*.375,qN=Kw*.625,cp=new Map,eT=10,tT=10;let r0=.8;const $w=.1,nT=.5;function iT(e,t,n){const i=e.x-e.size[0]/2,r=e.y-e.size[1]/2,l=e.x+e.size[0]/2,f=e.y+e.size[1]/2,w=t.x-t.size[0]/2,R=t.y-t.size[1]/2,H=t.x+t.size[0]/2,Y=t.y+t.size[1]/2,fe=e.x,Le=e.y,Me=t.x,We=t.y,Ze=Me-fe,He=Math.atan2(Ze,We-Le);let et=0,it=0,ut=0,Mt=0;He>i0?(it=r-Y,et=w-l,ut=parseFloat(it?(it/Math.cos(He)).toFixed(2):et.toFixed(2)),Mt=parseFloat(et?(et/Math.sin(He)).toFixed(2):it.toFixed(2))):0<He&&He<=i0?(it=R-f,et=w-l,it>et?ut=Mt=parseFloat(it?(it/Math.cos(He)).toFixed(2):et.toFixed(2)):ut=Mt=parseFloat(et?(et/Math.sin(He)).toFixed(2):it.toFixed(2))):He<-i0?(it=r-Y,et=-(H-i),it>et?ut=Mt=parseFloat(it?(it/Math.cos(He)).toFixed(2):et.toFixed(2)):ut=Mt=parseFloat(et?(et/Math.sin(He)).toFixed(2):it.toFixed(2))):(it=R-f,Math.abs(Ze)>(l-i)/2?et=i-H:et=Ze,it>et?ut=Mt=parseFloat(it?(it/Math.cos(He)).toFixed(2):et.toFixed(2)):ut=Mt=parseFloat(et&&He!==0?(et/Math.sin(He)).toFixed(2):it.toFixed(2)));const Rt=parseFloat(He.toFixed(2));let un=n;return n&&(un=JN<Rt&&Rt<qN),{distance:Math.abs(ut<Mt?ut:Mt),isHoriz:un}}function Zw(e,t){const i=(cp.get(e.id)||[]).find(jn=>jn.source===t.id||jn.target===t.id),r=e.size[0]*e.size[1],l=t.size[0]*t.size[1],f=r>l?t:e,w=r>l?e:t,R=f.x-f.size[0]/2,H=f.y-f.size[1]/2,Y=f.x+f.size[0]/2,fe=f.y+f.size[1]/2,Le=w.x-w.size[0]/2,Me=w.y-w.size[1]/2,We=w.x+w.size[0]/2,Ze=w.y+w.size[1]/2,He=f.x,et=f.y,it=w.x,ut=w.y,Mt=Y>=Le&&We>=R&&fe>=Me&&Ze>=H;let Rt=0,un=0;if(Mt){un=Math.sqrt(Math.pow(it-He,2)+Math.pow(ut-et,2));const jn=R>Le?R:Le,xn=H>Me?H:Me,ei=Y<We?Y:We,ti=fe<Ze?fe:Ze,_i=ei-jn,Hn=ti-xn,Li=_i*Hn;un===0&&(un=1e-7),Rt=Ug*1/un*100+Li,Rt*=lp}else{let jn=!1;const xn=iT(f,w,jn);un=xn.distance,jn=xn.isHoriz,un<=Ug?un!==0?i?Rt+=Ug+lp*1/un:Rt+=Ug+lp*Ug/un:Rt+=lp:(Rt+=un,i&&(Rt+=un*un))}return Rt}function Xw(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];(i.x<0||i.y<0||i.x>Gw||i.y>jw)&&(t+=1e12);for(let r=n+1;r<e.length;r++)t+=Zw(i,e[r])}return t}function rT(e,t,n,i){const r=new Map;n.forEach((R,H)=>{r.set(R.id,R)});const l=i.filter(R=>R.source===e.id||R.target===e.id)||[],f=[];l.forEach(R=>{const H=R.source===e.id?R.target:R.source,Y=r.get(H);Y&&f.push(Y)});let w=!0;for(let R=0;R<f.length;R++){const H=f[R],Y=Math.atan((e.y-H.y)/(H.x-e.y))*180,fe=Math.atan((t.y-H.y)/(H.x-t.y))*180,Le=Y<30||Y>150,Me=fe<30||fe>150,We=Y>70&&Y<110,Ze=fe>70&&fe<110;if(Le&&!Me||Y*fe<0){w=!1;break}else if(We&&!Ze||Y*fe<0){w=!1;break}else if((H.x-e.x)*(H.x-t.x)<0){w=!1;break}else if((H.y-e.y)*(H.y-t.y)<0){w=!1;break}}return w}function oT(e,t){let n=!1;const i=1,r=eT*i,l=tT*i,f=[r,-r,0,0],w=[0,0,l,-l];for(let R=0;R<e.length;++R){const H=e[R];let Y=Yw(H,e);for(let fe=0;fe<f.length;fe++)if(rT(H,{x:H.x+f[fe],y:H.y+w[fe]},e,t)){H.x+=f[fe],H.y+=w[fe];const Me=Yw(H,e),We=Math.random();Me<Y||We<r0&&We>$w?(Y=Me,n=!0):(H.x-=f[fe],H.y-=w[fe])}}return r0>$w&&(r0*=nT),n?Xw(e):0}function Yw(e,t){let n=0;(e.x<0||e.y<0||e.x+e.size[0]+20>Gw||e.y+e.size[1]+20>jw)&&(n+=1e12);for(let i=0;i<t.length;++i)e.id!==t[i].id&&(n+=Zw(e,t[i]));return n}function sT(e,t){if(e.length===0)return{nodes:e,edges:t};e.forEach(R=>{const H=t.filter(Y=>Y.source===R.id||Y.target===R.id);cp.set(R,H)}),e.sort((R,H)=>{var Y,fe;return((Y=cp.get(R.id))===null||Y===void 0?void 0:Y.length)-((fe=cp.get(H.id))===null||fe===void 0?void 0:fe.length)});let n=Xw(e),i=20,r=1,l=0;const f=50;let w=0;for(;i>0&&(w++,!(w>=f));){const R=oT(e,t);R!==0&&(l=R),r=l-n,n=l,r===0?--i:i=20}return e.forEach(R=>{R.x=R.x-R.size[0]/2,R.y=R.y-R.size[1]/2}),{nodes:e,edges:t}}var aT=sT;function lT(e,t){const{nodes:n,edges:i}=e,r=t.width,l=t.height;if(!(n==null?void 0:n.length))return Promise.resolve();const f=[];n.forEach(We=>{if(i.filter(He=>He.source===We.id||He.target===We.id).length>1){const He=Object.assign({},We);delete He.size,f.push(He)}});const w=[];i.forEach(We=>{const Ze=f.find(et=>et.id===We.source),He=f.find(et=>et.id===We.target);Ze&&He&&w.push(We)});const R=new hd({type:"dagre",ranksep:t.nodeMinGap,nodesep:t.nodeMinGap}),{nodes:H}=R.layout({nodes:f,edges:w});n.forEach(We=>{const Ze=(H||[]).find(He=>He.id===We.id);We.x=(Ze==null?void 0:Ze.x)||r/2,We.y=(Ze==null?void 0:Ze.y)||l/2});const Y=JSON.parse(JSON.stringify(n)),fe=JSON.parse(JSON.stringify(i)),Le=zt().nodes(Y).force("link",mn(fe).id(We=>We.id).distance(We=>w.find(He=>He.source===We.source&&He.target===We.target)?30:20)).force("charge",Vt()).force("center",vn(r/2,l/2)).force("x",sn(r/2)).force("y",Tn(l/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(We=>{Le.on("end",()=>{n.forEach(Rt=>{const un=Y.find(jn=>jn.id===Rt.id);un&&(Rt.x=un.x,Rt.y=un.y)});const Ze=Math.min(...n.map(Rt=>Rt.x)),He=Math.max(...n.map(Rt=>Rt.x)),et=Math.min(...n.map(Rt=>Rt.y)),it=Math.max(...n.map(Rt=>Rt.y)),ut=r/(He-Ze),Mt=l/(it-et);n.forEach(Rt=>{Rt.x!==void 0&&ut<1&&(Rt.x=(Rt.x-Ze)*ut),Rt.y!==void 0&&Mt<1&&(Rt.y=(Rt.y-et)*Mt)}),n.forEach(Rt=>{Rt.sizeTemp=Rt.size,Rt.size=[10,10]}),aT(n,i),n.forEach(Rt=>{Rt.size=Rt.sizeTemp||[],delete Rt.sizeTemp}),QN({nodes:n,edges:i},t),We()})})}class cT extends de{constructor(t){super();this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},t&&this.updateCfg(t)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const t=this,n=t.nodes,i=t.edges;return n==null||n.forEach(r=>{r.size||(r.size=[50,50])}),lT({nodes:n,edges:i},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{t.onLayoutEnd&&t.onLayoutEnd()})}getType(){return"er"}}class uT extends de{constructor(t){super();this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const t=this,n=t.nodes,i=.9,r=t.center;return!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),n&&n.forEach(l=>{l.x=(Math.random()-.5)*i*t.width+r[0],l.y=(Math.random()-.5)*i*t.height+r[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:this.edges}}getType(){return"random"}}class NR{constructor(t){const n=getLayoutByName(t.type);this.layoutInstance=new n(t)}layout(t){return this.layoutInstance.layout(t)}updateCfg(t){this.layoutInstance.updateCfg(t)}init(t){this.layoutInstance.init(t)}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const TR={force:Qn,fruchterman:AL,forceAtlas2:YN,gForce:ue,dagre:hd,dagreCompound:XE,circular:Ro,radial:TL,concentric:b_,grid:pe,mds:y_,comboForce:ZN,comboCombined:XN,random:uT,"gForce-gpu":$N,"fruchterman-gpu":GN,er:cT}},63252:function(){},49469:function(Tt,me){"use strict";var a;a={value:!0};var p;(function(ae){ae.TextureCompressionBC="texture-compression-bc"})(p=me.UX||(me.UX={}));var d;(function(ae){ae.ClampToEdge="clamp-to-edge",ae.Repeat="repeat",ae.MirrorRepeat="mirror-repeat"})(d=me.OB||(me.OB={}));var z;(function(ae){ae.UniformBuffer="uniform-buffer",ae.StorageBuffer="storage-buffer",ae.ReadonlyStorageBuffer="readonly-storage-buffer",ae.Sampler="sampler",ae.ComparisonSampler="comparison-sampler",ae.SampledTexture="sampled-texture",ae.ReadonlyStorageTexture="readonly-storage-texture",ae.WriteonlyStorageTexture="writeonly-storage-texture"})(z=me.$l||(me.$l={}));var O;(function(ae){ae.Zero="zero",ae.One="one",ae.SrcColor="src-color",ae.OneMinusSrcColor="one-minus-src-color",ae.SrcAlpha="src-alpha",ae.OneMinusSrcAlpha="one-minus-src-alpha",ae.DstColor="dst-color",ae.OneMinusDstColor="one-minus-dst-color",ae.DstAlpha="dst-alpha",ae.OneMinusDstAlpha="one-minus-dst-alpha",ae.SrcAlphaSaturated="src-alpha-saturated",ae.BlendColor="blend-color",ae.OneMinusBlendColor="one-minus-blend-color"})(O=me.zi||(me.zi={}));var S;(function(ae){ae.Add="add",ae.Subtract="subtract",ae.ReverseSubtract="reverse-subtract",ae.Min="min",ae.Max="max"})(S=me.db||(me.db={}));var j;(function(ae){ae.Never="never",ae.Less="less",ae.Equal="equal",ae.LessEqual="less-equal",ae.Greater="greater",ae.NotEqual="not-equal",ae.GreaterEqual="greater-equal",ae.Always="always"})(j=me.wb||(me.wb={}));var T;(function(ae){ae.None="none",ae.Front="front",ae.Back="back"})(T=me.Wf||(me.Wf={}));var B;(function(ae){ae.Nearest="nearest",ae.Linear="linear"})(B=me.X9||(me.X9={}));var F;(function(ae){ae.CCW="ccw",ae.CW="cw"})(F=me.zX||(me.zX={}));var x;(function(ae){ae.Uint16="uint16",ae.Uint32="uint32"})(x=me.iD||(me.iD={}));var v;(function(ae){ae.Vertex="vertex",ae.Instance="instance"})(v=me.V||(me.V={}));var g;(function(ae){ae.Load="load"})(g=me.Ws||(me.Ws={}));var D;(function(ae){ae.PointList="point-list",ae.LineList="line-list",ae.LineStrip="line-strip",ae.TriangleList="triangle-list",ae.TriangleStrip="triangle-strip"})(D=me.YV||(me.YV={}));var c;(function(ae){ae.Keep="keep",ae.Zero="zero",ae.Replace="replace",ae.Invert="invert",ae.IncrementClamp="increment-clamp",ae.DecrementClamp="decrement-clamp",ae.IncrementWrap="increment-wrap",ae.DecrementWrap="decrement-wrap"})(c=me.xS||(me.xS={}));var C;(function(ae){ae.Store="store",ae.Clear="clear"})(C=me.EG||(me.EG={}));var M;(function(ae){ae.E1d="1d",ae.E2d="2d",ae.E3d="3d"})(M=me.kd||(me.kd={}));var E;(function(ae){ae.R8Unorm="r8unorm",ae.R8Snorm="r8snorm",ae.R8Uint="r8uint",ae.R8Sint="r8sint",ae.R16Uint="r16uint",ae.R16Sint="r16sint",ae.R16Float="r16float",ae.RG8Unorm="rg8unorm",ae.RG8Snorm="rg8snorm",ae.RG8Uint="rg8uint",ae.RG8Sint="rg8sint",ae.R32Uint="r32uint",ae.R32Sint="r32sint",ae.R32Float="r32float",ae.RG16Uint="rg16uint",ae.RG16Sint="rg16sint",ae.RG16Float="rg16float",ae.RGBA8Unorm="rgba8unorm",ae.RGBA8UnormSRGB="rgba8unorm-srgb",ae.RGBA8Snorm="rgba8snorm",ae.RGBA8Uint="rgba8uint",ae.RGBA8Sint="rgba8sint",ae.BGRA8Unorm="bgra8unorm",ae.BGRA8UnormSRGB="bgra8unorm-srgb",ae.RGB10A2Unorm="rgb10a2unorm",ae.RG11B10Float="rg11b10float",ae.RG32Uint="rg32uint",ae.RG32Sint="rg32sint",ae.RG32Float="rg32float",ae.RGBA16Uint="rgba16uint",ae.RGBA16Sint="rgba16sint",ae.RGBA16Float="rgba16float",ae.RGBA32Uint="rgba32uint",ae.RGBA32Sint="rgba32sint",ae.RGBA32Float="rgba32float",ae.Depth32Float="depth32float",ae.Depth24Plus="depth24plus",ae.Depth24PlusStencil8="depth24plus-stencil8"})(E=me.EV||(me.EV={}));var _;(function(ae){ae.Float="float",ae.Sint="sint",ae.Uint="uint"})(_=me.Ek||(me.Ek={}));var L;(function(ae){ae.E1d="1d",ae.E2d="2d",ae.E2dArray="2d-array",ae.Cube="cube",ae.CubeArray="cube-array",ae.E3d="3d"})(L=me.p_||(me.p_={}));var N;(function(ae){ae.Uchar2="uchar2",ae.Uchar4="uchar4",ae.Char2="char2",ae.Char4="char4",ae.Uchar2Norm="uchar2norm",ae.Uchar4Norm="uchar4norm",ae.Char2Norm="char2norm",ae.Char4Norm="char4norm",ae.Ushort2="ushort2",ae.Ushort4="ushort4",ae.Short2="short2",ae.Short4="short4",ae.Ushort2Norm="ushort2norm",ae.Ushort4Norm="ushort4norm",ae.Short2Norm="short2norm",ae.Short4Norm="short4norm",ae.Half2="half2",ae.Half4="half4",ae.Float="float",ae.Float2="float2",ae.Float3="float3",ae.Float4="float4",ae.Uint="uint",ae.Uint2="uint2",ae.Uint3="uint3",ae.Uint4="uint4",ae.Int="int",ae.Int2="int2",ae.Int3="int3",ae.Int4="int4"})(N=me.gB||(me.gB={}));var b;(function(ae){ae.All="all",ae.StencilOnly="stencil-only",ae.DepthOnly="depth-only"})(b=me.H7||(me.H7={}));var I;(function(ae){ae.Error="error",ae.Warning="warning",ae.Info="info"})(I=me.mj||(me.mj={}));var k;(function(ae){ae.Occlusion="occlusion"})(k=me.xL||(me.xL={}));var W;(function(ae){ae[ae.MapRead=1]="MapRead",ae[ae.MapWrite=2]="MapWrite",ae[ae.CopySrc=4]="CopySrc",ae[ae.CopyDst=8]="CopyDst",ae[ae.Index=16]="Index",ae[ae.Vertex=32]="Vertex",ae[ae.Uniform=64]="Uniform",ae[ae.Storage=128]="Storage",ae[ae.Indirect=256]="Indirect",ae[ae.QueryResolve=512]="QueryResolve"})(W=me.FB||(me.FB={}));var q;(function(ae){ae[ae.Red=1]="Red",ae[ae.Green=2]="Green",ae[ae.Blue=4]="Blue",ae[ae.Alpha=8]="Alpha",ae[ae.All=15]="All"})(q=me.Yw||(me.Yw={}));var re;(function(ae){ae[ae.Vertex=1]="Vertex",ae[ae.Fragment=2]="Fragment",ae[ae.Compute=4]="Compute"})(re=me.$X||(me.$X={}));var de;(function(ae){ae[ae.CopySrc=1]="CopySrc",ae[ae.CopyDst=2]="CopyDst",ae[ae.Sampled=4]="Sampled",ae[ae.Storage=8]="Storage",ae[ae.OutputAttachment=16]="OutputAttachment"})(de=me.v2||(me.v2={}));var pe;(function(ae){ae[ae.Read=1]="Read",ae[ae.Write=2]="Write"})(pe=me.gc||(me.gc={}))},94412:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return Bn}});var p=a(96156),d=a(22122),z=a(90484),O=a(85061),S=a(28481),j=a(87757),T=a.n(j),B=a(67294),F=a(6610),x=a(5991),v=a(10379),g=a(54070),D=a(81253),c=a(92137),C=a(94184),M=a.n(C),E=a(64217);function _(mn,Jt){var En="cannot ".concat(mn.method," ").concat(mn.action," ").concat(Jt.status,"'"),$t=new Error(En);return $t.status=Jt.status,$t.method=mn.method,$t.url=mn.action,$t}function L(mn){var Jt=mn.responseText||mn.response;if(!Jt)return Jt;try{return JSON.parse(Jt)}catch(En){return Jt}}function N(mn){var Jt=new XMLHttpRequest;mn.onProgress&&Jt.upload&&(Jt.upload.onprogress=function(Tn){Tn.total>0&&(Tn.percent=Tn.loaded/Tn.total*100),mn.onProgress(Tn)});var En=new FormData;mn.data&&Object.keys(mn.data).forEach(function(sn){var Tn=mn.data[sn];if(Array.isArray(Tn)){Tn.forEach(function(ri){En.append("".concat(sn,"[]"),ri)});return}En.append(sn,Tn)}),mn.file instanceof Blob?En.append(mn.filename,mn.file,mn.file.name):En.append(mn.filename,mn.file),Jt.onerror=function(Tn){mn.onError(Tn)},Jt.onload=function(){return Jt.status<200||Jt.status>=300?mn.onError(_(mn,Jt),L(Jt)):mn.onSuccess(L(Jt),Jt)},Jt.open(mn.method,mn.action,!0),mn.withCredentials&&"withCredentials"in Jt&&(Jt.withCredentials=!0);var $t=mn.headers||{};return $t["X-Requested-With"]!==null&&Jt.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys($t).forEach(function(sn){$t[sn]!==null&&Jt.setRequestHeader(sn,$t[sn])}),Jt.send(En),{abort:function(){Jt.abort()}}}var b=+new Date,I=0;function k(){return"rc-upload-".concat(b,"-").concat(++I)}var W=a(80334),q=function(mn,Jt){if(mn&&Jt){var En=Array.isArray(Jt)?Jt:Jt.split(","),$t=mn.name||"",sn=mn.type||"",Tn=sn.replace(/\/.*$/,"");return En.some(function(ri){var oi=ri.trim();if(/^\*(\/\*)?$/.test(ri))return!0;if(oi.charAt(0)==="."){var On=$t.toLowerCase(),Qn=oi.toLowerCase(),Yi=[Qn];return(Qn===".jpg"||Qn===".jpeg")&&(Yi=[".jpg",".jpeg"]),Yi.some(function(Lr){return On.endsWith(Lr)})}return/\/\*$/.test(oi)?Tn===oi.replace(/\/.*$/,""):sn===oi?!0:/^\w+$/.test(oi)?((0,W.ZP)(!1,"Upload takes an invalidate 'accept' type '".concat(oi,"'.Skip for check.")),!0):!1})}return!0};function re(mn,Jt){var En=mn.createReader(),$t=[];function sn(){En.readEntries(function(Tn){var ri=Array.prototype.slice.apply(Tn);$t=$t.concat(ri);var oi=!ri.length;oi?Jt($t):sn()})}sn()}var de=function(Jt,En,$t){var sn=function Tn(ri,oi){ri.path=oi||"",ri.isFile?ri.file(function(On){$t(On)&&(ri.fullPath&&!On.webkitRelativePath&&(Object.defineProperties(On,{webkitRelativePath:{writable:!0}}),On.webkitRelativePath=ri.fullPath.replace(/^\//,""),Object.defineProperties(On,{webkitRelativePath:{writable:!1}})),En([On]))}):ri.isDirectory&&re(ri,function(On){On.forEach(function(Qn){Tn(Qn,"".concat(oi).concat(ri.name,"/"))})})};Jt.forEach(function(Tn){sn(Tn.webkitGetAsEntry())})},pe=de,ae=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],ue=function(mn){(0,v.Z)(En,mn);var Jt=(0,g.Z)(En);function En(){var $t;(0,F.Z)(this,En);for(var sn=arguments.length,Tn=new Array(sn),ri=0;ri<sn;ri++)Tn[ri]=arguments[ri];return $t=Jt.call.apply(Jt,[this].concat(Tn)),$t.state={uid:k()},$t.reqs={},$t.fileInput=void 0,$t._isMounted=void 0,$t.onChange=function(oi){var On=$t.props,Qn=On.accept,Yi=On.directory,Lr=oi.target.files,Dr=(0,O.Z)(Lr).filter(function(Fr){return!Yi||q(Fr,Qn)});$t.uploadFiles(Dr),$t.reset()},$t.onClick=function(oi){var On=$t.fileInput;if(!!On){var Qn=$t.props,Yi=Qn.children,Lr=Qn.onClick;if(Yi&&Yi.type==="button"){var Dr=On.parentNode;Dr.focus(),Dr.querySelector("button").blur()}On.click(),Lr&&Lr(oi)}},$t.onKeyDown=function(oi){oi.key==="Enter"&&$t.onClick(oi)},$t.onFileDrop=function(oi){var On=$t.props.multiple;if(oi.preventDefault(),oi.type!=="dragover")if($t.props.directory)pe(Array.prototype.slice.call(oi.dataTransfer.items),$t.uploadFiles,function(Yi){return q(Yi,$t.props.accept)});else{var Qn=(0,O.Z)(oi.dataTransfer.files).filter(function(Yi){return q(Yi,$t.props.accept)});On===!1&&(Qn=Qn.slice(0,1)),$t.uploadFiles(Qn)}},$t.uploadFiles=function(oi){var On=(0,O.Z)(oi),Qn=On.map(function(Yi){return Yi.uid=k(),$t.processFile(Yi,On)});Promise.all(Qn).then(function(Yi){var Lr=$t.props.onBatchStart;Lr==null||Lr(Yi.map(function(Dr){var Fr=Dr.origin,Sr=Dr.parsedFile;return{file:Fr,parsedFile:Sr}})),Yi.filter(function(Dr){return Dr.parsedFile!==null}).forEach(function(Dr){$t.post(Dr)})})},$t.processFile=function(){var oi=(0,c.Z)(T().mark(function On(Qn,Yi){var Lr,Dr,Fr,Sr,Ro,to,no,dr,kn;return T().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(Lr=$t.props.beforeUpload,Dr=Qn,!Lr){Bt.next=14;break}return Bt.prev=3,Bt.next=6,Lr(Qn,Yi);case 6:Dr=Bt.sent,Bt.next=12;break;case 9:Bt.prev=9,Bt.t0=Bt.catch(3),Dr=!1;case 12:if(Dr!==!1){Bt.next=14;break}return Bt.abrupt("return",{origin:Qn,parsedFile:null,action:null,data:null});case 14:if(Fr=$t.props.action,typeof Fr!="function"){Bt.next=21;break}return Bt.next=18,Fr(Qn);case 18:Sr=Bt.sent,Bt.next=22;break;case 21:Sr=Fr;case 22:if(Ro=$t.props.data,typeof Ro!="function"){Bt.next=29;break}return Bt.next=26,Ro(Qn);case 26:to=Bt.sent,Bt.next=30;break;case 29:to=Ro;case 30:return no=((0,z.Z)(Dr)==="object"||typeof Dr=="string")&&Dr?Dr:Qn,no instanceof File?dr=no:dr=new File([no],Qn.name,{type:Qn.type}),kn=dr,kn.uid=Qn.uid,Bt.abrupt("return",{origin:Qn,data:to,parsedFile:kn,action:Sr});case 35:case"end":return Bt.stop()}},On,null,[[3,9]])}));return function(On,Qn){return oi.apply(this,arguments)}}(),$t.saveFileInput=function(oi){$t.fileInput=oi},$t}return(0,x.Z)(En,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(sn){var Tn=this,ri=sn.data,oi=sn.origin,On=sn.action,Qn=sn.parsedFile;if(!!this._isMounted){var Yi=this.props,Lr=Yi.onStart,Dr=Yi.customRequest,Fr=Yi.name,Sr=Yi.headers,Ro=Yi.withCredentials,to=Yi.method,no=oi.uid,dr=Dr||N,kn={action:On,filename:Fr,data:ri,file:Qn,headers:Sr,withCredentials:Ro,method:to||"post",onProgress:function(Bt){var At=Tn.props.onProgress;At==null||At(Bt,Qn)},onSuccess:function(Bt,At){var Ke=Tn.props.onSuccess;Ke==null||Ke(Bt,Qn,At),delete Tn.reqs[no]},onError:function(Bt,At){var Ke=Tn.props.onError;Ke==null||Ke(Bt,At,Qn),delete Tn.reqs[no]}};Lr(oi),this.reqs[no]=dr(kn)}}},{key:"reset",value:function(){this.setState({uid:k()})}},{key:"abort",value:function(sn){var Tn=this.reqs;if(sn){var ri=sn.uid?sn.uid:sn;Tn[ri]&&Tn[ri].abort&&Tn[ri].abort(),delete Tn[ri]}else Object.keys(Tn).forEach(function(oi){Tn[oi]&&Tn[oi].abort&&Tn[oi].abort(),delete Tn[oi]})}},{key:"render",value:function(){var sn,Tn=this.props,ri=Tn.component,oi=Tn.prefixCls,On=Tn.className,Qn=Tn.disabled,Yi=Tn.id,Lr=Tn.style,Dr=Tn.multiple,Fr=Tn.accept,Sr=Tn.capture,Ro=Tn.children,to=Tn.directory,no=Tn.openFileDialogOnClick,dr=Tn.onMouseEnter,kn=Tn.onMouseLeave,bt=(0,D.Z)(Tn,ae),Bt=M()((sn={},(0,p.Z)(sn,oi,!0),(0,p.Z)(sn,"".concat(oi,"-disabled"),Qn),(0,p.Z)(sn,On,On),sn)),At=to?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},Ke=Qn?{}:{onClick:no?this.onClick:function(){},onKeyDown:no?this.onKeyDown:function(){},onMouseEnter:dr,onMouseLeave:kn,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return B.createElement(ri,(0,d.Z)({},Ke,{className:Bt,role:"button",style:Lr}),B.createElement("input",(0,d.Z)({},(0,E.Z)(bt,{aria:!0,data:!0}),{id:Yi,type:"file",ref:this.saveFileInput,onClick:function(Lt){return Lt.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:Fr},At,{multiple:Dr,onChange:this.onChange},Sr!=null?{capture:Sr}:{})),Ro)}}]),En}(B.Component),te=ue;function K(){}var U=function(mn){(0,v.Z)(En,mn);var Jt=(0,g.Z)(En);function En(){var $t;(0,F.Z)(this,En);for(var sn=arguments.length,Tn=new Array(sn),ri=0;ri<sn;ri++)Tn[ri]=arguments[ri];return $t=Jt.call.apply(Jt,[this].concat(Tn)),$t.uploader=void 0,$t.saveUploader=function(oi){$t.uploader=oi},$t}return(0,x.Z)(En,[{key:"abort",value:function(sn){this.uploader.abort(sn)}},{key:"render",value:function(){return B.createElement(te,(0,d.Z)({},this.props,{ref:this.saveUploader}))}}]),En}(B.Component);U.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:K,onError:K,onSuccess:K,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var ee=U,X=ee,le=a(21770),oe=function(mn,Jt){var En={};for(var $t in mn)Object.prototype.hasOwnProperty.call(mn,$t)&&Jt.indexOf($t)<0&&(En[$t]=mn[$t]);if(mn!=null&&typeof Object.getOwnPropertySymbols=="function")for(var sn=0,$t=Object.getOwnPropertySymbols(mn);sn<$t.length;sn++)Jt.indexOf($t[sn])<0&&Object.prototype.propertyIsEnumerable.call(mn,$t[sn])&&(En[$t[sn]]=mn[$t[sn]]);return En},Ce=function(Jt,En){var $t=Jt.style,sn=Jt.height,Tn=oe(Jt,["style","height"]);return B.createElement(Sn,(0,d.Z)({ref:En},Tn,{type:"drag",style:(0,d.Z)((0,d.Z)({},$t),{height:sn})}))},ye=B.forwardRef(Ce);ye.displayName="Dragger";var ke=ye,Te=a(63441),ge=a(7085),we=a(28991),ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},Qe=ze,Pe=a(27029),Oe=function(Jt,En){return B.createElement(Pe.Z,(0,we.Z)((0,we.Z)({},Jt),{},{ref:En,icon:Qe}))};Oe.displayName="PaperClipOutlined";var qe=B.forwardRef(Oe),Je={icon:function(Jt,En){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:Jt}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:En}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:En}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:En}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:Jt}}]}},name:"picture",theme:"twotone"},Ne=Je,Fe=function(Jt,En){return B.createElement(Pe.Z,(0,we.Z)((0,we.Z)({},Jt),{},{ref:En,icon:Ne}))};Fe.displayName="PictureTwoTone";var ne=B.forwardRef(Fe),Q={icon:function(Jt,En){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:En}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:Jt}}]}},name:"file",theme:"twotone"},ie=Q,xe=function(Jt,En){return B.createElement(Pe.Z,(0,we.Z)((0,we.Z)({},Jt),{},{ref:En,icon:ie}))};xe.displayName="FileTwoTone";var be=B.forwardRef(xe),Ge=a(96159);function nt(mn){return(0,d.Z)((0,d.Z)({},mn),{lastModified:mn.lastModified,lastModifiedDate:mn.lastModifiedDate,name:mn.name,size:mn.size,type:mn.type,uid:mn.uid,percent:0,originFileObj:mn})}function _t(mn,Jt){var En=(0,O.Z)(Jt),$t=En.findIndex(function(sn){var Tn=sn.uid;return Tn===mn.uid});return $t===-1?En.push(mn):En[$t]=mn,En}function Ot(mn,Jt){var En=mn.uid!==void 0?"uid":"name";return Jt.filter(function($t){return $t[En]===mn[En]})[0]}function rn(mn,Jt){var En=mn.uid!==void 0?"uid":"name",$t=Jt.filter(function(sn){return sn[En]!==mn[En]});return $t.length===Jt.length?null:$t}var gt=function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",En=Jt.split("/"),$t=En[En.length-1],sn=$t.split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(sn)||[""])[0]},Ue=function(Jt){return Jt.indexOf("image/")===0},Ye=function(Jt){if(Jt.type&&!Jt.thumbUrl)return Ue(Jt.type);var En=Jt.thumbUrl||Jt.url||"",$t=gt(En);return/^data:image\//.test(En)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test($t)?!0:!(/^data:/.test(En)||$t)},dt=200;function Re(mn){return new Promise(function(Jt){if(!mn.type||!Ue(mn.type)){Jt("");return}var En=document.createElement("canvas");En.width=dt,En.height=dt,En.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(dt,"px; height: ").concat(dt,"px; z-index: 9999; display: none;"),document.body.appendChild(En);var $t=En.getContext("2d"),sn=new Image;sn.onload=function(){var Tn=sn.width,ri=sn.height,oi=dt,On=dt,Qn=0,Yi=0;Tn>ri?(On=ri*(dt/Tn),Yi=-(On-oi)/2):(oi=Tn*(dt/ri),Qn=-(oi-On)/2),$t.drawImage(sn,Qn,Yi,oi,On);var Lr=En.toDataURL();document.body.removeChild(En),Jt(Lr)},sn.src=window.URL.createObjectURL(mn)})}var Ve=a(33603),at=a(65632),pt=a(71577),Be=a(57838),je=a(95357),Et=a(73171),Dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Xe=Dt,ft=function(Jt,En){return B.createElement(Pe.Z,(0,we.Z)((0,we.Z)({},Jt),{},{ref:En,icon:Xe}))};ft.displayName="DownloadOutlined";var an=B.forwardRef(ft),An=a(61580),Fn=a(54458),Ht=B.forwardRef(function(mn,Jt){var En,$t=mn.prefixCls,sn=mn.className,Tn=mn.style,ri=mn.locale,oi=mn.listType,On=mn.file,Qn=mn.items,Yi=mn.progress,Lr=mn.iconRender,Dr=mn.actionIconRender,Fr=mn.itemRender,Sr=mn.isImgUrl,Ro=mn.showPreviewIcon,to=mn.showRemoveIcon,no=mn.showDownloadIcon,dr=mn.previewIcon,kn=mn.removeIcon,bt=mn.downloadIcon,Bt=mn.onPreview,At=mn.onDownload,Ke=mn.onClose,vt,Lt,tn=B.useState(!1),dn=(0,S.Z)(tn,2),hn=dn[0],Wn=dn[1],Gn=B.useRef();B.useEffect(function(){return Gn.current=setTimeout(function(){Wn(!0)},300),function(){window.clearTimeout(Gn.current)}},[]);var wi="".concat($t,"-span"),Ci=Lr(On),Xi=B.createElement("div",{className:"".concat($t,"-text-icon")},Ci);if(oi==="picture"||oi==="picture-card")if(On.status==="uploading"||!On.thumbUrl&&!On.url){var Nr,yr=M()((Nr={},(0,p.Z)(Nr,"".concat($t,"-list-item-thumbnail"),!0),(0,p.Z)(Nr,"".concat($t,"-list-item-file"),On.status!=="uploading"),Nr));Xi=B.createElement("div",{className:yr},Ci)}else{var Xr,Jr=(Sr==null?void 0:Sr(On))?B.createElement("img",{src:On.thumbUrl||On.url,alt:On.name,className:"".concat($t,"-list-item-image")}):Ci,$o=M()((Xr={},(0,p.Z)(Xr,"".concat($t,"-list-item-thumbnail"),!0),(0,p.Z)(Xr,"".concat($t,"-list-item-file"),Sr&&!Sr(On)),Xr));Xi=B.createElement("a",{className:$o,onClick:function(ot){return Bt(On,ot)},href:On.url||On.thumbUrl,target:"_blank",rel:"noopener noreferrer"},Jr)}var ms=M()((En={},(0,p.Z)(En,"".concat($t,"-list-item"),!0),(0,p.Z)(En,"".concat($t,"-list-item-").concat(On.status),!0),(0,p.Z)(En,"".concat($t,"-list-item-list-type-").concat(oi),!0),En)),cs=typeof On.linkProps=="string"?JSON.parse(On.linkProps):On.linkProps,nr=to?Dr((typeof kn=="function"?kn(On):kn)||B.createElement(Et.Z,null),function(){return Ke(On)},$t,ri.removeFile):null,tr=no&&On.status==="done"?Dr((typeof bt=="function"?bt(On):bt)||B.createElement(an,null),function(){return At(On)},$t,ri.downloadFile):null,Br=oi!=="picture-card"&&B.createElement("span",{key:"download-delete",className:M()("".concat($t,"-list-item-card-actions"),{picture:oi==="picture"})},tr,nr),Mr=M()("".concat($t,"-list-item-name")),so=On.url?[B.createElement("a",(0,d.Z)({key:"view",target:"_blank",rel:"noopener noreferrer",className:Mr,title:On.name},cs,{href:On.url,onClick:function(ot){return Bt(On,ot)}}),On.name),Br]:[B.createElement("span",{key:"view",className:Mr,onClick:function(ot){return Bt(On,ot)},title:On.name},On.name),Br],jr={pointerEvents:"none",opacity:.5},No=Ro?B.createElement("a",{href:On.url||On.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:On.url||On.thumbUrl?void 0:jr,onClick:function(ot){return Bt(On,ot)},title:ri.previewFile},typeof dr=="function"?dr(On):dr||B.createElement(je.Z,null)):null,ko=oi==="picture-card"&&On.status!=="uploading"&&B.createElement("span",{className:"".concat($t,"-list-item-actions")},No,On.status==="done"&&tr,nr),li;On.response&&typeof On.response=="string"?li=On.response:li=((vt=On.error)===null||vt===void 0?void 0:vt.statusText)||((Lt=On.error)===null||Lt===void 0?void 0:Lt.message)||ri.uploadError;var tt=B.createElement("span",{className:wi},Xi,so),St=B.useContext(at.E_),Pt=St.getPrefixCls,Yt=Pt(),en=B.createElement("div",{className:ms},B.createElement("div",{className:"".concat($t,"-list-item-info")},tt),ko,hn&&B.createElement(Te.Z,{motionName:"".concat(Yt,"-fade"),visible:On.status==="uploading",motionDeadline:2e3},function(Ae){var ot=Ae.className,Ee="percent"in On?B.createElement(Fn.Z,(0,d.Z)({},Yi,{type:"line",percent:On.percent})):null;return B.createElement("div",{className:M()("".concat($t,"-list-item-progress"),ot)},Ee)})),Ct=M()("".concat($t,"-list-").concat(oi,"-container"),sn),J=On.status==="error"?B.createElement(An.Z,{title:li,getPopupContainer:function(ot){return ot.parentNode}},en):en;return B.createElement("div",{className:Ct,style:Tn,ref:Jt},Fr?Fr(J,On,Qn,{download:At.bind(null,On),preview:Bt.bind(null,On),remove:Ke.bind(null,On)}):J)}),Kt=Ht,pn=(0,d.Z)({},Ve.ZP);delete pn.onAppearEnd,delete pn.onEnterEnd,delete pn.onLeaveEnd;var Vn=function(Jt,En){var $t,sn=Jt.listType,Tn=Jt.previewFile,ri=Jt.onPreview,oi=Jt.onDownload,On=Jt.onRemove,Qn=Jt.locale,Yi=Jt.iconRender,Lr=Jt.isImageUrl,Dr=Jt.prefixCls,Fr=Jt.items,Sr=Fr===void 0?[]:Fr,Ro=Jt.showPreviewIcon,to=Jt.showRemoveIcon,no=Jt.showDownloadIcon,dr=Jt.removeIcon,kn=Jt.previewIcon,bt=Jt.downloadIcon,Bt=Jt.progress,At=Jt.appendAction,Ke=Jt.appendActionVisible,vt=Jt.itemRender,Lt=(0,Be.Z)(),tn=B.useState(!1),dn=(0,S.Z)(tn,2),hn=dn[0],Wn=dn[1];B.useEffect(function(){sn!=="picture"&&sn!=="picture-card"||(Sr||[]).forEach(function(Br){typeof document=="undefined"||typeof window=="undefined"||!window.FileReader||!window.File||!(Br.originFileObj instanceof File||Br.originFileObj instanceof Blob)||Br.thumbUrl!==void 0||(Br.thumbUrl="",Tn&&Tn(Br.originFileObj).then(function(Mr){Br.thumbUrl=Mr||"",Lt()}))})},[sn,Sr,Tn]),B.useEffect(function(){Wn(!0)},[]);var Gn=function(Mr,so){if(!!ri)return so==null||so.preventDefault(),ri(Mr)},wi=function(Mr){typeof oi=="function"?oi(Mr):Mr.url&&window.open(Mr.url)},Ci=function(Mr){On==null||On(Mr)},Xi=function(Mr){if(Yi)return Yi(Mr,sn);var so=Mr.status==="uploading",jr=Lr&&Lr(Mr)?B.createElement(ne,null):B.createElement(be,null),No=so?B.createElement(ge.Z,null):B.createElement(qe,null);return sn==="picture"?No=so?B.createElement(ge.Z,null):jr:sn==="picture-card"&&(No=so?Qn.uploading:jr),No},Nr=function(Mr,so,jr,No){var ko={type:"text",size:"small",title:No,onClick:function(St){so(),(0,Ge.l$)(Mr)&&Mr.props.onClick&&Mr.props.onClick(St)},className:"".concat(jr,"-list-item-card-actions-btn")};if((0,Ge.l$)(Mr)){var li=(0,Ge.Tm)(Mr,(0,d.Z)((0,d.Z)({},Mr.props),{onClick:function(){}}));return B.createElement(pt.Z,(0,d.Z)({},ko,{icon:li}))}return B.createElement(pt.Z,ko,B.createElement("span",null,Mr))};B.useImperativeHandle(En,function(){return{handlePreview:Gn,handleDownload:wi}});var yr=B.useContext(at.E_),Xr=yr.getPrefixCls,Jr=yr.direction,$o=Xr("upload",Dr),ms=M()(($t={},(0,p.Z)($t,"".concat($o,"-list"),!0),(0,p.Z)($t,"".concat($o,"-list-").concat(sn),!0),(0,p.Z)($t,"".concat($o,"-list-rtl"),Jr==="rtl"),$t)),cs=(0,O.Z)(Sr.map(function(Br){return{key:Br.uid,file:Br}})),nr=sn==="picture-card"?"animate-inline":"animate",tr={motionDeadline:2e3,motionName:"".concat($o,"-").concat(nr),keys:cs,motionAppear:hn};return sn!=="picture-card"&&(tr=(0,d.Z)((0,d.Z)({},pn),tr)),B.createElement("div",{className:ms},B.createElement(Te.V,(0,d.Z)({},tr,{component:!1}),function(Br){var Mr=Br.key,so=Br.file,jr=Br.className,No=Br.style;return B.createElement(Kt,{key:Mr,locale:Qn,prefixCls:$o,className:jr,style:No,file:so,items:Sr,progress:Bt,listType:sn,isImgUrl:Lr,showPreviewIcon:Ro,showRemoveIcon:to,showDownloadIcon:no,removeIcon:dr,previewIcon:kn,downloadIcon:bt,iconRender:Xi,actionIconRender:Nr,itemRender:vt,onPreview:Gn,onDownload:wi,onClose:Ci})}),At&&B.createElement(Te.Z,(0,d.Z)({},tr,{visible:Ke,forceRender:!0}),function(Br){var Mr=Br.className,so=Br.style;return(0,Ge.Tm)(At,function(jr){return{className:M()(jr.className,Mr),style:(0,d.Z)((0,d.Z)((0,d.Z)({},so),{pointerEvents:Mr?"none":void 0}),jr.style)}})}))},kt=B.forwardRef(Vn);kt.displayName="UploadList",kt.defaultProps={listType:"text",progress:{strokeWidth:2,showInfo:!1},showRemoveIcon:!0,showDownloadIcon:!1,showPreviewIcon:!0,appendActionVisible:!0,previewFile:Re,isImageUrl:Ye};var Zt=kt,wn=a(42051),Pi=a(85636),Fi=a(21687),Ji=function(mn,Jt,En,$t){function sn(Tn){return Tn instanceof En?Tn:new En(function(ri){ri(Tn)})}return new(En||(En=Promise))(function(Tn,ri){function oi(Yi){try{Qn($t.next(Yi))}catch(Lr){ri(Lr)}}function On(Yi){try{Qn($t.throw(Yi))}catch(Lr){ri(Lr)}}function Qn(Yi){Yi.done?Tn(Yi.value):sn(Yi.value).then(oi,On)}Qn(($t=$t.apply(mn,Jt||[])).next())})},si="__LIST_IGNORE_".concat(Date.now(),"__"),zt=function(Jt,En){var $t,sn=Jt.fileList,Tn=Jt.defaultFileList,ri=Jt.onRemove,oi=Jt.showUploadList,On=Jt.listType,Qn=Jt.onPreview,Yi=Jt.onDownload,Lr=Jt.onChange,Dr=Jt.onDrop,Fr=Jt.previewFile,Sr=Jt.disabled,Ro=Jt.locale,to=Jt.iconRender,no=Jt.isImageUrl,dr=Jt.progress,kn=Jt.prefixCls,bt=Jt.className,Bt=Jt.type,At=Jt.children,Ke=Jt.style,vt=Jt.itemRender,Lt=Jt.maxCount,tn=(0,le.Z)(Tn||[],{value:sn,postState:function(en){return en??[]}}),dn=(0,S.Z)(tn,2),hn=dn[0],Wn=dn[1],Gn=B.useState("drop"),wi=(0,S.Z)(Gn,2),Ci=wi[0],Xi=wi[1],Nr=B.useRef();B.useEffect(function(){(0,Fi.Z)("fileList"in Jt||!("value"in Jt),"Upload","`value` is not a valid prop, do you mean `fileList`?"),(0,Fi.Z)(!("transformFile"in Jt),"Upload","`transformFile` is deprecated. Please use `beforeUpload` directly.")},[]),B.useMemo(function(){var Yt=Date.now();(sn||[]).forEach(function(en,Ct){!en.uid&&!Object.isFrozen(en)&&(en.uid="__AUTO__".concat(Yt,"_").concat(Ct,"__"))})},[sn]);var yr=function(en,Ct,J){var Ae=(0,O.Z)(Ct);Lt===1?Ae=Ae.slice(-1):Lt&&(Ae=Ae.slice(0,Lt)),Wn(Ae);var ot={file:en,fileList:Ae};J&&(ot.event=J),Lr==null||Lr(ot)},Xr=function(en,Ct){return Ji(void 0,void 0,void 0,T().mark(function J(){var Ae,ot,Ee,m;return T().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(Ae=Jt.beforeUpload,ot=Jt.transformFile,Ee=en,!Ae){G.next=13;break}return G.next=5,Ae(en,Ct);case 5:if(m=G.sent,m!==!1){G.next=8;break}return G.abrupt("return",!1);case 8:if(delete en[si],m!==si){G.next=12;break}return Object.defineProperty(en,si,{value:!0,configurable:!0}),G.abrupt("return",!1);case 12:(0,z.Z)(m)==="object"&&m&&(Ee=m);case 13:if(!ot){G.next=17;break}return G.next=16,ot(Ee);case 16:Ee=G.sent;case 17:return G.abrupt("return",Ee);case 18:case"end":return G.stop()}},J)}))},Jr=function(en){var Ct=en.filter(function(ot){return!ot.file[si]});if(!!Ct.length){var J=Ct.map(function(ot){return nt(ot.file)}),Ae=(0,O.Z)(hn);J.forEach(function(ot){Ae=_t(ot,Ae)}),J.forEach(function(ot,Ee){var m=ot;if(Ct[Ee].parsedFile)ot.status="uploading";else{var V=ot.originFileObj,G;try{G=new File([V],V.name,{type:V.type})}catch(ce){G=new Blob([V],{type:V.type}),G.name=V.name,G.lastModifiedDate=new Date,G.lastModified=new Date().getTime()}G.uid=ot.uid,m=G}yr(m,Ae)})}},$o=function(en,Ct,J){try{typeof en=="string"&&(en=JSON.parse(en))}catch(Ee){}if(!!Ot(Ct,hn)){var Ae=nt(Ct);Ae.status="done",Ae.percent=100,Ae.response=en,Ae.xhr=J;var ot=_t(Ae,hn);yr(Ae,ot)}},ms=function(en,Ct){if(!!Ot(Ct,hn)){var J=nt(Ct);J.status="uploading",J.percent=en.percent;var Ae=_t(J,hn);yr(J,Ae,en)}},cs=function(en,Ct,J){if(!!Ot(J,hn)){var Ae=nt(J);Ae.error=en,Ae.response=Ct,Ae.status="error";var ot=_t(Ae,hn);yr(Ae,ot)}},nr=function(en){var Ct;Promise.resolve(typeof ri=="function"?ri(en):ri).then(function(J){var Ae;if(J!==!1){var ot=rn(en,hn);ot&&(Ct=(0,d.Z)((0,d.Z)({},en),{status:"removed"}),hn==null||hn.forEach(function(Ee){var m=Ct.uid!==void 0?"uid":"name";Ee[m]===Ct[m]&&!Object.isFrozen(Ee)&&(Ee.status="removed")}),(Ae=Nr.current)===null||Ae===void 0||Ae.abort(Ct),yr(Ct,ot))}})},tr=function(en){Xi(en.type),en.type==="drop"&&(Dr==null||Dr(en))};B.useImperativeHandle(En,function(){return{onBatchStart:Jr,onSuccess:$o,onProgress:ms,onError:cs,fileList:hn,upload:Nr.current}});var Br=B.useContext(at.E_),Mr=Br.getPrefixCls,so=Br.direction,jr=Mr("upload",kn),No=(0,d.Z)((0,d.Z)({onBatchStart:Jr,onError:cs,onProgress:ms,onSuccess:$o},Jt),{prefixCls:jr,beforeUpload:Xr,onChange:void 0});delete No.className,delete No.style,(!At||Sr)&&delete No.id;var ko=function(en,Ct){return oi?B.createElement(wn.Z,{componentName:"Upload",defaultLocale:Pi.Z.Upload},function(J){var Ae=typeof oi=="boolean"?{}:oi,ot=Ae.showRemoveIcon,Ee=Ae.showPreviewIcon,m=Ae.showDownloadIcon,V=Ae.removeIcon,G=Ae.previewIcon,ce=Ae.downloadIcon;return B.createElement(Zt,{listType:On,items:hn,previewFile:Fr,onPreview:Qn,onDownload:Yi,onRemove:nr,showRemoveIcon:!Sr&&ot,showPreviewIcon:Ee,showDownloadIcon:m,removeIcon:V,previewIcon:G,downloadIcon:ce,iconRender:to,locale:(0,d.Z)((0,d.Z)({},J),Ro),isImageUrl:no,progress:dr,appendAction:en,appendActionVisible:Ct,itemRender:vt})}):en};if(Bt==="drag"){var li,tt=M()(jr,(li={},(0,p.Z)(li,"".concat(jr,"-drag"),!0),(0,p.Z)(li,"".concat(jr,"-drag-uploading"),hn.some(function(Yt){return Yt.status==="uploading"})),(0,p.Z)(li,"".concat(jr,"-drag-hover"),Ci==="dragover"),(0,p.Z)(li,"".concat(jr,"-disabled"),Sr),(0,p.Z)(li,"".concat(jr,"-rtl"),so==="rtl"),li),bt);return B.createElement("span",null,B.createElement("div",{className:tt,onDrop:tr,onDragOver:tr,onDragLeave:tr,style:Ke},B.createElement(X,(0,d.Z)({},No,{ref:Nr,className:"".concat(jr,"-btn")}),B.createElement("div",{className:"".concat(jr,"-drag-container")},At))),ko())}var St=M()(jr,($t={},(0,p.Z)($t,"".concat(jr,"-select"),!0),(0,p.Z)($t,"".concat(jr,"-select-").concat(On),!0),(0,p.Z)($t,"".concat(jr,"-disabled"),Sr),(0,p.Z)($t,"".concat(jr,"-rtl"),so==="rtl"),$t)),Pt=function(en){return B.createElement("div",{className:St,style:en},B.createElement(X,(0,d.Z)({},No,{ref:Nr})))};return On==="picture-card"?B.createElement("span",{className:M()("".concat(jr,"-picture-card-wrapper"),bt)},ko(Pt(),!!At)):B.createElement("span",{className:bt},Pt(At?void 0:{display:"none"}),ko())},Vt=B.forwardRef(zt),vn=Vt;vn.Dragger=ke,vn.LIST_IGNORE=si,vn.displayName="Upload",vn.defaultProps={type:"select",multiple:!1,action:"",data:{},accept:"",showUploadList:!0,listType:"text",className:"",disabled:!1,supportServerRender:!0};var Sn=vn;Sn.Dragger=ke;var Bn=Sn},43185:function(Tt,me,a){"use strict";var p=a(38663),d=a.n(p),z=a(63252),O=a.n(z),S=a(57663),j=a(34669),T=a(22385)},79742:function(Tt,me){"use strict";me.byteLength=T,me.toByteArray=F,me.fromByteArray=g;for(var a=[],p=[],d=typeof Uint8Array!="undefined"?Uint8Array:Array,z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=0,S=z.length;O<S;++O)a[O]=z[O],p[z.charCodeAt(O)]=O;p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63;function j(D){var c=D.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=D.indexOf("=");C===-1&&(C=c);var M=C===c?0:4-C%4;return[C,M]}function T(D){var c=j(D),C=c[0],M=c[1];return(C+M)*3/4-M}function B(D,c,C){return(c+C)*3/4-C}function F(D){var c,C=j(D),M=C[0],E=C[1],_=new d(B(D,M,E)),L=0,N=E>0?M-4:M,b;for(b=0;b<N;b+=4)c=p[D.charCodeAt(b)]<<18|p[D.charCodeAt(b+1)]<<12|p[D.charCodeAt(b+2)]<<6|p[D.charCodeAt(b+3)],_[L++]=c>>16&255,_[L++]=c>>8&255,_[L++]=c&255;return E===2&&(c=p[D.charCodeAt(b)]<<2|p[D.charCodeAt(b+1)]>>4,_[L++]=c&255),E===1&&(c=p[D.charCodeAt(b)]<<10|p[D.charCodeAt(b+1)]<<4|p[D.charCodeAt(b+2)]>>2,_[L++]=c>>8&255,_[L++]=c&255),_}function x(D){return a[D>>18&63]+a[D>>12&63]+a[D>>6&63]+a[D&63]}function v(D,c,C){for(var M,E=[],_=c;_<C;_+=3)M=(D[_]<<16&16711680)+(D[_+1]<<8&65280)+(D[_+2]&255),E.push(x(M));return E.join("")}function g(D){for(var c,C=D.length,M=C%3,E=[],_=16383,L=0,N=C-M;L<N;L+=_)E.push(v(D,L,L+_>N?N:L+_));return M===1?(c=D[C-1],E.push(a[c>>2]+a[c<<4&63]+"==")):M===2&&(c=(D[C-2]<<8)+D[C-1],E.push(a[c>>10]+a[c>>4&63]+a[c<<2&63]+"=")),E.join("")}},34976:function(Tt,me,a){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var p=a(79742),d=a(80645),z=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;me.Buffer=T,me.SlowBuffer=_,me.INSPECT_MAX_BYTES=50;var O=2147483647;me.kMaxLength=O,T.TYPED_ARRAY_SUPPORT=S(),!T.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function S(){try{var ne=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(ne,Q),ne.foo()===42}catch(ie){return!1}}Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(!!T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(!!T.isBuffer(this))return this.byteOffset}});function j(ne){if(ne>O)throw new RangeError('The value "'+ne+'" is invalid for option "size"');var Q=new Uint8Array(ne);return Object.setPrototypeOf(Q,T.prototype),Q}function T(ne,Q,ie){if(typeof ne=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ne)}return B(ne,Q,ie)}T.poolSize=8192;function B(ne,Q,ie){if(typeof ne=="string")return g(ne,Q);if(ArrayBuffer.isView(ne))return c(ne);if(ne==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ne);if(Je(ne,ArrayBuffer)||ne&&Je(ne.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Je(ne,SharedArrayBuffer)||ne&&Je(ne.buffer,SharedArrayBuffer)))return C(ne,Q,ie);if(typeof ne=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=ne.valueOf&&ne.valueOf();if(xe!=null&&xe!==ne)return T.from(xe,Q,ie);var be=M(ne);if(be)return be;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ne[Symbol.toPrimitive]=="function")return T.from(ne[Symbol.toPrimitive]("string"),Q,ie);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ne)}T.from=function(ne,Q,ie){return B(ne,Q,ie)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array);function F(ne){if(typeof ne!="number")throw new TypeError('"size" argument must be of type number');if(ne<0)throw new RangeError('The value "'+ne+'" is invalid for option "size"')}function x(ne,Q,ie){return F(ne),ne<=0?j(ne):Q!==void 0?typeof ie=="string"?j(ne).fill(Q,ie):j(ne).fill(Q):j(ne)}T.alloc=function(ne,Q,ie){return x(ne,Q,ie)};function v(ne){return F(ne),j(ne<0?0:E(ne)|0)}T.allocUnsafe=function(ne){return v(ne)},T.allocUnsafeSlow=function(ne){return v(ne)};function g(ne,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!T.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);var ie=L(ne,Q)|0,xe=j(ie),be=xe.write(ne,Q);return be!==ie&&(xe=xe.slice(0,be)),xe}function D(ne){for(var Q=ne.length<0?0:E(ne.length)|0,ie=j(Q),xe=0;xe<Q;xe+=1)ie[xe]=ne[xe]&255;return ie}function c(ne){if(Je(ne,Uint8Array)){var Q=new Uint8Array(ne);return C(Q.buffer,Q.byteOffset,Q.byteLength)}return D(ne)}function C(ne,Q,ie){if(Q<0||ne.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(ne.byteLength<Q+(ie||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return Q===void 0&&ie===void 0?xe=new Uint8Array(ne):ie===void 0?xe=new Uint8Array(ne,Q):xe=new Uint8Array(ne,Q,ie),Object.setPrototypeOf(xe,T.prototype),xe}function M(ne){if(T.isBuffer(ne)){var Q=E(ne.length)|0,ie=j(Q);return ie.length===0||ne.copy(ie,0,0,Q),ie}if(ne.length!==void 0)return typeof ne.length!="number"||Ne(ne.length)?j(0):D(ne);if(ne.type==="Buffer"&&Array.isArray(ne.data))return D(ne.data)}function E(ne){if(ne>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return ne|0}function _(ne){return+ne!=ne&&(ne=0),T.alloc(+ne)}T.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==T.prototype},T.compare=function(Q,ie){if(Je(Q,Uint8Array)&&(Q=T.from(Q,Q.offset,Q.byteLength)),Je(ie,Uint8Array)&&(ie=T.from(ie,ie.offset,ie.byteLength)),!T.isBuffer(Q)||!T.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ie)return 0;for(var xe=Q.length,be=ie.length,Ge=0,nt=Math.min(xe,be);Ge<nt;++Ge)if(Q[Ge]!==ie[Ge]){xe=Q[Ge],be=ie[Ge];break}return xe<be?-1:be<xe?1:0},T.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(Q,ie){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return T.alloc(0);var xe;if(ie===void 0)for(ie=0,xe=0;xe<Q.length;++xe)ie+=Q[xe].length;var be=T.allocUnsafe(ie),Ge=0;for(xe=0;xe<Q.length;++xe){var nt=Q[xe];if(Je(nt,Uint8Array))Ge+nt.length>be.length?T.from(nt).copy(be,Ge):Uint8Array.prototype.set.call(be,nt,Ge);else if(T.isBuffer(nt))nt.copy(be,Ge);else throw new TypeError('"list" argument must be an Array of Buffers');Ge+=nt.length}return be};function L(ne,Q){if(T.isBuffer(ne))return ne.length;if(ArrayBuffer.isView(ne)||Je(ne,ArrayBuffer))return ne.byteLength;if(typeof ne!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ne);var ie=ne.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&ie===0)return 0;for(var be=!1;;)switch(Q){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":return ze(ne).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie*2;case"hex":return ie>>>1;case"base64":return Oe(ne).length;default:if(be)return xe?-1:ze(ne).length;Q=(""+Q).toLowerCase(),be=!0}}T.byteLength=L;function N(ne,Q,ie){var xe=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ie===void 0||ie>this.length)&&(ie=this.length),ie<=0)||(ie>>>=0,Q>>>=0,ie<=Q))return"";for(ne||(ne="utf8");;)switch(ne){case"hex":return X(this,Q,ie);case"utf8":case"utf-8":return ue(this,Q,ie);case"ascii":return U(this,Q,ie);case"latin1":case"binary":return ee(this,Q,ie);case"base64":return ae(this,Q,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,Q,ie);default:if(xe)throw new TypeError("Unknown encoding: "+ne);ne=(ne+"").toLowerCase(),xe=!0}}T.prototype._isBuffer=!0;function b(ne,Q,ie){var xe=ne[Q];ne[Q]=ne[ie],ne[ie]=xe}T.prototype.swap16=function(){var Q=this.length;if(Q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ie=0;ie<Q;ie+=2)b(this,ie,ie+1);return this},T.prototype.swap32=function(){var Q=this.length;if(Q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ie=0;ie<Q;ie+=4)b(this,ie,ie+3),b(this,ie+1,ie+2);return this},T.prototype.swap64=function(){var Q=this.length;if(Q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ie=0;ie<Q;ie+=8)b(this,ie,ie+7),b(this,ie+1,ie+6),b(this,ie+2,ie+5),b(this,ie+3,ie+4);return this},T.prototype.toString=function(){var Q=this.length;return Q===0?"":arguments.length===0?ue(this,0,Q):N.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(Q){if(!T.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:T.compare(this,Q)===0},T.prototype.inspect=function(){var Q="",ie=me.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(Q+=" ... "),"<Buffer "+Q+">"},z&&(T.prototype[z]=T.prototype.inspect),T.prototype.compare=function(Q,ie,xe,be,Ge){if(Je(Q,Uint8Array)&&(Q=T.from(Q,Q.offset,Q.byteLength)),!T.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ie===void 0&&(ie=0),xe===void 0&&(xe=Q?Q.length:0),be===void 0&&(be=0),Ge===void 0&&(Ge=this.length),ie<0||xe>Q.length||be<0||Ge>this.length)throw new RangeError("out of range index");if(be>=Ge&&ie>=xe)return 0;if(be>=Ge)return-1;if(ie>=xe)return 1;if(ie>>>=0,xe>>>=0,be>>>=0,Ge>>>=0,this===Q)return 0;for(var nt=Ge-be,_t=xe-ie,Ot=Math.min(nt,_t),rn=this.slice(be,Ge),gt=Q.slice(ie,xe),Ue=0;Ue<Ot;++Ue)if(rn[Ue]!==gt[Ue]){nt=rn[Ue],_t=gt[Ue];break}return nt<_t?-1:_t<nt?1:0};function I(ne,Q,ie,xe,be){if(ne.length===0)return-1;if(typeof ie=="string"?(xe=ie,ie=0):ie>2147483647?ie=2147483647:ie<-2147483648&&(ie=-2147483648),ie=+ie,Ne(ie)&&(ie=be?0:ne.length-1),ie<0&&(ie=ne.length+ie),ie>=ne.length){if(be)return-1;ie=ne.length-1}else if(ie<0)if(be)ie=0;else return-1;if(typeof Q=="string"&&(Q=T.from(Q,xe)),T.isBuffer(Q))return Q.length===0?-1:k(ne,Q,ie,xe,be);if(typeof Q=="number")return Q=Q&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(ne,Q,ie):Uint8Array.prototype.lastIndexOf.call(ne,Q,ie):k(ne,[Q],ie,xe,be);throw new TypeError("val must be string, number or Buffer")}function k(ne,Q,ie,xe,be){var Ge=1,nt=ne.length,_t=Q.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(ne.length<2||Q.length<2)return-1;Ge=2,nt/=2,_t/=2,ie/=2}function Ot(dt,Re){return Ge===1?dt[Re]:dt.readUInt16BE(Re*Ge)}var rn;if(be){var gt=-1;for(rn=ie;rn<nt;rn++)if(Ot(ne,rn)===Ot(Q,gt===-1?0:rn-gt)){if(gt===-1&&(gt=rn),rn-gt+1===_t)return gt*Ge}else gt!==-1&&(rn-=rn-gt),gt=-1}else for(ie+_t>nt&&(ie=nt-_t),rn=ie;rn>=0;rn--){for(var Ue=!0,Ye=0;Ye<_t;Ye++)if(Ot(ne,rn+Ye)!==Ot(Q,Ye)){Ue=!1;break}if(Ue)return rn}return-1}T.prototype.includes=function(Q,ie,xe){return this.indexOf(Q,ie,xe)!==-1},T.prototype.indexOf=function(Q,ie,xe){return I(this,Q,ie,xe,!0)},T.prototype.lastIndexOf=function(Q,ie,xe){return I(this,Q,ie,xe,!1)};function W(ne,Q,ie,xe){ie=Number(ie)||0;var be=ne.length-ie;xe?(xe=Number(xe),xe>be&&(xe=be)):xe=be;var Ge=Q.length;xe>Ge/2&&(xe=Ge/2);for(var nt=0;nt<xe;++nt){var _t=parseInt(Q.substr(nt*2,2),16);if(Ne(_t))return nt;ne[ie+nt]=_t}return nt}function q(ne,Q,ie,xe){return qe(ze(Q,ne.length-ie),ne,ie,xe)}function re(ne,Q,ie,xe){return qe(Qe(Q),ne,ie,xe)}function de(ne,Q,ie,xe){return qe(Oe(Q),ne,ie,xe)}function pe(ne,Q,ie,xe){return qe(Pe(Q,ne.length-ie),ne,ie,xe)}T.prototype.write=function(Q,ie,xe,be){if(ie===void 0)be="utf8",xe=this.length,ie=0;else if(xe===void 0&&typeof ie=="string")be=ie,xe=this.length,ie=0;else if(isFinite(ie))ie=ie>>>0,isFinite(xe)?(xe=xe>>>0,be===void 0&&(be="utf8")):(be=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ge=this.length-ie;if((xe===void 0||xe>Ge)&&(xe=Ge),Q.length>0&&(xe<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var nt=!1;;)switch(be){case"hex":return W(this,Q,ie,xe);case"utf8":case"utf-8":return q(this,Q,ie,xe);case"ascii":case"latin1":case"binary":return re(this,Q,ie,xe);case"base64":return de(this,Q,ie,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,Q,ie,xe);default:if(nt)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),nt=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(ne,Q,ie){return Q===0&&ie===ne.length?p.fromByteArray(ne):p.fromByteArray(ne.slice(Q,ie))}function ue(ne,Q,ie){ie=Math.min(ne.length,ie);for(var xe=[],be=Q;be<ie;){var Ge=ne[be],nt=null,_t=Ge>239?4:Ge>223?3:Ge>191?2:1;if(be+_t<=ie){var Ot,rn,gt,Ue;switch(_t){case 1:Ge<128&&(nt=Ge);break;case 2:Ot=ne[be+1],(Ot&192)==128&&(Ue=(Ge&31)<<6|Ot&63,Ue>127&&(nt=Ue));break;case 3:Ot=ne[be+1],rn=ne[be+2],(Ot&192)==128&&(rn&192)==128&&(Ue=(Ge&15)<<12|(Ot&63)<<6|rn&63,Ue>2047&&(Ue<55296||Ue>57343)&&(nt=Ue));break;case 4:Ot=ne[be+1],rn=ne[be+2],gt=ne[be+3],(Ot&192)==128&&(rn&192)==128&&(gt&192)==128&&(Ue=(Ge&15)<<18|(Ot&63)<<12|(rn&63)<<6|gt&63,Ue>65535&&Ue<1114112&&(nt=Ue))}}nt===null?(nt=65533,_t=1):nt>65535&&(nt-=65536,xe.push(nt>>>10&1023|55296),nt=56320|nt&1023),xe.push(nt),be+=_t}return K(xe)}var te=4096;function K(ne){var Q=ne.length;if(Q<=te)return String.fromCharCode.apply(String,ne);for(var ie="",xe=0;xe<Q;)ie+=String.fromCharCode.apply(String,ne.slice(xe,xe+=te));return ie}function U(ne,Q,ie){var xe="";ie=Math.min(ne.length,ie);for(var be=Q;be<ie;++be)xe+=String.fromCharCode(ne[be]&127);return xe}function ee(ne,Q,ie){var xe="";ie=Math.min(ne.length,ie);for(var be=Q;be<ie;++be)xe+=String.fromCharCode(ne[be]);return xe}function X(ne,Q,ie){var xe=ne.length;(!Q||Q<0)&&(Q=0),(!ie||ie<0||ie>xe)&&(ie=xe);for(var be="",Ge=Q;Ge<ie;++Ge)be+=Fe[ne[Ge]];return be}function le(ne,Q,ie){for(var xe=ne.slice(Q,ie),be="",Ge=0;Ge<xe.length-1;Ge+=2)be+=String.fromCharCode(xe[Ge]+xe[Ge+1]*256);return be}T.prototype.slice=function(Q,ie){var xe=this.length;Q=~~Q,ie=ie===void 0?xe:~~ie,Q<0?(Q+=xe,Q<0&&(Q=0)):Q>xe&&(Q=xe),ie<0?(ie+=xe,ie<0&&(ie=0)):ie>xe&&(ie=xe),ie<Q&&(ie=Q);var be=this.subarray(Q,ie);return Object.setPrototypeOf(be,T.prototype),be};function oe(ne,Q,ie){if(ne%1!=0||ne<0)throw new RangeError("offset is not uint");if(ne+Q>ie)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUintLE=T.prototype.readUIntLE=function(Q,ie,xe){Q=Q>>>0,ie=ie>>>0,xe||oe(Q,ie,this.length);for(var be=this[Q],Ge=1,nt=0;++nt<ie&&(Ge*=256);)be+=this[Q+nt]*Ge;return be},T.prototype.readUintBE=T.prototype.readUIntBE=function(Q,ie,xe){Q=Q>>>0,ie=ie>>>0,xe||oe(Q,ie,this.length);for(var be=this[Q+--ie],Ge=1;ie>0&&(Ge*=256);)be+=this[Q+--ie]*Ge;return be},T.prototype.readUint8=T.prototype.readUInt8=function(Q,ie){return Q=Q>>>0,ie||oe(Q,1,this.length),this[Q]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,2,this.length),this[Q]|this[Q+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,2,this.length),this[Q]<<8|this[Q+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},T.prototype.readIntLE=function(Q,ie,xe){Q=Q>>>0,ie=ie>>>0,xe||oe(Q,ie,this.length);for(var be=this[Q],Ge=1,nt=0;++nt<ie&&(Ge*=256);)be+=this[Q+nt]*Ge;return Ge*=128,be>=Ge&&(be-=Math.pow(2,8*ie)),be},T.prototype.readIntBE=function(Q,ie,xe){Q=Q>>>0,ie=ie>>>0,xe||oe(Q,ie,this.length);for(var be=ie,Ge=1,nt=this[Q+--be];be>0&&(Ge*=256);)nt+=this[Q+--be]*Ge;return Ge*=128,nt>=Ge&&(nt-=Math.pow(2,8*ie)),nt},T.prototype.readInt8=function(Q,ie){return Q=Q>>>0,ie||oe(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},T.prototype.readInt16LE=function(Q,ie){Q=Q>>>0,ie||oe(Q,2,this.length);var xe=this[Q]|this[Q+1]<<8;return xe&32768?xe|4294901760:xe},T.prototype.readInt16BE=function(Q,ie){Q=Q>>>0,ie||oe(Q,2,this.length);var xe=this[Q+1]|this[Q]<<8;return xe&32768?xe|4294901760:xe},T.prototype.readInt32LE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},T.prototype.readInt32BE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},T.prototype.readFloatLE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,4,this.length),d.read(this,Q,!0,23,4)},T.prototype.readFloatBE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,4,this.length),d.read(this,Q,!1,23,4)},T.prototype.readDoubleLE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,8,this.length),d.read(this,Q,!0,52,8)},T.prototype.readDoubleBE=function(Q,ie){return Q=Q>>>0,ie||oe(Q,8,this.length),d.read(this,Q,!1,52,8)};function Ce(ne,Q,ie,xe,be,Ge){if(!T.isBuffer(ne))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>be||Q<Ge)throw new RangeError('"value" argument is out of bounds');if(ie+xe>ne.length)throw new RangeError("Index out of range")}T.prototype.writeUintLE=T.prototype.writeUIntLE=function(Q,ie,xe,be){if(Q=+Q,ie=ie>>>0,xe=xe>>>0,!be){var Ge=Math.pow(2,8*xe)-1;Ce(this,Q,ie,xe,Ge,0)}var nt=1,_t=0;for(this[ie]=Q&255;++_t<xe&&(nt*=256);)this[ie+_t]=Q/nt&255;return ie+xe},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(Q,ie,xe,be){if(Q=+Q,ie=ie>>>0,xe=xe>>>0,!be){var Ge=Math.pow(2,8*xe)-1;Ce(this,Q,ie,xe,Ge,0)}var nt=xe-1,_t=1;for(this[ie+nt]=Q&255;--nt>=0&&(_t*=256);)this[ie+nt]=Q/_t&255;return ie+xe},T.prototype.writeUint8=T.prototype.writeUInt8=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,1,255,0),this[ie]=Q&255,ie+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,2,65535,0),this[ie]=Q&255,this[ie+1]=Q>>>8,ie+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,2,65535,0),this[ie]=Q>>>8,this[ie+1]=Q&255,ie+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,4,4294967295,0),this[ie+3]=Q>>>24,this[ie+2]=Q>>>16,this[ie+1]=Q>>>8,this[ie]=Q&255,ie+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,4,4294967295,0),this[ie]=Q>>>24,this[ie+1]=Q>>>16,this[ie+2]=Q>>>8,this[ie+3]=Q&255,ie+4},T.prototype.writeIntLE=function(Q,ie,xe,be){if(Q=+Q,ie=ie>>>0,!be){var Ge=Math.pow(2,8*xe-1);Ce(this,Q,ie,xe,Ge-1,-Ge)}var nt=0,_t=1,Ot=0;for(this[ie]=Q&255;++nt<xe&&(_t*=256);)Q<0&&Ot===0&&this[ie+nt-1]!==0&&(Ot=1),this[ie+nt]=(Q/_t>>0)-Ot&255;return ie+xe},T.prototype.writeIntBE=function(Q,ie,xe,be){if(Q=+Q,ie=ie>>>0,!be){var Ge=Math.pow(2,8*xe-1);Ce(this,Q,ie,xe,Ge-1,-Ge)}var nt=xe-1,_t=1,Ot=0;for(this[ie+nt]=Q&255;--nt>=0&&(_t*=256);)Q<0&&Ot===0&&this[ie+nt+1]!==0&&(Ot=1),this[ie+nt]=(Q/_t>>0)-Ot&255;return ie+xe},T.prototype.writeInt8=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,1,127,-128),Q<0&&(Q=255+Q+1),this[ie]=Q&255,ie+1},T.prototype.writeInt16LE=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,2,32767,-32768),this[ie]=Q&255,this[ie+1]=Q>>>8,ie+2},T.prototype.writeInt16BE=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,2,32767,-32768),this[ie]=Q>>>8,this[ie+1]=Q&255,ie+2},T.prototype.writeInt32LE=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,4,2147483647,-2147483648),this[ie]=Q&255,this[ie+1]=Q>>>8,this[ie+2]=Q>>>16,this[ie+3]=Q>>>24,ie+4},T.prototype.writeInt32BE=function(Q,ie,xe){return Q=+Q,ie=ie>>>0,xe||Ce(this,Q,ie,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ie]=Q>>>24,this[ie+1]=Q>>>16,this[ie+2]=Q>>>8,this[ie+3]=Q&255,ie+4};function ye(ne,Q,ie,xe,be,Ge){if(ie+xe>ne.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function ke(ne,Q,ie,xe,be){return Q=+Q,ie=ie>>>0,be||ye(ne,Q,ie,4,34028234663852886e22,-34028234663852886e22),d.write(ne,Q,ie,xe,23,4),ie+4}T.prototype.writeFloatLE=function(Q,ie,xe){return ke(this,Q,ie,!0,xe)},T.prototype.writeFloatBE=function(Q,ie,xe){return ke(this,Q,ie,!1,xe)};function Te(ne,Q,ie,xe,be){return Q=+Q,ie=ie>>>0,be||ye(ne,Q,ie,8,17976931348623157e292,-17976931348623157e292),d.write(ne,Q,ie,xe,52,8),ie+8}T.prototype.writeDoubleLE=function(Q,ie,xe){return Te(this,Q,ie,!0,xe)},T.prototype.writeDoubleBE=function(Q,ie,xe){return Te(this,Q,ie,!1,xe)},T.prototype.copy=function(Q,ie,xe,be){if(!T.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!be&&be!==0&&(be=this.length),ie>=Q.length&&(ie=Q.length),ie||(ie=0),be>0&&be<xe&&(be=xe),be===xe||Q.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),Q.length-ie<be-xe&&(be=Q.length-ie+xe);var Ge=be-xe;return this===Q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ie,xe,be):Uint8Array.prototype.set.call(Q,this.subarray(xe,be),ie),Ge},T.prototype.fill=function(Q,ie,xe,be){if(typeof Q=="string"){if(typeof ie=="string"?(be=ie,ie=0,xe=this.length):typeof xe=="string"&&(be=xe,xe=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!T.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(Q.length===1){var Ge=Q.charCodeAt(0);(be==="utf8"&&Ge<128||be==="latin1")&&(Q=Ge)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ie<0||this.length<ie||this.length<xe)throw new RangeError("Out of range index");if(xe<=ie)return this;ie=ie>>>0,xe=xe===void 0?this.length:xe>>>0,Q||(Q=0);var nt;if(typeof Q=="number")for(nt=ie;nt<xe;++nt)this[nt]=Q;else{var _t=T.isBuffer(Q)?Q:T.from(Q,be),Ot=_t.length;if(Ot===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(nt=0;nt<xe-ie;++nt)this[nt+ie]=_t[nt%Ot]}return this};var ge=/[^+/0-9A-Za-z-_]/g;function we(ne){if(ne=ne.split("=")[0],ne=ne.trim().replace(ge,""),ne.length<2)return"";for(;ne.length%4!=0;)ne=ne+"=";return ne}function ze(ne,Q){Q=Q||Infinity;for(var ie,xe=ne.length,be=null,Ge=[],nt=0;nt<xe;++nt){if(ie=ne.charCodeAt(nt),ie>55295&&ie<57344){if(!be){if(ie>56319){(Q-=3)>-1&&Ge.push(239,191,189);continue}else if(nt+1===xe){(Q-=3)>-1&&Ge.push(239,191,189);continue}be=ie;continue}if(ie<56320){(Q-=3)>-1&&Ge.push(239,191,189),be=ie;continue}ie=(be-55296<<10|ie-56320)+65536}else be&&(Q-=3)>-1&&Ge.push(239,191,189);if(be=null,ie<128){if((Q-=1)<0)break;Ge.push(ie)}else if(ie<2048){if((Q-=2)<0)break;Ge.push(ie>>6|192,ie&63|128)}else if(ie<65536){if((Q-=3)<0)break;Ge.push(ie>>12|224,ie>>6&63|128,ie&63|128)}else if(ie<1114112){if((Q-=4)<0)break;Ge.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,ie&63|128)}else throw new Error("Invalid code point")}return Ge}function Qe(ne){for(var Q=[],ie=0;ie<ne.length;++ie)Q.push(ne.charCodeAt(ie)&255);return Q}function Pe(ne,Q){for(var ie,xe,be,Ge=[],nt=0;nt<ne.length&&!((Q-=2)<0);++nt)ie=ne.charCodeAt(nt),xe=ie>>8,be=ie%256,Ge.push(be),Ge.push(xe);return Ge}function Oe(ne){return p.toByteArray(we(ne))}function qe(ne,Q,ie,xe){for(var be=0;be<xe&&!(be+ie>=Q.length||be>=ne.length);++be)Q[be+ie]=ne[be];return be}function Je(ne,Q){return ne instanceof Q||ne!=null&&ne.constructor!=null&&ne.constructor.name!=null&&ne.constructor.name===Q.name}function Ne(ne){return ne!==ne}var Fe=function(){for(var ne="0123456789abcdef",Q=new Array(256),ie=0;ie<16;++ie)for(var xe=ie*16,be=0;be<16;++be)Q[xe+be]=ne[ie]+ne[be];return Q}()},89550:function(Tt){Tt.exports=me;function me(a,p,d){return a[0]=p[0]+d[0],a[1]=p[1]+d[1],a}},62189:function(Tt){Tt.exports=me;function me(a,p){return a[0]=Math.ceil(p[0]),a[1]=Math.ceil(p[1]),a}},76057:function(Tt){Tt.exports=me;function me(a){var p=new Float32Array(2);return p[0]=a[0],p[1]=a[1],p}},3492:function(Tt){Tt.exports=me;function me(a,p){return a[0]=p[0],a[1]=p[1],a}},61589:function(Tt){Tt.exports=me;function me(){var a=new Float32Array(2);return a[0]=0,a[1]=0,a}},77741:function(Tt){Tt.exports=me;function me(a,p,d){var z=p[0]*d[1]-p[1]*d[0];return a[0]=a[1]=0,a[2]=z,a}},80278:function(Tt,me,a){Tt.exports=a(27953)},27953:function(Tt){Tt.exports=me;function me(a,p){var d=p[0]-a[0],z=p[1]-a[1];return Math.sqrt(d*d+z*z)}},49973:function(Tt,me,a){Tt.exports=a(6773)},6773:function(Tt){Tt.exports=me;function me(a,p,d){return a[0]=p[0]/d[0],a[1]=p[1]/d[1],a}},56601:function(Tt){Tt.exports=me;function me(a,p){return a[0]*p[0]+a[1]*p[1]}},89936:function(Tt){Tt.exports=1e-6},51232:function(Tt,me,a){Tt.exports=d;var p=a(89936);function d(z,O){var S=z[0],j=z[1],T=O[0],B=O[1];return Math.abs(S-T)<=p*Math.max(1,Math.abs(S),Math.abs(T))&&Math.abs(j-B)<=p*Math.max(1,Math.abs(j),Math.abs(B))}},39546:function(Tt){Tt.exports=me;function me(a,p){return a[0]===p[0]&&a[1]===p[1]}},67744:function(Tt){Tt.exports=me;function me(a,p){return a[0]=Math.floor(p[0]),a[1]=Math.floor(p[1]),a}},49002:function(Tt,me,a){Tt.exports=d;var p=a(61589)();function d(z,O,S,j,T,B){var F,x;for(O||(O=2),S||(S=0),j?x=Math.min(j*O+S,z.length):x=z.length,F=S;F<x;F+=O)p[0]=z[F],p[1]=z[F+1],T(p,p,B),z[F]=p[0],z[F+1]=p[1];return z}},69878:function(Tt){Tt.exports=me;function me(a,p){var d=new Float32Array(2);return d[0]=a,d[1]=p,d}},32644:function(Tt,me,a){Tt.exports={EPSILON:a(89936),create:a(61589),clone:a(76057),fromValues:a(69878),copy:a(3492),set:a(68854),equals:a(51232),exactEquals:a(39546),add:a(89550),subtract:a(43650),sub:a(45222),multiply:a(79920),mul:a(23113),divide:a(6773),div:a(49973),inverse:a(83793),min:a(20676),max:a(97899),rotate:a(48677),floor:a(67744),ceil:a(62189),round:a(57074),scale:a(47838),scaleAndAdd:a(21066),distance:a(27953),dist:a(80278),squaredDistance:a(14290),sqrDist:a(79569),length:a(37781),len:a(8123),squaredLength:a(26791),sqrLen:a(1791),negate:a(90549),normalize:a(36820),dot:a(56601),cross:a(77741),lerp:a(20577),random:a(85773),transformMat2:a(904),transformMat2d:a(60736),transformMat3:a(60221),transformMat4:a(37674),forEach:a(49002),limit:a(82418)}},83793:function(Tt){Tt.exports=me;function me(a,p){return a[0]=1/p[0],a[1]=1/p[1],a}},8123:function(Tt,me,a){Tt.exports=a(37781)},37781:function(Tt){Tt.exports=me;function me(a){var p=a[0],d=a[1];return Math.sqrt(p*p+d*d)}},20577:function(Tt){Tt.exports=me;function me(a,p,d,z){var O=p[0],S=p[1];return a[0]=O+z*(d[0]-O),a[1]=S+z*(d[1]-S),a}},82418:function(Tt){Tt.exports=me;function me(a,p,d){var z=p[0]*p[0]+p[1]*p[1];if(z>d*d){var O=Math.sqrt(z);a[0]=p[0]/O*d,a[1]=p[1]/O*d}else a[0]=p[0],a[1]=p[1];return a}},97899:function(Tt){Tt.exports=me;function me(a,p,d){return a[0]=Math.max(p[0],d[0]),a[1]=Math.max(p[1],d[1]),a}},20676:function(Tt){Tt.exports=me;function me(a,p,d){return a[0]=Math.min(p[0],d[0]),a[1]=Math.min(p[1],d[1]),a}},23113:function(Tt,me,a){Tt.exports=a(79920)},79920:function(Tt){Tt.exports=me;function me(a,p,d){return a[0]=p[0]*d[0],a[1]=p[1]*d[1],a}},90549:function(Tt){Tt.exports=me;function me(a,p){return a[0]=-p[0],a[1]=-p[1],a}},36820:function(Tt){Tt.exports=me;function me(a,p){var d=p[0],z=p[1],O=d*d+z*z;return O>0&&(O=1/Math.sqrt(O),a[0]=p[0]*O,a[1]=p[1]*O),a}},85773:function(Tt){Tt.exports=me;function me(a,p){p=p||1;var d=Math.random()*2*Math.PI;return a[0]=Math.cos(d)*p,a[1]=Math.sin(d)*p,a}},48677:function(Tt){Tt.exports=me;function me(a,p,d){var z=Math.cos(d),O=Math.sin(d),S=p[0],j=p[1];return a[0]=S*z-j*O,a[1]=S*O+j*z,a}},57074:function(Tt){Tt.exports=me;function me(a,p){return a[0]=Math.round(p[0]),a[1]=Math.round(p[1]),a}},47838:function(Tt){Tt.exports=me;function me(a,p,d){return a[0]=p[0]*d,a[1]=p[1]*d,a}},21066:function(Tt){Tt.exports=me;function me(a,p,d,z){return a[0]=p[0]+d[0]*z,a[1]=p[1]+d[1]*z,a}},68854:function(Tt){Tt.exports=me;function me(a,p,d){return a[0]=p,a[1]=d,a}},79569:function(Tt,me,a){Tt.exports=a(14290)},1791:function(Tt,me,a){Tt.exports=a(26791)},14290:function(Tt){Tt.exports=me;function me(a,p){var d=p[0]-a[0],z=p[1]-a[1];return d*d+z*z}},26791:function(Tt){Tt.exports=me;function me(a){var p=a[0],d=a[1];return p*p+d*d}},45222:function(Tt,me,a){Tt.exports=a(43650)},43650:function(Tt){Tt.exports=me;function me(a,p,d){return a[0]=p[0]-d[0],a[1]=p[1]-d[1],a}},904:function(Tt){Tt.exports=me;function me(a,p,d){var z=p[0],O=p[1];return a[0]=d[0]*z+d[2]*O,a[1]=d[1]*z+d[3]*O,a}},60736:function(Tt){Tt.exports=me;function me(a,p,d){var z=p[0],O=p[1];return a[0]=d[0]*z+d[2]*O+d[4],a[1]=d[1]*z+d[3]*O+d[5],a}},60221:function(Tt){Tt.exports=me;function me(a,p,d){var z=p[0],O=p[1];return a[0]=d[0]*z+d[3]*O+d[6],a[1]=d[1]*z+d[4]*O+d[7],a}},37674:function(Tt){Tt.exports=me;function me(a,p,d){var z=p[0],O=p[1];return a[0]=d[0]*z+d[4]*O+d[12],a[1]=d[1]*z+d[5]*O+d[13],a}},80645:function(Tt,me){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */me.read=function(a,p,d,z,O){var S,j,T=O*8-z-1,B=(1<<T)-1,F=B>>1,x=-7,v=d?O-1:0,g=d?-1:1,D=a[p+v];for(v+=g,S=D&(1<<-x)-1,D>>=-x,x+=T;x>0;S=S*256+a[p+v],v+=g,x-=8);for(j=S&(1<<-x)-1,S>>=-x,x+=z;x>0;j=j*256+a[p+v],v+=g,x-=8);if(S===0)S=1-F;else{if(S===B)return j?NaN:(D?-1:1)*Infinity;j=j+Math.pow(2,z),S=S-F}return(D?-1:1)*j*Math.pow(2,S-z)},me.write=function(a,p,d,z,O,S){var j,T,B,F=S*8-O-1,x=(1<<F)-1,v=x>>1,g=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=z?0:S-1,c=z?1:-1,C=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===Infinity?(T=isNaN(p)?1:0,j=x):(j=Math.floor(Math.log(p)/Math.LN2),p*(B=Math.pow(2,-j))<1&&(j--,B*=2),j+v>=1?p+=g/B:p+=g*Math.pow(2,1-v),p*B>=2&&(j++,B/=2),j+v>=x?(T=0,j=x):j+v>=1?(T=(p*B-1)*Math.pow(2,O),j=j+v):(T=p*Math.pow(2,v-1)*Math.pow(2,O),j=0));O>=8;a[d+D]=T&255,D+=c,T/=256,O-=8);for(j=j<<O|T,F+=O;F>0;a[d+D]=j&255,D+=c,j/=256,F-=8);a[d+D-c]|=C*128}},7375:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0});var a=Symbol.for("INJECTION");function p(j,T,B,F){function x(){return F&&!Reflect.hasMetadata(a,this,T)&&Reflect.defineMetadata(a,B(),this,T),Reflect.hasMetadata(a,this,T)?Reflect.getMetadata(a,this,T):B()}function v(g){Reflect.defineMetadata(a,g,this,T)}Object.defineProperty(j,T,{configurable:!0,enumerable:!0,get:x,set:v})}function d(j,T){return function(B){return function(F,x){var v=function(){return j.get(B)};p(F,x,v,T)}}}me.makePropertyInjectDecorator=d;function z(j,T){return function(B,F){return function(x,v){var g=function(){return j.getNamed(B,F)};p(x,v,g,T)}}}me.makePropertyInjectNamedDecorator=z;function O(j,T){return function(B,F,x){return function(v,g){var D=function(){return j.getTagged(B,F,x)};p(v,g,D,T)}}}me.makePropertyInjectTaggedDecorator=O;function S(j,T){return function(B){return function(F,x){var v=function(){return j.getAll(B)};p(F,x,v,T)}}}me.makePropertyMultiInjectDecorator=S},84879:function(Tt,me,a){"use strict";var p;p={value:!0};var d=a(7375);function z(O,S){S===void 0&&(S=!0);var j=d.makePropertyInjectDecorator(O,S),T=d.makePropertyInjectNamedDecorator(O,S),B=d.makePropertyInjectTaggedDecorator(O,S),F=d.makePropertyMultiInjectDecorator(O,S);return{lazyInject:j,lazyInjectNamed:T,lazyInjectTagged:B,lazyMultiInject:F}}me.Z=z},99934:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.tagProperty=me.tagParameter=me.decorate=void 0;var p=a(16674),d=a(6867);function z(F,x,v,g){var D=d.TAGGED;S(D,F,x,g,v)}me.tagParameter=z;function O(F,x,v){var g=d.TAGGED_PROP;S(g,F.constructor,x,v)}me.tagProperty=O;function S(F,x,v,g,D){var c={},C=typeof D=="number",M=D!==void 0&&C?D.toString():v;if(C&&v!==void 0)throw new Error(p.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(F,x)&&(c=Reflect.getMetadata(F,x));var E=c[M];if(!Array.isArray(E))E=[];else for(var _=0,L=E;_<L.length;_++){var N=L[_];if(N.key===g.key)throw new Error(p.DUPLICATED_METADATA+" "+N.key.toString())}E.push(g),c[M]=E,Reflect.defineMetadata(F,c,x)}function j(F,x){Reflect.decorate(F,x)}function T(F,x){return function(v,g){x(v,g,F)}}function B(F,x,v){typeof v=="number"?j([T(v,F)],x):typeof v=="string"?Reflect.decorate([F],x,v):j([F],x)}me.decorate=B},5744:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.inject=me.LazyServiceIdentifer=void 0;var p=a(16674),d=a(6867),z=a(47738),O=a(99934),S=function(){function T(B){this._cb=B}return T.prototype.unwrap=function(){return this._cb()},T}();me.LazyServiceIdentifer=S;function j(T){return function(B,F,x){if(T===void 0)throw new Error(p.UNDEFINED_INJECT_ANNOTATION(B.name));var v=new z.Metadata(d.INJECT_TAG,T);typeof x=="number"?O.tagParameter(B,F,x,v):O.tagProperty(B,F,v)}}me.inject=j},64315:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.injectable=void 0;var p=a(16674),d=a(6867);function z(){return function(O){if(Reflect.hasOwnMetadata(d.PARAM_TYPES,O))throw new Error(p.DUPLICATED_INJECTABLE_DECORATOR);var S=Reflect.getMetadata(d.DESIGN_PARAM_TYPES,O)||[];return Reflect.defineMetadata(d.PARAM_TYPES,S,O),O}}me.injectable=z},71693:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.multiInject=void 0;var p=a(6867),d=a(47738),z=a(99934);function O(S){return function(j,T,B){var F=new d.Metadata(p.MULTI_INJECT_TAG,S);typeof B=="number"?z.tagParameter(j,T,B,F):z.tagProperty(j,T,F)}}me.multiInject=O},38085:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.named=void 0;var p=a(6867),d=a(47738),z=a(99934);function O(S){return function(j,T,B){var F=new d.Metadata(p.NAMED_TAG,S);typeof B=="number"?z.tagParameter(j,T,B,F):z.tagProperty(j,T,F)}}me.named=O},6515:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.optional=void 0;var p=a(6867),d=a(47738),z=a(99934);function O(){return function(S,j,T){var B=new d.Metadata(p.OPTIONAL_TAG,!0);typeof T=="number"?z.tagParameter(S,j,T,B):z.tagProperty(S,j,B)}}me.optional=O},7014:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.postConstruct=void 0;var p=a(16674),d=a(6867),z=a(47738);function O(){return function(S,j,T){var B=new z.Metadata(d.POST_CONSTRUCT,j);if(Reflect.hasOwnMetadata(d.POST_CONSTRUCT,S.constructor))throw new Error(p.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(d.POST_CONSTRUCT,B,S.constructor)}}me.postConstruct=O},32052:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.tagged=void 0;var p=a(47738),d=a(99934);function z(O,S){return function(j,T,B){var F=new p.Metadata(O,S);typeof B=="number"?d.tagParameter(j,T,B,F):d.tagProperty(j,T,F)}}me.tagged=z},55638:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.targetName=void 0;var p=a(6867),d=a(47738),z=a(99934);function O(S){return function(j,T,B){var F=new d.Metadata(p.NAME_TAG,S);z.tagParameter(j,T,B,F)}}me.targetName=O},86757:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.unmanaged=void 0;var p=a(6867),d=a(47738),z=a(99934);function O(){return function(S,j,T){var B=new d.Metadata(p.UNMANAGED_TAG,!0);z.tagParameter(S,j,T,B)}}me.unmanaged=O},44290:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Binding=void 0;var p=a(28421),d=a(37791),z=function(){function O(S,j){this.id=d.id(),this.activated=!1,this.serviceIdentifier=S,this.scope=j,this.type=p.BindingTypeEnum.Invalid,this.constraint=function(T){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return O.prototype.clone=function(){var S=new O(this.serviceIdentifier,this.scope);return S.activated=S.scope===p.BindingScopeEnum.Singleton?this.activated:!1,S.implementationType=this.implementationType,S.dynamicValue=this.dynamicValue,S.scope=this.scope,S.type=this.type,S.factory=this.factory,S.provider=this.provider,S.constraint=this.constraint,S.onActivation=this.onActivation,S.cache=this.cache,S},O}();me.Binding=z},23184:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BindingCount=void 0;var a={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};me.BindingCount=a},16674:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.STACK_OVERFLOW=me.CIRCULAR_DEPENDENCY_IN_FACTORY=me.POST_CONSTRUCT_ERROR=me.MULTIPLE_POST_CONSTRUCT_METHODS=me.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=me.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=me.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=me.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=me.ARGUMENTS_LENGTH_MISMATCH=me.INVALID_DECORATOR_OPERATION=me.INVALID_TO_SELF_VALUE=me.INVALID_FUNCTION_BINDING=me.INVALID_MIDDLEWARE_RETURN=me.NO_MORE_SNAPSHOTS_AVAILABLE=me.INVALID_BINDING_TYPE=me.NOT_IMPLEMENTED=me.CIRCULAR_DEPENDENCY=me.UNDEFINED_INJECT_ANNOTATION=me.MISSING_INJECT_ANNOTATION=me.MISSING_INJECTABLE_ANNOTATION=me.NOT_REGISTERED=me.CANNOT_UNBIND=me.AMBIGUOUS_MATCH=me.KEY_NOT_FOUND=me.NULL_ARGUMENT=me.DUPLICATED_METADATA=me.DUPLICATED_INJECTABLE_DECORATOR=void 0,me.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",me.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",me.NULL_ARGUMENT="NULL argument",me.KEY_NOT_FOUND="Key Not Found",me.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",me.CANNOT_UNBIND="Could not unbind serviceIdentifier:",me.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",me.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",me.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var a=function(O){return"@inject called with undefined this could mean that the class "+O+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};me.UNDEFINED_INJECT_ANNOTATION=a,me.CIRCULAR_DEPENDENCY="Circular dependency found:",me.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",me.INVALID_BINDING_TYPE="Invalid binding type:",me.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",me.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",me.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",me.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",me.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var p=function(){for(var O=[],S=0;S<arguments.length;S++)O[S]=arguments[S];return"The number of constructor arguments in the derived class "+(O[0]+" must be >= than the number of constructor arguments of its base class.")};me.ARGUMENTS_LENGTH_MISMATCH=p,me.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",me.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",me.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",me.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",me.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var d=function(){for(var O=[],S=0;S<arguments.length;S++)O[S]=arguments[S];return"@postConstruct error in class "+O[0]+": "+O[1]};me.POST_CONSTRUCT_ERROR=d;var z=function(){for(var O=[],S=0;S<arguments.length;S++)O[S]=arguments[S];return"It looks like there is a circular dependency "+("in one of the '"+O[0]+"' bindings. Please investigate bindings with")+("service identifier '"+O[1]+"'.")};me.CIRCULAR_DEPENDENCY_IN_FACTORY=z,me.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.TargetTypeEnum=me.BindingTypeEnum=me.BindingScopeEnum=void 0;var a={Request:"Request",Singleton:"Singleton",Transient:"Transient"};me.BindingScopeEnum=a;var p={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};me.BindingTypeEnum=p;var d={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};me.TargetTypeEnum=d},6867:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.NON_CUSTOM_TAG_KEYS=me.POST_CONSTRUCT=me.DESIGN_PARAM_TYPES=me.PARAM_TYPES=me.TAGGED_PROP=me.TAGGED=me.MULTI_INJECT_TAG=me.INJECT_TAG=me.OPTIONAL_TAG=me.UNMANAGED_TAG=me.NAME_TAG=me.NAMED_TAG=void 0,me.NAMED_TAG="named",me.NAME_TAG="name",me.UNMANAGED_TAG="unmanaged",me.OPTIONAL_TAG="optional",me.INJECT_TAG="inject",me.MULTI_INJECT_TAG="multi_inject",me.TAGGED="inversify:tagged",me.TAGGED_PROP="inversify:tagged_props",me.PARAM_TYPES="inversify:paramtypes",me.DESIGN_PARAM_TYPES="design:paramtypes",me.POST_CONSTRUCT="post_construct";function a(){return[me.INJECT_TAG,me.MULTI_INJECT_TAG,me.NAME_TAG,me.UNMANAGED_TAG,me.NAMED_TAG,me.OPTIONAL_TAG]}me.NON_CUSTOM_TAG_KEYS=a()},51389:function(Tt,me,a){"use strict";var p=this&&this.__awaiter||function(E,_,L,N){function b(I){return I instanceof L?I:new L(function(k){k(I)})}return new(L||(L=Promise))(function(I,k){function W(de){try{re(N.next(de))}catch(pe){k(pe)}}function q(de){try{re(N.throw(de))}catch(pe){k(pe)}}function re(de){de.done?I(de.value):b(de.value).then(W,q)}re((N=N.apply(E,_||[])).next())})},d=this&&this.__generator||function(E,_){var L={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},N,b,I,k;return k={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function W(re){return function(de){return q([re,de])}}function q(re){if(N)throw new TypeError("Generator is already executing.");for(;L;)try{if(N=1,b&&(I=re[0]&2?b.return:re[0]?b.throw||((I=b.return)&&I.call(b),0):b.next)&&!(I=I.call(b,re[1])).done)return I;switch(b=0,I&&(re=[re[0]&2,I.value]),re[0]){case 0:case 1:I=re;break;case 4:return L.label++,{value:re[1],done:!1};case 5:L.label++,b=re[1],re=[0];continue;case 7:re=L.ops.pop(),L.trys.pop();continue;default:if(I=L.trys,!(I=I.length>0&&I[I.length-1])&&(re[0]===6||re[0]===2)){L=0;continue}if(re[0]===3&&(!I||re[1]>I[0]&&re[1]<I[3])){L.label=re[1];break}if(re[0]===6&&L.label<I[1]){L.label=I[1],I=re;break}if(I&&L.label<I[2]){L.label=I[2],L.ops.push(re);break}I[2]&&L.ops.pop(),L.trys.pop();continue}re=_.call(E,L)}catch(de){re=[6,de],b=0}finally{N=I=0}if(re[0]&5)throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}},z=this&&this.__spreadArray||function(E,_){for(var L=0,N=_.length,b=E.length;L<N;L++,b++)E[b]=_[L];return E};Object.defineProperty(me,"__esModule",{value:!0}),me.Container=void 0;var O=a(44290),S=a(16674),j=a(28421),T=a(6867),B=a(51377),F=a(86311),x=a(31927),v=a(51860),g=a(37791),D=a(55800),c=a(85700),C=a(80175),M=function(){function E(_){this._appliedMiddleware=[];var L=_||{};if(typeof L!="object")throw new Error(""+S.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(L.defaultScope===void 0)L.defaultScope=j.BindingScopeEnum.Transient;else if(L.defaultScope!==j.BindingScopeEnum.Singleton&&L.defaultScope!==j.BindingScopeEnum.Transient&&L.defaultScope!==j.BindingScopeEnum.Request)throw new Error(""+S.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(L.autoBindInjectable===void 0)L.autoBindInjectable=!1;else if(typeof L.autoBindInjectable!="boolean")throw new Error(""+S.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(L.skipBaseClassChecks===void 0)L.skipBaseClassChecks=!1;else if(typeof L.skipBaseClassChecks!="boolean")throw new Error(""+S.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:L.autoBindInjectable,defaultScope:L.defaultScope,skipBaseClassChecks:L.skipBaseClassChecks},this.id=g.id(),this._bindingDictionary=new C.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new B.MetadataReader}return E.merge=function(_,L){for(var N=[],b=2;b<arguments.length;b++)N[b-2]=arguments[b];var I=new E,k=z([_,L],N).map(function(re){return F.getBindingDictionary(re)}),W=F.getBindingDictionary(I);function q(re,de){re.traverse(function(pe,ae){ae.forEach(function(ue){de.add(ue.serviceIdentifier,ue.clone())})})}return k.forEach(function(re){q(re,W)}),I},E.prototype.load=function(){for(var _=[],L=0;L<arguments.length;L++)_[L]=arguments[L];for(var N=this._getContainerModuleHelpersFactory(),b=0,I=_;b<I.length;b++){var k=I[b],W=N(k.id);k.registry(W.bindFunction,W.unbindFunction,W.isboundFunction,W.rebindFunction)}},E.prototype.loadAsync=function(){for(var _=[],L=0;L<arguments.length;L++)_[L]=arguments[L];return p(this,void 0,void 0,function(){var N,b,I,k,W;return d(this,function(q){switch(q.label){case 0:N=this._getContainerModuleHelpersFactory(),b=0,I=_,q.label=1;case 1:return b<I.length?(k=I[b],W=N(k.id),[4,k.registry(W.bindFunction,W.unbindFunction,W.isboundFunction,W.rebindFunction)]):[3,4];case 2:q.sent(),q.label=3;case 3:return b++,[3,1];case 4:return[2]}})})},E.prototype.unload=function(){for(var _=this,L=[],N=0;N<arguments.length;N++)L[N]=arguments[N];var b=function(I){return function(k){return k.moduleId===I}};L.forEach(function(I){var k=b(I.id);_._bindingDictionary.removeByCondition(k)})},E.prototype.bind=function(_){var L=this.options.defaultScope||j.BindingScopeEnum.Transient,N=new O.Binding(_,L);return this._bindingDictionary.add(_,N),new v.BindingToSyntax(N)},E.prototype.rebind=function(_){return this.unbind(_),this.bind(_)},E.prototype.unbind=function(_){try{this._bindingDictionary.remove(_)}catch(L){throw new Error(S.CANNOT_UNBIND+" "+D.getServiceIdentifierAsString(_))}},E.prototype.unbindAll=function(){this._bindingDictionary=new C.Lookup},E.prototype.isBound=function(_){var L=this._bindingDictionary.hasKey(_);return!L&&this.parent&&(L=this.parent.isBound(_)),L},E.prototype.isBoundNamed=function(_,L){return this.isBoundTagged(_,T.NAMED_TAG,L)},E.prototype.isBoundTagged=function(_,L,N){var b=!1;if(this._bindingDictionary.hasKey(_)){var I=this._bindingDictionary.get(_),k=F.createMockRequest(this,_,L,N);b=I.some(function(W){return W.constraint(k)})}return!b&&this.parent&&(b=this.parent.isBoundTagged(_,L,N)),b},E.prototype.snapshot=function(){this._snapshots.push(c.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},E.prototype.restore=function(){var _=this._snapshots.pop();if(_===void 0)throw new Error(S.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=_.bindings,this._middleware=_.middleware},E.prototype.createChild=function(_){var L=new E(_||this.options);return L.parent=this,L},E.prototype.applyMiddleware=function(){for(var _=[],L=0;L<arguments.length;L++)_[L]=arguments[L];this._appliedMiddleware=this._appliedMiddleware.concat(_);var N=this._middleware?this._middleware:this._planAndResolve();this._middleware=_.reduce(function(b,I){return I(b)},N)},E.prototype.applyCustomMetadataReader=function(_){this._metadataReader=_},E.prototype.get=function(_){return this._get(!1,!1,j.TargetTypeEnum.Variable,_)},E.prototype.getTagged=function(_,L,N){return this._get(!1,!1,j.TargetTypeEnum.Variable,_,L,N)},E.prototype.getNamed=function(_,L){return this.getTagged(_,T.NAMED_TAG,L)},E.prototype.getAll=function(_){return this._get(!0,!0,j.TargetTypeEnum.Variable,_)},E.prototype.getAllTagged=function(_,L,N){return this._get(!1,!0,j.TargetTypeEnum.Variable,_,L,N)},E.prototype.getAllNamed=function(_,L){return this.getAllTagged(_,T.NAMED_TAG,L)},E.prototype.resolve=function(_){var L=this.createChild();return L.bind(_).toSelf(),this._appliedMiddleware.forEach(function(N){L.applyMiddleware(N)}),L.get(_)},E.prototype._getContainerModuleHelpersFactory=function(){var _=this,L=function(W,q){W._binding.moduleId=q},N=function(W){return function(q){var re=_.bind.bind(_),de=re(q);return L(de,W),de}},b=function(W){return function(q){var re=_.unbind.bind(_);re(q)}},I=function(W){return function(q){var re=_.isBound.bind(_);return re(q)}},k=function(W){return function(q){var re=_.rebind.bind(_),de=re(q);return L(de,W),de}};return function(W){return{bindFunction:N(W),isboundFunction:I(W),rebindFunction:k(W),unbindFunction:b(W)}}},E.prototype._get=function(_,L,N,b,I,k){var W=null,q={avoidConstraints:_,contextInterceptor:function(re){return re},isMultiInject:L,key:I,serviceIdentifier:b,targetType:N,value:k};if(this._middleware){if(W=this._middleware(q),W==null)throw new Error(S.INVALID_MIDDLEWARE_RETURN)}else W=this._planAndResolve()(q);return W},E.prototype._planAndResolve=function(){var _=this;return function(L){var N=F.plan(_._metadataReader,_,L.isMultiInject,L.targetType,L.serviceIdentifier,L.key,L.value,L.avoidConstraints);N=L.contextInterceptor(N);var b=x.resolve(N);return b}},E}();me.Container=M},33244:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.AsyncContainerModule=me.ContainerModule=void 0;var p=a(37791),d=function(){function O(S){this.id=p.id(),this.registry=S}return O}();me.ContainerModule=d;var z=function(){function O(S){this.id=p.id(),this.registry=S}return O}();me.AsyncContainerModule=z},85700:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.ContainerSnapshot=void 0;var a=function(){function p(){}return p.of=function(d,z){var O=new p;return O.bindings=d,O.middleware=z,O},p}();me.ContainerSnapshot=a},80175:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Lookup=void 0;var p=a(16674),d=function(){function z(){this._map=new Map}return z.prototype.getMap=function(){return this._map},z.prototype.add=function(O,S){if(O==null)throw new Error(p.NULL_ARGUMENT);if(S==null)throw new Error(p.NULL_ARGUMENT);var j=this._map.get(O);j!==void 0?(j.push(S),this._map.set(O,j)):this._map.set(O,[S])},z.prototype.get=function(O){if(O==null)throw new Error(p.NULL_ARGUMENT);var S=this._map.get(O);if(S!==void 0)return S;throw new Error(p.KEY_NOT_FOUND)},z.prototype.remove=function(O){if(O==null)throw new Error(p.NULL_ARGUMENT);if(!this._map.delete(O))throw new Error(p.KEY_NOT_FOUND)},z.prototype.removeByCondition=function(O){var S=this;this._map.forEach(function(j,T){var B=j.filter(function(F){return!O(F)});B.length>0?S._map.set(T,B):S._map.delete(T)})},z.prototype.hasKey=function(O){if(O==null)throw new Error(p.NULL_ARGUMENT);return this._map.has(O)},z.prototype.clone=function(){var O=new z;return this._map.forEach(function(S,j){S.forEach(function(T){return O.add(j,T.clone())})}),O},z.prototype.traverse=function(O){this._map.forEach(function(S,j){O(j,S)})},z}();me.Lookup=d},86700:function(Tt,me,a){"use strict";var p;p={value:!0},p=p=p=p=p=p=p=p=p=p=p=p=p=p=p=me.f3=me.t6=p=me.b2=p=p=p=p=p=me.W2=p=void 0;var d=a(6867);p=d;var z=a(51389);Object.defineProperty(me,"W2",{enumerable:!0,get:function(){return z.Container}});var O=a(28421);p={enumerable:!0,get:function(){return O.BindingScopeEnum}},p={enumerable:!0,get:function(){return O.BindingTypeEnum}},p={enumerable:!0,get:function(){return O.TargetTypeEnum}};var S=a(33244);p={enumerable:!0,get:function(){return S.AsyncContainerModule}},p={enumerable:!0,get:function(){return S.ContainerModule}};var j=a(64315);Object.defineProperty(me,"b2",{enumerable:!0,get:function(){return j.injectable}});var T=a(32052);p={enumerable:!0,get:function(){return T.tagged}};var B=a(38085);Object.defineProperty(me,"t6",{enumerable:!0,get:function(){return B.named}});var F=a(5744);Object.defineProperty(me,"f3",{enumerable:!0,get:function(){return F.inject}}),p={enumerable:!0,get:function(){return F.LazyServiceIdentifer}};var x=a(6515);p={enumerable:!0,get:function(){return x.optional}};var v=a(86757);p={enumerable:!0,get:function(){return v.unmanaged}};var g=a(71693);p={enumerable:!0,get:function(){return g.multiInject}};var D=a(55638);p={enumerable:!0,get:function(){return D.targetName}};var c=a(7014);p={enumerable:!0,get:function(){return c.postConstruct}};var C=a(51377);p={enumerable:!0,get:function(){return C.MetadataReader}};var M=a(37791);p={enumerable:!0,get:function(){return M.id}};var E=a(99934);p={enumerable:!0,get:function(){return E.decorate}};var _=a(80758);p={enumerable:!0,get:function(){return _.traverseAncerstors}},p={enumerable:!0,get:function(){return _.taggedConstraint}},p={enumerable:!0,get:function(){return _.namedConstraint}},p={enumerable:!0,get:function(){return _.typeConstraint}};var L=a(55800);p={enumerable:!0,get:function(){return L.getServiceIdentifierAsString}};var N=a(70600);p={enumerable:!0,get:function(){return N.multiBindToService}}},95228:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Context=void 0;var p=a(37791),d=function(){function z(O){this.id=p.id(),this.container=O}return z.prototype.addPlan=function(O){this.plan=O},z.prototype.setCurrentRequest=function(O){this.currentRequest=O},z}();me.Context=d},47738:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Metadata=void 0;var p=a(6867),d=function(){function z(O,S){this.key=O,this.value=S}return z.prototype.toString=function(){return this.key===p.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},z}();me.Metadata=d},51377:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.MetadataReader=void 0;var p=a(6867),d=function(){function z(){}return z.prototype.getConstructorMetadata=function(O){var S=Reflect.getMetadata(p.PARAM_TYPES,O),j=Reflect.getMetadata(p.TAGGED,O);return{compilerGeneratedMetadata:S,userGeneratedMetadata:j||{}}},z.prototype.getPropertiesMetadata=function(O){var S=Reflect.getMetadata(p.TAGGED_PROP,O)||[];return S},z}();me.MetadataReader=d},55314:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Plan=void 0;var a=function(){function p(d,z){this.parentContext=d,this.rootRequest=z}return p}();me.Plan=a},86311:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.getBindingDictionary=me.createMockRequest=me.plan=void 0;var p=a(23184),d=a(16674),z=a(28421),O=a(6867),S=a(85265),j=a(55800),T=a(95228),B=a(47738),F=a(55314),x=a(6e3),v=a(6748),g=a(18924);function D(b){return b._bindingDictionary}me.getBindingDictionary=D;function c(b,I,k,W,q,re){var de=b?O.MULTI_INJECT_TAG:O.INJECT_TAG,pe=new B.Metadata(de,k),ae=new g.Target(I,W,k,pe);if(q!==void 0){var ue=new B.Metadata(q,re);ae.metadata.push(ue)}return ae}function C(b,I,k,W,q){var re=_(k.container,q.serviceIdentifier),de=[];return re.length===p.BindingCount.NoBindingsAvailable&&k.container.options.autoBindInjectable&&typeof q.serviceIdentifier=="function"&&b.getConstructorMetadata(q.serviceIdentifier).compilerGeneratedMetadata&&(k.container.bind(q.serviceIdentifier).toSelf(),re=_(k.container,q.serviceIdentifier)),I?de=re:de=re.filter(function(pe){var ae=new v.Request(pe.serviceIdentifier,k,W,pe,q);return pe.constraint(ae)}),M(q.serviceIdentifier,de,q,k.container),de}function M(b,I,k,W){switch(I.length){case p.BindingCount.NoBindingsAvailable:if(k.isOptional())return I;var q=j.getServiceIdentifierAsString(b),re=d.NOT_REGISTERED;throw re+=j.listMetadataForTarget(q,k),re+=j.listRegisteredBindingsForServiceIdentifier(W,q,_),new Error(re);case p.BindingCount.OnlyOneBindingAvailable:if(!k.isArray())return I;case p.BindingCount.MultipleBindingsAvailable:default:if(k.isArray())return I;var q=j.getServiceIdentifierAsString(b),re=d.AMBIGUOUS_MATCH+" "+q;throw re+=j.listRegisteredBindingsForServiceIdentifier(W,q,_),new Error(re)}}function E(b,I,k,W,q,re){var de,pe;if(q===null){de=C(b,I,W,null,re),pe=new v.Request(k,W,null,de,re);var ae=new F.Plan(W,pe);W.addPlan(ae)}else de=C(b,I,W,q,re),pe=q.addChildRequest(re.serviceIdentifier,de,re);de.forEach(function(ue){var te=null;if(re.isArray())te=pe.addChildRequest(ue.serviceIdentifier,ue,re);else{if(ue.cache)return;te=pe}if(ue.type===z.BindingTypeEnum.Instance&&ue.implementationType!==null){var K=x.getDependencies(b,ue.implementationType);if(!W.container.options.skipBaseClassChecks){var U=x.getBaseClassDependencyCount(b,ue.implementationType);if(K.length<U){var ee=d.ARGUMENTS_LENGTH_MISMATCH(x.getFunctionName(ue.implementationType));throw new Error(ee)}}K.forEach(function(X){E(b,!1,X.serviceIdentifier,W,te,X)})}})}function _(b,I){var k=[],W=D(b);return W.hasKey(I)?k=W.get(I):b.parent!==null&&(k=_(b.parent,I)),k}function L(b,I,k,W,q,re,de,pe){pe===void 0&&(pe=!1);var ae=new T.Context(I),ue=c(k,W,q,"",re,de);try{return E(b,pe,q,ae,null,ue),ae}catch(te){throw S.isStackOverflowExeption(te)&&ae.plan&&j.circularDependencyToException(ae.plan.rootRequest),te}}me.plan=L;function N(b,I,k,W){var q=new g.Target(z.TargetTypeEnum.Variable,"",I,new B.Metadata(k,W)),re=new T.Context(b),de=new v.Request(I,re,null,[],q);return de}me.createMockRequest=N},88460:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.QueryableString=void 0;var a=function(){function p(d){this.str=d}return p.prototype.startsWith=function(d){return this.str.indexOf(d)===0},p.prototype.endsWith=function(d){var z="",O=d.split("").reverse().join("");return z=this.str.split("").reverse().join(""),this.startsWith.call({str:z},O)},p.prototype.contains=function(d){return this.str.indexOf(d)!==-1},p.prototype.equals=function(d){return this.str===d},p.prototype.value=function(){return this.str},p}();me.QueryableString=a},6e3:function(Tt,me,a){"use strict";var p=this&&this.__spreadArray||function(C,M){for(var E=0,_=M.length,L=C.length;E<_;E++,L++)C[L]=M[E];return C};Object.defineProperty(me,"__esModule",{value:!0}),me.getFunctionName=me.getBaseClassDependencyCount=me.getDependencies=void 0;var d=a(5744),z=a(16674),O=a(28421),S=a(6867),j=a(55800);Object.defineProperty(me,"getFunctionName",{enumerable:!0,get:function(){return j.getFunctionName}});var T=a(18924);function B(C,M){var E=j.getFunctionName(M),_=F(C,E,M,!1);return _}me.getDependencies=B;function F(C,M,E,_){var L=C.getConstructorMetadata(E),N=L.compilerGeneratedMetadata;if(N===void 0){var b=z.MISSING_INJECTABLE_ANNOTATION+" "+M+".";throw new Error(b)}var I=L.userGeneratedMetadata,k=Object.keys(I),W=E.length===0&&k.length>0,q=k.length>E.length,re=W||q?k.length:E.length,de=v(_,M,N,I,re),pe=g(C,E),ae=p(p([],de),pe);return ae}function x(C,M,E,_,L){var N=L[C.toString()]||[],b=c(N),I=b.unmanaged!==!0,k=_[C],W=b.inject||b.multiInject;if(k=W||k,k instanceof d.LazyServiceIdentifer&&(k=k.unwrap()),I){var q=k===Object,re=k===Function,de=k===void 0,pe=q||re||de;if(!M&&pe){var ae=z.MISSING_INJECT_ANNOTATION+" argument "+C+" in class "+E+".";throw new Error(ae)}var ue=new T.Target(O.TargetTypeEnum.ConstructorArgument,b.targetName,k);return ue.metadata=N,ue}return null}function v(C,M,E,_,L){for(var N=[],b=0;b<L;b++){var I=b,k=x(I,C,M,E,_);k!==null&&N.push(k)}return N}function g(C,M){for(var E=C.getPropertiesMetadata(M),_=[],L=Object.keys(E),N=0,b=L;N<b.length;N++){var I=b[N],k=E[I],W=c(E[I]),q=W.targetName||I,re=W.inject||W.multiInject,de=new T.Target(O.TargetTypeEnum.ClassProperty,q,re);de.metadata=k,_.push(de)}var pe=Object.getPrototypeOf(M.prototype).constructor;if(pe!==Object){var ae=g(C,pe);_=p(p([],_),ae)}return _}function D(C,M){var E=Object.getPrototypeOf(M.prototype).constructor;if(E!==Object){var _=j.getFunctionName(E),L=F(C,_,E,!0),N=L.map(function(k){return k.metadata.filter(function(W){return W.key===S.UNMANAGED_TAG})}),b=[].concat.apply([],N).length,I=L.length-b;return I>0?I:D(C,E)}else return 0}me.getBaseClassDependencyCount=D;function c(C){var M={};return C.forEach(function(E){M[E.key.toString()]=E.value}),{inject:M[S.INJECT_TAG],multiInject:M[S.MULTI_INJECT_TAG],targetName:M[S.NAME_TAG],unmanaged:M[S.UNMANAGED_TAG]}}},6748:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Request=void 0;var p=a(37791),d=function(){function z(O,S,j,T,B){this.id=p.id(),this.serviceIdentifier=O,this.parentContext=S,this.parentRequest=j,this.target=B,this.childRequests=[],this.bindings=Array.isArray(T)?T:[T],this.requestScope=j===null?new Map:null}return z.prototype.addChildRequest=function(O,S,j){var T=new z(O,this.parentContext,this,S,j);return this.childRequests.push(T),T},z}();me.Request=d},18924:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.Target=void 0;var p=a(6867),d=a(37791),z=a(47738),O=a(88460),S=function(){function j(T,B,F,x){this.id=d.id(),this.type=T,this.serviceIdentifier=F,this.name=new O.QueryableString(B||""),this.metadata=new Array;var v=null;typeof x=="string"?v=new z.Metadata(p.NAMED_TAG,x):x instanceof z.Metadata&&(v=x),v!==null&&this.metadata.push(v)}return j.prototype.hasTag=function(T){for(var B=0,F=this.metadata;B<F.length;B++){var x=F[B];if(x.key===T)return!0}return!1},j.prototype.isArray=function(){return this.hasTag(p.MULTI_INJECT_TAG)},j.prototype.matchesArray=function(T){return this.matchesTag(p.MULTI_INJECT_TAG)(T)},j.prototype.isNamed=function(){return this.hasTag(p.NAMED_TAG)},j.prototype.isTagged=function(){return this.metadata.some(function(T){return p.NON_CUSTOM_TAG_KEYS.every(function(B){return T.key!==B})})},j.prototype.isOptional=function(){return this.matchesTag(p.OPTIONAL_TAG)(!0)},j.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(T){return T.key===p.NAMED_TAG})[0]:null},j.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(T){return p.NON_CUSTOM_TAG_KEYS.every(function(B){return T.key!==B})}):null},j.prototype.matchesNamedTag=function(T){return this.matchesTag(p.NAMED_TAG)(T)},j.prototype.matchesTag=function(T){var B=this;return function(F){for(var x=0,v=B.metadata;x<v.length;x++){var g=v[x];if(g.key===T&&g.value===F)return!0}return!1}},j}();me.Target=S},52279:function(Tt,me,a){"use strict";var p=this&&this.__spreadArray||function(F,x){for(var v=0,g=x.length,D=F.length;v<g;v++,D++)F[D]=x[v];return F};Object.defineProperty(me,"__esModule",{value:!0}),me.resolveInstance=void 0;var d=a(16674),z=a(28421),O=a(6867);function S(F,x,v){var g=x.filter(function(c){return c.target!==null&&c.target.type===z.TargetTypeEnum.ClassProperty}),D=g.map(v);return g.forEach(function(c,C){var M="";M=c.target.name.value();var E=D[C];F[M]=E}),F}function j(F,x){return new(F.bind.apply(F,p([void 0],x)))}function T(F,x){if(Reflect.hasMetadata(O.POST_CONSTRUCT,F)){var v=Reflect.getMetadata(O.POST_CONSTRUCT,F);try{x[v.value]()}catch(g){throw new Error(d.POST_CONSTRUCT_ERROR(F.name,g.message))}}}function B(F,x,v){var g=null;if(x.length>0){var D=x.filter(function(C){return C.target!==null&&C.target.type===z.TargetTypeEnum.ConstructorArgument}),c=D.map(v);g=j(F,c),g=S(g,x,v)}else g=new F;return T(F,g),g}me.resolveInstance=B},31927:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.resolve=void 0;var p=a(16674),d=a(28421),z=a(85265),O=a(55800),S=a(52279),j=function(F,x,v){try{return v()}catch(g){throw z.isStackOverflowExeption(g)?new Error(p.CIRCULAR_DEPENDENCY_IN_FACTORY(F,x.toString())):g}},T=function(F){return function(x){x.parentContext.setCurrentRequest(x);var v=x.bindings,g=x.childRequests,D=x.target&&x.target.isArray(),c=!x.parentRequest||!x.parentRequest.target||!x.target||!x.parentRequest.target.matchesArray(x.target.serviceIdentifier);if(D&&c)return g.map(function(N){var b=T(F);return b(N)});var C=null;if(x.target.isOptional()&&v.length===0)return;var M=v[0],E=M.scope===d.BindingScopeEnum.Singleton,_=M.scope===d.BindingScopeEnum.Request;if(E&&M.activated)return M.cache;if(_&&F!==null&&F.has(M.id))return F.get(M.id);if(M.type===d.BindingTypeEnum.ConstantValue)C=M.cache,M.activated=!0;else if(M.type===d.BindingTypeEnum.Function)C=M.cache,M.activated=!0;else if(M.type===d.BindingTypeEnum.Constructor)C=M.implementationType;else if(M.type===d.BindingTypeEnum.DynamicValue&&M.dynamicValue!==null)C=j("toDynamicValue",M.serviceIdentifier,function(){return M.dynamicValue(x.parentContext)});else if(M.type===d.BindingTypeEnum.Factory&&M.factory!==null)C=j("toFactory",M.serviceIdentifier,function(){return M.factory(x.parentContext)});else if(M.type===d.BindingTypeEnum.Provider&&M.provider!==null)C=j("toProvider",M.serviceIdentifier,function(){return M.provider(x.parentContext)});else if(M.type===d.BindingTypeEnum.Instance&&M.implementationType!==null)C=S.resolveInstance(M.implementationType,g,T(F));else{var L=O.getServiceIdentifierAsString(x.serviceIdentifier);throw new Error(p.INVALID_BINDING_TYPE+" "+L)}return typeof M.onActivation=="function"&&(C=M.onActivation(x.parentContext,C)),E&&(M.cache=C,M.activated=!0),_&&F!==null&&!F.has(M.id)&&F.set(M.id,C),C}};function B(F){var x=T(F.plan.rootRequest.requestScope);return x(F.plan.rootRequest)}me.resolve=B},83366:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BindingInSyntax=void 0;var p=a(28421),d=a(71325),z=function(){function O(S){this._binding=S}return O.prototype.inRequestScope=function(){return this._binding.scope=p.BindingScopeEnum.Request,new d.BindingWhenOnSyntax(this._binding)},O.prototype.inSingletonScope=function(){return this._binding.scope=p.BindingScopeEnum.Singleton,new d.BindingWhenOnSyntax(this._binding)},O.prototype.inTransientScope=function(){return this._binding.scope=p.BindingScopeEnum.Transient,new d.BindingWhenOnSyntax(this._binding)},O}();me.BindingInSyntax=z},99812:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BindingInWhenOnSyntax=void 0;var p=a(83366),d=a(51811),z=a(98370),O=function(){function S(j){this._binding=j,this._bindingWhenSyntax=new z.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new d.BindingOnSyntax(this._binding),this._bindingInSyntax=new p.BindingInSyntax(j)}return S.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},S.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},S.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},S.prototype.when=function(j){return this._bindingWhenSyntax.when(j)},S.prototype.whenTargetNamed=function(j){return this._bindingWhenSyntax.whenTargetNamed(j)},S.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},S.prototype.whenTargetTagged=function(j,T){return this._bindingWhenSyntax.whenTargetTagged(j,T)},S.prototype.whenInjectedInto=function(j){return this._bindingWhenSyntax.whenInjectedInto(j)},S.prototype.whenParentNamed=function(j){return this._bindingWhenSyntax.whenParentNamed(j)},S.prototype.whenParentTagged=function(j,T){return this._bindingWhenSyntax.whenParentTagged(j,T)},S.prototype.whenAnyAncestorIs=function(j){return this._bindingWhenSyntax.whenAnyAncestorIs(j)},S.prototype.whenNoAncestorIs=function(j){return this._bindingWhenSyntax.whenNoAncestorIs(j)},S.prototype.whenAnyAncestorNamed=function(j){return this._bindingWhenSyntax.whenAnyAncestorNamed(j)},S.prototype.whenAnyAncestorTagged=function(j,T){return this._bindingWhenSyntax.whenAnyAncestorTagged(j,T)},S.prototype.whenNoAncestorNamed=function(j){return this._bindingWhenSyntax.whenNoAncestorNamed(j)},S.prototype.whenNoAncestorTagged=function(j,T){return this._bindingWhenSyntax.whenNoAncestorTagged(j,T)},S.prototype.whenAnyAncestorMatches=function(j){return this._bindingWhenSyntax.whenAnyAncestorMatches(j)},S.prototype.whenNoAncestorMatches=function(j){return this._bindingWhenSyntax.whenNoAncestorMatches(j)},S.prototype.onActivation=function(j){return this._bindingOnSyntax.onActivation(j)},S}();me.BindingInWhenOnSyntax=O},51811:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BindingOnSyntax=void 0;var p=a(98370),d=function(){function z(O){this._binding=O}return z.prototype.onActivation=function(O){return this._binding.onActivation=O,new p.BindingWhenSyntax(this._binding)},z}();me.BindingOnSyntax=d},51860:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BindingToSyntax=void 0;var p=a(16674),d=a(28421),z=a(99812),O=a(71325),S=function(){function j(T){this._binding=T}return j.prototype.to=function(T){return this._binding.type=d.BindingTypeEnum.Instance,this._binding.implementationType=T,new z.BindingInWhenOnSyntax(this._binding)},j.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+p.INVALID_TO_SELF_VALUE);var T=this._binding.serviceIdentifier;return this.to(T)},j.prototype.toConstantValue=function(T){return this._binding.type=d.BindingTypeEnum.ConstantValue,this._binding.cache=T,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=d.BindingScopeEnum.Singleton,new O.BindingWhenOnSyntax(this._binding)},j.prototype.toDynamicValue=function(T){return this._binding.type=d.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=T,this._binding.implementationType=null,new z.BindingInWhenOnSyntax(this._binding)},j.prototype.toConstructor=function(T){return this._binding.type=d.BindingTypeEnum.Constructor,this._binding.implementationType=T,this._binding.scope=d.BindingScopeEnum.Singleton,new O.BindingWhenOnSyntax(this._binding)},j.prototype.toFactory=function(T){return this._binding.type=d.BindingTypeEnum.Factory,this._binding.factory=T,this._binding.scope=d.BindingScopeEnum.Singleton,new O.BindingWhenOnSyntax(this._binding)},j.prototype.toFunction=function(T){if(typeof T!="function")throw new Error(p.INVALID_FUNCTION_BINDING);var B=this.toConstantValue(T);return this._binding.type=d.BindingTypeEnum.Function,this._binding.scope=d.BindingScopeEnum.Singleton,B},j.prototype.toAutoFactory=function(T){return this._binding.type=d.BindingTypeEnum.Factory,this._binding.factory=function(B){var F=function(){return B.container.get(T)};return F},this._binding.scope=d.BindingScopeEnum.Singleton,new O.BindingWhenOnSyntax(this._binding)},j.prototype.toProvider=function(T){return this._binding.type=d.BindingTypeEnum.Provider,this._binding.provider=T,this._binding.scope=d.BindingScopeEnum.Singleton,new O.BindingWhenOnSyntax(this._binding)},j.prototype.toService=function(T){this.toDynamicValue(function(B){return B.container.get(T)})},j}();me.BindingToSyntax=S},71325:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BindingWhenOnSyntax=void 0;var p=a(51811),d=a(98370),z=function(){function O(S){this._binding=S,this._bindingWhenSyntax=new d.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new p.BindingOnSyntax(this._binding)}return O.prototype.when=function(S){return this._bindingWhenSyntax.when(S)},O.prototype.whenTargetNamed=function(S){return this._bindingWhenSyntax.whenTargetNamed(S)},O.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},O.prototype.whenTargetTagged=function(S,j){return this._bindingWhenSyntax.whenTargetTagged(S,j)},O.prototype.whenInjectedInto=function(S){return this._bindingWhenSyntax.whenInjectedInto(S)},O.prototype.whenParentNamed=function(S){return this._bindingWhenSyntax.whenParentNamed(S)},O.prototype.whenParentTagged=function(S,j){return this._bindingWhenSyntax.whenParentTagged(S,j)},O.prototype.whenAnyAncestorIs=function(S){return this._bindingWhenSyntax.whenAnyAncestorIs(S)},O.prototype.whenNoAncestorIs=function(S){return this._bindingWhenSyntax.whenNoAncestorIs(S)},O.prototype.whenAnyAncestorNamed=function(S){return this._bindingWhenSyntax.whenAnyAncestorNamed(S)},O.prototype.whenAnyAncestorTagged=function(S,j){return this._bindingWhenSyntax.whenAnyAncestorTagged(S,j)},O.prototype.whenNoAncestorNamed=function(S){return this._bindingWhenSyntax.whenNoAncestorNamed(S)},O.prototype.whenNoAncestorTagged=function(S,j){return this._bindingWhenSyntax.whenNoAncestorTagged(S,j)},O.prototype.whenAnyAncestorMatches=function(S){return this._bindingWhenSyntax.whenAnyAncestorMatches(S)},O.prototype.whenNoAncestorMatches=function(S){return this._bindingWhenSyntax.whenNoAncestorMatches(S)},O.prototype.onActivation=function(S){return this._bindingOnSyntax.onActivation(S)},O}();me.BindingWhenOnSyntax=z},98370:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.BindingWhenSyntax=void 0;var p=a(51811),d=a(80758),z=function(){function O(S){this._binding=S}return O.prototype.when=function(S){return this._binding.constraint=S,new p.BindingOnSyntax(this._binding)},O.prototype.whenTargetNamed=function(S){return this._binding.constraint=d.namedConstraint(S),new p.BindingOnSyntax(this._binding)},O.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(S){var j=S.target!==null&&!S.target.isNamed()&&!S.target.isTagged();return j},new p.BindingOnSyntax(this._binding)},O.prototype.whenTargetTagged=function(S,j){return this._binding.constraint=d.taggedConstraint(S)(j),new p.BindingOnSyntax(this._binding)},O.prototype.whenInjectedInto=function(S){return this._binding.constraint=function(j){return d.typeConstraint(S)(j.parentRequest)},new p.BindingOnSyntax(this._binding)},O.prototype.whenParentNamed=function(S){return this._binding.constraint=function(j){return d.namedConstraint(S)(j.parentRequest)},new p.BindingOnSyntax(this._binding)},O.prototype.whenParentTagged=function(S,j){return this._binding.constraint=function(T){return d.taggedConstraint(S)(j)(T.parentRequest)},new p.BindingOnSyntax(this._binding)},O.prototype.whenAnyAncestorIs=function(S){return this._binding.constraint=function(j){return d.traverseAncerstors(j,d.typeConstraint(S))},new p.BindingOnSyntax(this._binding)},O.prototype.whenNoAncestorIs=function(S){return this._binding.constraint=function(j){return!d.traverseAncerstors(j,d.typeConstraint(S))},new p.BindingOnSyntax(this._binding)},O.prototype.whenAnyAncestorNamed=function(S){return this._binding.constraint=function(j){return d.traverseAncerstors(j,d.namedConstraint(S))},new p.BindingOnSyntax(this._binding)},O.prototype.whenNoAncestorNamed=function(S){return this._binding.constraint=function(j){return!d.traverseAncerstors(j,d.namedConstraint(S))},new p.BindingOnSyntax(this._binding)},O.prototype.whenAnyAncestorTagged=function(S,j){return this._binding.constraint=function(T){return d.traverseAncerstors(T,d.taggedConstraint(S)(j))},new p.BindingOnSyntax(this._binding)},O.prototype.whenNoAncestorTagged=function(S,j){return this._binding.constraint=function(T){return!d.traverseAncerstors(T,d.taggedConstraint(S)(j))},new p.BindingOnSyntax(this._binding)},O.prototype.whenAnyAncestorMatches=function(S){return this._binding.constraint=function(j){return d.traverseAncerstors(j,S)},new p.BindingOnSyntax(this._binding)},O.prototype.whenNoAncestorMatches=function(S){return this._binding.constraint=function(j){return!d.traverseAncerstors(j,S)},new p.BindingOnSyntax(this._binding)},O}();me.BindingWhenSyntax=z},80758:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.typeConstraint=me.namedConstraint=me.taggedConstraint=me.traverseAncerstors=void 0;var p=a(6867),d=a(47738),z=function(T,B){var F=T.parentRequest;return F!==null?B(F)?!0:z(F,B):!1};me.traverseAncerstors=z;var O=function(T){return function(B){var F=function(x){return x!==null&&x.target!==null&&x.target.matchesTag(T)(B)};return F.metaData=new d.Metadata(T,B),F}};me.taggedConstraint=O;var S=O(p.NAMED_TAG);me.namedConstraint=S;var j=function(T){return function(B){var F=null;if(B!==null)if(F=B.bindings[0],typeof T=="string"){var x=F.serviceIdentifier;return x===T}else{var v=B.bindings[0].implementationType;return T===v}return!1}};me.typeConstraint=j},70600:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.multiBindToService=void 0;var a=function(p){return function(d){return function(){for(var z=[],O=0;O<arguments.length;O++)z[O]=arguments[O];return z.forEach(function(S){return p.bind(S).toService(d)})}}};me.multiBindToService=a},85265:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.isStackOverflowExeption=void 0;var p=a(16674);function d(z){return z instanceof RangeError||z.message===p.STACK_OVERFLOW}me.isStackOverflowExeption=d},37791:function(Tt,me){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.id=void 0;var a=0;function p(){return a++}me.id=p},55800:function(Tt,me,a){"use strict";Object.defineProperty(me,"__esModule",{value:!0}),me.circularDependencyToException=me.listMetadataForTarget=me.listRegisteredBindingsForServiceIdentifier=me.getServiceIdentifierAsString=me.getFunctionName=void 0;var p=a(16674);function d(F){if(typeof F=="function"){var x=F;return x.name}else{if(typeof F=="symbol")return F.toString();var x=F;return x}}me.getServiceIdentifierAsString=d;function z(F,x,v){var g="",D=v(F,x);return D.length!==0&&(g=`
Registered bindings:`,D.forEach(function(c){var C="Object";c.implementationType!==null&&(C=B(c.implementationType)),g=g+`
 `+C,c.constraint.metaData&&(g=g+" - "+c.constraint.metaData)})),g}me.listRegisteredBindingsForServiceIdentifier=z;function O(F,x){return F.parentRequest===null?!1:F.parentRequest.serviceIdentifier===x?!0:O(F.parentRequest,x)}function S(F){function x(g,D){D===void 0&&(D=[]);var c=d(g.serviceIdentifier);return D.push(c),g.parentRequest!==null?x(g.parentRequest,D):D}var v=x(F);return v.reverse().join(" --> ")}function j(F){F.childRequests.forEach(function(x){if(O(x,x.serviceIdentifier)){var v=S(x);throw new Error(p.CIRCULAR_DEPENDENCY+" "+v)}else j(x)})}me.circularDependencyToException=j;function T(F,x){if(x.isTagged()||x.isNamed()){var v="",g=x.getNamedTag(),D=x.getCustomTags();return g!==null&&(v+=g.toString()+`
`),D!==null&&D.forEach(function(c){v+=c.toString()+`
`})," "+F+`
 `+F+" - "+v}else return" "+F}me.listMetadataForTarget=T;function B(F){if(F.name)return F.name;var x=F.toString(),v=x.match(/^function\s*([^\s(]+)/);return v?v[1]:"Anonymous function: "+x}me.getFunctionName=B},26565:function(Tt,me,a){self.MonacoEnvironment=function(p){function d(z){return z.replace(/\/$/,"")}return{globalAPI:!1,getWorkerUrl:function(z,O){var S=a.p,j=(S?d(S)+"/":"")+p[O];if(/^((http:)|(https:)|(file:)|(\/\/))/.test(j)){var T=String(window.location),B=T.substr(0,T.length-window.location.hash.length-window.location.search.length-window.location.pathname.length);if(j.substring(0,B.length)!==B){/^(\/\/)/.test(j)&&(j=window.location.protocol+j);var F="/*"+O+'*/importScripts("'+j+'");',x=new Blob([F],{type:"application/javascript"});return URL.createObjectURL(x)}}return j}}}({editorWorkerService:"editor.worker.js",json:"json.worker.js",typescript:"ts.worker.js",javascript:"ts.worker.js"}),a(29477),a(90236),a(71387),a(69317),a(54367),a(72102),a(55833),a(29575),a(85729),a(31667),a(23365),a(93740),a(41895),a(36022),a(76917),a(31633),a(30835),a(44125),a(61097),a(40874),a(43588),a(60628),a(22470),a(9427),a(19646),a(56353),a(84602),a(8782),a(83764),a(97830),a(97615),a(65766),a(76),a(57253),a(77061),a(95313),a(38956),a(78944),a(48766),a(45048),a(32894),a(102),a(98762),a(18786),a(15662),a(64662),a(52614),a(52954),a(79607),a(61271),a(70943),a(37181),a(86709),Tt.exports=a(71163),a(43763),a(72323),a(88307),a(39585),a(38698),a(1526)},16268:function(Tt,me,a){"use strict";a.r(me),a.d(me,{PixelRatio:function(){return T},getZoomFactor:function(){return B},isFirefox:function(){return x},isWebKit:function(){return v},isChrome:function(){return g},isSafari:function(){return D},isWebkitWebView:function(){return c},isElectron:function(){return C},isAndroid:function(){return M},isStandalone:function(){return E}});var p=a(4669),d=a(9917);class z{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}z.INSTANCE=new z;class O extends d.JT{constructor(){super();this._onDidChange=this._register(new p.Q5),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(L){this._mediaQueryList&&this._mediaQueryList.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),L&&this._onDidChange.fire()}}class S extends d.JT{constructor(){super();this._onDidChange=this._register(new p.Q5),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const L=this._register(new O);this._register(L.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){const L=document.createElement("canvas").getContext("2d"),N=window.devicePixelRatio||1,b=L.webkitBackingStorePixelRatio||L.mozBackingStorePixelRatio||L.msBackingStorePixelRatio||L.oBackingStorePixelRatio||L.backingStorePixelRatio||1;return N/b}}class j{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new S),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}const T=new j;function B(){return z.INSTANCE.getZoomFactor()}const F=navigator.userAgent,x=F.indexOf("Firefox")>=0,v=F.indexOf("AppleWebKit")>=0,g=F.indexOf("Chrome")>=0,D=!g&&F.indexOf("Safari")>=0,c=!g&&!D&&v,C=F.indexOf("Electron/")>=0,M=F.indexOf("Android")>=0,E=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches},10161:function(Tt,me,a){"use strict";a.d(me,{D:function(){return z}});var p=a(16268),d=a(1432);const z={clipboard:{writeText:d.tY||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:d.tY||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>d.tY||p.isStandalone?0:navigator.keyboard||p.isSafari?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)}},23547:function(Tt,me,a){"use strict";a.d(me,{go:function(){return d},TN:function(){return z},P$:function(){return O}});var p=a(81170);const d={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:p.v.text,TERMINALS:"Terminals"};class z{constructor(j){this.data=j}update(){}getData(){return this.data}}const O={CurrentDragAndDropData:void 0}},65321:function(Tt,me,a){"use strict";a.d(me,{PO:function(){return v},Uw:function(){return g},nm:function(){return c},mu:function(){return E},GQ:function(){return _},u0:function(){return N},q6:function(){return b},j_:function(){return I},RE:function(){return k},IC:function(){return W},lI:function(){return de},jL:function(){return pe},Y_:function(){return U},Dx:function(){return ee},D6:function(){return X},Ro:function(){return oe},xQ:function(){return Ce},dp:function(){return ye},i:function(){return ke},DI:function(){return Te},w:function(){return ge},FK:function(){return we},If:function(){return ze},wn:function(){return Qe},jg:function(){return Pe},Fx:function(){return Oe},uU:function(){return qe},OO:function(){return Ne},Ay:function(){return Fe},vY:function(){return ne},dS:function(){return Q},fk:function(){return Ge},uN:function(){return nt},Re:function(){return _t},tw:function(){return Ot},zB:function(){return rn},vL:function(){return gt},_0:function(){return Ue},go:function(){return dt},R3:function(){return Re},Ce:function(){return Ve},mc:function(){return at},$:function(){return Et},$Z:function(){return Dt},Cp:function(){return Xe},H$:function(){return ft},Uh:function(){return an},V3:function(){return An},jt:function(){return Fn},wY:function(){return Ht},_h:function(){return Kt},_q:function(){return pn},uB:function(){return Vn}});var p=a(16268),d=a(10161),z=a(59069),O=a(23938),S=a(15393),j=a(17301),T=a(4669),B=a(9917),F=a(66663),x=a(1432);function v(kt){for(;kt.firstChild;)kt.firstChild.remove()}function g(kt){var Zt;return(Zt=kt==null?void 0:kt.isConnected)!==null&&Zt!==void 0?Zt:!1}class D{constructor(Zt,wn,Pi,Fi){this._node=Zt,this._type=wn,this._handler=Pi,this._options=Fi||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function c(kt,Zt,wn,Pi){return new D(kt,Zt,wn,Pi)}function C(kt){return function(Zt){return kt(new O.n(Zt))}}function M(kt){return function(Zt){return kt(new z.y(Zt))}}let E=function(Zt,wn,Pi,Fi){let Ji=Pi;return wn==="click"||wn==="mousedown"?Ji=C(Pi):(wn==="keydown"||wn==="keypress"||wn==="keyup")&&(Ji=M(Pi)),c(Zt,wn,Ji,Fi)},_=function(Zt,wn,Pi){let Fi=C(wn);return N(Zt,Fi,Pi)},L=function(Zt,wn,Pi){let Fi=C(wn);return b(Zt,Fi,Pi)};function N(kt,Zt,wn){return c(kt,x.gn&&d.D.pointerEvents?Ot.POINTER_DOWN:Ot.MOUSE_DOWN,Zt,wn)}function b(kt,Zt,wn){return c(kt,x.gn&&d.D.pointerEvents?Ot.POINTER_UP:Ot.MOUSE_UP,Zt,wn)}function I(kt,Zt){return c(kt,"mouseout",wn=>{let Pi=wn.relatedTarget;for(;Pi&&Pi!==kt;)Pi=Pi.parentNode;Pi!==kt&&Zt(wn)})}function k(kt,Zt){return c(kt,"pointerout",wn=>{let Pi=wn.relatedTarget;for(;Pi&&Pi!==kt;)Pi=Pi.parentNode;Pi!==kt&&Zt(wn)})}function W(kt,Zt,wn){let Pi=null;const Fi=Vt=>zt.fire(Vt),Ji=()=>{Pi||(Pi=new D(kt,Zt,Fi,wn))},si=()=>{Pi&&(Pi.dispose(),Pi=null)},zt=new T.Q5({onFirstListenerAdd:Ji,onLastListenerRemove:si});return zt}let q=null;function re(kt){if(!q){const Zt=wn=>setTimeout(()=>wn(new Date().getTime()),0);q=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||Zt}return q.call(self,kt)}let de,pe;class ae{constructor(Zt,wn=0){this._runner=Zt,this.priority=wn,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(Zt){(0,j.dL)(Zt)}}static sort(Zt,wn){return wn.priority-Zt.priority}}(function(){let kt=[],Zt=null,wn=!1,Pi=!1,Fi=()=>{for(wn=!1,Zt=kt,kt=[],Pi=!0;Zt.length>0;)Zt.sort(ae.sort),Zt.shift().execute();Pi=!1};pe=(Ji,si=0)=>{let zt=new ae(Ji,si);return kt.push(zt),wn||(wn=!0,re(Fi)),zt},de=(Ji,si)=>{if(Pi){let zt=new ae(Ji,si);return Zt.push(zt),zt}else return pe(Ji,si)}})();const ue=8,te=function(kt,Zt){return Zt};class K extends B.JT{constructor(Zt,wn,Pi,Fi=te,Ji=ue){super();let si=null,zt=0,Vt=this._register(new S._F),vn=()=>{zt=new Date().getTime(),Pi(si),si=null};this._register(c(Zt,wn,Sn=>{si=Fi(si,Sn);let Bn=new Date().getTime()-zt;Bn>=Ji?(Vt.cancel(),vn()):Vt.setIfNotSet(vn,Ji-Bn)}))}}function U(kt,Zt,wn,Pi,Fi){return new K(kt,Zt,wn,Pi,Fi)}function ee(kt){return document.defaultView.getComputedStyle(kt,null)}function X(kt){if(kt!==document.body)return new oe(kt.clientWidth,kt.clientHeight);if(x.gn&&window.visualViewport)return new oe(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new oe(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new oe(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new oe(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class le{static convertToPixels(Zt,wn){return parseFloat(wn)||0}static getDimension(Zt,wn,Pi){let Fi=ee(Zt),Ji="0";return Fi&&(Fi.getPropertyValue?Ji=Fi.getPropertyValue(wn):Ji=Fi.getAttribute(Pi)),le.convertToPixels(Zt,Ji)}static getBorderLeftWidth(Zt){return le.getDimension(Zt,"border-left-width","borderLeftWidth")}static getBorderRightWidth(Zt){return le.getDimension(Zt,"border-right-width","borderRightWidth")}static getBorderTopWidth(Zt){return le.getDimension(Zt,"border-top-width","borderTopWidth")}static getBorderBottomWidth(Zt){return le.getDimension(Zt,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(Zt){return le.getDimension(Zt,"padding-left","paddingLeft")}static getPaddingRight(Zt){return le.getDimension(Zt,"padding-right","paddingRight")}static getPaddingTop(Zt){return le.getDimension(Zt,"padding-top","paddingTop")}static getPaddingBottom(Zt){return le.getDimension(Zt,"padding-bottom","paddingBottom")}static getMarginLeft(Zt){return le.getDimension(Zt,"margin-left","marginLeft")}static getMarginTop(Zt){return le.getDimension(Zt,"margin-top","marginTop")}static getMarginRight(Zt){return le.getDimension(Zt,"margin-right","marginRight")}static getMarginBottom(Zt){return le.getDimension(Zt,"margin-bottom","marginBottom")}}class oe{constructor(Zt,wn){this.width=Zt,this.height=wn}with(Zt=this.width,wn=this.height){return Zt!==this.width||wn!==this.height?new oe(Zt,wn):this}static is(Zt){return typeof Zt=="object"&&typeof Zt.height=="number"&&typeof Zt.width=="number"}static lift(Zt){return Zt instanceof oe?Zt:new oe(Zt.width,Zt.height)}static equals(Zt,wn){return Zt===wn?!0:!Zt||!wn?!1:Zt.width===wn.width&&Zt.height===wn.height}}oe.None=new oe(0,0);function Ce(kt){let Zt=kt.offsetParent,wn=kt.offsetTop,Pi=kt.offsetLeft;for(;(kt=kt.parentNode)!==null&&kt!==document.body&&kt!==document.documentElement;){wn-=kt.scrollTop;const Fi=Je(kt)?null:ee(kt);Fi&&(Pi-=Fi.direction!=="rtl"?kt.scrollLeft:-kt.scrollLeft),kt===Zt&&(Pi+=le.getBorderLeftWidth(kt),wn+=le.getBorderTopWidth(kt),wn+=kt.offsetTop,Pi+=kt.offsetLeft,Zt=kt.offsetParent)}return{left:Pi,top:wn}}function ye(kt,Zt,wn){typeof Zt=="number"&&(kt.style.width=`${Zt}px`),typeof wn=="number"&&(kt.style.height=`${wn}px`)}function ke(kt){let Zt=kt.getBoundingClientRect();return{left:Zt.left+Te.scrollX,top:Zt.top+Te.scrollY,width:Zt.width,height:Zt.height}}const Te=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function ge(kt){let Zt=le.getMarginLeft(kt)+le.getMarginRight(kt);return kt.offsetWidth+Zt}function we(kt){let Zt=le.getBorderLeftWidth(kt)+le.getBorderRightWidth(kt),wn=le.getPaddingLeft(kt)+le.getPaddingRight(kt);return kt.offsetWidth-Zt-wn}function ze(kt){let Zt=le.getBorderTopWidth(kt)+le.getBorderBottomWidth(kt),wn=le.getPaddingTop(kt)+le.getPaddingBottom(kt);return kt.offsetHeight-Zt-wn}function Qe(kt){let Zt=le.getMarginTop(kt)+le.getMarginBottom(kt);return kt.offsetHeight+Zt}function Pe(kt,Zt){for(;kt;){if(kt===Zt)return!0;kt=kt.parentNode}return!1}function Oe(kt,Zt,wn){for(;kt&&kt.nodeType===kt.ELEMENT_NODE;){if(kt.classList.contains(Zt))return kt;if(wn){if(typeof wn=="string"){if(kt.classList.contains(wn))return null}else if(kt===wn)return null}kt=kt.parentNode}return null}function qe(kt,Zt,wn){return!!Oe(kt,Zt,wn)}function Je(kt){return kt&&!!kt.host&&!!kt.mode}function Ne(kt){return!!Fe(kt)}function Fe(kt){for(;kt.parentNode;){if(kt===document.body)return null;kt=kt.parentNode}return Je(kt)?kt:null}function ne(){let kt=document.activeElement;for(;kt==null?void 0:kt.shadowRoot;)kt=kt.shadowRoot.activeElement;return kt}function Q(kt=document.getElementsByTagName("head")[0]){let Zt=document.createElement("style");return Zt.type="text/css",Zt.media="screen",kt.appendChild(Zt),Zt}let ie=null;function xe(){return ie||(ie=Q()),ie}function be(kt){var Zt,wn;return((Zt=kt==null?void 0:kt.sheet)===null||Zt===void 0?void 0:Zt.rules)?kt.sheet.rules:((wn=kt==null?void 0:kt.sheet)===null||wn===void 0?void 0:wn.cssRules)?kt.sheet.cssRules:[]}function Ge(kt,Zt,wn=xe()){!wn||!Zt||wn.sheet.insertRule(kt+"{"+Zt+"}",0)}function nt(kt,Zt=xe()){if(!Zt)return;let wn=be(Zt),Pi=[];for(let Fi=0;Fi<wn.length;Fi++)wn[Fi].selectorText.indexOf(kt)!==-1&&Pi.push(Fi);for(let Fi=Pi.length-1;Fi>=0;Fi--)Zt.sheet.deleteRule(Pi[Fi])}function _t(kt){return typeof HTMLElement=="object"?kt instanceof HTMLElement:kt&&typeof kt=="object"&&kt.nodeType===1&&typeof kt.nodeName=="string"}const Ot={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:p.isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:p.isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:p.isWebKit?"webkitAnimationIteration":"animationiteration"},rn={stop:function(kt,Zt){kt.preventDefault?kt.preventDefault():kt.returnValue=!1,Zt&&(kt.stopPropagation?kt.stopPropagation():kt.cancelBubble=!0)}};function gt(kt){let Zt=[];for(let wn=0;kt&&kt.nodeType===kt.ELEMENT_NODE;wn++)Zt[wn]=kt.scrollTop,kt=kt.parentNode;return Zt}function Ue(kt,Zt){for(let wn=0;kt&&kt.nodeType===kt.ELEMENT_NODE;wn++)kt.scrollTop!==Zt[wn]&&(kt.scrollTop=Zt[wn]),kt=kt.parentNode}class Ye extends B.JT{constructor(Zt){super();this._onDidFocus=this._register(new T.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new T.Q5),this.onDidBlur=this._onDidBlur.event;let wn=Ye.hasFocusWithin(Zt),Pi=!1;const Fi=()=>{Pi=!1,wn||(wn=!0,this._onDidFocus.fire())},Ji=()=>{wn&&(Pi=!0,window.setTimeout(()=>{Pi&&(Pi=!1,wn=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Ye.hasFocusWithin(Zt)!==wn&&(wn?Ji():Fi())},this._register(c(Zt,Ot.FOCUS,Fi,!0)),this._register(c(Zt,Ot.BLUR,Ji,!0)),this._register(c(Zt,Ot.FOCUS_IN,()=>this._refreshStateHandler())),this._register(c(Zt,Ot.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(Zt){const wn=Fe(Zt),Pi=wn?wn.activeElement:document.activeElement;return Pe(Pi,Zt)}}function dt(kt){return new Ye(kt)}function Re(kt,...Zt){if(kt.append(...Zt),Zt.length===1&&typeof Zt[0]!="string")return Zt[0]}function Ve(kt,Zt){return kt.insertBefore(Zt,kt.firstChild),Zt}function at(kt,...Zt){kt.innerText="",Re(kt,...Zt)}const pt=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Be;(function(kt){kt.HTML="http://www.w3.org/1999/xhtml",kt.SVG="http://www.w3.org/2000/svg"})(Be||(Be={}));function je(kt,Zt,wn,...Pi){let Fi=pt.exec(Zt);if(!Fi)throw new Error("Bad use of emmet");wn=Object.assign({},wn||{});let Ji=Fi[1]||"div",si;return kt!==Be.HTML?si=document.createElementNS(kt,Ji):si=document.createElement(Ji),Fi[3]&&(si.id=Fi[3]),Fi[4]&&(si.className=Fi[4].replace(/\./g," ").trim()),Object.keys(wn).forEach(zt=>{const Vt=wn[zt];typeof Vt!="undefined"&&(/^on\w+$/.test(zt)?si[zt]=Vt:zt==="selected"?Vt&&si.setAttribute(zt,"true"):si.setAttribute(zt,Vt))}),si.append(...Pi),si}function Et(kt,Zt,...wn){return je(Be.HTML,kt,Zt,...wn)}Et.SVG=function(kt,Zt,...wn){return je(Be.SVG,kt,Zt,...wn)};function Dt(...kt){for(let Zt of kt)Zt.style.display="",Zt.removeAttribute("aria-hidden")}function Xe(...kt){for(let Zt of kt)Zt.style.display="none",Zt.setAttribute("aria-hidden","true")}function ft(kt){return Array.prototype.slice.call(document.getElementsByTagName(kt),0)}function an(kt){const Zt=window.devicePixelRatio*kt;return Math.max(1,Math.floor(Zt))/window.devicePixelRatio}function An(kt){window.open(kt,"_blank","noopener")}function Fn(kt){const Zt=()=>{kt(),wn=pe(Zt)};let wn=pe(Zt);return(0,B.OF)(()=>wn.dispose())}F.WX.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function Ht(kt){return kt?`url('${F.Gi.asBrowserUri(kt).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function Kt(kt){return`'${kt.replace(/'/g,"%27")}'`}class pn extends T.Q5{constructor(){super();this._subscriptions=new B.SL,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(c(window,"keydown",Zt=>{if(Zt.defaultPrevented)return;const wn=new z.y(Zt);if(!(wn.keyCode===6&&Zt.repeat)){if(Zt.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(Zt.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(Zt.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(Zt.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(wn.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=Zt.altKey,this._keyStatus.ctrlKey=Zt.ctrlKey,this._keyStatus.metaKey=Zt.metaKey,this._keyStatus.shiftKey=Zt.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=Zt,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(c(window,"keyup",Zt=>{Zt.defaultPrevented||(!Zt.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!Zt.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!Zt.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!Zt.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=Zt.altKey,this._keyStatus.ctrlKey=Zt.ctrlKey,this._keyStatus.metaKey=Zt.metaKey,this._keyStatus.shiftKey=Zt.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=Zt,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(c(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(c(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(c(document.body,"mousemove",Zt=>{Zt.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(c(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return pn.instance||(pn.instance=new pn),pn.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function Vn(kt,Zt){window.matchMedia(kt).addEventListener("change",Zt)}},4850:function(Tt,me,a){"use strict";a.d(me,{Y:function(){return d},p:function(){return z}});var p=a(4669);class d{constructor(S,j,T){const B=F=>this.emitter.fire(F);this.emitter=new p.Q5({onFirstListenerAdd:()=>S.addEventListener(j,B,T),onLastListenerRemove:()=>S.removeEventListener(j,B,T)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function z(O){return O.preventDefault(),O.stopPropagation(),O}},38626:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return p},X:function(){return d}});class p{constructor(O){this.domNode=O,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontStyle="",this._fontFeatureSettings="",this._textDecoration="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(O){this._maxWidth!==O&&(this._maxWidth=O,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(O){this._width!==O&&(this._width=O,this.domNode.style.width=this._width+"px")}setHeight(O){this._height!==O&&(this._height=O,this.domNode.style.height=this._height+"px")}setTop(O){this._top!==O&&(this._top=O,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(O){this._left!==O&&(this._left=O,this.domNode.style.left=this._left+"px")}setBottom(O){this._bottom!==O&&(this._bottom=O,this.domNode.style.bottom=this._bottom+"px")}setRight(O){this._right!==O&&(this._right=O,this.domNode.style.right=this._right+"px")}setFontFamily(O){this._fontFamily!==O&&(this._fontFamily=O,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(O){this._fontWeight!==O&&(this._fontWeight=O,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(O){this._fontSize!==O&&(this._fontSize=O,this.domNode.style.fontSize=this._fontSize+"px")}setFontStyle(O){this._fontStyle!==O&&(this._fontStyle=O,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(O){this._fontFeatureSettings!==O&&(this._fontFeatureSettings=O,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(O){this._textDecoration!==O&&(this._textDecoration=O,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(O){this._lineHeight!==O&&(this._lineHeight=O,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(O){this._letterSpacing!==O&&(this._letterSpacing=O,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(O){this._className!==O&&(this._className=O,this.domNode.className=this._className)}toggleClassName(O,S){this.domNode.classList.toggle(O,S),this._className=this.domNode.className}setDisplay(O){this._display!==O&&(this._display=O,this.domNode.style.display=this._display)}setPosition(O){this._position!==O&&(this._position=O,this.domNode.style.position=this._position)}setVisibility(O){this._visibility!==O&&(this._visibility=O,this.domNode.style.visibility=this._visibility)}setColor(O){this._color!==O&&(this._color=O,this.domNode.style.color=this._color)}setBackgroundColor(O){this._backgroundColor!==O&&(this._backgroundColor=O,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(O){this._layerHint!==O&&(this._layerHint=O,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(O){this._boxShadow!==O&&(this._boxShadow=O,this.domNode.style.boxShadow=O)}setContain(O){this._contain!==O&&(this._contain=O,this.domNode.style.contain=this._contain)}setAttribute(O,S){this.domNode.setAttribute(O,S)}removeAttribute(O){this.domNode.removeAttribute(O)}appendChild(O){this.domNode.appendChild(O.domNode)}removeChild(O){this.domNode.removeChild(O.domNode)}}function d(z){return new p(z)}},48764:function(Tt,me,a){"use strict";a.d(me,{IY:function(){return d},BO:function(){return z},az:function(){return O}});var p=a(65321);function d(x,v={}){const g=O(v);return g.textContent=x,g}function z(x,v={}){const g=O(v);return j(g,T(x,!!v.renderCodeSegments),v.actionHandler,v.renderCodeSegments),g}function O(x){const v=x.inline?"span":"div",g=document.createElement(v);return x.className&&(g.className=x.className),g}class S{constructor(v){this.source=v,this.index=0}eos(){return this.index>=this.source.length}next(){const v=this.peek();return this.advance(),v}peek(){return this.source[this.index]}advance(){this.index++}}function j(x,v,g,D){let c;if(v.type===2)c=document.createTextNode(v.content||"");else if(v.type===3)c=document.createElement("b");else if(v.type===4)c=document.createElement("i");else if(v.type===7&&D)c=document.createElement("code");else if(v.type===5&&g){const C=document.createElement("a");g.disposables.add(p.mu(C,"click",M=>{g.callback(String(v.index),M)})),c=C}else v.type===8?c=document.createElement("br"):v.type===1&&(c=x);c&&x!==c&&x.appendChild(c),c&&Array.isArray(v.children)&&v.children.forEach(C=>{j(c,C,g,D)})}function T(x,v){const g={type:1,children:[]};let D=0,c=g;const C=[],M=new S(x);for(;!M.eos();){let E=M.next();const _=E==="\\"&&F(M.peek(),v)!==0;if(_&&(E=M.next()),!_&&B(E,v)&&E===M.peek()){M.advance(),c.type===2&&(c=C.pop());const L=F(E,v);if(c.type===L||c.type===5&&L===6)c=C.pop();else{const N={type:L,children:[]};L===5&&(N.index=D,D++),c.children.push(N),C.push(c),c=N}}else if(E===`
`)c.type===2&&(c=C.pop()),c.children.push({type:8});else if(c.type!==2){const L={type:2,content:E};c.children.push(L),C.push(c),c=L}else c.content+=E}return c.type===2&&(c=C.pop()),C.length,g}function B(x,v){return F(x,v)!==0}function F(x,v){switch(x){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return v?7:0;default:return 0}}},57974:function(Tt,me,a){"use strict";a.d(me,{e:function(){return j},Z:function(){return T}});var p=a(65321),d=a(70262),z=a(23938),O=a(9917),S=a(1432);function j(B,F){let x=new z.n(F);return x.preventDefault(),{leftButton:x.leftButton,buttons:x.buttons,posx:x.posx,posy:x.posy}}class T{constructor(){this._hooks=new O.SL,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(F,x){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const v=this._onStopCallback;this._onStopCallback=null,F&&v&&v(x)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(F,x,v,g,D){if(this.isMonitoring())return;this._mouseMoveEventMerger=v,this._mouseMoveCallback=g,this._onStopCallback=D;const c=d.E.getSameOriginWindowChain(),C=S.gn?"pointermove":"mousemove",M="mouseup",E=c.map(L=>L.window.document),_=p.Ay(F);_&&E.unshift(_);for(const L of E)this._hooks.add(p.Y_(L,C,N=>{if(N.buttons!==x){this.stopMonitoring(!0);return}this._mouseMoveCallback(N)},(N,b)=>this._mouseMoveEventMerger(N,b))),this._hooks.add(p.nm(L,M,N=>this.stopMonitoring(!0)));if(d.E.hasDifferentOriginAncestor()){let L=c[c.length-1];this._hooks.add(p.nm(L.window.document,"mouseout",N=>{new z.n(N).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(p.nm(L.window.document,"mouseover",N=>{new z.n(N).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(p.nm(L.window.document.body,"mouseleave",N=>{this.stopMonitoring(!0)}))}}}},70262:function(Tt,me,a){"use strict";a.d(me,{E:function(){return O}});let p=!1,d=null;function z(S){if(!S.parent||S.parent===S)return null;try{let j=S.location,T=S.parent.location;if(j.origin!=="null"&&T.origin!=="null"&&j.origin!==T.origin)return p=!0,null}catch(j){return p=!0,null}return S.parent}class O{static getSameOriginWindowChain(){if(!d){d=[];let j=window,T;do T=z(j),T?d.push({window:j,iframeElement:j.frameElement||null}):d.push({window:j,iframeElement:null}),j=T;while(j)}return d.slice(0)}static hasDifferentOriginAncestor(){return d||this.getSameOriginWindowChain(),p}static getPositionOfChildWindowRelativeToAncestorWindow(j,T){if(!T||j===T)return{top:0,left:0};let B=0,F=0,x=this.getSameOriginWindowChain();for(const v of x){if(B+=v.window.scrollY,F+=v.window.scrollX,v.window===T||!v.iframeElement)break;let g=v.iframeElement.getBoundingClientRect();B+=g.top,F+=g.left}return{top:B,left:F}}}},59069:function(Tt,me,a){"use strict";a.d(me,{y:function(){return x}});var p=a(16268),d=a(22258),z=a(8313),O=a(1432);function S(v){if(v.charCode){let D=String.fromCharCode(v.charCode).toUpperCase();return d.kL.fromString(D)}const g=v.keyCode;if(g===3)return 7;if(p.isFirefox){if(g===59)return 80;if(g===107)return 81;if(g===109)return 83;if(O.dz&&g===224)return 57}else if(p.isWebKit){if(g===91)return 57;if(O.dz&&g===93)return 57;if(!O.dz&&g===92)return 57}return d.H_[g]||0}const j=O.dz?256:2048,T=512,B=1024,F=O.dz?2048:256;class x{constructor(g){this._standardKeyboardEventBrand=!0;let D=g;this.browserEvent=D,this.target=D.target,this.ctrlKey=D.ctrlKey,this.shiftKey=D.shiftKey,this.altKey=D.altKey,this.metaKey=D.metaKey,this.keyCode=S(D),this.code=D.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(g){return this._asKeybinding===g}_computeKeybinding(){let g=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(g=this.keyCode);let D=0;return this.ctrlKey&&(D|=j),this.altKey&&(D|=T),this.shiftKey&&(D|=B),this.metaKey&&(D|=F),D|=g,D}_computeRuntimeKeybinding(){let g=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(g=this.keyCode),new z.QC(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,g)}}},23938:function(Tt,me,a){"use strict";a.d(me,{n:function(){return O},q:function(){return S}});var p=a(16268),d=a(70262),z=a(1432);class O{constructor(T){this.timestamp=Date.now(),this.browserEvent=T,this.leftButton=T.button===0,this.middleButton=T.button===1,this.rightButton=T.button===2,this.buttons=T.buttons,this.target=T.target,this.detail=T.detail||1,T.type==="dblclick"&&(this.detail=2),this.ctrlKey=T.ctrlKey,this.shiftKey=T.shiftKey,this.altKey=T.altKey,this.metaKey=T.metaKey,typeof T.pageX=="number"?(this.posx=T.pageX,this.posy=T.pageY):(this.posx=T.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=T.clientY+document.body.scrollTop+document.documentElement.scrollTop);let B=d.E.getPositionOfChildWindowRelativeToAncestorWindow(self,T.view);this.posx-=B.left,this.posy-=B.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class S{constructor(T,B=0,F=0){if(this.browserEvent=T||null,this.target=T?T.target||T.targetNode||T.srcElement:null,this.deltaY=F,this.deltaX=B,T){let x=T,v=T;if(typeof x.wheelDeltaY!="undefined")this.deltaY=x.wheelDeltaY/120;else if(typeof v.VERTICAL_AXIS!="undefined"&&v.axis===v.VERTICAL_AXIS)this.deltaY=-v.detail/3;else if(T.type==="wheel"){const g=T;g.deltaMode===g.DOM_DELTA_LINE?p.isFirefox&&!z.dz?this.deltaY=-T.deltaY/3:this.deltaY=-T.deltaY:this.deltaY=-T.deltaY/40}if(typeof x.wheelDeltaX!="undefined")p.isSafari&&z.ED?this.deltaX=-(x.wheelDeltaX/120):this.deltaX=x.wheelDeltaX/120;else if(typeof v.HORIZONTAL_AXIS!="undefined"&&v.axis===v.HORIZONTAL_AXIS)this.deltaX=-T.detail/3;else if(T.type==="wheel"){const g=T;g.deltaMode===g.DOM_DELTA_LINE?p.isFirefox&&!z.dz?this.deltaX=-T.deltaX/3:this.deltaX=-T.deltaX:this.deltaX=-T.deltaX/40}this.deltaY===0&&this.deltaX===0&&T.wheelDelta&&(this.deltaY=T.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}},10553:function(Tt,me,a){"use strict";a.d(me,{t:function(){return j},o:function(){return T}});var p=a(65321),d=a(9488),z=a(49898),O=a(9917),S=function(B,F,x,v){var g=arguments.length,D=g<3?F:v===null?v=Object.getOwnPropertyDescriptor(F,x):v,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(B,F,x,v);else for(var C=B.length-1;C>=0;C--)(c=B[C])&&(D=(g<3?c(D):g>3?c(F,x,D):c(F,x))||D);return g>3&&D&&Object.defineProperty(F,x,D),D},j;(function(B){B.Tap="-monaco-gesturetap",B.Change="-monaco-gesturechange",B.Start="-monaco-gesturestart",B.End="-monaco-gesturesend",B.Contextmenu="-monaco-gesturecontextmenu"})(j||(j={}));class T extends O.JT{constructor(){super();this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(p.nm(document,"touchstart",F=>this.onTouchStart(F),{passive:!1})),this._register(p.nm(document,"touchend",F=>this.onTouchEnd(F))),this._register(p.nm(document,"touchmove",F=>this.onTouchMove(F),{passive:!1}))}static addTarget(F){return T.isTouchDevice()?(T.INSTANCE||(T.INSTANCE=new T),T.INSTANCE.targets.push(F),{dispose:()=>{T.INSTANCE.targets=T.INSTANCE.targets.filter(x=>x!==F)}}):O.JT.None}static ignoreTarget(F){return T.isTouchDevice()?(T.INSTANCE||(T.INSTANCE=new T),T.INSTANCE.ignoreTargets.push(F),{dispose:()=>{T.INSTANCE.ignoreTargets=T.INSTANCE.ignoreTargets.filter(x=>x!==F)}}):O.JT.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(F){let x=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let v=0,g=F.targetTouches.length;v<g;v++){let D=F.targetTouches.item(v);this.activeTouches[D.identifier]={id:D.identifier,initialTarget:D.target,initialTimeStamp:x,initialPageX:D.pageX,initialPageY:D.pageY,rollingTimestamps:[x],rollingPageX:[D.pageX],rollingPageY:[D.pageY]};let c=this.newGestureEvent(j.Start,D.target);c.pageX=D.pageX,c.pageY=D.pageY,this.dispatchEvent(c)}this.dispatched&&(F.preventDefault(),F.stopPropagation(),this.dispatched=!1)}onTouchEnd(F){let x=Date.now(),v=Object.keys(this.activeTouches).length;for(let g=0,D=F.changedTouches.length;g<D;g++){let c=F.changedTouches.item(g);if(!this.activeTouches.hasOwnProperty(String(c.identifier))){console.warn("move of an UNKNOWN touch",c);continue}let C=this.activeTouches[c.identifier],M=Date.now()-C.initialTimeStamp;if(M<T.HOLD_DELAY&&Math.abs(C.initialPageX-d.Gb(C.rollingPageX))<30&&Math.abs(C.initialPageY-d.Gb(C.rollingPageY))<30){let E=this.newGestureEvent(j.Tap,C.initialTarget);E.pageX=d.Gb(C.rollingPageX),E.pageY=d.Gb(C.rollingPageY),this.dispatchEvent(E)}else if(M>=T.HOLD_DELAY&&Math.abs(C.initialPageX-d.Gb(C.rollingPageX))<30&&Math.abs(C.initialPageY-d.Gb(C.rollingPageY))<30){let E=this.newGestureEvent(j.Contextmenu,C.initialTarget);E.pageX=d.Gb(C.rollingPageX),E.pageY=d.Gb(C.rollingPageY),this.dispatchEvent(E)}else if(v===1){let E=d.Gb(C.rollingPageX),_=d.Gb(C.rollingPageY),L=d.Gb(C.rollingTimestamps)-C.rollingTimestamps[0],N=E-C.rollingPageX[0],b=_-C.rollingPageY[0];const I=this.targets.filter(k=>C.initialTarget instanceof Node&&k.contains(C.initialTarget));this.inertia(I,x,Math.abs(N)/L,N>0?1:-1,E,Math.abs(b)/L,b>0?1:-1,_)}this.dispatchEvent(this.newGestureEvent(j.End,C.initialTarget)),delete this.activeTouches[c.identifier]}this.dispatched&&(F.preventDefault(),F.stopPropagation(),this.dispatched=!1)}newGestureEvent(F,x){let v=document.createEvent("CustomEvent");return v.initEvent(F,!1,!0),v.initialTarget=x,v.tapCount=0,v}dispatchEvent(F){if(F.type===j.Tap){const x=new Date().getTime();let v=0;x-this._lastSetTapCountTime>T.CLEAR_TAP_COUNT_TIME?v=1:v=2,this._lastSetTapCountTime=x,F.tapCount=v}else(F.type===j.Change||F.type===j.Contextmenu)&&(this._lastSetTapCountTime=0);for(let x=0;x<this.ignoreTargets.length;x++)if(F.initialTarget instanceof Node&&this.ignoreTargets[x].contains(F.initialTarget))return;this.targets.forEach(x=>{F.initialTarget instanceof Node&&x.contains(F.initialTarget)&&(x.dispatchEvent(F),this.dispatched=!0)})}inertia(F,x,v,g,D,c,C,M){this.handle=p.jL(()=>{let E=Date.now(),_=E-x,L=0,N=0,b=!0;v+=T.SCROLL_FRICTION*_,c+=T.SCROLL_FRICTION*_,v>0&&(b=!1,L=g*v*_),c>0&&(b=!1,N=C*c*_);let I=this.newGestureEvent(j.Change);I.translationX=L,I.translationY=N,F.forEach(k=>k.dispatchEvent(I)),b||this.inertia(F,E,v,g,D+L,c,C,M+N)})}onTouchMove(F){let x=Date.now();for(let v=0,g=F.changedTouches.length;v<g;v++){let D=F.changedTouches.item(v);if(!this.activeTouches.hasOwnProperty(String(D.identifier))){console.warn("end of an UNKNOWN touch",D);continue}let c=this.activeTouches[D.identifier],C=this.newGestureEvent(j.Change,c.initialTarget);C.translationX=D.pageX-d.Gb(c.rollingPageX),C.translationY=D.pageY-d.Gb(c.rollingPageY),C.pageX=D.pageX,C.pageY=D.pageY,this.dispatchEvent(C),c.rollingPageX.length>3&&(c.rollingPageX.shift(),c.rollingPageY.shift(),c.rollingTimestamps.shift()),c.rollingPageX.push(D.pageX),c.rollingPageY.push(D.pageY),c.rollingTimestamps.push(x)}this.dispatched&&(F.preventDefault(),F.stopPropagation(),this.dispatched=!1)}}T.SCROLL_FRICTION=-.005,T.HOLD_DELAY=700,T.CLEAR_TAP_COUNT_TIME=400,S([z.H],T,"isTouchDevice",null)},76033:function(Tt,me,a){"use strict";a.d(me,{Y:function(){return x},g:function(){return v}});var p=a(16268),d=a(23547),z=a(65321),O=a(10553),S=a(74741),j=a(9917),T=a(1432),B=a(98401),F=a(63580);class x extends j.JT{constructor(D,c,C={}){super();this.options=C,this._context=D||this,this._action=c,c instanceof S.aU&&this._register(c.onDidChange(M=>{!this.element||this.handleActionChangeEvent(M)}))}handleActionChangeEvent(D){D.enabled!==void 0&&this.updateEnabled(),D.checked!==void 0&&this.updateChecked(),D.class!==void 0&&this.updateClass(),D.label!==void 0&&(this.updateLabel(),this.updateTooltip()),D.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new S.Wi)),this._actionRunner}set actionRunner(D){this._actionRunner=D}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(D){this._context=D}render(D){const c=this.element=D;this._register(O.o.addTarget(D));const C=this.options&&this.options.draggable;C&&(D.draggable=!0,p.isFirefox&&this._register((0,z.nm)(D,z.tw.DRAG_START,M=>{var E;return(E=M.dataTransfer)===null||E===void 0?void 0:E.setData(d.go.TEXT,this._action.label)}))),this._register((0,z.nm)(c,O.t.Tap,M=>this.onClick(M,!0))),this._register((0,z.nm)(c,z.tw.MOUSE_DOWN,M=>{C||z.zB.stop(M,!0),this._action.enabled&&M.button===0&&c.classList.add("active")})),T.dz&&this._register((0,z.nm)(c,z.tw.CONTEXT_MENU,M=>{M.button===0&&M.ctrlKey===!0&&this.onClick(M)})),this._register((0,z.nm)(c,z.tw.CLICK,M=>{z.zB.stop(M,!0),this.options&&this.options.isMenu||this.onClick(M)})),this._register((0,z.nm)(c,z.tw.DBLCLICK,M=>{z.zB.stop(M,!0)})),[z.tw.MOUSE_UP,z.tw.MOUSE_OUT].forEach(M=>{this._register((0,z.nm)(c,M,E=>{z.zB.stop(E),c.classList.remove("active")}))})}onClick(D,c=!1){var C;z.zB.stop(D,!0);const M=B.Jp(this._context)?((C=this.options)===null||C===void 0?void 0:C.useEventAsContext)?D:{preserveFocus:c}:this._context;this.actionRunner.run(this._action,M)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(D){this.element&&(this.element.tabIndex=D?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class v extends x{constructor(D,c,C={}){super(D,c,C);this.options=C,this.options.icon=C.icon!==void 0?C.icon:!1,this.options.label=C.label!==void 0?C.label:!0,this.cssClass=""}render(D){super.render(D),this.element&&(this.label=(0,z.R3)(this.element,(0,z.$)("a.action-label"))),this.label&&(this._action.id===S.Z0.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&((0,z.R3)(this.element,(0,z.$)("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(D){this.label&&(this.label.tabIndex=D?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let D=null;this.getAction().tooltip?D=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(D=this.getAction().label,this.options.keybinding&&(D=F.N({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",D,this.options.keybinding))),D&&this.label&&(this.label.title=D)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}},90317:function(Tt,me,a){"use strict";a.d(me,{o:function(){return F}});var p=a(65321),d=a(59069),z=a(76033),O=a(74741),S=a(4669),j=a(9917),T=a(98401),B=function(x,v,g,D){function c(C){return C instanceof g?C:new g(function(M){M(C)})}return new(g||(g=Promise))(function(C,M){function E(N){try{L(D.next(N))}catch(b){M(b)}}function _(N){try{L(D.throw(N))}catch(b){M(b)}}function L(N){N.done?C(N.value):c(N.value).then(E,_)}L((D=D.apply(x,v||[])).next())})};class F extends j.JT{constructor(v,g={}){var D,c,C,M,E,_;super();this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new S.Q5),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new S.Q5({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new S.Q5),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new S.Q5),this.onBeforeRun=this._onBeforeRun.event,this.options=g,this._context=(D=g.context)!==null&&D!==void 0?D:null,this._orientation=(c=this.options.orientation)!==null&&c!==void 0?c:0,this._triggerKeys={keyDown:(M=(C=this.options.triggerKeys)===null||C===void 0?void 0:C.keyDown)!==null&&M!==void 0?M:!1,keys:(_=(E=this.options.triggerKeys)===null||E===void 0?void 0:E.keys)!==null&&_!==void 0?_:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new O.Wi,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(b=>this._onDidRun.fire(b))),this._register(this._actionRunner.onBeforeRun(b=>this._onBeforeRun.fire(b))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",g.animated!==!1&&this.domNode.classList.add("animated");let L,N;switch(this._orientation){case 0:L=[15],N=[17];break;case 1:L=[16],N=[18],this.domNode.className+=" vertical";break}this._register(p.nm(this.domNode,p.tw.KEY_DOWN,b=>{const I=new d.y(b);let k=!0;const W=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;L&&(I.equals(L[0])||I.equals(L[1]))?k=this.focusPrevious():N&&(I.equals(N[0])||I.equals(N[1]))?k=this.focusNext():I.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():I.equals(14)?k=this.focusFirst():I.equals(13)?k=this.focusLast():I.equals(2)&&W instanceof z.Y&&W.trapsArrowNavigation?k=this.focusNext():this.isTriggerKeyEvent(I)?this._triggerKeys.keyDown?this.doTrigger(I):this.triggerKeyDown=!0:k=!1,k&&(I.preventDefault(),I.stopPropagation())})),this._register(p.nm(this.domNode,p.tw.KEY_UP,b=>{const I=new d.y(b);this.isTriggerKeyEvent(I)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(I)),I.preventDefault(),I.stopPropagation()):(I.equals(2)||I.equals(1024|2))&&this.updateFocusedItem()})),this.focusTracker=this._register(p.go(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(p.vY()===this.domNode||!p.jg(p.vY(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),v.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role","toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(v){if(this.focusable=v,this.focusable){const g=this.viewItems.find(D=>D instanceof z.Y&&D.isEnabled());g instanceof z.Y&&g.setFocusable(!0)}else this.viewItems.forEach(g=>{g instanceof z.Y&&g.setFocusable(!1)})}isTriggerKeyEvent(v){let g=!1;return this._triggerKeys.keys.forEach(D=>{g=g||v.equals(D)}),g}updateFocusedItem(){for(let v=0;v<this.actionsList.children.length;v++){const g=this.actionsList.children[v];if(p.jg(p.vY(),g)){this.focusedItem=v;break}}}get context(){return this._context}set context(v){this._context=v,this.viewItems.forEach(g=>g.setActionContext(v))}get actionRunner(){return this._actionRunner}set actionRunner(v){v&&(this._actionRunner=v,this.viewItems.forEach(g=>g.actionRunner=v))}getContainer(){return this.domNode}push(v,g={}){const D=Array.isArray(v)?v:[v];let c=T.hj(g.index)?g.index:null;D.forEach(C=>{const M=document.createElement("li");M.className="action-item",M.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(p.nm(M,p.tw.CONTEXT_MENU,_=>{p.zB.stop(_,!0)}));let E;this.options.actionViewItemProvider&&(E=this.options.actionViewItemProvider(C)),E||(E=new z.g(this.context,C,g)),E.actionRunner=this._actionRunner,E.setActionContext(this.context),E.render(M),this.focusable&&E instanceof z.Y&&this.viewItems.length===0&&E.setFocusable(!0),c===null||c<0||c>=this.actionsList.children.length?(this.actionsList.appendChild(M),this.viewItems.push(E),this._actionIds.push(C.id)):(this.actionsList.insertBefore(M,this.actionsList.children[c]),this.viewItems.splice(c,0,E),this._actionIds.splice(c,0,C.id),c++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){(0,j.B9)(this.viewItems),this.viewItems=[],this._actionIds=[],p.PO(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}focus(v){let g=!1,D;if(v===void 0?g=!0:typeof v=="number"?D=v:typeof v=="boolean"&&(g=v),g&&typeof this.focusedItem=="undefined"){const c=this.viewItems.findIndex(C=>C.isEnabled());this.focusedItem=c===-1?void 0:c,this.updateFocus(void 0,void 0,!0)}else D!==void 0&&(this.focusedItem=D),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(v){if(typeof this.focusedItem=="undefined")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const g=this.focusedItem;let D;do{if(!v&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=g,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,D=this.viewItems[this.focusedItem]}while(this.focusedItem!==g&&this.options.focusOnlyEnabledItems&&!D.isEnabled());return this.updateFocus(),!0}focusPrevious(v){if(typeof this.focusedItem=="undefined")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const g=this.focusedItem;let D;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!v&&this.options.preventLoopNavigation)return this.focusedItem=g,!1;this.focusedItem=this.viewItems.length-1}D=this.viewItems[this.focusedItem]}while(this.focusedItem!==g&&this.options.focusOnlyEnabledItems&&!D.isEnabled());return this.updateFocus(!0),!0}updateFocus(v,g,D=!1){var c;typeof this.focusedItem=="undefined"&&this.actionsList.focus({preventScroll:g}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((c=this.viewItems[this.previouslyFocusedItem])===null||c===void 0||c.blur());const C=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(C){let M=!0;T.mf(C.focus)||(M=!1),this.options.focusOnlyEnabledItems&&T.mf(C.isEnabled)&&!C.isEnabled()&&(M=!1),M?(D||this.previouslyFocusedItem!==this.focusedItem)&&(C.focus(v),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:g}),this.previouslyFocusedItem=void 0)}}doTrigger(v){if(typeof this.focusedItem=="undefined")return;const g=this.viewItems[this.focusedItem];if(g instanceof z.Y){const D=g._context===null||g._context===void 0?v:g._context;this.run(g._action,D)}}run(v,g){return B(this,void 0,void 0,function*(){yield this._actionRunner.run(v,g)})}dispose(){(0,j.B9)(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}},85152:function(Tt,me,a){"use strict";a.d(me,{wW:function(){return F},Z9:function(){return x},i7:function(){return v}});var p=a(65321),d=a(1432);const z=2e4;let O,S,j,T,B;function F(D){O=document.createElement("div"),O.className="monaco-aria-container";const c=()=>{const M=document.createElement("div");return M.className="monaco-alert",M.setAttribute("role","alert"),M.setAttribute("aria-atomic","true"),O.appendChild(M),M};S=c(),j=c();const C=()=>{const M=document.createElement("div");return M.className="monaco-status",M.setAttribute("role","complementary"),M.setAttribute("aria-live","polite"),M.setAttribute("aria-atomic","true"),O.appendChild(M),M};T=C(),B=C(),D.appendChild(O)}function x(D){!O||(S.textContent!==D?(p.PO(j),g(S,D)):(p.PO(S),g(j,D)))}function v(D){!O||(d.dz?x(D):T.textContent!==D?(p.PO(B),g(T,D)):(p.PO(T),g(B,D)))}function g(D,c){p.PO(D),c.length>z&&(c=c.substr(0,z)),D.textContent=c,D.style.visibility="hidden",D.style.visibility="visible"}},16229:function(Tt,me,a){"use strict";a.d(me,{X:function(){return j}});var p=a(93794),d=a(73046),z=a(41264),O=a(4669);const S={inputActiveOptionBorder:z.Il.fromHex("#007ACC00"),inputActiveOptionForeground:z.Il.fromHex("#FFFFFF"),inputActiveOptionBackground:z.Il.fromHex("#0E639C50")};class j extends p.${constructor(B){super();this._onChange=this._register(new O.Q5),this.onChange=this._onChange.event,this._onKeyDown=this._register(new O.Q5),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},S),B),this._checked=this._opts.isChecked;const F=["monaco-custom-checkbox"];this._opts.icon&&F.push(...d.dT.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&F.push(...this._opts.actionClassName.split(" ")),this._checked&&F.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...F),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,x=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),x.preventDefault())}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,x=>{if(x.keyCode===10||x.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),x.preventDefault();return}this._onKeyDown.fire(x)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(B){this._checked=B,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(B){B.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=B.inputActiveOptionBorder),B.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=B.inputActiveOptionForeground),B.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=B.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}},28609:function(Tt,me,a){"use strict";a.d(me,{a:function(){return d}});var p=a(73046);function d(z){let O=z.definition;for(;O instanceof p.lA;)O=O.definition;return`.codicon-${z.id}:before { content: '${O.fontCharacter}'; }`}},67488:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return j}});var p=a(65321),d=a(41264),z=a(36248),O=a(25924);const S={badgeBackground:d.Il.fromHex("#4D4D4D"),badgeForeground:d.Il.fromHex("#FFFFFF")};class j{constructor(B,F){this.count=0,this.options=F||Object.create(null),(0,z.jB)(this.options,S,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=(0,p.R3)(B,(0,p.$)(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(B){this.count=B,this.render()}setTitleFormat(B){this.titleFormat=B,this.render()}render(){this.element.textContent=(0,O.WU)(this.countFormat,this.count),this.element.title=(0,O.WU)(this.titleFormat,this.count),this.applyStyles()}style(B){this.badgeBackground=B.badgeBackground,this.badgeForeground=B.badgeForeground,this.badgeBorder=B.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const B=this.badgeBackground?this.badgeBackground.toString():"",F=this.badgeForeground?this.badgeForeground.toString():"",x=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=B,this.element.style.color=F,this.element.style.borderWidth=x?"1px":"",this.element.style.borderStyle=x?"solid":"",this.element.style.borderColor=x}}}},3331:function(Tt,me,a){"use strict";a.d(me,{vk:function(){return T},n3:function(){return B},am:function(){return F}});var p=a(16229),d=a(73046),z=a(63580);const O=z.N("caseDescription","Match Case"),S=z.N("wordsDescription","Match Whole Word"),j=z.N("regexDescription","Use Regular Expression");class T extends p.X{constructor(v){super({icon:d.lA.caseSensitive,title:O+v.appendTitle,isChecked:v.isChecked,inputActiveOptionBorder:v.inputActiveOptionBorder,inputActiveOptionForeground:v.inputActiveOptionForeground,inputActiveOptionBackground:v.inputActiveOptionBackground})}}class B extends p.X{constructor(v){super({icon:d.lA.wholeWord,title:S+v.appendTitle,isChecked:v.isChecked,inputActiveOptionBorder:v.inputActiveOptionBorder,inputActiveOptionForeground:v.inputActiveOptionForeground,inputActiveOptionBackground:v.inputActiveOptionBackground})}}class F extends p.X{constructor(v){super({icon:d.lA.regex,title:j+v.appendTitle,isChecked:v.isChecked,inputActiveOptionBorder:v.inputActiveOptionBorder,inputActiveOptionForeground:v.inputActiveOptionForeground,inputActiveOptionBackground:v.inputActiveOptionBackground})}}},34650:function(Tt,me,a){"use strict";a.d(me,{q:function(){return O}});var p=a(65321),d=a(56811),z=a(36248);class O{constructor(j,T){var B;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(B=T==null?void 0:T.supportIcons)!==null&&B!==void 0?B:!1,this.domNode=p.R3(j,p.$("span.monaco-highlighted-label"))}get element(){return this.domNode}set(j,T=[],B="",F){j||(j=""),F&&(j=O.escapeNewLines(j,T)),!(this.didEverRender&&this.text===j&&this.title===B&&z.fS(this.highlights,T))&&(this.text=j,this.title=B,this.highlights=T,this.render())}render(){const j=[];let T=0;for(const B of this.highlights){if(B.end===B.start)continue;if(T<B.start){const v=this.text.substring(T,B.start);j.push(p.$("span",void 0,...this.supportIcons?(0,d.T)(v):[v])),T=B.end}const F=this.text.substring(B.start,B.end),x=p.$("span.highlight",void 0,...this.supportIcons?(0,d.T)(F):[F]);B.extraClasses&&x.classList.add(...B.extraClasses),j.push(x),T=B.end}if(T<this.text.length){const B=this.text.substring(T);j.push(p.$("span",void 0,...this.supportIcons?(0,d.T)(B):[B]))}p.mc(this.domNode,...j),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(j,T){let B=0,F=0;return j.replace(/\r\n|\r|\n/g,(x,v)=>{F=x===`\r
`?-1:0,v+=B;for(const g of T)g.end<=v||(g.start>=v&&(g.start+=F),g.end>=v&&(g.end+=F));return B+=F,"\u23CE"})}}},48801:function(Tt,me,a){"use strict";a.d(me,{g:function(){return E}});var p=a(65321),d=a(34650),z=a(15393),O=a(71050),S=a(59365),j=a(21212),T=a(9917),B=a(98401),F=a(63580),x=function(b,I,k,W){function q(re){return re instanceof k?re:new k(function(de){de(re)})}return new(k||(k=Promise))(function(re,de){function pe(te){try{ue(W.next(te))}catch(K){de(K)}}function ae(te){try{ue(W.throw(te))}catch(K){de(K)}}function ue(te){te.done?re(te.value):q(te.value).then(pe,ae)}ue((W=W.apply(b,I||[])).next())})};function v(b,I){(0,B.HD)(I)?b.title=(0,j.x$)(I):(I==null?void 0:I.markdownNotSupportedFallback)?b.title=I.markdownNotSupportedFallback:b.removeAttribute("title")}class g{constructor(I,k,W){this.hoverDelegate=I,this.target=k,this.fadeInAnimation=W}update(I,k){var W;return x(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let q;if(I===void 0||(0,B.HD)(I)||I instanceof HTMLElement)q=I;else if(!(0,B.mf)(I.markdown))q=(W=I.markdown)!==null&&W!==void 0?W:I.markdownNotSupportedFallback;else{this._hoverWidget||this.show((0,F.N)("iconLabel.loading","Loading..."),k),this._cancellationTokenSource=new O.A;const re=this._cancellationTokenSource.token;if(q=yield I.markdown(re),q===void 0&&(q=I.markdownNotSupportedFallback),this.isDisposed||re.isCancellationRequested)return}this.show(q,k)})}show(I,k){const W=this._hoverWidget;if(this.hasContent(I)){const q={content:I,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!W};this._hoverWidget=this.hoverDelegate.showHover(q,k)}W==null||W.dispose()}hasContent(I){return I?(0,S.Fr)(I)?!!I.value:!0:!1}get isDisposed(){var I;return(I=this._hoverWidget)===null||I===void 0?void 0:I.isDisposed}dispose(){var I,k;(I=this._hoverWidget)===null||I===void 0||I.dispose(),(k=this._cancellationTokenSource)===null||k===void 0||k.dispose(!0),this._cancellationTokenSource=void 0}}function D(b,I,k){let W,q;const re=(te,K)=>{var U;te&&(q==null||q.dispose(),q=void 0),K&&(W==null||W.dispose(),W=void 0),(U=b.onDidHideHover)===null||U===void 0||U.call(b)},de=(te,K,U)=>new z._F(()=>x(this,void 0,void 0,function*(){(!q||q.isDisposed)&&(q=new g(b,U||I,te>0),yield q.update(k,K))}),te),pe=()=>{if(W)return;const te=new T.SL,K=X=>re(!1,X.fromElement===I);te.add(p.nm(I,p.tw.MOUSE_LEAVE,K,!0));const U=()=>re(!0,!0);te.add(p.nm(I,p.tw.MOUSE_DOWN,U,!0));const ee={targetElements:[I],dispose:()=>{}};if(b.placement===void 0||b.placement==="mouse"){const X=le=>ee.x=le.x+10;te.add(p.nm(I,p.tw.MOUSE_MOVE,X,!0))}te.add(de(b.delay,!1,ee)),W=te},ae=p.nm(I,p.tw.MOUSE_OVER,pe,!0);return{show:te=>{re(!1,!0),de(0,te)},hide:()=>{re(!0,!0)},update:te=>x(this,void 0,void 0,function*(){k=te,yield q==null?void 0:q.update(k)}),dispose:()=>{ae.dispose(),re(!0,!0)}}}var c=a(36248),C=a(61134);class M{constructor(I){this._element=I}get element(){return this._element}set textContent(I){this.disposed||I===this._textContent||(this._textContent=I,this._element.textContent=I)}set className(I){this.disposed||I===this._className||(this._className=I,this._element.className=I)}set empty(I){this.disposed||I===this._empty||(this._empty=I,this._element.style.marginLeft=I?"0":"")}dispose(){this.disposed=!0}}class E extends T.JT{constructor(I,k){super();this.customHovers=new Map,this.domNode=this._register(new M(p.R3(I,p.$(".monaco-icon-label")))),this.labelContainer=p.R3(this.domNode.element,p.$(".monaco-icon-label-container"));const W=p.R3(this.labelContainer,p.$("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new M(p.R3(this.labelContainer,p.$("span.monaco-icon-description-container")))),(k==null?void 0:k.supportHighlights)||(k==null?void 0:k.supportIcons)?this.nameNode=new N(W,!!k.supportIcons):this.nameNode=new _(W),(k==null?void 0:k.supportDescriptionHighlights)?this.descriptionNodeFactory=()=>new d.q(p.R3(this.descriptionContainer.element,p.$("span.label-description")),{supportIcons:!!k.supportIcons}):this.descriptionNodeFactory=()=>this._register(new M(p.R3(this.descriptionContainer.element,p.$("span.label-description")))),this.hoverDelegate=k==null?void 0:k.hoverDelegate}get element(){return this.domNode.element}setLabel(I,k,W){const q=["monaco-icon-label"];W&&(W.extraClasses&&q.push(...W.extraClasses),W.italic&&q.push("italic"),W.strikethrough&&q.push("strikethrough")),this.domNode.className=q.join(" "),this.setupHover((W==null?void 0:W.descriptionTitle)?this.labelContainer:this.element,W==null?void 0:W.title),this.nameNode.setLabel(I,W),(k||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof d.q?(this.descriptionNode.set(k||"",W?W.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,W==null?void 0:W.descriptionTitle)):(this.descriptionNode.textContent=k||"",this.setupHover(this.descriptionNode.element,(W==null?void 0:W.descriptionTitle)||""),this.descriptionNode.empty=!k))}setupHover(I,k){const W=this.customHovers.get(I);if(W&&(W.dispose(),this.customHovers.delete(I)),!k){I.removeAttribute("title");return}if(!this.hoverDelegate)v(I,k);else{const q=D(this.hoverDelegate,I,k);q&&this.customHovers.set(I,q)}}dispose(){super.dispose();for(const I of this.customHovers.values())I.dispose();this.customHovers.clear()}}class _{constructor(I){this.container=I,this.label=void 0,this.singleLabel=void 0}setLabel(I,k){if(!(this.label===I&&(0,c.fS)(this.options,k)))if(this.label=I,this.options=k,typeof I=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=p.R3(this.container,p.$("a.label-name",{id:k==null?void 0:k.domId}))),this.singleLabel.textContent=I;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let W=0;W<I.length;W++){const q=I[W],re=(k==null?void 0:k.domId)&&`${k==null?void 0:k.domId}_${W}`;p.R3(this.container,p.$("a.label-name",{id:re,"data-icon-label-count":I.length,"data-icon-label-index":W,role:"treeitem"},q)),W<I.length-1&&p.R3(this.container,p.$("span.label-separator",void 0,(k==null?void 0:k.separator)||"/"))}}}}function L(b,I,k){if(!k)return;let W=0;return b.map(q=>{const re={start:W,end:W+q.length},de=k.map(pe=>C.e.intersect(re,pe)).filter(pe=>!C.e.isEmpty(pe)).map(({start:pe,end:ae})=>({start:pe-W,end:ae-W}));return W=re.end+I.length,de})}class N{constructor(I,k){this.container=I,this.supportIcons=k,this.label=void 0,this.singleLabel=void 0}setLabel(I,k){if(!(this.label===I&&(0,c.fS)(this.options,k)))if(this.label=I,this.options=k,typeof I=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new d.q(p.R3(this.container,p.$("a.label-name",{id:k==null?void 0:k.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(I,k==null?void 0:k.matches,void 0,k==null?void 0:k.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const W=(k==null?void 0:k.separator)||"/",q=L(I,W,k==null?void 0:k.matches);for(let re=0;re<I.length;re++){const de=I[re],pe=q?q[re]:void 0,ae=(k==null?void 0:k.domId)&&`${k==null?void 0:k.domId}_${re}`,ue=p.$("a.label-name",{id:ae,"data-icon-label-count":I.length,"data-icon-label-index":re,role:"treeitem"});new d.q(p.R3(this.container,ue),{supportIcons:this.supportIcons}).set(de,pe,void 0,k==null?void 0:k.labelEscapeNewLines),re<I.length-1&&p.R3(ue,p.$("span.label-separator",void 0,W))}}}}},56811:function(Tt,me,a){"use strict";a.d(me,{T:function(){return O}});var p=a(65321),d=a(73046);const z=new RegExp(`(\\\\)?\\$\\((${d.dT.iconNameExpression}(?:${d.dT.iconModifierExpression})?)\\)`,"g");function O(j){const T=new Array;let B,F=0,x=0;for(;(B=z.exec(j))!==null;){x=B.index||0,T.push(j.substring(F,x)),F=(B.index||0)+B[0].length;const[,v,g]=B;T.push(v?`$(${g})`:S({id:g}))}return F<j.length&&T.push(j.substring(F)),T}function S(j){const T=p.$("span");return T.classList.add(...d.dT.asClassNameArray(j)),T}},77927:function(Tt,me,a){"use strict";a.d(me,{p:function(){return E},W:function(){return M}});var p=a(65321),d=a(4850),z=a(48764),O=a(90317),S=a(85152),j=a(9802),T=a(93794),B=a(41264),F=a(4669);class x{constructor(L,N=0,b=L.length,I=N-1){this.items=L,this.start=N,this.end=b,this.index=I}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class v{constructor(L=[],N=10){this._initialize(L),this._limit=N,this._onChange()}getHistory(){return this._elements}add(L){this._history.delete(L),this._history.add(L),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(L){return this._history.has(L)}_onChange(){this._reduceToLimit();const L=this._elements;this._navigator=new x(L,0,L.length,L.length)}_reduceToLimit(){const L=this._elements;L.length>this._limit&&this._initialize(L.slice(L.length-this._limit))}_currentPosition(){const L=this._navigator.current();return L?this._elements.indexOf(L):-1}_initialize(L){this._history=new Set;for(const N of L)this._history.add(N)}get _elements(){const L=[];return this._history.forEach(N=>L.push(N)),L}}var g=a(36248),D=a(63580);const c=p.$,C={inputBackground:B.Il.fromHex("#3C3C3C"),inputForeground:B.Il.fromHex("#CCCCCC"),inputValidationInfoBorder:B.Il.fromHex("#55AAFF"),inputValidationInfoBackground:B.Il.fromHex("#063B49"),inputValidationWarningBorder:B.Il.fromHex("#B89500"),inputValidationWarningBackground:B.Il.fromHex("#352A05"),inputValidationErrorBorder:B.Il.fromHex("#BE1100"),inputValidationErrorBackground:B.Il.fromHex("#5A1D1D")};class M extends T.${constructor(L,N,b){var I;super();this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new F.Q5),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new F.Q5),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=N,this.options=b||Object.create(null),(0,g.jB)(this.options,C,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(I=this.options.tooltip)!==null&&I!==void 0?I:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=p.R3(L,c(".monaco-inputbox.idle"));let k=this.options.flexibleHeight?"textarea":"input",W=p.R3(this.element,c(".ibwrapper"));if(this.input=p.R3(W,c(k+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=p.R3(W,c("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new j.NB(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),p.R3(L,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(de=>this.input.scrollTop=de.scrollTop));const q=this._register(new d.Y(document,"selectionchange")),re=F.ju.filter(q.event,()=>{const de=document.getSelection();return(de==null?void 0:de.anchorNode)===W});this._register(re(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new O.o(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(L){this.placeholder=L,this.input.setAttribute("placeholder",L)}setTooltip(L){this.tooltip=L,this.input.title=L}setAriaLabel(L){this.ariaLabel=L,L?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(L){this.input.value!==L&&(this.input.value=L,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:p.wn(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(L=null){this.input.select(),L&&(this.input.setSelectionRange(L.start,L.end),L.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return p.w(this.input)}set width(L){if(this.options.flexibleHeight&&this.options.flexibleWidth){let N=0;if(this.mirror){const b=parseFloat(this.mirror.style.paddingLeft||"")||0,I=parseFloat(this.mirror.style.paddingRight||"")||0;N=b+I}this.input.style.width=L-N+"px"}else this.input.style.width=L+"px";this.mirror&&(this.mirror.style.width=L+"px")}set paddingRight(L){this.input.style.width=`calc(100% - ${L}px)`,this.mirror&&(this.mirror.style.paddingRight=L+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const L=this.cachedContentHeight,N=this.cachedHeight,b=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:L,height:N}),this.scrollableElement.setScrollPosition({scrollTop:b})}showMessage(L,N){this.message=L,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(L.type));const b=this.stylesForType(this.message.type);this.element.style.border=b.border?`1px solid ${b.border}`:"",(this.hasFocus()||N)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let L=null;return this.validation&&(L=this.validation(this.value),L?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(L)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),L==null?void 0:L.type}stylesForType(L){switch(L){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(L){switch(L){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let L,N=()=>L.style.width=p.w(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:I=>{if(!this.message)return null;L=p.R3(I,c(".monaco-inputbox-container")),N();const k={inline:!0,className:"monaco-inputbox-message"},W=this.message.formatContent?(0,z.BO)(this.message.content,k):(0,z.IY)(this.message.content,k);W.classList.add(this.classForType(this.message.type));const q=this.stylesForType(this.message.type);return W.style.backgroundColor=q.background?q.background.toString():"",W.style.color=q.foreground?q.foreground.toString():"",W.style.border=q.border?`1px solid ${q.border}`:"",p.R3(L,W),null},onHide:()=>{this.state="closed"},layout:N});let b;this.message.type===3?b=D.N("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?b=D.N("alertWarningMessage","Warning: {0}",this.message.content):b=D.N("alertInfoMessage","Info: {0}",this.message.content),S.Z9(b),this.state="open"}_hideMessage(){!this.contextViewProvider||(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const L=this.value,b=L.charCodeAt(L.length-1)===10?" ":"";(L+b).replace(/\u000c/g,"")?this.mirror.textContent=L+b:this.mirror.innerText="\xA0",this.layout()}style(L){this.inputBackground=L.inputBackground,this.inputForeground=L.inputForeground,this.inputBorder=L.inputBorder,this.inputValidationInfoBackground=L.inputValidationInfoBackground,this.inputValidationInfoForeground=L.inputValidationInfoForeground,this.inputValidationInfoBorder=L.inputValidationInfoBorder,this.inputValidationWarningBackground=L.inputValidationWarningBackground,this.inputValidationWarningForeground=L.inputValidationWarningForeground,this.inputValidationWarningBorder=L.inputValidationWarningBorder,this.inputValidationErrorBackground=L.inputValidationErrorBackground,this.inputValidationErrorForeground=L.inputValidationErrorForeground,this.inputValidationErrorBorder=L.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const L=this.inputBackground?this.inputBackground.toString():"",N=this.inputForeground?this.inputForeground.toString():"",b=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=L,this.element.style.color=N,this.input.style.backgroundColor="inherit",this.input.style.color=N,this.element.style.borderWidth=b?"1px":"",this.element.style.borderStyle=b?"solid":"",this.element.style.borderColor=b}layout(){if(!this.mirror)return;const L=this.cachedContentHeight;this.cachedContentHeight=p.wn(this.mirror),L!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(L){const N=this.inputElement,b=N.selectionStart,I=N.selectionEnd,k=N.value;b!==null&&I!==null&&(this.value=k.substr(0,b)+L+k.substr(I),N.setSelectionRange(b+1,b+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class E extends M{constructor(L,N,b){const I=D.N({key:"history.inputbox.hint",comment:["Text will be prefixed with \u21C5 plus a single space, then used as a hint where input field keeps history"]},"for history"),k=` or \u21C5 ${I}`,W=` (\u21C5 ${I})`;super(L,N,b);this.history=new v(b.history,100);const q=()=>{if(b.showHistoryHint&&b.showHistoryHint()&&!this.placeholder.endsWith(k)&&!this.placeholder.endsWith(W)&&this.history.getHistory().length){const re=this.placeholder.endsWith(")")?k:W,de=this.placeholder+re;b.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=de:this.setPlaceHolder(de)}};this.observer=new MutationObserver((re,de)=>{re.forEach(pe=>{pe.target.textContent||q()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>q()),this.onblur(this.input,()=>{const re=de=>{if(this.placeholder.endsWith(de)){const pe=this.placeholder.slice(0,this.placeholder.length-de.length);return b.showPlaceholderOnFocus?this.placeholder=pe:this.setPlaceHolder(pe),!0}else return!1};re(W)||re(k)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let L=this.getNextValue();L&&(L=L===this.value?this.getNextValue():L),L&&(this.value=L,S.i7(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let L=this.getPreviousValue();L&&(L=L===this.value?this.getPreviousValue():L),L&&(this.value=L,S.i7(this.value))}getCurrentValue(){let L=this.history.current();return L||(L=this.history.last(),this.history.next()),L}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}},25707:function(Tt,me,a){"use strict";a.d(me,{kX:function(){return W},Bv:function(){return ae}});var p=a(16268),d=a(23547),z=a(65321),O=a(4850),S=a(10553),j=a(9802),T=a(9488),B=a(15393),F=a(49898),x=a(4669),v=a(9917),g=a(36248),D=a(61134),c=a(76633);function C(ue,te){const K=[];for(let U of te){if(ue.start>=U.range.end)continue;if(ue.end<U.range.start)break;const ee=D.e.intersect(ue,U.range);D.e.isEmpty(ee)||K.push({range:ee,size:U.size})}return K}function M({start:ue,end:te},K){return{start:ue+K,end:te+K}}function E(ue){const te=[];let K=null;for(let U of ue){const ee=U.range.start,X=U.range.end,le=U.size;if(K&&le===K.size){K.range.end=X;continue}K={range:{start:ee,end:X},size:le},te.push(K)}return te}function _(...ue){return E(ue.reduce((te,K)=>te.concat(K),[]))}class L{constructor(){this.groups=[],this._size=0}splice(te,K,U=[]){const ee=U.length-K,X=C({start:0,end:te},this.groups),le=C({start:te+K,end:Number.POSITIVE_INFINITY},this.groups).map(Ce=>({range:M(Ce.range,ee),size:Ce.size})),oe=U.map((Ce,ye)=>({range:{start:te+ye,end:te+ye+1},size:Ce.size}));this.groups=_(X,oe,le),this._size=this.groups.reduce((Ce,ye)=>Ce+ye.size*(ye.range.end-ye.range.start),0)}get count(){const te=this.groups.length;return te?this.groups[te-1].range.end:0}get size(){return this._size}indexAt(te){if(te<0)return-1;let K=0,U=0;for(let ee of this.groups){const X=ee.range.end-ee.range.start,le=U+X*ee.size;if(te<le)return K+Math.floor((te-U)/ee.size);K+=X,U=le}return K}indexAfter(te){return Math.min(this.indexAt(te)+1,this.count)}positionAt(te){if(te<0)return-1;let K=0,U=0;for(let ee of this.groups){const X=ee.range.end-ee.range.start,le=U+X;if(te<le)return K+(te-U)*ee.size;K+=X*ee.size,U=le}return-1}}function N(ue){try{ue.parentElement&&ue.parentElement.removeChild(ue)}catch(te){}}class b{constructor(te){this.renderers=te,this.cache=new Map}alloc(te){let K=this.getTemplateCache(te).pop();if(!K){const U=(0,z.$)(".monaco-list-row"),X=this.getRenderer(te).renderTemplate(U);K={domNode:U,templateId:te,templateData:X}}return K}release(te){!te||this.releaseRow(te)}releaseRow(te){const{domNode:K,templateId:U}=te;K&&(K.classList.remove("scrolling"),N(K)),this.getTemplateCache(U).push(te)}getTemplateCache(te){let K=this.cache.get(te);return K||(K=[],this.cache.set(te,K)),K}dispose(){this.cache.forEach((te,K)=>{for(const U of te)this.getRenderer(K).disposeTemplate(U.templateData),U.templateData=null}),this.cache.clear()}getRenderer(te){const K=this.renderers.get(te);if(!K)throw new Error(`No renderer found for ${te}`);return K}}var I=function(ue,te,K,U){var ee=arguments.length,X=ee<3?te:U===null?U=Object.getOwnPropertyDescriptor(te,K):U,le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")X=Reflect.decorate(ue,te,K,U);else for(var oe=ue.length-1;oe>=0;oe--)(le=ue[oe])&&(X=(ee<3?le(X):ee>3?le(te,K,X):le(te,K))||X);return ee>3&&X&&Object.defineProperty(te,K,X),X};const k={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(ue){return[ue]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class W{constructor(te){this.elements=te}update(){}getData(){return this.elements}}class q{constructor(te){this.elements=te}update(){}getData(){return this.elements}}class re{constructor(){this.types=[],this.files=[]}update(te){if(te.types&&this.types.splice(0,this.types.length,...te.types),te.files){this.files.splice(0,this.files.length);for(let K=0;K<te.files.length;K++){const U=te.files.item(K);U&&(U.size||U.type)&&this.files.push(U)}}}getData(){return{types:this.types,files:this.files}}}function de(ue,te){return Array.isArray(ue)&&Array.isArray(te)?(0,T.fS)(ue,te):ue===te}class pe{constructor(te){(te==null?void 0:te.getSetSize)?this.getSetSize=te.getSetSize.bind(te):this.getSetSize=(K,U,ee)=>ee,(te==null?void 0:te.getPosInSet)?this.getPosInSet=te.getPosInSet.bind(te):this.getPosInSet=(K,U)=>U+1,(te==null?void 0:te.getRole)?this.getRole=te.getRole.bind(te):this.getRole=K=>"listitem",(te==null?void 0:te.isChecked)?this.isChecked=te.isChecked.bind(te):this.isChecked=K=>{}}}class ae{constructor(te,K,U,ee=k){if(this.virtualDelegate=K,this.domId=`list_id_${++ae.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new B.vp(50),this.splicing=!1,this.dragOverAnimationStopDisposable=v.JT.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=v.JT.None,this.onDragLeaveTimeout=v.JT.None,this.disposables=new v.SL,this._onDidChangeContentHeight=new x.Q5,this._horizontalScrolling=!1,ee.horizontalScrolling&&ee.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new L;for(const le of U)this.renderers.set(le.templateId,le);this.cache=this.disposables.add(new b(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof ee.mouseSupport=="boolean"?ee.mouseSupport:!0),this._horizontalScrolling=(0,g.CJ)(ee,le=>le.horizontalScrolling,k.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof ee.additionalScrollHeight=="undefined"?0:ee.additionalScrollHeight,this.accessibilityProvider=new pe(ee.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(0,g.CJ)(ee,le=>le.transformOptimization,k.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(S.o.addTarget(this.rowsContainer)),this.scrollable=new c.Rm({forceIntegerValues:!0,smoothScrollDuration:(0,g.CJ)(ee,le=>le.smoothScrolling,!1)?125:0,scheduleAtNextAnimationFrame:le=>(0,z.jL)(le)}),this.scrollableElement=this.disposables.add(new j.$Z(this.rowsContainer,{alwaysConsumeMouseWheel:(0,g.CJ)(ee,le=>le.alwaysConsumeMouseWheel,k.alwaysConsumeMouseWheel),horizontal:1,vertical:(0,g.CJ)(ee,le=>le.verticalScrollMode,k.verticalScrollMode),useShadows:(0,g.CJ)(ee,le=>le.useShadows,k.useShadows),mouseWheelScrollSensitivity:ee.mouseWheelScrollSensitivity,fastScrollSensitivity:ee.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),te.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add((0,z.nm)(this.rowsContainer,S.t.Change,le=>this.onTouchChange(le))),this.disposables.add((0,z.nm)(this.scrollableElement.getDomNode(),"scroll",le=>le.target.scrollTop=0)),this.disposables.add((0,z.nm)(this.domNode,"dragover",le=>this.onDragOver(this.toDragEvent(le)))),this.disposables.add((0,z.nm)(this.domNode,"drop",le=>this.onDrop(this.toDragEvent(le)))),this.disposables.add((0,z.nm)(this.domNode,"dragleave",le=>this.onDragLeave(this.toDragEvent(le)))),this.disposables.add((0,z.nm)(this.domNode,"dragend",le=>this.onDragEnd(le))),this.setRowLineHeight=(0,g.CJ)(ee,le=>le.setRowLineHeight,k.setRowLineHeight),this.setRowHeight=(0,g.CJ)(ee,le=>le.setRowHeight,k.setRowHeight),this.supportDynamicHeights=(0,g.CJ)(ee,le=>le.supportDynamicHeights,k.supportDynamicHeights),this.dnd=(0,g.CJ)(ee,le=>le.dnd,k.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(te){if(te!==this._horizontalScrolling){if(te&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=te,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const K of this.items)this.measureItemWidth(K);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:(0,z.FK)(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(te){te.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=te.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),te.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(te.smoothScrolling?125:0),te.horizontalScrolling!==void 0&&(this.horizontalScrolling=te.horizontalScrolling),te.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:te.mouseWheelScrollSensitivity}),te.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:te.fastScrollSensitivity})}splice(te,K,U=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(te,K,U)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(te,K,U=[]){const ee=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),X={start:te,end:te+K},le=D.e.intersect(ee,X),oe=new Map;for(let ne=le.end-1;ne>=le.start;ne--){const Q=this.items[ne];if(Q.dragStartDisposable.dispose(),Q.row){let ie=oe.get(Q.templateId);ie||(ie=[],oe.set(Q.templateId,ie));const xe=this.renderers.get(Q.templateId);xe&&xe.disposeElement&&xe.disposeElement(Q.element,ne,Q.row.templateData,Q.size),ie.push(Q.row)}Q.row=null}const Ce={start:te+K,end:this.items.length},ye=D.e.intersect(Ce,ee),ke=D.e.relativeComplement(Ce,ee),Te=U.map(ne=>({id:String(this.itemId++),element:ne,templateId:this.virtualDelegate.getTemplateId(ne),size:this.virtualDelegate.getHeight(ne),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(ne),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:v.JT.None,checkedDisposable:v.JT.None}));let ge;te===0&&K>=this.items.length?(this.rangeMap=new L,this.rangeMap.splice(0,0,Te),ge=this.items,this.items=Te):(this.rangeMap.splice(te,K,Te),ge=this.items.splice(te,K,...Te));const we=U.length-K,ze=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),Qe=M(ye,we),Pe=D.e.intersect(ze,Qe);for(let ne=Pe.start;ne<Pe.end;ne++)this.updateItemInDOM(this.items[ne],ne);const Oe=D.e.relativeComplement(Qe,ze);for(const ne of Oe)for(let Q=ne.start;Q<ne.end;Q++)this.removeItemFromDOM(Q);const qe=ke.map(ne=>M(ne,we)),Ne=[{start:te,end:te+U.length},...qe].map(ne=>D.e.intersect(ze,ne)),Fe=this.getNextToLastElement(Ne);for(const ne of Ne)for(let Q=ne.start;Q<ne.end;Q++){const ie=this.items[Q],xe=oe.get(ie.templateId),be=xe==null?void 0:xe.pop();this.insertItemInDOM(Q,Fe,be)}for(const ne of oe.values())for(const Q of ne)this.cache.release(Q);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),ge.map(ne=>ne.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=(0,z.jL)(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let te=0;for(const K of this.items)typeof K.width!="undefined"&&(te=Math.max(te,K.width));this.scrollWidth=te,this.scrollableElement.setScrollDimensions({scrollWidth:te===0?0:te+10})}rerender(){if(!!this.supportDynamicHeights){for(const te of this.items)te.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(te){return this.items[te].element}domElement(te){const K=this.items[te].row;return K&&K.domNode}elementHeight(te){return this.items[te].size}elementTop(te){return this.rangeMap.positionAt(te)}indexAt(te){return this.rangeMap.indexAt(te)}indexAfter(te){return this.rangeMap.indexAfter(te)}layout(te,K){let U={height:typeof te=="number"?te:(0,z.If)(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,U.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(U),typeof K!="undefined"&&(this.renderWidth=K,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof K=="number"?K:(0,z.FK)(this.domNode)})}render(te,K,U,ee,X,le=!1){const oe=this.getRenderRange(K,U),Ce=D.e.relativeComplement(oe,te),ye=D.e.relativeComplement(te,oe),ke=this.getNextToLastElement(Ce);if(le){const Te=D.e.intersect(te,oe);for(let ge=Te.start;ge<Te.end;ge++)this.updateItemInDOM(this.items[ge],ge)}for(const Te of Ce)for(let ge=Te.start;ge<Te.end;ge++)this.insertItemInDOM(ge,ke);for(const Te of ye)for(let ge=Te.start;ge<Te.end;ge++)this.removeItemFromDOM(ge);ee!==void 0&&(this.rowsContainer.style.left=`-${ee}px`),this.rowsContainer.style.top=`-${K}px`,this.horizontalScrolling&&X!==void 0&&(this.rowsContainer.style.width=`${Math.max(X,this.renderWidth)}px`),this.lastRenderTop=K,this.lastRenderHeight=U}insertItemInDOM(te,K,U){const ee=this.items[te];ee.row||(ee.row=U??this.cache.alloc(ee.templateId));const X=this.accessibilityProvider.getRole(ee.element)||"listitem";ee.row.domNode.setAttribute("role",X);const le=this.accessibilityProvider.isChecked(ee.element);if(typeof le=="boolean")ee.row.domNode.setAttribute("aria-checked",String(!!le));else if(le){const ye=ke=>ee.row.domNode.setAttribute("aria-checked",String(!!ke));ye(le.value),ee.checkedDisposable=le.onDidChange(ye)}ee.row.domNode.parentElement||(K?this.rowsContainer.insertBefore(ee.row.domNode,K):this.rowsContainer.appendChild(ee.row.domNode)),this.updateItemInDOM(ee,te);const oe=this.renderers.get(ee.templateId);if(!oe)throw new Error(`No renderer found for template id ${ee.templateId}`);oe&&oe.renderElement(ee.element,te,ee.row.templateData,ee.size);const Ce=this.dnd.getDragURI(ee.element);ee.dragStartDisposable.dispose(),ee.row.domNode.draggable=!!Ce,Ce&&(ee.dragStartDisposable=(0,z.nm)(ee.row.domNode,"dragstart",ye=>this.onDragStart(ee.element,Ce,ye))),this.horizontalScrolling&&(this.measureItemWidth(ee),this.eventuallyUpdateScrollWidth())}measureItemWidth(te){if(!te.row||!te.row.domNode)return;te.row.domNode.style.width=p.isFirefox?"-moz-fit-content":"fit-content",te.width=(0,z.FK)(te.row.domNode);const K=window.getComputedStyle(te.row.domNode);K.paddingLeft&&(te.width+=parseFloat(K.paddingLeft)),K.paddingRight&&(te.width+=parseFloat(K.paddingRight)),te.row.domNode.style.width=""}updateItemInDOM(te,K){te.row.domNode.style.top=`${this.elementTop(K)}px`,this.setRowHeight&&(te.row.domNode.style.height=`${te.size}px`),this.setRowLineHeight&&(te.row.domNode.style.lineHeight=`${te.size}px`),te.row.domNode.setAttribute("data-index",`${K}`),te.row.domNode.setAttribute("data-last-element",K===this.length-1?"true":"false"),te.row.domNode.setAttribute("data-parity",K%2==0?"even":"odd"),te.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(te.element,K,this.length))),te.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(te.element,K))),te.row.domNode.setAttribute("id",this.getElementDomId(K)),te.row.domNode.classList.toggle("drop-target",te.dropTarget)}removeItemFromDOM(te){const K=this.items[te];if(K.dragStartDisposable.dispose(),K.checkedDisposable.dispose(),K.row){const U=this.renderers.get(K.templateId);U&&U.disposeElement&&U.disposeElement(K.element,te,K.row.templateData,K.size),this.cache.release(K.row),K.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(te,K){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:te,reuseAnimation:K})}get scrollTop(){return this.getScrollTop()}set scrollTop(te){this.setScrollTop(te)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return x.ju.map(this.disposables.add(new O.Y(this.domNode,"click")).event,te=>this.toMouseEvent(te))}get onMouseDblClick(){return x.ju.map(this.disposables.add(new O.Y(this.domNode,"dblclick")).event,te=>this.toMouseEvent(te))}get onMouseMiddleClick(){return x.ju.filter(x.ju.map(this.disposables.add(new O.Y(this.domNode,"auxclick")).event,te=>this.toMouseEvent(te)),te=>te.browserEvent.button===1)}get onMouseDown(){return x.ju.map(this.disposables.add(new O.Y(this.domNode,"mousedown")).event,te=>this.toMouseEvent(te))}get onContextMenu(){return x.ju.any(x.ju.map(this.disposables.add(new O.Y(this.domNode,"contextmenu")).event,te=>this.toMouseEvent(te)),x.ju.map(this.disposables.add(new O.Y(this.domNode,S.t.Contextmenu)).event,te=>this.toGestureEvent(te)))}get onTouchStart(){return x.ju.map(this.disposables.add(new O.Y(this.domNode,"touchstart")).event,te=>this.toTouchEvent(te))}get onTap(){return x.ju.map(this.disposables.add(new O.Y(this.rowsContainer,S.t.Tap)).event,te=>this.toGestureEvent(te))}toMouseEvent(te){const K=this.getItemIndexFromEventTarget(te.target||null),U=typeof K=="undefined"?void 0:this.items[K],ee=U&&U.element;return{browserEvent:te,index:K,element:ee}}toTouchEvent(te){const K=this.getItemIndexFromEventTarget(te.target||null),U=typeof K=="undefined"?void 0:this.items[K],ee=U&&U.element;return{browserEvent:te,index:K,element:ee}}toGestureEvent(te){const K=this.getItemIndexFromEventTarget(te.initialTarget||null),U=typeof K=="undefined"?void 0:this.items[K],ee=U&&U.element;return{browserEvent:te,index:K,element:ee}}toDragEvent(te){const K=this.getItemIndexFromEventTarget(te.target||null),U=typeof K=="undefined"?void 0:this.items[K],ee=U&&U.element;return{browserEvent:te,index:K,element:ee}}onScroll(te){try{const K=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(K,te.scrollTop,te.height,te.scrollLeft,te.scrollWidth),this.supportDynamicHeights&&this._rerender(te.scrollTop,te.height,te.inSmoothScrolling)}catch(K){throw console.error("Got bad scroll event:",te),K}}onTouchChange(te){te.preventDefault(),te.stopPropagation(),this.scrollTop-=te.translationY}onDragStart(te,K,U){if(!U.dataTransfer)return;const ee=this.dnd.getDragElements(te);if(U.dataTransfer.effectAllowed="copyMove",U.dataTransfer.setData(d.go.TEXT,K),U.dataTransfer.setDragImage){let X;this.dnd.getDragLabel&&(X=this.dnd.getDragLabel(ee,U)),typeof X=="undefined"&&(X=String(ee.length));const le=(0,z.$)(".monaco-drag-image");le.textContent=X,document.body.appendChild(le),U.dataTransfer.setDragImage(le,-10,-10),setTimeout(()=>document.body.removeChild(le),0)}this.currentDragData=new W(ee),d.P$.CurrentDragAndDropData=new q(ee),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,U)}onDragOver(te){if(te.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),d.P$.CurrentDragAndDropData&&d.P$.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(te.browserEvent),!te.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(d.P$.CurrentDragAndDropData)this.currentDragData=d.P$.CurrentDragAndDropData;else{if(!te.browserEvent.dataTransfer.types)return!1;this.currentDragData=new re}const K=this.dnd.onDragOver(this.currentDragData,te.element,te.index,te.browserEvent);if(this.canDrop=typeof K=="boolean"?K:K.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;te.browserEvent.dataTransfer.dropEffect=typeof K!="boolean"&&K.effect===0?"copy":"move";let U;if(typeof K!="boolean"&&K.feedback?U=K.feedback:typeof te.index=="undefined"?U=[-1]:U=[te.index],U=(0,T.EB)(U).filter(ee=>ee>=-1&&ee<this.length).sort((ee,X)=>ee-X),U=U[0]===-1?[-1]:U,de(this.currentDragFeedback,U))return!0;if(this.currentDragFeedback=U,this.currentDragFeedbackDisposable.dispose(),U[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=(0,v.OF)(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const ee of U){const X=this.items[ee];X.dropTarget=!0,X.row&&X.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=(0,v.OF)(()=>{for(const ee of U){const X=this.items[ee];X.dropTarget=!1,X.row&&X.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(te){var K,U;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,B.Vg)(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((U=(K=this.dnd).onDragLeave)===null||U===void 0||U.call(K,this.currentDragData,te.element,te.index,te.browserEvent))}onDrop(te){if(!this.canDrop)return;const K=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,d.P$.CurrentDragAndDropData=void 0,!(!K||!te.browserEvent.dataTransfer)&&(te.browserEvent.preventDefault(),K.update(te.browserEvent.dataTransfer),this.dnd.drop(K,te.element,te.index,te.browserEvent))}onDragEnd(te){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,d.P$.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(te)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=v.JT.None}setupDragAndDropScrollTopAnimation(te){if(!this.dragOverAnimationDisposable){const K=(0,z.xQ)(this.domNode).top;this.dragOverAnimationDisposable=(0,z.jt)(this.animateDragAndDropScrollTop.bind(this,K))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,B.Vg)(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=te.pageY}animateDragAndDropScrollTop(te){if(this.dragOverMouseY===void 0)return;const K=this.dragOverMouseY-te,U=this.renderHeight-35;K<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(K-35))):K>U&&(this.scrollTop+=Math.min(14,Math.floor(.3*(K-U))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(te){const K=this.scrollableElement.getDomNode();let U=te;for(;U instanceof HTMLElement&&U!==this.rowsContainer&&K.contains(U);){const ee=U.getAttribute("data-index");if(ee){const X=Number(ee);if(!isNaN(X))return X}U=U.parentElement}}getRenderRange(te,K){return{start:this.rangeMap.indexAt(te),end:this.rangeMap.indexAfter(te+K-1)}}_rerender(te,K,U){const ee=this.getRenderRange(te,K);let X,le;te===this.elementTop(ee.start)?(X=ee.start,le=0):ee.end-ee.start>1&&(X=ee.start+1,le=this.elementTop(X)-te);let oe=0;for(;;){const Ce=this.getRenderRange(te,K);let ye=!1;for(let ke=Ce.start;ke<Ce.end;ke++){const Te=this.probeDynamicHeight(ke);Te!==0&&this.rangeMap.splice(ke,1,[this.items[ke]]),oe+=Te,ye=ye||Te!==0}if(!ye){oe!==0&&this.eventuallyUpdateScrollDimensions();const ke=D.e.relativeComplement(ee,Ce);for(const ge of ke)for(let we=ge.start;we<ge.end;we++)this.items[we].row&&this.removeItemFromDOM(we);const Te=D.e.relativeComplement(Ce,ee);for(const ge of Te)for(let we=ge.start;we<ge.end;we++){const ze=we+1,Qe=ze<this.items.length?this.items[ze].row:null,Pe=Qe?Qe.domNode:null;this.insertItemInDOM(we,Pe)}for(let ge=Ce.start;ge<Ce.end;ge++)this.items[ge].row&&this.updateItemInDOM(this.items[ge],ge);if(typeof X=="number"){const ge=this.scrollable.getFutureScrollPosition().scrollTop-te,we=this.elementTop(X)-le+ge;this.setScrollTop(we,U)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(te){const K=this.items[te];if(this.virtualDelegate.getDynamicHeight){const le=this.virtualDelegate.getDynamicHeight(K.element);if(le!==null){const oe=K.size;return K.size=le,K.lastDynamicHeightWidth=this.renderWidth,le-oe}}if(!K.hasDynamicHeight||K.lastDynamicHeightWidth===this.renderWidth||!!this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(K.element))return 0;const U=K.size;if(!this.setRowHeight&&K.row){let le=K.row.domNode.offsetHeight;return K.size=le,K.lastDynamicHeightWidth=this.renderWidth,le-U}const ee=this.cache.alloc(K.templateId);ee.domNode.style.height="",this.rowsContainer.appendChild(ee.domNode);const X=this.renderers.get(K.templateId);return X&&(X.renderElement(K.element,te,ee.templateData,void 0),X.disposeElement&&X.disposeElement(K.element,te,ee.templateData,void 0)),K.size=ee.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(K.element,K.size),K.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(ee.domNode),this.cache.release(ee),K.size-U}getNextToLastElement(te){const K=te[te.length-1];if(!K)return null;const U=this.items[K.end];return!U||!U.row?null:U.row.domNode}getElementDomId(te){return`${this.domId}_${te}`}dispose(){if(this.items){for(const te of this.items)if(te.row){const K=this.renderers.get(te.row.templateId);K&&(K.disposeElement&&K.disposeElement(te.element,-1,te.row.templateData,void 0),K.disposeTemplate(te.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(0,v.B9)(this.disposables)}}ae.InstanceCount=0,I([F.H],ae.prototype,"onMouseClick",null),I([F.H],ae.prototype,"onMouseDblClick",null),I([F.H],ae.prototype,"onMouseMiddleClick",null),I([F.H],ae.prototype,"onMouseDown",null),I([F.H],ae.prototype,"onContextMenu",null),I([F.H],ae.prototype,"onTouchStart",null),I([F.H],ae.prototype,"onTap",null)},43799:function(Tt,me,a){"use strict";a.d(me,{WK:function(){return ue},wD:function(){return Ce},aV:function(){return qe},sx:function(){return oe},cK:function(){return re},hD:function(){return de},wn:function(){return ee},Zo:function(){return U}});var p=a(65321),d=a(4850),z=a(59069),O=a(10553),S=a(85152);class j{constructor(Ne){this.spliceables=Ne}splice(Ne,Fe,ne){this.spliceables.forEach(Q=>Q.splice(Ne,Fe,ne))}}var T=a(9488),B=a(15393),F=a(41264),x=a(49898),v=a(4669),g=a(75392),D=a(9917),c=a(59870),C=a(36248),M=a(1432),E=a(98401);class _ extends Error{constructor(Ne,Fe){super(`ListError [${Ne}] ${Fe}`)}}var L=a(25707),N=function(Je,Ne,Fe,ne){var Q=arguments.length,ie=Q<3?Ne:ne===null?ne=Object.getOwnPropertyDescriptor(Ne,Fe):ne,xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ie=Reflect.decorate(Je,Ne,Fe,ne);else for(var be=Je.length-1;be>=0;be--)(xe=Je[be])&&(ie=(Q<3?xe(ie):Q>3?xe(Ne,Fe,ie):xe(Ne,Fe))||ie);return Q>3&&ie&&Object.defineProperty(Ne,Fe,ie),ie},b=function(Je,Ne,Fe,ne){function Q(ie){return ie instanceof Fe?ie:new Fe(function(xe){xe(ie)})}return new(Fe||(Fe=Promise))(function(ie,xe){function be(_t){try{nt(ne.next(_t))}catch(Ot){xe(Ot)}}function Ge(_t){try{nt(ne.throw(_t))}catch(Ot){xe(Ot)}}function nt(_t){_t.done?ie(_t.value):Q(_t.value).then(be,Ge)}nt((ne=ne.apply(Je,Ne||[])).next())})};class I{constructor(Ne){this.trait=Ne,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(Ne){return Ne}renderElement(Ne,Fe,ne){const Q=this.renderedElements.findIndex(ie=>ie.templateData===ne);if(Q>=0){const ie=this.renderedElements[Q];this.trait.unrender(ne),ie.index=Fe}else{const ie={index:Fe,templateData:ne};this.renderedElements.push(ie)}this.trait.renderIndex(Fe,ne)}splice(Ne,Fe,ne){const Q=[];for(const ie of this.renderedElements)ie.index<Ne?Q.push(ie):ie.index>=Ne+Fe&&Q.push({index:ie.index+ne-Fe,templateData:ie.templateData});this.renderedElements=Q}renderIndexes(Ne){for(const{index:Fe,templateData:ne}of this.renderedElements)Ne.indexOf(Fe)>-1&&this.trait.renderIndex(Fe,ne)}disposeTemplate(Ne){const Fe=this.renderedElements.findIndex(ne=>ne.templateData===Ne);Fe<0||this.renderedElements.splice(Fe,1)}}class k{constructor(Ne){this._trait=Ne,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new v.Q5,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new I(this)}splice(Ne,Fe,ne){var Q;Fe=Math.max(0,Math.min(Fe,this.length-Ne));const ie=ne.length-Fe,xe=Ne+Fe,be=[...this.sortedIndexes.filter(nt=>nt<Ne),...ne.map((nt,_t)=>nt?_t+Ne:-1).filter(nt=>nt!==-1),...this.sortedIndexes.filter(nt=>nt>=xe).map(nt=>nt+ie)],Ge=this.length+ie;if(this.sortedIndexes.length>0&&be.length===0&&Ge>0){const nt=(Q=this.sortedIndexes.find(_t=>_t>=Ne))!==null&&Q!==void 0?Q:Ge-1;be.push(Math.min(nt,Ge-1))}this.renderer.splice(Ne,Fe,ne.length),this._set(be,be),this.length=Ge}renderIndex(Ne,Fe){Fe.classList.toggle(this._trait,this.contains(Ne))}unrender(Ne){Ne.classList.remove(this._trait)}set(Ne,Fe){return this._set(Ne,[...Ne].sort(ze),Fe)}_set(Ne,Fe,ne){const Q=this.indexes,ie=this.sortedIndexes;this.indexes=Ne,this.sortedIndexes=Fe;const xe=ge(ie,Ne);return this.renderer.renderIndexes(xe),this._onChange.fire({indexes:Ne,browserEvent:ne}),Q}get(){return this.indexes}contains(Ne){return(0,T.ry)(this.sortedIndexes,Ne,ze)>=0}dispose(){(0,D.B9)(this._onChange)}}N([x.H],k.prototype,"renderer",null);class W extends k{constructor(Ne){super("selected");this.setAriaSelected=Ne}renderIndex(Ne,Fe){super.renderIndex(Ne,Fe),this.setAriaSelected&&(this.contains(Ne)?Fe.setAttribute("aria-selected","true"):Fe.setAttribute("aria-selected","false"))}}class q{constructor(Ne,Fe,ne){this.trait=Ne,this.view=Fe,this.identityProvider=ne}splice(Ne,Fe,ne){if(!this.identityProvider)return this.trait.splice(Ne,Fe,ne.map(()=>!1));const Q=this.trait.get().map(xe=>this.identityProvider.getId(this.view.element(xe)).toString()),ie=ne.map(xe=>Q.indexOf(this.identityProvider.getId(xe).toString())>-1);this.trait.splice(Ne,Fe,ie)}}function re(Je){return Je.tagName==="INPUT"||Je.tagName==="TEXTAREA"}function de(Je){return Je.classList.contains("monaco-editor")?!0:Je.classList.contains("monaco-list")||!Je.parentElement?!1:de(Je.parentElement)}class pe{constructor(Ne,Fe,ne){this.list=Ne,this.view=Fe,this.disposables=new D.SL,this.multipleSelectionDisposables=new D.SL,this.onKeyDown.filter(Q=>Q.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(Q=>Q.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(Q=>Q.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(Q=>Q.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(Q=>Q.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(Q=>Q.keyCode===9).on(this.onEscape,this,this.disposables),ne.multipleSelectionSupport!==!1&&this.onKeyDown.filter(Q=>(M.dz?Q.metaKey:Q.ctrlKey)&&Q.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return v.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keydown")).event).filter(Ne=>!re(Ne.target)).map(Ne=>new z.y(Ne))}updateOptions(Ne){Ne.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),Ne.multipleSelectionSupport&&this.onKeyDown.filter(Fe=>(M.dz?Fe.metaKey:Fe.ctrlKey)&&Fe.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(Ne){Ne.preventDefault(),Ne.stopPropagation(),this.list.setSelection(this.list.getFocus(),Ne.browserEvent)}onUpArrow(Ne){Ne.preventDefault(),Ne.stopPropagation(),this.list.focusPrevious(1,!1,Ne.browserEvent);const Fe=this.list.getFocus()[0];this.list.setAnchor(Fe),this.list.reveal(Fe),this.view.domNode.focus()}onDownArrow(Ne){Ne.preventDefault(),Ne.stopPropagation(),this.list.focusNext(1,!1,Ne.browserEvent);const Fe=this.list.getFocus()[0];this.list.setAnchor(Fe),this.list.reveal(Fe),this.view.domNode.focus()}onPageUpArrow(Ne){Ne.preventDefault(),Ne.stopPropagation(),this.list.focusPreviousPage(Ne.browserEvent);const Fe=this.list.getFocus()[0];this.list.setAnchor(Fe),this.list.reveal(Fe),this.view.domNode.focus()}onPageDownArrow(Ne){Ne.preventDefault(),Ne.stopPropagation(),this.list.focusNextPage(Ne.browserEvent);const Fe=this.list.getFocus()[0];this.list.setAnchor(Fe),this.list.reveal(Fe),this.view.domNode.focus()}onCtrlA(Ne){Ne.preventDefault(),Ne.stopPropagation(),this.list.setSelection((0,T.w6)(this.list.length),Ne.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(Ne){this.list.getSelection().length&&(Ne.preventDefault(),Ne.stopPropagation(),this.list.setSelection([],Ne.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}N([x.H],pe.prototype,"onKeyDown",null);var ae;(function(Je){Je[Je.Idle=0]="Idle",Je[Je.Typing=1]="Typing"})(ae||(ae={}));const ue=new class{mightProducePrintableCharacter(Je){return Je.ctrlKey||Je.metaKey||Je.altKey?!1:Je.keyCode>=31&&Je.keyCode<=56||Je.keyCode>=21&&Je.keyCode<=30||Je.keyCode>=93&&Je.keyCode<=102||Je.keyCode>=80&&Je.keyCode<=90}};class te{constructor(Ne,Fe,ne,Q){this.list=Ne,this.view=Fe,this.keyboardNavigationLabelProvider=ne,this.delegate=Q,this.enabled=!1,this.state=ae.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new D.SL,this.disposables=new D.SL,this.updateOptions(Ne.options)}updateOptions(Ne){(typeof Ne.enableKeyboardNavigation=="undefined"?!0:!!Ne.enableKeyboardNavigation)?this.enable():this.disable(),typeof Ne.automaticKeyboardNavigation!="undefined"&&(this.automaticKeyboardNavigation=Ne.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const Ne=v.ju.chain(this.enabledDisposables.add(new d.Y(this.view.domNode,"keydown")).event).filter(Q=>!re(Q.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(Q=>new z.y(Q)).filter(Q=>this.delegate.mightProducePrintableCharacter(Q)).forEach(Q=>Q.preventDefault()).map(Q=>Q.browserEvent.key).event,Fe=v.ju.debounce(Ne,()=>null,800);v.ju.reduce(v.ju.any(Ne,Fe),(Q,ie)=>ie===null?null:(Q||"")+ie)(this.onInput,this,this.enabledDisposables),Fe(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){!this.enabled||(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var Ne;const Fe=this.list.getFocus();if(Fe.length>0&&Fe[0]===this.previouslyFocused){const ne=(Ne=this.list.options.accessibilityProvider)===null||Ne===void 0?void 0:Ne.getAriaLabel(this.list.element(Fe[0]));ne&&(0,S.Z9)(ne)}this.previouslyFocused=-1}onInput(Ne){if(!Ne){this.state=ae.Idle,this.triggered=!1;return}const Fe=this.list.getFocus(),ne=Fe.length>0?Fe[0]:0,Q=this.state===ae.Idle?1:0;this.state=ae.Typing;for(let ie=0;ie<this.list.length;ie++){const xe=(ne+ie+Q)%this.list.length,be=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(xe)),Ge=be&&be.toString();if(typeof Ge=="undefined"||(0,g.Ji)(Ne,Ge)){this.previouslyFocused=ne,this.list.setFocus([xe]),this.list.reveal(xe);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class K{constructor(Ne,Fe){this.list=Ne,this.view=Fe,this.disposables=new D.SL,v.ju.chain(this.disposables.add(new d.Y(Fe.domNode,"keydown")).event).filter(Q=>!re(Q.target)).map(Q=>new z.y(Q)).filter(Q=>Q.keyCode===2&&!Q.ctrlKey&&!Q.metaKey&&!Q.shiftKey&&!Q.altKey).on(this.onTab,this,this.disposables)}onTab(Ne){if(Ne.target!==this.view.domNode)return;const Fe=this.list.getFocus();if(Fe.length===0)return;const ne=this.view.domElement(Fe[0]);if(!ne)return;const Q=ne.querySelector("[tabIndex]");if(!Q||!(Q instanceof HTMLElement)||Q.tabIndex===-1)return;const ie=window.getComputedStyle(Q);ie.visibility==="hidden"||ie.display==="none"||(Ne.preventDefault(),Ne.stopPropagation(),Q.focus())}dispose(){this.disposables.dispose()}}function U(Je){return M.dz?Je.browserEvent.metaKey:Je.browserEvent.ctrlKey}function ee(Je){return Je.browserEvent.shiftKey}function X(Je){return Je instanceof MouseEvent&&Je.button===2}const le={isSelectionSingleChangeEvent:U,isSelectionRangeChangeEvent:ee};class oe{constructor(Ne){this.list=Ne,this.disposables=new D.SL,this._onPointer=new v.Q5,this.onPointer=this._onPointer.event,Ne.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||le),this.mouseSupport=typeof Ne.options.mouseSupport=="undefined"||!!Ne.options.mouseSupport,this.mouseSupport&&(Ne.onMouseDown(this.onMouseDown,this,this.disposables),Ne.onContextMenu(this.onContextMenu,this,this.disposables),Ne.onMouseDblClick(this.onDoubleClick,this,this.disposables),Ne.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(O.o.addTarget(Ne.getHTMLElement()))),v.ju.any(Ne.onMouseClick,Ne.onMouseMiddleClick,Ne.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(Ne){Ne.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,Ne.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||le))}isSelectionSingleChangeEvent(Ne){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(Ne):!1}isSelectionRangeChangeEvent(Ne){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(Ne):!1}isSelectionChangeEvent(Ne){return this.isSelectionSingleChangeEvent(Ne)||this.isSelectionRangeChangeEvent(Ne)}onMouseDown(Ne){de(Ne.browserEvent.target)||document.activeElement!==Ne.browserEvent.target&&this.list.domFocus()}onContextMenu(Ne){if(de(Ne.browserEvent.target))return;const Fe=typeof Ne.index=="undefined"?[]:[Ne.index];this.list.setFocus(Fe,Ne.browserEvent)}onViewPointer(Ne){if(!this.mouseSupport||re(Ne.browserEvent.target)||de(Ne.browserEvent.target))return;const Fe=Ne.index;if(typeof Fe=="undefined"){this.list.setFocus([],Ne.browserEvent),this.list.setSelection([],Ne.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(Ne))return this.changeSelection(Ne);if(this.isSelectionChangeEvent(Ne))return this.changeSelection(Ne);this.list.setFocus([Fe],Ne.browserEvent),this.list.setAnchor(Fe),X(Ne.browserEvent)||this.list.setSelection([Fe],Ne.browserEvent),this._onPointer.fire(Ne)}onDoubleClick(Ne){if(re(Ne.browserEvent.target)||de(Ne.browserEvent.target)||this.isSelectionChangeEvent(Ne))return;const Fe=this.list.getFocus();this.list.setSelection(Fe,Ne.browserEvent)}changeSelection(Ne){const Fe=Ne.index;let ne=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(Ne)){if(typeof ne=="undefined"){const _t=this.list.getFocus()[0];ne=_t??Fe,this.list.setAnchor(ne)}const Q=Math.min(ne,Fe),ie=Math.max(ne,Fe),xe=(0,T.w6)(Q,ie+1),be=this.list.getSelection(),Ge=Te(ge(be,[ne]),ne);if(Ge.length===0)return;const nt=ge(xe,we(be,Ge));this.list.setSelection(nt,Ne.browserEvent),this.list.setFocus([Fe],Ne.browserEvent)}else if(this.isSelectionSingleChangeEvent(Ne)){const Q=this.list.getSelection(),ie=Q.filter(xe=>xe!==Fe);this.list.setFocus([Fe]),this.list.setAnchor(Fe),Q.length===ie.length?this.list.setSelection([...ie,Fe],Ne.browserEvent):this.list.setSelection(ie,Ne.browserEvent)}}dispose(){this.disposables.dispose()}}class Ce{constructor(Ne,Fe){this.styleElement=Ne,this.selectorSuffix=Fe}style(Ne){const Fe=this.selectorSuffix&&`.${this.selectorSuffix}`,ne=[];Ne.listBackground&&(Ne.listBackground.isOpaque()?ne.push(`.monaco-list${Fe} .monaco-list-rows { background: ${Ne.listBackground}; }`):M.dz||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),Ne.listFocusBackground&&(ne.push(`.monaco-list${Fe}:focus .monaco-list-row.focused { background-color: ${Ne.listFocusBackground}; }`),ne.push(`.monaco-list${Fe}:focus .monaco-list-row.focused:hover { background-color: ${Ne.listFocusBackground}; }`)),Ne.listFocusForeground&&ne.push(`.monaco-list${Fe}:focus .monaco-list-row.focused { color: ${Ne.listFocusForeground}; }`),Ne.listActiveSelectionBackground&&(ne.push(`.monaco-list${Fe}:focus .monaco-list-row.selected { background-color: ${Ne.listActiveSelectionBackground}; }`),ne.push(`.monaco-list${Fe}:focus .monaco-list-row.selected:hover { background-color: ${Ne.listActiveSelectionBackground}; }`)),Ne.listActiveSelectionForeground&&ne.push(`.monaco-list${Fe}:focus .monaco-list-row.selected { color: ${Ne.listActiveSelectionForeground}; }`),Ne.listActiveSelectionIconForeground&&ne.push(`.monaco-list${Fe}:focus .monaco-list-row.selected .codicon { color: ${Ne.listActiveSelectionIconForeground}; }`),Ne.listFocusAndSelectionBackground&&ne.push(`
				.monaco-drag-image,
				.monaco-list${Fe}:focus .monaco-list-row.selected.focused { background-color: ${Ne.listFocusAndSelectionBackground}; }
			`),Ne.listFocusAndSelectionForeground&&ne.push(`
				.monaco-drag-image,
				.monaco-list${Fe}:focus .monaco-list-row.selected.focused { color: ${Ne.listFocusAndSelectionForeground}; }
			`),Ne.listInactiveFocusForeground&&(ne.push(`.monaco-list${Fe} .monaco-list-row.focused { color:  ${Ne.listInactiveFocusForeground}; }`),ne.push(`.monaco-list${Fe} .monaco-list-row.focused:hover { color:  ${Ne.listInactiveFocusForeground}; }`)),Ne.listInactiveSelectionIconForeground&&ne.push(`.monaco-list${Fe} .monaco-list-row.focused .codicon { color:  ${Ne.listInactiveSelectionIconForeground}; }`),Ne.listInactiveFocusBackground&&(ne.push(`.monaco-list${Fe} .monaco-list-row.focused { background-color:  ${Ne.listInactiveFocusBackground}; }`),ne.push(`.monaco-list${Fe} .monaco-list-row.focused:hover { background-color:  ${Ne.listInactiveFocusBackground}; }`)),Ne.listInactiveSelectionBackground&&(ne.push(`.monaco-list${Fe} .monaco-list-row.selected { background-color:  ${Ne.listInactiveSelectionBackground}; }`),ne.push(`.monaco-list${Fe} .monaco-list-row.selected:hover { background-color:  ${Ne.listInactiveSelectionBackground}; }`)),Ne.listInactiveSelectionForeground&&ne.push(`.monaco-list${Fe} .monaco-list-row.selected { color: ${Ne.listInactiveSelectionForeground}; }`),Ne.listHoverBackground&&ne.push(`.monaco-list${Fe}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${Ne.listHoverBackground}; }`),Ne.listHoverForeground&&ne.push(`.monaco-list${Fe} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${Ne.listHoverForeground}; }`),Ne.listSelectionOutline&&ne.push(`.monaco-list${Fe} .monaco-list-row.selected { outline: 1px dotted ${Ne.listSelectionOutline}; outline-offset: -1px; }`),Ne.listFocusOutline&&ne.push(`
				.monaco-drag-image,
				.monaco-list${Fe}:focus .monaco-list-row.focused { outline: 1px solid ${Ne.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${Fe}.last-focused .monaco-list-row.focused { outline: 1px solid ${Ne.listFocusOutline}; outline-offset: -1px; }
			`),Ne.listInactiveFocusOutline&&ne.push(`.monaco-list${Fe} .monaco-list-row.focused { outline: 1px dotted ${Ne.listInactiveFocusOutline}; outline-offset: -1px; }`),Ne.listHoverOutline&&ne.push(`.monaco-list${Fe} .monaco-list-row:hover { outline: 1px dashed ${Ne.listHoverOutline}; outline-offset: -1px; }`),Ne.listDropBackground&&ne.push(`
				.monaco-list${Fe}.drop-target,
				.monaco-list${Fe} .monaco-list-rows.drop-target,
				.monaco-list${Fe} .monaco-list-row.drop-target { background-color: ${Ne.listDropBackground} !important; color: inherit !important; }
			`),Ne.listFilterWidgetBackground&&ne.push(`.monaco-list-type-filter { background-color: ${Ne.listFilterWidgetBackground} }`),Ne.listFilterWidgetOutline&&ne.push(`.monaco-list-type-filter { border: 1px solid ${Ne.listFilterWidgetOutline}; }`),Ne.listFilterWidgetNoMatchesOutline&&ne.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${Ne.listFilterWidgetNoMatchesOutline}; }`),Ne.listMatchesShadow&&ne.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${Ne.listMatchesShadow}; }`),Ne.tableColumnsBorder&&ne.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${Ne.tableColumnsBorder};
			}`),Ne.tableOddRowsBackgroundColor&&ne.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${Ne.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=ne.join(`
`)}}const ye={listFocusBackground:F.Il.fromHex("#7FB0D0"),listActiveSelectionBackground:F.Il.fromHex("#0E639C"),listActiveSelectionForeground:F.Il.fromHex("#FFFFFF"),listActiveSelectionIconForeground:F.Il.fromHex("#FFFFFF"),listFocusAndSelectionBackground:F.Il.fromHex("#094771"),listFocusAndSelectionForeground:F.Il.fromHex("#FFFFFF"),listInactiveSelectionBackground:F.Il.fromHex("#3F3F46"),listInactiveSelectionIconForeground:F.Il.fromHex("#FFFFFF"),listHoverBackground:F.Il.fromHex("#2A2D2E"),listDropBackground:F.Il.fromHex("#383B3D"),treeIndentGuidesStroke:F.Il.fromHex("#a9a9a9"),tableColumnsBorder:F.Il.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:F.Il.fromHex("#cccccc").transparent(.04)},ke={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Te(Je,Ne){const Fe=Je.indexOf(Ne);if(Fe===-1)return[];const ne=[];let Q=Fe-1;for(;Q>=0&&Je[Q]===Ne-(Fe-Q);)ne.push(Je[Q--]);for(ne.reverse(),Q=Fe;Q<Je.length&&Je[Q]===Ne+(Q-Fe);)ne.push(Je[Q++]);return ne}function ge(Je,Ne){const Fe=[];let ne=0,Q=0;for(;ne<Je.length||Q<Ne.length;)if(ne>=Je.length)Fe.push(Ne[Q++]);else if(Q>=Ne.length)Fe.push(Je[ne++]);else if(Je[ne]===Ne[Q]){Fe.push(Je[ne]),ne++,Q++;continue}else Je[ne]<Ne[Q]?Fe.push(Je[ne++]):Fe.push(Ne[Q++]);return Fe}function we(Je,Ne){const Fe=[];let ne=0,Q=0;for(;ne<Je.length||Q<Ne.length;)if(ne>=Je.length)Fe.push(Ne[Q++]);else if(Q>=Ne.length)Fe.push(Je[ne++]);else if(Je[ne]===Ne[Q]){ne++,Q++;continue}else Je[ne]<Ne[Q]?Fe.push(Je[ne++]):Q++;return Fe}const ze=(Je,Ne)=>Je-Ne;class Qe{constructor(Ne,Fe){this._templateId=Ne,this.renderers=Fe}get templateId(){return this._templateId}renderTemplate(Ne){return this.renderers.map(Fe=>Fe.renderTemplate(Ne))}renderElement(Ne,Fe,ne,Q){let ie=0;for(const xe of this.renderers)xe.renderElement(Ne,Fe,ne[ie++],Q)}disposeElement(Ne,Fe,ne,Q){let ie=0;for(const xe of this.renderers)xe.disposeElement&&xe.disposeElement(Ne,Fe,ne[ie],Q),ie+=1}disposeTemplate(Ne){let Fe=0;for(const ne of this.renderers)ne.disposeTemplate(Ne[Fe++])}}class Pe{constructor(Ne){this.accessibilityProvider=Ne,this.templateId="a18n"}renderTemplate(Ne){return Ne}renderElement(Ne,Fe,ne){const Q=this.accessibilityProvider.getAriaLabel(Ne);Q?ne.setAttribute("aria-label",Q):ne.removeAttribute("aria-label");const ie=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(Ne);typeof ie=="number"?ne.setAttribute("aria-level",`${ie}`):ne.removeAttribute("aria-level")}disposeTemplate(Ne){}}class Oe{constructor(Ne,Fe){this.list=Ne,this.dnd=Fe}getDragElements(Ne){const Fe=this.list.getSelectedElements();return Fe.indexOf(Ne)>-1?Fe:[Ne]}getDragURI(Ne){return this.dnd.getDragURI(Ne)}getDragLabel(Ne,Fe){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(Ne,Fe)}onDragStart(Ne,Fe){this.dnd.onDragStart&&this.dnd.onDragStart(Ne,Fe)}onDragOver(Ne,Fe,ne,Q){return this.dnd.onDragOver(Ne,Fe,ne,Q)}onDragLeave(Ne,Fe,ne,Q){var ie,xe;(xe=(ie=this.dnd).onDragLeave)===null||xe===void 0||xe.call(ie,Ne,Fe,ne,Q)}onDragEnd(Ne){this.dnd.onDragEnd&&this.dnd.onDragEnd(Ne)}drop(Ne,Fe,ne,Q){this.dnd.drop(Ne,Fe,ne,Q)}}class qe{constructor(Ne,Fe,ne,Q,ie=ke){var xe;this.user=Ne,this._options=ie,this.focus=new k("focused"),this.anchor=new k("anchor"),this.eventBufferer=new v.E7,this._ariaLabel="",this.disposables=new D.SL,this._onDidDispose=new v.Q5,this.onDidDispose=this._onDidDispose.event;const be=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(xe=this._options.accessibilityProvider)===null||xe===void 0?void 0:xe.getWidgetRole():"list";this.selection=new W(be!=="listbox"),(0,C.jB)(ie,ye,!1);const Ge=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=ie.accessibilityProvider,this.accessibilityProvider&&(Ge.push(new Pe(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),Q=Q.map(_t=>new Qe(_t.templateId,[...Ge,_t]));const nt=Object.assign(Object.assign({},ie),{dnd:ie.dnd&&new Oe(this,ie.dnd)});if(this.view=new L.Bv(Fe,ne,Q,nt),this.view.domNode.setAttribute("role",be),ie.styleController)this.styleController=ie.styleController(this.view.domId);else{const _t=(0,p.dS)(this.view.domNode);this.styleController=new Ce(_t,this.view.domId)}if(this.spliceable=new j([new q(this.focus,this.view,ie.identityProvider),new q(this.selection,this.view,ie.identityProvider),new q(this.anchor,this.view,ie.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new K(this,this.view)),(typeof ie.keyboardSupport!="boolean"||ie.keyboardSupport)&&(this.keyboardController=new pe(this,this.view,ie),this.disposables.add(this.keyboardController)),ie.keyboardNavigationLabelProvider){const _t=ie.keyboardNavigationDelegate||ue;this.typeLabelController=new te(this,this.view,ie.keyboardNavigationLabelProvider,_t),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(ie),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return v.ju.map(this.eventBufferer.wrapEvent(this.focus.onChange),Ne=>this.toListEvent(Ne))}get onDidChangeSelection(){return v.ju.map(this.eventBufferer.wrapEvent(this.selection.onChange),Ne=>this.toListEvent(Ne))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let Ne=!1;const Fe=v.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keydown")).event).map(ie=>new z.y(ie)).filter(ie=>Ne=ie.keyCode===58||ie.shiftKey&&ie.keyCode===68).map(d.p).filter(()=>!1).event,ne=v.ju.chain(this.disposables.add(new d.Y(this.view.domNode,"keyup")).event).forEach(()=>Ne=!1).map(ie=>new z.y(ie)).filter(ie=>ie.keyCode===58||ie.shiftKey&&ie.keyCode===68).map(d.p).map(({browserEvent:ie})=>{const xe=this.getFocus(),be=xe.length?xe[0]:void 0,Ge=typeof be!="undefined"?this.view.element(be):void 0,nt=typeof be!="undefined"?this.view.domElement(be):this.view.domNode;return{index:be,element:Ge,anchor:nt,browserEvent:ie}}).event,Q=v.ju.chain(this.view.onContextMenu).filter(ie=>!Ne).map(({element:ie,index:xe,browserEvent:be})=>({element:ie,index:xe,anchor:{x:be.pageX+1,y:be.pageY},browserEvent:be})).event;return v.ju.any(Fe,ne,Q)}get onKeyDown(){return this.disposables.add(new d.Y(this.view.domNode,"keydown")).event}get onDidFocus(){return v.ju.signal(this.disposables.add(new d.Y(this.view.domNode,"focus",!0)).event)}createMouseController(Ne){return new oe(this)}updateOptions(Ne={}){var Fe;this._options=Object.assign(Object.assign({},this._options),Ne),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(Ne),(Fe=this.keyboardController)===null||Fe===void 0||Fe.updateOptions(Ne),this.view.updateOptions(Ne)}get options(){return this._options}splice(Ne,Fe,ne=[]){if(Ne<0||Ne>this.view.length)throw new _(this.user,`Invalid start index: ${Ne}`);if(Fe<0)throw new _(this.user,`Invalid delete count: ${Fe}`);Fe===0&&ne.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(Ne,Fe,ne))}rerender(){this.view.rerender()}element(Ne){return this.view.element(Ne)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(Ne){this.view.setScrollTop(Ne)}get ariaLabel(){return this._ariaLabel}set ariaLabel(Ne){this._ariaLabel=Ne,this.view.domNode.setAttribute("aria-label",Ne)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(Ne,Fe){this.view.layout(Ne,Fe)}setSelection(Ne,Fe){for(const ne of Ne)if(ne<0||ne>=this.length)throw new _(this.user,`Invalid index ${ne}`);this.selection.set(Ne,Fe)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(Ne=>this.view.element(Ne))}setAnchor(Ne){if(typeof Ne=="undefined"){this.anchor.set([]);return}if(Ne<0||Ne>=this.length)throw new _(this.user,`Invalid index ${Ne}`);this.anchor.set([Ne])}getAnchor(){return(0,T.Xh)(this.anchor.get(),void 0)}getAnchorElement(){const Ne=this.getAnchor();return typeof Ne=="undefined"?void 0:this.element(Ne)}setFocus(Ne,Fe){for(const ne of Ne)if(ne<0||ne>=this.length)throw new _(this.user,`Invalid index ${ne}`);this.focus.set(Ne,Fe)}focusNext(Ne=1,Fe=!1,ne,Q){if(this.length===0)return;const ie=this.focus.get(),xe=this.findNextIndex(ie.length>0?ie[0]+Ne:0,Fe,Q);xe>-1&&this.setFocus([xe],ne)}focusPrevious(Ne=1,Fe=!1,ne,Q){if(this.length===0)return;const ie=this.focus.get(),xe=this.findPreviousIndex(ie.length>0?ie[0]-Ne:0,Fe,Q);xe>-1&&this.setFocus([xe],ne)}focusNextPage(Ne,Fe){return b(this,void 0,void 0,function*(){let ne=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);ne=ne===0?0:ne-1;const Q=this.view.element(ne),ie=this.getFocusedElements()[0];if(ie!==Q){const xe=this.findPreviousIndex(ne,!1,Fe);xe>-1&&ie!==this.view.element(xe)?this.setFocus([xe],Ne):this.setFocus([ne],Ne)}else{const xe=this.view.getScrollTop();this.view.setScrollTop(xe+this.view.renderHeight-this.view.elementHeight(ne)),this.view.getScrollTop()!==xe&&(this.setFocus([]),yield(0,B.Vs)(0),yield this.focusNextPage(Ne,Fe))}})}focusPreviousPage(Ne,Fe){return b(this,void 0,void 0,function*(){let ne;const Q=this.view.getScrollTop();Q===0?ne=this.view.indexAt(Q):ne=this.view.indexAfter(Q-1);const ie=this.view.element(ne),xe=this.getFocusedElements()[0];if(xe!==ie){const be=this.findNextIndex(ne,!1,Fe);be>-1&&xe!==this.view.element(be)?this.setFocus([be],Ne):this.setFocus([ne],Ne)}else{const be=Q;this.view.setScrollTop(Q-this.view.renderHeight),this.view.getScrollTop()!==be&&(this.setFocus([]),yield(0,B.Vs)(0),yield this.focusPreviousPage(Ne,Fe))}})}focusLast(Ne,Fe){if(this.length===0)return;const ne=this.findPreviousIndex(this.length-1,!1,Fe);ne>-1&&this.setFocus([ne],Ne)}focusFirst(Ne,Fe){this.focusNth(0,Ne,Fe)}focusNth(Ne,Fe,ne){if(this.length===0)return;const Q=this.findNextIndex(Ne,!1,ne);Q>-1&&this.setFocus([Q],Fe)}findNextIndex(Ne,Fe=!1,ne){for(let Q=0;Q<this.length;Q++){if(Ne>=this.length&&!Fe)return-1;if(Ne=Ne%this.length,!ne||ne(this.element(Ne)))return Ne;Ne++}return-1}findPreviousIndex(Ne,Fe=!1,ne){for(let Q=0;Q<this.length;Q++){if(Ne<0&&!Fe)return-1;if(Ne=(this.length+Ne%this.length)%this.length,!ne||ne(this.element(Ne)))return Ne;Ne--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(Ne=>this.view.element(Ne))}reveal(Ne,Fe){if(Ne<0||Ne>=this.length)throw new _(this.user,`Invalid index ${Ne}`);const ne=this.view.getScrollTop(),Q=this.view.elementTop(Ne),ie=this.view.elementHeight(Ne);if((0,E.hj)(Fe)){const xe=ie-this.view.renderHeight;this.view.setScrollTop(xe*(0,c.uZ)(Fe,0,1)+Q)}else{const xe=Q+ie,be=ne+this.view.renderHeight;Q<ne&&xe>=be||(Q<ne||xe>=be&&ie>=this.view.renderHeight?this.view.setScrollTop(Q):xe>=be&&this.view.setScrollTop(xe-this.view.renderHeight))}}getRelativeTop(Ne){if(Ne<0||Ne>=this.length)throw new _(this.user,`Invalid index ${Ne}`);const Fe=this.view.getScrollTop(),ne=this.view.elementTop(Ne),Q=this.view.elementHeight(Ne);if(ne<Fe||ne+Q>Fe+this.view.renderHeight)return null;const ie=Q-this.view.renderHeight;return Math.abs((Fe-ne)/ie)}getHTMLElement(){return this.view.domNode}style(Ne){this.styleController.style(Ne)}toListEvent({indexes:Ne,browserEvent:Fe}){return{indexes:Ne,elements:Ne.map(ne=>this.view.element(ne)),browserEvent:Fe}}_onFocusChange(){const Ne=this.focus.get();this.view.domNode.classList.toggle("element-focused",Ne.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var Ne;const Fe=this.focus.get();if(Fe.length>0){let ne;((Ne=this.accessibilityProvider)===null||Ne===void 0?void 0:Ne.getActiveDescendantId)&&(ne=this.accessibilityProvider.getActiveDescendantId(this.view.element(Fe[0]))),this.view.domNode.setAttribute("aria-activedescendant",ne||this.view.getElementDomId(Fe[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const Ne=this.selection.get();this.view.domNode.classList.toggle("selection-none",Ne.length===0),this.view.domNode.classList.toggle("selection-single",Ne.length===1),this.view.domNode.classList.toggle("selection-multiple",Ne.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}N([x.H],qe.prototype,"onDidChangeFocus",null),N([x.H],qe.prototype,"onDidChangeSelection",null),N([x.H],qe.prototype,"onContextMenu",null),N([x.H],qe.prototype,"onKeyDown",null),N([x.H],qe.prototype,"onDidFocus",null)},96542:function(Tt,me,a){"use strict";a.d(me,{S:function(){return p}});const p="monaco-mouse-cursor-text"},73098:function(Tt,me,a){"use strict";a.d(me,{l:function(){return v},g:function(){return N}});var p=a(65321),d=a(4850),z=a(10553),O=a(15393),S=a(49898),j=a(4669),T=a(9917),B=a(1432),F=function(b,I,k,W){var q=arguments.length,re=q<3?I:W===null?W=Object.getOwnPropertyDescriptor(I,k):W,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(b,I,k,W);else for(var pe=b.length-1;pe>=0;pe--)(de=b[pe])&&(re=(q<3?de(re):q>3?de(I,k,re):de(I,k))||re);return q>3&&re&&Object.defineProperty(I,k,re),re};let x=!1;var v;(function(b){b.North="north",b.South="south",b.East="east",b.West="west"})(v||(v={}));let g=4;const D=new j.Q5;let c=300;const C=new j.Q5;class M{constructor(){this.disposables=new T.SL}get onPointerMove(){return this.disposables.add(new d.Y(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new d.Y(window,"mouseup")).event}dispose(){this.disposables.dispose()}}F([S.H],M.prototype,"onPointerMove",null),F([S.H],M.prototype,"onPointerUp",null);class E{constructor(I){this.el=I,this.disposables=new T.SL}get onPointerMove(){return this.disposables.add(new d.Y(this.el,z.t.Change)).event}get onPointerUp(){return this.disposables.add(new d.Y(this.el,z.t.End)).event}dispose(){this.disposables.dispose()}}F([S.H],E.prototype,"onPointerMove",null),F([S.H],E.prototype,"onPointerUp",null);class _{constructor(I){this.factory=I}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}F([S.H],_.prototype,"onPointerMove",null),F([S.H],_.prototype,"onPointerUp",null);const L="pointer-events-disabled";class N extends T.JT{constructor(I,k,W){super();this.hoverDelay=c,this.hoverDelayer=this._register(new O.vp(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new j.Q5),this._onDidStart=this._register(new j.Q5),this._onDidChange=this._register(new j.Q5),this._onDidReset=this._register(new j.Q5),this._onDidEnd=this._register(new j.Q5),this.orthogonalStartSashDisposables=this._register(new T.SL),this.orthogonalStartDragHandleDisposables=this._register(new T.SL),this.orthogonalEndSashDisposables=this._register(new T.SL),this.orthogonalEndDragHandleDisposables=this._register(new T.SL),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=(0,p.R3)(I,(0,p.$)(".monaco-sash")),W.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${W.orthogonalEdge}`),B.dz&&this.el.classList.add("mac");const q=this._register(new d.Y(this.el,"mousedown")).event;this._register(q(K=>this.onPointerStart(K,new M),this));const re=this._register(new d.Y(this.el,"dblclick")).event;this._register(re(this.onPointerDoublePress,this));const de=this._register(new d.Y(this.el,"mouseenter")).event;this._register(de(()=>N.onMouseEnter(this)));const pe=this._register(new d.Y(this.el,"mouseleave")).event;this._register(pe(()=>N.onMouseLeave(this))),this._register(z.o.addTarget(this.el));const ae=j.ju.map(this._register(new d.Y(this.el,z.t.Start)).event,K=>{var U;return Object.assign(Object.assign({},K),{target:(U=K.initialTarget)!==null&&U!==void 0?U:null})});this._register(ae(K=>this.onPointerStart(K,new E(this.el)),this));const ue=this._register(new d.Y(this.el,z.t.Tap)).event,te=j.ju.map(j.ju.filter(j.ju.debounce(ue,(K,U)=>{var ee;return{event:U,count:((ee=K==null?void 0:K.count)!==null&&ee!==void 0?ee:0)+1}},250),({count:K})=>K===2),({event:K})=>{var U;return Object.assign(Object.assign({},K),{target:(U=K.initialTarget)!==null&&U!==void 0?U:null})});this._register(te(this.onPointerDoublePress,this)),typeof W.size=="number"?(this.size=W.size,W.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=g,this._register(D.event(K=>{this.size=K,this.layout()}))),this._register(C.event(K=>this.hoverDelay=K)),this.layoutProvider=k,this.orthogonalStartSash=W.orthogonalStartSash,this.orthogonalEndSash=W.orthogonalEndSash,this.orientation=W.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",x),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(I){this._state!==I&&(this.el.classList.toggle("disabled",I===0),this.el.classList.toggle("minimum",I===1),this.el.classList.toggle("maximum",I===2),this._state=I,this.onDidEnablementChange.fire(I))}set orthogonalStartSash(I){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),I){const k=W=>{this.orthogonalStartDragHandleDisposables.clear(),W!==0&&(this._orthogonalStartDragHandle=(0,p.R3)(this.el,(0,p.$)(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add((0,T.OF)(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new d.Y(this._orthogonalStartDragHandle,"mouseenter")).event(()=>N.onMouseEnter(I),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new d.Y(this._orthogonalStartDragHandle,"mouseleave")).event(()=>N.onMouseLeave(I),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(I.onDidEnablementChange.event(k,this)),k(I.state)}this._orthogonalStartSash=I}set orthogonalEndSash(I){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),I){const k=W=>{this.orthogonalEndDragHandleDisposables.clear(),W!==0&&(this._orthogonalEndDragHandle=(0,p.R3)(this.el,(0,p.$)(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add((0,T.OF)(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new d.Y(this._orthogonalEndDragHandle,"mouseenter")).event(()=>N.onMouseEnter(I),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new d.Y(this._orthogonalEndDragHandle,"mouseleave")).event(()=>N.onMouseLeave(I),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(I.onDidEnablementChange.event(k,this)),k(I.state)}this._orthogonalEndSash=I}onPointerStart(I,k){p.zB.stop(I);let W=!1;if(!I.__orthogonalSashEvent){const X=this.getOrthogonalSash(I);X&&(W=!0,I.__orthogonalSashEvent=!0,X.onPointerStart(I,new _(k)))}if(this.linkedSash&&!I.__linkedSashEvent&&(I.__linkedSashEvent=!0,this.linkedSash.onPointerStart(I,new _(k))),!this.state)return;const q=(0,p.H$)("iframe");for(const X of q)X.classList.add(L);const re=I.pageX,de=I.pageY,pe=I.altKey,ae={startX:re,currentX:re,startY:de,currentY:de,altKey:pe};this.el.classList.add("active"),this._onDidStart.fire(ae);const ue=(0,p.dS)(this.el),te=()=>{let X="";W?X="all-scroll":this.orientation===1?this.state===1?X="s-resize":this.state===2?X="n-resize":X=B.dz?"row-resize":"ns-resize":this.state===1?X="e-resize":this.state===2?X="w-resize":X=B.dz?"col-resize":"ew-resize",ue.textContent=`* { cursor: ${X} !important; }`},K=new T.SL;te(),W||this.onDidEnablementChange.event(te,null,K);const U=X=>{p.zB.stop(X,!1);const le={startX:re,currentX:X.pageX,startY:de,currentY:X.pageY,altKey:pe};this._onDidChange.fire(le)},ee=X=>{p.zB.stop(X,!1),this.el.removeChild(ue),this.el.classList.remove("active"),this._onDidEnd.fire(),K.dispose();for(const le of q)le.classList.remove(L)};k.onPointerMove(U,null,K),k.onPointerUp(ee,null,K),K.add(k)}onPointerDoublePress(I){const k=this.getOrthogonalSash(I);k&&k._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(I,k=!1){I.el.classList.contains("active")?(I.hoverDelayer.cancel(),I.el.classList.add("hover")):I.hoverDelayer.trigger(()=>I.el.classList.add("hover"),I.hoverDelay).then(void 0,()=>{}),!k&&I.linkedSash&&N.onMouseEnter(I.linkedSash,!0)}static onMouseLeave(I,k=!1){I.hoverDelayer.cancel(),I.el.classList.remove("hover"),!k&&I.linkedSash&&N.onMouseLeave(I.linkedSash,!0)}clearSashHoverState(){N.onMouseLeave(this)}layout(){if(this.orientation===0){const I=this.layoutProvider;this.el.style.left=I.getVerticalSashLeft(this)-this.size/2+"px",I.getVerticalSashTop&&(this.el.style.top=I.getVerticalSashTop(this)+"px"),I.getVerticalSashHeight&&(this.el.style.height=I.getVerticalSashHeight(this)+"px")}else{const I=this.layoutProvider;this.el.style.top=I.getHorizontalSashTop(this)-this.size/2+"px",I.getHorizontalSashLeft&&(this.el.style.left=I.getHorizontalSashLeft(this)+"px"),I.getHorizontalSashWidth&&(this.el.style.width=I.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(I){if(!(!I.target||!(I.target instanceof HTMLElement))&&I.target.classList.contains("orthogonal-drag-handle"))return I.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}},9802:function(Tt,me,a){"use strict";a.d(me,{s$:function(){return ue},NB:function(){return pe},$Z:function(){return ae}});var p=a(16268),d=a(65321),z=a(38626),O=a(23938),S=a(57974),j=a(93794),T=a(15393);const B=11;class F extends j.${constructor(U){super();this._onActivate=U.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=U.bgWidth+"px",this.bgDomNode.style.height=U.bgHeight+"px",typeof U.top!="undefined"&&(this.bgDomNode.style.top="0px"),typeof U.left!="undefined"&&(this.bgDomNode.style.left="0px"),typeof U.bottom!="undefined"&&(this.bgDomNode.style.bottom="0px"),typeof U.right!="undefined"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=U.className,this.domNode.classList.add(...U.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=B+"px",this.domNode.style.height=B+"px",typeof U.top!="undefined"&&(this.domNode.style.top=U.top+"px"),typeof U.left!="undefined"&&(this.domNode.style.left=U.left+"px"),typeof U.bottom!="undefined"&&(this.domNode.style.bottom=U.bottom+"px"),typeof U.right!="undefined"&&(this.domNode.style.right=U.right+"px"),this._mouseMoveMonitor=this._register(new S.Z),this.onmousedown(this.bgDomNode,ee=>this._arrowMouseDown(ee)),this.onmousedown(this.domNode,ee=>this._arrowMouseDown(ee)),this._mousedownRepeatTimer=this._register(new T.zh),this._mousedownScheduleRepeatTimer=this._register(new T._F)}_arrowMouseDown(U){const ee=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(ee,200),this._mouseMoveMonitor.startMonitoring(U.target,U.buttons,S.e,X=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),U.preventDefault()}}var x=a(9917);class v extends x.JT{constructor(U,ee,X){super();this._visibility=U,this._visibleClassName=ee,this._invisibleClassName=X,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new T._F)}setVisibility(U){this._visibility!==U&&(this._visibility=U,this._updateShouldBeVisible())}setShouldBeVisible(U){this._rawShouldBeVisible=U,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const U=this._applyVisibilitySetting();this._shouldBeVisible!==U&&(this._shouldBeVisible=U,this.ensureVisibility())}setIsNeeded(U){this._isNeeded!==U&&(this._isNeeded=U,this.ensureVisibility())}setDomNode(U){this._domNode=U,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(U){this._revealTimer.cancel(),!!this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(U?" fade":"")))}}var g=a(1432);const D=140;class c extends j.${constructor(U){super();this._lazyRender=U.lazyRender,this._host=U.host,this._scrollable=U.scrollable,this._scrollByPage=U.scrollByPage,this._scrollbarState=U.scrollbarState,this._visibilityController=this._register(new v(U.visibility,"visible scrollbar "+U.extraScrollbarClassName,"invisible scrollbar "+U.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new S.Z),this._shouldRender=!0,this.domNode=(0,z.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,ee=>this._domNodeMouseDown(ee))}_createArrow(U){const ee=this._register(new F(U));this.domNode.domNode.appendChild(ee.bgDomNode),this.domNode.domNode.appendChild(ee.domNode)}_createSlider(U,ee,X,le){this.slider=(0,z.X)(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(U),this.slider.setLeft(ee),typeof X=="number"&&this.slider.setWidth(X),typeof le=="number"&&this.slider.setHeight(le),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,oe=>{oe.leftButton&&(oe.preventDefault(),this._sliderMouseDown(oe,()=>{}))}),this.onclick(this.slider.domNode,oe=>{oe.leftButton&&oe.stopPropagation()})}_onElementSize(U){return this._scrollbarState.setVisibleSize(U)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(U){return this._scrollbarState.setScrollSize(U)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(U){return this._scrollbarState.setScrollPosition(U)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){!this._shouldRender||(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(U){U.target===this.domNode.domNode&&this._onMouseDown(U)}delegateMouseDown(U){const ee=this.domNode.domNode.getClientRects()[0].top,X=ee+this._scrollbarState.getSliderPosition(),le=ee+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),oe=this._sliderMousePosition(U);X<=oe&&oe<=le?U.leftButton&&(U.preventDefault(),this._sliderMouseDown(U,()=>{})):this._onMouseDown(U)}_onMouseDown(U){let ee,X;if(U.target===this.domNode.domNode&&typeof U.browserEvent.offsetX=="number"&&typeof U.browserEvent.offsetY=="number")ee=U.browserEvent.offsetX,X=U.browserEvent.offsetY;else{const oe=d.i(this.domNode.domNode);ee=U.posx-oe.left,X=U.posy-oe.top}const le=this._mouseDownRelativePosition(ee,X);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(le):this._scrollbarState.getDesiredScrollPositionFromOffset(le)),U.leftButton&&(U.preventDefault(),this._sliderMouseDown(U,()=>{}))}_sliderMouseDown(U,ee){const X=this._sliderMousePosition(U),le=this._sliderOrthogonalMousePosition(U),oe=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(U.target,U.buttons,S.e,Ce=>{const ye=this._sliderOrthogonalMousePosition(Ce),ke=Math.abs(ye-le);if(g.ED&&ke>D){this._setDesiredScrollPositionNow(oe.getScrollPosition());return}const ge=this._sliderMousePosition(Ce)-X;this._setDesiredScrollPositionNow(oe.getDesiredScrollPositionFromDelta(ge))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),ee()}),this._host.onDragStart()}_setDesiredScrollPositionNow(U){const ee={};this.writeScrollPosition(ee,U),this._scrollable.setScrollPositionNow(ee)}updateScrollbarSize(U){this._updateScrollbarSize(U),this._scrollbarState.setScrollbarSize(U),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const C=20;class M{constructor(U,ee,X,le,oe,Ce){this._scrollbarSize=Math.round(ee),this._oppositeScrollbarSize=Math.round(X),this._arrowSize=Math.round(U),this._visibleSize=le,this._scrollSize=oe,this._scrollPosition=Ce,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new M(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(U){const ee=Math.round(U);return this._visibleSize!==ee?(this._visibleSize=ee,this._refreshComputedValues(),!0):!1}setScrollSize(U){const ee=Math.round(U);return this._scrollSize!==ee?(this._scrollSize=ee,this._refreshComputedValues(),!0):!1}setScrollPosition(U){const ee=Math.round(U);return this._scrollPosition!==ee?(this._scrollPosition=ee,this._refreshComputedValues(),!0):!1}setScrollbarSize(U){this._scrollbarSize=Math.round(U)}setOppositeScrollbarSize(U){this._oppositeScrollbarSize=Math.round(U)}static _computeValues(U,ee,X,le,oe){const Ce=Math.max(0,X-U),ye=Math.max(0,Ce-2*ee),ke=le>0&&le>X;if(!ke)return{computedAvailableSize:Math.round(Ce),computedIsNeeded:ke,computedSliderSize:Math.round(ye),computedSliderRatio:0,computedSliderPosition:0};const Te=Math.round(Math.max(C,Math.floor(X*ye/le))),ge=(ye-Te)/(le-X),we=oe*ge;return{computedAvailableSize:Math.round(Ce),computedIsNeeded:ke,computedSliderSize:Math.round(Te),computedSliderRatio:ge,computedSliderPosition:Math.round(we)}}_refreshComputedValues(){const U=M._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=U.computedAvailableSize,this._computedIsNeeded=U.computedIsNeeded,this._computedSliderSize=U.computedSliderSize,this._computedSliderRatio=U.computedSliderRatio,this._computedSliderPosition=U.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(U){if(!this._computedIsNeeded)return 0;const ee=U-this._arrowSize-this._computedSliderSize/2;return Math.round(ee/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(U){if(!this._computedIsNeeded)return 0;const ee=U-this._arrowSize;let X=this._scrollPosition;return ee<this._computedSliderPosition?X-=this._visibleSize:X+=this._visibleSize,X}getDesiredScrollPositionFromDelta(U){if(!this._computedIsNeeded)return 0;const ee=this._computedSliderPosition+U;return Math.round(ee/this._computedSliderRatio)}}var E=a(73046);class _ extends c{constructor(U,ee,X){const le=U.getScrollDimensions(),oe=U.getCurrentScrollPosition();super({lazyRender:ee.lazyRender,host:X,scrollbarState:new M(ee.horizontalHasArrows?ee.arrowSize:0,ee.horizontal===2?0:ee.horizontalScrollbarSize,ee.vertical===2?0:ee.verticalScrollbarSize,le.width,le.scrollWidth,oe.scrollLeft),visibility:ee.horizontal,extraScrollbarClassName:"horizontal",scrollable:U,scrollByPage:ee.scrollByPage});if(ee.horizontalHasArrows){const Ce=(ee.arrowSize-B)/2,ye=(ee.horizontalScrollbarSize-B)/2;this._createArrow({className:"scra",icon:E.lA.scrollbarButtonLeft,top:ye,left:Ce,bottom:void 0,right:void 0,bgWidth:ee.arrowSize,bgHeight:ee.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new O.q(null,1,0))}),this._createArrow({className:"scra",icon:E.lA.scrollbarButtonRight,top:ye,left:void 0,bottom:void 0,right:Ce,bgWidth:ee.arrowSize,bgHeight:ee.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new O.q(null,-1,0))})}this._createSlider(Math.floor((ee.horizontalScrollbarSize-ee.horizontalSliderSize)/2),0,void 0,ee.horizontalSliderSize)}_updateSlider(U,ee){this.slider.setWidth(U),this.slider.setLeft(ee)}_renderDomNode(U,ee){this.domNode.setWidth(U),this.domNode.setHeight(ee),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(U){return this._shouldRender=this._onElementScrollSize(U.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(U.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(U.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(U,ee){return U}_sliderMousePosition(U){return U.posx}_sliderOrthogonalMousePosition(U){return U.posy}_updateScrollbarSize(U){this.slider.setHeight(U)}writeScrollPosition(U,ee){U.scrollLeft=ee}updateOptions(U){this.updateScrollbarSize(U.horizontal===2?0:U.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(U.vertical===2?0:U.verticalScrollbarSize),this._visibilityController.setVisibility(U.horizontal),this._scrollByPage=U.scrollByPage}}class L extends c{constructor(U,ee,X){const le=U.getScrollDimensions(),oe=U.getCurrentScrollPosition();super({lazyRender:ee.lazyRender,host:X,scrollbarState:new M(ee.verticalHasArrows?ee.arrowSize:0,ee.vertical===2?0:ee.verticalScrollbarSize,0,le.height,le.scrollHeight,oe.scrollTop),visibility:ee.vertical,extraScrollbarClassName:"vertical",scrollable:U,scrollByPage:ee.scrollByPage});if(ee.verticalHasArrows){const Ce=(ee.arrowSize-B)/2,ye=(ee.verticalScrollbarSize-B)/2;this._createArrow({className:"scra",icon:E.lA.scrollbarButtonUp,top:Ce,left:ye,bottom:void 0,right:void 0,bgWidth:ee.verticalScrollbarSize,bgHeight:ee.arrowSize,onActivate:()=>this._host.onMouseWheel(new O.q(null,0,1))}),this._createArrow({className:"scra",icon:E.lA.scrollbarButtonDown,top:void 0,left:ye,bottom:Ce,right:void 0,bgWidth:ee.verticalScrollbarSize,bgHeight:ee.arrowSize,onActivate:()=>this._host.onMouseWheel(new O.q(null,0,-1))})}this._createSlider(0,Math.floor((ee.verticalScrollbarSize-ee.verticalSliderSize)/2),ee.verticalSliderSize,void 0)}_updateSlider(U,ee){this.slider.setHeight(U),this.slider.setTop(ee)}_renderDomNode(U,ee){this.domNode.setWidth(ee),this.domNode.setHeight(U),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(U){return this._shouldRender=this._onElementScrollSize(U.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(U.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(U.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(U,ee){return ee}_sliderMousePosition(U){return U.posy}_sliderOrthogonalMousePosition(U){return U.posx}_updateScrollbarSize(U){this.slider.setWidth(U)}writeScrollPosition(U,ee){U.scrollTop=ee}updateOptions(U){this.updateScrollbarSize(U.vertical===2?0:U.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(U.vertical),this._scrollByPage=U.scrollByPage}}var N=a(4669),b=a(76633);const I=500,k=50,W=!0;class q{constructor(U,ee,X){this.timestamp=U,this.deltaX=ee,this.deltaY=X,this.score=0}}class re{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let U=1,ee=0,X=1,le=this._rear;do{const oe=le===this._front?U:Math.pow(2,-X);if(U-=oe,ee+=this._memory[le].score*oe,le===this._front)break;le=(this._capacity+le-1)%this._capacity,X++}while(!0);return ee<=.5}accept(U,ee,X){const le=new q(U,ee,X);le.score=this._computeScore(le),this._front===-1&&this._rear===-1?(this._memory[0]=le,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=le)}_computeScore(U){if(Math.abs(U.deltaX)>0&&Math.abs(U.deltaY)>0)return 1;let ee=.5;const X=this._front===-1&&this._rear===-1?null:this._memory[this._rear];return(!this._isAlmostInt(U.deltaX)||!this._isAlmostInt(U.deltaY))&&(ee+=.25),Math.min(Math.max(ee,0),1)}_isAlmostInt(U){return Math.abs(Math.round(U)-U)<.01}}re.INSTANCE=new re;class de extends j.${constructor(U,ee,X){super();this._onScroll=this._register(new N.Q5),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new N.Q5),U.style.overflow="hidden",this._options=te(ee),this._scrollable=X,this._register(this._scrollable.onScroll(oe=>{this._onWillScroll.fire(oe),this._onDidScroll(oe),this._onScroll.fire(oe)}));const le={onMouseWheel:oe=>this._onMouseWheel(oe),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new L(this._scrollable,this._options,le)),this._horizontalScrollbar=this._register(new _(this._scrollable,this._options,le)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(U),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=(0,z.X)(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=(0,z.X)(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=(0,z.X)(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,oe=>this._onMouseOver(oe)),this.onnonbubblingmouseout(this._listenOnDomNode,oe=>this._onMouseOut(oe)),this._hideTimeout=this._register(new T._F),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=(0,x.B9)(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(U){this._verticalScrollbar.delegateMouseDown(U)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(U){this._scrollable.setScrollDimensions(U,!1)}updateClassName(U){this._options.className=U,g.dz&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(U){typeof U.handleMouseWheel!="undefined"&&(this._options.handleMouseWheel=U.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof U.mouseWheelScrollSensitivity!="undefined"&&(this._options.mouseWheelScrollSensitivity=U.mouseWheelScrollSensitivity),typeof U.fastScrollSensitivity!="undefined"&&(this._options.fastScrollSensitivity=U.fastScrollSensitivity),typeof U.scrollPredominantAxis!="undefined"&&(this._options.scrollPredominantAxis=U.scrollPredominantAxis),typeof U.horizontal!="undefined"&&(this._options.horizontal=U.horizontal),typeof U.vertical!="undefined"&&(this._options.vertical=U.vertical),typeof U.horizontalScrollbarSize!="undefined"&&(this._options.horizontalScrollbarSize=U.horizontalScrollbarSize),typeof U.verticalScrollbarSize!="undefined"&&(this._options.verticalScrollbarSize=U.verticalScrollbarSize),typeof U.scrollByPage!="undefined"&&(this._options.scrollByPage=U.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(U){if(this._mouseWheelToDispose.length>0!==U&&(this._mouseWheelToDispose=(0,x.B9)(this._mouseWheelToDispose),U)){const X=le=>{this._onMouseWheel(new O.q(le))};this._mouseWheelToDispose.push(d.nm(this._listenOnDomNode,d.tw.MOUSE_WHEEL,X,{passive:!1}))}}_onMouseWheel(U){const ee=re.INSTANCE;if(W){const oe=window.devicePixelRatio/(0,p.getZoomFactor)();g.ED||g.IJ?ee.accept(Date.now(),U.deltaX/oe,U.deltaY/oe):ee.accept(Date.now(),U.deltaX,U.deltaY)}let X=!1;if(U.deltaY||U.deltaX){let oe=U.deltaY*this._options.mouseWheelScrollSensitivity,Ce=U.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(oe)>=Math.abs(Ce)?Ce=0:oe=0),this._options.flipAxes&&([oe,Ce]=[Ce,oe]);const ye=!g.dz&&U.browserEvent&&U.browserEvent.shiftKey;(this._options.scrollYToX||ye)&&!Ce&&(Ce=oe,oe=0),U.browserEvent&&U.browserEvent.altKey&&(Ce=Ce*this._options.fastScrollSensitivity,oe=oe*this._options.fastScrollSensitivity);const ke=this._scrollable.getFutureScrollPosition();let Te={};if(oe){const ge=k*oe,we=ke.scrollTop-(ge<0?Math.floor(ge):Math.ceil(ge));this._verticalScrollbar.writeScrollPosition(Te,we)}if(Ce){const ge=k*Ce,we=ke.scrollLeft-(ge<0?Math.floor(ge):Math.ceil(ge));this._horizontalScrollbar.writeScrollPosition(Te,we)}Te=this._scrollable.validateScrollPosition(Te),(ke.scrollLeft!==Te.scrollLeft||ke.scrollTop!==Te.scrollTop)&&(W&&this._options.mouseWheelSmoothScroll&&ee.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(Te):this._scrollable.setScrollPositionNow(Te),X=!0)}let le=X;!le&&this._options.alwaysConsumeMouseWheel&&(le=!0),!le&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(le=!0),le&&(U.preventDefault(),U.stopPropagation())}_onDidScroll(U){this._shouldRender=this._horizontalScrollbar.onDidScroll(U)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(U)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(!!this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const U=this._scrollable.getCurrentScrollPosition(),ee=U.scrollTop>0,X=U.scrollLeft>0,le=X?" left":"",oe=ee?" top":"",Ce=X||ee?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${le}`),this._topShadowDomNode.setClassName(`shadow${oe}`),this._topLeftShadowDomNode.setClassName(`shadow${Ce}${oe}${le}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(U){this._mouseIsOver=!1,this._hide()}_onMouseOver(U){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),I)}}class pe extends de{constructor(U,ee){ee=ee||{},ee.mouseWheelSmoothScroll=!1;const X=new b.Rm({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:le=>d.jL(le)});super(U,ee,X);this._register(X)}setScrollPosition(U){this._scrollable.setScrollPositionNow(U)}}class ae extends de{constructor(U,ee,X){super(U,ee,X)}setScrollPosition(U){U.reuseAnimation?this._scrollable.setScrollPositionSmooth(U,U.reuseAnimation):this._scrollable.setScrollPositionNow(U)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class ue extends de{constructor(U,ee){ee=ee||{},ee.mouseWheelSmoothScroll=!1;const X=new b.Rm({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:le=>d.jL(le)});super(U,ee,X);this._register(X),this._element=U,this.onScroll(le=>{le.scrollTopChanged&&(this._element.scrollTop=le.scrollTop),le.scrollLeftChanged&&(this._element.scrollLeft=le.scrollLeft)}),this.scanDomNode()}setScrollPosition(U){this._scrollable.setScrollPositionNow(U)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function te(K){const U={lazyRender:typeof K.lazyRender!="undefined"?K.lazyRender:!1,className:typeof K.className!="undefined"?K.className:"",useShadows:typeof K.useShadows!="undefined"?K.useShadows:!0,handleMouseWheel:typeof K.handleMouseWheel!="undefined"?K.handleMouseWheel:!0,flipAxes:typeof K.flipAxes!="undefined"?K.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof K.consumeMouseWheelIfScrollbarIsNeeded!="undefined"?K.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof K.alwaysConsumeMouseWheel!="undefined"?K.alwaysConsumeMouseWheel:!1,scrollYToX:typeof K.scrollYToX!="undefined"?K.scrollYToX:!1,mouseWheelScrollSensitivity:typeof K.mouseWheelScrollSensitivity!="undefined"?K.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof K.fastScrollSensitivity!="undefined"?K.fastScrollSensitivity:5,scrollPredominantAxis:typeof K.scrollPredominantAxis!="undefined"?K.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof K.mouseWheelSmoothScroll!="undefined"?K.mouseWheelSmoothScroll:!0,arrowSize:typeof K.arrowSize!="undefined"?K.arrowSize:11,listenOnDomNode:typeof K.listenOnDomNode!="undefined"?K.listenOnDomNode:null,horizontal:typeof K.horizontal!="undefined"?K.horizontal:1,horizontalScrollbarSize:typeof K.horizontalScrollbarSize!="undefined"?K.horizontalScrollbarSize:10,horizontalSliderSize:typeof K.horizontalSliderSize!="undefined"?K.horizontalSliderSize:0,horizontalHasArrows:typeof K.horizontalHasArrows!="undefined"?K.horizontalHasArrows:!1,vertical:typeof K.vertical!="undefined"?K.vertical:1,verticalScrollbarSize:typeof K.verticalScrollbarSize!="undefined"?K.verticalScrollbarSize:10,verticalHasArrows:typeof K.verticalHasArrows!="undefined"?K.verticalHasArrows:!1,verticalSliderSize:typeof K.verticalSliderSize!="undefined"?K.verticalSliderSize:0,scrollByPage:typeof K.scrollByPage!="undefined"?K.scrollByPage:!1};return U.horizontalSliderSize=typeof K.horizontalSliderSize!="undefined"?K.horizontalSliderSize:U.horizontalScrollbarSize,U.verticalSliderSize=typeof K.verticalSliderSize!="undefined"?K.verticalSliderSize:U.verticalScrollbarSize,g.dz&&(U.className+=" mac"),U}},23937:function(Tt,me,a){"use strict";a.d(me,{M:function(){return M},z:function(){return E}});var p=a(65321),d=a(73098),z=a(9802),O=a(9488),S=a(41264),j=a(4669),T=a(9917),B=a(59870),F=a(76633),x=a(98401);const v={separatorBorder:S.Il.transparent};class g{constructor(L,N,b,I){this.container=L,this.view=N,this.disposable=I,this._cachedVisibleSize=void 0,typeof b=="number"?(this._size=b,this._cachedVisibleSize=void 0,L.classList.add("visible")):(this._size=0,this._cachedVisibleSize=b.cachedVisibleSize)}set size(L){this._size=L}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize=="undefined"}setVisible(L,N){L!==this.visible&&(L?(this.size=(0,B.uZ)(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof N=="number"?N:this.size,this.size=0),this.container.classList.toggle("visible",L),this.view.setVisible&&this.view.setVisible(L))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(L){this.container.style.pointerEvents=L?"":"none"}layout(L,N){this.layoutContainer(L),this.view.layout(this.size,L,N)}dispose(){return this.disposable.dispose(),this.view}}class D extends g{layoutContainer(L){this.container.style.top=`${L}px`,this.container.style.height=`${this.size}px`}}class c extends g{layoutContainer(L){this.container.style.left=`${L}px`,this.container.style.width=`${this.size}px`}}var C;(function(_){_[_.Idle=0]="Idle",_[_.Busy=1]="Busy"})(C||(C={}));var M;(function(_){_.Distribute={type:"distribute"};function L(b){return{type:"split",index:b}}_.Split=L;function N(b){return{type:"invisible",cachedVisibleSize:b}}_.Invisible=N})(M||(M={}));class E extends T.JT{constructor(L,N={}){var b,I,k,W,q;super();this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=C.Idle,this._onDidSashChange=this._register(new j.Q5),this._onDidSashReset=this._register(new j.Q5),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(b=N.orientation)!==null&&b!==void 0?b:0,this.inverseAltBehavior=(I=N.inverseAltBehavior)!==null&&I!==void 0?I:!1,this.proportionalLayout=(k=N.proportionalLayout)!==null&&k!==void 0?k:!0,this.getSashOrthogonalSize=N.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),L.appendChild(this.el),this.sashContainer=(0,p.R3)(this.el,(0,p.$)(".sash-container")),this.viewContainer=(0,p.$)(".split-view-container"),this.scrollable=new F.Rm({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:p.jL}),this.scrollableElement=this._register(new z.$Z(this.viewContainer,{vertical:this.orientation===0?(W=N.scrollbarVisibility)!==null&&W!==void 0?W:1:2,horizontal:this.orientation===1?(q=N.scrollbarVisibility)!==null&&q!==void 0?q:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(re=>{this.viewContainer.scrollTop=re.scrollTop,this.viewContainer.scrollLeft=re.scrollLeft})),(0,p.R3)(this.el,this.scrollableElement.getDomNode()),this.style(N.styles||v),N.descriptor&&(this.size=N.descriptor.size,N.descriptor.views.forEach((re,de)=>{const pe=x.o8(re.visible)||re.visible?re.size:{type:"invisible",cachedVisibleSize:re.size},ae=re.view;this.doAddView(ae,pe,de,!0)}),this.contentSize=this.viewItems.reduce((re,de)=>re+de.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(L){for(const N of this.sashItems)N.sash.orthogonalStartSash=L;this._orthogonalStartSash=L}set orthogonalEndSash(L){for(const N of this.sashItems)N.sash.orthogonalEndSash=L;this._orthogonalEndSash=L}set startSnappingEnabled(L){this._startSnappingEnabled!==L&&(this._startSnappingEnabled=L,this.updateSashEnablement())}set endSnappingEnabled(L){this._endSnappingEnabled!==L&&(this._endSnappingEnabled=L,this.updateSashEnablement())}style(L){L.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",L.separatorBorder.toString()))}addView(L,N,b=this.viewItems.length,I){this.doAddView(L,N,b,I)}layout(L,N){const b=Math.max(this.size,this.contentSize);if(this.size=L,this.layoutContext=N,this.proportions)for(let I=0;I<this.viewItems.length;I++){const k=this.viewItems[I];k.size=(0,B.uZ)(Math.round(this.proportions[I]*L),k.minimumSize,k.maximumSize)}else{const I=(0,O.w6)(this.viewItems.length),k=I.filter(q=>this.viewItems[q].priority===1),W=I.filter(q=>this.viewItems[q].priority===2);this.resize(this.viewItems.length-1,L-b,void 0,k,W)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(L=>L.size/this.contentSize))}onSashStart({sash:L,start:N,alt:b}){for(const q of this.viewItems)q.enabled=!1;const I=this.sashItems.findIndex(q=>q.sash===L),k=(0,T.F8)((0,p.nm)(document.body,"keydown",q=>W(this.sashDragState.current,q.altKey)),(0,p.nm)(document.body,"keyup",()=>W(this.sashDragState.current,!1))),W=(q,re)=>{const de=this.viewItems.map(K=>K.size);let pe=Number.NEGATIVE_INFINITY,ae=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(re=!re),re)if(I===this.sashItems.length-1){const U=this.viewItems[I];pe=(U.minimumSize-U.size)/2,ae=(U.maximumSize-U.size)/2}else{const U=this.viewItems[I+1];pe=(U.size-U.maximumSize)/2,ae=(U.size-U.minimumSize)/2}let ue,te;if(!re){const K=(0,O.w6)(I,-1),U=(0,O.w6)(I+1,this.viewItems.length),ee=K.reduce((ge,we)=>ge+(this.viewItems[we].minimumSize-de[we]),0),X=K.reduce((ge,we)=>ge+(this.viewItems[we].viewMaximumSize-de[we]),0),le=U.length===0?Number.POSITIVE_INFINITY:U.reduce((ge,we)=>ge+(de[we]-this.viewItems[we].minimumSize),0),oe=U.length===0?Number.NEGATIVE_INFINITY:U.reduce((ge,we)=>ge+(de[we]-this.viewItems[we].viewMaximumSize),0),Ce=Math.max(ee,oe),ye=Math.min(le,X),ke=this.findFirstSnapIndex(K),Te=this.findFirstSnapIndex(U);if(typeof ke=="number"){const ge=this.viewItems[ke],we=Math.floor(ge.viewMinimumSize/2);ue={index:ke,limitDelta:ge.visible?Ce-we:Ce+we,size:ge.size}}if(typeof Te=="number"){const ge=this.viewItems[Te],we=Math.floor(ge.viewMinimumSize/2);te={index:Te,limitDelta:ge.visible?ye+we:ye-we,size:ge.size}}}this.sashDragState={start:q,current:q,index:I,sizes:de,minDelta:pe,maxDelta:ae,alt:re,snapBefore:ue,snapAfter:te,disposable:k}};W(N,b)}onSashChange({current:L}){const{index:N,start:b,sizes:I,alt:k,minDelta:W,maxDelta:q,snapBefore:re,snapAfter:de}=this.sashDragState;this.sashDragState.current=L;const pe=L-b,ae=this.resize(N,pe,I,void 0,void 0,W,q,re,de);if(k){const ue=N===this.sashItems.length-1,te=this.viewItems.map(oe=>oe.size),K=ue?N:N+1,U=this.viewItems[K],ee=U.size-U.maximumSize,X=U.size-U.minimumSize,le=ue?N-1:N+1;this.resize(le,-ae,te,void 0,void 0,ee,X)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(L){this._onDidSashChange.fire(L),this.sashDragState.disposable.dispose(),this.saveProportions();for(const N of this.viewItems)N.enabled=!0}onViewChange(L,N){const b=this.viewItems.indexOf(L);b<0||b>=this.viewItems.length||(N=typeof N=="number"?N:L.size,N=(0,B.uZ)(N,L.minimumSize,L.maximumSize),this.inverseAltBehavior&&b>0?(this.resize(b-1,Math.floor((L.size-N)/2)),this.distributeEmptySpace(),this.layoutViews()):(L.size=N,this.relayout([b],void 0)))}resizeView(L,N){if(this.state!==C.Idle)throw new Error("Cant modify splitview");if(this.state=C.Busy,L<0||L>=this.viewItems.length)return;const b=(0,O.w6)(this.viewItems.length).filter(q=>q!==L),I=[...b.filter(q=>this.viewItems[q].priority===1),L],k=b.filter(q=>this.viewItems[q].priority===2),W=this.viewItems[L];N=Math.round(N),N=(0,B.uZ)(N,W.minimumSize,Math.min(W.maximumSize,this.size)),W.size=N,this.relayout(I,k),this.state=C.Idle}distributeViewSizes(){const L=[];let N=0;for(const q of this.viewItems)q.maximumSize-q.minimumSize>0&&(L.push(q),N+=q.size);const b=Math.floor(N/L.length);for(const q of L)q.size=(0,B.uZ)(b,q.minimumSize,q.maximumSize);const I=(0,O.w6)(this.viewItems.length),k=I.filter(q=>this.viewItems[q].priority===1),W=I.filter(q=>this.viewItems[q].priority===2);this.relayout(k,W)}getViewSize(L){return L<0||L>=this.viewItems.length?-1:this.viewItems[L].size}doAddView(L,N,b=this.viewItems.length,I){if(this.state!==C.Idle)throw new Error("Cant modify splitview");this.state=C.Busy;const k=(0,p.$)(".split-view-view");b===this.viewItems.length?this.viewContainer.appendChild(k):this.viewContainer.insertBefore(k,this.viewContainer.children.item(b));const W=L.onDidChange(ue=>this.onViewChange(pe,ue)),q=(0,T.OF)(()=>this.viewContainer.removeChild(k)),re=(0,T.F8)(W,q);let de;typeof N=="number"?de=N:N.type==="split"?de=this.getViewSize(N.index)/2:N.type==="invisible"?de={cachedVisibleSize:N.cachedVisibleSize}:de=L.minimumSize;const pe=this.orientation===0?new D(k,L,de,re):new c(k,L,de,re);if(this.viewItems.splice(b,0,pe),this.viewItems.length>1){let ue={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const te=this.orientation===0?new d.g(this.sashContainer,{getHorizontalSashTop:ge=>this.getSashPosition(ge),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},ue),{orientation:1})):new d.g(this.sashContainer,{getVerticalSashLeft:ge=>this.getSashPosition(ge),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},ue),{orientation:0})),K=this.orientation===0?ge=>({sash:te,start:ge.startY,current:ge.currentY,alt:ge.altKey}):ge=>({sash:te,start:ge.startX,current:ge.currentX,alt:ge.altKey}),ee=j.ju.map(te.onDidStart,K)(this.onSashStart,this),le=j.ju.map(te.onDidChange,K)(this.onSashChange,this),Ce=j.ju.map(te.onDidEnd,()=>this.sashItems.findIndex(ge=>ge.sash===te))(this.onSashEnd,this),ye=te.onDidReset(()=>{const ge=this.sashItems.findIndex(Oe=>Oe.sash===te),we=(0,O.w6)(ge,-1),ze=(0,O.w6)(ge+1,this.viewItems.length),Qe=this.findFirstSnapIndex(we),Pe=this.findFirstSnapIndex(ze);typeof Qe=="number"&&!this.viewItems[Qe].visible||typeof Pe=="number"&&!this.viewItems[Pe].visible||this._onDidSashReset.fire(ge)}),ke=(0,T.F8)(ee,le,Ce,ye,te),Te={sash:te,disposable:ke};this.sashItems.splice(b-1,0,Te)}k.appendChild(L.element);let ae;typeof N!="number"&&N.type==="split"&&(ae=[N.index]),I||this.relayout([b],ae),this.state=C.Idle,!I&&typeof N!="number"&&N.type==="distribute"&&this.distributeViewSizes()}relayout(L,N){const b=this.viewItems.reduce((I,k)=>I+k.size,0);this.resize(this.viewItems.length-1,this.size-b,void 0,L,N),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(L,N,b=this.viewItems.map(pe=>pe.size),I,k,W=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY,re,de){if(L<0||L>=this.viewItems.length)return 0;const pe=(0,O.w6)(L,-1),ae=(0,O.w6)(L+1,this.viewItems.length);if(k)for(const Te of k)(0,O.zI)(pe,Te),(0,O.zI)(ae,Te);if(I)for(const Te of I)(0,O.al)(pe,Te),(0,O.al)(ae,Te);const ue=pe.map(Te=>this.viewItems[Te]),te=pe.map(Te=>b[Te]),K=ae.map(Te=>this.viewItems[Te]),U=ae.map(Te=>b[Te]),ee=pe.reduce((Te,ge)=>Te+(this.viewItems[ge].minimumSize-b[ge]),0),X=pe.reduce((Te,ge)=>Te+(this.viewItems[ge].maximumSize-b[ge]),0),le=ae.length===0?Number.POSITIVE_INFINITY:ae.reduce((Te,ge)=>Te+(b[ge]-this.viewItems[ge].minimumSize),0),oe=ae.length===0?Number.NEGATIVE_INFINITY:ae.reduce((Te,ge)=>Te+(b[ge]-this.viewItems[ge].maximumSize),0),Ce=Math.max(ee,oe,W),ye=Math.min(le,X,q);let ke=!1;if(re){const Te=this.viewItems[re.index],ge=N>=re.limitDelta;ke=ge!==Te.visible,Te.setVisible(ge,re.size)}if(!ke&&de){const Te=this.viewItems[de.index],ge=N<de.limitDelta;ke=ge!==Te.visible,Te.setVisible(ge,de.size)}if(ke)return this.resize(L,N,b,I,k,W,q);N=(0,B.uZ)(N,Ce,ye);for(let Te=0,ge=N;Te<ue.length;Te++){const we=ue[Te],ze=(0,B.uZ)(te[Te]+ge,we.minimumSize,we.maximumSize);ge-=ze-te[Te],we.size=ze}for(let Te=0,ge=N;Te<K.length;Te++){const we=K[Te],ze=(0,B.uZ)(U[Te]-ge,we.minimumSize,we.maximumSize);ge+=ze-U[Te],we.size=ze}return N}distributeEmptySpace(L){const N=this.viewItems.reduce((q,re)=>q+re.size,0);let b=this.size-N;const I=(0,O.w6)(this.viewItems.length-1,-1),k=I.filter(q=>this.viewItems[q].priority===1),W=I.filter(q=>this.viewItems[q].priority===2);for(const q of W)(0,O.zI)(I,q);for(const q of k)(0,O.al)(I,q);typeof L=="number"&&(0,O.al)(I,L);for(let q=0;b!==0&&q<I.length;q++){const re=this.viewItems[I[q]],de=(0,B.uZ)(re.size+b,re.minimumSize,re.maximumSize);b-=de-re.size,re.size=de}}layoutViews(){this.contentSize=this.viewItems.reduce((N,b)=>N+b.size,0);let L=0;for(const N of this.viewItems)N.layout(L,this.layoutContext),L+=N.size;this.sashItems.forEach(N=>N.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let L=!1;const N=this.viewItems.map(re=>L=re.size-re.minimumSize>0||L);L=!1;const b=this.viewItems.map(re=>L=re.maximumSize-re.size>0||L),I=[...this.viewItems].reverse();L=!1;const k=I.map(re=>L=re.size-re.minimumSize>0||L).reverse();L=!1;const W=I.map(re=>L=re.maximumSize-re.size>0||L).reverse();let q=0;for(let re=0;re<this.sashItems.length;re++){const{sash:de}=this.sashItems[re];q+=this.viewItems[re].size;const ae=!(N[re]&&W[re+1]),ue=!(b[re]&&k[re+1]);if(ae&&ue){const te=(0,O.w6)(re,-1),K=(0,O.w6)(re+1,this.viewItems.length),U=this.findFirstSnapIndex(te),ee=this.findFirstSnapIndex(K),X=typeof U=="number"&&!this.viewItems[U].visible,le=typeof ee=="number"&&!this.viewItems[ee].visible;X&&k[re]&&(q>0||this.startSnappingEnabled)?de.state=1:le&&N[re]&&(q<this.contentSize||this.endSnappingEnabled)?de.state=2:de.state=0}else ae&&!ue?de.state=1:!ae&&ue?de.state=2:de.state=3}}getSashPosition(L){let N=0;for(let b=0;b<this.sashItems.length;b++)if(N+=this.viewItems[b].size,this.sashItems[b].sash===L)return N;return 0}findFirstSnapIndex(L){for(const N of L){const b=this.viewItems[N];if(!!b.visible&&b.snap)return N}for(const N of L){const b=this.viewItems[N];if(b.visible&&b.maximumSize-b.minimumSize>0)return;if(!b.visible&&b.snap)return N}}dispose(){super.dispose(),(0,T.B9)(this.viewItems),this.viewItems=[],this.sashItems.forEach(L=>L.disposable.dispose()),this.sashItems=[]}}},93794:function(Tt,me,a){"use strict";a.d(me,{$:function(){return j}});var p=a(65321),d=a(59069),z=a(23938),O=a(10553),S=a(9917);class j extends S.JT{onclick(B,F){this._register(p.nm(B,p.tw.CLICK,x=>F(new z.n(x))))}onmousedown(B,F){this._register(p.nm(B,p.tw.MOUSE_DOWN,x=>F(new z.n(x))))}onmouseover(B,F){this._register(p.nm(B,p.tw.MOUSE_OVER,x=>F(new z.n(x))))}onnonbubblingmouseout(B,F){this._register(p.j_(B,x=>F(new z.n(x))))}onkeydown(B,F){this._register(p.nm(B,p.tw.KEY_DOWN,x=>F(new d.y(x))))}onkeyup(B,F){this._register(p.nm(B,p.tw.KEY_UP,x=>F(new d.y(x))))}oninput(B,F){this._register(p.nm(B,p.tw.INPUT,F))}onblur(B,F){this._register(p.nm(B,p.tw.BLUR,F))}onfocus(B,F){this._register(p.nm(B,p.tw.FOCUS,F))}ignoreGesture(B){O.o.ignoreTarget(B)}}},74741:function(Tt,me,a){"use strict";a.d(me,{aU:function(){return S},Wi:function(){return j},Z0:function(){return T},wY:function(){return B},eZ:function(){return F}});var p=a(4669),d=a(9917),z=a(63580),O=function(x,v,g,D){function c(C){return C instanceof g?C:new g(function(M){M(C)})}return new(g||(g=Promise))(function(C,M){function E(N){try{L(D.next(N))}catch(b){M(b)}}function _(N){try{L(D.throw(N))}catch(b){M(b)}}function L(N){N.done?C(N.value):c(N.value).then(E,_)}L((D=D.apply(x,v||[])).next())})};class S extends d.JT{constructor(v,g="",D="",c=!0,C){super();this._onDidChange=this._register(new p.Q5),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=v,this._label=g,this._cssClass=D,this._enabled=c,this._actionCallback=C}get id(){return this._id}get label(){return this._label}set label(v){this._setLabel(v)}_setLabel(v){this._label!==v&&(this._label=v,this._onDidChange.fire({label:v}))}get tooltip(){return this._tooltip||""}set tooltip(v){this._setTooltip(v)}_setTooltip(v){this._tooltip!==v&&(this._tooltip=v,this._onDidChange.fire({tooltip:v}))}get class(){return this._cssClass}set class(v){this._setClass(v)}_setClass(v){this._cssClass!==v&&(this._cssClass=v,this._onDidChange.fire({class:v}))}get enabled(){return this._enabled}set enabled(v){this._setEnabled(v)}_setEnabled(v){this._enabled!==v&&(this._enabled=v,this._onDidChange.fire({enabled:v}))}get checked(){return this._checked}set checked(v){this._setChecked(v)}_setChecked(v){this._checked!==v&&(this._checked=v,this._onDidChange.fire({checked:v}))}run(v,g){return O(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(v))})}}class j extends d.JT{constructor(){super(...arguments);this._onBeforeRun=this._register(new p.Q5),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new p.Q5),this.onDidRun=this._onDidRun.event}run(v,g){return O(this,void 0,void 0,function*(){if(!v.enabled)return;this._onBeforeRun.fire({action:v});let D;try{yield this.runAction(v,g)}catch(c){D=c}this._onDidRun.fire({action:v,error:D})})}runAction(v,g){return O(this,void 0,void 0,function*(){yield v.run(g)})}}class T extends S{constructor(v){super(T.ID,v,v?"separator text":"separator");this.checked=!1,this.enabled=!1}}T.ID="vs.actions.separator";class B{constructor(v,g,D,c){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=v,this.label=g,this.class=c,this._actions=D}get actions(){return this._actions}dispose(){}run(){return O(this,void 0,void 0,function*(){})}}class F extends S{constructor(){super(F.ID,z.N("submenu.empty","(empty)"),void 0,!1)}}F.ID="vs.actions.empty"},9488:function(Tt,me,a){"use strict";a.d(me,{Gb:function(){return p},JH:function(){return d},fS:function(){return z},ry:function(){return O},lG:function(){return S},HW:function(){return j},vM:function(){return T},kX:function(){return B},XY:function(){return F},Of:function(){return x},EB:function(){return v},dF:function(){return g},Xh:function(){return c},xH:function(){return C},w6:function(){return M},Zv:function(){return E},zI:function(){return _},al:function(){return L},_2:function(){return N},db:function(){return I},tT:function(){return W},fv:function(){return q},Dc:function(){return re},jV:function(){return de},VJ:function(){return pe},H9:function(){return ae}});function p(ue,te=0){return ue[ue.length-(1+te)]}function d(ue){if(ue.length===0)throw new Error("Invalid tail call");return[ue.slice(0,ue.length-1),ue[ue.length-1]]}function z(ue,te,K=(U,ee)=>U===ee){if(ue===te)return!0;if(!ue||!te||ue.length!==te.length)return!1;for(let U=0,ee=ue.length;U<ee;U++)if(!K(ue[U],te[U]))return!1;return!0}function O(ue,te,K){let U=0,ee=ue.length-1;for(;U<=ee;){const X=(U+ee)/2|0,le=K(ue[X],te);if(le<0)U=X+1;else if(le>0)ee=X-1;else return X}return-(U+1)}function S(ue,te){let K=0,U=ue.length;if(U===0)return 0;for(;K<U;){const ee=Math.floor((K+U)/2);te(ue[ee])?U=ee:K=ee+1}return K}function j(ue,te,K){if(ue=ue|0,ue>=te.length)throw new TypeError("invalid index");let U=te[Math.floor(te.length*Math.random())],ee=[],X=[],le=[];for(let oe of te){const Ce=K(oe,U);Ce<0?ee.push(oe):Ce>0?X.push(oe):le.push(oe)}return ue<ee.length?j(ue,ee,K):ue<ee.length+le.length?le[0]:j(ue-(ee.length+le.length),X,K)}function T(ue,te){const K=[];let U;for(const ee of ue.slice(0).sort(te))!U||te(U[0],ee)!==0?(U=[ee],K.push(U)):U.push(ee);return K}function B(ue){return ue.filter(te=>!!te)}function F(ue){return!Array.isArray(ue)||ue.length===0}function x(ue){return Array.isArray(ue)&&ue.length>0}function v(ue,te=K=>K){const K=new Set;return ue.filter(U=>{const ee=te(U);return K.has(ee)?!1:(K.add(ee),!0)})}function g(ue,te){const K=D(ue,te);if(K!==-1)return ue[K]}function D(ue,te){for(let K=ue.length-1;K>=0;K--){const U=ue[K];if(te(U))return K}return-1}function c(ue,te){return ue.length>0?ue[0]:te}function C(ue){return[].concat(...ue)}function M(ue,te){let K=typeof te=="number"?ue:0;typeof te=="number"?K=ue:(K=0,te=ue);const U=[];if(K<=te)for(let ee=K;ee<te;ee++)U.push(ee);else for(let ee=K;ee>te;ee--)U.push(ee);return U}function E(ue,te,K){const U=ue.slice(0,te),ee=ue.slice(te);return U.concat(K,ee)}function _(ue,te){const K=ue.indexOf(te);K>-1&&(ue.splice(K,1),ue.unshift(te))}function L(ue,te){const K=ue.indexOf(te);K>-1&&(ue.splice(K,1),ue.push(te))}function N(ue){return Array.isArray(ue)?ue:[ue]}function b(ue,te,K){const U=k(ue,te),ee=ue.length,X=K.length;ue.length=ee+X;for(let le=ee-1;le>=U;le--)ue[le+X]=ue[le];for(let le=0;le<X;le++)ue[le+U]=K[le]}function I(ue,te,K,U){const ee=k(ue,te),X=ue.splice(ee,K);return b(ue,ee,U),X}function k(ue,te){return te<0?Math.max(te+ue.length,0):Math.min(te,ue.length)}function W(ue,te){return(K,U)=>te(ue(K),ue(U))}const q=(ue,te)=>ue-te;function re(ue,te){if(ue.length===0)return;let K=ue[0];for(let U=1;U<ue.length;U++){const ee=ue[U];te(ee,K)>0&&(K=ee)}return K}function de(ue,te){if(ue.length===0)return;let K=ue[0];for(let U=1;U<ue.length;U++){const ee=ue[U];te(ee,K)>=0&&(K=ee)}return K}function pe(ue,te){return re(ue,(K,U)=>-te(K,U))}class ae{constructor(te){this.items=te,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(te){let K=this.firstIdx;for(;K<this.items.length&&te(this.items[K]);)K++;const U=K===this.firstIdx?null:this.items.slice(this.firstIdx,K);return this.firstIdx=K,U}takeFromEndWhile(te){let K=this.lastIdx;for(;K>=0&&te(this.items[K]);)K--;const U=K===this.lastIdx?null:this.items.slice(K+1,this.lastIdx+1);return this.lastIdx=K,U}peek(){return this.items[this.firstIdx]}dequeue(){const te=this.items[this.firstIdx];return this.firstIdx++,te}takeCount(te){const K=this.items.slice(this.firstIdx,this.firstIdx+te);return this.firstIdx+=te,K}}},35146:function(Tt,me,a){"use strict";a.d(me,{ok:function(){return p}});function p(d,z){if(!d)throw new Error(z?`Assertion failed (${z})`:"Assertion Failed")}},15393:function(Tt,me,a){"use strict";a.d(me,{J8:function(){return B},PG:function(){return F},eP:function(){return x},ne:function(){return c},vp:function(){return C},rH:function(){return M},Vs:function(){return E},Vg:function(){return _},Ps:function(){return L},_F:function(){return N},zh:function(){return b},pY:function(){return I},To:function(){return k},Ue:function(){return W},CR:function(){return q},jT:function(){return re},Aq:function(){return de},zS:function(){return ae}});var p=a(71050),d=a(17301),z=a(4669),O=a(9917),S=a(1432),j=function(ue,te,K,U){function ee(X){return X instanceof K?X:new K(function(le){le(X)})}return new(K||(K=Promise))(function(X,le){function oe(ke){try{ye(U.next(ke))}catch(Te){le(Te)}}function Ce(ke){try{ye(U.throw(ke))}catch(Te){le(Te)}}function ye(ke){ke.done?X(ke.value):ee(ke.value).then(oe,Ce)}ye((U=U.apply(ue,te||[])).next())})},T=function(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te=ue[Symbol.asyncIterator],K;return te?te.call(ue):(ue=typeof __values=="function"?__values(ue):ue[Symbol.iterator](),K={},U("next"),U("throw"),U("return"),K[Symbol.asyncIterator]=function(){return this},K);function U(X){K[X]=ue[X]&&function(le){return new Promise(function(oe,Ce){le=ue[X](le),ee(oe,Ce,le.done,le.value)})}}function ee(X,le,oe,Ce){Promise.resolve(Ce).then(function(ye){X({value:ye,done:oe})},le)}};function B(ue){return!!ue&&typeof ue.then=="function"}function F(ue){const te=new p.A,K=ue(te.token),U=new Promise((ee,X)=>{const le=te.token.onCancellationRequested(()=>{le.dispose(),te.dispose(),X(new d.FU)});Promise.resolve(K).then(oe=>{le.dispose(),te.dispose(),ee(oe)},oe=>{le.dispose(),te.dispose(),X(oe)})});return new class{cancel(){te.cancel()}then(ee,X){return U.then(ee,X)}catch(ee){return this.then(void 0,ee)}finally(ee){return U.finally(ee)}}}function x(ue,te,K){return new Promise((U,ee)=>{const X=te.onCancellationRequested(()=>{X.dispose(),U(K)});ue.then(U,ee).finally(()=>X.dispose())})}class v{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(te){if(this.activePromise){if(this.queuedPromiseFactory=te,!this.queuedPromise){const K=()=>{this.queuedPromise=null;const U=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,U};this.queuedPromise=new Promise(U=>{this.activePromise.then(K,K).then(U)})}return new Promise((K,U)=>{this.queuedPromise.then(K,U)})}return this.activePromise=te(),new Promise((K,U)=>{this.activePromise.then(ee=>{this.activePromise=null,K(ee)},ee=>{this.activePromise=null,U(ee)})})}}const g=(ue,te)=>{let K=!0;const U=setTimeout(()=>{K=!1,te()},ue);return{isTriggered:()=>K,dispose:()=>{clearTimeout(U),K=!1}}},D=ue=>{let te=!0;return queueMicrotask(()=>{te&&(te=!1,ue())}),{isTriggered:()=>te,dispose:()=>{te=!1}}},c=Symbol("MicrotaskDelay");class C{constructor(te){this.defaultDelay=te,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(te,K=this.defaultDelay){this.task=te,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((ee,X)=>{this.doResolve=ee,this.doReject=X}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const ee=this.task;return this.task=null,ee()}}));const U=()=>{var ee;this.deferred=null,(ee=this.doResolve)===null||ee===void 0||ee.call(this,null)};return this.deferred=K===c?D(U):g(K,U),this.completionPromise}isTriggered(){var te;return!!((te=this.deferred)===null||te===void 0?void 0:te.isTriggered())}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new d.FU),this.completionPromise=null)}cancelTimeout(){var te;(te=this.deferred)===null||te===void 0||te.dispose(),this.deferred=null}dispose(){this.cancel()}}class M{constructor(te){this.delayer=new C(te),this.throttler=new v}trigger(te,K){return this.delayer.trigger(()=>this.throttler.queue(te),K)}dispose(){this.delayer.dispose()}}function E(ue,te){return te?new Promise((K,U)=>{const ee=setTimeout(()=>{X.dispose(),K()},ue),X=te.onCancellationRequested(()=>{clearTimeout(ee),X.dispose(),U(new d.FU)})}):F(K=>E(ue,K))}function _(ue,te=0){const K=setTimeout(ue,te);return(0,O.OF)(()=>clearTimeout(K))}function L(ue,te=U=>!!U,K=null){let U=0;const ee=ue.length,X=()=>{if(U>=ee)return Promise.resolve(K);const le=ue[U++];return Promise.resolve(le()).then(Ce=>te(Ce)?Promise.resolve(Ce):X())};return X()}class N{constructor(te,K){this._token=-1,typeof te=="function"&&typeof K=="number"&&this.setIfNotSet(te,K)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(te,K){this.cancel(),this._token=setTimeout(()=>{this._token=-1,te()},K)}setIfNotSet(te,K){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,te()},K))}}class b{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(te,K){this.cancel(),this._token=setInterval(()=>{te()},K)}}class I{constructor(te,K){this.timeoutToken=-1,this.runner=te,this.timeout=K,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(te=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,te)}get delay(){return this.timeout}set delay(te){this.timeout=te}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let k;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?k=ue=>{(0,S.fn)(()=>{if(te)return;const K=Date.now()+15;ue(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,K-Date.now())}}))});let te=!1;return{dispose(){te||(te=!0)}}}:k=(ue,te)=>{const K=requestIdleCallback(ue,typeof te=="number"?{timeout:te}:void 0);let U=!1;return{dispose(){U||(U=!0,cancelIdleCallback(K))}}}})();class W{constructor(te){this._didRun=!1,this._executor=()=>{try{this._value=te()}catch(K){this._error=K}finally{this._didRun=!0}},this._handle=k(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class q{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((te,K)=>{this.completeCallback=te,this.errorCallback=K})}get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}complete(te){return new Promise(K=>{this.completeCallback(te),this.resolved=!0,K()})}cancel(){new Promise(te=>{this.errorCallback(new d.FU),this.rejected=!0,te()})}}var re;(function(ue){function te(U){return j(this,void 0,void 0,function*(){let ee;const X=yield Promise.all(U.map(le=>le.then(oe=>oe,oe=>{ee||(ee=oe)})));if(typeof ee!="undefined")throw ee;return X})}ue.settled=te;function K(U){return new Promise((ee,X)=>j(this,void 0,void 0,function*(){try{yield U(ee,X)}catch(le){X(le)}}))}ue.withAsyncBody=K})(re||(re={}));class de{constructor(te){this._state=0,this._results=[],this._error=null,this._onStateChanged=new z.Q5,queueMicrotask(()=>j(this,void 0,void 0,function*(){const K={emitOne:U=>this.emitOne(U),emitMany:U=>this.emitMany(U),reject:U=>this.reject(U)};try{yield Promise.resolve(te(K)),this.resolve()}catch(U){this.reject(U)}finally{K.emitOne=void 0,K.emitMany=void 0,K.reject=void 0}}))}static fromArray(te){return new de(K=>{K.emitMany(te)})}static fromPromise(te){return new de(K=>j(this,void 0,void 0,function*(){K.emitMany(yield te)}))}static fromPromises(te){return new de(K=>j(this,void 0,void 0,function*(){yield Promise.all(te.map(U=>j(this,void 0,void 0,function*(){return K.emitOne(yield U)})))}))}static merge(te){return new de(K=>j(this,void 0,void 0,function*(){yield Promise.all(te.map(U=>{var ee,X;return j(this,void 0,void 0,function*(){var le,oe;try{for(ee=T(U);X=yield ee.next(),!X.done;){const Ce=X.value;K.emitOne(Ce)}}catch(Ce){le={error:Ce}}finally{try{X&&!X.done&&(oe=ee.return)&&(yield oe.call(ee))}finally{if(le)throw le.error}}})}))}))}[Symbol.asyncIterator](){let te=0;return{next:()=>j(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(te<this._results.length)return{done:!1,value:this._results[te++]};if(this._state===1)return{done:!0,value:void 0};yield z.ju.toPromise(this._onStateChanged.event)}while(!0)})}}static map(te,K){return new de(U=>j(this,void 0,void 0,function*(){var ee,X;try{for(var le=T(te),oe;oe=yield le.next(),!oe.done;){const Ce=oe.value;U.emitOne(K(Ce))}}catch(Ce){ee={error:Ce}}finally{try{oe&&!oe.done&&(X=le.return)&&(yield X.call(le))}finally{if(ee)throw ee.error}}}))}map(te){return de.map(this,te)}static filter(te,K){return new de(U=>j(this,void 0,void 0,function*(){var ee,X;try{for(var le=T(te),oe;oe=yield le.next(),!oe.done;){const Ce=oe.value;K(Ce)&&U.emitOne(Ce)}}catch(Ce){ee={error:Ce}}finally{try{oe&&!oe.done&&(X=le.return)&&(yield X.call(le))}finally{if(ee)throw ee.error}}}))}filter(te){return de.filter(this,te)}static coalesce(te){return de.filter(te,K=>!!K)}coalesce(){return de.coalesce(this)}static toPromise(te){var K,U,ee,X;return j(this,void 0,void 0,function*(){const le=[];try{for(K=T(te);U=yield K.next(),!U.done;){const oe=U.value;le.push(oe)}}catch(oe){ee={error:oe}}finally{try{U&&!U.done&&(X=K.return)&&(yield X.call(K))}finally{if(ee)throw ee.error}}return le})}toPromise(){return de.toPromise(this)}emitOne(te){this._state===0&&(this._results.push(te),this._onStateChanged.fire())}emitMany(te){this._state===0&&(this._results=this._results.concat(te),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(te){this._state===0&&(this._state=2,this._error=te,this._onStateChanged.fire())}}de.EMPTY=de.fromArray([]);class pe extends de{constructor(te,K){super(K);this._source=te}cancel(){this._source.cancel()}}function ae(ue){const te=new p.A,K=ue(te.token);return new pe(te,U=>j(this,void 0,void 0,function*(){var ee,X;const le=te.token.onCancellationRequested(()=>{le.dispose(),te.dispose(),U.reject(new d.FU)});try{try{for(var oe=T(K),Ce;Ce=yield oe.next(),!Ce.done;){const ye=Ce.value;if(te.token.isCancellationRequested)return;U.emitOne(ye)}}catch(ye){ee={error:ye}}finally{try{Ce&&!Ce.done&&(X=oe.return)&&(yield X.call(oe))}finally{if(ee)throw ee.error}}le.dispose(),te.dispose()}catch(ye){le.dispose(),te.dispose(),U.reject(ye)}}))}},53060:function(Tt,me,a){"use strict";a.d(me,{KN:function(){return O},mP:function(){return S},oq:function(){return j},Ag:function(){return T},T4:function(){return B},Q$:function(){return F},Cg:function(){return x}});var p=a(34976).Buffer;const d=typeof p!="undefined";let z;class O{constructor(g){this.buffer=g,this.byteLength=this.buffer.byteLength}static wrap(g){return d&&!p.isBuffer(g)&&(g=p.from(g.buffer,g.byteOffset,g.byteLength)),new O(g)}toString(){return d?this.buffer.toString():(z||(z=new TextDecoder),z.decode(this.buffer))}}function S(v,g){return v[g+0]<<0>>>0|v[g+1]<<8>>>0}function j(v,g,D){v[D+0]=g&255,g=g>>>8,v[D+1]=g&255}function T(v,g){return v[g]*Math.pow(2,24)+v[g+1]*Math.pow(2,16)+v[g+2]*Math.pow(2,8)+v[g+3]}function B(v,g,D){v[D+3]=g,g=g>>>8,v[D+2]=g,g=g>>>8,v[D+1]=g,g=g>>>8,v[D]=g}function F(v,g){return v[g]}function x(v,g,D){v[D]=g}},71050:function(Tt,me,a){"use strict";a.d(me,{T:function(){return z},A:function(){return S}});var p=a(4669);const d=Object.freeze(function(j,T){const B=setTimeout(j.bind(T),0);return{dispose(){clearTimeout(B)}}});var z;(function(j){function T(B){return B===j.None||B===j.Cancelled||B instanceof O?!0:!B||typeof B!="object"?!1:typeof B.isCancellationRequested=="boolean"&&typeof B.onCancellationRequested=="function"}j.isCancellationToken=T,j.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:p.ju.None}),j.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:d})})(z||(z={}));class O{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?d:(this._emitter||(this._emitter=new p.Q5),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class S{constructor(T){this._token=void 0,this._parentListener=void 0,this._parentListener=T&&T.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new O),this._token}cancel(){this._token?this._token instanceof O&&this._token.cancel():this._token=z.Cancelled}dispose(T=!1){T&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof O&&this._token.dispose():this._token=z.None}}},73046:function(Tt,me,a){"use strict";a.d(me,{JL:function(){return p},lA:function(){return d},dT:function(){return z}});function p(O){return O?O.replace(/\$\((.*?)\)/g,(S,j)=>` ${j} `).trim():""}class d{constructor(S,j,T){this.id=S,this.definition=j,this.description=T,d._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return d._allCodicons}}d._allCodicons=[],d.add=new d("add",{fontCharacter:"\\ea60"}),d.plus=new d("plus",d.add.definition),d.gistNew=new d("gist-new",d.add.definition),d.repoCreate=new d("repo-create",d.add.definition),d.lightbulb=new d("lightbulb",{fontCharacter:"\\ea61"}),d.lightBulb=new d("light-bulb",{fontCharacter:"\\ea61"}),d.repo=new d("repo",{fontCharacter:"\\ea62"}),d.repoDelete=new d("repo-delete",{fontCharacter:"\\ea62"}),d.gistFork=new d("gist-fork",{fontCharacter:"\\ea63"}),d.repoForked=new d("repo-forked",{fontCharacter:"\\ea63"}),d.gitPullRequest=new d("git-pull-request",{fontCharacter:"\\ea64"}),d.gitPullRequestAbandoned=new d("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),d.recordKeys=new d("record-keys",{fontCharacter:"\\ea65"}),d.keyboard=new d("keyboard",{fontCharacter:"\\ea65"}),d.tag=new d("tag",{fontCharacter:"\\ea66"}),d.tagAdd=new d("tag-add",{fontCharacter:"\\ea66"}),d.tagRemove=new d("tag-remove",{fontCharacter:"\\ea66"}),d.person=new d("person",{fontCharacter:"\\ea67"}),d.personFollow=new d("person-follow",{fontCharacter:"\\ea67"}),d.personOutline=new d("person-outline",{fontCharacter:"\\ea67"}),d.personFilled=new d("person-filled",{fontCharacter:"\\ea67"}),d.gitBranch=new d("git-branch",{fontCharacter:"\\ea68"}),d.gitBranchCreate=new d("git-branch-create",{fontCharacter:"\\ea68"}),d.gitBranchDelete=new d("git-branch-delete",{fontCharacter:"\\ea68"}),d.sourceControl=new d("source-control",{fontCharacter:"\\ea68"}),d.mirror=new d("mirror",{fontCharacter:"\\ea69"}),d.mirrorPublic=new d("mirror-public",{fontCharacter:"\\ea69"}),d.star=new d("star",{fontCharacter:"\\ea6a"}),d.starAdd=new d("star-add",{fontCharacter:"\\ea6a"}),d.starDelete=new d("star-delete",{fontCharacter:"\\ea6a"}),d.starEmpty=new d("star-empty",{fontCharacter:"\\ea6a"}),d.comment=new d("comment",{fontCharacter:"\\ea6b"}),d.commentAdd=new d("comment-add",{fontCharacter:"\\ea6b"}),d.alert=new d("alert",{fontCharacter:"\\ea6c"}),d.warning=new d("warning",{fontCharacter:"\\ea6c"}),d.search=new d("search",{fontCharacter:"\\ea6d"}),d.searchSave=new d("search-save",{fontCharacter:"\\ea6d"}),d.logOut=new d("log-out",{fontCharacter:"\\ea6e"}),d.signOut=new d("sign-out",{fontCharacter:"\\ea6e"}),d.logIn=new d("log-in",{fontCharacter:"\\ea6f"}),d.signIn=new d("sign-in",{fontCharacter:"\\ea6f"}),d.eye=new d("eye",{fontCharacter:"\\ea70"}),d.eyeUnwatch=new d("eye-unwatch",{fontCharacter:"\\ea70"}),d.eyeWatch=new d("eye-watch",{fontCharacter:"\\ea70"}),d.circleFilled=new d("circle-filled",{fontCharacter:"\\ea71"}),d.primitiveDot=new d("primitive-dot",{fontCharacter:"\\ea71"}),d.closeDirty=new d("close-dirty",{fontCharacter:"\\ea71"}),d.debugBreakpoint=new d("debug-breakpoint",{fontCharacter:"\\ea71"}),d.debugBreakpointDisabled=new d("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),d.debugHint=new d("debug-hint",{fontCharacter:"\\ea71"}),d.primitiveSquare=new d("primitive-square",{fontCharacter:"\\ea72"}),d.edit=new d("edit",{fontCharacter:"\\ea73"}),d.pencil=new d("pencil",{fontCharacter:"\\ea73"}),d.info=new d("info",{fontCharacter:"\\ea74"}),d.issueOpened=new d("issue-opened",{fontCharacter:"\\ea74"}),d.gistPrivate=new d("gist-private",{fontCharacter:"\\ea75"}),d.gitForkPrivate=new d("git-fork-private",{fontCharacter:"\\ea75"}),d.lock=new d("lock",{fontCharacter:"\\ea75"}),d.mirrorPrivate=new d("mirror-private",{fontCharacter:"\\ea75"}),d.close=new d("close",{fontCharacter:"\\ea76"}),d.removeClose=new d("remove-close",{fontCharacter:"\\ea76"}),d.x=new d("x",{fontCharacter:"\\ea76"}),d.repoSync=new d("repo-sync",{fontCharacter:"\\ea77"}),d.sync=new d("sync",{fontCharacter:"\\ea77"}),d.clone=new d("clone",{fontCharacter:"\\ea78"}),d.desktopDownload=new d("desktop-download",{fontCharacter:"\\ea78"}),d.beaker=new d("beaker",{fontCharacter:"\\ea79"}),d.microscope=new d("microscope",{fontCharacter:"\\ea79"}),d.vm=new d("vm",{fontCharacter:"\\ea7a"}),d.deviceDesktop=new d("device-desktop",{fontCharacter:"\\ea7a"}),d.file=new d("file",{fontCharacter:"\\ea7b"}),d.fileText=new d("file-text",{fontCharacter:"\\ea7b"}),d.more=new d("more",{fontCharacter:"\\ea7c"}),d.ellipsis=new d("ellipsis",{fontCharacter:"\\ea7c"}),d.kebabHorizontal=new d("kebab-horizontal",{fontCharacter:"\\ea7c"}),d.mailReply=new d("mail-reply",{fontCharacter:"\\ea7d"}),d.reply=new d("reply",{fontCharacter:"\\ea7d"}),d.organization=new d("organization",{fontCharacter:"\\ea7e"}),d.organizationFilled=new d("organization-filled",{fontCharacter:"\\ea7e"}),d.organizationOutline=new d("organization-outline",{fontCharacter:"\\ea7e"}),d.newFile=new d("new-file",{fontCharacter:"\\ea7f"}),d.fileAdd=new d("file-add",{fontCharacter:"\\ea7f"}),d.newFolder=new d("new-folder",{fontCharacter:"\\ea80"}),d.fileDirectoryCreate=new d("file-directory-create",{fontCharacter:"\\ea80"}),d.trash=new d("trash",{fontCharacter:"\\ea81"}),d.trashcan=new d("trashcan",{fontCharacter:"\\ea81"}),d.history=new d("history",{fontCharacter:"\\ea82"}),d.clock=new d("clock",{fontCharacter:"\\ea82"}),d.folder=new d("folder",{fontCharacter:"\\ea83"}),d.fileDirectory=new d("file-directory",{fontCharacter:"\\ea83"}),d.symbolFolder=new d("symbol-folder",{fontCharacter:"\\ea83"}),d.logoGithub=new d("logo-github",{fontCharacter:"\\ea84"}),d.markGithub=new d("mark-github",{fontCharacter:"\\ea84"}),d.github=new d("github",{fontCharacter:"\\ea84"}),d.terminal=new d("terminal",{fontCharacter:"\\ea85"}),d.console=new d("console",{fontCharacter:"\\ea85"}),d.repl=new d("repl",{fontCharacter:"\\ea85"}),d.zap=new d("zap",{fontCharacter:"\\ea86"}),d.symbolEvent=new d("symbol-event",{fontCharacter:"\\ea86"}),d.error=new d("error",{fontCharacter:"\\ea87"}),d.stop=new d("stop",{fontCharacter:"\\ea87"}),d.variable=new d("variable",{fontCharacter:"\\ea88"}),d.symbolVariable=new d("symbol-variable",{fontCharacter:"\\ea88"}),d.array=new d("array",{fontCharacter:"\\ea8a"}),d.symbolArray=new d("symbol-array",{fontCharacter:"\\ea8a"}),d.symbolModule=new d("symbol-module",{fontCharacter:"\\ea8b"}),d.symbolPackage=new d("symbol-package",{fontCharacter:"\\ea8b"}),d.symbolNamespace=new d("symbol-namespace",{fontCharacter:"\\ea8b"}),d.symbolObject=new d("symbol-object",{fontCharacter:"\\ea8b"}),d.symbolMethod=new d("symbol-method",{fontCharacter:"\\ea8c"}),d.symbolFunction=new d("symbol-function",{fontCharacter:"\\ea8c"}),d.symbolConstructor=new d("symbol-constructor",{fontCharacter:"\\ea8c"}),d.symbolBoolean=new d("symbol-boolean",{fontCharacter:"\\ea8f"}),d.symbolNull=new d("symbol-null",{fontCharacter:"\\ea8f"}),d.symbolNumeric=new d("symbol-numeric",{fontCharacter:"\\ea90"}),d.symbolNumber=new d("symbol-number",{fontCharacter:"\\ea90"}),d.symbolStructure=new d("symbol-structure",{fontCharacter:"\\ea91"}),d.symbolStruct=new d("symbol-struct",{fontCharacter:"\\ea91"}),d.symbolParameter=new d("symbol-parameter",{fontCharacter:"\\ea92"}),d.symbolTypeParameter=new d("symbol-type-parameter",{fontCharacter:"\\ea92"}),d.symbolKey=new d("symbol-key",{fontCharacter:"\\ea93"}),d.symbolText=new d("symbol-text",{fontCharacter:"\\ea93"}),d.symbolReference=new d("symbol-reference",{fontCharacter:"\\ea94"}),d.goToFile=new d("go-to-file",{fontCharacter:"\\ea94"}),d.symbolEnum=new d("symbol-enum",{fontCharacter:"\\ea95"}),d.symbolValue=new d("symbol-value",{fontCharacter:"\\ea95"}),d.symbolRuler=new d("symbol-ruler",{fontCharacter:"\\ea96"}),d.symbolUnit=new d("symbol-unit",{fontCharacter:"\\ea96"}),d.activateBreakpoints=new d("activate-breakpoints",{fontCharacter:"\\ea97"}),d.archive=new d("archive",{fontCharacter:"\\ea98"}),d.arrowBoth=new d("arrow-both",{fontCharacter:"\\ea99"}),d.arrowDown=new d("arrow-down",{fontCharacter:"\\ea9a"}),d.arrowLeft=new d("arrow-left",{fontCharacter:"\\ea9b"}),d.arrowRight=new d("arrow-right",{fontCharacter:"\\ea9c"}),d.arrowSmallDown=new d("arrow-small-down",{fontCharacter:"\\ea9d"}),d.arrowSmallLeft=new d("arrow-small-left",{fontCharacter:"\\ea9e"}),d.arrowSmallRight=new d("arrow-small-right",{fontCharacter:"\\ea9f"}),d.arrowSmallUp=new d("arrow-small-up",{fontCharacter:"\\eaa0"}),d.arrowUp=new d("arrow-up",{fontCharacter:"\\eaa1"}),d.bell=new d("bell",{fontCharacter:"\\eaa2"}),d.bold=new d("bold",{fontCharacter:"\\eaa3"}),d.book=new d("book",{fontCharacter:"\\eaa4"}),d.bookmark=new d("bookmark",{fontCharacter:"\\eaa5"}),d.debugBreakpointConditionalUnverified=new d("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),d.debugBreakpointConditional=new d("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),d.debugBreakpointConditionalDisabled=new d("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),d.debugBreakpointDataUnverified=new d("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),d.debugBreakpointData=new d("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),d.debugBreakpointDataDisabled=new d("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),d.debugBreakpointLogUnverified=new d("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),d.debugBreakpointLog=new d("debug-breakpoint-log",{fontCharacter:"\\eaab"}),d.debugBreakpointLogDisabled=new d("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),d.briefcase=new d("briefcase",{fontCharacter:"\\eaac"}),d.broadcast=new d("broadcast",{fontCharacter:"\\eaad"}),d.browser=new d("browser",{fontCharacter:"\\eaae"}),d.bug=new d("bug",{fontCharacter:"\\eaaf"}),d.calendar=new d("calendar",{fontCharacter:"\\eab0"}),d.caseSensitive=new d("case-sensitive",{fontCharacter:"\\eab1"}),d.check=new d("check",{fontCharacter:"\\eab2"}),d.checklist=new d("checklist",{fontCharacter:"\\eab3"}),d.chevronDown=new d("chevron-down",{fontCharacter:"\\eab4"}),d.dropDownButton=new d("drop-down-button",d.chevronDown.definition),d.chevronLeft=new d("chevron-left",{fontCharacter:"\\eab5"}),d.chevronRight=new d("chevron-right",{fontCharacter:"\\eab6"}),d.chevronUp=new d("chevron-up",{fontCharacter:"\\eab7"}),d.chromeClose=new d("chrome-close",{fontCharacter:"\\eab8"}),d.chromeMaximize=new d("chrome-maximize",{fontCharacter:"\\eab9"}),d.chromeMinimize=new d("chrome-minimize",{fontCharacter:"\\eaba"}),d.chromeRestore=new d("chrome-restore",{fontCharacter:"\\eabb"}),d.circleOutline=new d("circle-outline",{fontCharacter:"\\eabc"}),d.debugBreakpointUnverified=new d("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),d.circleSlash=new d("circle-slash",{fontCharacter:"\\eabd"}),d.circuitBoard=new d("circuit-board",{fontCharacter:"\\eabe"}),d.clearAll=new d("clear-all",{fontCharacter:"\\eabf"}),d.clippy=new d("clippy",{fontCharacter:"\\eac0"}),d.closeAll=new d("close-all",{fontCharacter:"\\eac1"}),d.cloudDownload=new d("cloud-download",{fontCharacter:"\\eac2"}),d.cloudUpload=new d("cloud-upload",{fontCharacter:"\\eac3"}),d.code=new d("code",{fontCharacter:"\\eac4"}),d.collapseAll=new d("collapse-all",{fontCharacter:"\\eac5"}),d.colorMode=new d("color-mode",{fontCharacter:"\\eac6"}),d.commentDiscussion=new d("comment-discussion",{fontCharacter:"\\eac7"}),d.compareChanges=new d("compare-changes",{fontCharacter:"\\eafd"}),d.creditCard=new d("credit-card",{fontCharacter:"\\eac9"}),d.dash=new d("dash",{fontCharacter:"\\eacc"}),d.dashboard=new d("dashboard",{fontCharacter:"\\eacd"}),d.database=new d("database",{fontCharacter:"\\eace"}),d.debugContinue=new d("debug-continue",{fontCharacter:"\\eacf"}),d.debugDisconnect=new d("debug-disconnect",{fontCharacter:"\\ead0"}),d.debugPause=new d("debug-pause",{fontCharacter:"\\ead1"}),d.debugRestart=new d("debug-restart",{fontCharacter:"\\ead2"}),d.debugStart=new d("debug-start",{fontCharacter:"\\ead3"}),d.debugStepInto=new d("debug-step-into",{fontCharacter:"\\ead4"}),d.debugStepOut=new d("debug-step-out",{fontCharacter:"\\ead5"}),d.debugStepOver=new d("debug-step-over",{fontCharacter:"\\ead6"}),d.debugStop=new d("debug-stop",{fontCharacter:"\\ead7"}),d.debug=new d("debug",{fontCharacter:"\\ead8"}),d.deviceCameraVideo=new d("device-camera-video",{fontCharacter:"\\ead9"}),d.deviceCamera=new d("device-camera",{fontCharacter:"\\eada"}),d.deviceMobile=new d("device-mobile",{fontCharacter:"\\eadb"}),d.diffAdded=new d("diff-added",{fontCharacter:"\\eadc"}),d.diffIgnored=new d("diff-ignored",{fontCharacter:"\\eadd"}),d.diffModified=new d("diff-modified",{fontCharacter:"\\eade"}),d.diffRemoved=new d("diff-removed",{fontCharacter:"\\eadf"}),d.diffRenamed=new d("diff-renamed",{fontCharacter:"\\eae0"}),d.diff=new d("diff",{fontCharacter:"\\eae1"}),d.discard=new d("discard",{fontCharacter:"\\eae2"}),d.editorLayout=new d("editor-layout",{fontCharacter:"\\eae3"}),d.emptyWindow=new d("empty-window",{fontCharacter:"\\eae4"}),d.exclude=new d("exclude",{fontCharacter:"\\eae5"}),d.extensions=new d("extensions",{fontCharacter:"\\eae6"}),d.eyeClosed=new d("eye-closed",{fontCharacter:"\\eae7"}),d.fileBinary=new d("file-binary",{fontCharacter:"\\eae8"}),d.fileCode=new d("file-code",{fontCharacter:"\\eae9"}),d.fileMedia=new d("file-media",{fontCharacter:"\\eaea"}),d.filePdf=new d("file-pdf",{fontCharacter:"\\eaeb"}),d.fileSubmodule=new d("file-submodule",{fontCharacter:"\\eaec"}),d.fileSymlinkDirectory=new d("file-symlink-directory",{fontCharacter:"\\eaed"}),d.fileSymlinkFile=new d("file-symlink-file",{fontCharacter:"\\eaee"}),d.fileZip=new d("file-zip",{fontCharacter:"\\eaef"}),d.files=new d("files",{fontCharacter:"\\eaf0"}),d.filter=new d("filter",{fontCharacter:"\\eaf1"}),d.flame=new d("flame",{fontCharacter:"\\eaf2"}),d.foldDown=new d("fold-down",{fontCharacter:"\\eaf3"}),d.foldUp=new d("fold-up",{fontCharacter:"\\eaf4"}),d.fold=new d("fold",{fontCharacter:"\\eaf5"}),d.folderActive=new d("folder-active",{fontCharacter:"\\eaf6"}),d.folderOpened=new d("folder-opened",{fontCharacter:"\\eaf7"}),d.gear=new d("gear",{fontCharacter:"\\eaf8"}),d.gift=new d("gift",{fontCharacter:"\\eaf9"}),d.gistSecret=new d("gist-secret",{fontCharacter:"\\eafa"}),d.gist=new d("gist",{fontCharacter:"\\eafb"}),d.gitCommit=new d("git-commit",{fontCharacter:"\\eafc"}),d.gitCompare=new d("git-compare",{fontCharacter:"\\eafd"}),d.gitMerge=new d("git-merge",{fontCharacter:"\\eafe"}),d.githubAction=new d("github-action",{fontCharacter:"\\eaff"}),d.githubAlt=new d("github-alt",{fontCharacter:"\\eb00"}),d.globe=new d("globe",{fontCharacter:"\\eb01"}),d.grabber=new d("grabber",{fontCharacter:"\\eb02"}),d.graph=new d("graph",{fontCharacter:"\\eb03"}),d.gripper=new d("gripper",{fontCharacter:"\\eb04"}),d.heart=new d("heart",{fontCharacter:"\\eb05"}),d.home=new d("home",{fontCharacter:"\\eb06"}),d.horizontalRule=new d("horizontal-rule",{fontCharacter:"\\eb07"}),d.hubot=new d("hubot",{fontCharacter:"\\eb08"}),d.inbox=new d("inbox",{fontCharacter:"\\eb09"}),d.issueClosed=new d("issue-closed",{fontCharacter:"\\eba4"}),d.issueReopened=new d("issue-reopened",{fontCharacter:"\\eb0b"}),d.issues=new d("issues",{fontCharacter:"\\eb0c"}),d.italic=new d("italic",{fontCharacter:"\\eb0d"}),d.jersey=new d("jersey",{fontCharacter:"\\eb0e"}),d.json=new d("json",{fontCharacter:"\\eb0f"}),d.kebabVertical=new d("kebab-vertical",{fontCharacter:"\\eb10"}),d.key=new d("key",{fontCharacter:"\\eb11"}),d.law=new d("law",{fontCharacter:"\\eb12"}),d.lightbulbAutofix=new d("lightbulb-autofix",{fontCharacter:"\\eb13"}),d.linkExternal=new d("link-external",{fontCharacter:"\\eb14"}),d.link=new d("link",{fontCharacter:"\\eb15"}),d.listOrdered=new d("list-ordered",{fontCharacter:"\\eb16"}),d.listUnordered=new d("list-unordered",{fontCharacter:"\\eb17"}),d.liveShare=new d("live-share",{fontCharacter:"\\eb18"}),d.loading=new d("loading",{fontCharacter:"\\eb19"}),d.location=new d("location",{fontCharacter:"\\eb1a"}),d.mailRead=new d("mail-read",{fontCharacter:"\\eb1b"}),d.mail=new d("mail",{fontCharacter:"\\eb1c"}),d.markdown=new d("markdown",{fontCharacter:"\\eb1d"}),d.megaphone=new d("megaphone",{fontCharacter:"\\eb1e"}),d.mention=new d("mention",{fontCharacter:"\\eb1f"}),d.milestone=new d("milestone",{fontCharacter:"\\eb20"}),d.mortarBoard=new d("mortar-board",{fontCharacter:"\\eb21"}),d.move=new d("move",{fontCharacter:"\\eb22"}),d.multipleWindows=new d("multiple-windows",{fontCharacter:"\\eb23"}),d.mute=new d("mute",{fontCharacter:"\\eb24"}),d.noNewline=new d("no-newline",{fontCharacter:"\\eb25"}),d.note=new d("note",{fontCharacter:"\\eb26"}),d.octoface=new d("octoface",{fontCharacter:"\\eb27"}),d.openPreview=new d("open-preview",{fontCharacter:"\\eb28"}),d.package_=new d("package",{fontCharacter:"\\eb29"}),d.paintcan=new d("paintcan",{fontCharacter:"\\eb2a"}),d.pin=new d("pin",{fontCharacter:"\\eb2b"}),d.play=new d("play",{fontCharacter:"\\eb2c"}),d.run=new d("run",{fontCharacter:"\\eb2c"}),d.plug=new d("plug",{fontCharacter:"\\eb2d"}),d.preserveCase=new d("preserve-case",{fontCharacter:"\\eb2e"}),d.preview=new d("preview",{fontCharacter:"\\eb2f"}),d.project=new d("project",{fontCharacter:"\\eb30"}),d.pulse=new d("pulse",{fontCharacter:"\\eb31"}),d.question=new d("question",{fontCharacter:"\\eb32"}),d.quote=new d("quote",{fontCharacter:"\\eb33"}),d.radioTower=new d("radio-tower",{fontCharacter:"\\eb34"}),d.reactions=new d("reactions",{fontCharacter:"\\eb35"}),d.references=new d("references",{fontCharacter:"\\eb36"}),d.refresh=new d("refresh",{fontCharacter:"\\eb37"}),d.regex=new d("regex",{fontCharacter:"\\eb38"}),d.remoteExplorer=new d("remote-explorer",{fontCharacter:"\\eb39"}),d.remote=new d("remote",{fontCharacter:"\\eb3a"}),d.remove=new d("remove",{fontCharacter:"\\eb3b"}),d.replaceAll=new d("replace-all",{fontCharacter:"\\eb3c"}),d.replace=new d("replace",{fontCharacter:"\\eb3d"}),d.repoClone=new d("repo-clone",{fontCharacter:"\\eb3e"}),d.repoForcePush=new d("repo-force-push",{fontCharacter:"\\eb3f"}),d.repoPull=new d("repo-pull",{fontCharacter:"\\eb40"}),d.repoPush=new d("repo-push",{fontCharacter:"\\eb41"}),d.report=new d("report",{fontCharacter:"\\eb42"}),d.requestChanges=new d("request-changes",{fontCharacter:"\\eb43"}),d.rocket=new d("rocket",{fontCharacter:"\\eb44"}),d.rootFolderOpened=new d("root-folder-opened",{fontCharacter:"\\eb45"}),d.rootFolder=new d("root-folder",{fontCharacter:"\\eb46"}),d.rss=new d("rss",{fontCharacter:"\\eb47"}),d.ruby=new d("ruby",{fontCharacter:"\\eb48"}),d.saveAll=new d("save-all",{fontCharacter:"\\eb49"}),d.saveAs=new d("save-as",{fontCharacter:"\\eb4a"}),d.save=new d("save",{fontCharacter:"\\eb4b"}),d.screenFull=new d("screen-full",{fontCharacter:"\\eb4c"}),d.screenNormal=new d("screen-normal",{fontCharacter:"\\eb4d"}),d.searchStop=new d("search-stop",{fontCharacter:"\\eb4e"}),d.server=new d("server",{fontCharacter:"\\eb50"}),d.settingsGear=new d("settings-gear",{fontCharacter:"\\eb51"}),d.settings=new d("settings",{fontCharacter:"\\eb52"}),d.shield=new d("shield",{fontCharacter:"\\eb53"}),d.smiley=new d("smiley",{fontCharacter:"\\eb54"}),d.sortPrecedence=new d("sort-precedence",{fontCharacter:"\\eb55"}),d.splitHorizontal=new d("split-horizontal",{fontCharacter:"\\eb56"}),d.splitVertical=new d("split-vertical",{fontCharacter:"\\eb57"}),d.squirrel=new d("squirrel",{fontCharacter:"\\eb58"}),d.starFull=new d("star-full",{fontCharacter:"\\eb59"}),d.starHalf=new d("star-half",{fontCharacter:"\\eb5a"}),d.symbolClass=new d("symbol-class",{fontCharacter:"\\eb5b"}),d.symbolColor=new d("symbol-color",{fontCharacter:"\\eb5c"}),d.symbolCustomColor=new d("symbol-customcolor",{fontCharacter:"\\eb5c"}),d.symbolConstant=new d("symbol-constant",{fontCharacter:"\\eb5d"}),d.symbolEnumMember=new d("symbol-enum-member",{fontCharacter:"\\eb5e"}),d.symbolField=new d("symbol-field",{fontCharacter:"\\eb5f"}),d.symbolFile=new d("symbol-file",{fontCharacter:"\\eb60"}),d.symbolInterface=new d("symbol-interface",{fontCharacter:"\\eb61"}),d.symbolKeyword=new d("symbol-keyword",{fontCharacter:"\\eb62"}),d.symbolMisc=new d("symbol-misc",{fontCharacter:"\\eb63"}),d.symbolOperator=new d("symbol-operator",{fontCharacter:"\\eb64"}),d.symbolProperty=new d("symbol-property",{fontCharacter:"\\eb65"}),d.wrench=new d("wrench",{fontCharacter:"\\eb65"}),d.wrenchSubaction=new d("wrench-subaction",{fontCharacter:"\\eb65"}),d.symbolSnippet=new d("symbol-snippet",{fontCharacter:"\\eb66"}),d.tasklist=new d("tasklist",{fontCharacter:"\\eb67"}),d.telescope=new d("telescope",{fontCharacter:"\\eb68"}),d.textSize=new d("text-size",{fontCharacter:"\\eb69"}),d.threeBars=new d("three-bars",{fontCharacter:"\\eb6a"}),d.thumbsdown=new d("thumbsdown",{fontCharacter:"\\eb6b"}),d.thumbsup=new d("thumbsup",{fontCharacter:"\\eb6c"}),d.tools=new d("tools",{fontCharacter:"\\eb6d"}),d.triangleDown=new d("triangle-down",{fontCharacter:"\\eb6e"}),d.triangleLeft=new d("triangle-left",{fontCharacter:"\\eb6f"}),d.triangleRight=new d("triangle-right",{fontCharacter:"\\eb70"}),d.triangleUp=new d("triangle-up",{fontCharacter:"\\eb71"}),d.twitter=new d("twitter",{fontCharacter:"\\eb72"}),d.unfold=new d("unfold",{fontCharacter:"\\eb73"}),d.unlock=new d("unlock",{fontCharacter:"\\eb74"}),d.unmute=new d("unmute",{fontCharacter:"\\eb75"}),d.unverified=new d("unverified",{fontCharacter:"\\eb76"}),d.verified=new d("verified",{fontCharacter:"\\eb77"}),d.versions=new d("versions",{fontCharacter:"\\eb78"}),d.vmActive=new d("vm-active",{fontCharacter:"\\eb79"}),d.vmOutline=new d("vm-outline",{fontCharacter:"\\eb7a"}),d.vmRunning=new d("vm-running",{fontCharacter:"\\eb7b"}),d.watch=new d("watch",{fontCharacter:"\\eb7c"}),d.whitespace=new d("whitespace",{fontCharacter:"\\eb7d"}),d.wholeWord=new d("whole-word",{fontCharacter:"\\eb7e"}),d.window=new d("window",{fontCharacter:"\\eb7f"}),d.wordWrap=new d("word-wrap",{fontCharacter:"\\eb80"}),d.zoomIn=new d("zoom-in",{fontCharacter:"\\eb81"}),d.zoomOut=new d("zoom-out",{fontCharacter:"\\eb82"}),d.listFilter=new d("list-filter",{fontCharacter:"\\eb83"}),d.listFlat=new d("list-flat",{fontCharacter:"\\eb84"}),d.listSelection=new d("list-selection",{fontCharacter:"\\eb85"}),d.selection=new d("selection",{fontCharacter:"\\eb85"}),d.listTree=new d("list-tree",{fontCharacter:"\\eb86"}),d.debugBreakpointFunctionUnverified=new d("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),d.debugBreakpointFunction=new d("debug-breakpoint-function",{fontCharacter:"\\eb88"}),d.debugBreakpointFunctionDisabled=new d("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),d.debugStackframeActive=new d("debug-stackframe-active",{fontCharacter:"\\eb89"}),d.debugStackframeDot=new d("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),d.debugStackframe=new d("debug-stackframe",{fontCharacter:"\\eb8b"}),d.debugStackframeFocused=new d("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),d.debugBreakpointUnsupported=new d("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),d.symbolString=new d("symbol-string",{fontCharacter:"\\eb8d"}),d.debugReverseContinue=new d("debug-reverse-continue",{fontCharacter:"\\eb8e"}),d.debugStepBack=new d("debug-step-back",{fontCharacter:"\\eb8f"}),d.debugRestartFrame=new d("debug-restart-frame",{fontCharacter:"\\eb90"}),d.callIncoming=new d("call-incoming",{fontCharacter:"\\eb92"}),d.callOutgoing=new d("call-outgoing",{fontCharacter:"\\eb93"}),d.menu=new d("menu",{fontCharacter:"\\eb94"}),d.expandAll=new d("expand-all",{fontCharacter:"\\eb95"}),d.feedback=new d("feedback",{fontCharacter:"\\eb96"}),d.groupByRefType=new d("group-by-ref-type",{fontCharacter:"\\eb97"}),d.ungroupByRefType=new d("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),d.account=new d("account",{fontCharacter:"\\eb99"}),d.bellDot=new d("bell-dot",{fontCharacter:"\\eb9a"}),d.debugConsole=new d("debug-console",{fontCharacter:"\\eb9b"}),d.library=new d("library",{fontCharacter:"\\eb9c"}),d.output=new d("output",{fontCharacter:"\\eb9d"}),d.runAll=new d("run-all",{fontCharacter:"\\eb9e"}),d.syncIgnored=new d("sync-ignored",{fontCharacter:"\\eb9f"}),d.pinned=new d("pinned",{fontCharacter:"\\eba0"}),d.githubInverted=new d("github-inverted",{fontCharacter:"\\eba1"}),d.debugAlt=new d("debug-alt",{fontCharacter:"\\eb91"}),d.serverProcess=new d("server-process",{fontCharacter:"\\eba2"}),d.serverEnvironment=new d("server-environment",{fontCharacter:"\\eba3"}),d.pass=new d("pass",{fontCharacter:"\\eba4"}),d.stopCircle=new d("stop-circle",{fontCharacter:"\\eba5"}),d.playCircle=new d("play-circle",{fontCharacter:"\\eba6"}),d.record=new d("record",{fontCharacter:"\\eba7"}),d.debugAltSmall=new d("debug-alt-small",{fontCharacter:"\\eba8"}),d.vmConnect=new d("vm-connect",{fontCharacter:"\\eba9"}),d.cloud=new d("cloud",{fontCharacter:"\\ebaa"}),d.merge=new d("merge",{fontCharacter:"\\ebab"}),d.exportIcon=new d("export",{fontCharacter:"\\ebac"}),d.graphLeft=new d("graph-left",{fontCharacter:"\\ebad"}),d.magnet=new d("magnet",{fontCharacter:"\\ebae"}),d.notebook=new d("notebook",{fontCharacter:"\\ebaf"}),d.redo=new d("redo",{fontCharacter:"\\ebb0"}),d.checkAll=new d("check-all",{fontCharacter:"\\ebb1"}),d.pinnedDirty=new d("pinned-dirty",{fontCharacter:"\\ebb2"}),d.passFilled=new d("pass-filled",{fontCharacter:"\\ebb3"}),d.circleLargeFilled=new d("circle-large-filled",{fontCharacter:"\\ebb4"}),d.circleLargeOutline=new d("circle-large-outline",{fontCharacter:"\\ebb5"}),d.combine=new d("combine",{fontCharacter:"\\ebb6"}),d.gather=new d("gather",{fontCharacter:"\\ebb6"}),d.table=new d("table",{fontCharacter:"\\ebb7"}),d.variableGroup=new d("variable-group",{fontCharacter:"\\ebb8"}),d.typeHierarchy=new d("type-hierarchy",{fontCharacter:"\\ebb9"}),d.typeHierarchySub=new d("type-hierarchy-sub",{fontCharacter:"\\ebba"}),d.typeHierarchySuper=new d("type-hierarchy-super",{fontCharacter:"\\ebbb"}),d.gitPullRequestCreate=new d("git-pull-request-create",{fontCharacter:"\\ebbc"}),d.runAbove=new d("run-above",{fontCharacter:"\\ebbd"}),d.runBelow=new d("run-below",{fontCharacter:"\\ebbe"}),d.notebookTemplate=new d("notebook-template",{fontCharacter:"\\ebbf"}),d.debugRerun=new d("debug-rerun",{fontCharacter:"\\ebc0"}),d.workspaceTrusted=new d("workspace-trusted",{fontCharacter:"\\ebc1"}),d.workspaceUntrusted=new d("workspace-untrusted",{fontCharacter:"\\ebc2"}),d.workspaceUnspecified=new d("workspace-unspecified",{fontCharacter:"\\ebc3"}),d.terminalCmd=new d("terminal-cmd",{fontCharacter:"\\ebc4"}),d.terminalDebian=new d("terminal-debian",{fontCharacter:"\\ebc5"}),d.terminalLinux=new d("terminal-linux",{fontCharacter:"\\ebc6"}),d.terminalPowershell=new d("terminal-powershell",{fontCharacter:"\\ebc7"}),d.terminalTmux=new d("terminal-tmux",{fontCharacter:"\\ebc8"}),d.terminalUbuntu=new d("terminal-ubuntu",{fontCharacter:"\\ebc9"}),d.terminalBash=new d("terminal-bash",{fontCharacter:"\\ebca"}),d.arrowSwap=new d("arrow-swap",{fontCharacter:"\\ebcb"}),d.copy=new d("copy",{fontCharacter:"\\ebcc"}),d.personAdd=new d("person-add",{fontCharacter:"\\ebcd"}),d.filterFilled=new d("filter-filled",{fontCharacter:"\\ebce"}),d.wand=new d("wand",{fontCharacter:"\\ebcf"}),d.debugLineByLine=new d("debug-line-by-line",{fontCharacter:"\\ebd0"}),d.inspect=new d("inspect",{fontCharacter:"\\ebd1"}),d.layers=new d("layers",{fontCharacter:"\\ebd2"}),d.layersDot=new d("layers-dot",{fontCharacter:"\\ebd3"}),d.layersActive=new d("layers-active",{fontCharacter:"\\ebd4"}),d.compass=new d("compass",{fontCharacter:"\\ebd5"}),d.compassDot=new d("compass-dot",{fontCharacter:"\\ebd6"}),d.compassActive=new d("compass-active",{fontCharacter:"\\ebd7"}),d.azure=new d("azure",{fontCharacter:"\\ebd8"}),d.issueDraft=new d("issue-draft",{fontCharacter:"\\ebd9"}),d.gitPullRequestClosed=new d("git-pull-request-closed",{fontCharacter:"\\ebda"}),d.gitPullRequestDraft=new d("git-pull-request-draft",{fontCharacter:"\\ebdb"}),d.debugAll=new d("debug-all",{fontCharacter:"\\ebdc"}),d.debugCoverage=new d("debug-coverage",{fontCharacter:"\\ebdd"}),d.runErrors=new d("run-errors",{fontCharacter:"\\ebde"}),d.folderLibrary=new d("folder-library",{fontCharacter:"\\ebdf"}),d.debugContinueSmall=new d("debug-continue-small",{fontCharacter:"\\ebe0"}),d.beakerStop=new d("beaker-stop",{fontCharacter:"\\ebe1"}),d.graphLine=new d("graph-line",{fontCharacter:"\\ebe2"}),d.graphScatter=new d("graph-scatter",{fontCharacter:"\\ebe3"}),d.pieChart=new d("pie-chart",{fontCharacter:"\\ebe4"}),d.bracket=new d("bracket",d.json.definition),d.bracketDot=new d("bracket-dot",{fontCharacter:"\\ebe5"}),d.bracketError=new d("bracket-error",{fontCharacter:"\\ebe6"}),d.lockSmall=new d("lock-small",{fontCharacter:"\\ebe7"}),d.azureDevops=new d("azure-devops",{fontCharacter:"\\ebe8"}),d.verifiedFilled=new d("verified-filled",{fontCharacter:"\\ebe9"}),d.newLine=new d("newline",{fontCharacter:"\\ebea"}),d.layout=new d("layout",{fontCharacter:"\\ebeb"}),d.layoutActivitybarLeft=new d("layout-activitybar-left",{fontCharacter:"\\ebec"}),d.layoutActivitybarRight=new d("layout-activitybar-right",{fontCharacter:"\\ebed"}),d.layoutPanelLeft=new d("layout-panel-left",{fontCharacter:"\\ebee"}),d.layoutPanelCenter=new d("layout-panel-center",{fontCharacter:"\\ebef"}),d.layoutPanelJustify=new d("layout-panel-justify",{fontCharacter:"\\ebf0"}),d.layoutPanelRight=new d("layout-panel-right",{fontCharacter:"\\ebf1"}),d.layoutPanel=new d("layout-panel",{fontCharacter:"\\ebf2"}),d.layoutSidebarLeft=new d("layout-sidebar-left",{fontCharacter:"\\ebf3"}),d.layoutSidebarRight=new d("layout-sidebar-right",{fontCharacter:"\\ebf4"}),d.layoutStatusbar=new d("layout-statusbar",{fontCharacter:"\\ebf5"}),d.layoutMenubar=new d("layout-menubar",{fontCharacter:"\\ebf6"}),d.layoutCentered=new d("layout-centered",{fontCharacter:"\\ebf7"}),d.target=new d("target",{fontCharacter:"\\ebf8"}),d.indent=new d("indent",{fontCharacter:"\\ebf9"}),d.recordSmall=new d("record-small",{fontCharacter:"\\ebfa"}),d.errorSmall=new d("error-small",{fontCharacter:"\\ebfb"}),d.arrowCircleDown=new d("arrow-circle-down",{fontCharacter:"\\ebfc"}),d.arrowCircleLeft=new d("arrow-circle-left",{fontCharacter:"\\ebfd"}),d.arrowCircleRight=new d("arrow-circle-right",{fontCharacter:"\\ebfe"}),d.arrowCircleUp=new d("arrow-circle-up",{fontCharacter:"\\ebff"}),d.dialogError=new d("dialog-error",d.error.definition),d.dialogWarning=new d("dialog-warning",d.warning.definition),d.dialogInfo=new d("dialog-info",d.info.definition),d.dialogClose=new d("dialog-close",d.close.definition),d.treeItemExpanded=new d("tree-item-expanded",d.chevronDown.definition),d.treeFilterOnTypeOn=new d("tree-filter-on-type-on",d.listFilter.definition),d.treeFilterOnTypeOff=new d("tree-filter-on-type-off",d.listSelection.definition),d.treeFilterClear=new d("tree-filter-clear",d.close.definition),d.treeItemLoading=new d("tree-item-loading",d.loading.definition),d.menuSelection=new d("menu-selection",d.check.definition),d.menuSubmenu=new d("menu-submenu",d.chevronRight.definition),d.menuBarMore=new d("menubar-more",d.more.definition),d.scrollbarButtonLeft=new d("scrollbar-button-left",d.triangleLeft.definition),d.scrollbarButtonRight=new d("scrollbar-button-right",d.triangleRight.definition),d.scrollbarButtonUp=new d("scrollbar-button-up",d.triangleUp.definition),d.scrollbarButtonDown=new d("scrollbar-button-down",d.triangleDown.definition),d.toolBarMore=new d("toolbar-more",d.more.definition),d.quickInputBack=new d("quick-input-back",d.arrowLeft.definition);var z;(function(O){O.iconNameSegment="[A-Za-z0-9]+",O.iconNameExpression="[A-Za-z0-9-]+",O.iconModifierExpression="~[A-Za-z]+",O.iconNameCharacter="[A-Za-z0-9~-]";const S=new RegExp(`^(${O.iconNameExpression})(${O.iconModifierExpression})?$`);function j(F){if(F instanceof d)return["codicon","codicon-"+F.id];const x=S.exec(F.id);if(!x)return j(d.error);let[,v,g]=x;const D=["codicon","codicon-"+v];return g&&D.push("codicon-modifier-"+g.substr(1)),D}O.asClassNameArray=j;function T(F){return j(F).join(" ")}O.asClassName=T;function B(F){return"."+j(F).join(".")}O.asCSSSelector=B})(z||(z={}))},6626:function(Tt,me,a){"use strict";a.d(me,{E:function(){return d},r:function(){return z}});const p=Object.prototype.hasOwnProperty;function d(O,S){for(let j in O)if(p.call(O,j)&&S({key:j,value:O[j]},function(){delete O[j]})===!1)return}class z{constructor(){this.map=new Map}add(S,j){let T=this.map.get(S);T||(T=new Set,this.map.set(S,T)),T.add(j)}delete(S,j){const T=this.map.get(S);!T||(T.delete(j),T.size===0&&this.map.delete(S))}forEach(S,j){const T=this.map.get(S);!T||T.forEach(j)}}},41264:function(Tt,me,a){"use strict";a.d(me,{VS:function(){return d},tx:function(){return O},Il:function(){return S}});function p(j,T){const B=Math.pow(10,T);return Math.round(j*B)/B}class d{constructor(T,B,F,x=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,T))|0,this.g=Math.min(255,Math.max(0,B))|0,this.b=Math.min(255,Math.max(0,F))|0,this.a=p(Math.max(Math.min(1,x),0),3)}static equals(T,B){return T.r===B.r&&T.g===B.g&&T.b===B.b&&T.a===B.a}}class z{constructor(T,B,F,x){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,T),0)|0,this.s=p(Math.max(Math.min(1,B),0),3),this.l=p(Math.max(Math.min(1,F),0),3),this.a=p(Math.max(Math.min(1,x),0),3)}static equals(T,B){return T.h===B.h&&T.s===B.s&&T.l===B.l&&T.a===B.a}static fromRGBA(T){const B=T.r/255,F=T.g/255,x=T.b/255,v=T.a,g=Math.max(B,F,x),D=Math.min(B,F,x);let c=0,C=0;const M=(D+g)/2,E=g-D;if(E>0){switch(C=Math.min(M<=.5?E/(2*M):E/(2-2*M),1),g){case B:c=(F-x)/E+(F<x?6:0);break;case F:c=(x-B)/E+2;break;case x:c=(B-F)/E+4;break}c*=60,c=Math.round(c)}return new z(c,C,M,v)}static _hue2rgb(T,B,F){return F<0&&(F+=1),F>1&&(F-=1),F<1/6?T+(B-T)*6*F:F<1/2?B:F<2/3?T+(B-T)*(2/3-F)*6:T}static toRGBA(T){const B=T.h/360,{s:F,l:x,a:v}=T;let g,D,c;if(F===0)g=D=c=x;else{const C=x<.5?x*(1+F):x+F-x*F,M=2*x-C;g=z._hue2rgb(M,C,B+1/3),D=z._hue2rgb(M,C,B),c=z._hue2rgb(M,C,B-1/3)}return new d(Math.round(g*255),Math.round(D*255),Math.round(c*255),v)}}class O{constructor(T,B,F,x){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,T),0)|0,this.s=p(Math.max(Math.min(1,B),0),3),this.v=p(Math.max(Math.min(1,F),0),3),this.a=p(Math.max(Math.min(1,x),0),3)}static equals(T,B){return T.h===B.h&&T.s===B.s&&T.v===B.v&&T.a===B.a}static fromRGBA(T){const B=T.r/255,F=T.g/255,x=T.b/255,v=Math.max(B,F,x),g=Math.min(B,F,x),D=v-g,c=v===0?0:D/v;let C;return D===0?C=0:v===B?C=((F-x)/D%6+6)%6:v===F?C=(x-B)/D+2:C=(B-F)/D+4,new O(Math.round(C*60),c,v,T.a)}static toRGBA(T){const{h:B,s:F,v:x,a:v}=T,g=x*F,D=g*(1-Math.abs(B/60%2-1)),c=x-g;let[C,M,E]=[0,0,0];return B<60?(C=g,M=D):B<120?(C=D,M=g):B<180?(M=g,E=D):B<240?(M=D,E=g):B<300?(C=D,E=g):B<=360&&(C=g,E=D),C=Math.round((C+c)*255),M=Math.round((M+c)*255),E=Math.round((E+c)*255),new d(C,M,E,v)}}class S{constructor(T){if(T)if(T instanceof d)this.rgba=T;else if(T instanceof z)this._hsla=T,this.rgba=z.toRGBA(T);else if(T instanceof O)this._hsva=T,this.rgba=O.toRGBA(T);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(T){return S.Format.CSS.parseHex(T)||S.red}get hsla(){return this._hsla?this._hsla:z.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:O.fromRGBA(this.rgba)}equals(T){return!!T&&d.equals(this.rgba,T.rgba)&&z.equals(this.hsla,T.hsla)&&O.equals(this.hsva,T.hsva)}getRelativeLuminance(){const T=S._relativeLuminanceForComponent(this.rgba.r),B=S._relativeLuminanceForComponent(this.rgba.g),F=S._relativeLuminanceForComponent(this.rgba.b),x=.2126*T+.7152*B+.0722*F;return p(x,4)}static _relativeLuminanceForComponent(T){const B=T/255;return B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(T){const B=this.getRelativeLuminance(),F=T.getRelativeLuminance();return B>F}isDarkerThan(T){const B=this.getRelativeLuminance(),F=T.getRelativeLuminance();return B<F}lighten(T){return new S(new z(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*T,this.hsla.a))}darken(T){return new S(new z(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*T,this.hsla.a))}transparent(T){const{r:B,g:F,b:x,a:v}=this.rgba;return new S(new d(B,F,x,v*T))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new S(new d(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=S.Format.CSS.format(this)),this._toString}static getLighterColor(T,B,F){if(T.isLighterThan(B))return T;F=F||.5;const x=T.getRelativeLuminance(),v=B.getRelativeLuminance();return F=F*(v-x)/v,T.lighten(F)}static getDarkerColor(T,B,F){if(T.isDarkerThan(B))return T;F=F||.5;const x=T.getRelativeLuminance(),v=B.getRelativeLuminance();return F=F*(x-v)/x,T.darken(F)}}S.white=new S(new d(255,255,255,1)),S.black=new S(new d(0,0,0,1)),S.red=new S(new d(255,0,0,1)),S.blue=new S(new d(0,0,255,1)),S.green=new S(new d(0,255,0,1)),S.cyan=new S(new d(0,255,255,1)),S.lightgrey=new S(new d(211,211,211,1)),S.transparent=new S(new d(0,0,0,0)),function(j){let T;(function(B){let F;(function(x){function v(b){return b.rgba.a===1?`rgb(${b.rgba.r}, ${b.rgba.g}, ${b.rgba.b})`:j.Format.CSS.formatRGBA(b)}x.formatRGB=v;function g(b){return`rgba(${b.rgba.r}, ${b.rgba.g}, ${b.rgba.b}, ${+b.rgba.a.toFixed(2)})`}x.formatRGBA=g;function D(b){return b.hsla.a===1?`hsl(${b.hsla.h}, ${(b.hsla.s*100).toFixed(2)}%, ${(b.hsla.l*100).toFixed(2)}%)`:j.Format.CSS.formatHSLA(b)}x.formatHSL=D;function c(b){return`hsla(${b.hsla.h}, ${(b.hsla.s*100).toFixed(2)}%, ${(b.hsla.l*100).toFixed(2)}%, ${b.hsla.a.toFixed(2)})`}x.formatHSLA=c;function C(b){const I=b.toString(16);return I.length!==2?"0"+I:I}function M(b){return`#${C(b.rgba.r)}${C(b.rgba.g)}${C(b.rgba.b)}`}x.formatHex=M;function E(b,I=!1){return I&&b.rgba.a===1?j.Format.CSS.formatHex(b):`#${C(b.rgba.r)}${C(b.rgba.g)}${C(b.rgba.b)}${C(Math.round(b.rgba.a*255))}`}x.formatHexA=E;function _(b){return b.isOpaque()?j.Format.CSS.formatHex(b):j.Format.CSS.formatRGBA(b)}x.format=_;function L(b){const I=b.length;if(I===0||b.charCodeAt(0)!==35)return null;if(I===7){const k=16*N(b.charCodeAt(1))+N(b.charCodeAt(2)),W=16*N(b.charCodeAt(3))+N(b.charCodeAt(4)),q=16*N(b.charCodeAt(5))+N(b.charCodeAt(6));return new j(new d(k,W,q,1))}if(I===9){const k=16*N(b.charCodeAt(1))+N(b.charCodeAt(2)),W=16*N(b.charCodeAt(3))+N(b.charCodeAt(4)),q=16*N(b.charCodeAt(5))+N(b.charCodeAt(6)),re=16*N(b.charCodeAt(7))+N(b.charCodeAt(8));return new j(new d(k,W,q,re/255))}if(I===4){const k=N(b.charCodeAt(1)),W=N(b.charCodeAt(2)),q=N(b.charCodeAt(3));return new j(new d(16*k+k,16*W+W,16*q+q))}if(I===5){const k=N(b.charCodeAt(1)),W=N(b.charCodeAt(2)),q=N(b.charCodeAt(3)),re=N(b.charCodeAt(4));return new j(new d(16*k+k,16*W+W,16*q+q,(16*re+re)/255))}return null}x.parseHex=L;function N(b){switch(b){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(F=B.CSS||(B.CSS={}))})(T=j.Format||(j.Format={}))}(S||(S={}))},49898:function(Tt,me,a){"use strict";a.d(me,{H:function(){return p}});function p(d,z,O){let S=null,j=null;if(typeof O.value=="function"?(S="value",j=O.value,j.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof O.get=="function"&&(S="get",j=O.get),!j)throw new Error("not supported");const T=`$memoize$${z}`;O[S]=function(...B){return this.hasOwnProperty(T)||Object.defineProperty(this,T,{configurable:!1,enumerable:!1,writable:!1,value:j.apply(this,B)}),this[T]}}},2484:function(Tt,me,a){"use strict";a.d(me,{Hs:function(){return B},a$:function(){return O}});class p{constructor(x,v,g,D){this.originalStart=x,this.originalLength=v,this.modifiedStart=g,this.modifiedLength=D}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}var d=a(89954);class z{constructor(x){this.source=x}getElements(){const x=this.source,v=new Int32Array(x.length);for(let g=0,D=x.length;g<D;g++)v[g]=x.charCodeAt(g);return v}}function O(F,x,v){return new B(new z(F),new z(x)).ComputeDiff(v).changes}class S{static Assert(x,v){if(!x)throw new Error(v)}}class j{static Copy(x,v,g,D,c){for(let C=0;C<c;C++)g[D+C]=x[v+C]}static Copy2(x,v,g,D,c){for(let C=0;C<c;C++)g[D+C]=x[v+C]}}class T{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new p(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(x,v){this.m_originalStart=Math.min(this.m_originalStart,x),this.m_modifiedStart=Math.min(this.m_modifiedStart,v),this.m_originalCount++}AddModifiedElement(x,v){this.m_originalStart=Math.min(this.m_originalStart,x),this.m_modifiedStart=Math.min(this.m_modifiedStart,v),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class B{constructor(x,v,g=null){this.ContinueProcessingPredicate=g,this._originalSequence=x,this._modifiedSequence=v;const[D,c,C]=B._getElements(x),[M,E,_]=B._getElements(v);this._hasStrings=C&&_,this._originalStringElements=D,this._originalElementsOrHash=c,this._modifiedStringElements=M,this._modifiedElementsOrHash=E,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(x){return x.length>0&&typeof x[0]=="string"}static _getElements(x){const v=x.getElements();if(B._isStringArray(v)){const g=new Int32Array(v.length);for(let D=0,c=v.length;D<c;D++)g[D]=(0,d.Cv)(v[D],0);return[v,g,!0]}return v instanceof Int32Array?[[],v,!1]:[[],new Int32Array(v),!1]}ElementsAreEqual(x,v){return this._originalElementsOrHash[x]!==this._modifiedElementsOrHash[v]?!1:this._hasStrings?this._originalStringElements[x]===this._modifiedStringElements[v]:!0}ElementsAreStrictEqual(x,v){if(!this.ElementsAreEqual(x,v))return!1;const g=B._getStrictElement(this._originalSequence,x),D=B._getStrictElement(this._modifiedSequence,v);return g===D}static _getStrictElement(x,v){return typeof x.getStrictElement=="function"?x.getStrictElement(v):null}OriginalElementsAreEqual(x,v){return this._originalElementsOrHash[x]!==this._originalElementsOrHash[v]?!1:this._hasStrings?this._originalStringElements[x]===this._originalStringElements[v]:!0}ModifiedElementsAreEqual(x,v){return this._modifiedElementsOrHash[x]!==this._modifiedElementsOrHash[v]?!1:this._hasStrings?this._modifiedStringElements[x]===this._modifiedStringElements[v]:!0}ComputeDiff(x){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,x)}_ComputeDiff(x,v,g,D,c){const C=[!1];let M=this.ComputeDiffRecursive(x,v,g,D,C);return c&&(M=this.PrettifyChanges(M)),{quitEarly:C[0],changes:M}}ComputeDiffRecursive(x,v,g,D,c){for(c[0]=!1;x<=v&&g<=D&&this.ElementsAreEqual(x,g);)x++,g++;for(;v>=x&&D>=g&&this.ElementsAreEqual(v,D);)v--,D--;if(x>v||g>D){let N;return g<=D?(S.Assert(x===v+1,"originalStart should only be one more than originalEnd"),N=[new p(x,0,g,D-g+1)]):x<=v?(S.Assert(g===D+1,"modifiedStart should only be one more than modifiedEnd"),N=[new p(x,v-x+1,g,0)]):(S.Assert(x===v+1,"originalStart should only be one more than originalEnd"),S.Assert(g===D+1,"modifiedStart should only be one more than modifiedEnd"),N=[]),N}const C=[0],M=[0],E=this.ComputeRecursionPoint(x,v,g,D,C,M,c),_=C[0],L=M[0];if(E!==null)return E;if(!c[0]){const N=this.ComputeDiffRecursive(x,_,g,L,c);let b=[];return c[0]?b=[new p(_+1,v-(_+1)+1,L+1,D-(L+1)+1)]:b=this.ComputeDiffRecursive(_+1,v,L+1,D,c),this.ConcatenateChanges(N,b)}return[new p(x,v-x+1,g,D-g+1)]}WALKTRACE(x,v,g,D,c,C,M,E,_,L,N,b,I,k,W,q,re,de){let pe=null,ae=null,ue=new T,te=v,K=g,U=I[0]-q[0]-D,ee=-1073741824,X=this.m_forwardHistory.length-1;do{const le=U+x;le===te||le<K&&_[le-1]<_[le+1]?(N=_[le+1],k=N-U-D,N<ee&&ue.MarkNextChange(),ee=N,ue.AddModifiedElement(N+1,k),U=le+1-x):(N=_[le-1]+1,k=N-U-D,N<ee&&ue.MarkNextChange(),ee=N-1,ue.AddOriginalElement(N,k+1),U=le-1-x),X>=0&&(_=this.m_forwardHistory[X],x=_[0],te=1,K=_.length-1)}while(--X>=-1);if(pe=ue.getReverseChanges(),de[0]){let le=I[0]+1,oe=q[0]+1;if(pe!==null&&pe.length>0){const Ce=pe[pe.length-1];le=Math.max(le,Ce.getOriginalEnd()),oe=Math.max(oe,Ce.getModifiedEnd())}ae=[new p(le,b-le+1,oe,W-oe+1)]}else{ue=new T,te=C,K=M,U=I[0]-q[0]-E,ee=1073741824,X=re?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const le=U+c;le===te||le<K&&L[le-1]>=L[le+1]?(N=L[le+1]-1,k=N-U-E,N>ee&&ue.MarkNextChange(),ee=N+1,ue.AddOriginalElement(N+1,k+1),U=le+1-c):(N=L[le-1],k=N-U-E,N>ee&&ue.MarkNextChange(),ee=N,ue.AddModifiedElement(N+1,k+1),U=le-1-c),X>=0&&(L=this.m_reverseHistory[X],c=L[0],te=1,K=L.length-1)}while(--X>=-1);ae=ue.getChanges()}return this.ConcatenateChanges(pe,ae)}ComputeRecursionPoint(x,v,g,D,c,C,M){let E=0,_=0,L=0,N=0,b=0,I=0;x--,g--,c[0]=0,C[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const k=v-x+(D-g),W=k+1,q=new Int32Array(W),re=new Int32Array(W),de=D-g,pe=v-x,ae=x-g,ue=v-D,K=(pe-de)%2==0;q[de]=x,re[pe]=v,M[0]=!1;for(let U=1;U<=k/2+1;U++){let ee=0,X=0;L=this.ClipDiagonalBound(de-U,U,de,W),N=this.ClipDiagonalBound(de+U,U,de,W);for(let oe=L;oe<=N;oe+=2){oe===L||oe<N&&q[oe-1]<q[oe+1]?E=q[oe+1]:E=q[oe-1]+1,_=E-(oe-de)-ae;const Ce=E;for(;E<v&&_<D&&this.ElementsAreEqual(E+1,_+1);)E++,_++;if(q[oe]=E,E+_>ee+X&&(ee=E,X=_),!K&&Math.abs(oe-pe)<=U-1&&E>=re[oe])return c[0]=E,C[0]=_,Ce<=re[oe]&&1447>0&&U<=1447+1?this.WALKTRACE(de,L,N,ae,pe,b,I,ue,q,re,E,v,c,_,D,C,K,M):null}const le=(ee-x+(X-g)-U)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(ee,le))return M[0]=!0,c[0]=ee,C[0]=X,le>0&&1447>0&&U<=1447+1?this.WALKTRACE(de,L,N,ae,pe,b,I,ue,q,re,E,v,c,_,D,C,K,M):(x++,g++,[new p(x,v-x+1,g,D-g+1)]);b=this.ClipDiagonalBound(pe-U,U,pe,W),I=this.ClipDiagonalBound(pe+U,U,pe,W);for(let oe=b;oe<=I;oe+=2){oe===b||oe<I&&re[oe-1]>=re[oe+1]?E=re[oe+1]-1:E=re[oe-1],_=E-(oe-pe)-ue;const Ce=E;for(;E>x&&_>g&&this.ElementsAreEqual(E,_);)E--,_--;if(re[oe]=E,K&&Math.abs(oe-de)<=U&&E<=q[oe])return c[0]=E,C[0]=_,Ce>=q[oe]&&1447>0&&U<=1447+1?this.WALKTRACE(de,L,N,ae,pe,b,I,ue,q,re,E,v,c,_,D,C,K,M):null}if(U<=1447){let oe=new Int32Array(N-L+2);oe[0]=de-L+1,j.Copy2(q,L,oe,1,N-L+1),this.m_forwardHistory.push(oe),oe=new Int32Array(I-b+2),oe[0]=pe-b+1,j.Copy2(re,b,oe,1,I-b+1),this.m_reverseHistory.push(oe)}}return this.WALKTRACE(de,L,N,ae,pe,b,I,ue,q,re,E,v,c,_,D,C,K,M)}PrettifyChanges(x){for(let v=0;v<x.length;v++){const g=x[v],D=v<x.length-1?x[v+1].originalStart:this._originalElementsOrHash.length,c=v<x.length-1?x[v+1].modifiedStart:this._modifiedElementsOrHash.length,C=g.originalLength>0,M=g.modifiedLength>0;for(;g.originalStart+g.originalLength<D&&g.modifiedStart+g.modifiedLength<c&&(!C||this.OriginalElementsAreEqual(g.originalStart,g.originalStart+g.originalLength))&&(!M||this.ModifiedElementsAreEqual(g.modifiedStart,g.modifiedStart+g.modifiedLength));){const _=this.ElementsAreStrictEqual(g.originalStart,g.modifiedStart);if(this.ElementsAreStrictEqual(g.originalStart+g.originalLength,g.modifiedStart+g.modifiedLength)&&!_)break;g.originalStart++,g.modifiedStart++}let E=[null];if(v<x.length-1&&this.ChangesOverlap(x[v],x[v+1],E)){x[v]=E[0],x.splice(v+1,1),v--;continue}}for(let v=x.length-1;v>=0;v--){const g=x[v];let D=0,c=0;if(v>0){const N=x[v-1];D=N.originalStart+N.originalLength,c=N.modifiedStart+N.modifiedLength}const C=g.originalLength>0,M=g.modifiedLength>0;let E=0,_=this._boundaryScore(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength);for(let N=1;;N++){const b=g.originalStart-N,I=g.modifiedStart-N;if(b<D||I<c||C&&!this.OriginalElementsAreEqual(b,b+g.originalLength)||M&&!this.ModifiedElementsAreEqual(I,I+g.modifiedLength))break;const W=(b===D&&I===c?5:0)+this._boundaryScore(b,g.originalLength,I,g.modifiedLength);W>_&&(_=W,E=N)}g.originalStart-=E,g.modifiedStart-=E;const L=[null];if(v>0&&this.ChangesOverlap(x[v-1],x[v],L)){x[v-1]=L[0],x.splice(v,1),v++;continue}}if(this._hasStrings)for(let v=1,g=x.length;v<g;v++){const D=x[v-1],c=x[v],C=c.originalStart-D.originalStart-D.originalLength,M=D.originalStart,E=c.originalStart+c.originalLength,_=E-M,L=D.modifiedStart,N=c.modifiedStart+c.modifiedLength,b=N-L;if(C<5&&_<20&&b<20){const I=this._findBetterContiguousSequence(M,_,L,b,C);if(I){const[k,W]=I;(k!==D.originalStart+D.originalLength||W!==D.modifiedStart+D.modifiedLength)&&(D.originalLength=k-D.originalStart,D.modifiedLength=W-D.modifiedStart,c.originalStart=k+C,c.modifiedStart=W+C,c.originalLength=E-c.originalStart,c.modifiedLength=N-c.modifiedStart)}}}return x}_findBetterContiguousSequence(x,v,g,D,c){if(v<c||D<c)return null;const C=x+v-c+1,M=g+D-c+1;let E=0,_=0,L=0;for(let N=x;N<C;N++)for(let b=g;b<M;b++){const I=this._contiguousSequenceScore(N,b,c);I>0&&I>E&&(E=I,_=N,L=b)}return E>0?[_,L]:null}_contiguousSequenceScore(x,v,g){let D=0;for(let c=0;c<g;c++){if(!this.ElementsAreEqual(x+c,v+c))return 0;D+=this._originalStringElements[x+c].length}return D}_OriginalIsBoundary(x){return x<=0||x>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[x])}_OriginalRegionIsBoundary(x,v){if(this._OriginalIsBoundary(x)||this._OriginalIsBoundary(x-1))return!0;if(v>0){const g=x+v;if(this._OriginalIsBoundary(g-1)||this._OriginalIsBoundary(g))return!0}return!1}_ModifiedIsBoundary(x){return x<=0||x>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[x])}_ModifiedRegionIsBoundary(x,v){if(this._ModifiedIsBoundary(x)||this._ModifiedIsBoundary(x-1))return!0;if(v>0){const g=x+v;if(this._ModifiedIsBoundary(g-1)||this._ModifiedIsBoundary(g))return!0}return!1}_boundaryScore(x,v,g,D){const c=this._OriginalRegionIsBoundary(x,v)?1:0,C=this._ModifiedRegionIsBoundary(g,D)?1:0;return c+C}ConcatenateChanges(x,v){let g=[];if(x.length===0||v.length===0)return v.length>0?v:x;if(this.ChangesOverlap(x[x.length-1],v[0],g)){const D=new Array(x.length+v.length-1);return j.Copy(x,0,D,0,x.length-1),D[x.length-1]=g[0],j.Copy(v,1,D,x.length,v.length-1),D}else{const D=new Array(x.length+v.length);return j.Copy(x,0,D,0,x.length),j.Copy(v,0,D,x.length,v.length),D}}ChangesOverlap(x,v,g){if(S.Assert(x.originalStart<=v.originalStart,"Left change is not less than or equal to right change"),S.Assert(x.modifiedStart<=v.modifiedStart,"Left change is not less than or equal to right change"),x.originalStart+x.originalLength>=v.originalStart||x.modifiedStart+x.modifiedLength>=v.modifiedStart){const D=x.originalStart;let c=x.originalLength;const C=x.modifiedStart;let M=x.modifiedLength;return x.originalStart+x.originalLength>=v.originalStart&&(c=v.originalStart+v.originalLength-x.originalStart),x.modifiedStart+x.modifiedLength>=v.modifiedStart&&(M=v.modifiedStart+v.modifiedLength-x.modifiedStart),g[0]=new p(D,c,C,M),!0}else return g[0]=null,!1}ClipDiagonalBound(x,v,g,D){if(x>=0&&x<D)return x;const c=g,C=D-g-1,M=v%2==0;if(x<0){const E=c%2==0;return M===E?0:1}else{const E=C%2==0;return M===E?D-1:D-2}}}},17301:function(Tt,me,a){"use strict";a.d(me,{dL:function(){return z},Cp:function(){return O},ri:function(){return S},n2:function(){return T},FU:function(){return B},F0:function(){return F},b1:function(){return x},L6:function(){return v},B8:function(){return g}});class p{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(c){setTimeout(()=>{throw c.stack?new Error(c.message+`

`+c.stack):c},0)}}emit(c){this.listeners.forEach(C=>{C(c)})}onUnexpectedError(c){this.unexpectedErrorHandler(c),this.emit(c)}onUnexpectedExternalError(c){this.unexpectedErrorHandler(c)}}const d=new p;function z(D){T(D)||d.onUnexpectedError(D)}function O(D){T(D)||d.onUnexpectedExternalError(D)}function S(D){if(D instanceof Error){let{name:c,message:C}=D;const M=D.stacktrace||D.stack;return{$isError:!0,name:c,message:C,stack:M}}return D}const j="Canceled";function T(D){return D instanceof B?!0:D instanceof Error&&D.name===j&&D.message===j}class B extends Error{constructor(){super(j);this.name=this.message}}function F(){const D=new Error(j);return D.name=D.message,D}function x(D){return D?new Error(`Illegal argument: ${D}`):new Error("Illegal argument")}function v(D){return D?new Error(`Illegal state: ${D}`):new Error("Illegal state")}class g extends Error{constructor(c){super("NotSupported");c&&(this.message=c)}}},4669:function(Tt,me,a){"use strict";a.d(me,{ju:function(){return T},Q5:function(){return D},K3:function(){return c},D0:function(){return C},E7:function(){return M},ZD:function(){return E}});var p=a(17301),d=a(9917),z=a(91741),O=a(84013);let S=!1,j=!1;var T;(function(_){_.None=()=>d.JT.None;function L(ye){if(j){const{onListenerDidAdd:ke}=ye,Te=v.create();let ge=0;ye.onListenerDidAdd=()=>{++ge==2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Te.print()),ke==null||ke()}}}function N(ye){return(ke,Te=null,ge)=>{let we=!1,ze;return ze=ye(Qe=>{if(!we)return ze?ze.dispose():we=!0,ke.call(Te,Qe)},null,ge),we&&ze.dispose(),ze}}_.once=N;function b(ye,ke,Te){return de((ge,we=null,ze)=>ye(Qe=>ge.call(we,ke(Qe)),null,ze),Te)}_.map=b;function I(ye,ke,Te){return de((ge,we=null,ze)=>ye(Qe=>{ke(Qe),ge.call(we,Qe)},null,ze),Te)}_.forEach=I;function k(ye,ke,Te){return de((ge,we=null,ze)=>ye(Qe=>ke(Qe)&&ge.call(we,Qe),null,ze),Te)}_.filter=k;function W(ye){return ye}_.signal=W;function q(...ye){return(ke,Te=null,ge)=>(0,d.F8)(...ye.map(we=>we(ze=>ke.call(Te,ze),null,ge)))}_.any=q;function re(ye,ke,Te,ge){let we=Te;return b(ye,ze=>(we=ke(we,ze),we),ge)}_.reduce=re;function de(ye,ke){let Te;const ge={onFirstListenerAdd(){Te=ye(we.fire,we)},onLastListenerRemove(){Te.dispose()}};ke||L(ge);const we=new D(ge);return ke&&ke.add(we),we.event}function pe(ye,ke,Te=100,ge=!1,we,ze){let Qe,Pe,Oe,qe=0;const Je={leakWarningThreshold:we,onFirstListenerAdd(){Qe=ye(Fe=>{qe++,Pe=ke(Pe,Fe),ge&&!Oe&&(Ne.fire(Pe),Pe=void 0),clearTimeout(Oe),Oe=setTimeout(()=>{const ne=Pe;Pe=void 0,Oe=void 0,(!ge||qe>1)&&Ne.fire(ne),qe=0},Te)})},onLastListenerRemove(){Qe.dispose()}};ze||L(Je);const Ne=new D(Je);return ze&&ze.add(Ne),Ne.event}_.debounce=pe;function ae(ye,ke=(ge,we)=>ge===we,Te){let ge=!0,we;return k(ye,ze=>{const Qe=ge||!ke(ze,we);return ge=!1,we=ze,Qe},Te)}_.latch=ae;function ue(ye,ke,Te){return[_.filter(ye,ke,Te),_.filter(ye,ge=>!ke(ge),Te)]}_.split=ue;function te(ye,ke=!1,Te=[]){let ge=Te.slice(),we=ye(Pe=>{ge?ge.push(Pe):Qe.fire(Pe)});const ze=()=>{ge&&ge.forEach(Pe=>Qe.fire(Pe)),ge=null},Qe=new D({onFirstListenerAdd(){we||(we=ye(Pe=>Qe.fire(Pe)))},onFirstListenerDidAdd(){ge&&(ke?setTimeout(ze):ze())},onLastListenerRemove(){we&&we.dispose(),we=null}});return Qe.event}_.buffer=te;class K{constructor(ke){this.event=ke}map(ke){return new K(b(this.event,ke))}forEach(ke){return new K(I(this.event,ke))}filter(ke){return new K(k(this.event,ke))}reduce(ke,Te){return new K(re(this.event,ke,Te))}latch(){return new K(ae(this.event))}debounce(ke,Te=100,ge=!1,we){return new K(pe(this.event,ke,Te,ge,we))}on(ke,Te,ge){return this.event(ke,Te,ge)}once(ke,Te,ge){return N(this.event)(ke,Te,ge)}}function U(ye){return new K(ye)}_.chain=U;function ee(ye,ke,Te=ge=>ge){const ge=(...Pe)=>Qe.fire(Te(...Pe)),we=()=>ye.on(ke,ge),ze=()=>ye.removeListener(ke,ge),Qe=new D({onFirstListenerAdd:we,onLastListenerRemove:ze});return Qe.event}_.fromNodeEventEmitter=ee;function X(ye,ke,Te=ge=>ge){const ge=(...Pe)=>Qe.fire(Te(...Pe)),we=()=>ye.addEventListener(ke,ge),ze=()=>ye.removeEventListener(ke,ge),Qe=new D({onFirstListenerAdd:we,onLastListenerRemove:ze});return Qe.event}_.fromDOMEventEmitter=X;function le(ye){return new Promise(ke=>N(ye)(ke))}_.toPromise=le;function oe(ye,ke){return ke(void 0),ye(Te=>ke(Te))}_.runAndSubscribe=oe;function Ce(ye,ke){let Te=null;function ge(ze){Te==null||Te.dispose(),Te=new d.SL,ke(ze,Te)}ge(void 0);const we=ye(ze=>ge(ze));return(0,d.OF)(()=>{we.dispose(),Te==null||Te.dispose()})}_.runAndSubscribeWithStore=Ce})(T||(T={}));class B{constructor(L){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${L}_${B._idPool++}`}start(L){this._stopWatch=new O.G(!0),this._listenerCount=L}stop(){if(this._stopWatch){const L=this._stopWatch.elapsed();this._elapsedOverall+=L,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${L.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}B._idPool=0;let F=-1;class x{constructor(L,N=Math.random().toString(18).slice(2,5)){this.customThreshold=L,this.name=N,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(L,N){let b=F;if(typeof this.customThreshold=="number"&&(b=this.customThreshold),b<=0||N<b)return;this._stacks||(this._stacks=new Map);const I=this._stacks.get(L.value)||0;if(this._stacks.set(L.value,I+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=b*.5;let k,W=0;for(const[q,re]of this._stacks)(!k||W<re)&&(k=q,W=re);console.warn(`[${this.name}] potential listener LEAK detected, having ${N} listeners already. MOST frequent listener (${W}):`),console.warn(k)}return()=>{const k=this._stacks.get(L.value)||0;this._stacks.set(L.value,k-1)}}}class v{constructor(L){this.value=L}static create(){var L;return new v((L=new Error().stack)!==null&&L!==void 0?L:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class g{constructor(L,N,b){this.callback=L,this.callbackThis=N,this.stack=b,this.subscription=new d.dt}invoke(L){this.callback.call(this.callbackThis,L)}}class D{constructor(L){var N;this._disposed=!1,this._options=L,this._leakageMon=F>0?new x(this._options&&this._options.leakWarningThreshold):void 0,this._perfMon=((N=this._options)===null||N===void 0?void 0:N._profName)?new B(this._options._profName):void 0}dispose(){var L,N,b,I;if(!this._disposed){if(this._disposed=!0,this._listeners){if(S){const k=Array.from(this._listeners);queueMicrotask(()=>{var W;for(const q of k)q.subscription.isset()&&(q.subscription.unset(),(W=q.stack)===null||W===void 0||W.print())})}this._listeners.clear()}(L=this._deliveryQueue)===null||L===void 0||L.clear(),(b=(N=this._options)===null||N===void 0?void 0:N.onLastListenerRemove)===null||b===void 0||b.call(N),(I=this._leakageMon)===null||I===void 0||I.dispose()}}get event(){return this._event||(this._event=(L,N,b)=>{var I,k,W;this._listeners||(this._listeners=new z.S);const q=this._listeners.isEmpty();q&&((I=this._options)===null||I===void 0?void 0:I.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this);let re,de;this._leakageMon&&this._listeners.size>=30&&(de=v.create(),re=this._leakageMon.check(de,this._listeners.size+1)),S&&(de=de??v.create());const pe=new g(L,N,de),ae=this._listeners.push(pe);q&&((k=this._options)===null||k===void 0?void 0:k.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),((W=this._options)===null||W===void 0?void 0:W.onListenerDidAdd)&&this._options.onListenerDidAdd(this,L,N);const ue=pe.subscription.set(()=>{re&&re(),this._disposed||(ae(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return b instanceof d.SL?b.add(ue):Array.isArray(b)&&b.push(ue),ue}),this._event}fire(L){var N,b;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new z.S);for(let I of this._listeners)this._deliveryQueue.push([I,L]);for((N=this._perfMon)===null||N===void 0||N.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[I,k]=this._deliveryQueue.shift();try{I.invoke(k)}catch(W){(0,p.dL)(W)}}(b=this._perfMon)===null||b===void 0||b.stop()}}}class c extends D{constructor(L){super(L);this._isPaused=0,this._eventQueue=new z.S,this._mergeFn=L==null?void 0:L.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused==0)if(this._mergeFn){const L=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(L))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(L){this._listeners&&(this._isPaused!==0?this._eventQueue.push(L):super.fire(L))}}class C extends c{constructor(L){var N;super(L);this._delay=(N=L.delay)!==null&&N!==void 0?N:100}fire(L){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(L)}}class M{constructor(){this.buffers=[]}wrapEvent(L){return(N,b,I)=>L(k=>{const W=this.buffers[this.buffers.length-1];W?W.push(()=>N.call(b,k)):N.call(b,k)},void 0,I)}bufferEvents(L){const N=[];this.buffers.push(N);const b=L();return this.buffers.pop(),N.forEach(I=>I()),b}}class E{constructor(){this.listening=!1,this.inputEvent=T.None,this.inputEventListener=d.JT.None,this.emitter=new D({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(L){this.inputEvent=L,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=L(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}},15527:function(Tt,me,a){"use strict";a.d(me,{ej:function(){return S},fn:function(){return j},yj:function(){return T},KM:function(){return B},vY:function(){return x},oP:function(){return v}});var p=a(88721),d=a(1432),z=a(25924);function O(g){return g===47||g===92}function S(g){return g.replace(/[\\/]/g,p.KR.sep)}function j(g){return g.indexOf("/")===-1&&(g=S(g)),/^[a-zA-Z]:(\/|$)/.test(g)&&(g="/"+g),g}function T(g,D=p.KR.sep){if(!g)return"";const c=g.length,C=g.charCodeAt(0);if(O(C)){if(O(g.charCodeAt(1))&&!O(g.charCodeAt(2))){let E=3;const _=E;for(;E<c&&!O(g.charCodeAt(E));E++);if(_!==E&&!O(g.charCodeAt(E+1))){for(E+=1;E<c;E++)if(O(g.charCodeAt(E)))return g.slice(0,E+1).replace(/[\\/]/g,D)}}return D}else if(F(C)&&g.charCodeAt(1)===58)return O(g.charCodeAt(2))?g.slice(0,2)+D:g.slice(0,2);let M=g.indexOf("://");if(M!==-1){for(M+=3;M<c;M++)if(O(g.charCodeAt(M)))return g.slice(0,M+1)}return""}function B(g,D,c,C=p.ir){if(g===D)return!0;if(!g||!D||D.length>g.length)return!1;if(c){if(!(0,z.ok)(g,D))return!1;if(D.length===g.length)return!0;let E=D.length;return D.charAt(D.length-1)===C&&E--,g.charAt(E)===C}return D.charAt(D.length-1)!==C&&(D+=C),g.indexOf(D)===0}function F(g){return g>=65&&g<=90||g>=97&&g<=122}function x(g){const D=(0,p.Fv)(g);return d.ED?g.length>3?!1:v(D)&&(g.length===2||D.charCodeAt(2)===92):D===p.KR.sep}function v(g,D){return(D!==void 0?D:d.ED)?F(g.charCodeAt(0))&&g.charCodeAt(1)===58:!1}},75392:function(Tt,me,a){"use strict";a.d(me,{or:function(){return z},Ji:function(){return S},ir:function(){return T},KZ:function(){return re},Oh:function(){return K},jB:function(){return U},mB:function(){return ee},CL:function(){return Ne},EW:function(){return Fe},l7:function(){return ie}});var p=a(43702),d=a(25924);function z(...Ge){return function(nt,_t){for(let Ot=0,rn=Ge.length;Ot<rn;Ot++){const gt=Ge[Ot](nt,_t);if(gt)return gt}return null}}const O=j.bind(void 0,!1),S=j.bind(void 0,!0);function j(Ge,nt,_t){if(!_t||_t.length<nt.length)return null;let Ot;return Ge?Ot=d.ok(_t,nt):Ot=_t.indexOf(nt)===0,Ot?nt.length>0?[{start:0,end:nt.length}]:[]:null}function T(Ge,nt){const _t=nt.toLowerCase().indexOf(Ge.toLowerCase());return _t===-1?null:[{start:_t,end:_t+Ge.length}]}function B(Ge,nt){return F(Ge.toLowerCase(),nt.toLowerCase(),0,0)}function F(Ge,nt,_t,Ot){if(_t===Ge.length)return[];if(Ot===nt.length)return null;if(Ge[_t]===nt[Ot]){let rn=null;return(rn=F(Ge,nt,_t+1,Ot+1))?_({start:Ot,end:Ot+1},rn):null}return F(Ge,nt,_t,Ot+1)}function x(Ge){return 97<=Ge&&Ge<=122}function v(Ge){return 65<=Ge&&Ge<=90}function g(Ge){return 48<=Ge&&Ge<=57}function D(Ge){return Ge===32||Ge===9||Ge===10||Ge===13}const c=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(Ge=>c.add(Ge.charCodeAt(0)));function C(Ge){return D(Ge)||c.has(Ge)}function M(Ge,nt){return Ge===nt||C(Ge)&&C(nt)}function E(Ge){return x(Ge)||v(Ge)||g(Ge)}function _(Ge,nt){return nt.length===0?nt=[Ge]:Ge.end===nt[0].start?nt[0].start=Ge.start:nt.unshift(Ge),nt}function L(Ge,nt){for(let _t=nt;_t<Ge.length;_t++){const Ot=Ge.charCodeAt(_t);if(v(Ot)||g(Ot)||_t>0&&!E(Ge.charCodeAt(_t-1)))return _t}return Ge.length}function N(Ge,nt,_t,Ot){if(_t===Ge.length)return[];if(Ot===nt.length)return null;if(Ge[_t]!==nt[Ot].toLowerCase())return null;{let rn=null,gt=Ot+1;for(rn=N(Ge,nt,_t+1,Ot+1);!rn&&(gt=L(nt,gt))<nt.length;)rn=N(Ge,nt,_t+1,gt),gt++;return rn===null?null:_({start:Ot,end:Ot+1},rn)}}function b(Ge){let nt=0,_t=0,Ot=0,rn=0,gt=0;for(let Ve=0;Ve<Ge.length;Ve++)gt=Ge.charCodeAt(Ve),v(gt)&&nt++,x(gt)&&_t++,E(gt)&&Ot++,g(gt)&&rn++;const Ue=nt/Ge.length,Ye=_t/Ge.length,dt=Ot/Ge.length,Re=rn/Ge.length;return{upperPercent:Ue,lowerPercent:Ye,alphaPercent:dt,numericPercent:Re}}function I(Ge){const{upperPercent:nt,lowerPercent:_t}=Ge;return _t===0&&nt>.6}function k(Ge){const{upperPercent:nt,lowerPercent:_t,alphaPercent:Ot,numericPercent:rn}=Ge;return _t>.2&&nt<.8&&Ot>.6&&rn<.2}function W(Ge){let nt=0,_t=0,Ot=0,rn=0;for(let gt=0;gt<Ge.length;gt++)Ot=Ge.charCodeAt(gt),v(Ot)&&nt++,x(Ot)&&_t++,D(Ot)&&rn++;return(nt===0||_t===0)&&rn===0?Ge.length<=30:nt<=5}function q(Ge,nt){if(!nt||(nt=nt.trim(),nt.length===0)||!W(Ge)||nt.length>60)return null;const _t=b(nt);if(!k(_t)){if(!I(_t))return null;nt=nt.toLowerCase()}let Ot=null,rn=0;for(Ge=Ge.toLowerCase();rn<nt.length&&(Ot=N(Ge,nt,0,rn))===null;)rn=L(nt,rn+1);return Ot}function re(Ge,nt,_t=!1){if(!nt||nt.length===0)return null;let Ot=null,rn=0;for(Ge=Ge.toLowerCase(),nt=nt.toLowerCase();rn<nt.length&&(Ot=de(Ge,nt,0,rn,_t))===null;)rn=pe(nt,rn+1);return Ot}function de(Ge,nt,_t,Ot,rn){if(_t===Ge.length)return[];if(Ot===nt.length)return null;if(M(Ge.charCodeAt(_t),nt.charCodeAt(Ot))){let gt=null,Ue=Ot+1;if(gt=de(Ge,nt,_t+1,Ot+1,rn),!rn)for(;!gt&&(Ue=pe(nt,Ue))<nt.length;)gt=de(Ge,nt,_t+1,Ue,rn),Ue++;return gt===null?null:_({start:Ot,end:Ot+1},gt)}else return null}function pe(Ge,nt){for(let _t=nt;_t<Ge.length;_t++)if(C(Ge.charCodeAt(_t))||_t>0&&C(Ge.charCodeAt(_t-1)))return _t;return Ge.length}const ae=z(S,q,T),ue=z(S,q,B),te=new p.z6(1e4);function K(Ge,nt,_t=!1){if(typeof Ge!="string"||typeof nt!="string")return null;let Ot=te.get(Ge);Ot||(Ot=new RegExp(d.un(Ge),"i"),te.set(Ge,Ot));const rn=Ot.exec(nt);return rn?[{start:rn.index,end:rn.index+rn[0].length}]:_t?ue(Ge,nt):ae(Ge,nt)}function U(Ge,nt,_t,Ot,rn,gt){const Ue=Math.min(13,Ge.length);for(;_t<Ue;_t++){const Ye=Fe(Ge,nt,_t,Ot,rn,gt,!1);if(Ye)return Ye}return[0,gt]}function ee(Ge){if(typeof Ge=="undefined")return[];const nt=[],_t=Ge[1];for(let Ot=Ge.length-1;Ot>1;Ot--){const rn=Ge[Ot]+_t,gt=nt[nt.length-1];gt&&gt.end===rn?gt.end=rn+1:nt.push({start:rn,end:rn+1})}return nt}const X=128;function le(){const Ge=[],nt=[];for(let _t=0;_t<=X;_t++)nt[_t]=0;for(let _t=0;_t<=X;_t++)Ge.push(nt.slice(0));return Ge}function oe(Ge){const nt=[];for(let _t=0;_t<=Ge;_t++)nt[_t]=0;return nt}const Ce=oe(2*X),ye=oe(2*X),ke=le(),Te=le(),ge=le(),we=!1;function ze(Ge,nt,_t,Ot,rn){function gt(Ye,dt,Re=" "){for(;Ye.length<dt;)Ye=Re+Ye;return Ye}let Ue=` |   |${Ot.split("").map(Ye=>gt(Ye,3)).join("|")}
`;for(let Ye=0;Ye<=_t;Ye++)Ye===0?Ue+=" |":Ue+=`${nt[Ye-1]}|`,Ue+=Ge[Ye].slice(0,rn+1).map(dt=>gt(dt.toString(),3)).join("|")+`
`;return Ue}function Qe(Ge,nt,_t,Ot){Ge=Ge.substr(nt),_t=_t.substr(Ot),console.log(ze(Te,Ge,Ge.length,_t,_t.length)),console.log(ze(ge,Ge,Ge.length,_t,_t.length)),console.log(ze(ke,Ge,Ge.length,_t,_t.length))}function Pe(Ge,nt){if(nt<0||nt>=Ge.length)return!1;const _t=Ge.codePointAt(nt);switch(_t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!d.C8(_t)}}function Oe(Ge,nt){if(nt<0||nt>=Ge.length)return!1;switch(Ge.charCodeAt(nt)){case 32:case 9:return!0;default:return!1}}function qe(Ge,nt,_t){return nt[Ge]!==_t[Ge]}function Je(Ge,nt,_t,Ot,rn,gt,Ue=!1){for(;nt<_t&&rn<gt;)Ge[nt]===Ot[rn]&&(Ue&&(Ce[nt]=rn),nt+=1),rn+=1;return nt===_t}var Ne;(function(Ge){Ge.Default=[-100,0];function nt(_t){return!_t||_t.length===2&&_t[0]===-100&&_t[1]===0}Ge.isDefault=nt})(Ne||(Ne={}));function Fe(Ge,nt,_t,Ot,rn,gt,Ue){const Ye=Ge.length>X?X:Ge.length,dt=Ot.length>X?X:Ot.length;if(_t>=Ye||gt>=dt||Ye-_t>dt-gt||!Je(nt,_t,Ye,rn,gt,dt,!0))return;ne(Ye,dt,_t,gt,nt,rn);let Re=1,Ve=1,at=_t,pt=gt;const Be=[!1];for(Re=1,at=_t;at<Ye;Re++,at++){const ft=Ce[at],an=ye[at],An=at+1<Ye?ye[at+1]:dt;for(Ve=ft-gt+1,pt=ft;pt<An;Ve++,pt++){let Fn=Number.MIN_SAFE_INTEGER,Ht=!1;pt<=an&&(Fn=Q(Ge,nt,at,_t,Ot,rn,pt,dt,gt,ke[Re-1][Ve-1]===0,Be));let Kt=0;Fn!==Number.MAX_SAFE_INTEGER&&(Ht=!0,Kt=Fn+Te[Re-1][Ve-1]);const pn=pt>ft,Vn=pn?Te[Re][Ve-1]+(ke[Re][Ve-1]>0?-5:0):0,kt=pt>ft+1&&ke[Re][Ve-1]>0,Zt=kt?Te[Re][Ve-2]+(ke[Re][Ve-2]>0?-5:0):0;if(kt&&(!pn||Zt>=Vn)&&(!Ht||Zt>=Kt))Te[Re][Ve]=Zt,ge[Re][Ve]=3,ke[Re][Ve]=0;else if(pn&&(!Ht||Vn>=Kt))Te[Re][Ve]=Vn,ge[Re][Ve]=2,ke[Re][Ve]=0;else if(Ht)Te[Re][Ve]=Kt,ge[Re][Ve]=1,ke[Re][Ve]=ke[Re-1][Ve-1]+1;else throw new Error("not possible")}}if(we&&Qe(Ge,_t,Ot,gt),!Be[0]&&!Ue)return;Re--,Ve--;const je=[Te[Re][Ve],gt];let Et=0,Dt=0;for(;Re>=1;){let ft=Ve;do{const an=ge[Re][ft];if(an===3)ft=ft-2;else if(an===2)ft=ft-1;else break}while(ft>=1);Et>1&&nt[_t+Re-1]===rn[gt+Ve-1]&&!qe(ft+gt-1,Ot,rn)&&Et+1>ke[Re][ft]&&(ft=Ve),ft===Ve?Et++:Et=1,Dt||(Dt=ft),Re--,Ve=ft-1,je.push(Ve)}dt===Ye&&(je[0]+=2);const Xe=Dt-Ye;return je[0]-=Xe,je}function ne(Ge,nt,_t,Ot,rn,gt){let Ue=Ge-1,Ye=nt-1;for(;Ue>=_t&&Ye>=Ot;)rn[Ue]===gt[Ye]&&(ye[Ue]=Ye,Ue--),Ye--}function Q(Ge,nt,_t,Ot,rn,gt,Ue,Ye,dt,Re,Ve){if(nt[_t]!==gt[Ue])return Number.MIN_SAFE_INTEGER;let at=1,pt=!1;return Ue===_t-Ot?at=Ge[_t]===rn[Ue]?7:5:qe(Ue,rn,gt)&&(Ue===0||!qe(Ue-1,rn,gt))?(at=Ge[_t]===rn[Ue]?7:5,pt=!0):Pe(gt,Ue)&&(Ue===0||!Pe(gt,Ue-1))?at=5:(Pe(gt,Ue-1)||Oe(gt,Ue-1))&&(at=5,pt=!0),at>1&&_t===Ot&&(Ve[0]=!0),pt||(pt=qe(Ue,rn,gt)||Pe(gt,Ue-1)||Oe(gt,Ue-1)),_t===Ot?Ue>dt&&(at-=pt?3:5):Re?at+=pt?2:0:at+=pt?0:1,Ue+1===Ye&&(at-=pt?3:5),at}function ie(Ge,nt,_t,Ot,rn,gt,Ue){return xe(Ge,nt,_t,Ot,rn,gt,!0,Ue)}function xe(Ge,nt,_t,Ot,rn,gt,Ue,Ye){let dt=Fe(Ge,nt,_t,Ot,rn,gt,Ye);if(dt&&!Ue)return dt;if(Ge.length>=3){const Re=Math.min(7,Ge.length-1);for(let Ve=_t+1;Ve<Re;Ve++){const at=be(Ge,Ve);if(at){const pt=Fe(at,at.toLowerCase(),_t,Ot,rn,gt,Ye);pt&&(pt[0]-=3,(!dt||pt[0]>dt[0])&&(dt=pt))}}}return dt}function be(Ge,nt){if(nt+1>=Ge.length)return;const _t=Ge[nt],Ot=Ge[nt+1];if(_t!==Ot)return Ge.slice(0,nt)+Ot+_t+Ge.slice(nt+2)}},88289:function(Tt,me,a){"use strict";a.d(me,{I:function(){return p}});function p(d){const z=this;let O=!1,S;return function(){return O||(O=!0,S=d.apply(z,arguments)),S}}},89954:function(Tt,me,a){"use strict";a.d(me,{vp:function(){return d},SP:function(){return z},Cv:function(){return j},yP:function(){return D}});var p=a(25924);function d(c){return z(c,0)}function z(c,C){switch(typeof c){case"object":return c===null?O(349,C):Array.isArray(c)?T(c,C):B(c,C);case"string":return j(c,C);case"boolean":return S(c,C);case"number":return O(c,C);case"undefined":return O(937,C);default:return O(617,C)}}function O(c,C){return(C<<5)-C+c|0}function S(c,C){return O(c?433:863,C)}function j(c,C){C=O(149417,C);for(let M=0,E=c.length;M<E;M++)C=O(c.charCodeAt(M),C);return C}function T(c,C){return C=O(104579,C),c.reduce((M,E)=>z(E,M),C)}function B(c,C){return C=O(181387,C),Object.keys(c).sort().reduce((M,E)=>(M=j(E,M),z(c[E],M)),C)}function F(c,C,M=32){const E=M-C,_=~((1<<E)-1);return(c<<C|(_&c)>>>E)>>>0}function x(c,C=0,M=c.byteLength,E=0){for(let _=0;_<M;_++)c[C+_]=E}function v(c,C,M="0"){for(;c.length<C;)c=M+c;return c}function g(c,C=32){return c instanceof ArrayBuffer?Array.from(new Uint8Array(c)).map(M=>M.toString(16).padStart(2,"0")).join(""):v((c>>>0).toString(16),C/4)}class D{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(C){const M=C.length;if(M===0)return;const E=this._buff;let _=this._buffLen,L=this._leftoverHighSurrogate,N,b;for(L!==0?(N=L,b=-1,L=0):(N=C.charCodeAt(0),b=0);;){let I=N;if(p.ZG(N))if(b+1<M){const k=C.charCodeAt(b+1);p.YK(k)?(b++,I=p.rL(N,k)):I=65533}else{L=N;break}else p.YK(N)&&(I=65533);if(_=this._push(E,_,I),b++,b<M)N=C.charCodeAt(b);else break}this._buffLen=_,this._leftoverHighSurrogate=L}_push(C,M,E){return E<128?C[M++]=E:E<2048?(C[M++]=192|(E&1984)>>>6,C[M++]=128|(E&63)>>>0):E<65536?(C[M++]=224|(E&61440)>>>12,C[M++]=128|(E&4032)>>>6,C[M++]=128|(E&63)>>>0):(C[M++]=240|(E&1835008)>>>18,C[M++]=128|(E&258048)>>>12,C[M++]=128|(E&4032)>>>6,C[M++]=128|(E&63)>>>0),M>=64&&(this._step(),M-=64,this._totalLen+=64,C[0]=C[64+0],C[1]=C[64+1],C[2]=C[64+2]),M}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),g(this._h0)+g(this._h1)+g(this._h2)+g(this._h3)+g(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,x(this._buff,this._buffLen),this._buffLen>56&&(this._step(),x(this._buff));const C=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(C/4294967296),!1),this._buffDV.setUint32(60,C%4294967296,!1),this._step()}_step(){const C=D._bigBlock32,M=this._buffDV;for(let q=0;q<64;q+=4)C.setUint32(q,M.getUint32(q,!1),!1);for(let q=64;q<320;q+=4)C.setUint32(q,F(C.getUint32(q-12,!1)^C.getUint32(q-32,!1)^C.getUint32(q-56,!1)^C.getUint32(q-64,!1),1),!1);let E=this._h0,_=this._h1,L=this._h2,N=this._h3,b=this._h4,I,k,W;for(let q=0;q<80;q++)q<20?(I=_&L|~_&N,k=1518500249):q<40?(I=_^L^N,k=1859775393):q<60?(I=_&L|_&N|L&N,k=2400959708):(I=_^L^N,k=3395469782),W=F(E,5)+I+b+k+C.getUint32(q*4,!1)&4294967295,b=N,N=L,L=F(_,30),_=E,E=W;this._h0=this._h0+E&4294967295,this._h1=this._h1+_&4294967295,this._h2=this._h2+L&4294967295,this._h3=this._h3+N&4294967295,this._h4=this._h4+b&4294967295}}D._bigBlock32=new DataView(new ArrayBuffer(320))},59365:function(Tt,me,a){"use strict";a.d(me,{W5:function(){return z},CP:function(){return O},Fr:function(){return S},oR:function(){return T},v1:function(){return B}});var p=a(17301),d=a(21212);class z{constructor(x="",v=!1){var g,D,c;if(this.value=x,typeof this.value!="string")throw(0,p.b1)("value");typeof v=="boolean"?(this.isTrusted=v,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(g=v.isTrusted)!==null&&g!==void 0?g:void 0,this.supportThemeIcons=(D=v.supportThemeIcons)!==null&&D!==void 0?D:!1,this.supportHtml=(c=v.supportHtml)!==null&&c!==void 0?c:!1)}appendText(x,v=0){return this.value+=j(this.supportThemeIcons?(0,d.Qo)(x):x).replace(/([ \t]+)/g,(g,D)=>"&nbsp;".repeat(D.length)).replace(/\>/gm,"\\>").replace(/\n/g,v===1?`\\
`:`

`),this}appendMarkdown(x){return this.value+=x,this}appendCodeblock(x,v){return this.value+="\n```",this.value+=x,this.value+=`
`,this.value+=v,this.value+="\n```\n",this}}function O(F){return S(F)?!F.value:Array.isArray(F)?F.every(O):!0}function S(F){return F instanceof z?!0:F&&typeof F=="object"?typeof F.value=="string"&&(typeof F.isTrusted=="boolean"||F.isTrusted===void 0)&&(typeof F.supportThemeIcons=="boolean"||F.supportThemeIcons===void 0):!1}function j(F){return F.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function T(F){return F&&F.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function B(F){const x=[],v=F.split("|").map(D=>D.trim());F=v[0];const g=v[1];if(g){const D=/height=(\d+)/.exec(g),c=/width=(\d+)/.exec(g),C=D?D[1]:"",M=c?c[1]:"",E=isFinite(parseInt(M)),_=isFinite(parseInt(C));E&&x.push(`width="${M}"`),_&&x.push(`height="${C}"`)}return{href:F,dimensions:x}}},21212:function(Tt,me,a){"use strict";a.d(me,{Qo:function(){return B},f$:function(){return x},x$:function(){return g},Ho:function(){return D},Gt:function(){return C}});var p=a(73046),d=a(75392),z=a(25924);const O="$(",S=new RegExp(`\\$\\(${p.dT.iconNameExpression}(?:${p.dT.iconModifierExpression})?\\)`,"g"),j=new RegExp(p.dT.iconNameCharacter),T=new RegExp(`(\\\\)?${S.source}`,"g");function B(M){return M.replace(T,(E,_)=>_?E:`\\${E}`)}const F=new RegExp(`\\\\${S.source}`,"g");function x(M){return M.replace(F,E=>`\\${E}`)}const v=new RegExp(`(\\s)?(\\\\)?${S.source}(\\s)?`,"g");function g(M){return M.indexOf(O)===-1?M:M.replace(v,(E,_,L,N)=>L?E:_||N||"")}function D(M){const E=M.indexOf(O);return E===-1?{text:M}:c(M,E)}function c(M,E){const _=[];let L="";function N(pe){if(pe){L+=pe;for(const ae of pe)_.push(k)}}let b=-1,I="",k=0,W,q,re=E;const de=M.length;for(N(M.substr(0,E));re<de;)W=M[re],q=M[re+1],W===O[0]&&q===O[1]?(b=re,N(I),I=O,re++):W===")"&&b!==-1?(k+=re-b+1,b=-1,I=""):b!==-1?j.test(W)?I+=W:(N(I),b=-1,I=""):N(W),re++;return N(I),{text:L,iconOffsets:_}}function C(M,E,_=!1){const{text:L,iconOffsets:N}=E;if(!N||N.length===0)return(0,d.Oh)(M,L,_);const b=(0,z.j3)(L," "),I=L.length-b.length,k=(0,d.Oh)(M,b,_);if(k)for(const W of k){const q=N[W.start+I]+I;W.start+=q,W.end+=q}return k}},44742:function(Tt,me,a){"use strict";a.d(me,{R:function(){return p},a:function(){return d}});class p{constructor(O){this._prefix=O,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const d=new p("id#")},53725:function(Tt,me,a){"use strict";a.d(me,{$:function(){return p}});var p;(function(d){function z(N){return N&&typeof N=="object"&&typeof N[Symbol.iterator]=="function"}d.is=z;const O=Object.freeze([]);function S(){return O}d.empty=S;function*j(N){yield N}d.single=j;function T(N){return N||O}d.from=T;function B(N){return!N||N[Symbol.iterator]().next().done===!0}d.isEmpty=B;function F(N){return N[Symbol.iterator]().next().value}d.first=F;function x(N,b){for(const I of N)if(b(I))return!0;return!1}d.some=x;function v(N,b){for(const I of N)if(b(I))return I}d.find=v;function*g(N,b){for(const I of N)b(I)&&(yield I)}d.filter=g;function*D(N,b){let I=0;for(const k of N)yield b(k,I++)}d.map=D;function*c(...N){for(const b of N)for(const I of b)yield I}d.concat=c;function*C(N){for(const b of N)for(const I of b)yield I}d.concatNested=C;function M(N,b,I){let k=I;for(const W of N)k=b(k,W);return k}d.reduce=M;function*E(N,b,I=N.length){for(b<0&&(b+=N.length),I<0?I+=N.length:I>N.length&&(I=N.length);b<I;b++)yield N[b]}d.slice=E;function _(N,b=Number.POSITIVE_INFINITY){const I=[];if(b===0)return[I,N];const k=N[Symbol.iterator]();for(let W=0;W<b;W++){const q=k.next();if(q.done)return[I,d.empty()];I.push(q.value)}return[I,{[Symbol.iterator](){return k}}]}d.consume=_;function L(N,b,I=(k,W)=>k===W){const k=N[Symbol.iterator](),W=b[Symbol.iterator]();for(;;){const q=k.next(),re=W.next();if(q.done!==re.done)return!1;if(q.done)return!0;if(!I(q.value,re.value))return!1}}d.equals=L})(p||(p={}))},22258:function(Tt,me,a){"use strict";a.d(me,{H_:function(){return S},Vd:function(){return x},kL:function(){return g},gx:function(){return D}});class p{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(C,M){this._keyCodeToStr[C]=M,this._strToKeyCode[M.toLowerCase()]=C}keyCodeToStr(C){return this._keyCodeToStr[C]}strToKeyCode(C){return this._strToKeyCode[C.toLowerCase()]||0}}const d=new p,z=new p,O=new p,S=new Array(230),j={},T=[],B=Object.create(null),F=Object.create(null),x=[],v=[];for(let c=0;c<=193;c++)x[c]=-1;for(let c=0;c<=127;c++)v[c]=-1;(function(){const c="",C=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",c,c],[0,1,1,"Hyper",0,c,0,c,c,c],[0,1,2,"Super",0,c,0,c,c,c],[0,1,3,"Fn",0,c,0,c,c,c],[0,1,4,"FnLock",0,c,0,c,c,c],[0,1,5,"Suspend",0,c,0,c,c,c],[0,1,6,"Resume",0,c,0,c,c,c],[0,1,7,"Turbo",0,c,0,c,c,c],[0,1,8,"Sleep",0,c,0,"VK_SLEEP",c,c],[0,1,9,"WakeUp",0,c,0,c,c,c],[31,0,10,"KeyA",31,"A",65,"VK_A",c,c],[32,0,11,"KeyB",32,"B",66,"VK_B",c,c],[33,0,12,"KeyC",33,"C",67,"VK_C",c,c],[34,0,13,"KeyD",34,"D",68,"VK_D",c,c],[35,0,14,"KeyE",35,"E",69,"VK_E",c,c],[36,0,15,"KeyF",36,"F",70,"VK_F",c,c],[37,0,16,"KeyG",37,"G",71,"VK_G",c,c],[38,0,17,"KeyH",38,"H",72,"VK_H",c,c],[39,0,18,"KeyI",39,"I",73,"VK_I",c,c],[40,0,19,"KeyJ",40,"J",74,"VK_J",c,c],[41,0,20,"KeyK",41,"K",75,"VK_K",c,c],[42,0,21,"KeyL",42,"L",76,"VK_L",c,c],[43,0,22,"KeyM",43,"M",77,"VK_M",c,c],[44,0,23,"KeyN",44,"N",78,"VK_N",c,c],[45,0,24,"KeyO",45,"O",79,"VK_O",c,c],[46,0,25,"KeyP",46,"P",80,"VK_P",c,c],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",c,c],[48,0,27,"KeyR",48,"R",82,"VK_R",c,c],[49,0,28,"KeyS",49,"S",83,"VK_S",c,c],[50,0,29,"KeyT",50,"T",84,"VK_T",c,c],[51,0,30,"KeyU",51,"U",85,"VK_U",c,c],[52,0,31,"KeyV",52,"V",86,"VK_V",c,c],[53,0,32,"KeyW",53,"W",87,"VK_W",c,c],[54,0,33,"KeyX",54,"X",88,"VK_X",c,c],[55,0,34,"KeyY",55,"Y",89,"VK_Y",c,c],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",c,c],[22,0,36,"Digit1",22,"1",49,"VK_1",c,c],[23,0,37,"Digit2",23,"2",50,"VK_2",c,c],[24,0,38,"Digit3",24,"3",51,"VK_3",c,c],[25,0,39,"Digit4",25,"4",52,"VK_4",c,c],[26,0,40,"Digit5",26,"5",53,"VK_5",c,c],[27,0,41,"Digit6",27,"6",54,"VK_6",c,c],[28,0,42,"Digit7",28,"7",55,"VK_7",c,c],[29,0,43,"Digit8",29,"8",56,"VK_8",c,c],[30,0,44,"Digit9",30,"9",57,"VK_9",c,c],[21,0,45,"Digit0",21,"0",48,"VK_0",c,c],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",c,c],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",c,c],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",c,c],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",c,c],[10,1,50,"Space",10,"Space",32,"VK_SPACE",c,c],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,c,0,c,c,c],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",c,c],[59,1,64,"F1",59,"F1",112,"VK_F1",c,c],[60,1,65,"F2",60,"F2",113,"VK_F2",c,c],[61,1,66,"F3",61,"F3",114,"VK_F3",c,c],[62,1,67,"F4",62,"F4",115,"VK_F4",c,c],[63,1,68,"F5",63,"F5",116,"VK_F5",c,c],[64,1,69,"F6",64,"F6",117,"VK_F6",c,c],[65,1,70,"F7",65,"F7",118,"VK_F7",c,c],[66,1,71,"F8",66,"F8",119,"VK_F8",c,c],[67,1,72,"F9",67,"F9",120,"VK_F9",c,c],[68,1,73,"F10",68,"F10",121,"VK_F10",c,c],[69,1,74,"F11",69,"F11",122,"VK_F11",c,c],[70,1,75,"F12",70,"F12",123,"VK_F12",c,c],[0,1,76,"PrintScreen",0,c,0,c,c,c],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",c,c],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",c,c],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",c,c],[14,1,80,"Home",14,"Home",36,"VK_HOME",c,c],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",c,c],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",c,c],[13,1,83,"End",13,"End",35,"VK_END",c,c],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",c,c],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",c],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",c],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",c],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",c],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",c,c],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",c,c],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",c,c],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",c,c],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",c,c],[3,1,94,"NumpadEnter",3,c,0,c,c,c],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",c,c],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",c,c],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",c,c],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",c,c],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",c,c],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",c,c],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",c,c],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",c,c],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",c,c],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",c,c],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",c,c],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",c,c],[58,1,107,"ContextMenu",58,"ContextMenu",93,c,c,c],[0,1,108,"Power",0,c,0,c,c,c],[0,1,109,"NumpadEqual",0,c,0,c,c,c],[71,1,110,"F13",71,"F13",124,"VK_F13",c,c],[72,1,111,"F14",72,"F14",125,"VK_F14",c,c],[73,1,112,"F15",73,"F15",126,"VK_F15",c,c],[74,1,113,"F16",74,"F16",127,"VK_F16",c,c],[75,1,114,"F17",75,"F17",128,"VK_F17",c,c],[76,1,115,"F18",76,"F18",129,"VK_F18",c,c],[77,1,116,"F19",77,"F19",130,"VK_F19",c,c],[0,1,117,"F20",0,c,0,"VK_F20",c,c],[0,1,118,"F21",0,c,0,"VK_F21",c,c],[0,1,119,"F22",0,c,0,"VK_F22",c,c],[0,1,120,"F23",0,c,0,"VK_F23",c,c],[0,1,121,"F24",0,c,0,"VK_F24",c,c],[0,1,122,"Open",0,c,0,c,c,c],[0,1,123,"Help",0,c,0,c,c,c],[0,1,124,"Select",0,c,0,c,c,c],[0,1,125,"Again",0,c,0,c,c,c],[0,1,126,"Undo",0,c,0,c,c,c],[0,1,127,"Cut",0,c,0,c,c,c],[0,1,128,"Copy",0,c,0,c,c,c],[0,1,129,"Paste",0,c,0,c,c,c],[0,1,130,"Find",0,c,0,c,c,c],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",c,c],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",c,c],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",c,c],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",c,c],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",c,c],[0,1,136,"KanaMode",0,c,0,c,c,c],[0,0,137,"IntlYen",0,c,0,c,c,c],[0,1,138,"Convert",0,c,0,c,c,c],[0,1,139,"NonConvert",0,c,0,c,c,c],[0,1,140,"Lang1",0,c,0,c,c,c],[0,1,141,"Lang2",0,c,0,c,c,c],[0,1,142,"Lang3",0,c,0,c,c,c],[0,1,143,"Lang4",0,c,0,c,c,c],[0,1,144,"Lang5",0,c,0,c,c,c],[0,1,145,"Abort",0,c,0,c,c,c],[0,1,146,"Props",0,c,0,c,c,c],[0,1,147,"NumpadParenLeft",0,c,0,c,c,c],[0,1,148,"NumpadParenRight",0,c,0,c,c,c],[0,1,149,"NumpadBackspace",0,c,0,c,c,c],[0,1,150,"NumpadMemoryStore",0,c,0,c,c,c],[0,1,151,"NumpadMemoryRecall",0,c,0,c,c,c],[0,1,152,"NumpadMemoryClear",0,c,0,c,c,c],[0,1,153,"NumpadMemoryAdd",0,c,0,c,c,c],[0,1,154,"NumpadMemorySubtract",0,c,0,c,c,c],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",c,c],[0,1,156,"NumpadClearEntry",0,c,0,c,c,c],[5,1,0,c,5,"Ctrl",17,"VK_CONTROL",c,c],[4,1,0,c,4,"Shift",16,"VK_SHIFT",c,c],[6,1,0,c,6,"Alt",18,"VK_MENU",c,c],[57,1,0,c,57,"Meta",0,"VK_COMMAND",c,c],[5,1,157,"ControlLeft",5,c,0,"VK_LCONTROL",c,c],[4,1,158,"ShiftLeft",4,c,0,"VK_LSHIFT",c,c],[6,1,159,"AltLeft",6,c,0,"VK_LMENU",c,c],[57,1,160,"MetaLeft",57,c,0,"VK_LWIN",c,c],[5,1,161,"ControlRight",5,c,0,"VK_RCONTROL",c,c],[4,1,162,"ShiftRight",4,c,0,"VK_RSHIFT",c,c],[6,1,163,"AltRight",6,c,0,"VK_RMENU",c,c],[57,1,164,"MetaRight",57,c,0,"VK_RWIN",c,c],[0,1,165,"BrightnessUp",0,c,0,c,c,c],[0,1,166,"BrightnessDown",0,c,0,c,c,c],[0,1,167,"MediaPlay",0,c,0,c,c,c],[0,1,168,"MediaRecord",0,c,0,c,c,c],[0,1,169,"MediaFastForward",0,c,0,c,c,c],[0,1,170,"MediaRewind",0,c,0,c,c,c],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",c,c],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",c,c],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",c,c],[0,1,174,"Eject",0,c,0,c,c,c],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",c,c],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",c,c],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",c,c],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",c,c],[0,1,179,"LaunchApp1",0,c,0,"VK_MEDIA_LAUNCH_APP1",c,c],[0,1,180,"SelectTask",0,c,0,c,c,c],[0,1,181,"LaunchScreenSaver",0,c,0,c,c,c],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",c,c],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",c,c],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",c,c],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",c,c],[0,1,186,"BrowserStop",0,c,0,"VK_BROWSER_STOP",c,c],[0,1,187,"BrowserRefresh",0,c,0,"VK_BROWSER_REFRESH",c,c],[0,1,188,"BrowserFavorites",0,c,0,"VK_BROWSER_FAVORITES",c,c],[0,1,189,"ZoomToggle",0,c,0,c,c,c],[0,1,190,"MailReply",0,c,0,c,c,c],[0,1,191,"MailForward",0,c,0,c,c,c],[0,1,192,"MailSend",0,c,0,c,c,c],[109,1,0,c,109,"KeyInComposition",229,c,c,c],[111,1,0,c,111,"ABNT_C2",194,"VK_ABNT_C2",c,c],[91,1,0,c,91,"OEM_8",223,"VK_OEM_8",c,c],[0,1,0,c,0,c,0,"VK_KANA",c,c],[0,1,0,c,0,c,0,"VK_HANGUL",c,c],[0,1,0,c,0,c,0,"VK_JUNJA",c,c],[0,1,0,c,0,c,0,"VK_FINAL",c,c],[0,1,0,c,0,c,0,"VK_HANJA",c,c],[0,1,0,c,0,c,0,"VK_KANJI",c,c],[0,1,0,c,0,c,0,"VK_CONVERT",c,c],[0,1,0,c,0,c,0,"VK_NONCONVERT",c,c],[0,1,0,c,0,c,0,"VK_ACCEPT",c,c],[0,1,0,c,0,c,0,"VK_MODECHANGE",c,c],[0,1,0,c,0,c,0,"VK_SELECT",c,c],[0,1,0,c,0,c,0,"VK_PRINT",c,c],[0,1,0,c,0,c,0,"VK_EXECUTE",c,c],[0,1,0,c,0,c,0,"VK_SNAPSHOT",c,c],[0,1,0,c,0,c,0,"VK_HELP",c,c],[0,1,0,c,0,c,0,"VK_APPS",c,c],[0,1,0,c,0,c,0,"VK_PROCESSKEY",c,c],[0,1,0,c,0,c,0,"VK_PACKET",c,c],[0,1,0,c,0,c,0,"VK_DBE_SBCSCHAR",c,c],[0,1,0,c,0,c,0,"VK_DBE_DBCSCHAR",c,c],[0,1,0,c,0,c,0,"VK_ATTN",c,c],[0,1,0,c,0,c,0,"VK_CRSEL",c,c],[0,1,0,c,0,c,0,"VK_EXSEL",c,c],[0,1,0,c,0,c,0,"VK_EREOF",c,c],[0,1,0,c,0,c,0,"VK_PLAY",c,c],[0,1,0,c,0,c,0,"VK_ZOOM",c,c],[0,1,0,c,0,c,0,"VK_NONAME",c,c],[0,1,0,c,0,c,0,"VK_PA1",c,c],[0,1,0,c,0,c,0,"VK_OEM_CLEAR",c,c]];let M=[],E=[];for(const _ of C){const[L,N,b,I,k,W,q,re,de,pe]=_;if(E[b]||(E[b]=!0,T[b]=I,B[I]=b,F[I.toLowerCase()]=b,N&&(x[b]=k,k!==0&&k!==3&&k!==5&&k!==4&&k!==6&&k!==57&&(v[k]=b))),!M[k]){if(M[k]=!0,!W)throw new Error(`String representation missing for key code ${k} around scan code ${I}`);d.define(k,W),z.define(k,de||W),O.define(k,pe||de||W)}q&&(S[q]=k),re&&(j[re]=k)}v[3]=46})();var g;(function(c){function C(b){return d.keyCodeToStr(b)}c.toString=C;function M(b){return d.strToKeyCode(b)}c.fromString=M;function E(b){return z.keyCodeToStr(b)}c.toUserSettingsUS=E;function _(b){return O.keyCodeToStr(b)}c.toUserSettingsGeneral=_;function L(b){return z.strToKeyCode(b)||O.strToKeyCode(b)}c.fromUserSettings=L;function N(b){if(b>=93&&b<=108)return null;switch(b){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return d.keyCodeToStr(b)}c.toElectronAccelerator=N})(g||(g={}));function D(c,C){const M=(C&65535)<<16>>>0;return(c|M)>>>0}},8030:function(Tt,me,a){"use strict";a.d(me,{xo:function(){return z},X4:function(){return O},jC:function(){return S}});var p=a(63580);class d{constructor(F,x,v=x){this.modifierLabels=[null],this.modifierLabels[2]=F,this.modifierLabels[1]=x,this.modifierLabels[3]=v}toLabel(F,x,v){if(x.length===0)return null;const g=[];for(let D=0,c=x.length;D<c;D++){const C=x[D],M=v(C);if(M===null)return null;g[D]=T(C,M,this.modifierLabels[F])}return g.join(" ")}}const z=new d({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:p.N({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p.N({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p.N({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p.N({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p.N({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p.N({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p.N({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p.N({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),O=new d({ctrlKey:p.N({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p.N({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p.N({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:p.N({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:p.N({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p.N({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p.N({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p.N({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p.N({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p.N({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p.N({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p.N({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),S=new d({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),j=new d({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function T(B,F,x){if(F===null)return"";const v=[];return B.ctrlKey&&v.push(x.ctrlKey),B.shiftKey&&v.push(x.shiftKey),B.altKey&&v.push(x.altKey),B.metaKey&&v.push(x.metaKey),F!==""&&v.push(F),v.join(x.separator)}},8313:function(Tt,me,a){"use strict";a.d(me,{gm:function(){return d},QC:function(){return O},X_:function(){return S},BQ:function(){return T},f1:function(){return B}});var p=a(17301);function d(F,x){if(F===0)return null;const v=(F&65535)>>>0,g=(F&4294901760)>>>16;return g!==0?new S([z(v,x),z(g,x)]):new S([z(v,x)])}function z(F,x){const v=!!(F&2048),g=!!(F&256),D=x===2?g:v,c=!!(F&1024),C=!!(F&512),M=x===2?v:g,E=F&255;return new O(D,c,C,M,E)}class O{constructor(x,v,g,D,c){this.ctrlKey=x,this.shiftKey=v,this.altKey=g,this.metaKey=D,this.keyCode=c}equals(x){return this.ctrlKey===x.ctrlKey&&this.shiftKey===x.shiftKey&&this.altKey===x.altKey&&this.metaKey===x.metaKey&&this.keyCode===x.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new S([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class S{constructor(x){if(x.length===0)throw(0,p.b1)("parts");this.parts=x}}class j{constructor(x,v,g,D,c){this.ctrlKey=x,this.shiftKey=v,this.altKey=g,this.metaKey=D,this.scanCode=c}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===157||this.scanCode===161)||this.shiftKey&&(this.scanCode===158||this.scanCode===162)||this.altKey&&(this.scanCode===159||this.scanCode===163)||this.metaKey&&(this.scanCode===160||this.scanCode===164)}}class T{constructor(x,v,g,D,c,C){this.ctrlKey=x,this.shiftKey=v,this.altKey=g,this.metaKey=D,this.keyLabel=c,this.keyAriaLabel=C}}class B{}},68843:function(Tt,me,a){"use strict";a.d(me,{p:function(){return j},D:function(){return T}});var p=a(15527),d=a(66663),z=a(1432),O=a(95935),S=a(70666);function j(F){if(!F)return;typeof F=="string"&&(F=S.o.file(F));const x=(0,O.EZ)(F)||(F.scheme===d.lg.file?F.fsPath:F.path);return z.ED&&(0,p.vY)(x)?T(x):x}function T(F,x){return(0,p.oP)(F,x)?F.charAt(0).toUpperCase()+F.slice(1):F}let B=Object.create(null)},79579:function(Tt,me,a){"use strict";a.d(me,{o:function(){return p}});class p{constructor(z){this.executor=z,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(z){this._error=z}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}},9917:function(Tt,me,a){"use strict";a.d(me,{dk:function(){return x},Wf:function(){return g},B9:function(){return D},F8:function(){return c},OF:function(){return C},SL:function(){return M},JT:function(){return E},XK:function(){return _},dt:function(){return L},Jz:function(){return N}});var p=a(88289),d=a(53725);const z=!1;let O=null;function S(b){O=b}if(z){const b="__is_disposable_tracked__";S(new class{trackDisposable(I){const k=new Error("Potentially leaked disposable").stack;setTimeout(()=>{I[b]||console.log(k)},3e3)}setParent(I,k){if(I&&I!==E.None)try{I[b]=!0}catch(W){}}markAsDisposed(I){if(I&&I!==E.None)try{I[b]=!0}catch(k){}}markAsSingleton(I){}})}function j(b){return O==null||O.trackDisposable(b),b}function T(b){O==null||O.markAsDisposed(b)}function B(b,I){O==null||O.setParent(b,I)}function F(b,I){if(!!O)for(const k of b)O.setParent(k,I)}function x(b){return O==null||O.markAsSingleton(b),b}class v extends Error{constructor(I){super(`Encountered errors while disposing of store. Errors: [${I.join(", ")}]`);this.errors=I}}function g(b){return typeof b.dispose=="function"&&b.dispose.length===0}function D(b){if(d.$.is(b)){let I=[];for(const k of b)if(k)try{k.dispose()}catch(W){I.push(W)}if(I.length===1)throw I[0];if(I.length>1)throw new v(I);return Array.isArray(b)?[]:b}else if(b)return b.dispose(),b}function c(...b){const I=C(()=>D(b));return F(b,I),I}function C(b){const I=j({dispose:(0,p.I)(()=>{T(I),b()})});return I}class M{constructor(){this._toDispose=new Set,this._isDisposed=!1,j(this)}dispose(){this._isDisposed||(T(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{D(this._toDispose.values())}finally{this._toDispose.clear()}}add(I){if(!I)return I;if(I===this)throw new Error("Cannot register a disposable on itself!");return B(I,this),this._isDisposed?M.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(I),I}}M.DISABLE_DISPOSED_WARNING=!1;class E{constructor(){this._store=new M,j(this),B(this._store,this)}dispose(){T(this),this._store.dispose()}_register(I){if(I===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(I)}}E.None=Object.freeze({dispose(){}});class _{constructor(){this._isDisposed=!1,j(this)}get value(){return this._isDisposed?void 0:this._value}set value(I){var k;this._isDisposed||I===this._value||((k=this._value)===null||k===void 0||k.dispose(),I&&B(I,this),this._value=I)}clear(){this.value=void 0}dispose(){var I;this._isDisposed=!0,T(this),(I=this._value)===null||I===void 0||I.dispose(),this._value=void 0}clearAndLeak(){const I=this._value;return this._value=void 0,I&&B(I,null),I}}class L{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1,j(this)}set(I){let k=I;return this.unset=()=>k=void 0,this.isset=()=>k!==void 0,this.dispose=()=>{k&&(k(),k=void 0,T(this))},this}}class N{constructor(I){this.object=I}dispose(){}}},91741:function(Tt,me,a){"use strict";a.d(me,{S:function(){return d}});class p{constructor(O){this.element=O,this.next=p.Undefined,this.prev=p.Undefined}}p.Undefined=new p(void 0);class d{constructor(){this._first=p.Undefined,this._last=p.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===p.Undefined}clear(){let O=this._first;for(;O!==p.Undefined;){const S=O.next;O.prev=p.Undefined,O.next=p.Undefined,O=S}this._first=p.Undefined,this._last=p.Undefined,this._size=0}unshift(O){return this._insert(O,!1)}push(O){return this._insert(O,!0)}_insert(O,S){const j=new p(O);if(this._first===p.Undefined)this._first=j,this._last=j;else if(S){const B=this._last;this._last=j,j.prev=B,B.next=j}else{const B=this._first;this._first=j,j.next=B,B.prev=j}this._size+=1;let T=!1;return()=>{T||(T=!0,this._remove(j))}}shift(){if(this._first!==p.Undefined){const O=this._first.element;return this._remove(this._first),O}}pop(){if(this._last!==p.Undefined){const O=this._last.element;return this._remove(this._last),O}}_remove(O){if(O.prev!==p.Undefined&&O.next!==p.Undefined){const S=O.prev;S.next=O.next,O.next.prev=S}else O.prev===p.Undefined&&O.next===p.Undefined?(this._first=p.Undefined,this._last=p.Undefined):O.next===p.Undefined?(this._last=this._last.prev,this._last.next=p.Undefined):O.prev===p.Undefined&&(this._first=this._first.next,this._first.prev=p.Undefined);this._size-=1}*[Symbol.iterator](){let O=this._first;for(;O!==p.Undefined;)yield O.element,O=O.next}}},43702:function(Tt,me,a){"use strict";a.d(me,{Id:function(){return F},Y9:function(){return v},z6:function(){return D}});var p=a(25924),d,z;class O{constructor(){this._value="",this._pos=0}reset(C){return this._value=C,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(C){const M=C.charCodeAt(0),E=this._value.charCodeAt(this._pos);return M-E}value(){return this._value[this._pos]}}class S{constructor(C=!0){this._caseSensitive=C}reset(C){return this._value=C,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let C=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(C)this._from++;else break;else C=!1;return this}cmp(C){return this._caseSensitive?(0,p.TT)(C,this._value,0,C.length,this._from,this._to):(0,p.j_)(C,this._value,0,C.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class j{constructor(C=!0,M=!0){this._splitOnBackslash=C,this._caseSensitive=M}reset(C){this._from=0,this._to=0,this._value=C,this._valueLen=C.length;for(let M=C.length-1;M>=0;M--,this._valueLen--){const E=this._value.charCodeAt(M);if(!(E===47||this._splitOnBackslash&&E===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let C=!0;for(;this._to<this._valueLen;this._to++){const M=this._value.charCodeAt(this._to);if(M===47||this._splitOnBackslash&&M===92)if(C)this._from++;else break;else C=!1}return this}cmp(C){return this._caseSensitive?(0,p.TT)(C,this._value,0,C.length,this._from,this._to):(0,p.j_)(C,this._value,0,C.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class T{constructor(C){this._ignorePathCasing=C,this._states=[],this._stateIdx=0}reset(C){return this._value=C,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new j(!1,!this._ignorePathCasing(C)),this._pathIterator.reset(C.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(C){if(this._states[this._stateIdx]===1)return(0,p.zY)(C,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,p.zY)(C,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(C);if(this._states[this._stateIdx]===4)return(0,p.qu)(C,this._value.query);if(this._states[this._stateIdx]===5)return(0,p.qu)(C,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class B{constructor(){this.height=1}rotateLeft(){const C=this.right;return this.right=C.left,C.left=this,this.updateHeight(),C.updateHeight(),C}rotateRight(){const C=this.left;return this.left=C.right,C.right=this,this.updateHeight(),C.updateHeight(),C}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var C,M;return(M=(C=this.left)===null||C===void 0?void 0:C.height)!==null&&M!==void 0?M:0}get heightRight(){var C,M;return(M=(C=this.right)===null||C===void 0?void 0:C.height)!==null&&M!==void 0?M:0}}class F{constructor(C){this._iter=C}static forUris(C=()=>!1){return new F(new T(C))}static forStrings(){return new F(new O)}static forConfigKeys(){return new F(new S)}clear(){this._root=void 0}set(C,M){const E=this._iter.reset(C);let _;this._root||(this._root=new B,this._root.segment=E.value());const L=[];for(_=this._root;;){const b=E.cmp(_.segment);if(b>0)_.left||(_.left=new B,_.left.segment=E.value()),L.push([-1,_]),_=_.left;else if(b<0)_.right||(_.right=new B,_.right.segment=E.value()),L.push([1,_]),_=_.right;else if(E.hasNext())E.next(),_.mid||(_.mid=new B,_.mid.segment=E.value()),L.push([0,_]),_=_.mid;else break}const N=_.value;_.value=M,_.key=C;for(let b=L.length-1;b>=0;b--){const I=L[b][1];I.updateHeight();const k=I.balanceFactor();if(k<-1||k>1){const W=L[b][0],q=L[b+1][0];if(W===1&&q===1)L[b][1]=I.rotateLeft();else if(W===-1&&q===-1)L[b][1]=I.rotateRight();else if(W===1&&q===-1)I.right=L[b+1][1]=L[b+1][1].rotateRight(),L[b][1]=I.rotateLeft();else if(W===-1&&q===1)I.left=L[b+1][1]=L[b+1][1].rotateLeft(),L[b][1]=I.rotateRight();else throw new Error;if(b>0)switch(L[b-1][0]){case-1:L[b-1][1].left=L[b][1];break;case 1:L[b-1][1].right=L[b][1];break;case 0:L[b-1][1].mid=L[b][1];break}else this._root=L[0][1]}}return N}get(C){var M;return(M=this._getNode(C))===null||M===void 0?void 0:M.value}_getNode(C){const M=this._iter.reset(C);let E=this._root;for(;E;){const _=M.cmp(E.segment);if(_>0)E=E.left;else if(_<0)E=E.right;else if(M.hasNext())M.next(),E=E.mid;else break}return E}has(C){const M=this._getNode(C);return!((M==null?void 0:M.value)===void 0&&(M==null?void 0:M.mid)===void 0)}delete(C){return this._delete(C,!1)}deleteSuperstr(C){return this._delete(C,!0)}_delete(C,M){var E;const _=this._iter.reset(C),L=[];let N=this._root;for(;N;){const b=_.cmp(N.segment);if(b>0)L.push([-1,N]),N=N.left;else if(b<0)L.push([1,N]),N=N.right;else if(_.hasNext())_.next(),L.push([0,N]),N=N.mid;else break}if(!!N){if(M?(N.left=void 0,N.mid=void 0,N.right=void 0,N.height=1):(N.key=void 0,N.value=void 0),!N.mid&&!N.value)if(N.left&&N.right){const b=this._min(N.right),{key:I,value:k,segment:W}=b;this._delete(b.key,!1),N.key=I,N.value=k,N.segment=W}else{const b=(E=N.left)!==null&&E!==void 0?E:N.right;if(L.length>0){const[I,k]=L[L.length-1];switch(I){case-1:k.left=b;break;case 0:k.mid=b;break;case 1:k.right=b;break}}else this._root=b}for(let b=L.length-1;b>=0;b--){const I=L[b][1];I.updateHeight();const k=I.balanceFactor();if(k>1?(I.right.balanceFactor()>=0||(I.right=I.right.rotateRight()),L[b][1]=I.rotateLeft()):k<-1&&(I.left.balanceFactor()<=0||(I.left=I.left.rotateLeft()),L[b][1]=I.rotateRight()),b>0)switch(L[b-1][0]){case-1:L[b-1][1].left=L[b][1];break;case 1:L[b-1][1].right=L[b][1];break;case 0:L[b-1][1].mid=L[b][1];break}else this._root=L[0][1]}}}_min(C){for(;C.left;)C=C.left;return C}findSubstr(C){const M=this._iter.reset(C);let E=this._root,_;for(;E;){const L=M.cmp(E.segment);if(L>0)E=E.left;else if(L<0)E=E.right;else if(M.hasNext())M.next(),_=E.value||_,E=E.mid;else break}return E&&E.value||_}findSuperstr(C){const M=this._iter.reset(C);let E=this._root;for(;E;){const _=M.cmp(E.segment);if(_>0)E=E.left;else if(_<0)E=E.right;else if(M.hasNext())M.next(),E=E.mid;else return E.mid?this._entries(E.mid):void 0}}forEach(C){for(const[M,E]of this)C(E,M)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(C){!C||(C.left&&(yield*this._entries(C.left)),C.value&&(yield[C.key,C.value]),C.mid&&(yield*this._entries(C.mid)),C.right&&(yield*this._entries(C.right)))}}class x{constructor(C,M){this.uri=C,this.value=M}}class v{constructor(C,M){this[d]="ResourceMap",C instanceof v?(this.map=new Map(C.map),this.toKey=M??v.defaultToKey):(this.map=new Map,this.toKey=C??v.defaultToKey)}set(C,M){return this.map.set(this.toKey(C),new x(C,M)),this}get(C){var M;return(M=this.map.get(this.toKey(C)))===null||M===void 0?void 0:M.value}has(C){return this.map.has(this.toKey(C))}get size(){return this.map.size}clear(){this.map.clear()}delete(C){return this.map.delete(this.toKey(C))}forEach(C,M){typeof M!="undefined"&&(C=C.bind(M));for(let[E,_]of this.map)C(_.value,_.uri,this)}*values(){for(let C of this.map.values())yield C.value}*keys(){for(let C of this.map.values())yield C.uri}*entries(){for(let C of this.map.values())yield[C.uri,C.value]}*[(d=Symbol.toStringTag,Symbol.iterator)](){for(let[,C]of this.map)yield[C.uri,C.value]}}v.defaultToKey=c=>c.toString();class g{constructor(){this[z]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var C;return(C=this._head)===null||C===void 0?void 0:C.value}get last(){var C;return(C=this._tail)===null||C===void 0?void 0:C.value}has(C){return this._map.has(C)}get(C,M=0){const E=this._map.get(C);if(!!E)return M!==0&&this.touch(E,M),E.value}set(C,M,E=0){let _=this._map.get(C);if(_)_.value=M,E!==0&&this.touch(_,E);else{switch(_={key:C,value:M,next:void 0,previous:void 0},E){case 0:this.addItemLast(_);break;case 1:this.addItemFirst(_);break;case 2:this.addItemLast(_);break;default:this.addItemLast(_);break}this._map.set(C,_),this._size++}return this}delete(C){return!!this.remove(C)}remove(C){const M=this._map.get(C);if(!!M)return this._map.delete(C),this.removeItem(M),this._size--,M.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const C=this._head;return this._map.delete(C.key),this.removeItem(C),this._size--,C.value}forEach(C,M){const E=this._state;let _=this._head;for(;_;){if(M?C.bind(M)(_.value,_.key,this):C(_.value,_.key,this),this._state!==E)throw new Error("LinkedMap got modified during iteration.");_=_.next}}keys(){const C=this,M=this._state;let E=this._head;const _={[Symbol.iterator](){return _},next(){if(C._state!==M)throw new Error("LinkedMap got modified during iteration.");if(E){const L={value:E.key,done:!1};return E=E.next,L}else return{value:void 0,done:!0}}};return _}values(){const C=this,M=this._state;let E=this._head;const _={[Symbol.iterator](){return _},next(){if(C._state!==M)throw new Error("LinkedMap got modified during iteration.");if(E){const L={value:E.value,done:!1};return E=E.next,L}else return{value:void 0,done:!0}}};return _}entries(){const C=this,M=this._state;let E=this._head;const _={[Symbol.iterator](){return _},next(){if(C._state!==M)throw new Error("LinkedMap got modified during iteration.");if(E){const L={value:[E.key,E.value],done:!1};return E=E.next,L}else return{value:void 0,done:!0}}};return _}[(z=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(C){if(C>=this.size)return;if(C===0){this.clear();return}let M=this._head,E=this.size;for(;M&&E>C;)this._map.delete(M.key),M=M.next,E--;this._head=M,this._size=E,M&&(M.previous=void 0),this._state++}addItemFirst(C){if(!this._head&&!this._tail)this._tail=C;else if(this._head)C.next=this._head,this._head.previous=C;else throw new Error("Invalid list");this._head=C,this._state++}addItemLast(C){if(!this._head&&!this._tail)this._head=C;else if(this._tail)C.previous=this._tail,this._tail.next=C;else throw new Error("Invalid list");this._tail=C,this._state++}removeItem(C){if(C===this._head&&C===this._tail)this._head=void 0,this._tail=void 0;else if(C===this._head){if(!C.next)throw new Error("Invalid list");C.next.previous=void 0,this._head=C.next}else if(C===this._tail){if(!C.previous)throw new Error("Invalid list");C.previous.next=void 0,this._tail=C.previous}else{const M=C.next,E=C.previous;if(!M||!E)throw new Error("Invalid list");M.previous=E,E.next=M}C.next=void 0,C.previous=void 0,this._state++}touch(C,M){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(M!==1&&M!==2)){if(M===1){if(C===this._head)return;const E=C.next,_=C.previous;C===this._tail?(_.next=void 0,this._tail=_):(E.previous=_,_.next=E),C.previous=void 0,C.next=this._head,this._head.previous=C,this._head=C,this._state++}else if(M===2){if(C===this._tail)return;const E=C.next,_=C.previous;C===this._head?(E.previous=void 0,this._head=E):(E.previous=_,_.next=E),C.next=void 0,C.previous=this._tail,this._tail.next=C,this._tail=C,this._state++}}}toJSON(){const C=[];return this.forEach((M,E)=>{C.push([E,M])}),C}fromJSON(C){this.clear();for(const[M,E]of C)this.set(M,E)}}class D extends g{constructor(C,M=1){super();this._limit=C,this._ratio=Math.min(Math.max(0,M),1)}get limit(){return this._limit}set limit(C){this._limit=C,this.checkTrim()}get(C,M=2){return super.get(C,M)}peek(C){return super.get(C,0)}set(C,M){return super.set(C,M,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},23897:function(Tt,me,a){"use strict";a.d(me,{Q:function(){return z}});var p=a(53060),d=a(70666);function z(S){let j=JSON.parse(S);return j=O(j),j}function O(S,j=0){if(!S||j>200)return S;if(typeof S=="object"){switch(S.$mid){case 1:return d.o.revive(S);case 2:return new RegExp(S.source,S.flags);case 14:return new Date(S.source)}if(S instanceof p.KN||S instanceof Uint8Array)return S;if(Array.isArray(S))for(let T=0;T<S.length;++T)S[T]=O(S[T],j+1);else for(const T in S)Object.hasOwnProperty.call(S,T)&&(S[T]=O(S[T],j+1))}return S}},81170:function(Tt,me,a){"use strict";a.d(me,{v:function(){return p}});var p;(function(d){d.text="text/plain",d.binary="application/octet-stream",d.unknown="application/unknown",d.markdown="text/markdown",d.latex="text/latex",d.uriList="text/uri-list"})(p||(p={}))},66663:function(Tt,me,a){"use strict";a.d(me,{lg:function(){return z},WX:function(){return j},Gi:function(){return B}});var p=a(1432),d=a(70666),z;(function(F){F.inMemory="inmemory",F.vscode="vscode",F.internal="private",F.walkThrough="walkThrough",F.walkThroughSnippet="walkThroughSnippet",F.http="http",F.https="https",F.file="file",F.mailto="mailto",F.untitled="untitled",F.data="data",F.command="command",F.vscodeRemote="vscode-remote",F.vscodeRemoteResource="vscode-remote-resource",F.userData="vscode-userdata",F.vscodeCustomEditor="vscode-custom-editor",F.vscodeNotebook="vscode-notebook",F.vscodeNotebookCell="vscode-notebook-cell",F.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",F.vscodeNotebookCellOutput="vscode-notebook-cell-output",F.vscodeInteractive="vscode-interactive",F.vscodeInteractiveInput="vscode-interactive-input",F.vscodeSettings="vscode-settings",F.vscodeWorkspaceTrust="vscode-workspace-trust",F.vscodeTerminal="vscode-terminal",F.webviewPanel="webview-panel",F.vscodeWebview="vscode-webview",F.extension="extension",F.vscodeFileResource="vscode-file",F.tmp="tmp",F.vsls="vsls"})(z||(z={}));const O="tkn";class S{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(x){this._preferredWebSchema=x}rewrite(x){if(this._delegate)return this._delegate(x);const v=x.authority;let g=this._hosts[v];g&&g.indexOf(":")!==-1&&(g=`[${g}]`);const D=this._ports[v],c=this._connectionTokens[v];let C=`path=${encodeURIComponent(x.path)}`;return typeof c=="string"&&(C+=`&${O}=${encodeURIComponent(c)}`),d.o.from({scheme:p.$L?this._preferredWebSchema:z.vscodeRemoteResource,authority:`${g}:${D}`,path:"/vscode-remote-resource",query:C})}}const j=new S;class T{asBrowserUri(x,v){const g=this.toUri(x,v);return g.scheme===z.vscodeRemote?j.rewrite(g):g.scheme===z.file&&(p.tY||p.n2&&p.li.origin===`${z.vscodeFileResource}://${T.FALLBACK_AUTHORITY}`)?g.with({scheme:z.vscodeFileResource,authority:g.authority||T.FALLBACK_AUTHORITY,query:null,fragment:null}):g}toUri(x,v){return d.o.isUri(x)?x:d.o.parse(v.toUrl(x))}}T.FALLBACK_AUTHORITY="vscode-app";const B=new T},59870:function(Tt,me,a){"use strict";a.d(me,{uZ:function(){return p},nM:function(){return d},N:function(){return z}});function p(O,S,j){return Math.min(Math.max(O,S),j)}class d{constructor(){this._n=1,this._val=0}update(S){return this._val=this._val+(S-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class z{constructor(S){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(S),this._values.fill(0,0,S)}update(S){const j=this._values[this._index];return this._values[this._index]=S,this._index=(this._index+1)%this._values.length,this._sum-=j,this._sum+=S,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}},36248:function(Tt,me,a){"use strict";a.d(me,{I8:function(){return d},_A:function(){return z},rs:function(){return S},jB:function(){return T},fS:function(){return B},CJ:function(){return F}});var p=a(98401);function d(x){if(!x||typeof x!="object"||x instanceof RegExp)return x;const v=Array.isArray(x)?[]:{};return Object.keys(x).forEach(g=>{x[g]&&typeof x[g]=="object"?v[g]=d(x[g]):v[g]=x[g]}),v}function z(x){if(!x||typeof x!="object")return x;const v=[x];for(;v.length>0;){const g=v.shift();Object.freeze(g);for(const D in g)if(O.call(g,D)){const c=g[D];typeof c=="object"&&!Object.isFrozen(c)&&v.push(c)}}return x}const O=Object.prototype.hasOwnProperty;function S(x,v){return j(x,v,new Set)}function j(x,v,g){if((0,p.Jp)(x))return x;const D=v(x);if(typeof D!="undefined")return D;if((0,p.kJ)(x)){const c=[];for(const C of x)c.push(j(C,v,g));return c}if((0,p.Kn)(x)){if(g.has(x))throw new Error("Cannot clone recursive data-structure");g.add(x);const c={};for(let C in x)O.call(x,C)&&(c[C]=j(x[C],v,g));return g.delete(x),c}return x}function T(x,v,g=!0){return(0,p.Kn)(x)?((0,p.Kn)(v)&&Object.keys(v).forEach(D=>{D in x?g&&((0,p.Kn)(x[D])&&(0,p.Kn)(v[D])?T(x[D],v[D],g):x[D]=v[D]):x[D]=v[D]}),x):v}function B(x,v){if(x===v)return!0;if(x==null||v===null||v===void 0||typeof x!=typeof v||typeof x!="object"||Array.isArray(x)!==Array.isArray(v))return!1;let g,D;if(Array.isArray(x)){if(x.length!==v.length)return!1;for(g=0;g<x.length;g++)if(!B(x[g],v[g]))return!1}else{const c=[];for(D in x)c.push(D);c.sort();const C=[];for(D in v)C.push(D);if(C.sort(),!B(c,C))return!1;for(g=0;g<c.length;g++)if(!B(x[c[g]],v[c[g]]))return!1}return!0}function F(x,v,g){const D=v(x);return typeof D=="undefined"?g:D}},88721:function(Tt,me,a){"use strict";a.d(me,{EZ:function(){return ae},XX:function(){return pe},DZ:function(){return ue},Fv:function(){return q},KR:function(){return W},Gf:function(){return de},DB:function(){return re},ir:function(){return te},Ku:function(){return k}});var p=a(1432),d=a(34155);let z;if(typeof p.li.vscode!="undefined"&&typeof p.li.vscode.process!="undefined"){const K=p.li.vscode.process;z={get platform(){return K.platform},get arch(){return K.arch},get env(){return K.env},cwd(){return K.cwd()}}}else typeof d!="undefined"?z={get platform(){return d.platform},get arch(){return d.arch},get env(){return{NODE_ENV:"production"}},cwd(){return{NODE_ENV:"production"}.VSCODE_CWD||d.cwd()}}:z={get platform(){return p.ED?"win32":p.dz?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const O=z.cwd,S=z.env,j=z.platform,T=65,B=97,F=90,x=122,v=46,g=47,D=92,c=58,C=63;class M extends Error{constructor(U,ee,X){let le;typeof ee=="string"&&ee.indexOf("not ")===0?(le="must not be",ee=ee.replace(/^not /,"")):le="must be";const oe=U.indexOf(".")!==-1?"property":"argument";let Ce=`The "${U}" ${oe} ${le} of type ${ee}`;Ce+=`. Received type ${typeof X}`,super(Ce),this.code="ERR_INVALID_ARG_TYPE"}}function E(K,U){if(typeof K!="string")throw new M(U,"string",K)}function _(K){return K===g||K===D}function L(K){return K===g}function N(K){return K>=T&&K<=F||K>=B&&K<=x}function b(K,U,ee,X){let le="",oe=0,Ce=-1,ye=0,ke=0;for(let Te=0;Te<=K.length;++Te){if(Te<K.length)ke=K.charCodeAt(Te);else{if(X(ke))break;ke=g}if(X(ke)){if(!(Ce===Te-1||ye===1))if(ye===2){if(le.length<2||oe!==2||le.charCodeAt(le.length-1)!==v||le.charCodeAt(le.length-2)!==v){if(le.length>2){const ge=le.lastIndexOf(ee);ge===-1?(le="",oe=0):(le=le.slice(0,ge),oe=le.length-1-le.lastIndexOf(ee)),Ce=Te,ye=0;continue}else if(le.length!==0){le="",oe=0,Ce=Te,ye=0;continue}}U&&(le+=le.length>0?`${ee}..`:"..",oe=2)}else le.length>0?le+=`${ee}${K.slice(Ce+1,Te)}`:le=K.slice(Ce+1,Te),oe=Te-Ce-1;Ce=Te,ye=0}else ke===v&&ye!==-1?++ye:ye=-1}return le}function I(K,U){if(U===null||typeof U!="object")throw new M("pathObject","Object",U);const ee=U.dir||U.root,X=U.base||`${U.name||""}${U.ext||""}`;return ee?ee===U.root?`${ee}${X}`:`${ee}${K}${X}`:X}const k={resolve(...K){let U="",ee="",X=!1;for(let le=K.length-1;le>=-1;le--){let oe;if(le>=0){if(oe=K[le],E(oe,"path"),oe.length===0)continue}else U.length===0?oe=O():(oe={NODE_ENV:"production"}[`=${U}`]||O(),(oe===void 0||oe.slice(0,2).toLowerCase()!==U.toLowerCase()&&oe.charCodeAt(2)===D)&&(oe=`${U}\\`));const Ce=oe.length;let ye=0,ke="",Te=!1;const ge=oe.charCodeAt(0);if(Ce===1)_(ge)&&(ye=1,Te=!0);else if(_(ge))if(Te=!0,_(oe.charCodeAt(1))){let we=2,ze=we;for(;we<Ce&&!_(oe.charCodeAt(we));)we++;if(we<Ce&&we!==ze){const Qe=oe.slice(ze,we);for(ze=we;we<Ce&&_(oe.charCodeAt(we));)we++;if(we<Ce&&we!==ze){for(ze=we;we<Ce&&!_(oe.charCodeAt(we));)we++;(we===Ce||we!==ze)&&(ke=`\\\\${Qe}\\${oe.slice(ze,we)}`,ye=we)}}}else ye=1;else N(ge)&&oe.charCodeAt(1)===c&&(ke=oe.slice(0,2),ye=2,Ce>2&&_(oe.charCodeAt(2))&&(Te=!0,ye=3));if(ke.length>0)if(U.length>0){if(ke.toLowerCase()!==U.toLowerCase())continue}else U=ke;if(X){if(U.length>0)break}else if(ee=`${oe.slice(ye)}\\${ee}`,X=Te,Te&&U.length>0)break}return ee=b(ee,!X,"\\",_),X?`${U}\\${ee}`:`${U}${ee}`||"."},normalize(K){E(K,"path");const U=K.length;if(U===0)return".";let ee=0,X,le=!1;const oe=K.charCodeAt(0);if(U===1)return L(oe)?"\\":K;if(_(oe))if(le=!0,_(K.charCodeAt(1))){let ye=2,ke=ye;for(;ye<U&&!_(K.charCodeAt(ye));)ye++;if(ye<U&&ye!==ke){const Te=K.slice(ke,ye);for(ke=ye;ye<U&&_(K.charCodeAt(ye));)ye++;if(ye<U&&ye!==ke){for(ke=ye;ye<U&&!_(K.charCodeAt(ye));)ye++;if(ye===U)return`\\\\${Te}\\${K.slice(ke)}\\`;ye!==ke&&(X=`\\\\${Te}\\${K.slice(ke,ye)}`,ee=ye)}}}else ee=1;else N(oe)&&K.charCodeAt(1)===c&&(X=K.slice(0,2),ee=2,U>2&&_(K.charCodeAt(2))&&(le=!0,ee=3));let Ce=ee<U?b(K.slice(ee),!le,"\\",_):"";return Ce.length===0&&!le&&(Ce="."),Ce.length>0&&_(K.charCodeAt(U-1))&&(Ce+="\\"),X===void 0?le?`\\${Ce}`:Ce:le?`${X}\\${Ce}`:`${X}${Ce}`},isAbsolute(K){E(K,"path");const U=K.length;if(U===0)return!1;const ee=K.charCodeAt(0);return _(ee)||U>2&&N(ee)&&K.charCodeAt(1)===c&&_(K.charCodeAt(2))},join(...K){if(K.length===0)return".";let U,ee;for(let oe=0;oe<K.length;++oe){const Ce=K[oe];E(Ce,"path"),Ce.length>0&&(U===void 0?U=ee=Ce:U+=`\\${Ce}`)}if(U===void 0)return".";let X=!0,le=0;if(typeof ee=="string"&&_(ee.charCodeAt(0))){++le;const oe=ee.length;oe>1&&_(ee.charCodeAt(1))&&(++le,oe>2&&(_(ee.charCodeAt(2))?++le:X=!1))}if(X){for(;le<U.length&&_(U.charCodeAt(le));)le++;le>=2&&(U=`\\${U.slice(le)}`)}return k.normalize(U)},relative(K,U){if(E(K,"from"),E(U,"to"),K===U)return"";const ee=k.resolve(K),X=k.resolve(U);if(ee===X||(K=ee.toLowerCase(),U=X.toLowerCase(),K===U))return"";let le=0;for(;le<K.length&&K.charCodeAt(le)===D;)le++;let oe=K.length;for(;oe-1>le&&K.charCodeAt(oe-1)===D;)oe--;const Ce=oe-le;let ye=0;for(;ye<U.length&&U.charCodeAt(ye)===D;)ye++;let ke=U.length;for(;ke-1>ye&&U.charCodeAt(ke-1)===D;)ke--;const Te=ke-ye,ge=Ce<Te?Ce:Te;let we=-1,ze=0;for(;ze<ge;ze++){const Pe=K.charCodeAt(le+ze);if(Pe!==U.charCodeAt(ye+ze))break;Pe===D&&(we=ze)}if(ze!==ge){if(we===-1)return X}else{if(Te>ge){if(U.charCodeAt(ye+ze)===D)return X.slice(ye+ze+1);if(ze===2)return X.slice(ye+ze)}Ce>ge&&(K.charCodeAt(le+ze)===D?we=ze:ze===2&&(we=3)),we===-1&&(we=0)}let Qe="";for(ze=le+we+1;ze<=oe;++ze)(ze===oe||K.charCodeAt(ze)===D)&&(Qe+=Qe.length===0?"..":"\\..");return ye+=we,Qe.length>0?`${Qe}${X.slice(ye,ke)}`:(X.charCodeAt(ye)===D&&++ye,X.slice(ye,ke))},toNamespacedPath(K){if(typeof K!="string")return K;if(K.length===0)return"";const U=k.resolve(K);if(U.length<=2)return K;if(U.charCodeAt(0)===D){if(U.charCodeAt(1)===D){const ee=U.charCodeAt(2);if(ee!==C&&ee!==v)return`\\\\?\\UNC\\${U.slice(2)}`}}else if(N(U.charCodeAt(0))&&U.charCodeAt(1)===c&&U.charCodeAt(2)===D)return`\\\\?\\${U}`;return K},dirname(K){E(K,"path");const U=K.length;if(U===0)return".";let ee=-1,X=0;const le=K.charCodeAt(0);if(U===1)return _(le)?K:".";if(_(le)){if(ee=X=1,_(K.charCodeAt(1))){let ye=2,ke=ye;for(;ye<U&&!_(K.charCodeAt(ye));)ye++;if(ye<U&&ye!==ke){for(ke=ye;ye<U&&_(K.charCodeAt(ye));)ye++;if(ye<U&&ye!==ke){for(ke=ye;ye<U&&!_(K.charCodeAt(ye));)ye++;if(ye===U)return K;ye!==ke&&(ee=X=ye+1)}}}}else N(le)&&K.charCodeAt(1)===c&&(ee=U>2&&_(K.charCodeAt(2))?3:2,X=ee);let oe=-1,Ce=!0;for(let ye=U-1;ye>=X;--ye)if(_(K.charCodeAt(ye))){if(!Ce){oe=ye;break}}else Ce=!1;if(oe===-1){if(ee===-1)return".";oe=ee}return K.slice(0,oe)},basename(K,U){U!==void 0&&E(U,"ext"),E(K,"path");let ee=0,X=-1,le=!0,oe;if(K.length>=2&&N(K.charCodeAt(0))&&K.charCodeAt(1)===c&&(ee=2),U!==void 0&&U.length>0&&U.length<=K.length){if(U===K)return"";let Ce=U.length-1,ye=-1;for(oe=K.length-1;oe>=ee;--oe){const ke=K.charCodeAt(oe);if(_(ke)){if(!le){ee=oe+1;break}}else ye===-1&&(le=!1,ye=oe+1),Ce>=0&&(ke===U.charCodeAt(Ce)?--Ce==-1&&(X=oe):(Ce=-1,X=ye))}return ee===X?X=ye:X===-1&&(X=K.length),K.slice(ee,X)}for(oe=K.length-1;oe>=ee;--oe)if(_(K.charCodeAt(oe))){if(!le){ee=oe+1;break}}else X===-1&&(le=!1,X=oe+1);return X===-1?"":K.slice(ee,X)},extname(K){E(K,"path");let U=0,ee=-1,X=0,le=-1,oe=!0,Ce=0;K.length>=2&&K.charCodeAt(1)===c&&N(K.charCodeAt(0))&&(U=X=2);for(let ye=K.length-1;ye>=U;--ye){const ke=K.charCodeAt(ye);if(_(ke)){if(!oe){X=ye+1;break}continue}le===-1&&(oe=!1,le=ye+1),ke===v?ee===-1?ee=ye:Ce!==1&&(Ce=1):ee!==-1&&(Ce=-1)}return ee===-1||le===-1||Ce===0||Ce===1&&ee===le-1&&ee===X+1?"":K.slice(ee,le)},format:I.bind(null,"\\"),parse(K){E(K,"path");const U={root:"",dir:"",base:"",ext:"",name:""};if(K.length===0)return U;const ee=K.length;let X=0,le=K.charCodeAt(0);if(ee===1)return _(le)?(U.root=U.dir=K,U):(U.base=U.name=K,U);if(_(le)){if(X=1,_(K.charCodeAt(1))){let we=2,ze=we;for(;we<ee&&!_(K.charCodeAt(we));)we++;if(we<ee&&we!==ze){for(ze=we;we<ee&&_(K.charCodeAt(we));)we++;if(we<ee&&we!==ze){for(ze=we;we<ee&&!_(K.charCodeAt(we));)we++;we===ee?X=we:we!==ze&&(X=we+1)}}}}else if(N(le)&&K.charCodeAt(1)===c){if(ee<=2)return U.root=U.dir=K,U;if(X=2,_(K.charCodeAt(2))){if(ee===3)return U.root=U.dir=K,U;X=3}}X>0&&(U.root=K.slice(0,X));let oe=-1,Ce=X,ye=-1,ke=!0,Te=K.length-1,ge=0;for(;Te>=X;--Te){if(le=K.charCodeAt(Te),_(le)){if(!ke){Ce=Te+1;break}continue}ye===-1&&(ke=!1,ye=Te+1),le===v?oe===-1?oe=Te:ge!==1&&(ge=1):oe!==-1&&(ge=-1)}return ye!==-1&&(oe===-1||ge===0||ge===1&&oe===ye-1&&oe===Ce+1?U.base=U.name=K.slice(Ce,ye):(U.name=K.slice(Ce,oe),U.base=K.slice(Ce,ye),U.ext=K.slice(oe,ye))),Ce>0&&Ce!==X?U.dir=K.slice(0,Ce-1):U.dir=U.root,U},sep:"\\",delimiter:";",win32:null,posix:null},W={resolve(...K){let U="",ee=!1;for(let X=K.length-1;X>=-1&&!ee;X--){const le=X>=0?K[X]:O();E(le,"path"),le.length!==0&&(U=`${le}/${U}`,ee=le.charCodeAt(0)===g)}return U=b(U,!ee,"/",L),ee?`/${U}`:U.length>0?U:"."},normalize(K){if(E(K,"path"),K.length===0)return".";const U=K.charCodeAt(0)===g,ee=K.charCodeAt(K.length-1)===g;return K=b(K,!U,"/",L),K.length===0?U?"/":ee?"./":".":(ee&&(K+="/"),U?`/${K}`:K)},isAbsolute(K){return E(K,"path"),K.length>0&&K.charCodeAt(0)===g},join(...K){if(K.length===0)return".";let U;for(let ee=0;ee<K.length;++ee){const X=K[ee];E(X,"path"),X.length>0&&(U===void 0?U=X:U+=`/${X}`)}return U===void 0?".":W.normalize(U)},relative(K,U){if(E(K,"from"),E(U,"to"),K===U||(K=W.resolve(K),U=W.resolve(U),K===U))return"";const ee=1,X=K.length,le=X-ee,oe=1,Ce=U.length-oe,ye=le<Ce?le:Ce;let ke=-1,Te=0;for(;Te<ye;Te++){const we=K.charCodeAt(ee+Te);if(we!==U.charCodeAt(oe+Te))break;we===g&&(ke=Te)}if(Te===ye)if(Ce>ye){if(U.charCodeAt(oe+Te)===g)return U.slice(oe+Te+1);if(Te===0)return U.slice(oe+Te)}else le>ye&&(K.charCodeAt(ee+Te)===g?ke=Te:Te===0&&(ke=0));let ge="";for(Te=ee+ke+1;Te<=X;++Te)(Te===X||K.charCodeAt(Te)===g)&&(ge+=ge.length===0?"..":"/..");return`${ge}${U.slice(oe+ke)}`},toNamespacedPath(K){return K},dirname(K){if(E(K,"path"),K.length===0)return".";const U=K.charCodeAt(0)===g;let ee=-1,X=!0;for(let le=K.length-1;le>=1;--le)if(K.charCodeAt(le)===g){if(!X){ee=le;break}}else X=!1;return ee===-1?U?"/":".":U&&ee===1?"//":K.slice(0,ee)},basename(K,U){U!==void 0&&E(U,"ext"),E(K,"path");let ee=0,X=-1,le=!0,oe;if(U!==void 0&&U.length>0&&U.length<=K.length){if(U===K)return"";let Ce=U.length-1,ye=-1;for(oe=K.length-1;oe>=0;--oe){const ke=K.charCodeAt(oe);if(ke===g){if(!le){ee=oe+1;break}}else ye===-1&&(le=!1,ye=oe+1),Ce>=0&&(ke===U.charCodeAt(Ce)?--Ce==-1&&(X=oe):(Ce=-1,X=ye))}return ee===X?X=ye:X===-1&&(X=K.length),K.slice(ee,X)}for(oe=K.length-1;oe>=0;--oe)if(K.charCodeAt(oe)===g){if(!le){ee=oe+1;break}}else X===-1&&(le=!1,X=oe+1);return X===-1?"":K.slice(ee,X)},extname(K){E(K,"path");let U=-1,ee=0,X=-1,le=!0,oe=0;for(let Ce=K.length-1;Ce>=0;--Ce){const ye=K.charCodeAt(Ce);if(ye===g){if(!le){ee=Ce+1;break}continue}X===-1&&(le=!1,X=Ce+1),ye===v?U===-1?U=Ce:oe!==1&&(oe=1):U!==-1&&(oe=-1)}return U===-1||X===-1||oe===0||oe===1&&U===X-1&&U===ee+1?"":K.slice(U,X)},format:I.bind(null,"/"),parse(K){E(K,"path");const U={root:"",dir:"",base:"",ext:"",name:""};if(K.length===0)return U;const ee=K.charCodeAt(0)===g;let X;ee?(U.root="/",X=1):X=0;let le=-1,oe=0,Ce=-1,ye=!0,ke=K.length-1,Te=0;for(;ke>=X;--ke){const ge=K.charCodeAt(ke);if(ge===g){if(!ye){oe=ke+1;break}continue}Ce===-1&&(ye=!1,Ce=ke+1),ge===v?le===-1?le=ke:Te!==1&&(Te=1):le!==-1&&(Te=-1)}if(Ce!==-1){const ge=oe===0&&ee?1:oe;le===-1||Te===0||Te===1&&le===Ce-1&&le===oe+1?U.base=U.name=K.slice(ge,Ce):(U.name=K.slice(ge,le),U.base=K.slice(ge,Ce),U.ext=K.slice(le,Ce))}return oe>0?U.dir=K.slice(0,oe-1):ee&&(U.dir="/"),U},sep:"/",delimiter:":",win32:null,posix:null};W.win32=k.win32=k,W.posix=k.posix=W;const q=j==="win32"?k.normalize:W.normalize,re=j==="win32"?k.resolve:W.resolve,de=j==="win32"?k.relative:W.relative,pe=j==="win32"?k.dirname:W.dirname,ae=j==="win32"?k.basename:W.basename,ue=j==="win32"?k.extname:W.extname,te=j==="win32"?k.sep:W.sep},1432:function(Tt,me,a){"use strict";a.d(me,{li:function(){return E},ED:function(){return I},dz:function(){return k},IJ:function(){return W},tY:function(){return q},$L:function(){return re},n2:function(){return de},gn:function(){return pe},dK:function(){return ue},fn:function(){return te},OS:function(){return K},r:function(){return X},i7:function(){return le},vU:function(){return oe},G6:function(){return Ce},un:function(){return ye}});var p=a(34155),d;const z="en";let O=!1,S=!1,j=!1,T=!1,B=!1,F=!1,x=!1,v=!1,g=!1,D,c=z,C,M;const E=typeof self=="object"?self:typeof a.g=="object"?a.g:{};let _;typeof E.vscode!="undefined"&&typeof E.vscode.process!="undefined"?_=E.vscode.process:typeof p!="undefined"&&(_=p);const L=typeof((d=_==null?void 0:_.versions)===null||d===void 0?void 0:d.electron)=="string",N=L&&(_==null?void 0:_.type)==="renderer";if(typeof navigator=="object"&&!N)M=navigator.userAgent,O=M.indexOf("Windows")>=0,S=M.indexOf("Macintosh")>=0,v=(M.indexOf("Macintosh")>=0||M.indexOf("iPad")>=0||M.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,j=M.indexOf("Linux")>=0,F=!0,D=navigator.language,c=D;else if(typeof _=="object"){O=_.platform==="win32",S=_.platform==="darwin",j=_.platform==="linux",T=j&&!!_.env.SNAP&&!!_.env.SNAP_REVISION,x=L,g=!!_.env.CI||!!_.env.BUILD_ARTIFACTSTAGINGDIRECTORY,D=z,c=z;const Te=_.env.VSCODE_NLS_CONFIG;if(Te)try{const ge=JSON.parse(Te),we=ge.availableLanguages["*"];D=ge.locale,c=we||z,C=ge._translationsConfigFile}catch(ge){}B=!0}else console.error("Unable to resolve platform.");let b=0;S?b=1:O?b=3:j&&(b=2);const I=O,k=S,W=j,q=B,re=F,de=F&&typeof E.importScripts=="function",pe=v,ae=M,ue=c,te=(()=>{if(typeof E.postMessage=="function"&&!E.importScripts){let Te=[];E.addEventListener("message",we=>{if(we.data&&we.data.vscodeScheduleAsyncWork)for(let ze=0,Qe=Te.length;ze<Qe;ze++){const Pe=Te[ze];if(Pe.id===we.data.vscodeScheduleAsyncWork){Te.splice(ze,1),Pe.callback();return}}});let ge=0;return we=>{const ze=++ge;Te.push({id:ze,callback:we}),E.postMessage({vscodeScheduleAsyncWork:ze},"*")}}return Te=>setTimeout(Te)})(),K=S||v?2:O?1:3;let U=!0,ee=!1;function X(){if(!ee){ee=!0;const Te=new Uint8Array(2);Te[0]=1,Te[1]=2,U=new Uint16Array(Te.buffer)[0]===(2<<8)+1}return U}const le=!!(ae&&ae.indexOf("Chrome")>=0),oe=!!(ae&&ae.indexOf("Firefox")>=0),Ce=!!(!le&&ae&&ae.indexOf("Safari")>=0),ye=!!(ae&&ae.indexOf("Edg/")>=0),ke=!!(ae&&ae.indexOf("Android")>=0)},61134:function(Tt,me,a){"use strict";a.d(me,{e:function(){return p}});var p;(function(d){function z(T,B){if(T.start>=B.end||B.start>=T.end)return{start:0,end:0};const F=Math.max(T.start,B.start),x=Math.min(T.end,B.end);return x-F<=0?{start:0,end:0}:{start:F,end:x}}d.intersect=z;function O(T){return T.end-T.start<=0}d.isEmpty=O;function S(T,B){return!O(z(T,B))}d.intersects=S;function j(T,B){const F=[],x={start:T.start,end:Math.min(B.start,T.end)},v={start:Math.max(B.end,T.start),end:T.end};return O(x)||F.push(x),O(v)||F.push(v),F}d.relativeComplement=j})(p||(p={}))},95935:function(Tt,me,a){"use strict";a.d(me,{z_:function(){return T},SF:function(){return F},Xy:function(){return g},Hx:function(){return C},EZ:function(){return M},DZ:function(){return E},XX:function(){return _},Vo:function(){return L},AH:function(){return N},i3:function(){return I},Vb:function(){return pe}});var p=a(15527),d=a(66663),z=a(88721),O=a(1432),S=a(25924),j=a(70666);function T(ae){return(0,j.q)(ae,!0)}class B{constructor(ue){this._ignorePathCasing=ue}compare(ue,te,K=!1){return ue===te?0:(0,S.qu)(this.getComparisonKey(ue,K),this.getComparisonKey(te,K))}isEqual(ue,te,K=!1){return ue===te?!0:!ue||!te?!1:this.getComparisonKey(ue,K)===this.getComparisonKey(te,K)}getComparisonKey(ue,te=!1){return ue.with({path:this._ignorePathCasing(ue)?ue.path.toLowerCase():void 0,fragment:te?null:void 0}).toString()}isEqualOrParent(ue,te,K=!1){if(ue.scheme===te.scheme){if(ue.scheme===d.lg.file)return p.KM(T(ue),T(te),this._ignorePathCasing(ue))&&ue.query===te.query&&(K||ue.fragment===te.fragment);if(W(ue.authority,te.authority))return p.KM(ue.path,te.path,this._ignorePathCasing(ue),"/")&&ue.query===te.query&&(K||ue.fragment===te.fragment)}return!1}joinPath(ue,...te){return j.o.joinPath(ue,...te)}basenameOrAuthority(ue){return M(ue)||ue.authority}basename(ue){return z.KR.basename(ue.path)}extname(ue){return z.KR.extname(ue.path)}dirname(ue){if(ue.path.length===0)return ue;let te;return ue.scheme===d.lg.file?te=j.o.file(z.XX(T(ue))).path:(te=z.KR.dirname(ue.path),ue.authority&&te.length&&te.charCodeAt(0)!==47&&(console.error(`dirname("${ue.toString})) resulted in a relative path`),te="/")),ue.with({path:te})}normalizePath(ue){if(!ue.path.length)return ue;let te;return ue.scheme===d.lg.file?te=j.o.file(z.Fv(T(ue))).path:te=z.KR.normalize(ue.path),ue.with({path:te})}relativePath(ue,te){if(ue.scheme!==te.scheme||!W(ue.authority,te.authority))return;if(ue.scheme===d.lg.file){const ee=z.Gf(T(ue),T(te));return O.ED?p.ej(ee):ee}let K=ue.path||"/",U=te.path||"/";if(this._ignorePathCasing(ue)){let ee=0;for(const X=Math.min(K.length,U.length);ee<X&&!(K.charCodeAt(ee)!==U.charCodeAt(ee)&&K.charAt(ee).toLowerCase()!==U.charAt(ee).toLowerCase());ee++);K=U.substr(0,ee)+K.substr(ee)}return z.KR.relative(K,U)}resolvePath(ue,te){if(ue.scheme===d.lg.file){const K=j.o.file(z.DB(T(ue),te));return ue.with({authority:K.authority,path:K.path})}return te=p.fn(te),ue.with({path:z.KR.resolve(ue.path,te)})}isAbsolutePath(ue){return!!ue.path&&ue.path[0]==="/"}isEqualAuthority(ue,te){return ue===te||ue!==void 0&&te!==void 0&&(0,S.qq)(ue,te)}hasTrailingPathSeparator(ue,te=z.ir){if(ue.scheme===d.lg.file){const K=T(ue);return K.length>p.yj(K).length&&K[K.length-1]===te}else{const K=ue.path;return K.length>1&&K.charCodeAt(K.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(ue.fsPath)}}removeTrailingPathSeparator(ue,te=z.ir){return q(ue,te)?ue.with({path:ue.path.substr(0,ue.path.length-1)}):ue}addTrailingPathSeparator(ue,te=z.ir){let K=!1;if(ue.scheme===d.lg.file){const U=T(ue);K=U!==void 0&&U.length===p.yj(U).length&&U[U.length-1]===te}else{te="/";const U=ue.path;K=U.length===1&&U.charCodeAt(U.length-1)===47}return!K&&!q(ue,te)?ue.with({path:ue.path+"/"}):ue}}const F=new B(()=>!1),x=new B(ae=>ae.scheme===d.lg.file?!O.IJ:!0),v=new B(ae=>!0),g=F.isEqual.bind(F),D=F.isEqualOrParent.bind(F),c=F.getComparisonKey.bind(F),C=F.basenameOrAuthority.bind(F),M=F.basename.bind(F),E=F.extname.bind(F),_=F.dirname.bind(F),L=F.joinPath.bind(F),N=F.normalizePath.bind(F),b=F.relativePath.bind(F),I=F.resolvePath.bind(F),k=F.isAbsolutePath.bind(F),W=F.isEqualAuthority.bind(F),q=F.hasTrailingPathSeparator.bind(F),re=F.removeTrailingPathSeparator.bind(F),de=F.addTrailingPathSeparator.bind(F);var pe;(function(ae){ae.META_DATA_LABEL="label",ae.META_DATA_DESCRIPTION="description",ae.META_DATA_SIZE="size",ae.META_DATA_MIME="mime";function ue(te){const K=new Map;te.path.substring(te.path.indexOf(";")+1,te.path.lastIndexOf(";")).split(";").forEach(X=>{const[le,oe]=X.split(":");le&&oe&&K.set(le,oe)});const ee=te.path.substring(0,te.path.indexOf(";"));return ee&&K.set(ae.META_DATA_MIME,ee),K}ae.parseMetaData=ue})(pe||(pe={}))},76633:function(Tt,me,a){"use strict";a.d(me,{Rm:function(){return O}});var p=a(4669),d=a(9917);class z{constructor(g,D,c,C,M,E,_){this._forceIntegerValues=g,this._scrollStateBrand=void 0,this._forceIntegerValues&&(D=D|0,c=c|0,C=C|0,M=M|0,E=E|0,_=_|0),this.rawScrollLeft=C,this.rawScrollTop=_,D<0&&(D=0),C+D>c&&(C=c-D),C<0&&(C=0),M<0&&(M=0),_+M>E&&(_=E-M),_<0&&(_=0),this.width=D,this.scrollWidth=c,this.scrollLeft=C,this.height=M,this.scrollHeight=E,this.scrollTop=_}equals(g){return this.rawScrollLeft===g.rawScrollLeft&&this.rawScrollTop===g.rawScrollTop&&this.width===g.width&&this.scrollWidth===g.scrollWidth&&this.scrollLeft===g.scrollLeft&&this.height===g.height&&this.scrollHeight===g.scrollHeight&&this.scrollTop===g.scrollTop}withScrollDimensions(g,D){return new z(this._forceIntegerValues,typeof g.width!="undefined"?g.width:this.width,typeof g.scrollWidth!="undefined"?g.scrollWidth:this.scrollWidth,D?this.rawScrollLeft:this.scrollLeft,typeof g.height!="undefined"?g.height:this.height,typeof g.scrollHeight!="undefined"?g.scrollHeight:this.scrollHeight,D?this.rawScrollTop:this.scrollTop)}withScrollPosition(g){return new z(this._forceIntegerValues,this.width,this.scrollWidth,typeof g.scrollLeft!="undefined"?g.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof g.scrollTop!="undefined"?g.scrollTop:this.rawScrollTop)}createScrollEvent(g,D){const c=this.width!==g.width,C=this.scrollWidth!==g.scrollWidth,M=this.scrollLeft!==g.scrollLeft,E=this.height!==g.height,_=this.scrollHeight!==g.scrollHeight,L=this.scrollTop!==g.scrollTop;return{inSmoothScrolling:D,oldWidth:g.width,oldScrollWidth:g.scrollWidth,oldScrollLeft:g.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:g.height,oldScrollHeight:g.scrollHeight,oldScrollTop:g.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:c,scrollWidthChanged:C,scrollLeftChanged:M,heightChanged:E,scrollHeightChanged:_,scrollTopChanged:L}}}class O extends d.JT{constructor(g){super();this._scrollableBrand=void 0,this._onScroll=this._register(new p.Q5),this.onScroll=this._onScroll.event,this._smoothScrollDuration=g.smoothScrollDuration,this._scheduleAtNextAnimationFrame=g.scheduleAtNextAnimationFrame,this._state=new z(g.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(g){this._smoothScrollDuration=g}validateScrollPosition(g){return this._state.withScrollPosition(g)}getScrollDimensions(){return this._state}setScrollDimensions(g,D){const c=this._state.withScrollDimensions(g,D);this._setState(c,Boolean(this._smoothScrolling)),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(g){const D=this._state.withScrollPosition(g);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(D,!1)}setScrollPositionSmooth(g,D){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(g);if(this._smoothScrolling){g={scrollLeft:typeof g.scrollLeft=="undefined"?this._smoothScrolling.to.scrollLeft:g.scrollLeft,scrollTop:typeof g.scrollTop=="undefined"?this._smoothScrolling.to.scrollTop:g.scrollTop};const c=this._state.withScrollPosition(g);if(this._smoothScrolling.to.scrollLeft===c.scrollLeft&&this._smoothScrolling.to.scrollTop===c.scrollTop)return;let C;D?C=new B(this._smoothScrolling.from,c,this._smoothScrolling.startTime,this._smoothScrolling.duration):C=this._smoothScrolling.combine(this._state,c,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=C}else{const c=this._state.withScrollPosition(g);this._smoothScrolling=B.start(this._state,c,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const g=this._smoothScrolling.tick(),D=this._state.withScrollPosition(g);if(this._setState(D,!0),!!this._smoothScrolling){if(g.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(g,D){const c=this._state;c.equals(g)||(this._state=g,this._onScroll.fire(this._state.createScrollEvent(c,D)))}}class S{constructor(g,D,c){this.scrollLeft=g,this.scrollTop=D,this.isDone=c}}function j(v,g){const D=g-v;return function(c){return v+D*x(c)}}function T(v,g,D){return function(c){return c<D?v(c/D):g((c-D)/(1-D))}}class B{constructor(g,D,c,C){this.from=g,this.to=D,this.duration=C,this.startTime=c,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(g,D,c){if(Math.abs(g-D)>2.5*c){let M,E;return g<D?(M=g+.75*c,E=D-.75*c):(M=g-.75*c,E=D+.75*c),T(j(g,M),j(E,D),.33)}return j(g,D)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(g){this.to=g.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(g){const D=(g-this.startTime)/this.duration;if(D<1){const c=this.scrollLeft(D),C=this.scrollTop(D);return new S(c,C,!1)}return new S(this.to.scrollLeft,this.to.scrollTop,!0)}combine(g,D,c){return B.start(g,D,c)}static start(g,D,c){c=c+10;const C=Date.now()-10;return new B(g,D,C,c)}}function F(v){return Math.pow(v,3)}function x(v){return 1-F(1-v)}},14603:function(Tt,me,a){"use strict";var p=a(25924),d;(function(z){z[z.Ignore=0]="Ignore",z[z.Info=1]="Info",z[z.Warning=2]="Warning",z[z.Error=3]="Error"})(d||(d={})),function(z){const O="error",S="warning",j="warn",T="info",B="ignore";function F(v){return v?p.qq(O,v)?z.Error:p.qq(S,v)||p.qq(j,v)?z.Warning:p.qq(T,v)?z.Info:z.Ignore:z.Ignore}z.fromValue=F;function x(v){switch(v){case z.Error:return O;case z.Warning:return S;case z.Info:return T;default:return B}}z.toString=x}(d||(d={})),me.Z=d},84013:function(Tt,me,a){"use strict";a.d(me,{G:function(){return z}});var p=a(1432);const d=p.li.performance&&typeof p.li.performance.now=="function";class z{constructor(S){this._highResolution=d&&S,this._startTime=this._now(),this._stopTime=-1}static create(S=!0){return new z(S)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?p.li.performance.now():Date.now()}}},25924:function(Tt,me,a){"use strict";a.d(me,{ZK:function(){return Ot},W1:function(){return oe},vU:function(){return rn},Qe:function(){return Qe},c1:function(){return Je},Mh:function(){return ae},P1:function(){return ue},qu:function(){return b},zY:function(){return k},TT:function(){return I},j_:function(){return W},rL:function(){return U},Ut:function(){return ge},ab:function(){return Pe},Kw:function(){return Fe},un:function(){return g},GF:function(){return c},qq:function(){return de},YU:function(){return T},ec:function(){return B},LC:function(){return _},WU:function(){return j},J_:function(){return ke},V8:function(){return L},oH:function(){return be},ZH:function(){return ee},$i:function(){return ze},C8:function(){return qe},m5:function(){return O},K7:function(){return Oe},ZG:function(){return te},YK:function(){return K},mK:function(){return q},df:function(){return re},ow:function(){return N},j3:function(){return x},vH:function(){return Ce},B4:function(){return _t},HO:function(){return ye},mr:function(){return M},IO:function(){return C},oL:function(){return v},PJ:function(){return ne},uq:function(){return E},ok:function(){return pe},uS:function(){return Ne},R1:function(){return D},fy:function(){return F}});class p{constructor(Ue){this.computeFn=Ue,this.lastCache=void 0,this.lastArgKey=void 0}get(Ue){const Ye=JSON.stringify(Ue);return this.lastArgKey!==Ye&&(this.lastArgKey=Ye,this.lastCache=this.computeFn(Ue)),this.lastCache}}var d=a(79579),z;function O(gt){return!gt||typeof gt!="string"?!0:gt.trim().length===0}const S=/{(\d+)}/g;function j(gt,...Ue){return Ue.length===0?gt:gt.replace(S,function(Ye,dt){const Re=parseInt(dt,10);return isNaN(Re)||Re<0||Re>=Ue.length?Ye:Ue[Re]})}function T(gt){return gt.replace(/[<>&]/g,function(Ue){switch(Ue){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return Ue}})}function B(gt){return gt.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function F(gt,Ue=" "){const Ye=x(gt,Ue);return v(Ye,Ue)}function x(gt,Ue){if(!gt||!Ue)return gt;const Ye=Ue.length;if(Ye===0||gt.length===0)return gt;let dt=0;for(;gt.indexOf(Ue,dt)===dt;)dt=dt+Ye;return gt.substring(dt)}function v(gt,Ue){if(!gt||!Ue)return gt;const Ye=Ue.length,dt=gt.length;if(Ye===0||dt===0)return gt;let Re=dt,Ve=-1;for(;Ve=gt.lastIndexOf(Ue,Re-1),!(Ve===-1||Ve+Ye!==Re);){if(Ve===0)return"";Re=Ve}return gt.substring(0,Re)}function g(gt){return gt.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function D(gt){return gt.replace(/\*/g,"")}function c(gt,Ue,Ye={}){if(!gt)throw new Error("Cannot create regex from empty string");Ue||(gt=B(gt)),Ye.wholeWord&&(/\B/.test(gt.charAt(0))||(gt="\\b"+gt),/\B/.test(gt.charAt(gt.length-1))||(gt=gt+"\\b"));let dt="";return Ye.global&&(dt+="g"),Ye.matchCase||(dt+="i"),Ye.multiline&&(dt+="m"),Ye.unicode&&(dt+="u"),new RegExp(gt,dt)}function C(gt){return gt.source==="^"||gt.source==="^$"||gt.source==="$"||gt.source==="^\\s*$"?!1:!!(gt.exec("")&&gt.lastIndex===0)}function M(gt){return(gt.global?"g":"")+(gt.ignoreCase?"i":"")+(gt.multiline?"m":"")+(gt.unicode?"u":"")}function E(gt){return gt.split(/\r\n|\r|\n/)}function _(gt){for(let Ue=0,Ye=gt.length;Ue<Ye;Ue++){const dt=gt.charCodeAt(Ue);if(dt!==32&&dt!==9)return Ue}return-1}function L(gt,Ue=0,Ye=gt.length){for(let dt=Ue;dt<Ye;dt++){const Re=gt.charCodeAt(dt);if(Re!==32&&Re!==9)return gt.substring(Ue,dt)}return gt.substring(Ue,Ye)}function N(gt,Ue=gt.length-1){for(let Ye=Ue;Ye>=0;Ye--){const dt=gt.charCodeAt(Ye);if(dt!==32&&dt!==9)return Ye}return-1}function b(gt,Ue){return gt<Ue?-1:gt>Ue?1:0}function I(gt,Ue,Ye=0,dt=gt.length,Re=0,Ve=Ue.length){for(;Ye<dt&&Re<Ve;Ye++,Re++){let Be=gt.charCodeAt(Ye),je=Ue.charCodeAt(Re);if(Be<je)return-1;if(Be>je)return 1}const at=dt-Ye,pt=Ve-Re;return at<pt?-1:at>pt?1:0}function k(gt,Ue){return W(gt,Ue,0,gt.length,0,Ue.length)}function W(gt,Ue,Ye=0,dt=gt.length,Re=0,Ve=Ue.length){for(;Ye<dt&&Re<Ve;Ye++,Re++){let Be=gt.charCodeAt(Ye),je=Ue.charCodeAt(Re);if(Be===je)continue;if(Be>=128||je>=128)return I(gt.toLowerCase(),Ue.toLowerCase(),Ye,dt,Re,Ve);q(Be)&&(Be-=32),q(je)&&(je-=32);const Et=Be-je;if(Et!==0)return Et}const at=dt-Ye,pt=Ve-Re;return at<pt?-1:at>pt?1:0}function q(gt){return gt>=97&&gt<=122}function re(gt){return gt>=65&&gt<=90}function de(gt,Ue){return gt.length===Ue.length&&W(gt,Ue)===0}function pe(gt,Ue){const Ye=Ue.length;return Ue.length>gt.length?!1:W(gt,Ue,0,Ye)===0}function ae(gt,Ue){let Ye,dt=Math.min(gt.length,Ue.length);for(Ye=0;Ye<dt;Ye++)if(gt.charCodeAt(Ye)!==Ue.charCodeAt(Ye))return Ye;return dt}function ue(gt,Ue){let Ye,dt=Math.min(gt.length,Ue.length);const Re=gt.length-1,Ve=Ue.length-1;for(Ye=0;Ye<dt;Ye++)if(gt.charCodeAt(Re-Ye)!==Ue.charCodeAt(Ve-Ye))return Ye;return dt}function te(gt){return 55296<=gt&&gt<=56319}function K(gt){return 56320<=gt&&gt<=57343}function U(gt,Ue){return(gt-55296<<10)+(Ue-56320)+65536}function ee(gt,Ue,Ye){const dt=gt.charCodeAt(Ye);if(te(dt)&&Ye+1<Ue){const Re=gt.charCodeAt(Ye+1);if(K(Re))return U(dt,Re)}return dt}function X(gt,Ue){const Ye=gt.charCodeAt(Ue-1);if(K(Ye)&&Ue>1){const dt=gt.charCodeAt(Ue-2);if(te(dt))return U(dt,Ye)}return Ye}class le{constructor(Ue,Ye=0){this._str=Ue,this._len=Ue.length,this._offset=Ye}get offset(){return this._offset}setOffset(Ue){this._offset=Ue}prevCodePoint(){const Ue=X(this._str,this._offset);return this._offset-=Ue>=65536?2:1,Ue}nextCodePoint(){const Ue=ee(this._str,this._len,this._offset);return this._offset+=Ue>=65536?2:1,Ue}eol(){return this._offset>=this._len}}class oe{constructor(Ue,Ye=0){this._iterator=new le(Ue,Ye)}get offset(){return this._iterator.offset}nextGraphemeLength(){const Ue=ie.getInstance(),Ye=this._iterator,dt=Ye.offset;let Re=Ue.getGraphemeBreakType(Ye.nextCodePoint());for(;!Ye.eol();){const Ve=Ye.offset,at=Ue.getGraphemeBreakType(Ye.nextCodePoint());if(Q(Re,at)){Ye.setOffset(Ve);break}Re=at}return Ye.offset-dt}prevGraphemeLength(){const Ue=ie.getInstance(),Ye=this._iterator,dt=Ye.offset;let Re=Ue.getGraphemeBreakType(Ye.prevCodePoint());for(;Ye.offset>0;){const Ve=Ye.offset,at=Ue.getGraphemeBreakType(Ye.prevCodePoint());if(Q(at,Re)){Ye.setOffset(Ve);break}Re=at}return dt-Ye.offset}eol(){return this._iterator.eol()}}function Ce(gt,Ue){return new oe(gt,Ue).nextGraphemeLength()}function ye(gt,Ue){return new oe(gt,Ue).prevGraphemeLength()}function ke(gt,Ue){Ue>0&&K(gt.charCodeAt(Ue))&&Ue--;const Ye=Ue+Ce(gt,Ue);return[Ye-ye(gt,Ye),Ye]}const Te=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function ge(gt){return Te.test(gt)}const we=/^[\t\n\r\x20-\x7E]*$/;function ze(gt){return we.test(gt)}const Qe=/[\u2028\u2029]/;function Pe(gt){return Qe.test(gt)}function Oe(gt){return gt>=11904&&gt<=55215||gt>=63744&&gt<=64255||gt>=65281&&gt<=65374}function qe(gt){return gt>=127462&&gt<=127487||gt===8986||gt===8987||gt===9200||gt===9203||gt>=9728&&gt<=10175||gt===11088||gt===11093||gt>=127744&&gt<=128591||gt>=128640&&gt<=128764||gt>=128992&&gt<=129008||gt>=129280&&gt<=129535||gt>=129648&&gt<=129782}const Je=String.fromCharCode(65279);function Ne(gt){return!!(gt&&gt.length>0&&gt.charCodeAt(0)===65279)}function Fe(gt,Ue=!1){return gt?(Ue&&(gt=gt.replace(/\\./g,"")),gt.toLowerCase()!==gt):!1}function ne(gt){const Ue=90-65+1;return gt=gt%(2*Ue),gt<Ue?String.fromCharCode(97+gt):String.fromCharCode(65+gt-Ue)}function Q(gt,Ue){return gt===0?Ue!==5&&Ue!==7:gt===2&&Ue===3?!1:gt===4||gt===2||gt===3||Ue===4||Ue===2||Ue===3?!0:!(gt===8&&(Ue===8||Ue===9||Ue===11||Ue===12)||(gt===11||gt===9)&&(Ue===9||Ue===10)||(gt===12||gt===10)&&Ue===10||Ue===5||Ue===13||Ue===7||gt===1||gt===13&&Ue===14||gt===6&&Ue===6)}class ie{constructor(){this._data=xe()}static getInstance(){return ie._INSTANCE||(ie._INSTANCE=new ie),ie._INSTANCE}getGraphemeBreakType(Ue){if(Ue<32)return Ue===10?3:Ue===13?2:4;if(Ue<127)return 0;const Ye=this._data,dt=Ye.length/3;let Re=1;for(;Re<=dt;)if(Ue<Ye[3*Re])Re=2*Re;else if(Ue>Ye[3*Re+1])Re=2*Re+1;else return Ye[3*Re+2];return 0}}ie._INSTANCE=null;function xe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function be(gt,Ue){if(gt===0)return 0;const Ye=Ge(gt,Ue);if(Ye!==void 0)return Ye;const dt=new le(Ue,gt);return dt.prevCodePoint(),dt.offset}function Ge(gt,Ue){const Ye=new le(Ue,gt);let dt=Ye.prevCodePoint();for(;nt(dt)||dt===65039||dt===8419;){if(Ye.offset===0)return;dt=Ye.prevCodePoint()}if(!qe(dt))return;let Re=Ye.offset;return Re>0&&Ye.prevCodePoint()===8205&&(Re=Ye.offset),Re}function nt(gt){return 127995<=gt&&gt<=127999}const _t="\xA0";class Ot{constructor(Ue){this.confusableDictionary=Ue}static getInstance(Ue){return Ot.cache.get(Array.from(Ue))}static getLocales(){return Ot._locales.getValue()}isAmbiguous(Ue){return this.confusableDictionary.has(Ue)}getPrimaryConfusable(Ue){return this.confusableDictionary.get(Ue)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}z=Ot,Ot.ambiguousCharacterData=new d.o(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),Ot.cache=new p(gt=>{function Ue(je){const Et=new Map;for(let Dt=0;Dt<je.length;Dt+=2)Et.set(je[Dt],je[Dt+1]);return Et}function Ye(je,Et){const Dt=new Map(je);for(const[Xe,ft]of Et)Dt.set(Xe,ft);return Dt}function dt(je,Et){if(!je)return Et;const Dt=new Map;for(const[Xe,ft]of je)Et.has(Xe)&&Dt.set(Xe,ft);return Dt}const Re=z.ambiguousCharacterData.getValue();let Ve=gt.filter(je=>!je.startsWith("_")&&je in Re);Ve.length===0&&(Ve=["_default"]);let at;for(const je of Ve){const Et=Ue(Re[je]);at=dt(at,Et)}const pt=Ue(Re._common),Be=Ye(pt,at);return new Ot(Be)}),Ot._locales=new d.o(()=>Object.keys(Ot.ambiguousCharacterData.getValue()).filter(gt=>!gt.startsWith("_")));class rn{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(rn.getRawData())),this._data}static isInvisibleCharacter(Ue){return rn.getData().has(Ue)}static get codePoints(){return rn.getData()}}rn._data=void 0},98401:function(Tt,me,a){"use strict";a.d(me,{kJ:function(){return p},HD:function(){return d},Kn:function(){return z},hj:function(){return O},TW:function(){return S},jn:function(){return j},o8:function(){return T},$K:function(){return B},Jp:function(){return F},p_:function(){return x},cW:function(){return v},mf:function(){return g},D8:function(){return D},$E:function(){return M},IU:function(){return E},f6:function(){return _},vE:function(){return L}});function p(N){return Array.isArray(N)}function d(N){return typeof N=="string"}function z(N){return typeof N=="object"&&N!==null&&!Array.isArray(N)&&!(N instanceof RegExp)&&!(N instanceof Date)}function O(N){return typeof N=="number"&&!isNaN(N)}function S(N){return!!N&&typeof N[Symbol.iterator]=="function"}function j(N){return N===!0||N===!1}function T(N){return typeof N=="undefined"}function B(N){return!F(N)}function F(N){return T(N)||N===null}function x(N,b){if(!N)throw new Error(b?`Unexpected type, expected '${b}'`:"Unexpected type")}function v(N){if(F(N))throw new Error("Assertion Failed: argument is undefined or null");return N}function g(N){return typeof N=="function"}function D(N,b){const I=Math.min(N.length,b.length);for(let k=0;k<I;k++)c(N[k],b[k])}function c(N,b){if(d(b)){if(typeof N!==b)throw new Error(`argument does not match constraint: typeof ${b}`)}else if(g(b)){try{if(N instanceof b)return}catch(I){}if(!F(N)&&N.constructor===b||b.length===1&&b.call(void 0,N)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function C(N){let b=[],I=Object.getPrototypeOf(N);for(;Object.prototype!==I;)b=b.concat(Object.getOwnPropertyNames(I)),I=Object.getPrototypeOf(I);return b}function M(N){const b=[];for(const I of C(N))typeof N[I]=="function"&&b.push(I);return b}function E(N,b){const I=W=>function(){const q=Array.prototype.slice.call(arguments,0);return b(W,q)};let k={};for(const W of N)k[W]=I(W);return k}function _(N){return N===null?void 0:N}function L(N,b="Unreachable"){throw new Error(b)}},85427:function(Tt,me,a){"use strict";a.d(me,{K:function(){return p},A:function(){return d}});function p(z){return z<0?0:z>255?255:z|0}function d(z){return z<0?0:z>4294967295?4294967295:z|0}},70666:function(Tt,me,a){"use strict";a.d(me,{o:function(){return g},q:function(){return _}});var p=a(88721),d=a(1432);const z=/^\w[\w\d+.-]*$/,O=/^\//,S=/^\/\//;function j(k,W){if(!k.scheme&&W)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${k.authority}", path: "${k.path}", query: "${k.query}", fragment: "${k.fragment}"}`);if(k.scheme&&!z.test(k.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(k.path){if(k.authority){if(!O.test(k.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(S.test(k.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function T(k,W){return!k&&!W?"file":k}function B(k,W){switch(k){case"https":case"http":case"file":W?W[0]!==x&&(W=x+W):W=x;break}return W}const F="",x="/",v=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{constructor(W,q,re,de,pe,ae=!1){typeof W=="object"?(this.scheme=W.scheme||F,this.authority=W.authority||F,this.path=W.path||F,this.query=W.query||F,this.fragment=W.fragment||F):(this.scheme=T(W,ae),this.authority=q||F,this.path=B(this.scheme,re||F),this.query=de||F,this.fragment=pe||F,j(this,ae))}static isUri(W){return W instanceof g?!0:W?typeof W.authority=="string"&&typeof W.fragment=="string"&&typeof W.path=="string"&&typeof W.query=="string"&&typeof W.scheme=="string"&&typeof W.fsPath=="string"&&typeof W.with=="function"&&typeof W.toString=="function":!1}get fsPath(){return _(this,!1)}with(W){if(!W)return this;let{scheme:q,authority:re,path:de,query:pe,fragment:ae}=W;return q===void 0?q=this.scheme:q===null&&(q=F),re===void 0?re=this.authority:re===null&&(re=F),de===void 0?de=this.path:de===null&&(de=F),pe===void 0?pe=this.query:pe===null&&(pe=F),ae===void 0?ae=this.fragment:ae===null&&(ae=F),q===this.scheme&&re===this.authority&&de===this.path&&pe===this.query&&ae===this.fragment?this:new c(q,re,de,pe,ae)}static parse(W,q=!1){const re=v.exec(W);return re?new c(re[2]||F,I(re[4]||F),I(re[5]||F),I(re[7]||F),I(re[9]||F),q):new c(F,F,F,F,F)}static file(W){let q=F;if(d.ED&&(W=W.replace(/\\/g,x)),W[0]===x&&W[1]===x){const re=W.indexOf(x,2);re===-1?(q=W.substring(2),W=x):(q=W.substring(2,re),W=W.substring(re)||x)}return new c("file",q,W,F,F)}static from(W){const q=new c(W.scheme,W.authority,W.path,W.query,W.fragment);return j(q,!0),q}static joinPath(W,...q){if(!W.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let re;return d.ED&&W.scheme==="file"?re=g.file(p.Ku.join(_(W,!0),...q)).path:re=p.KR.join(W.path,...q),W.with({path:re})}toString(W=!1){return L(this,W)}toJSON(){return this}static revive(W){if(W){if(W instanceof g)return W;{const q=new c(W);return q._formatted=W.external,q._fsPath=W._sep===D?W.fsPath:null,q}}else return W}}const D=d.ED?1:void 0;class c extends g{constructor(){super(...arguments);this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=_(this,!1)),this._fsPath}toString(W=!1){return W?L(this,!0):(this._formatted||(this._formatted=L(this,!1)),this._formatted)}toJSON(){const W={$mid:1};return this._fsPath&&(W.fsPath=this._fsPath,W._sep=D),this._formatted&&(W.external=this._formatted),this.path&&(W.path=this.path),this.scheme&&(W.scheme=this.scheme),this.authority&&(W.authority=this.authority),this.query&&(W.query=this.query),this.fragment&&(W.fragment=this.fragment),W}}const C={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function M(k,W){let q,re=-1;for(let de=0;de<k.length;de++){const pe=k.charCodeAt(de);if(pe>=97&&pe<=122||pe>=65&&pe<=90||pe>=48&&pe<=57||pe===45||pe===46||pe===95||pe===126||W&&pe===47)re!==-1&&(q+=encodeURIComponent(k.substring(re,de)),re=-1),q!==void 0&&(q+=k.charAt(de));else{q===void 0&&(q=k.substr(0,de));const ae=C[pe];ae!==void 0?(re!==-1&&(q+=encodeURIComponent(k.substring(re,de)),re=-1),q+=ae):re===-1&&(re=de)}}return re!==-1&&(q+=encodeURIComponent(k.substring(re))),q!==void 0?q:k}function E(k){let W;for(let q=0;q<k.length;q++){const re=k.charCodeAt(q);re===35||re===63?(W===void 0&&(W=k.substr(0,q)),W+=C[re]):W!==void 0&&(W+=k[q])}return W!==void 0?W:k}function _(k,W){let q;return k.authority&&k.path.length>1&&k.scheme==="file"?q=`//${k.authority}${k.path}`:k.path.charCodeAt(0)===47&&(k.path.charCodeAt(1)>=65&&k.path.charCodeAt(1)<=90||k.path.charCodeAt(1)>=97&&k.path.charCodeAt(1)<=122)&&k.path.charCodeAt(2)===58?W?q=k.path.substr(1):q=k.path[1].toLowerCase()+k.path.substr(2):q=k.path,d.ED&&(q=q.replace(/\//g,"\\")),q}function L(k,W){const q=W?E:M;let re="",{scheme:de,authority:pe,path:ae,query:ue,fragment:te}=k;if(de&&(re+=de,re+=":"),(pe||de==="file")&&(re+=x,re+=x),pe){let K=pe.indexOf("@");if(K!==-1){const U=pe.substr(0,K);pe=pe.substr(K+1),K=U.indexOf(":"),K===-1?re+=q(U,!1):(re+=q(U.substr(0,K),!1),re+=":",re+=q(U.substr(K+1),!1)),re+="@"}pe=pe.toLowerCase(),K=pe.indexOf(":"),K===-1?re+=q(pe,!1):(re+=q(pe.substr(0,K),!1),re+=pe.substr(K))}if(ae){if(ae.length>=3&&ae.charCodeAt(0)===47&&ae.charCodeAt(2)===58){const K=ae.charCodeAt(1);K>=65&&K<=90&&(ae=`/${String.fromCharCode(K+32)}:${ae.substr(3)}`)}else if(ae.length>=2&&ae.charCodeAt(1)===58){const K=ae.charCodeAt(0);K>=65&&K<=90&&(ae=`${String.fromCharCode(K+32)}:${ae.substr(2)}`)}re+=q(ae,!0)}return ue&&(re+="?",re+=q(ue,!1)),te&&(re+="#",re+=W?te:M(te,!1)),re}function N(k){try{return decodeURIComponent(k)}catch(W){return k.length>3?k.substr(0,3)+N(k.substr(3)):k}}const b=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function I(k){return k.match(b)?k.replace(b,W=>N(W)):k}},67746:function(Tt,me,a){"use strict";a.d(me,{X5:function(){return p},Jq:function(){return d},jG:function(){return z}});const p={ctrlCmd:!1,alt:!1};var d;(function(j){j[j.Blur=1]="Blur",j[j.Gesture=2]="Gesture",j[j.Other=3]="Other"})(d||(d={}));var z;(function(j){j[j.NONE=0]="NONE",j[j.FIRST=1]="FIRST",j[j.SECOND=2]="SECOND",j[j.LAST=3]="LAST"})(z||(z={}));class O{constructor(T){this.options=T}}const S=new O},25552:function(Tt,me,a){"use strict";a.d(me,{H:function(){return g}});var p=a(26565);/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var d=Object.defineProperty,z=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,j=(D,c,C,M)=>{if(c&&typeof c=="object"||typeof c=="function")for(let E of O(c))!S.call(D,E)&&(C||E!=="default")&&d(D,E,{get:()=>c[E],enumerable:!(M=z(c,E))||M.enumerable});return D},T={};j(T,p);var B={},F={},x=class{constructor(D){Ua(this,"_languageId");Ua(this,"_loadingTriggered");Ua(this,"_lazyLoadPromise");Ua(this,"_lazyLoadPromiseResolve");Ua(this,"_lazyLoadPromiseReject");this._languageId=D,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((c,C)=>{this._lazyLoadPromiseResolve=c,this._lazyLoadPromiseReject=C})}static getOrCreate(D){return F[D]||(F[D]=new x(D)),F[D]}load(){return this._loadingTriggered||(this._loadingTriggered=!0,B[this._languageId].loader().then(D=>this._lazyLoadPromiseResolve(D),D=>this._lazyLoadPromiseReject(D))),this._lazyLoadPromise}};async function v(D){await x.getOrCreate(D).load(),T.editor.createModel("",D).dispose()}function g(D){const c=D.id;B[c]=D,T.languages.register(D);const C=x.getOrCreate(c);T.languages.registerTokensProviderFactory(c,{create:async()=>(await C.load()).language}),T.languages.onLanguage(c,async()=>{const M=await C.load();T.languages.setLanguageConfiguration(c,M.conf)})}},1526:function(Tt,me,a){"use strict";a.r(me);var p=a(25552);/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/(0,p.H)({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>a.e(703).then(a.bind(a,15703))})},43763:function(Tt,me,a){"use strict";a.r(me);var p=a(25552);/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/(0,p.H)({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>a.e(134).then(a.bind(a,41134))})},38698:function(Tt,me,a){"use strict";a.r(me);var p=a(25552);/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/(0,p.H)({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>a.e(28).then(a.bind(a,94028))})},88307:function(Tt,me,a){"use strict";a.r(me);var p=a(25552);/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/(0,p.H)({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>a.e(717).then(a.bind(a,96717))})},52136:function(Tt,me,a){"use strict";a.d(me,{N:function(){return O}});var p=a(16268),d=a(38626),z=a(64141);function O(S,j){S instanceof d.Z?(S.setFontFamily(j.getMassagedFontFamily(p.isSafari?z.hL.fontFamily:null)),S.setFontWeight(j.fontWeight),S.setFontSize(j.fontSize),S.setFontFeatureSettings(j.fontFeatureSettings),S.setLineHeight(j.lineHeight),S.setLetterSpacing(j.letterSpacing)):(S.style.fontFamily=j.getMassagedFontFamily(p.isSafari?z.hL.fontFamily:null),S.style.fontWeight=j.fontWeight,S.style.fontSize=j.fontSize+"px",S.style.fontFeatureSettings=j.fontFeatureSettings,S.style.lineHeight=j.lineHeight+"px",S.style.letterSpacing=j.letterSpacing+"px")}},54534:function(Tt,me,a){"use strict";a.d(me,{I:function(){return z}});var p=a(9917),d=a(4669);class z extends p.JT{constructor(S,j){super();this._onDidChange=this._register(new d.Q5),this.onDidChange=this._onDidChange.event,this._referenceDomElement=S,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,j)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(S=>{S&&S[0]&&S[0].contentRect?this.observe({width:S[0].contentRect.width,height:S[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(S){this.measureReferenceDomElement(!0,S)}measureReferenceDomElement(S,j){let T=0,B=0;j?(T=j.width,B=j.height):this._referenceDomElement&&(T=this._referenceDomElement.clientWidth,B=this._referenceDomElement.clientHeight),T=Math.max(5,T),B=Math.max(5,B),(this._width!==T||this._height!==B)&&(this._width=T,this._height=B,S&&this._onDidChange.fire())}}},27231:function(Tt,me,a){"use strict";a.d(me,{g:function(){return g}});var p=a(16268),d=a(4669),z=a(9917),O=a(52136);class S{constructor(c,C){this.chr=c,this.type=C,this.width=0}fulfill(c){this.width=c}}class j{constructor(c,C){this._bareFontInfo=c,this._requests=C,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const c=document.createElement("div");c.style.position="absolute",c.style.top="-50000px",c.style.width="50000px";const C=document.createElement("div");(0,O.N)(C,this._bareFontInfo),c.appendChild(C);const M=document.createElement("div");(0,O.N)(M,this._bareFontInfo),M.style.fontWeight="bold",c.appendChild(M);const E=document.createElement("div");(0,O.N)(E,this._bareFontInfo),E.style.fontStyle="italic",c.appendChild(E);const _=[];for(const L of this._requests){let N;L.type===0&&(N=C),L.type===2&&(N=M),L.type===1&&(N=E),N.appendChild(document.createElement("br"));const b=document.createElement("span");j._render(b,L),N.appendChild(b),_.push(b)}this._container=c,this._testElements=_}static _render(c,C){if(C.chr===" "){let M="\xA0";for(let E=0;E<8;E++)M+=M;c.innerText=M}else{let M=C.chr;for(let E=0;E<8;E++)M+=M;c.textContent=M}}_readFromDomElements(){for(let c=0,C=this._requests.length;c<C;c++){const M=this._requests[c],E=this._testElements[c];M.fulfill(E.offsetWidth/256)}}}function T(D,c){new j(D,c).read()}var B=a(64141),F=a(27374);class x extends z.JT{constructor(){super();this._onDidChange=this._register(new d.Q5),this.onDidChange=this._onDidChange.event,this._cache=new v,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new v,this._onDidChange.fire()}_writeToCache(c,C){this._cache.put(c,C),!C.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const c=this._cache.getValues();let C=!1;for(const M of c)M.isTrusted||(C=!0,this._cache.remove(M));C&&this._onDidChange.fire()}readFontInfo(c){if(!this._cache.has(c)){let C=this._actualReadFontInfo(c);(C.typicalHalfwidthCharacterWidth<=2||C.typicalFullwidthCharacterWidth<=2||C.spaceWidth<=2||C.maxDigitWidth<=2)&&(C=new F.pR({pixelRatio:p.PixelRatio.value,fontFamily:C.fontFamily,fontWeight:C.fontWeight,fontSize:C.fontSize,fontFeatureSettings:C.fontFeatureSettings,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,isMonospace:C.isMonospace,typicalHalfwidthCharacterWidth:Math.max(C.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(C.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:C.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(C.spaceWidth,5),middotWidth:Math.max(C.middotWidth,5),wsmiddotWidth:Math.max(C.wsmiddotWidth,5),maxDigitWidth:Math.max(C.maxDigitWidth,5)},!1)),this._writeToCache(c,C)}return this._cache.get(c)}_createRequest(c,C,M,E){const _=new S(c,C);return M.push(_),E&&E.push(_),_}_actualReadFontInfo(c){const C=[],M=[],E=this._createRequest("n",0,C,M),_=this._createRequest("\uFF4D",0,C,null),L=this._createRequest(" ",0,C,M),N=this._createRequest("0",0,C,M),b=this._createRequest("1",0,C,M),I=this._createRequest("2",0,C,M),k=this._createRequest("3",0,C,M),W=this._createRequest("4",0,C,M),q=this._createRequest("5",0,C,M),re=this._createRequest("6",0,C,M),de=this._createRequest("7",0,C,M),pe=this._createRequest("8",0,C,M),ae=this._createRequest("9",0,C,M),ue=this._createRequest("\u2192",0,C,M),te=this._createRequest("\uFFEB",0,C,null),K=this._createRequest("\xB7",0,C,M),U=this._createRequest(String.fromCharCode(11825),0,C,null),ee="|/-_ilm%";for(let ye=0,ke=ee.length;ye<ke;ye++)this._createRequest(ee.charAt(ye),0,C,M),this._createRequest(ee.charAt(ye),1,C,M),this._createRequest(ee.charAt(ye),2,C,M);T(c,C);const X=Math.max(N.width,b.width,I.width,k.width,W.width,q.width,re.width,de.width,pe.width,ae.width);let le=c.fontFeatureSettings===B.n0.OFF;const oe=M[0].width;for(let ye=1,ke=M.length;le&&ye<ke;ye++){const Te=oe-M[ye].width;if(Te<-.001||Te>.001){le=!1;break}}let Ce=!0;return le&&te.width!==oe&&(Ce=!1),te.width>ue.width&&(Ce=!1),new F.pR({pixelRatio:p.PixelRatio.value,fontFamily:c.fontFamily,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFeatureSettings:c.fontFeatureSettings,lineHeight:c.lineHeight,letterSpacing:c.letterSpacing,isMonospace:le,typicalHalfwidthCharacterWidth:E.width,typicalFullwidthCharacterWidth:_.width,canUseHalfwidthRightwardsArrow:Ce,spaceWidth:L.width,middotWidth:K.width,wsmiddotWidth:U.width,maxDigitWidth:X},!0)}}class v{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(c){const C=c.getId();return!!this._values[C]}get(c){const C=c.getId();return this._values[C]}put(c,C){const M=c.getId();this._keys[M]=c,this._values[M]=C}remove(c){const C=c.getId();delete this._keys[C],delete this._values[C]}getValues(){return Object.keys(this._keys).map(c=>this._values[c])}}const g=new x},37940:function(Tt,me,a){"use strict";a.d(me,{n:function(){return z}});var p=a(4669);class d{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new p.Q5,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(S){this._tabFocus!==S&&(this._tabFocus=S,this._onDidChangeTabFocus.fire(this._tabFocus))}}const z=new d},35715:function(Tt,me,a){"use strict";a.d(me,{pd:function(){return v},RA:function(){return g},Nl:function(){return D},Fz:function(){return C},Tj:function(){return E}});var p=a(16268),d=a(65321),z=a(59069),O=a(15393),S=a(4669),j=a(9917),T=a(81170),B=a(25924),F=a(15887),x=a(3860),v;(function(_){_.Tap="-monaco-textarea-synthetic-tap"})(v||(v={}));const g={forceCopyWithSyntaxHighlighting:!1};class D{constructor(){this._lastState=null}set(L,N){this._lastState={lastCopiedValue:L,data:N}}get(L){return this._lastState&&this._lastState.lastCopiedValue===L?this._lastState.data:(this._lastState=null,null)}}D.INSTANCE=new D;class c{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(L){L=L||"";const N={text:L,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=L.length,N}}class C extends j.JT{constructor(L,N,b,I){super();this._host=L,this._textArea=N,this._OS=b,this._browser=I,this._onFocus=this._register(new S.Q5),this.onFocus=this._onFocus.event,this._onBlur=this._register(new S.Q5),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new S.Q5),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new S.Q5),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new S.Q5),this.onCut=this._onCut.event,this._onPaste=this._register(new S.Q5),this.onPaste=this._onPaste.event,this._onType=this._register(new S.Q5),this.onType=this._onType.event,this._onCompositionStart=this._register(new S.Q5),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new S.Q5),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new S.Q5),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new S.Q5),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new O.pY(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new O.pY(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=F.un.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let k=null;this._register(this._textArea.onKeyDown(W=>{const q=new z.y(W);(q.keyCode===109||this._currentComposition&&q.keyCode===1)&&q.stopPropagation(),q.equals(9)&&q.preventDefault(),k=q,this._onKeyDown.fire(q)})),this._register(this._textArea.onKeyUp(W=>{const q=new z.y(W);this._onKeyUp.fire(q)})),this._register(this._textArea.onCompositionStart(W=>{F.al&&console.log("[compositionstart]",W);const q=new c;if(this._currentComposition){this._currentComposition=q;return}if(this._currentComposition=q,this._OS===2&&k&&k.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===W.data&&(k.code==="ArrowRight"||k.code==="ArrowLeft")){F.al&&console.log("[compositionstart] Handling long press case on macOS + arrow key",W),q.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:W.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:W.data});return}this._onCompositionStart.fire({data:W.data})})),this._register(this._textArea.onCompositionUpdate(W=>{F.al&&console.log("[compositionupdate]",W);const q=this._currentComposition;if(!q)return;if(this._browser.isAndroid){const de=F.un.readFromTextArea(this._textArea),pe=F.un.deduceAndroidCompositionInput(this._textAreaState,de);this._textAreaState=de,this._onType.fire(pe),this._onCompositionUpdate.fire(W);return}const re=q.handleCompositionUpdate(W.data);this._textAreaState=F.un.readFromTextArea(this._textArea),this._onType.fire(re),this._onCompositionUpdate.fire(W)})),this._register(this._textArea.onCompositionEnd(W=>{F.al&&console.log("[compositionend]",W);const q=this._currentComposition;if(!q)return;if(this._currentComposition=null,this._browser.isAndroid){const de=F.un.readFromTextArea(this._textArea),pe=F.un.deduceAndroidCompositionInput(this._textAreaState,de);this._textAreaState=de,this._onType.fire(pe),this._onCompositionEnd.fire();return}const re=q.handleCompositionUpdate(W.data);this._textAreaState=F.un.readFromTextArea(this._textArea),this._onType.fire(re),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(W=>{if(F.al&&console.log("[input]",W),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const q=F.un.readFromTextArea(this._textArea),re=F.un.deduceInput(this._textAreaState,q,this._OS===2);re.replacePrevCharCnt===0&&re.text.length===1&&B.ZG(re.text.charCodeAt(0))||(this._textAreaState=q,(re.text!==""||re.replacePrevCharCnt!==0||re.replaceNextCharCnt!==0||re.positionDelta!==0)&&this._onType.fire(re))})),this._register(this._textArea.onCut(W=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(W),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(W=>{this._ensureClipboardGetsEditorSelection(W)})),this._register(this._textArea.onPaste(W=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),W.preventDefault(),!W.clipboardData)return;let[q,re]=M.getTextData(W.clipboardData);!q||(re=re||D.INSTANCE.get(q),this._onPaste.fire({text:q,metadata:re}))})),this._register(this._textArea.onFocus(()=>{const W=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!W&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let L=0;return d.nm(document,"selectionchange",N=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const b=Date.now(),I=b-L;if(L=b,I<5)return;const k=b-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),k<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const W=this._textArea.getValue();if(this._textAreaState.value!==W)return;const q=this._textArea.getSelectionStart(),re=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===q&&this._textAreaState.selectionEnd===re)return;const de=this._textAreaState.deduceEditorPosition(q),pe=this._host.deduceModelPosition(de[0],de[1],de[2]),ae=this._textAreaState.deduceEditorPosition(re),ue=this._host.deduceModelPosition(ae[0],ae[1],ae[2]),te=new x.Y(pe.lineNumber,pe.column,ue.lineNumber,ue.column);this._onSelectionChangeRequest.fire(te)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(L){this._hasFocus!==L&&(this._hasFocus=L,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(L,N){this._hasFocus||(N=N.collapseSelection()),N.writeToTextArea(L,this._textArea,this._hasFocus),this._textAreaState=N}writeScreenReaderContent(L){this._currentComposition||this._setAndWriteTextAreaState(L,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(L){const N=this._host.getDataToCopy(),b={version:1,isFromEmptySelection:N.isFromEmptySelection,multicursorText:N.multicursorText,mode:N.mode};D.INSTANCE.set(this._browser.isFirefox?N.text.replace(/\r\n/g,`
`):N.text,b),L.preventDefault(),L.clipboardData&&M.setTextData(L.clipboardData,N.text,N.html,b)}}class M{static getTextData(L){const N=L.getData(T.v.text);let b=null;const I=L.getData("vscode-editor-data");if(typeof I=="string")try{b=JSON.parse(I),b.version!==1&&(b=null)}catch(k){}return[N,b]}static setTextData(L,N,b,I){L.setData(T.v.text,N),typeof b=="string"&&L.setData("text/html",b),L.setData("vscode-editor-data",JSON.stringify(I))}}class E extends j.JT{constructor(L){super();this._actual=L,this.onKeyDown=this._register(d.IC(this._actual,"keydown")).event,this.onKeyUp=this._register(d.IC(this._actual,"keyup")).event,this.onCompositionStart=this._register(d.IC(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(d.IC(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(d.IC(this._actual,"compositionend")).event,this.onInput=this._register(d.IC(this._actual,"input")).event,this.onCut=this._register(d.IC(this._actual,"cut")).event,this.onCopy=this._register(d.IC(this._actual,"copy")).event,this.onPaste=this._register(d.IC(this._actual,"paste")).event,this.onFocus=this._register(d.IC(this._actual,"focus")).event,this.onBlur=this._register(d.IC(this._actual,"blur")).event,this._onSyntheticTap=this._register(new S.Q5),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(d.nm(this._actual,v.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const L=d.Ay(this._actual);return L?L.activeElement===this._actual:d.Uw(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(L){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(L,N){const b=this._actual;b.value!==N&&(this.setIgnoreSelectionChangeTime("setValue"),b.value=N)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(L,N,b){const I=this._actual;let k=null;const W=d.Ay(I);W?k=W.activeElement:k=document.activeElement;const q=k===I,re=I.selectionStart,de=I.selectionEnd;if(q&&re===N&&de===b){p.isFirefox&&window.parent!==window&&I.focus();return}if(q){this.setIgnoreSelectionChangeTime("setSelectionRange"),I.setSelectionRange(N,b),p.isFirefox&&window.parent!==window&&I.focus();return}try{const pe=d.vL(I);this.setIgnoreSelectionChangeTime("setSelectionRange"),I.focus(),I.setSelectionRange(N,b),d._0(I,pe)}catch(pe){}}}},15887:function(Tt,me,a){"use strict";a.d(me,{al:function(){return O},un:function(){return S},ee:function(){return j}});var p=a(25924),d=a(50187),z=a(24314);const O=!1;class S{constructor(B,F,x,v,g){this.value=B,this.selectionStart=F,this.selectionEnd=x,this.selectionStartPosition=v,this.selectionEndPosition=g}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(B){return new S(B.getValue(),B.getSelectionStart(),B.getSelectionEnd(),null,null)}collapseSelection(){return new S(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(B,F,x){O&&console.log(`writeToTextArea ${B}: ${this.toString()}`),F.setValue(B,this.value),x&&F.setSelectionRange(B,this.selectionStart,this.selectionEnd)}deduceEditorPosition(B){if(B<=this.selectionStart){const v=this.value.substring(B,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,v,-1)}if(B>=this.selectionEnd){const v=this.value.substring(this.selectionEnd,B);return this._finishDeduceEditorPosition(this.selectionEndPosition,v,1)}const F=this.value.substring(this.selectionStart,B);if(F.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,F,1);const x=this.value.substring(B,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,x,-1)}_finishDeduceEditorPosition(B,F,x){let v=0,g=-1;for(;(g=F.indexOf(`
`,g+1))!==-1;)v++;return[B,x*F.length,v]}static deduceInput(B,F,x){if(!B)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};O&&(console.log("------------------------deduceInput"),console.log(`PREVIOUS STATE: ${B.toString()}`),console.log(`CURRENT STATE: ${F.toString()}`));const v=Math.min(p.Mh(B.value,F.value),B.selectionStart,F.selectionStart),g=Math.min(p.P1(B.value,F.value),B.value.length-B.selectionEnd,F.value.length-F.selectionEnd),D=B.value.substring(v,B.value.length-g),c=F.value.substring(v,F.value.length-g),C=B.selectionStart-v,M=B.selectionEnd-v,E=F.selectionStart-v,_=F.selectionEnd-v;if(O&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${D}>, selectionStart: ${C}, selectionEnd: ${M}`),console.log(`AFTER DIFFING CURRENT STATE: <${c}>, selectionStart: ${E}, selectionEnd: ${_}`)),E===_){const N=B.selectionStart-v;return O&&console.log(`REMOVE PREVIOUS: ${N} chars`),{text:c,replacePrevCharCnt:N,replaceNextCharCnt:0,positionDelta:0}}const L=M-C;return{text:c,replacePrevCharCnt:L,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(B,F){if(!B)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(O&&(console.log("------------------------deduceAndroidCompositionInput"),console.log(`PREVIOUS STATE: ${B.toString()}`),console.log(`CURRENT STATE: ${F.toString()}`)),B.value===F.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:F.selectionEnd-B.selectionEnd};const x=Math.min(p.Mh(B.value,F.value),B.selectionEnd),v=Math.min(p.P1(B.value,F.value),B.value.length-B.selectionEnd),g=B.value.substring(x,B.value.length-v),D=F.value.substring(x,F.value.length-v),c=B.selectionStart-x,C=B.selectionEnd-x,M=F.selectionStart-x,E=F.selectionEnd-x;return O&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${g}>, selectionStart: ${c}, selectionEnd: ${C}`),console.log(`AFTER DIFFING CURRENT STATE: <${D}>, selectionStart: ${M}, selectionEnd: ${E}`)),{text:D,replacePrevCharCnt:C,replaceNextCharCnt:g.length-C,positionDelta:E-D.length}}}S.EMPTY=new S("",0,0,null,null);class j{static _getPageOfLine(B,F){return Math.floor((B-1)/F)}static _getRangeForPage(B,F){const x=B*F,v=x+1,g=x+F;return new z.e(v,1,g+1,1)}static fromEditorSelection(B,F,x,v,g){const D=j._getPageOfLine(x.startLineNumber,v),c=j._getRangeForPage(D,v),C=j._getPageOfLine(x.endLineNumber,v),M=j._getRangeForPage(C,v),E=c.intersectRanges(new z.e(1,1,x.startLineNumber,x.startColumn));let _=F.getValueInRange(E,1);const L=F.getLineCount(),N=F.getLineMaxColumn(L),b=M.intersectRanges(new z.e(x.endLineNumber,x.endColumn,L,N));let I=F.getValueInRange(b,1),k;if(D===C||D+1===C)k=F.getValueInRange(x,1);else{const W=c.intersectRanges(x),q=M.intersectRanges(x);k=F.getValueInRange(W,1)+String.fromCharCode(8230)+F.getValueInRange(q,1)}if(g){const W=500;_.length>W&&(_=_.substring(_.length-W,_.length)),I.length>W&&(I=I.substring(0,W)),k.length>2*W&&(k=k.substring(0,W)+String.fromCharCode(8230)+k.substring(k.length-W,k.length))}return new S(_+k+I,_.length,_.length+k.length,new d.L(x.startLineNumber,x.startColumn),new d.L(x.endLineNumber,x.endColumn))}}},69317:function(Tt,me,a){"use strict";a.r(me),a.d(me,{CoreEditingCommands:function(){return re},CoreEditorCommand:function(){return _},CoreNavigationCommands:function(){return I},EditorScroll_:function(){return L},RevealLine_:function(){return N}});var p=a(63580),d=a(16268),z=a(98401),O=a(85152),S=a(16830),j=a(11640),T=a(55343),B=a(50187),F=a(24314);class x{static columnSelect(ue,te,K,U,ee,X){const le=Math.abs(ee-K)+1,oe=K>ee,Ce=U>X,ye=U<X,ke=[];for(let Te=0;Te<le;Te++){const ge=K+(oe?-Te:Te),we=ue.columnFromVisibleColumn(te,ge,U),ze=ue.columnFromVisibleColumn(te,ge,X),Qe=ue.visibleColumnFromColumn(te,new B.L(ge,we)),Pe=ue.visibleColumnFromColumn(te,new B.L(ge,ze));ye&&(Qe>X||Pe<U)||Ce&&(Pe>U||Qe<X)||ke.push(new T.rS(new F.e(ge,we,ge,we),0,new B.L(ge,ze),0))}if(ke.length===0)for(let Te=0;Te<le;Te++){const ge=K+(oe?-Te:Te),we=te.getLineMaxColumn(ge);ke.push(new T.rS(new F.e(ge,we,ge,we),0,new B.L(ge,we),0))}return{viewStates:ke,reversed:oe,fromLineNumber:K,fromVisualColumn:U,toLineNumber:ee,toVisualColumn:X}}static columnSelectLeft(ue,te,K){let U=K.toViewVisualColumn;return U>0&&U--,x.columnSelect(ue,te,K.fromViewLineNumber,K.fromViewVisualColumn,K.toViewLineNumber,U)}static columnSelectRight(ue,te,K){let U=0;const ee=Math.min(K.fromViewLineNumber,K.toViewLineNumber),X=Math.max(K.fromViewLineNumber,K.toViewLineNumber);for(let oe=ee;oe<=X;oe++){const Ce=te.getLineMaxColumn(oe),ye=ue.visibleColumnFromColumn(te,new B.L(oe,Ce));U=Math.max(U,ye)}let le=K.toViewVisualColumn;return le<U&&le++,this.columnSelect(ue,te,K.fromViewLineNumber,K.fromViewVisualColumn,K.toViewLineNumber,le)}static columnSelectUp(ue,te,K,U){const ee=U?ue.pageSize:1,X=Math.max(1,K.toViewLineNumber-ee);return this.columnSelect(ue,te,K.fromViewLineNumber,K.fromViewVisualColumn,X,K.toViewVisualColumn)}static columnSelectDown(ue,te,K,U){const ee=U?ue.pageSize:1,X=Math.min(te.getLineCount(),K.toViewLineNumber+ee);return this.columnSelect(ue,te,K.fromViewLineNumber,K.fromViewVisualColumn,X,K.toViewVisualColumn)}}var v=a(29436),g=a(28108),D=a(51336),c=a(29102),C=a(16141),M=a(49989);const E=0;class _ extends S._l{runEditorCommand(ue,te,K){const U=te._getViewModel();!U||this.runCoreEditorCommand(U,K||{})}}var L;(function(ae){const ue=function(K){if(!z.Kn(K))return!1;const U=K;return!(!z.HD(U.to)||!z.o8(U.by)&&!z.HD(U.by)||!z.o8(U.value)&&!z.hj(U.value)||!z.o8(U.revealCursor)&&!z.jn(U.revealCursor))};ae.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:ue,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},ae.RawDirection={Up:"up",Down:"down"},ae.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function te(K){let U;switch(K.to){case ae.RawDirection.Up:U=1;break;case ae.RawDirection.Down:U=2;break;default:return null}let ee;switch(K.by){case ae.RawUnit.Line:ee=1;break;case ae.RawUnit.WrappedLine:ee=2;break;case ae.RawUnit.Page:ee=3;break;case ae.RawUnit.HalfPage:ee=4;break;default:ee=2}const X=Math.floor(K.value||1),le=!!K.revealCursor;return{direction:U,unit:ee,value:X,revealCursor:le,select:!!K.select}}ae.parse=te})(L||(L={}));var N;(function(ae){const ue=function(te){if(!z.Kn(te))return!1;const K=te;return!(!z.hj(K.lineNumber)&&!z.HD(K.lineNumber)||!z.o8(K.at)&&!z.HD(K.at))};ae.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:ue,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},ae.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(N||(N={}));class b{constructor(ue){ue.addImplementation(1e4,"code-editor",(te,K)=>{const U=te.get(j.$).getFocusedCodeEditor();return U&&U.hasTextFocus()?this._runEditorCommand(te,U,K):!1}),ue.addImplementation(1e3,"generic-dom-input-textarea",(te,K)=>{const U=document.activeElement;return U&&["input","textarea"].indexOf(U.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),ue.addImplementation(0,"generic-dom",(te,K)=>{const U=te.get(j.$).getActiveCodeEditor();return U?(U.focus(),this._runEditorCommand(te,U,K)):!1})}_runEditorCommand(ue,te,K){const U=this.runEditorCommand(ue,te,K);return U||!0}}var I;(function(ae){class ue extends _{constructor(Oe){super(Oe);this._minimalReveal=Oe.minimalReveal,this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,[g.P.moveTo(Oe,Oe.getPrimaryCursorState(),this._inSelectionMode,qe.position,qe.viewPosition)])&&Oe.revealPrimaryCursor(qe.source,!0,this._minimalReveal)}}ae.MoveTo=(0,S.fK)(new ue({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),ae.MoveToSelect=(0,S.fK)(new ue({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class te extends _{runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement();const Je=this._getColumnSelectResult(Oe,Oe.getPrimaryCursorState(),Oe.getCursorColumnSelectData(),qe);Oe.setCursorStates(qe.source,3,Je.viewStates.map(Ne=>T.Vi.fromViewState(Ne))),Oe.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:Je.fromLineNumber,fromViewVisualColumn:Je.fromVisualColumn,toViewLineNumber:Je.toLineNumber,toViewVisualColumn:Je.toVisualColumn}),Je.reversed?Oe.revealTopMostCursor(qe.source):Oe.revealBottomMostCursor(qe.source)}}ae.ColumnSelect=(0,S.fK)(new class extends te{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(Pe,Oe,qe,Je){const Ne=Pe.model.validatePosition(Je.position),Fe=Pe.coordinatesConverter.validateViewPosition(new B.L(Je.viewPosition.lineNumber,Je.viewPosition.column),Ne),ne=Je.doColumnSelect?qe.fromViewLineNumber:Fe.lineNumber,Q=Je.doColumnSelect?qe.fromViewVisualColumn:Je.mouseColumn-1;return x.columnSelect(Pe.cursorConfig,Pe,ne,Q,Fe.lineNumber,Je.mouseColumn-1)}}),ae.CursorColumnSelectLeft=(0,S.fK)(new class extends te{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|1024|512|15,linux:{primary:0}}})}_getColumnSelectResult(Pe,Oe,qe,Je){return x.columnSelectLeft(Pe.cursorConfig,Pe,qe)}}),ae.CursorColumnSelectRight=(0,S.fK)(new class extends te{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|1024|512|17,linux:{primary:0}}})}_getColumnSelectResult(Pe,Oe,qe,Je){return x.columnSelectRight(Pe.cursorConfig,Pe,qe)}});class K extends te{constructor(Oe){super(Oe);this._isPaged=Oe.isPaged}_getColumnSelectResult(Oe,qe,Je,Ne){return x.columnSelectUp(Oe.cursorConfig,Oe,Je,this._isPaged)}}ae.CursorColumnSelectUp=(0,S.fK)(new K({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|1024|512|16,linux:{primary:0}}})),ae.CursorColumnSelectPageUp=(0,S.fK)(new K({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|1024|512|11,linux:{primary:0}}}));class U extends te{constructor(Oe){super(Oe);this._isPaged=Oe.isPaged}_getColumnSelectResult(Oe,qe,Je,Ne){return x.columnSelectDown(Oe.cursorConfig,Oe,Je,this._isPaged)}}ae.CursorColumnSelectDown=(0,S.fK)(new U({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|1024|512|18,linux:{primary:0}}})),ae.CursorColumnSelectPageDown=(0,S.fK)(new U({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|1024|512|12,linux:{primary:0}}}));class ee extends _{constructor(){super({id:"cursorMove",precondition:void 0,description:g.N.description})}runCoreEditorCommand(Oe,qe){const Je=g.N.parse(qe);!Je||this._runCursorMove(Oe,qe.source,Je)}_runCursorMove(Oe,qe,Je){Oe.model.pushStackElement(),Oe.setCursorStates(qe,3,ee._move(Oe,Oe.getCursorStates(),Je)),Oe.revealPrimaryCursor(qe,!0)}static _move(Oe,qe,Je){const Ne=Je.select,Fe=Je.value;switch(Je.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return g.P.simpleMove(Oe,qe,Je.direction,Ne,Fe,Je.unit);case 11:case 13:case 12:case 14:return g.P.viewportMove(Oe,qe,Je.direction,Ne,Fe);default:return null}}}ae.CursorMoveImpl=ee,ae.CursorMove=(0,S.fK)(new ee);class X extends _{constructor(Oe){super(Oe);this._staticArgs=Oe.args}runCoreEditorCommand(Oe,qe){let Je=this._staticArgs;this._staticArgs.value===-1&&(Je={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:qe.pageSize||Oe.cursorConfig.pageSize}),Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,g.P.simpleMove(Oe,Oe.getCursorStates(),Je.direction,Je.select,Je.value,Je.unit)),Oe.revealPrimaryCursor(qe.source,!0)}}ae.CursorLeft=(0,S.fK)(new X({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:15,mac:{primary:15,secondary:[256|32]}}})),ae.CursorLeftSelect=(0,S.fK)(new X({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:1024|15}})),ae.CursorRight=(0,S.fK)(new X({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:17,mac:{primary:17,secondary:[256|36]}}})),ae.CursorRightSelect=(0,S.fK)(new X({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:1024|17}})),ae.CursorUp=(0,S.fK)(new X({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:16,mac:{primary:16,secondary:[256|46]}}})),ae.CursorUpSelect=(0,S.fK)(new X({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:1024|16,secondary:[2048|1024|16],mac:{primary:1024|16},linux:{primary:1024|16}}})),ae.CursorPageUp=(0,S.fK)(new X({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:11}})),ae.CursorPageUpSelect=(0,S.fK)(new X({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:1024|11}})),ae.CursorDown=(0,S.fK)(new X({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:18,mac:{primary:18,secondary:[256|44]}}})),ae.CursorDownSelect=(0,S.fK)(new X({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:1024|18,secondary:[2048|1024|18],mac:{primary:1024|18},linux:{primary:1024|18}}})),ae.CursorPageDown=(0,S.fK)(new X({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:12}})),ae.CursorPageDownSelect=(0,S.fK)(new X({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:1024|12}})),ae.CreateCursor=(0,S.fK)(new class extends _{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(Pe,Oe){let qe;Oe.wholeLine?qe=g.P.line(Pe,Pe.getPrimaryCursorState(),!1,Oe.position,Oe.viewPosition):qe=g.P.moveTo(Pe,Pe.getPrimaryCursorState(),!1,Oe.position,Oe.viewPosition);const Je=Pe.getCursorStates();if(Je.length>1){const Ne=qe.modelState?qe.modelState.position:null,Fe=qe.viewState?qe.viewState.position:null;for(let ne=0,Q=Je.length;ne<Q;ne++){const ie=Je[ne];if(!(Ne&&!ie.modelState.selection.containsPosition(Ne))&&!(Fe&&!ie.viewState.selection.containsPosition(Fe))){Je.splice(ne,1),Pe.model.pushStackElement(),Pe.setCursorStates(Oe.source,3,Je);return}}}Je.push(qe),Pe.model.pushStackElement(),Pe.setCursorStates(Oe.source,3,Je)}}),ae.LastCursorMoveToSelect=(0,S.fK)(new class extends _{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(Pe,Oe){const qe=Pe.getLastAddedCursorIndex(),Je=Pe.getCursorStates(),Ne=Je.slice(0);Ne[qe]=g.P.moveTo(Pe,Je[qe],!0,Oe.position,Oe.viewPosition),Pe.model.pushStackElement(),Pe.setCursorStates(Oe.source,3,Ne)}});class le extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,g.P.moveToBeginningOfLine(Oe,Oe.getCursorStates(),this._inSelectionMode)),Oe.revealPrimaryCursor(qe.source,!0)}}ae.CursorHome=(0,S.fK)(new le({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:14,mac:{primary:14,secondary:[2048|15]}}})),ae.CursorHomeSelect=(0,S.fK)(new le({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:1024|14,mac:{primary:1024|14,secondary:[2048|1024|15]}}}));class oe extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,this._exec(Oe.getCursorStates())),Oe.revealPrimaryCursor(qe.source,!0)}_exec(Oe){const qe=[];for(let Je=0,Ne=Oe.length;Je<Ne;Je++){const Fe=Oe[Je],ne=Fe.modelState.position.lineNumber;qe[Je]=T.Vi.fromModelState(Fe.modelState.move(this._inSelectionMode,ne,1,0))}return qe}}ae.CursorLineStart=(0,S.fK)(new oe({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:0,mac:{primary:256|31}}})),ae.CursorLineStartSelect=(0,S.fK)(new oe({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:0,mac:{primary:256|1024|31}}}));class Ce extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,g.P.moveToEndOfLine(Oe,Oe.getCursorStates(),this._inSelectionMode,qe.sticky||!1)),Oe.revealPrimaryCursor(qe.source,!0)}}ae.CursorEnd=(0,S.fK)(new Ce({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:E,kbExpr:c.u.textInputFocus,primary:13,mac:{primary:13,secondary:[2048|17]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p.N("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),ae.CursorEndSelect=(0,S.fK)(new Ce({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:E,kbExpr:c.u.textInputFocus,primary:1024|13,mac:{primary:1024|13,secondary:[2048|1024|17]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p.N("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class ye extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,this._exec(Oe,Oe.getCursorStates())),Oe.revealPrimaryCursor(qe.source,!0)}_exec(Oe,qe){const Je=[];for(let Ne=0,Fe=qe.length;Ne<Fe;Ne++){const ne=qe[Ne],Q=ne.modelState.position.lineNumber,ie=Oe.model.getLineMaxColumn(Q);Je[Ne]=T.Vi.fromModelState(ne.modelState.move(this._inSelectionMode,Q,ie,0))}return Je}}ae.CursorLineEnd=(0,S.fK)(new ye({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:0,mac:{primary:256|35}}})),ae.CursorLineEndSelect=(0,S.fK)(new ye({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:0,mac:{primary:256|1024|35}}}));class ke extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,g.P.moveToBeginningOfBuffer(Oe,Oe.getCursorStates(),this._inSelectionMode)),Oe.revealPrimaryCursor(qe.source,!0)}}ae.CursorTop=(0,S.fK)(new ke({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|14,mac:{primary:2048|16}}})),ae.CursorTopSelect=(0,S.fK)(new ke({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|1024|14,mac:{primary:2048|1024|16}}}));class Te extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,g.P.moveToEndOfBuffer(Oe,Oe.getCursorStates(),this._inSelectionMode)),Oe.revealPrimaryCursor(qe.source,!0)}}ae.CursorBottom=(0,S.fK)(new Te({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|13,mac:{primary:2048|18}}})),ae.CursorBottomSelect=(0,S.fK)(new Te({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|1024|13,mac:{primary:2048|1024|18}}}));class ge extends _{constructor(){super({id:"editorScroll",precondition:void 0,description:L.description})}runCoreEditorCommand(Oe,qe){const Je=L.parse(qe);!Je||this._runEditorScroll(Oe,qe.source,Je)}_runEditorScroll(Oe,qe,Je){const Ne=this._computeDesiredScrollTop(Oe,Je);if(Je.revealCursor){const Fe=Oe.getCompletelyVisibleViewRangeAtScrollTop(Ne);Oe.setCursorStates(qe,3,[g.P.findPositionInViewportIfOutside(Oe,Oe.getPrimaryCursorState(),Fe,Je.select)])}Oe.viewLayout.setScrollPosition({scrollTop:Ne},0)}_computeDesiredScrollTop(Oe,qe){if(qe.unit===1){const Fe=Oe.getCompletelyVisibleViewRange(),ne=Oe.coordinatesConverter.convertViewRangeToModelRange(Fe);let Q;qe.direction===1?Q=Math.max(1,ne.startLineNumber-qe.value):Q=Math.min(Oe.model.getLineCount(),ne.startLineNumber+qe.value);const ie=Oe.coordinatesConverter.convertModelPositionToViewPosition(new B.L(Q,1));return Oe.viewLayout.getVerticalOffsetForLineNumber(ie.lineNumber)}let Je;qe.unit===3?Je=Oe.cursorConfig.pageSize*qe.value:qe.unit===4?Je=Math.round(Oe.cursorConfig.pageSize/2)*qe.value:Je=qe.value;const Ne=(qe.direction===1?-1:1)*Je;return Oe.viewLayout.getCurrentScrollTop()+Ne*Oe.cursorConfig.lineHeight}}ae.EditorScrollImpl=ge,ae.EditorScroll=(0,S.fK)(new ge),ae.ScrollLineUp=(0,S.fK)(new class extends _{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|16,mac:{primary:256|11}}})}runCoreEditorCommand(Pe,Oe){ae.EditorScroll._runEditorScroll(Pe,Oe.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),ae.ScrollPageUp=(0,S.fK)(new class extends _{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|11,win:{primary:512|11},linux:{primary:512|11}}})}runCoreEditorCommand(Pe,Oe){ae.EditorScroll._runEditorScroll(Pe,Oe.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),ae.ScrollLineDown=(0,S.fK)(new class extends _{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|18,mac:{primary:256|12}}})}runCoreEditorCommand(Pe,Oe){ae.EditorScroll._runEditorScroll(Pe,Oe.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),ae.ScrollPageDown=(0,S.fK)(new class extends _{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:2048|12,win:{primary:512|12},linux:{primary:512|12}}})}runCoreEditorCommand(Pe,Oe){ae.EditorScroll._runEditorScroll(Pe,Oe.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class we extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,[g.P.word(Oe,Oe.getPrimaryCursorState(),this._inSelectionMode,qe.position)]),Oe.revealPrimaryCursor(qe.source,!0)}}ae.WordSelect=(0,S.fK)(new we({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),ae.WordSelectDrag=(0,S.fK)(new we({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),ae.LastCursorWordSelect=(0,S.fK)(new class extends _{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(Pe,Oe){const qe=Pe.getLastAddedCursorIndex(),Je=Pe.getCursorStates(),Ne=Je.slice(0),Fe=Je[qe];Ne[qe]=g.P.word(Pe,Fe,Fe.modelState.hasSelection(),Oe.position),Pe.model.pushStackElement(),Pe.setCursorStates(Oe.source,3,Ne)}});class ze extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,[g.P.line(Oe,Oe.getPrimaryCursorState(),this._inSelectionMode,qe.position,qe.viewPosition)]),Oe.revealPrimaryCursor(qe.source,!1)}}ae.LineSelect=(0,S.fK)(new ze({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),ae.LineSelectDrag=(0,S.fK)(new ze({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class Qe extends _{constructor(Oe){super(Oe);this._inSelectionMode=Oe.inSelectionMode}runCoreEditorCommand(Oe,qe){const Je=Oe.getLastAddedCursorIndex(),Ne=Oe.getCursorStates(),Fe=Ne.slice(0);Fe[Je]=g.P.line(Oe,Ne[Je],this._inSelectionMode,qe.position,qe.viewPosition),Oe.model.pushStackElement(),Oe.setCursorStates(qe.source,3,Fe)}}ae.LastCursorLineSelect=(0,S.fK)(new Qe({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),ae.LastCursorLineSelectDrag=(0,S.fK)(new Qe({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),ae.CancelSelection=(0,S.fK)(new class extends _{constructor(){super({id:"cancelSelection",precondition:c.u.hasNonEmptySelection,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:9,secondary:[1024|9]}})}runCoreEditorCommand(Pe,Oe){Pe.model.pushStackElement(),Pe.setCursorStates(Oe.source,3,[g.P.cancelSelection(Pe,Pe.getPrimaryCursorState())]),Pe.revealPrimaryCursor(Oe.source,!0)}}),ae.RemoveSecondaryCursors=(0,S.fK)(new class extends _{constructor(){super({id:"removeSecondaryCursors",precondition:c.u.hasMultipleSelections,kbOpts:{weight:E+1,kbExpr:c.u.textInputFocus,primary:9,secondary:[1024|9]}})}runCoreEditorCommand(Pe,Oe){Pe.model.pushStackElement(),Pe.setCursorStates(Oe.source,3,[Pe.getPrimaryCursorState()]),Pe.revealPrimaryCursor(Oe.source,!0),(0,O.i7)(p.N("removedCursor","Removed secondary cursors"))}}),ae.RevealLine=(0,S.fK)(new class extends _{constructor(){super({id:"revealLine",precondition:void 0,description:N.description})}runCoreEditorCommand(Pe,Oe){const qe=Oe,Je=qe.lineNumber||0;let Ne=typeof Je=="number"?Je+1:parseInt(Je)+1;Ne<1&&(Ne=1);const Fe=Pe.model.getLineCount();Ne>Fe&&(Ne=Fe);const ne=new F.e(Ne,1,Ne,Pe.model.getLineMaxColumn(Ne));let Q=0;if(qe.at)switch(qe.at){case N.RawAtArgument.Top:Q=3;break;case N.RawAtArgument.Center:Q=1;break;case N.RawAtArgument.Bottom:Q=4;break;default:break}const ie=Pe.coordinatesConverter.convertModelRangeToViewRange(ne);Pe.revealRange(Oe.source,!1,ie,Q,0)}}),ae.SelectAll=new class extends b{constructor(){super(S.Sq)}runDOMCommand(){d.isFirefox&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(Pe,Oe,qe){const Je=Oe._getViewModel();!Je||this.runCoreEditorCommand(Je,qe)}runCoreEditorCommand(Pe,Oe){Pe.model.pushStackElement(),Pe.setCursorStates("keyboard",3,[g.P.selectAll(Pe,Pe.getPrimaryCursorState())])}},ae.SetSelection=(0,S.fK)(new class extends _{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(Pe,Oe){Pe.model.pushStackElement(),Pe.setCursorStates(Oe.source,3,[T.Vi.fromModelSelection(Oe.selection)])}})})(I||(I={}));const k=C.Ao.and(c.u.textInputFocus,c.u.columnSelection);function W(ae,ue){M.W.registerKeybindingRule({id:ae,primary:ue,when:k,weight:E+1})}W(I.CursorColumnSelectLeft.id,1024|15),W(I.CursorColumnSelectRight.id,1024|17),W(I.CursorColumnSelectUp.id,1024|16),W(I.CursorColumnSelectPageUp.id,1024|11),W(I.CursorColumnSelectDown.id,1024|18),W(I.CursorColumnSelectPageDown.id,1024|12);function q(ae){return ae.register(),ae}var re;(function(ae){class ue extends S._l{runEditorCommand(K,U,ee){const X=U._getViewModel();!X||this.runCoreEditingCommand(U,X,ee||{})}}ae.CoreEditingCommand=ue,ae.LineBreakInsert=(0,S.fK)(new class extends ue{constructor(){super({id:"lineBreakInsert",precondition:c.u.writable,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:0,mac:{primary:256|45}}})}runCoreEditingCommand(te,K,U){te.pushUndoStop(),te.executeCommands(this.id,D.u.lineBreakInsert(K.cursorConfig,K.model,K.getCursorStates().map(ee=>ee.modelState.selection)))}}),ae.Outdent=(0,S.fK)(new class extends ue{constructor(){super({id:"outdent",precondition:c.u.writable,kbOpts:{weight:E,kbExpr:C.Ao.and(c.u.editorTextFocus,c.u.tabDoesNotMoveFocus),primary:1024|2}})}runCoreEditingCommand(te,K,U){te.pushUndoStop(),te.executeCommands(this.id,D.u.outdent(K.cursorConfig,K.model,K.getCursorStates().map(ee=>ee.modelState.selection))),te.pushUndoStop()}}),ae.Tab=(0,S.fK)(new class extends ue{constructor(){super({id:"tab",precondition:c.u.writable,kbOpts:{weight:E,kbExpr:C.Ao.and(c.u.editorTextFocus,c.u.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(te,K,U){te.pushUndoStop(),te.executeCommands(this.id,D.u.tab(K.cursorConfig,K.model,K.getCursorStates().map(ee=>ee.modelState.selection))),te.pushUndoStop()}}),ae.DeleteLeft=(0,S.fK)(new class extends ue{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:1,secondary:[1024|1],mac:{primary:1,secondary:[1024|1,256|38,256|1]}}})}runCoreEditingCommand(te,K,U){const[ee,X]=v.A.deleteLeft(K.getPrevEditOperationType(),K.cursorConfig,K.model,K.getCursorStates().map(le=>le.modelState.selection),K.getCursorAutoClosedCharacters());ee&&te.pushUndoStop(),te.executeCommands(this.id,X),K.setPrevEditOperationType(2)}}),ae.DeleteRight=(0,S.fK)(new class extends ue{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:E,kbExpr:c.u.textInputFocus,primary:20,mac:{primary:20,secondary:[256|34,256|20]}}})}runCoreEditingCommand(te,K,U){const[ee,X]=v.A.deleteRight(K.getPrevEditOperationType(),K.cursorConfig,K.model,K.getCursorStates().map(le=>le.modelState.selection));ee&&te.pushUndoStop(),te.executeCommands(this.id,X),K.setPrevEditOperationType(3)}}),ae.Undo=new class extends b{constructor(){super(S.n_)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(te,K,U){if(!(!K.hasModel()||K.getOption(81)===!0))return K.getModel().undo()}},ae.Redo=new class extends b{constructor(){super(S.kz)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(te,K,U){if(!(!K.hasModel()||K.getOption(81)===!0))return K.getModel().redo()}}})(re||(re={}));class de extends S.mY{constructor(ue,te,K){super({id:ue,precondition:void 0,description:K});this._handlerId=te}runCommand(ue,te){const K=ue.get(j.$).getFocusedCodeEditor();!K||K.trigger("keyboard",this._handlerId,te)}}function pe(ae,ue){q(new de("default:"+ae,ae)),q(new de(ae,ae,ue))}pe("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),pe("replacePreviousChar"),pe("compositionType"),pe("compositionStart"),pe("compositionEnd"),pe("paste"),pe("cut")},65520:function(Tt,me,a){"use strict";a.d(me,{CL:function(){return d},QI:function(){return z},Pi:function(){return O}});var p=a(96518);function d(S){return S&&typeof S.getEditorType=="function"?S.getEditorType()===p.g.ICodeEditor:!1}function z(S){return S&&typeof S.getEditorType=="function"?S.getEditorType()===p.g.IDiffEditor:!1}function O(S){return d(S)?S:z(S)?S.getModifiedEditor():null}},29994:function(Tt,me,a){"use strict";a.d(me,{YN:function(){return T},rU:function(){return B},kG:function(){return v},Pp:function(){return g},gy:function(){return D},N5:function(){return c},tC:function(){return C},iB:function(){return M},t7:function(){return E}});var p=a(65321),d=a(57974),z=a(23938),O=a(15393),S=a(9917),j=a(73910);class T{constructor(b,I){this.x=b,this.y=I,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new B(this.x-p.DI.scrollX,this.y-p.DI.scrollY)}}class B{constructor(b,I){this.clientX=b,this.clientY=I,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new T(this.clientX+p.DI.scrollX,this.clientY+p.DI.scrollY)}}class F{constructor(b,I,k,W){this.x=b,this.y=I,this.width=k,this.height=W,this._editorPagePositionBrand=void 0}}class x{constructor(b,I){this.x=b,this.y=I,this._positionRelativeToEditorBrand=void 0}}function v(N){const b=p.i(N);return new F(b.left,b.top,b.width,b.height)}function g(N,b,I){const k=b.width/N.offsetWidth,W=b.height/N.offsetHeight,q=(I.x-b.x)/k,re=(I.y-b.y)/W;return new x(q,re)}class D extends z.n{constructor(b,I){super(b);this._editorMouseEventBrand=void 0,this.pos=new T(this.posx,this.posy),this.editorPos=v(I),this.relativePos=g(I,this.editorPos,this.pos)}}class c{constructor(b){this._editorViewDomNode=b}_create(b){return new D(b,this._editorViewDomNode)}onContextMenu(b,I){return p.nm(b,"contextmenu",k=>{I(this._create(k))})}onMouseUp(b,I){return p.nm(b,"mouseup",k=>{I(this._create(k))})}onMouseDown(b,I){return p.nm(b,"mousedown",k=>{I(this._create(k))})}onMouseLeave(b,I){return p.j_(b,k=>{I(this._create(k))})}onMouseMoveThrottled(b,I,k,W){const q=(re,de)=>k(re,this._create(de));return p.Y_(b,"mousemove",I,q,W)}}class C{constructor(b){this._editorViewDomNode=b}_create(b){return new D(b,this._editorViewDomNode)}onPointerUp(b,I){return p.nm(b,"pointerup",k=>{I(this._create(k))})}onPointerDown(b,I){return p.nm(b,"pointerdown",k=>{I(this._create(k))})}onPointerLeave(b,I){return p.RE(b,k=>{I(this._create(k))})}onPointerMoveThrottled(b,I,k,W){const q=(re,de)=>k(re,this._create(de));return p.Y_(b,"pointermove",I,q,W)}}class M extends S.JT{constructor(b){super();this._editorViewDomNode=b,this._globalMouseMoveMonitor=this._register(new d.Z),this._keydownListener=null}startMonitoring(b,I,k,W,q){this._keydownListener=p.mu(document,"keydown",de=>{de.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,de.browserEvent)},!0);const re=(de,pe)=>k(de,new D(pe,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(b,I,re,W,de=>{this._keydownListener.dispose(),q(de)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class E{constructor(b){this._editor=b,this._instanceId=++E._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new O.pY(()=>this.garbageCollect(),1e3)}createClassNameRef(b){const I=this.getOrCreateRule(b);return I.increaseRefCount(),{className:I.className,dispose:()=>{I.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(b){const I=this.computeUniqueKey(b);let k=this._rules.get(I);if(!k){const W=this._counter++;k=new _(I,`dyn-rule-${this._instanceId}-${W}`,p.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,b),this._rules.set(I,k)}return k}computeUniqueKey(b){return JSON.stringify(b)}garbageCollect(){for(const b of this._rules.values())b.hasReferences()||(this._rules.delete(b.key),b.dispose())}}E._idPool=0;class _{constructor(b,I,k,W){this.key=b,this.className=I,this.properties=W,this._referenceCount=0,this._styleElement=p.dS(k),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(b,I){let k=`.${b} {`;for(const W in I){const q=I[W];let re;typeof q=="object"?re=`var(${(0,j.QO2)(q.id)})`:re=q,k+=`
	${L(W)}: ${re};`}return k+=`
}`,k}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function L(N){return N.replace(/(^[A-Z])/,([b])=>b.toLowerCase()).replace(/([A-Z])/g,([b])=>`-${b.toLowerCase()}`)}},16830:function(Tt,me,a){"use strict";a.d(me,{mY:function(){return M},AJ:function(){return E},_l:function(){return L},R6:function(){return N},jY:function(){return b},sb:function(){return I},fK:function(){return k},Qr:function(){return W},rn:function(){return q},QG:function(){return re},_K:function(){return de},Uc:function(){return pe},n_:function(){return K},kz:function(){return U},Sq:function(){return ee}});var p=a(63580),d=a(70666),z=a(11640),O=a(50187),S=a(73733),j=a(88216),T=a(84144),B=a(94565),F=a(16141),x=a(72065),v=a(49989),g=a(89872),D=a(10829),c=a(98401),C=a(43557);class M{constructor(le){this.id=le.id,this.precondition=le.precondition,this._kbOpts=le.kbOpts,this._menuOpts=le.menuOpts,this._description=le.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const le=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const oe of le){let Ce=oe.kbExpr;this.precondition&&(Ce?Ce=F.Ao.and(Ce,this.precondition):Ce=this.precondition);const ye={id:this.id,weight:oe.weight,args:oe.args,when:Ce,primary:oe.primary,secondary:oe.secondary,win:oe.win,linux:oe.linux,mac:oe.mac};v.W.registerKeybindingRule(ye)}}B.P0.registerCommand({id:this.id,handler:(le,oe)=>this.runCommand(le,oe),description:this._description})}_registerMenuItem(le){T.BH.appendMenuItem(le.menuId,{group:le.group,command:{id:this.id,title:le.title,icon:le.icon,precondition:this.precondition},when:le.when,order:le.order})}}class E extends M{constructor(){super(...arguments);this._implementations=[]}addImplementation(le,oe,Ce){return this._implementations.push({priority:le,name:oe,implementation:Ce}),this._implementations.sort((ye,ke)=>ke.priority-ye.priority),{dispose:()=>{for(let ye=0;ye<this._implementations.length;ye++)if(this._implementations[ye].implementation===Ce){this._implementations.splice(ye,1);return}}}}runCommand(le,oe){const Ce=le.get(C.VZ);Ce.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const ye of this._implementations){const ke=ye.implementation(le,oe);if(ke)return Ce.trace(`Command '${this.id}' was handled by '${ye.name}'.`),typeof ke=="boolean"?void 0:ke}Ce.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class _ extends M{constructor(le,oe){super(oe);this.command=le}runCommand(le,oe){return this.command.runCommand(le,oe)}}class L extends M{static bindToContribution(le){return class extends L{constructor(Ce){super(Ce);this._callback=Ce.handler}runEditorCommand(Ce,ye,ke){const Te=le(ye);Te&&this._callback(Te,ke)}}}runCommand(le,oe){const Ce=le.get(z.$),ye=Ce.getFocusedCodeEditor()||Ce.getActiveCodeEditor();if(!!ye)return ye.invokeWithinContext(ke=>{if(!!ke.get(F.i6).contextMatchesRules((0,c.f6)(this.precondition)))return this.runEditorCommand(ke,ye,oe)})}}class N extends L{constructor(le){super(N.convertOptions(le));this.label=le.label,this.alias=le.alias}static convertOptions(le){let oe;Array.isArray(le.menuOpts)?oe=le.menuOpts:le.menuOpts?oe=[le.menuOpts]:oe=[];function Ce(ye){return ye.menuId||(ye.menuId=T.eH.EditorContext),ye.title||(ye.title=le.label),ye.when=F.Ao.and(le.precondition,ye.when),ye}return Array.isArray(le.contextMenuOpts)?oe.push(...le.contextMenuOpts.map(Ce)):le.contextMenuOpts&&oe.push(Ce(le.contextMenuOpts)),le.menuOpts=oe,le}runEditorCommand(le,oe,Ce){return this.reportTelemetry(le,oe),this.run(le,oe,Ce||{})}reportTelemetry(le,oe){le.get(D.b).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class b extends N{constructor(){super(...arguments);this._implementations=[]}addImplementation(le,oe){return this._implementations.push([le,oe]),this._implementations.sort((Ce,ye)=>ye[0]-Ce[0]),{dispose:()=>{for(let Ce=0;Ce<this._implementations.length;Ce++)if(this._implementations[Ce][1]===oe){this._implementations.splice(Ce,1);return}}}}run(le,oe,Ce){for(const ye of this._implementations){const ke=ye[1](le,oe,Ce);if(ke)return typeof ke=="boolean"?void 0:ke}}}function I(X,le){B.P0.registerCommand(X,function(oe,...Ce){const ye=oe.get(x.TG),[ke,Te]=Ce;(0,c.p_)(d.o.isUri(ke)),(0,c.p_)(O.L.isIPosition(Te));const ge=oe.get(S.q).getModel(ke);if(ge){const we=O.L.lift(Te);return ye.invokeFunction(le,ge,we,...Ce.slice(2))}return oe.get(j.S).createModelReference(ke).then(we=>new Promise((ze,Qe)=>{try{const Pe=ye.invokeFunction(le,we.object.textEditorModel,O.L.lift(Te),Ce.slice(2));ze(Pe)}catch(Pe){Qe(Pe)}}).finally(()=>{we.dispose()}))})}function k(X){return ue.INSTANCE.registerEditorCommand(X),X}function W(X){const le=new X;return ue.INSTANCE.registerEditorAction(le),le}function q(X){return ue.INSTANCE.registerEditorAction(X),X}function re(X){ue.INSTANCE.registerEditorAction(X)}function de(X,le){ue.INSTANCE.registerEditorContribution(X,le)}var pe;(function(X){function le(Te){return ue.INSTANCE.getEditorCommand(Te)}X.getEditorCommand=le;function oe(){return ue.INSTANCE.getEditorActions()}X.getEditorActions=oe;function Ce(){return ue.INSTANCE.getEditorContributions()}X.getEditorContributions=Ce;function ye(Te){return ue.INSTANCE.getEditorContributions().filter(ge=>Te.indexOf(ge.id)>=0)}X.getSomeEditorContributions=ye;function ke(){return ue.INSTANCE.getDiffEditorContributions()}X.getDiffEditorContributions=ke})(pe||(pe={}));const ae={EditorCommonContributions:"editor.contributions"};class ue{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(le,oe){this.editorContributions.push({id:le,ctor:oe})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(le){le.register(),this.editorActions.push(le)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(le){le.register(),this.editorCommands[le.id]=le}getEditorCommand(le){return this.editorCommands[le]||null}}ue.INSTANCE=new ue,g.B.add(ae.EditorCommonContributions,ue.INSTANCE);function te(X){return X.register(),X}const K=te(new E({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2048|56},menuOpts:[{menuId:T.eH.MenubarEditMenu,group:"1_do",title:p.N({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:T.eH.CommandPalette,group:"",title:p.N("undo","Undo"),order:1}]}));te(new _(K,{id:"default:undo",precondition:void 0}));const U=te(new E({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2048|55,secondary:[2048|1024|56],mac:{primary:2048|1024|56}},menuOpts:[{menuId:T.eH.MenubarEditMenu,group:"1_do",title:p.N({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:T.eH.CommandPalette,group:"",title:p.N("redo","Redo"),order:1}]}));te(new _(U,{id:"default:redo",precondition:void 0}));const ee=te(new E({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2048|31},menuOpts:[{menuId:T.eH.MenubarSelectionMenu,group:"1_basic",title:p.N({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:T.eH.CommandPalette,group:"",title:p.N("selectAll","Select All"),order:1}]}))},66007:function(Tt,me,a){"use strict";a.d(me,{vu:function(){return O},fo:function(){return T},Gl:function(){return B}});var p=a(72065),d=a(70666),z=a(98401);const O=(0,p.yh)("IWorkspaceEditService");function S(x){return(0,z.Kn)(x)&&(Boolean(x.newUri)||Boolean(x.oldUri))}function j(x){return(0,z.Kn)(x)&&d.o.isUri(x.resource)&&(0,z.Kn)(x.edit)}class T{constructor(v){this.metadata=v}static convert(v){return v.edits.map(g=>{if(j(g))return new B(g.resource,g.edit,g.modelVersionId,g.metadata);if(S(g))return new F(g.oldUri,g.newUri,g.options,g.metadata);throw new Error("Unsupported edit")})}}class B extends T{constructor(v,g,D,c){super(c);this.resource=v,this.textEdit=g,this.versionId=D}}class F extends T{constructor(v,g,D,c){super(c);this.oldResource=v,this.newResource=g,this.options=D}}},11640:function(Tt,me,a){"use strict";a.d(me,{$:function(){return d}});var p=a(72065);const d=(0,p.yh)("codeEditorService")},43407:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return p}});class p{constructor(z,O,S){this._visiblePosition=z,this._visiblePositionScrollDelta=O,this._cursorPosition=S}static capture(z){let O=null,S=0;if(z.getScrollTop()!==0){const j=z.getVisibleRanges();if(j.length>0){O=j[0].getStartPosition();const T=z.getTopForPosition(O.lineNumber,O.column);S=z.getScrollTop()-T}}return new p(O,S,z.getPosition())}restore(z){if(this._visiblePosition){const O=z.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);z.setScrollTop(O+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(z){const O=z.getPosition();if(!this._cursorPosition||!O)return;const S=z.getTopForLineNumber(O.lineNumber)-z.getTopForLineNumber(this._cursorPosition.lineNumber);z.setScrollTop(z.getScrollTop()+S)}}},63455:function(Tt,me,a){"use strict";a.d(me,{Gm:function(){return Ql}});var p=a(36357),d=a(16830),z=function(Ut,o,h,A){var Z=arguments.length,se=Z<3?o:A===null?A=Object.getOwnPropertyDescriptor(o,h):A,Se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(Ut,o,h,A);else for(var $e=Ut.length-1;$e>=0;$e--)(Se=Ut[$e])&&(se=(Z<3?Se(se):Z>3?Se(o,h,se):Se(o,h))||se);return Z>3&&se&&Object.defineProperty(o,h,se),se},O=function(Ut,o){return function(h,A){o(h,A,Ut)}};let S=class{constructor(o,h){}dispose(){}};S.ID="editor.contrib.markerDecorations",S=z([O(1,p.i)],S),(0,d._K)(S.ID,S);var j=a(63580),T=a(65321),B=a(17301),F=a(4669),x=a(9917),v=a(66663),g=a(16268),D=a(9488),c=a(36248),C=a(1432),M=a(54534),E=a(27231),_=a(6626);function L(Ut){const o=Ut.wordWrap;o===!0?Ut.wordWrap="on":o===!1&&(Ut.wordWrap="off");const h=Ut.lineNumbers;h===!0?Ut.lineNumbers="on":h===!1&&(Ut.lineNumbers="off"),Ut.autoClosingBrackets===!1&&(Ut.autoClosingBrackets="never",Ut.autoClosingQuotes="never",Ut.autoSurround="never"),Ut.cursorBlinking==="visible"&&(Ut.cursorBlinking="solid");const se=Ut.renderWhitespace;se===!0?Ut.renderWhitespace="boundary":se===!1&&(Ut.renderWhitespace="none");const Se=Ut.renderLineHighlight;Se===!0?Ut.renderLineHighlight="line":Se===!1&&(Ut.renderLineHighlight="none");const $e=Ut.acceptSuggestionOnEnter;$e===!0?Ut.acceptSuggestionOnEnter="on":$e===!1&&(Ut.acceptSuggestionOnEnter="off");const rt=Ut.tabCompletion;rt===!1?Ut.tabCompletion="off":rt===!0&&(Ut.tabCompletion="onlySnippets");const ht=Ut.suggest;if(ht&&typeof ht.filteredTypes=="object"&&ht.filteredTypes){const $n={};$n.method="showMethods",$n.function="showFunctions",$n.constructor="showConstructors",$n.deprecated="showDeprecated",$n.field="showFields",$n.variable="showVariables",$n.class="showClasses",$n.struct="showStructs",$n.interface="showInterfaces",$n.module="showModules",$n.property="showProperties",$n.event="showEvents",$n.operator="showOperators",$n.unit="showUnits",$n.value="showValues",$n.constant="showConstants",$n.enum="showEnums",$n.enumMember="showEnumMembers",$n.keyword="showKeywords",$n.text="showWords",$n.color="showColors",$n.file="showFiles",$n.reference="showReferences",$n.folder="showFolders",$n.typeParameter="showTypeParameters",$n.snippet="showSnippets",(0,_.E)($n,vi=>{const Ii=ht.filteredTypes[vi.key];Ii===!1&&(ht[vi.value]=Ii)})}const xt=Ut.hover;xt===!0?Ut.hover={enabled:!0}:xt===!1&&(Ut.hover={enabled:!1});const Wt=Ut.parameterHints;Wt===!0?Ut.parameterHints={enabled:!0}:Wt===!1&&(Ut.parameterHints={enabled:!1});const qt=Ut.autoIndent;qt===!0?Ut.autoIndent="full":qt===!1&&(Ut.autoIndent="advanced");const on=Ut.matchBrackets;on===!0?Ut.matchBrackets="always":on===!1&&(Ut.matchBrackets="never");const{renderIndentGuides:_n,highlightActiveIndentGuide:Mn}=Ut;Ut.guides||(Ut.guides={}),_n!==void 0&&(Ut.guides.indentation=!!_n),Mn!==void 0&&(Ut.guides.highlightActiveIndentation=!!Mn)}var N=a(37940),b=a(64141),I=a(82334),k=a(27374),W=a(31106),q=function(Ut,o,h,A){var Z=arguments.length,se=Z<3?o:A===null?A=Object.getOwnPropertyDescriptor(o,h):A,Se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(Ut,o,h,A);else for(var $e=Ut.length-1;$e>=0;$e--)(Se=Ut[$e])&&(se=(Z<3?Se(se):Z>3?Se(o,h,se):Se(o,h))||se);return Z>3&&se&&Object.defineProperty(o,h,se),se},re=function(Ut,o){return function(h,A){o(h,A,Ut)}};let de=class extends x.JT{constructor(o,h,A,Z){super();this._accessibilityService=Z,this._onDidChange=this._register(new F.Q5),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new F.Q5),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new b.LJ,this.isSimpleWidget=o,this._containerObserver=this._register(new M.I(A,h.dimension)),this._rawOptions=U(h),this._validatedOptions=K.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(10)&&this._containerObserver.startObserving(),this._register(I.C.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(N.n.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(E.g.onDidChange(()=>this._recomputeOptions())),this._register(g.PixelRatio.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const o=this._computeOptions(),h=K.checkEquals(this.options,o);h!==null&&(this.options=o,this._onDidChangeFast.fire(h),this._onDidChange.fire(h))}_computeOptions(){const o=this._readEnvConfiguration(),h=k.E4.createFromValidatedSettings(this._validatedOptions,o.pixelRatio,this.isSimpleWidget),A=this._readFontInfo(h),Z={memory:this._computeOptionsMemory,outerWidth:o.outerWidth,outerHeight:o.outerHeight-this._reservedHeight,fontInfo:A,extraEditorClassName:o.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:o.emptySelectionClipboard,pixelRatio:o.pixelRatio,tabFocusMode:N.n.getTabFocusMode(),accessibilitySupport:o.accessibilitySupport};return K.computeOptions(this._validatedOptions,Z)}_readEnvConfiguration(){return{extraEditorClassName:ae(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:g.isWebKit||g.isFirefox,pixelRatio:g.PixelRatio.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(o){return E.g.readFontInfo(o)}getRawOptions(){return this._rawOptions}updateOptions(o){const h=U(o);!K.applyUpdate(this._rawOptions,h)||(this._validatedOptions=K.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(o){this._containerObserver.observe(o)}setIsDominatedByLongLines(o){this._isDominatedByLongLines!==o&&(this._isDominatedByLongLines=o,this._recomputeOptions())}setModelLineCount(o){const h=pe(o);this._lineNumbersDigitCount!==h&&(this._lineNumbersDigitCount=h,this._recomputeOptions())}setViewLineCount(o){this._viewLineCount!==o&&(this._viewLineCount=o,this._recomputeOptions())}setReservedHeight(o){this._reservedHeight!==o&&(this._reservedHeight=o,this._recomputeOptions())}};de=q([re(3,W.F)],de);function pe(Ut){let o=0;for(;Ut;)Ut=Math.floor(Ut/10),o++;return o||1}function ae(){let Ut="";return!g.isSafari&&!g.isWebkitWebView&&(Ut+="no-user-select "),g.isSafari&&(Ut+="no-minimap-shadow "),C.dz&&(Ut+="mac "),Ut}class ue{constructor(){this._values=[]}_read(o){return this._values[o]}get(o){return this._values[o]}_write(o,h){this._values[o]=h}}class te{constructor(){this._values=[]}_read(o){if(o>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[o]}get(o){return this._read(o)}_write(o,h){this._values[o]=h}}class K{static validateOptions(o){const h=new ue;for(const A of b.Bc){const Z=A.name==="_never_"?void 0:o[A.name];h._write(A.id,A.validate(Z))}return h}static computeOptions(o,h){const A=new te;for(const Z of b.Bc)A._write(Z.id,Z.compute(h,A,o._read(Z.id)));return A}static _deepEquals(o,h){if(typeof o!="object"||typeof h!="object"||!o||!h)return o===h;if(Array.isArray(o)||Array.isArray(h))return Array.isArray(o)&&Array.isArray(h)?D.fS(o,h):!1;if(Object.keys(o).length!==Object.keys(h).length)return!1;for(const A in o)if(!K._deepEquals(o[A],h[A]))return!1;return!0}static checkEquals(o,h){const A=[];let Z=!1;for(const se of b.Bc){const Se=!K._deepEquals(o._read(se.id),h._read(se.id));A[se.id]=Se,Se&&(Z=!0)}return Z?new b.Bb(A):null}static applyUpdate(o,h){let A=!1;for(const Z of b.Bc)if(h.hasOwnProperty(Z.name)){const se=Z.applyUpdate(o[Z.name],h[Z.name]);o[Z.name]=se.newValue,A=A||se.didChange}return A}}function U(Ut){const o=c.I8(Ut);return L(o),o}var ee=a(11640),X=a(3860),le=a(38626),oe=a(10553),Ce=a(23938),ye=a(15393),ke=a(29994);class Te extends x.JT{constructor(){super();this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(o){return!1}onCompositionEnd(o){return!1}onConfigurationChanged(o){return!1}onCursorStateChanged(o){return!1}onDecorationsChanged(o){return!1}onFlushed(o){return!1}onFocusChanged(o){return!1}onLanguageConfigurationChanged(o){return!1}onLineMappingChanged(o){return!1}onLinesChanged(o){return!1}onLinesDeleted(o){return!1}onLinesInserted(o){return!1}onRevealRangeRequest(o){return!1}onScrollChanged(o){return!1}onThemeChanged(o){return!1}onTokensChanged(o){return!1}onTokensColorsChanged(o){return!1}onZonesChanged(o){return!1}handleEvents(o){let h=!1;for(let A=0,Z=o.length;A<Z;A++){const se=o[A];switch(se.type){case 0:this.onCompositionStart(se)&&(h=!0);break;case 1:this.onCompositionEnd(se)&&(h=!0);break;case 2:this.onConfigurationChanged(se)&&(h=!0);break;case 3:this.onCursorStateChanged(se)&&(h=!0);break;case 4:this.onDecorationsChanged(se)&&(h=!0);break;case 5:this.onFlushed(se)&&(h=!0);break;case 6:this.onFocusChanged(se)&&(h=!0);break;case 7:this.onLanguageConfigurationChanged(se)&&(h=!0);break;case 8:this.onLineMappingChanged(se)&&(h=!0);break;case 9:this.onLinesChanged(se)&&(h=!0);break;case 10:this.onLinesDeleted(se)&&(h=!0);break;case 11:this.onLinesInserted(se)&&(h=!0);break;case 12:this.onRevealRangeRequest(se)&&(h=!0);break;case 13:this.onScrollChanged(se)&&(h=!0);break;case 15:this.onTokensChanged(se)&&(h=!0);break;case 14:this.onThemeChanged(se)&&(h=!0);break;case 16:this.onTokensColorsChanged(se)&&(h=!0);break;case 17:this.onZonesChanged(se)&&(h=!0);break;default:console.info("View received unknown event: "),console.info(se)}}h&&(this._shouldRender=!0)}}class ge extends Te{constructor(o){super();this._context=o,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class we{static write(o,h){o.setAttribute("data-mprt",String(h))}static read(o){const h=o.getAttribute("data-mprt");return h===null?0:parseInt(h,10)}static collect(o,h){const A=[];let Z=0;for(;o&&o!==document.body&&o!==h;)o.nodeType===o.ELEMENT_NODE&&(A[Z++]=this.read(o)),o=o.parentElement;const se=new Uint8Array(Z);for(let Se=0;Se<Z;Se++)se[Se]=A[Z-Se-1];return se}}class ze{constructor(o,h){this._restrictedRenderingContextBrand=void 0,this._viewLayout=o,this.viewportData=h,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const A=this._viewLayout.getCurrentViewport();this.scrollTop=A.top,this.scrollLeft=A.left,this.viewportWidth=A.width,this.viewportHeight=A.height}getScrolledTopFromAbsoluteTop(o){return o-this.scrollTop}getVerticalOffsetForLineNumber(o){return this._viewLayout.getVerticalOffsetForLineNumber(o)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Qe extends ze{constructor(o,h,A){super(o,h);this._renderingContextBrand=void 0,this._viewLines=A}linesVisibleRangesForRange(o,h){return this._viewLines.linesVisibleRangesForRange(o,h)}visibleRangeForPosition(o){return this._viewLines.visibleRangeForPosition(o)}}class Pe{constructor(o,h,A){this.outsideRenderedLine=o,this.lineNumber=h,this.ranges=A}}class Oe{constructor(o,h){this._horizontalRangeBrand=void 0,this.left=Math.round(o),this.width=Math.round(h)}static from(o){const h=new Array(o.length);for(let A=0,Z=o.length;A<Z;A++){const se=o[A];h[A]=new Oe(se.left,se.width)}return h}toString(){return`[${this.left},${this.width}]`}}class qe{constructor(o,h){this._floatHorizontalRangeBrand=void 0,this.left=o,this.width=h}toString(){return`[${this.left},${this.width}]`}static compare(o,h){return o.left-h.left}}class Je{constructor(o,h){this.outsideRenderedLine=o,this.originalLeft=h,this.left=Math.round(this.originalLeft)}}class Ne{constructor(o,h){this.outsideRenderedLine=o,this.ranges=h}}class Fe{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(o,h){o.selectNodeContents(h)}static _readClientRects(o,h,A,Z,se){const Se=this._createRange();try{return Se.setStart(o,h),Se.setEnd(A,Z),Se.getClientRects()}catch($e){return null}finally{this._detachRange(Se,se)}}static _mergeAdjacentRanges(o){if(o.length===1)return o;o.sort(qe.compare);const h=[];let A=0,Z=o[0];for(let se=1,Se=o.length;se<Se;se++){const $e=o[se];Z.left+Z.width+.9>=$e.left?Z.width=Math.max(Z.width,$e.left+$e.width-Z.left):(h[A++]=Z,Z=$e)}return h[A++]=Z,h}static _createHorizontalRangesFromClientRects(o,h,A){if(!o||o.length===0)return null;const Z=[];for(let se=0,Se=o.length;se<Se;se++){const $e=o[se];Z[se]=new qe(Math.max(0,($e.left-h)/A),$e.width/A)}return this._mergeAdjacentRanges(Z)}static readHorizontalRanges(o,h,A,Z,se,Se,$e,rt){const ht=0,xt=o.children.length-1;if(ht>xt)return null;if(h=Math.min(xt,Math.max(ht,h)),Z=Math.min(xt,Math.max(ht,Z)),h===Z&&A===se&&A===0&&!o.children[h].firstChild){const _n=o.children[h].getClientRects();return this._createHorizontalRangesFromClientRects(_n,Se,$e)}h!==Z&&Z>0&&se===0&&(Z--,se=1073741824);let Wt=o.children[h].firstChild,qt=o.children[Z].firstChild;if((!Wt||!qt)&&(!Wt&&A===0&&h>0&&(Wt=o.children[h-1].firstChild,A=1073741824),!qt&&se===0&&Z>0&&(qt=o.children[Z-1].firstChild,se=1073741824)),!Wt||!qt)return null;A=Math.min(Wt.textContent.length,Math.max(0,A)),se=Math.min(qt.textContent.length,Math.max(0,se));const on=this._readClientRects(Wt,A,qt,se,rt);return this._createHorizontalRangesFromClientRects(on,Se,$e)}}var ne=a(92550),Q=a(77736),ie=a(92321);const xe=function(){return C.tY?!0:!(C.IJ||g.isFirefox||g.isSafari)}();let be=!0;class Ge{constructor(o,h){this._domNode=o,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=h}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const o=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=o.left,this._clientRectScale=o.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}class nt{constructor(o,h){this.themeType=h;const A=o.options,Z=A.get(44);this.renderWhitespace=A.get(88),this.renderControlCharacters=A.get(83),this.spaceWidth=Z.spaceWidth,this.middotWidth=Z.middotWidth,this.wsmiddotWidth=Z.wsmiddotWidth,this.useMonospaceOptimizations=Z.isMonospace&&!A.get(29),this.canUseHalfwidthRightwardsArrow=Z.canUseHalfwidthRightwardsArrow,this.lineHeight=A.get(59),this.stopRenderingLineAfter=A.get(105),this.fontLigatures=A.get(45)}equals(o){return this.themeType===o.themeType&&this.renderWhitespace===o.renderWhitespace&&this.renderControlCharacters===o.renderControlCharacters&&this.spaceWidth===o.spaceWidth&&this.middotWidth===o.middotWidth&&this.wsmiddotWidth===o.wsmiddotWidth&&this.useMonospaceOptimizations===o.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===o.canUseHalfwidthRightwardsArrow&&this.lineHeight===o.lineHeight&&this.stopRenderingLineAfter===o.stopRenderingLineAfter&&this.fontLigatures===o.fontLigatures}}class _t{constructor(o){this._options=o,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(o){if(this._renderedViewLine)this._renderedViewLine.domNode=(0,le.X)(o);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(o){this._isMaybeInvalid=!0,this._options=o}onSelectionChanged(){return this._options.themeType===ie.e.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(o,h,A,Z){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const se=A.getViewLineRenderingData(o),Se=this._options,$e=ne.Kp.filter(se.inlineDecorations,o,se.minColumn,se.maxColumn);let rt=null;if(Se.themeType===ie.e.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const qt=A.selections;for(const on of qt){if(on.endLineNumber<o||on.startLineNumber>o)continue;const _n=on.startLineNumber===o?on.startColumn:se.minColumn,Mn=on.endLineNumber===o?on.endColumn:se.maxColumn;_n<Mn&&(Se.themeType===ie.e.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?$e.push(new ne.Kp(_n,Mn,"inline-selected-text",0)):(rt||(rt=[]),rt.push(new Q.zG(_n-1,Mn-1))))}}const ht=new Q.IJ(Se.useMonospaceOptimizations,Se.canUseHalfwidthRightwardsArrow,se.content,se.continuesWithWrappedLine,se.isBasicASCII,se.containsRTL,se.minColumn-1,se.tokens,$e,se.tabSize,se.startVisibleColumn,Se.spaceWidth,Se.middotWidth,Se.wsmiddotWidth,Se.stopRenderingLineAfter,Se.renderWhitespace,Se.renderControlCharacters,Se.fontLigatures!==b.n0.OFF,rt);if(this._renderedViewLine&&this._renderedViewLine.input.equals(ht))return!1;Z.appendASCIIString('<div style="top:'),Z.appendASCIIString(String(h)),Z.appendASCIIString("px;height:"),Z.appendASCIIString(String(this._options.lineHeight)),Z.appendASCIIString('px;" class="'),Z.appendASCIIString(_t.CLASS_NAME),Z.appendASCIIString('">');const xt=(0,Q.d1)(ht,Z);Z.appendASCIIString("</div>");let Wt=null;return be&&xe&&se.isBasicASCII&&Se.useMonospaceOptimizations&&xt.containsForeignElements===0&&se.content.length<300&&ht.lineTokens.getCount()<100&&(Wt=new Ot(this._renderedViewLine?this._renderedViewLine.domNode:null,ht,xt.characterMapping)),Wt||(Wt=Ue(this._renderedViewLine?this._renderedViewLine.domNode:null,ht,xt.characterMapping,xt.containsRTL,xt.containsForeignElements)),this._renderedViewLine=Wt,!0}layoutLine(o,h){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(h),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Ot:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Ot?this._renderedViewLine.monospaceAssumptionsAreValid():be}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Ot&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(o,h,A,Z){if(!this._renderedViewLine)return null;h=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,h)),A=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,A));const se=this._renderedViewLine.input.stopRenderingLineAfter;let Se=!1;se!==-1&&h>se+1&&A>se+1&&(Se=!0),se!==-1&&h>se+1&&(h=se+1),se!==-1&&A>se+1&&(A=se+1);const $e=this._renderedViewLine.getVisibleRangesForRange(o,h,A,Z);return $e&&$e.length>0?new Ne(Se,$e):null}getColumnOfNodeOffset(o,h,A){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(o,h,A):1}}_t.CLASS_NAME="view-line";class Ot{constructor(o,h,A){this.domNode=o,this.input=h,this._characterMapping=A,this._charWidth=h.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return be;const o=this.getWidth(),h=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(o-h)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),be=!1),be}toSlowRenderedLine(){return Ue(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(o,h,A,Z){const se=this._getCharPosition(h),Se=this._getCharPosition(A);return[new qe(se,Se-se)]}_getCharPosition(o){const h=this._characterMapping.getAbsoluteOffset(o);return this._charWidth*h}getColumnOfNodeOffset(o,h,A){const Z=h.textContent.length;let se=-1;for(;h;)h=h.previousSibling,se++;return this._characterMapping.getColumn(new Q.Nd(se,A),Z)}}class rn{constructor(o,h,A,Z,se){if(this.domNode=o,this.input=h,this._characterMapping=A,this._isWhitespaceOnly=/^\s*$/.test(h.lineContent),this._containsForeignElements=se,this._cachedWidth=-1,this._pixelOffsetCache=null,!Z||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let Se=0,$e=this._characterMapping.length;Se<=$e;Se++)this._pixelOffsetCache[Se]=-1}}_getReadingTarget(o){return o.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(o,h,A,Z){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const se=this._readPixelOffset(this.domNode,o,h,Z);if(se===-1)return null;const Se=this._readPixelOffset(this.domNode,o,A,Z);return Se===-1?null:[new qe(se,Se-se)]}return this._readVisibleRangesForRange(this.domNode,o,h,A,Z)}_readVisibleRangesForRange(o,h,A,Z,se){if(A===Z){const Se=this._readPixelOffset(o,h,A,se);return Se===-1?null:[new qe(Se,0)]}else return this._readRawVisibleRangesForRange(o,A,Z,se)}_readPixelOffset(o,h,A,Z){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const se=this._getReadingTarget(o);return se.firstChild?se.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const se=this._pixelOffsetCache[A];if(se!==-1)return se;const Se=this._actualReadPixelOffset(o,h,A,Z);return this._pixelOffsetCache[A]=Se,Se}return this._actualReadPixelOffset(o,h,A,Z)}_actualReadPixelOffset(o,h,A,Z){if(this._characterMapping.length===0){const rt=Fe.readHorizontalRanges(this._getReadingTarget(o),0,0,0,0,Z.clientRectDeltaLeft,Z.clientRectScale,Z.endNode);return!rt||rt.length===0?-1:rt[0].left}if(A===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const se=this._characterMapping.getDomPosition(A),Se=Fe.readHorizontalRanges(this._getReadingTarget(o),se.partIndex,se.charIndex,se.partIndex,se.charIndex,Z.clientRectDeltaLeft,Z.clientRectScale,Z.endNode);if(!Se||Se.length===0)return-1;const $e=Se[0].left;if(this.input.isBasicASCII){const rt=this._characterMapping.getAbsoluteOffset(A),ht=Math.round(this.input.spaceWidth*rt);if(Math.abs(ht-$e)<=1)return ht}return $e}_readRawVisibleRangesForRange(o,h,A,Z){if(h===1&&A===this._characterMapping.length)return[new qe(0,this.getWidth())];const se=this._characterMapping.getDomPosition(h),Se=this._characterMapping.getDomPosition(A);return Fe.readHorizontalRanges(this._getReadingTarget(o),se.partIndex,se.charIndex,Se.partIndex,Se.charIndex,Z.clientRectDeltaLeft,Z.clientRectScale,Z.endNode)}getColumnOfNodeOffset(o,h,A){const Z=h.textContent.length;let se=-1;for(;h;)h=h.previousSibling,se++;return this._characterMapping.getColumn(new Q.Nd(se,A),Z)}}class gt extends rn{_readVisibleRangesForRange(o,h,A,Z,se){const Se=super._readVisibleRangesForRange(o,h,A,Z,se);if(!Se||Se.length===0||A===Z||A===1&&Z===this._characterMapping.length)return Se;if(!this.input.containsRTL){const $e=this._readPixelOffset(o,h,Z,se);if($e!==-1){const rt=Se[Se.length-1];rt.left<$e&&(rt.width=$e-rt.left)}}return Se}}const Ue=function(){return g.isWebKit?Ye:dt}();function Ye(Ut,o,h,A,Z){return new gt(Ut,o,h,A,Z)}function dt(Ut,o,h,A,Z){return new rn(Ut,o,h,A,Z)}var Re=a(50187),Ve=a(24314),at=a(7988),pt=a(47128);class Be{constructor(o=null){this.hitTarget=o,this.type=0}}class je{constructor(o,h,A){this.position=o,this.spanNode=h,this.injectedText=A,this.type=1}}var Et;(function(Ut){function o(h,A,Z){const se=h.getPositionFromDOMInfo(A,Z);return se?new je(se,A,null):new Be(A)}Ut.createFromDOMInfo=o})(Et||(Et={}));class Dt{constructor(o,h){this.lastViewCursorsRenderData=o,this.lastTextareaPosition=h}}class Xe{static _deduceRage(o,h=null){return!h&&o?new Ve.e(o.lineNumber,o.column,o.lineNumber,o.column):h??null}static createUnknown(o,h,A){return{type:0,element:o,mouseColumn:h,position:A,range:this._deduceRage(A)}}static createTextarea(o,h){return{type:1,element:o,mouseColumn:h,position:null,range:null}}static createMargin(o,h,A,Z,se,Se){return{type:o,element:h,mouseColumn:A,position:Z,range:se,detail:Se}}static createViewZone(o,h,A,Z,se){return{type:o,element:h,mouseColumn:A,position:Z,range:this._deduceRage(Z),detail:se}}static createContentText(o,h,A,Z,se){return{type:6,element:o,mouseColumn:h,position:A,range:this._deduceRage(A,Z),detail:se}}static createContentEmpty(o,h,A,Z){return{type:7,element:o,mouseColumn:h,position:A,range:this._deduceRage(A),detail:Z}}static createContentWidget(o,h,A){return{type:9,element:o,mouseColumn:h,position:null,range:null,detail:A}}static createScrollbar(o,h,A){return{type:11,element:o,mouseColumn:h,position:A,range:this._deduceRage(A)}}static createOverlayWidget(o,h,A){return{type:12,element:o,mouseColumn:h,position:null,range:null,detail:A}}static createOutsideEditor(o,h){return{type:13,element:null,mouseColumn:o,position:h,range:this._deduceRage(h)}}static _typeToString(o){return o===1?"TEXTAREA":o===2?"GUTTER_GLYPH_MARGIN":o===3?"GUTTER_LINE_NUMBERS":o===4?"GUTTER_LINE_DECORATIONS":o===5?"GUTTER_VIEW_ZONE":o===6?"CONTENT_TEXT":o===7?"CONTENT_EMPTY":o===8?"CONTENT_VIEW_ZONE":o===9?"CONTENT_WIDGET":o===10?"OVERVIEW_RULER":o===11?"SCROLLBAR":o===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(o){return this._typeToString(o.type)+": "+o.position+" - "+o.range+" - "+JSON.stringify(o.detail)}}class ft{static isTextArea(o){return o.length===2&&o[0]===3&&o[1]===6}static isChildOfViewLines(o){return o.length>=4&&o[0]===3&&o[3]===7}static isStrictChildOfViewLines(o){return o.length>4&&o[0]===3&&o[3]===7}static isChildOfScrollableElement(o){return o.length>=2&&o[0]===3&&o[1]===5}static isChildOfMinimap(o){return o.length>=2&&o[0]===3&&o[1]===8}static isChildOfContentWidgets(o){return o.length>=4&&o[0]===3&&o[3]===1}static isChildOfOverflowingContentWidgets(o){return o.length>=1&&o[0]===2}static isChildOfOverlayWidgets(o){return o.length>=2&&o[0]===3&&o[1]===4}}class an{constructor(o,h,A){this.viewModel=o.viewModel;const Z=o.configuration.options;this.layoutInfo=Z.get(131),this.viewDomNode=h.viewDomNode,this.lineHeight=Z.get(59),this.stickyTabStops=Z.get(104),this.typicalHalfwidthCharacterWidth=Z.get(44).typicalHalfwidthCharacterWidth,this.lastRenderData=A,this._context=o,this._viewHelper=h}getZoneAtCoord(o){return an.getZoneAtCoord(this._context,o)}static getZoneAtCoord(o,h){const A=o.viewLayout.getWhitespaceAtVerticalOffset(h);if(A){const Z=A.verticalOffset+A.height/2,se=o.viewModel.getLineCount();let Se=null,$e,rt=null;return A.afterLineNumber!==se&&(rt=new Re.L(A.afterLineNumber+1,1)),A.afterLineNumber>0&&(Se=new Re.L(A.afterLineNumber,o.viewModel.getLineMaxColumn(A.afterLineNumber))),rt===null?$e=Se:Se===null?$e=rt:h<Z?$e=Se:$e=rt,{viewZoneId:A.id,afterLineNumber:A.afterLineNumber,positionBefore:Se,positionAfter:rt,position:$e}}return null}getFullLineRangeAtCoord(o){if(this._context.viewLayout.isAfterLines(o)){const Z=this._context.viewModel.getLineCount(),se=this._context.viewModel.getLineMaxColumn(Z);return{range:new Ve.e(Z,se,Z,se),isAfterLines:!0}}const h=this._context.viewLayout.getLineNumberAtVerticalOffset(o),A=this._context.viewModel.getLineMaxColumn(h);return{range:new Ve.e(h,1,h,A),isAfterLines:!1}}getLineNumberAtVerticalOffset(o){return this._context.viewLayout.getLineNumberAtVerticalOffset(o)}isAfterLines(o){return this._context.viewLayout.isAfterLines(o)}isInTopPadding(o){return this._context.viewLayout.isInTopPadding(o)}isInBottomPadding(o){return this._context.viewLayout.isInBottomPadding(o)}getVerticalOffsetForLineNumber(o){return this._context.viewLayout.getVerticalOffsetForLineNumber(o)}findAttribute(o,h){return an._findAttribute(o,h,this._viewHelper.viewDomNode)}static _findAttribute(o,h,A){for(;o&&o!==document.body;){if(o.hasAttribute&&o.hasAttribute(h))return o.getAttribute(h);if(o===A)return null;o=o.parentNode}return null}getLineWidth(o){return this._viewHelper.getLineWidth(o)}visibleRangeForPosition(o,h){return this._viewHelper.visibleRangeForPosition(o,h)}getPositionFromDOMInfo(o,h){return this._viewHelper.getPositionFromDOMInfo(o,h)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class An{constructor(o,h,A,Z){this.editorPos=h,this.pos=A,this.relativePos=Z,this.mouseVerticalOffset=Math.max(0,o.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=o.getCurrentScrollLeft()+this.relativePos.x-o.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<o.layoutInfo.contentLeft&&this.relativePos.x>=o.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,pn._getMouseColumn(this.mouseContentHorizontalOffset,o.typicalHalfwidthCharacterWidth))}}class Fn extends An{constructor(o,h,A,Z,se){super(o,h,A,Z);this._ctx=o,se?(this.target=se,this.targetPath=we.collect(se,o.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(o=null){return o&&o.column<this._ctx.viewModel.getLineMaxColumn(o.lineNumber)?at.i.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(o.lineNumber),o.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(o=null){return Xe.createUnknown(this.target,this._getMouseColumn(o),o)}fulfillTextarea(){return Xe.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(o,h,A,Z){return Xe.createMargin(o,this.target,this._getMouseColumn(h),h,A,Z)}fulfillViewZone(o,h,A){return Xe.createViewZone(o,this.target,this._getMouseColumn(h),h,A)}fulfillContentText(o,h,A){return Xe.createContentText(this.target,this._getMouseColumn(o),o,h,A)}fulfillContentEmpty(o,h){return Xe.createContentEmpty(this.target,this._getMouseColumn(o),o,h)}fulfillContentWidget(o){return Xe.createContentWidget(this.target,this._getMouseColumn(),o)}fulfillScrollbar(o){return Xe.createScrollbar(this.target,this._getMouseColumn(o),o)}fulfillOverlayWidget(o){return Xe.createOverlayWidget(this.target,this._getMouseColumn(),o)}withTarget(o){return new Fn(this._ctx,this.editorPos,this.pos,this.relativePos,o)}}const Ht={isAfterLines:!0};function Kt(Ut){return{isAfterLines:!1,horizontalDistanceToText:Ut}}class pn{constructor(o,h){this._context=o,this._viewHelper=h}mouseTargetIsWidget(o){const h=o.target,A=we.collect(h,this._viewHelper.viewDomNode);return!!(ft.isChildOfContentWidgets(A)||ft.isChildOfOverflowingContentWidgets(A)||ft.isChildOfOverlayWidgets(A))}createMouseTarget(o,h,A,Z,se){const Se=new an(this._context,this._viewHelper,o),$e=new Fn(Se,h,A,Z,se);try{return pn._createMouseTarget(Se,$e,!1)}catch(rt){return $e.fulfillUnknown()}}static _createMouseTarget(o,h,A){if(h.target===null){if(A)return h.fulfillUnknown();const Se=pn._doHitTest(o,h);return Se.type===1?pn.createMouseTargetFromHitTestPosition(o,h,Se.spanNode,Se.position,Se.injectedText):this._createMouseTarget(o,h.withTarget(Se.hitTarget),!0)}const Z=h;let se=null;return se=se||pn._hitTestContentWidget(o,Z),se=se||pn._hitTestOverlayWidget(o,Z),se=se||pn._hitTestMinimap(o,Z),se=se||pn._hitTestScrollbarSlider(o,Z),se=se||pn._hitTestViewZone(o,Z),se=se||pn._hitTestMargin(o,Z),se=se||pn._hitTestViewCursor(o,Z),se=se||pn._hitTestTextArea(o,Z),se=se||pn._hitTestViewLines(o,Z,A),se=se||pn._hitTestScrollbar(o,Z),se||h.fulfillUnknown()}static _hitTestContentWidget(o,h){if(ft.isChildOfContentWidgets(h.targetPath)||ft.isChildOfOverflowingContentWidgets(h.targetPath)){const A=o.findAttribute(h.target,"widgetId");return A?h.fulfillContentWidget(A):h.fulfillUnknown()}return null}static _hitTestOverlayWidget(o,h){if(ft.isChildOfOverlayWidgets(h.targetPath)){const A=o.findAttribute(h.target,"widgetId");return A?h.fulfillOverlayWidget(A):h.fulfillUnknown()}return null}static _hitTestViewCursor(o,h){if(h.target){const A=o.lastRenderData.lastViewCursorsRenderData;for(const Z of A)if(h.target===Z.domNode)return h.fulfillContentText(Z.position,null,{mightBeForeignElement:!1,injectedText:null})}if(h.isInContentArea){const A=o.lastRenderData.lastViewCursorsRenderData,Z=h.mouseContentHorizontalOffset,se=h.mouseVerticalOffset;for(const Se of A){if(Z<Se.contentLeft||Z>Se.contentLeft+Se.width)continue;const $e=o.getVerticalOffsetForLineNumber(Se.position.lineNumber);if($e<=se&&se<=$e+Se.height)return h.fulfillContentText(Se.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(o,h){const A=o.getZoneAtCoord(h.mouseVerticalOffset);if(A){const Z=h.isInContentArea?8:5;return h.fulfillViewZone(Z,A.position,A)}return null}static _hitTestTextArea(o,h){return ft.isTextArea(h.targetPath)?o.lastRenderData.lastTextareaPosition?h.fulfillContentText(o.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):h.fulfillTextarea():null}static _hitTestMargin(o,h){if(h.isInMarginArea){const A=o.getFullLineRangeAtCoord(h.mouseVerticalOffset),Z=A.range.getStartPosition();let se=Math.abs(h.relativePos.x);const Se={isAfterLines:A.isAfterLines,glyphMarginLeft:o.layoutInfo.glyphMarginLeft,glyphMarginWidth:o.layoutInfo.glyphMarginWidth,lineNumbersWidth:o.layoutInfo.lineNumbersWidth,offsetX:se};return se-=o.layoutInfo.glyphMarginLeft,se<=o.layoutInfo.glyphMarginWidth?h.fulfillMargin(2,Z,A.range,Se):(se-=o.layoutInfo.glyphMarginWidth,se<=o.layoutInfo.lineNumbersWidth?h.fulfillMargin(3,Z,A.range,Se):(se-=o.layoutInfo.lineNumbersWidth,h.fulfillMargin(4,Z,A.range,Se)))}return null}static _hitTestViewLines(o,h,A){if(!ft.isChildOfViewLines(h.targetPath))return null;if(o.isInTopPadding(h.mouseVerticalOffset))return h.fulfillContentEmpty(new Re.L(1,1),Ht);if(o.isAfterLines(h.mouseVerticalOffset)||o.isInBottomPadding(h.mouseVerticalOffset)){const se=o.viewModel.getLineCount(),Se=o.viewModel.getLineMaxColumn(se);return h.fulfillContentEmpty(new Re.L(se,Se),Ht)}if(A){if(ft.isStrictChildOfViewLines(h.targetPath)){const se=o.getLineNumberAtVerticalOffset(h.mouseVerticalOffset);if(o.viewModel.getLineLength(se)===0){const $e=o.getLineWidth(se),rt=Kt(h.mouseContentHorizontalOffset-$e);return h.fulfillContentEmpty(new Re.L(se,1),rt)}const Se=o.getLineWidth(se);if(h.mouseContentHorizontalOffset>=Se){const $e=Kt(h.mouseContentHorizontalOffset-Se),rt=new Re.L(se,o.viewModel.getLineMaxColumn(se));return h.fulfillContentEmpty(rt,$e)}}return h.fulfillUnknown()}const Z=pn._doHitTest(o,h);return Z.type===1?pn.createMouseTargetFromHitTestPosition(o,h,Z.spanNode,Z.position,Z.injectedText):this._createMouseTarget(o,h.withTarget(Z.hitTarget),!0)}static _hitTestMinimap(o,h){if(ft.isChildOfMinimap(h.targetPath)){const A=o.getLineNumberAtVerticalOffset(h.mouseVerticalOffset),Z=o.viewModel.getLineMaxColumn(A);return h.fulfillScrollbar(new Re.L(A,Z))}return null}static _hitTestScrollbarSlider(o,h){if(ft.isChildOfScrollableElement(h.targetPath)&&h.target&&h.target.nodeType===1){const A=h.target.className;if(A&&/\b(slider|scrollbar)\b/.test(A)){const Z=o.getLineNumberAtVerticalOffset(h.mouseVerticalOffset),se=o.viewModel.getLineMaxColumn(Z);return h.fulfillScrollbar(new Re.L(Z,se))}}return null}static _hitTestScrollbar(o,h){if(ft.isChildOfScrollableElement(h.targetPath)){const A=o.getLineNumberAtVerticalOffset(h.mouseVerticalOffset),Z=o.viewModel.getLineMaxColumn(A);return h.fulfillScrollbar(new Re.L(A,Z))}return null}getMouseColumn(o){const h=this._context.configuration.options,A=h.get(131),Z=this._context.viewLayout.getCurrentScrollLeft()+o.x-A.contentLeft;return pn._getMouseColumn(Z,h.get(44).typicalHalfwidthCharacterWidth)}static _getMouseColumn(o,h){return o<0?1:Math.round(o/h)+1}static createMouseTargetFromHitTestPosition(o,h,A,Z,se){const Se=Z.lineNumber,$e=Z.column,rt=o.getLineWidth(Se);if(h.mouseContentHorizontalOffset>rt){const $n=Kt(h.mouseContentHorizontalOffset-rt);return h.fulfillContentEmpty(Z,$n)}const ht=o.visibleRangeForPosition(Se,$e);if(!ht)return h.fulfillUnknown(Z);const xt=ht.left;if(h.mouseContentHorizontalOffset===xt)return h.fulfillContentText(Z,null,{mightBeForeignElement:!!se,injectedText:se});const Wt=[];if(Wt.push({offset:ht.left,column:$e}),$e>1){const $n=o.visibleRangeForPosition(Se,$e-1);$n&&Wt.push({offset:$n.left,column:$e-1})}const qt=o.viewModel.getLineMaxColumn(Se);if($e<qt){const $n=o.visibleRangeForPosition(Se,$e+1);$n&&Wt.push({offset:$n.left,column:$e+1})}Wt.sort(($n,vi)=>$n.offset-vi.offset);const on=h.pos.toClientCoordinates(),_n=A.getBoundingClientRect(),Mn=_n.left<=on.clientX&&on.clientX<=_n.right;for(let $n=1;$n<Wt.length;$n++){const vi=Wt[$n-1],Ii=Wt[$n];if(vi.offset<=h.mouseContentHorizontalOffset&&h.mouseContentHorizontalOffset<=Ii.offset){const Di=new Ve.e(Se,vi.column,Se,Ii.column);return h.fulfillContentText(Z,Di,{mightBeForeignElement:!Mn||!!se,injectedText:se})}}return h.fulfillContentText(Z,null,{mightBeForeignElement:!Mn||!!se,injectedText:se})}static _doHitTestWithCaretRangeFromPoint(o,h){const A=o.getLineNumberAtVerticalOffset(h.mouseVerticalOffset),se=o.getVerticalOffsetForLineNumber(A)+Math.floor(o.lineHeight/2);let Se=h.pos.y+(se-h.mouseVerticalOffset);Se<=h.editorPos.y&&(Se=h.editorPos.y+1),Se>=h.editorPos.y+h.editorPos.height&&(Se=h.editorPos.y+h.editorPos.height-1);const $e=new ke.YN(h.pos.x,Se),rt=this._actualDoHitTestWithCaretRangeFromPoint(o,$e.toClientCoordinates());return rt.type===1?rt:this._actualDoHitTestWithCaretRangeFromPoint(o,h.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(o,h){const A=T.Ay(o.viewDomNode);let Z;if(A?typeof A.caretRangeFromPoint=="undefined"?Z=Vn(A,h.clientX,h.clientY):Z=A.caretRangeFromPoint(h.clientX,h.clientY):Z=document.caretRangeFromPoint(h.clientX,h.clientY),!Z||!Z.startContainer)return new Be;const se=Z.startContainer;if(se.nodeType===se.TEXT_NODE){const Se=se.parentNode,$e=Se?Se.parentNode:null,rt=$e?$e.parentNode:null;return(rt&&rt.nodeType===rt.ELEMENT_NODE?rt.className:null)===_t.CLASS_NAME?Et.createFromDOMInfo(o,Se,Z.startOffset):new Be(se.parentNode)}else if(se.nodeType===se.ELEMENT_NODE){const Se=se.parentNode,$e=Se?Se.parentNode:null;return($e&&$e.nodeType===$e.ELEMENT_NODE?$e.className:null)===_t.CLASS_NAME?Et.createFromDOMInfo(o,se,se.textContent.length):new Be(se)}return new Be}static _doHitTestWithCaretPositionFromPoint(o,h){const A=document.caretPositionFromPoint(h.clientX,h.clientY);if(A.offsetNode.nodeType===A.offsetNode.TEXT_NODE){const Z=A.offsetNode.parentNode,se=Z?Z.parentNode:null,Se=se?se.parentNode:null;return(Se&&Se.nodeType===Se.ELEMENT_NODE?Se.className:null)===_t.CLASS_NAME?Et.createFromDOMInfo(o,A.offsetNode.parentNode,A.offset):new Be(A.offsetNode.parentNode)}if(A.offsetNode.nodeType===A.offsetNode.ELEMENT_NODE){const Z=A.offsetNode.parentNode,se=Z&&Z.nodeType===Z.ELEMENT_NODE?Z.className:null,Se=Z?Z.parentNode:null,$e=Se&&Se.nodeType===Se.ELEMENT_NODE?Se.className:null;if(se===_t.CLASS_NAME){const rt=A.offsetNode.childNodes[Math.min(A.offset,A.offsetNode.childNodes.length-1)];if(rt)return Et.createFromDOMInfo(o,rt,0)}else if($e===_t.CLASS_NAME)return Et.createFromDOMInfo(o,A.offsetNode,0)}return new Be(A.offsetNode)}static _snapToSoftTabBoundary(o,h){const A=h.getLineContent(o.lineNumber),{tabSize:Z}=h.model.getOptions(),se=pt.l.atomicPosition(A,o.column-1,Z,2);return se!==-1?new Re.L(o.lineNumber,se+1):o}static _doHitTest(o,h){let A=new Be;if(typeof document.caretRangeFromPoint=="function"?A=this._doHitTestWithCaretRangeFromPoint(o,h):document.caretPositionFromPoint&&(A=this._doHitTestWithCaretPositionFromPoint(o,h.pos.toClientCoordinates())),A.type===1){const Z=o.viewModel.getInjectedTextAt(A.position),se=o.viewModel.normalizePosition(A.position,2);(Z||!se.equals(A.position))&&(A=new je(se,A.spanNode,Z))}return A.type===1&&o.stickyTabStops&&(A=new je(this._snapToSoftTabBoundary(A.position,o.viewModel),A.spanNode,A.injectedText)),A}}function Vn(Ut,o,h){const A=document.createRange();let Z=Ut.elementFromPoint(o,h);if(Z!==null){for(;Z&&Z.firstChild&&Z.firstChild.nodeType!==Z.firstChild.TEXT_NODE&&Z.lastChild&&Z.lastChild.firstChild;)Z=Z.lastChild;const se=Z.getBoundingClientRect(),Se=window.getComputedStyle(Z,null).getPropertyValue("font"),$e=Z.innerText;let rt=se.left,ht=0,xt;if(o>se.left+se.width)ht=$e.length;else{const Wt=kt.getInstance();for(let qt=0;qt<$e.length+1;qt++){if(xt=Wt.getCharWidth($e.charAt(qt),Se)/2,rt+=xt,o<rt){ht=qt;break}rt+=xt}}A.setStart(Z.firstChild,ht),A.setEnd(Z.firstChild,ht)}return A}class kt{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return kt._INSTANCE||(kt._INSTANCE=new kt),kt._INSTANCE}getCharWidth(o,h){const A=o+h;if(this._cache[A])return this._cache[A];const Z=this._canvas.getContext("2d");Z.font=h;const Se=Z.measureText(o).width;return this._cache[A]=Se,Se}}kt._INSTANCE=null;function Zt(Ut){return function(o,h){let A=!1;return Ut&&(A=Ut.mouseTargetIsWidget(h)),A||h.preventDefault(),h}}class wn extends Te{constructor(o,h,A){super();this._context=o,this.viewController=h,this.viewHelper=A,this.mouseTargetFactory=new pn(this._context,A),this._mouseDownOperation=this._register(new Pi(this._context,this.viewController,this.viewHelper,(Se,$e)=>this._createMouseTarget(Se,$e),Se=>this._getMouseColumn(Se))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(131).height;const Z=new ke.N5(this.viewHelper.viewDomNode);this._register(Z.onContextMenu(this.viewHelper.viewDomNode,Se=>this._onContextMenu(Se,!0))),this._register(Z.onMouseMoveThrottled(this.viewHelper.viewDomNode,Se=>this._onMouseMove(Se),Zt(this.mouseTargetFactory),wn.MOUSE_MOVE_MINIMUM_TIME)),this._register(Z.onMouseUp(this.viewHelper.viewDomNode,Se=>this._onMouseUp(Se))),this._register(Z.onMouseLeave(this.viewHelper.viewDomNode,Se=>this._onMouseLeave(Se))),this._register(Z.onMouseDown(this.viewHelper.viewDomNode,Se=>this._onMouseDown(Se)));const se=Se=>{if(this.viewController.emitMouseWheel(Se),!this._context.configuration.options.get(68))return;const $e=new Ce.q(Se);if(C.dz?(Se.metaKey||Se.ctrlKey)&&!Se.shiftKey&&!Se.altKey:Se.ctrlKey&&!Se.metaKey&&!Se.shiftKey&&!Se.altKey){const ht=I.C.getZoomLevel(),xt=$e.deltaY>0?1:-1;I.C.setZoomLevel(ht+xt),$e.preventDefault(),$e.stopPropagation()}};this._register(T.nm(this.viewHelper.viewDomNode,T.tw.MOUSE_WHEEL,se,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(o){if(o.hasChanged(131)){const h=this._context.configuration.options.get(131).height;this._height!==h&&(this._height=h,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(o){return this._mouseDownOperation.onCursorStateChanged(o),!1}onFocusChanged(o){return!1}onScrollChanged(o){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(o,h){const Z=new ke.rU(o,h).toPageCoordinates(),se=(0,ke.kG)(this.viewHelper.viewDomNode);if(Z.y<se.y||Z.y>se.y+se.height||Z.x<se.x||Z.x>se.x+se.width)return null;const Se=(0,ke.Pp)(this.viewHelper.viewDomNode,se,Z);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),se,Z,Se,null)}_createMouseTarget(o,h){let A=o.target;if(!this.viewHelper.viewDomNode.contains(A)){const Z=T.Ay(this.viewHelper.viewDomNode);Z&&(A=Z.elementsFromPoint(o.posx,o.posy).find(se=>this.viewHelper.viewDomNode.contains(se)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o.editorPos,o.pos,o.relativePos,h?A:null)}_getMouseColumn(o){return this.mouseTargetFactory.getMouseColumn(o.relativePos)}_onContextMenu(o,h){this.viewController.emitContextMenu({event:o,target:this._createMouseTarget(o,h)})}_onMouseMove(o){this._mouseDownOperation.isActive()||o.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:o,target:this._createMouseTarget(o,!0)})}_onMouseLeave(o){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:o,target:null})}_onMouseUp(o){this.viewController.emitMouseUp({event:o,target:this._createMouseTarget(o,!0)})}_onMouseDown(o){const h=this._createMouseTarget(o,!0),A=h.type===6||h.type===7,Z=h.type===2||h.type===3||h.type===4,se=h.type===3,Se=this._context.configuration.options.get(98),$e=h.type===8||h.type===5,rt=h.type===9;let ht=o.leftButton||o.middleButton;C.dz&&o.leftButton&&o.ctrlKey&&(ht=!1);const xt=()=>{o.preventDefault(),this.viewHelper.focusTextArea()};if(ht&&(A||se&&Se))xt(),this._mouseDownOperation.start(h.type,o);else if(Z)o.preventDefault();else if($e){const Wt=h.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(Wt.viewZoneId)&&(xt(),this._mouseDownOperation.start(h.type,o),o.preventDefault())}else rt&&this.viewHelper.shouldSuppressMouseDownOnWidget(h.detail)&&(xt(),o.preventDefault());this.viewController.emitMouseDown({event:o,target:h})}}wn.MOUSE_MOVE_MINIMUM_TIME=100;class Pi extends x.JT{constructor(o,h,A,Z,se){super();this._context=o,this._viewController=h,this._viewHelper=A,this._createMouseTarget=Z,this._getMouseColumn=se,this._mouseMoveMonitor=this._register(new ke.iB(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new ye._F),this._mouseState=new Fi,this._currentSelection=new X.Y(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(o){this._lastMouseEvent=o,this._mouseState.setModifiers(o);const h=this._findMousePosition(o,!0);!h||(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:o,target:h}):this._dispatchMouse(h,!0))}start(o,h){this._lastMouseEvent=h,this._mouseState.setStartedOnLineNumbers(o===3),this._mouseState.setStartButtons(h),this._mouseState.setModifiers(h);const A=this._findMousePosition(h,!0);if(!A||!A.position)return;this._mouseState.trySetCount(h.detail,A.position),h.detail=this._mouseState.count;const Z=this._context.configuration.options;if(!Z.get(81)&&Z.get(31)&&!Z.get(18)&&!this._mouseState.altKey&&h.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&A.type===6&&A.position&&this._currentSelection.containsPosition(A.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(h.target,h.buttons,Zt(null),se=>this._onMouseDownThenMove(se),se=>{const Se=this._findMousePosition(this._lastMouseEvent,!0);se&&se instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:Se?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(A,h.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(h.target,h.buttons,Zt(null),se=>this._onMouseDownThenMove(se),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){!this._isActive||this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const o=this._findMousePosition(this._lastMouseEvent,!1);!o||this._mouseState.isDragAndDrop||this._dispatchMouse(o,!0)},10)}onCursorStateChanged(o){this._currentSelection=o.selections[0]}_getPositionOutsideEditor(o){const h=o.editorPos,A=this._context.viewModel,Z=this._context.viewLayout,se=this._getMouseColumn(o);if(o.posy<h.y){const $e=Math.max(Z.getCurrentScrollTop()-(h.y-o.posy),0),rt=an.getZoneAtCoord(this._context,$e);if(rt){const xt=this._helpPositionJumpOverViewZone(rt);if(xt)return Xe.createOutsideEditor(se,xt)}const ht=Z.getLineNumberAtVerticalOffset($e);return Xe.createOutsideEditor(se,new Re.L(ht,1))}if(o.posy>h.y+h.height){const $e=Z.getCurrentScrollTop()+o.relativePos.y,rt=an.getZoneAtCoord(this._context,$e);if(rt){const xt=this._helpPositionJumpOverViewZone(rt);if(xt)return Xe.createOutsideEditor(se,xt)}const ht=Z.getLineNumberAtVerticalOffset($e);return Xe.createOutsideEditor(se,new Re.L(ht,A.getLineMaxColumn(ht)))}const Se=Z.getLineNumberAtVerticalOffset(Z.getCurrentScrollTop()+o.relativePos.y);return o.posx<h.x?Xe.createOutsideEditor(se,new Re.L(Se,1)):o.posx>h.x+h.width?Xe.createOutsideEditor(se,new Re.L(Se,A.getLineMaxColumn(Se))):null}_findMousePosition(o,h){const A=this._getPositionOutsideEditor(o);if(A)return A;const Z=this._createMouseTarget(o,h);if(!Z.position)return null;if(Z.type===8||Z.type===5){const Se=this._helpPositionJumpOverViewZone(Z.detail);if(Se)return Xe.createViewZone(Z.type,Z.element,Z.mouseColumn,Se,Z.detail)}return Z}_helpPositionJumpOverViewZone(o){const h=new Re.L(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),A=o.positionBefore,Z=o.positionAfter;return A&&Z?A.isBefore(h)?A:Z:null}_dispatchMouse(o,h){!o.position||this._viewController.dispatchMouse({position:o.position,mouseColumn:o.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:h,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:o.type===6&&o.detail.injectedText!==null})}}class Fi{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(o){this._altKey=o.altKey,this._ctrlKey=o.ctrlKey,this._metaKey=o.metaKey,this._shiftKey=o.shiftKey}setStartButtons(o){this._leftButton=o.leftButton,this._middleButton=o.middleButton}setStartedOnLineNumbers(o){this._startedOnLineNumbers=o}trySetCount(o,h){const A=new Date().getTime();A-this._lastSetMouseDownCountTime>Fi.CLEAR_MOUSE_DOWN_COUNT_TIME&&(o=1),this._lastSetMouseDownCountTime=A,o>this._lastMouseDownCount+1&&(o=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(h)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=h,this._lastMouseDownCount=Math.min(o,this._lastMouseDownPositionEqualCount)}}Fi.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var Ji=a(10161),si=a(35715);class zt extends wn{constructor(o,h,A){super(o,h,A);this._register(oe.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(T.nm(this.viewHelper.linesContentDomNode,oe.t.Tap,se=>this.onTap(se))),this._register(T.nm(this.viewHelper.linesContentDomNode,oe.t.Change,se=>this.onChange(se))),this._register(T.nm(this.viewHelper.linesContentDomNode,oe.t.Contextmenu,se=>this._onContextMenu(new ke.gy(se,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(T.nm(this.viewHelper.linesContentDomNode,"pointerdown",se=>{const Se=se.pointerType;if(Se==="mouse"){this._lastPointerType="mouse";return}else Se==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const Z=new ke.tC(this.viewHelper.viewDomNode);this._register(Z.onPointerMoveThrottled(this.viewHelper.viewDomNode,se=>this._onMouseMove(se),Zt(this.mouseTargetFactory),wn.MOUSE_MOVE_MINIMUM_TIME)),this._register(Z.onPointerUp(this.viewHelper.viewDomNode,se=>this._onMouseUp(se))),this._register(Z.onPointerLeave(this.viewHelper.viewDomNode,se=>this._onMouseLeave(se))),this._register(Z.onPointerDown(this.viewHelper.viewDomNode,se=>this._onMouseDown(se)))}onTap(o){if(!o.initialTarget||!this.viewHelper.linesContentDomNode.contains(o.initialTarget))return;o.preventDefault(),this.viewHelper.focusTextArea();const h=this._createMouseTarget(new ke.gy(o,this.viewHelper.viewDomNode),!1);h.position&&this.viewController.dispatchMouse({position:h.position,mouseColumn:h.position.column,startedOnLineNumbers:!1,mouseDownCount:o.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:h.type===6&&h.detail.injectedText!==null})}onChange(o){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-o.translationX,-o.translationY)}_onMouseDown(o){o.browserEvent.pointerType!=="touch"&&super._onMouseDown(o)}}class Vt extends wn{constructor(o,h,A){super(o,h,A);this._register(oe.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(T.nm(this.viewHelper.linesContentDomNode,oe.t.Tap,Z=>this.onTap(Z))),this._register(T.nm(this.viewHelper.linesContentDomNode,oe.t.Change,Z=>this.onChange(Z))),this._register(T.nm(this.viewHelper.linesContentDomNode,oe.t.Contextmenu,Z=>this._onContextMenu(new ke.gy(Z,this.viewHelper.viewDomNode),!1)))}onTap(o){o.preventDefault(),this.viewHelper.focusTextArea();const h=this._createMouseTarget(new ke.gy(o,this.viewHelper.viewDomNode),!1);if(h.position){const A=document.createEvent("CustomEvent");A.initEvent(si.pd.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(A),this.viewController.moveTo(h.position)}}onChange(o){this._context.viewModel.viewLayout.deltaScrollNow(-o.translationX,-o.translationY)}}class vn extends x.JT{constructor(o,h,A){super();C.gn&&Ji.D.pointerEvents?this.handler=this._register(new zt(o,h,A)):window.TouchEvent?this.handler=this._register(new Vt(o,h,A)):this.handler=this._register(new wn(o,h,A))}getTargetAtClientPoint(o,h){return this.handler.getTargetAtClientPoint(o,h)}}var Sn=a(25924),Bn=a(52136),mn=a(15887);class Jt extends Te{}var En=a(8625),$t=a(97781);class sn extends Jt{constructor(o){super();this._context=o,this._readConfig(),this._lastCursorModelPosition=new Re.L(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const o=this._context.configuration.options;this._lineHeight=o.get(59);const h=o.get(60);this._renderLineNumbers=h.renderType,this._renderCustomLineNumbers=h.renderFn,this._renderFinalNewline=o.get(84);const A=o.get(131);this._lineNumbersLeft=A.lineNumbersLeft,this._lineNumbersWidth=A.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(o){return this._readConfig(),!0}onCursorStateChanged(o){const h=o.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(h);let A=!1;return this._activeLineNumber!==h.lineNumber&&(this._activeLineNumber=h.lineNumber,A=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(A=!0),A}onFlushed(o){return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return o.scrollTopChanged}onZonesChanged(o){return!0}_getLineRenderLineNumber(o){const h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Re.L(o,1));if(h.column!==1)return"";const A=h.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(A);if(this._renderLineNumbers===2){const Z=Math.abs(this._lastCursorModelPosition.lineNumber-A);return Z===0?'<span class="relative-current-line-number">'+A+"</span>":String(Z)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===A||A%10==0?String(A):"":String(A)}prepareRender(o){if(this._renderLineNumbers===0){this._renderResult=null;return}const h=C.IJ?this._lineHeight%2==0?" lh-even":" lh-odd":"",A=o.visibleRange.startLineNumber,Z=o.visibleRange.endLineNumber,se='<div class="'+sn.CLASS_NAME+h+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',Se=this._context.viewModel.getLineCount(),$e=[];for(let rt=A;rt<=Z;rt++){const ht=rt-A;if(!this._renderFinalNewline&&rt===Se&&this._context.viewModel.getLineLength(rt)===0){$e[ht]="";continue}const xt=this._getLineRenderLineNumber(rt);xt?rt===this._activeLineNumber?$e[ht]='<div class="active-line-number '+sn.CLASS_NAME+h+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+xt+"</div>":$e[ht]=se+xt+"</div>":$e[ht]=""}this._renderResult=$e}render(o,h){if(!this._renderResult)return"";const A=h-o;return A<0||A>=this._renderResult.length?"":this._renderResult[A]}}sn.CLASS_NAME="line-numbers",(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(En.hw);h&&o.addRule(`.monaco-editor .line-numbers { color: ${h}; }`);const A=Ut.getColor(En.DD);A&&o.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${A}; }`)});class Tn extends ge{constructor(o){super(o);const h=this._context.configuration.options,A=h.get(131);this._canUseLayerHinting=!h.get(28),this._contentLeft=A.contentLeft,this._glyphMarginLeft=A.glyphMarginLeft,this._glyphMarginWidth=A.glyphMarginWidth,this._domNode=(0,le.X)(document.createElement("div")),this._domNode.setClassName(Tn.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=(0,le.X)(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Tn.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(o){const h=this._context.configuration.options,A=h.get(131);return this._canUseLayerHinting=!h.get(28),this._contentLeft=A.contentLeft,this._glyphMarginLeft=A.glyphMarginLeft,this._glyphMarginWidth=A.glyphMarginWidth,!0}onScrollChanged(o){return super.onScrollChanged(o)||o.scrollTopChanged}prepareRender(o){}render(o){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const h=o.scrollTop-o.bigNumbersDelta;this._domNode.setTop(-h);const A=Math.min(o.scrollHeight,1e6);this._domNode.setHeight(A),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(A)}}Tn.CLASS_NAME="glyph-margin",Tn.OUTER_CLASS_NAME="margin";var ri=a(24929),oi=a(96542),On=a(96887),Qn=a(41264);class Yi{constructor(o,h,A,Z,se){this._context=o,this.modelLineNumber=h,this.distanceToModelLineStart=A,this.widthOfHiddenLineTextBefore=Z,this.distanceToModelLineEnd=se,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(o){const h=new Re.L(this.modelLineNumber,this.distanceToModelLineStart+1),A=new Re.L(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(h),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(A),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=o.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=o.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(o){return this._previousPresentation||(o?this._previousPresentation=o:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const Lr=g.isFirefox;class Dr extends ge{constructor(o,h,A){super(o);this._primaryCursorPosition=new Re.L(1,1),this._primaryCursorVisibleRange=null,this._viewController=h,this._visibleRangeProvider=A,this._scrollLeft=0,this._scrollTop=0;const Z=this._context.configuration.options,se=Z.get(131);this._setAccessibilityOptions(Z),this._contentLeft=se.contentLeft,this._contentWidth=se.contentWidth,this._contentHeight=se.height,this._fontInfo=Z.get(44),this._lineHeight=Z.get(59),this._emptySelectionClipboard=Z.get(32),this._copyWithSyntaxHighlighting=Z.get(21),this._visibleTextArea=null,this._selections=[new X.Y(1,1,1,1)],this._modelSelections=[new X.Y(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,le.X)(document.createElement("textarea")),we.write(this.textArea,6),this.textArea.setClassName(`inputarea ${oi.S}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(Z)),this.textArea.setAttribute("tabindex",String(Z.get(112))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",j.N("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),Z.get(30)&&Z.get(81)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=(0,le.X)(document.createElement("div")),this.textAreaCover.setPosition("absolute");const Se={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:ht=>this._context.viewModel.getLineMaxColumn(ht),getValueInRange:(ht,xt)=>this._context.viewModel.getValueInRange(ht,xt)},$e={getDataToCopy:()=>{const ht=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,C.ED),xt=this._context.viewModel.model.getEOL(),Wt=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),qt=Array.isArray(ht)?ht:null,on=Array.isArray(ht)?ht.join(xt):ht;let _n,Mn=null;if(si.RA.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&on.length<65536){const $n=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);$n&&(_n=$n.html,Mn=$n.mode)}return{isFromEmptySelection:Wt,multicursorText:qt,text:on,html:_n,mode:Mn}},getScreenReaderContent:ht=>{if(this._accessibilitySupport===1){if(C.dz){const xt=this._selections[0];if(xt.isEmpty()){const Wt=xt.getStartPosition();let qt=this._getWordBeforePosition(Wt);if(qt.length===0&&(qt=this._getCharacterBeforePosition(Wt)),qt.length>0)return new mn.un(qt,qt.length,qt.length,Wt,Wt)}}return mn.un.EMPTY}if(g.isAndroid){const xt=this._selections[0];if(xt.isEmpty()){const Wt=xt.getStartPosition(),[qt,on]=this._getAndroidWordAtPosition(Wt);if(qt.length>0)return new mn.un(qt,on,on,Wt,Wt)}return mn.un.EMPTY}return mn.ee.fromEditorSelection(ht,Se,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(ht,xt,Wt)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(ht,xt,Wt)},rt=this._register(new si.Tj(this.textArea.domNode));this._textAreaInput=this._register(new si.Fz($e,rt,C.OS,g)),this._register(this._textAreaInput.onKeyDown(ht=>{this._viewController.emitKeyDown(ht)})),this._register(this._textAreaInput.onKeyUp(ht=>{this._viewController.emitKeyUp(ht)})),this._register(this._textAreaInput.onPaste(ht=>{let xt=!1,Wt=null,qt=null;ht.metadata&&(xt=this._emptySelectionClipboard&&!!ht.metadata.isFromEmptySelection,Wt=typeof ht.metadata.multicursorText!="undefined"?ht.metadata.multicursorText:null,qt=ht.metadata.mode),this._viewController.paste(ht.text,xt,Wt,qt)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(ht=>{ht.replacePrevCharCnt||ht.replaceNextCharCnt||ht.positionDelta?(mn.al&&console.log(` => compositionType: <<${ht.text}>>, ${ht.replacePrevCharCnt}, ${ht.replaceNextCharCnt}, ${ht.positionDelta}`),this._viewController.compositionType(ht.text,ht.replacePrevCharCnt,ht.replaceNextCharCnt,ht.positionDelta)):(mn.al&&console.log(` => type: <<${ht.text}>>`),this._viewController.type(ht.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(ht=>{this._viewController.setSelection(ht)})),this._register(this._textAreaInput.onCompositionStart(ht=>{const xt=this.textArea.domNode,Wt=this._modelSelections[0],{distanceToModelLineStart:qt,widthOfHiddenTextBefore:on}=(()=>{const Mn=xt.value.substring(0,Math.min(xt.selectionStart,xt.selectionEnd)),$n=Mn.lastIndexOf(`
`),vi=Mn.substring($n+1),Ii=vi.lastIndexOf("	"),Di=vi.length-Ii-1,mr=Wt.getStartPosition(),or=Math.min(mr.column-1,Di),Tr=mr.column-1-or,Er=vi.substring(0,vi.length-or),cr=Fr(Er,this._fontInfo);return{distanceToModelLineStart:Tr,widthOfHiddenTextBefore:cr}})(),{distanceToModelLineEnd:_n}=(()=>{const Mn=xt.value.substring(Math.max(xt.selectionStart,xt.selectionEnd)),$n=Mn.indexOf(`
`),vi=$n===-1?Mn:Mn.substring(0,$n),Ii=vi.indexOf("	"),Di=Ii===-1?vi.length:vi.length-Ii-1,mr=Wt.getEndPosition(),or=Math.min(this._context.viewModel.model.getLineMaxColumn(mr.lineNumber)-mr.column,Di);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(mr.lineNumber)-mr.column-or}})();this._context.viewModel.revealRange("keyboard",!0,Ve.e.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Yi(this._context,Wt.startLineNumber,qt,on,_n),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${oi.S} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(ht=>{!this._visibleTextArea||(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${oi.S}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(o){const h='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',A=this._context.viewModel.getLineContent(o.lineNumber),Z=(0,ri.u)(h);let se=!0,Se=o.column,$e=!0,rt=o.column,ht=0;for(;ht<50&&(se||$e);){if(se&&Se<=1&&(se=!1),se){const xt=A.charCodeAt(Se-2);Z.get(xt)!==0?se=!1:Se--}if($e&&rt>A.length&&($e=!1),$e){const xt=A.charCodeAt(rt-1);Z.get(xt)!==0?$e=!1:rt++}ht++}return[A.substring(Se-1,rt-1),o.column-Se]}_getWordBeforePosition(o){const h=this._context.viewModel.getLineContent(o.lineNumber),A=(0,ri.u)(this._context.configuration.options.get(117));let Z=o.column,se=0;for(;Z>1;){const Se=h.charCodeAt(Z-2);if(A.get(Se)!==0||se>50)return h.substring(Z-1,o.column-1);se++,Z--}return h.substring(0,o.column-1)}_getCharacterBeforePosition(o){if(o.column>1){const A=this._context.viewModel.getLineContent(o.lineNumber).charAt(o.column-2);if(!Sn.ZG(A.charCodeAt(0)))return A}return""}_getAriaLabel(o){return o.get(2)===1?j.N("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",C.IJ?"Shift+Alt+F1":"Alt+F1"):o.get(4)}_setAccessibilityOptions(o){this._accessibilitySupport=o.get(2);const h=o.get(3);this._accessibilitySupport===2&&h===b.BH.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=h}onConfigurationChanged(o){const h=this._context.configuration.options,A=h.get(131);return this._setAccessibilityOptions(h),this._contentLeft=A.contentLeft,this._contentWidth=A.contentWidth,this._contentHeight=A.height,this._fontInfo=h.get(44),this._lineHeight=h.get(59),this._emptySelectionClipboard=h.get(32),this._copyWithSyntaxHighlighting=h.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(h)),this.textArea.setAttribute("tabindex",String(h.get(112))),(o.hasChanged(30)||o.hasChanged(81))&&(h.get(30)&&h.get(81)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),o.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(o){return this._selections=o.selections.slice(0),this._modelSelections=o.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return this._scrollLeft=o.scrollLeft,this._scrollTop=o.scrollTop,!0}onZonesChanged(o){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(o){o.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",o.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),o.role&&this.textArea.setAttribute("role",o.role)}prepareRender(o){this._primaryCursorPosition=new Re.L(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=o.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea&&this._visibleTextArea.prepareRender(o)}render(o){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){const A=this._visibleTextArea.visibleTextareaStart,Z=this._visibleTextArea.visibleTextareaEnd,se=this._visibleTextArea.startPosition,Se=this._visibleTextArea.endPosition;if(se&&Se&&A&&Z&&Z.left>=this._scrollLeft&&A.left<=this._scrollLeft+this._contentWidth){const $e=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,rt=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let ht=this._visibleTextArea.widthOfHiddenLineTextBefore,xt=this._contentLeft+A.left-this._scrollLeft,Wt=Z.left-A.left+1;if(xt<this._contentLeft){const vi=this._contentLeft-xt;xt+=vi,ht+=vi,Wt-=vi}Wt>this._contentWidth&&(Wt=this._contentWidth);const qt=this._context.viewModel.getViewLineData(se.lineNumber),on=qt.tokens.findTokenIndexAtOffset(se.column-1),_n=qt.tokens.findTokenIndexAtOffset(Se.column-1),Mn=on===_n,$n=this._visibleTextArea.definePresentation(Mn?qt.tokens.getPresentation(on):null);this.textArea.domNode.scrollTop=rt*this._lineHeight,this.textArea.domNode.scrollLeft=ht,this._doRender({lastRenderPosition:null,top:$e,left:xt,width:Wt,height:this._lineHeight,useCover:!1,color:(On.RW.getColorMap()||[])[$n.foreground],italic:$n.italic,bold:$n.bold,underline:$n.underline,strikethrough:$n.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const o=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(o<this._contentLeft||o>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const h=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(h<0||h>this._contentHeight){this._renderAtTopLeft();return}if(C.dz){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:h,left:o,width:Lr?0:1,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const A=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=A*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:h,left:o,width:Lr?0:1,height:Lr?0:1,useCover:!1})}_newlinecount(o){let h=0,A=-1;do{if(A=o.indexOf(`
`,A+1),A===-1)break;h++}while(!0);return h}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:Lr?0:1,height:Lr?0:1,useCover:!0})}_doRender(o){this._lastRenderPosition=o.lastRenderPosition;const h=this.textArea,A=this.textAreaCover;(0,Bn.N)(h,this._fontInfo),h.setTop(o.top),h.setLeft(o.left),h.setWidth(o.width),h.setHeight(o.height),h.setColor(o.color?Qn.Il.Format.CSS.formatHex(o.color):""),h.setFontStyle(o.italic?"italic":""),o.bold&&h.setFontWeight("bold"),h.setTextDecoration(`${o.underline?" underline":""}${o.strikethrough?" line-through":""}`),A.setTop(o.useCover?o.top:0),A.setLeft(o.useCover?o.left:0),A.setWidth(o.useCover?o.width:0),A.setHeight(o.useCover?o.height:0);const Z=this._context.configuration.options;Z.get(50)?A.setClassName("monaco-editor-background textAreaCover "+Tn.OUTER_CLASS_NAME):Z.get(60).renderType!==0?A.setClassName("monaco-editor-background textAreaCover "+sn.CLASS_NAME):A.setClassName("monaco-editor-background textAreaCover")}}function Fr(Ut,o){if(Ut.length===0)return 0;const h=document.createElement("div");h.style.position="absolute",h.style.top="-50000px",h.style.width="50000px";const A=document.createElement("span");(0,Bn.N)(A,o),A.style.whiteSpace="pre",A.append(Ut),h.appendChild(A),document.body.appendChild(h);const Z=A.offsetWidth;return document.body.removeChild(h),Z}var Sr=a(69317);class Ro{constructor(o,h,A,Z){this.configuration=o,this.viewModel=h,this.userInputEvents=A,this.commandDelegate=Z}paste(o,h,A,Z){this.commandDelegate.paste(o,h,A,Z)}type(o){this.commandDelegate.type(o)}compositionType(o,h,A,Z){this.commandDelegate.compositionType(o,h,A,Z)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(o){Sr.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:o})}_validateViewColumn(o){const h=this.viewModel.getLineMinColumn(o.lineNumber);return o.column<h?new Re.L(o.lineNumber,h):o}_hasMulticursorModifier(o){switch(this.configuration.options.get(70)){case"altKey":return o.altKey;case"ctrlKey":return o.ctrlKey;case"metaKey":return o.metaKey;default:return!1}}_hasNonMulticursorModifier(o){switch(this.configuration.options.get(70)){case"altKey":return o.ctrlKey||o.metaKey;case"ctrlKey":return o.altKey||o.metaKey;case"metaKey":return o.ctrlKey||o.altKey;default:return!1}}dispatchMouse(o){const h=this.configuration.options,A=C.IJ&&h.get(96),Z=h.get(18);o.middleButton&&!A?this._columnSelect(o.position,o.mouseColumn,o.inSelectionMode):o.startedOnLineNumbers?this._hasMulticursorModifier(o)?o.inSelectionMode?this._lastCursorLineSelect(o.position):this._createCursor(o.position,!0):o.inSelectionMode?this._lineSelectDrag(o.position):this._lineSelect(o.position):o.mouseDownCount>=4?this._selectAll():o.mouseDownCount===3?this._hasMulticursorModifier(o)?o.inSelectionMode?this._lastCursorLineSelectDrag(o.position):this._lastCursorLineSelect(o.position):o.inSelectionMode?this._lineSelectDrag(o.position):this._lineSelect(o.position):o.mouseDownCount===2?o.onInjectedText||(this._hasMulticursorModifier(o)?this._lastCursorWordSelect(o.position):o.inSelectionMode?this._wordSelectDrag(o.position):this._wordSelect(o.position)):this._hasMulticursorModifier(o)?this._hasNonMulticursorModifier(o)||(o.shiftKey?this._columnSelect(o.position,o.mouseColumn,!0):o.inSelectionMode?this._lastCursorMoveToSelect(o.position):this._createCursor(o.position,!1)):o.inSelectionMode?o.altKey?this._columnSelect(o.position,o.mouseColumn,!0):Z?this._columnSelect(o.position,o.mouseColumn,!0):this._moveToSelect(o.position):this.moveTo(o.position)}_usualArgs(o){return o=this._validateViewColumn(o),{source:"mouse",position:this._convertViewToModelPosition(o),viewPosition:o}}moveTo(o){Sr.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_moveToSelect(o){Sr.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_columnSelect(o,h,A){o=this._validateViewColumn(o),Sr.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(o),viewPosition:o,mouseColumn:h,doColumnSelect:A})}_createCursor(o,h){o=this._validateViewColumn(o),Sr.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(o),viewPosition:o,wholeLine:h})}_lastCursorMoveToSelect(o){Sr.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_wordSelect(o){Sr.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_wordSelectDrag(o){Sr.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_lastCursorWordSelect(o){Sr.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_lineSelect(o){Sr.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_lineSelectDrag(o){Sr.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_lastCursorLineSelect(o){Sr.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_lastCursorLineSelectDrag(o){Sr.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(o))}_selectAll(){Sr.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(o){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(o)}emitKeyDown(o){this.userInputEvents.emitKeyDown(o)}emitKeyUp(o){this.userInputEvents.emitKeyUp(o)}emitContextMenu(o){this.userInputEvents.emitContextMenu(o)}emitMouseMove(o){this.userInputEvents.emitMouseMove(o)}emitMouseLeave(o){this.userInputEvents.emitMouseLeave(o)}emitMouseUp(o){this.userInputEvents.emitMouseUp(o)}emitMouseDown(o){this.userInputEvents.emitMouseDown(o)}emitMouseDrag(o){this.userInputEvents.emitMouseDrag(o)}emitMouseDrop(o){this.userInputEvents.emitMouseDrop(o)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(o){this.userInputEvents.emitMouseWheel(o)}}class to{constructor(o){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=o}emitKeyDown(o){this.onKeyDown&&this.onKeyDown(o)}emitKeyUp(o){this.onKeyUp&&this.onKeyUp(o)}emitContextMenu(o){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(o))}emitMouseMove(o){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(o))}emitMouseLeave(o){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(o))}emitMouseDown(o){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(o))}emitMouseUp(o){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(o))}emitMouseDrag(o){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(o))}emitMouseDrop(o){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(o))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(o){this.onMouseWheel&&this.onMouseWheel(o)}_convertViewToModelMouseEvent(o){return o.target?{event:o.event,target:this._convertViewToModelMouseTarget(o.target)}:o}_convertViewToModelMouseTarget(o){return to.convertViewToModelMouseTarget(o,this._coordinatesConverter)}static convertViewToModelMouseTarget(o,h){const A=Object.assign({},o);return A.position&&(A.position=h.convertViewPositionToModelPosition(A.position)),A.range&&(A.range=h.convertViewRangeToModelRange(A.range)),A}}var no=a(50072),dr;class kn{constructor(o){this._createLine=o,this._set(1,[])}flush(){this._set(1,[])}_set(o,h){this._lines=h,this._rendLineNumberStart=o}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(o){const h=o-this._rendLineNumberStart;if(h<0||h>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[h]}onLinesDeleted(o,h){if(this.getCount()===0)return null;const A=this.getStartLineNumber(),Z=this.getEndLineNumber();if(h<A){const rt=h-o+1;return this._rendLineNumberStart-=rt,null}if(o>Z)return null;let se=0,Se=0;for(let rt=A;rt<=Z;rt++){const ht=rt-this._rendLineNumberStart;o<=rt&&rt<=h&&(Se===0?(se=ht,Se=1):Se++)}if(o<A){let rt=0;h<A?rt=h-o+1:rt=A-o,this._rendLineNumberStart-=rt}return this._lines.splice(se,Se)}onLinesChanged(o,h){if(this.getCount()===0)return!1;const A=this.getStartLineNumber(),Z=this.getEndLineNumber();let se=!1;for(let Se=o;Se<=h;Se++)Se>=A&&Se<=Z&&(this._lines[Se-this._rendLineNumberStart].onContentChanged(),se=!0);return se}onLinesInserted(o,h){if(this.getCount()===0)return null;const A=h-o+1,Z=this.getStartLineNumber(),se=this.getEndLineNumber();if(o<=Z)return this._rendLineNumberStart+=A,null;if(o>se)return null;if(A+o>se)return this._lines.splice(o-this._rendLineNumberStart,se-o+1);const Se=[];for(let Wt=0;Wt<A;Wt++)Se[Wt]=this._createLine();const $e=o-this._rendLineNumberStart,rt=this._lines.slice(0,$e),ht=this._lines.slice($e,this._lines.length-A),xt=this._lines.slice(this._lines.length-A,this._lines.length);return this._lines=rt.concat(Se).concat(ht),xt}onTokensChanged(o){if(this.getCount()===0)return!1;const h=this.getStartLineNumber(),A=this.getEndLineNumber();let Z=!1;for(let se=0,Se=o.length;se<Se;se++){const $e=o[se];if($e.toLineNumber<h||$e.fromLineNumber>A)continue;const rt=Math.max(h,$e.fromLineNumber),ht=Math.min(A,$e.toLineNumber);for(let xt=rt;xt<=ht;xt++){const Wt=xt-this._rendLineNumberStart;this._lines[Wt].onTokensChanged(),Z=!0}}return Z}}class bt{constructor(o){this._host=o,this.domNode=this._createDomNode(),this._linesCollection=new kn(()=>this._host.createVisibleLine())}_createDomNode(){const o=(0,le.X)(document.createElement("div"));return o.setClassName("view-layer"),o.setPosition("absolute"),o.domNode.setAttribute("role","presentation"),o.domNode.setAttribute("aria-hidden","true"),o}onConfigurationChanged(o){return!!o.hasChanged(131)}onFlushed(o){return this._linesCollection.flush(),!0}onLinesChanged(o){return this._linesCollection.onLinesChanged(o.fromLineNumber,o.toLineNumber)}onLinesDeleted(o){const h=this._linesCollection.onLinesDeleted(o.fromLineNumber,o.toLineNumber);if(h)for(let A=0,Z=h.length;A<Z;A++){const se=h[A].getDomNode();se&&this.domNode.domNode.removeChild(se)}return!0}onLinesInserted(o){const h=this._linesCollection.onLinesInserted(o.fromLineNumber,o.toLineNumber);if(h)for(let A=0,Z=h.length;A<Z;A++){const se=h[A].getDomNode();se&&this.domNode.domNode.removeChild(se)}return!0}onScrollChanged(o){return o.scrollTopChanged}onTokensChanged(o){return this._linesCollection.onTokensChanged(o.ranges)}onZonesChanged(o){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(o){return this._linesCollection.getLine(o)}renderLines(o){const h=this._linesCollection._get(),A=new Bt(this.domNode.domNode,this._host,o),Z={rendLineNumberStart:h.rendLineNumberStart,lines:h.lines,linesLength:h.lines.length},se=A.render(Z,o.startLineNumber,o.endLineNumber,o.relativeVerticalOffset);this._linesCollection._set(se.rendLineNumberStart,se.lines)}}class Bt{constructor(o,h,A){this.domNode=o,this.host=h,this.viewportData=A}render(o,h,A,Z){const se={rendLineNumberStart:o.rendLineNumberStart,lines:o.lines.slice(0),linesLength:o.linesLength};if(se.rendLineNumberStart+se.linesLength-1<h||A<se.rendLineNumberStart){se.rendLineNumberStart=h,se.linesLength=A-h+1,se.lines=[];for(let Se=h;Se<=A;Se++)se.lines[Se-h]=this.host.createVisibleLine();return this._finishRendering(se,!0,Z),se}if(this._renderUntouchedLines(se,Math.max(h-se.rendLineNumberStart,0),Math.min(A-se.rendLineNumberStart,se.linesLength-1),Z,h),se.rendLineNumberStart>h){const Se=h,$e=Math.min(A,se.rendLineNumberStart-1);Se<=$e&&(this._insertLinesBefore(se,Se,$e,Z,h),se.linesLength+=$e-Se+1)}else if(se.rendLineNumberStart<h){const Se=Math.min(se.linesLength,h-se.rendLineNumberStart);Se>0&&(this._removeLinesBefore(se,Se),se.linesLength-=Se)}if(se.rendLineNumberStart=h,se.rendLineNumberStart+se.linesLength-1<A){const Se=se.rendLineNumberStart+se.linesLength,$e=A;Se<=$e&&(this._insertLinesAfter(se,Se,$e,Z,h),se.linesLength+=$e-Se+1)}else if(se.rendLineNumberStart+se.linesLength-1>A){const Se=Math.max(0,A-se.rendLineNumberStart+1),rt=se.linesLength-1-Se+1;rt>0&&(this._removeLinesAfter(se,rt),se.linesLength-=rt)}return this._finishRendering(se,!1,Z),se}_renderUntouchedLines(o,h,A,Z,se){const Se=o.rendLineNumberStart,$e=o.lines;for(let rt=h;rt<=A;rt++){const ht=Se+rt;$e[rt].layoutLine(ht,Z[ht-se])}}_insertLinesBefore(o,h,A,Z,se){const Se=[];let $e=0;for(let rt=h;rt<=A;rt++)Se[$e++]=this.host.createVisibleLine();o.lines=Se.concat(o.lines)}_removeLinesBefore(o,h){for(let A=0;A<h;A++){const Z=o.lines[A].getDomNode();Z&&this.domNode.removeChild(Z)}o.lines.splice(0,h)}_insertLinesAfter(o,h,A,Z,se){const Se=[];let $e=0;for(let rt=h;rt<=A;rt++)Se[$e++]=this.host.createVisibleLine();o.lines=o.lines.concat(Se)}_removeLinesAfter(o,h){const A=o.linesLength-h;for(let Z=0;Z<h;Z++){const se=o.lines[A+Z].getDomNode();se&&this.domNode.removeChild(se)}o.lines.splice(A,h)}_finishRenderingNewLines(o,h,A,Z){Bt._ttPolicy&&(A=Bt._ttPolicy.createHTML(A));const se=this.domNode.lastChild;h||!se?this.domNode.innerHTML=A:se.insertAdjacentHTML("afterend",A);let Se=this.domNode.lastChild;for(let $e=o.linesLength-1;$e>=0;$e--){const rt=o.lines[$e];Z[$e]&&(rt.setDomNode(Se),Se=Se.previousSibling)}}_finishRenderingInvalidLines(o,h,A){const Z=document.createElement("div");Bt._ttPolicy&&(h=Bt._ttPolicy.createHTML(h)),Z.innerHTML=h;for(let se=0;se<o.linesLength;se++){const Se=o.lines[se];if(A[se]){const $e=Z.firstChild,rt=Se.getDomNode();rt.parentNode.replaceChild($e,rt),Se.setDomNode($e)}}}_finishRendering(o,h,A){const Z=Bt._sb,se=o.linesLength,Se=o.lines,$e=o.rendLineNumberStart,rt=[];{Z.reset();let ht=!1;for(let xt=0;xt<se;xt++){const Wt=Se[xt];rt[xt]=!1,!(Wt.getDomNode()||!Wt.renderLine(xt+$e,A[xt],this.viewportData,Z))&&(rt[xt]=!0,ht=!0)}ht&&this._finishRenderingNewLines(o,h,Z.build(),rt)}{Z.reset();let ht=!1;const xt=[];for(let Wt=0;Wt<se;Wt++){const qt=Se[Wt];xt[Wt]=!1,!(rt[Wt]||!qt.renderLine(Wt+$e,A[Wt],this.viewportData,Z))&&(xt[Wt]=!0,ht=!0)}ht&&this._finishRenderingInvalidLines(o,Z.build(),xt)}}}Bt._ttPolicy=(dr=window.trustedTypes)===null||dr===void 0?void 0:dr.createPolicy("editorViewLayer",{createHTML:Ut=>Ut}),Bt._sb=(0,no.l$)(1e5);class At extends ge{constructor(o){super(o);this._visibleLines=new bt(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let o=0,h=this._dynamicOverlays.length;o<h;o++)if(this._dynamicOverlays[o].shouldRender())return!0;return!1}dispose(){super.dispose();for(let o=0,h=this._dynamicOverlays.length;o<h;o++)this._dynamicOverlays[o].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new Ke(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(o){this._dynamicOverlays.push(o)}onConfigurationChanged(o){this._visibleLines.onConfigurationChanged(o);const h=this._visibleLines.getStartLineNumber(),A=this._visibleLines.getEndLineNumber();for(let Z=h;Z<=A;Z++)this._visibleLines.getVisibleLine(Z).onConfigurationChanged(o);return!0}onFlushed(o){return this._visibleLines.onFlushed(o)}onFocusChanged(o){return this._isFocused=o.isFocused,!0}onLinesChanged(o){return this._visibleLines.onLinesChanged(o)}onLinesDeleted(o){return this._visibleLines.onLinesDeleted(o)}onLinesInserted(o){return this._visibleLines.onLinesInserted(o)}onScrollChanged(o){return this._visibleLines.onScrollChanged(o)||!0}onTokensChanged(o){return this._visibleLines.onTokensChanged(o)}onZonesChanged(o){return this._visibleLines.onZonesChanged(o)}prepareRender(o){const h=this._dynamicOverlays.filter(A=>A.shouldRender());for(let A=0,Z=h.length;A<Z;A++){const se=h[A];se.prepareRender(o),se.onDidRender()}}render(o){this._viewOverlaysRender(o),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(o){this._visibleLines.renderLines(o.viewportData)}}class Ke{constructor(o,h){this._configuration=o,this._lineHeight=this._configuration.options.get(59),this._dynamicOverlays=h,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(o){this._domNode=(0,le.X)(o)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(o){this._lineHeight=this._configuration.options.get(59)}renderLine(o,h,A,Z){let se="";for(let Se=0,$e=this._dynamicOverlays.length;Se<$e;Se++)se+=this._dynamicOverlays[Se].render(A.startLineNumber,o);return this._renderedContent===se?!1:(this._renderedContent=se,Z.appendASCIIString('<div style="position:absolute;top:'),Z.appendASCIIString(String(h)),Z.appendASCIIString("px;width:100%;height:"),Z.appendASCIIString(String(this._lineHeight)),Z.appendASCIIString('px;">'),Z.appendASCIIString(se),Z.appendASCIIString("</div>"),!0)}layoutLine(o,h){this._domNode&&(this._domNode.setTop(h),this._domNode.setHeight(this._lineHeight))}}class vt extends At{constructor(o){super(o);const A=this._context.configuration.options.get(131);this._contentWidth=A.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(o){const A=this._context.configuration.options.get(131);return this._contentWidth=A.contentWidth,super.onConfigurationChanged(o)||!0}onScrollChanged(o){return super.onScrollChanged(o)||o.scrollWidthChanged}_viewOverlaysRender(o){super._viewOverlaysRender(o),this.domNode.setWidth(Math.max(o.scrollWidth,this._contentWidth))}}class Lt extends At{constructor(o){super(o);const h=this._context.configuration.options,A=h.get(131);this._contentLeft=A.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,Bn.N)(this.domNode,h.get(44))}onConfigurationChanged(o){const h=this._context.configuration.options;(0,Bn.N)(this.domNode,h.get(44));const A=h.get(131);return this._contentLeft=A.contentLeft,super.onConfigurationChanged(o)||!0}onScrollChanged(o){return super.onScrollChanged(o)||o.scrollHeightChanged}_viewOverlaysRender(o){super._viewOverlaysRender(o);const h=Math.min(o.scrollHeight,1e6);this.domNode.setHeight(h),this.domNode.setWidth(this._contentLeft)}}class tn{constructor(o,h){this._coordinateBrand=void 0,this.top=o,this.left=h}}class dn extends ge{constructor(o,h){super(o);this._viewDomNode=h,this._widgets={},this.domNode=(0,le.X)(document.createElement("div")),we.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=(0,le.X)(document.createElement("div")),we.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(o){const h=Object.keys(this._widgets);for(const A of h)this._widgets[A].onConfigurationChanged(o);return!0}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onLineMappingChanged(o){const h=Object.keys(this._widgets);for(const A of h)this._widgets[A].onLineMappingChanged(o);return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return!0}onZonesChanged(o){return!0}addWidget(o){const h=new hn(this._context,this._viewDomNode,o);this._widgets[h.id]=h,h.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(h.domNode):this.domNode.appendChild(h.domNode),this.setShouldRender()}setWidgetPosition(o,h,A){this._widgets[o.getId()].setPosition(h,A),this.setShouldRender()}removeWidget(o){const h=o.getId();if(this._widgets.hasOwnProperty(h)){const A=this._widgets[h];delete this._widgets[h];const Z=A.domNode.domNode;Z.parentNode.removeChild(Z),Z.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(o){return this._widgets.hasOwnProperty(o)?this._widgets[o].suppressMouseDown:!1}onBeforeRender(o){const h=Object.keys(this._widgets);for(const A of h)this._widgets[A].onBeforeRender(o)}prepareRender(o){const h=Object.keys(this._widgets);for(const A of h)this._widgets[A].prepareRender(o)}render(o){const h=Object.keys(this._widgets);for(const A of h)this._widgets[A].render(o)}}class hn{constructor(o,h,A){this._context=o,this._viewDomNode=h,this._actual=A,this.domNode=(0,le.X)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const Z=this._context.configuration.options,se=Z.get(131);this._fixedOverflowWidgets=Z.get(36),this._contentWidth=se.contentWidth,this._contentLeft=se.contentLeft,this._lineHeight=Z.get(59),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(o){const h=this._context.configuration.options;if(this._lineHeight=h.get(59),o.hasChanged(131)){const A=h.get(131);this._contentLeft=A.contentLeft,this._contentWidth=A.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(o){this._setPosition(this._range)}_setPosition(o){if(this._range=o,this._viewRange=null,this._range){const h=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(h.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(h.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(h))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(o,h){this._setPosition(o),this._preference=h,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(o,h,A,Z,se){const Se=o.top,$e=Se,rt=h.top+this._lineHeight,ht=se.viewportHeight-rt,xt=Se-Z,Wt=$e>=Z,qt=rt,on=ht>=Z;let _n=o.left,Mn=h.left;return _n+A>se.scrollLeft+se.viewportWidth&&(_n=se.scrollLeft+se.viewportWidth-A),Mn+A>se.scrollLeft+se.viewportWidth&&(Mn=se.scrollLeft+se.viewportWidth-A),_n<se.scrollLeft&&(_n=se.scrollLeft),Mn<se.scrollLeft&&(Mn=se.scrollLeft),{fitsAbove:Wt,aboveTop:xt,aboveLeft:_n,fitsBelow:on,belowTop:qt,belowLeft:Mn}}_layoutHorizontalSegmentInPage(o,h,A,Z){const se=Math.max(0,h.left-Z),Se=Math.min(h.left+h.width+Z,o.width);let $e=h.left+A-T.DI.scrollX;if($e+Z>Se){const rt=$e-(Se-Z);$e-=rt,A-=rt}if($e<se){const rt=$e-se;$e-=rt,A-=rt}return[A,$e]}_layoutBoxInPage(o,h,A,Z,se){const Se=o.top-Z,$e=h.top+this._lineHeight,rt=T.i(this._viewDomNode.domNode),ht=rt.top+Se-T.DI.scrollY,xt=rt.top+$e-T.DI.scrollY,Wt=T.D6(document.body),[qt,on]=this._layoutHorizontalSegmentInPage(Wt,rt,o.left-se.scrollLeft+this._contentLeft,A),[_n,Mn]=this._layoutHorizontalSegmentInPage(Wt,rt,h.left-se.scrollLeft+this._contentLeft,A),$n=22,vi=22,Ii=ht>=$n,Di=xt+Z<=Wt.height-vi;return this._fixedOverflowWidgets?{fitsAbove:Ii,aboveTop:Math.max(ht,$n),aboveLeft:on,fitsBelow:Di,belowTop:xt,belowLeft:Mn}:{fitsAbove:Ii,aboveTop:Se,aboveLeft:qt,fitsBelow:Di,belowTop:$e,belowLeft:_n}}_prepareRenderWidgetAtExactPositionOverflowing(o){return new tn(o.top,o.left+this._contentLeft)}_getTopAndBottomLeft(o){if(!this._viewRange)return[null,null];const h=o.linesVisibleRangesForRange(this._viewRange,!1);if(!h||h.length===0)return[null,null];let A=h[0],Z=h[0];for(const Wt of h)Wt.lineNumber<A.lineNumber&&(A=Wt),Wt.lineNumber>Z.lineNumber&&(Z=Wt);let se=1073741824;for(const Wt of A.ranges)Wt.left<se&&(se=Wt.left);let Se=1073741824;for(const Wt of Z.ranges)Wt.left<Se&&(Se=Wt.left);const $e=o.getVerticalOffsetForLineNumber(A.lineNumber)-o.scrollTop,rt=new tn($e,se),ht=o.getVerticalOffsetForLineNumber(Z.lineNumber)-o.scrollTop,xt=new tn(ht,Se);return[rt,xt]}_prepareRenderWidget(o){if(!this._preference||this._preference.length===0)return null;const[h,A]=this._getTopAndBottomLeft(o);if(!h||!A)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let se=null;if(typeof this._actual.beforeRender=="function"&&(se=Wn(this._actual.beforeRender,this._actual)),se)this._cachedDomNodeOffsetWidth=se.width,this._cachedDomNodeOffsetHeight=se.height;else{const Se=this.domNode.domNode;this._cachedDomNodeOffsetWidth=Se.offsetWidth,this._cachedDomNodeOffsetHeight=Se.offsetHeight}}let Z;this.allowEditorOverflow?Z=this._layoutBoxInPage(h,A,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,o):Z=this._layoutBoxInViewport(h,A,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,o);for(let se=1;se<=2;se++)for(const Se of this._preference)if(Se===1){if(!Z)return null;if(se===2||Z.fitsAbove)return{coordinate:new tn(Z.aboveTop,Z.aboveLeft),position:1}}else if(Se===2){if(!Z)return null;if(se===2||Z.fitsBelow)return{coordinate:new tn(Z.belowTop,Z.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(h),position:0}:{coordinate:h,position:0};return null}onBeforeRender(o){!this._viewRange||!this._preference||this._viewRange.endLineNumber<o.startLineNumber||this._viewRange.startLineNumber>o.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(o){this._renderData=this._prepareRenderWidget(o)}render(o){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&Wn(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+o.scrollTop-o.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&Wn(this._actual.afterRender,this._actual,this._renderData.position)}}function Wn(Ut,o,...h){try{return Ut.call(o,...h)}catch(A){return null}}class Gn extends Jt{constructor(o){super();this._context=o;const h=this._context.configuration.options,A=h.get(131);this._lineHeight=h.get(59),this._renderLineHighlight=h.get(85),this._renderLineHighlightOnlyWhenFocus=h.get(86),this._contentLeft=A.contentLeft,this._contentWidth=A.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new X.Y(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let o=!1;const h=this._selections.map(Z=>Z.positionLineNumber);h.sort((Z,se)=>Z-se),D.fS(this._cursorLineNumbers,h)||(this._cursorLineNumbers=h,o=!0);const A=this._selections.every(Z=>Z.isEmpty());return this._selectionIsEmpty!==A&&(this._selectionIsEmpty=A,o=!0),o}onThemeChanged(o){return this._readFromSelections()}onConfigurationChanged(o){const h=this._context.configuration.options,A=h.get(131);return this._lineHeight=h.get(59),this._renderLineHighlight=h.get(85),this._renderLineHighlightOnlyWhenFocus=h.get(86),this._contentLeft=A.contentLeft,this._contentWidth=A.contentWidth,!0}onCursorStateChanged(o){return this._selections=o.selections,this._readFromSelections()}onFlushed(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return o.scrollWidthChanged||o.scrollTopChanged}onZonesChanged(o){return!0}onFocusChanged(o){return this._renderLineHighlightOnlyWhenFocus?(this._focused=o.isFocused,!0):!1}prepareRender(o){if(!this._shouldRenderThis()){this._renderData=null;return}const h=this._renderOne(o),A=o.visibleRange.startLineNumber,Z=o.visibleRange.endLineNumber,se=this._cursorLineNumbers.length;let Se=0;const $e=[];for(let rt=A;rt<=Z;rt++){const ht=rt-A;for(;Se<se&&this._cursorLineNumbers[Se]<rt;)Se++;Se<se&&this._cursorLineNumbers[Se]===rt?$e[ht]=h:$e[ht]=""}this._renderData=$e}render(o,h){if(!this._renderData)return"";const A=h-o;return A>=this._renderData.length?"":this._renderData[A]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class wi extends Gn{_renderOne(o){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(o.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class Ci extends Gn{_renderOne(o){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(En.Kh);if(h&&(o.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${h}; }`),o.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${h}; border: none; }`)),!h||h.isTransparent()||Ut.defines(En.Mm)){const A=Ut.getColor(En.Mm);A&&(o.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${A}; }`),o.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${A}; }`),Ut.type==="hc"&&(o.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),o.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class Xi extends Jt{constructor(o){super();this._context=o;const h=this._context.configuration.options;this._lineHeight=h.get(59),this._typicalHalfwidthCharacterWidth=h.get(44).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(o){const h=this._context.configuration.options;return this._lineHeight=h.get(59),this._typicalHalfwidthCharacterWidth=h.get(44).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return o.scrollTopChanged||o.scrollWidthChanged}onZonesChanged(o){return!0}prepareRender(o){const h=o.getDecorationsInViewport();let A=[],Z=0;for(let rt=0,ht=h.length;rt<ht;rt++){const xt=h[rt];xt.options.className&&(A[Z++]=xt)}A=A.sort((rt,ht)=>{if(rt.options.zIndex<ht.options.zIndex)return-1;if(rt.options.zIndex>ht.options.zIndex)return 1;const xt=rt.options.className,Wt=ht.options.className;return xt<Wt?-1:xt>Wt?1:Ve.e.compareRangesUsingStarts(rt.range,ht.range)});const se=o.visibleRange.startLineNumber,Se=o.visibleRange.endLineNumber,$e=[];for(let rt=se;rt<=Se;rt++){const ht=rt-se;$e[ht]=""}this._renderWholeLineDecorations(o,A,$e),this._renderNormalDecorations(o,A,$e),this._renderResult=$e}_renderWholeLineDecorations(o,h,A){const Z=String(this._lineHeight),se=o.visibleRange.startLineNumber,Se=o.visibleRange.endLineNumber;for(let $e=0,rt=h.length;$e<rt;$e++){const ht=h[$e];if(!ht.options.isWholeLine)continue;const xt='<div class="cdr '+ht.options.className+'" style="left:0;width:100%;height:'+Z+'px;"></div>',Wt=Math.max(ht.range.startLineNumber,se),qt=Math.min(ht.range.endLineNumber,Se);for(let on=Wt;on<=qt;on++){const _n=on-se;A[_n]+=xt}}}_renderNormalDecorations(o,h,A){const Z=String(this._lineHeight),se=o.visibleRange.startLineNumber;let Se=null,$e=!1,rt=null;for(let ht=0,xt=h.length;ht<xt;ht++){const Wt=h[ht];if(Wt.options.isWholeLine)continue;const qt=Wt.options.className,on=Boolean(Wt.options.showIfCollapsed);let _n=Wt.range;if(on&&_n.endColumn===1&&_n.endLineNumber!==_n.startLineNumber&&(_n=new Ve.e(_n.startLineNumber,_n.startColumn,_n.endLineNumber-1,this._context.viewModel.getLineMaxColumn(_n.endLineNumber-1))),Se===qt&&$e===on&&Ve.e.areIntersectingOrTouching(rt,_n)){rt=Ve.e.plusRange(rt,_n);continue}Se!==null&&this._renderNormalDecoration(o,rt,Se,$e,Z,se,A),Se=qt,$e=on,rt=_n}Se!==null&&this._renderNormalDecoration(o,rt,Se,$e,Z,se,A)}_renderNormalDecoration(o,h,A,Z,se,Se,$e){const rt=o.linesVisibleRangesForRange(h,A==="findMatch");if(!!rt)for(let ht=0,xt=rt.length;ht<xt;ht++){const Wt=rt[ht];if(Wt.outsideRenderedLine)continue;const qt=Wt.lineNumber-Se;if(Z&&Wt.ranges.length===1){const on=Wt.ranges[0];if(on.width<this._typicalHalfwidthCharacterWidth){const _n=Math.round(on.left+on.width/2),Mn=Math.max(0,Math.round(_n-this._typicalHalfwidthCharacterWidth/2));Wt.ranges[0]=new Oe(Mn,this._typicalHalfwidthCharacterWidth)}}for(let on=0,_n=Wt.ranges.length;on<_n;on++){const Mn=Wt.ranges[on],$n='<div class="cdr '+A+'" style="left:'+String(Mn.left)+"px;width:"+String(Mn.width)+"px;height:"+se+'px;"></div>';$e[qt]+=$n}}}render(o,h){if(!this._renderResult)return"";const A=h-o;return A<0||A>=this._renderResult.length?"":this._renderResult[A]}}var Nr=a(9802),yr=a(73910);class Xr extends ge{constructor(o,h,A,Z){super(o);const se=this._context.configuration.options,Se=se.get(92),$e=se.get(67),rt=se.get(34),ht=se.get(95),xt={listenOnDomNode:A.domNode,className:"editor-scrollable "+(0,$t.m6)(o.theme.type),useShadows:!1,lazyRender:!0,vertical:Se.vertical,horizontal:Se.horizontal,verticalHasArrows:Se.verticalHasArrows,horizontalHasArrows:Se.horizontalHasArrows,verticalScrollbarSize:Se.verticalScrollbarSize,verticalSliderSize:Se.verticalSliderSize,horizontalScrollbarSize:Se.horizontalScrollbarSize,horizontalSliderSize:Se.horizontalSliderSize,handleMouseWheel:Se.handleMouseWheel,alwaysConsumeMouseWheel:Se.alwaysConsumeMouseWheel,arrowSize:Se.arrowSize,mouseWheelScrollSensitivity:$e,fastScrollSensitivity:rt,scrollPredominantAxis:ht,scrollByPage:Se.scrollByPage};this.scrollbar=this._register(new Nr.$Z(h.domNode,xt,this._context.viewLayout.getScrollable())),we.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=(0,le.X)(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const Wt=(qt,on,_n)=>{const Mn={};if(on){const $n=qt.scrollTop;$n&&(Mn.scrollTop=this._context.viewLayout.getCurrentScrollTop()+$n,qt.scrollTop=0)}if(_n){const $n=qt.scrollLeft;$n&&(Mn.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+$n,qt.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(Mn,1)};this._register(T.nm(A.domNode,"scroll",qt=>Wt(A.domNode,!0,!0))),this._register(T.nm(h.domNode,"scroll",qt=>Wt(h.domNode,!0,!1))),this._register(T.nm(Z.domNode,"scroll",qt=>Wt(Z.domNode,!0,!1))),this._register(T.nm(this.scrollbarDomNode.domNode,"scroll",qt=>Wt(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const o=this._context.configuration.options,h=o.get(131);this.scrollbarDomNode.setLeft(h.contentLeft),o.get(65).side==="right"?this.scrollbarDomNode.setWidth(h.contentWidth+h.minimap.minimapWidth):this.scrollbarDomNode.setWidth(h.contentWidth),this.scrollbarDomNode.setHeight(h.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(o){this.scrollbar.delegateVerticalScrollbarMouseDown(o)}onConfigurationChanged(o){if(o.hasChanged(92)||o.hasChanged(67)||o.hasChanged(34)){const h=this._context.configuration.options,A=h.get(92),Z=h.get(67),se=h.get(34),Se=h.get(95),$e={vertical:A.vertical,horizontal:A.horizontal,verticalScrollbarSize:A.verticalScrollbarSize,horizontalScrollbarSize:A.horizontalScrollbarSize,scrollByPage:A.scrollByPage,handleMouseWheel:A.handleMouseWheel,mouseWheelScrollSensitivity:Z,fastScrollSensitivity:se,scrollPredominantAxis:Se};this.scrollbar.updateOptions($e)}return o.hasChanged(131)&&this._setLayout(),!0}onScrollChanged(o){return!0}onThemeChanged(o){return this.scrollbar.updateClassName("editor-scrollable "+(0,$t.m6)(this._context.theme.type)),!0}prepareRender(o){}render(o){this.scrollbar.renderNow()}}(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(yr._wn);h&&o.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${h} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${h} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${h} 6px 6px 6px -6px inset;
			}
		`);const A=Ut.getColor(yr.etL);A&&o.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${A};
			}
		`);const Z=Ut.getColor(yr.ABB);Z&&o.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${Z};
			}
		`);const se=Ut.getColor(yr.ynu);se&&o.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${se};
			}
		`)});class Jr{constructor(o,h,A){this._decorationToRenderBrand=void 0,this.startLineNumber=+o,this.endLineNumber=+h,this.className=String(A)}}class $o extends Jt{_render(o,h,A){const Z=[];for(let $e=o;$e<=h;$e++){const rt=$e-o;Z[rt]=[]}if(A.length===0)return Z;A.sort(($e,rt)=>$e.className===rt.className?$e.startLineNumber===rt.startLineNumber?$e.endLineNumber-rt.endLineNumber:$e.startLineNumber-rt.startLineNumber:$e.className<rt.className?-1:1);let se=null,Se=0;for(let $e=0,rt=A.length;$e<rt;$e++){const ht=A[$e],xt=ht.className;let Wt=Math.max(ht.startLineNumber,o)-o;const qt=Math.min(ht.endLineNumber,h)-o;se===xt?(Wt=Math.max(Se+1,Wt),Se=Math.max(Se,qt)):(se=xt,Se=qt);for(let on=Wt;on<=Se;on++)Z[on].push(se)}return Z}}class ms extends $o{constructor(o){super();this._context=o;const h=this._context.configuration.options,A=h.get(131);this._lineHeight=h.get(59),this._glyphMargin=h.get(50),this._glyphMarginLeft=A.glyphMarginLeft,this._glyphMarginWidth=A.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(o){const h=this._context.configuration.options,A=h.get(131);return this._lineHeight=h.get(59),this._glyphMargin=h.get(50),this._glyphMarginLeft=A.glyphMarginLeft,this._glyphMarginWidth=A.glyphMarginWidth,!0}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return o.scrollTopChanged}onZonesChanged(o){return!0}_getDecorations(o){const h=o.getDecorationsInViewport(),A=[];let Z=0;for(let se=0,Se=h.length;se<Se;se++){const $e=h[se],rt=$e.options.glyphMarginClassName;rt&&(A[Z++]=new Jr($e.range.startLineNumber,$e.range.endLineNumber,rt))}return A}prepareRender(o){if(!this._glyphMargin){this._renderResult=null;return}const h=o.visibleRange.startLineNumber,A=o.visibleRange.endLineNumber,Z=this._render(h,A,this._getDecorations(o)),se=this._lineHeight.toString(),Se=this._glyphMarginLeft.toString(),$e=this._glyphMarginWidth.toString(),rt='" style="left:'+Se+"px;width:"+$e+"px;height:"+se+'px;"></div>',ht=[];for(let xt=h;xt<=A;xt++){const Wt=xt-h,qt=Z[Wt];qt.length===0?ht[Wt]="":ht[Wt]='<div class="cgmr codicon '+qt.join(" ")+rt}this._renderResult=ht}render(o,h){if(!this._renderResult)return"";const A=h-o;return A<0||A>=this._renderResult.length?"":this._renderResult[A]}}var cs=a(98401),nr=a(97671),tr=a(65094);class Br extends Jt{constructor(o){super();this._context=o,this._primaryPosition=null;const h=this._context.configuration.options,A=h.get(132),Z=h.get(44);this._lineHeight=h.get(59),this._spaceWidth=Z.spaceWidth,this._maxIndentLeft=A.wrappingColumn===-1?-1:A.wrappingColumn*Z.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=h.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(o){const h=this._context.configuration.options,A=h.get(132),Z=h.get(44);return this._lineHeight=h.get(59),this._spaceWidth=Z.spaceWidth,this._maxIndentLeft=A.wrappingColumn===-1?-1:A.wrappingColumn*Z.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=h.get(13),!0}onCursorStateChanged(o){var h;const Z=o.selections[0].getPosition();return((h=this._primaryPosition)===null||h===void 0?void 0:h.equals(Z))?!1:(this._primaryPosition=Z,!0)}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return o.scrollTopChanged}onZonesChanged(o){return!0}onLanguageConfigurationChanged(o){return!0}prepareRender(o){var h,A,Z,se;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const Se=o.visibleRange.startLineNumber,$e=o.visibleRange.endLineNumber,rt=o.scrollWidth,ht=this._lineHeight,xt=this._primaryPosition,Wt=this.getGuidesByLine(Se,$e,xt),qt=[];for(let on=Se;on<=$e;on++){const _n=on-Se,Mn=Wt[_n];let $n="";const vi=(A=(h=o.visibleRangeForPosition(new Re.L(on,1)))===null||h===void 0?void 0:h.left)!==null&&A!==void 0?A:0;for(const Ii of Mn){const Di=vi+(Ii.visibleColumn-1)*this._spaceWidth;if(Di>rt||this._maxIndentLeft>0&&Di>this._maxIndentLeft)break;const mr=Ii.horizontalLine?Ii.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",or=Ii.horizontalLine?((se=(Z=o.visibleRangeForPosition(new Re.L(on,Ii.horizontalLine.endColumn)))===null||Z===void 0?void 0:Z.left)!==null&&se!==void 0?se:Di+this._spaceWidth)-Di:this._spaceWidth;$n+=`<div class="core-guide ${Ii.className} ${mr}" style="left:${Di}px;height:${ht}px;width:${or}px"></div>`}qt[_n]=$n}this._renderResult=qt}getGuidesByLine(o,h,A){const Z=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(o,h,A,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?tr.s6.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?tr.s6.EnabledForActive:tr.s6.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,se=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(o,h):null;let Se=0,$e=0,rt=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&A){const Wt=this._context.viewModel.getActiveIndentGuide(A.lineNumber,o,h);Se=Wt.startLineNumber,$e=Wt.endLineNumber,rt=Wt.indent}const{indentSize:ht}=this._context.viewModel.model.getOptions(),xt=[];for(let Wt=o;Wt<=h;Wt++){const qt=new Array;xt.push(qt);const on=Z?Z[Wt-o]:[],_n=new D.H9(on),Mn=se?se[Wt-o]:[];for(let $n=1;$n<=Mn;$n++){const vi=($n-1)*ht+1,Ii=on.length===0&&Se<=Wt&&Wt<=$e&&$n===rt;qt.push(..._n.takeWhile(mr=>mr.visibleColumn<vi)||[]);const Di=_n.peek();(!Di||Di.visibleColumn!==vi||Di.horizontalLine)&&qt.push(new tr.UO(vi,Ii?"core-guide-indent-active":"core-guide-indent",null))}qt.push(..._n.takeWhile($n=>!0)||[])}return xt}render(o,h){if(!this._renderResult)return"";const A=h-o;return A<0||A>=this._renderResult.length?"":this._renderResult[A]}}function Mr(Ut){if(!(Ut&&Ut.isTransparent()))return Ut}(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(En.tR);h&&o.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${h} inset; }`);const A=Ut.getColor(En.Ym)||h;A&&o.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${A} inset; }`);const Z=[{bracketColor:En.zJ,guideColor:En.oV,guideColorActive:En.Qb},{bracketColor:En.Vs,guideColor:En.m$,guideColorActive:En.m3},{bracketColor:En.CE,guideColor:En.DS,guideColorActive:En.To},{bracketColor:En.UP,guideColor:En.lS,guideColorActive:En.L7},{bracketColor:En.r0,guideColor:En.Jn,guideColorActive:En.HV},{bracketColor:En.m1,guideColor:En.YF,guideColorActive:En.f9}],se=new nr.W,Se=Z.map($e=>{var rt,ht;const xt=Ut.getColor($e.bracketColor),Wt=Ut.getColor($e.guideColor),qt=Ut.getColor($e.guideColorActive),on=Mr((rt=Mr(Wt))!==null&&rt!==void 0?rt:xt==null?void 0:xt.transparent(.3)),_n=Mr((ht=Mr(qt))!==null&&ht!==void 0?ht:xt);if(!(!on||!_n))return{guideColor:on,guideColorActive:_n}}).filter(cs.$K);if(Se.length>0){for(let $e=0;$e<30;$e++){const rt=Se[$e%Se.length];o.addRule(`.monaco-editor .${se.getInlineClassNameOfLevel($e).replace(/ /g,".")} { --guide-color: ${rt.guideColor}; --guide-color-active: ${rt.guideColorActive}; }`)}o.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),o.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),o.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),o.addRule(`.monaco-editor .vertical.${se.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),o.addRule(`.monaco-editor .horizontal-top.${se.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),o.addRule(`.monaco-editor .horizontal-bottom.${se.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class so{constructor(){this._currentVisibleRange=new Ve.e(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(o){this._currentVisibleRange=o}}class jr{constructor(o,h,A,Z,se,Se,$e){this.minimalReveal=o,this.lineNumber=h,this.startColumn=A,this.endColumn=Z,this.startScrollTop=se,this.stopScrollTop=Se,this.scrollType=$e,this.type="range",this.minLineNumber=h,this.maxLineNumber=h}}class No{constructor(o,h,A,Z,se){this.minimalReveal=o,this.selections=h,this.startScrollTop=A,this.stopScrollTop=Z,this.scrollType=se,this.type="selections";let Se=h[0].startLineNumber,$e=h[0].endLineNumber;for(let rt=1,ht=h.length;rt<ht;rt++){const xt=h[rt];Se=Math.min(Se,xt.startLineNumber),$e=Math.max($e,xt.endLineNumber)}this.minLineNumber=Se,this.maxLineNumber=$e}}class ko extends ge{constructor(o,h){super(o);this._linesContent=h,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new bt(this),this.domNode=this._visibleLines.domNode;const A=this._context.configuration,Z=this._context.configuration.options,se=Z.get(44),Se=Z.get(132),$e=Z.get(131);this._lineHeight=Z.get(59),this._typicalHalfwidthCharacterWidth=se.typicalHalfwidthCharacterWidth,this._isViewportWrapping=Se.isViewportWrapping,this._revealHorizontalRightPadding=Z.get(89),this._horizontalScrollbarHeight=$e.horizontalScrollbarHeight,this._cursorSurroundingLines=Z.get(25),this._cursorSurroundingLinesStyle=Z.get(26),this._canUseLayerHinting=!Z.get(28),this._viewLineOptions=new nt(A,this._context.theme.type),we.write(this.domNode,7),this.domNode.setClassName(`view-lines ${oi.S}`),(0,Bn.N)(this.domNode,se),this._maxLineWidth=0,this._asyncUpdateLineWidths=new ye.pY(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new ye.pY(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new so,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new _t(this._viewLineOptions)}onConfigurationChanged(o){this._visibleLines.onConfigurationChanged(o),o.hasChanged(132)&&(this._maxLineWidth=0);const h=this._context.configuration.options,A=h.get(44),Z=h.get(132),se=h.get(131);return this._lineHeight=h.get(59),this._typicalHalfwidthCharacterWidth=A.typicalHalfwidthCharacterWidth,this._isViewportWrapping=Z.isViewportWrapping,this._revealHorizontalRightPadding=h.get(89),this._horizontalScrollbarHeight=se.horizontalScrollbarHeight,this._cursorSurroundingLines=h.get(25),this._cursorSurroundingLinesStyle=h.get(26),this._canUseLayerHinting=!h.get(28),(0,Bn.N)(this.domNode,A),this._onOptionsMaybeChanged(),o.hasChanged(131)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const o=this._context.configuration,h=new nt(o,this._context.theme.type);if(!this._viewLineOptions.equals(h)){this._viewLineOptions=h;const A=this._visibleLines.getStartLineNumber(),Z=this._visibleLines.getEndLineNumber();for(let se=A;se<=Z;se++)this._visibleLines.getVisibleLine(se).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(o){const h=this._visibleLines.getStartLineNumber(),A=this._visibleLines.getEndLineNumber();let Z=!1;for(let se=h;se<=A;se++)Z=this._visibleLines.getVisibleLine(se).onSelectionChanged()||Z;return Z}onDecorationsChanged(o){{const h=this._visibleLines.getStartLineNumber(),A=this._visibleLines.getEndLineNumber();for(let Z=h;Z<=A;Z++)this._visibleLines.getVisibleLine(Z).onDecorationsChanged()}return!0}onFlushed(o){const h=this._visibleLines.onFlushed(o);return this._maxLineWidth=0,h}onLinesChanged(o){return this._visibleLines.onLinesChanged(o)}onLinesDeleted(o){return this._visibleLines.onLinesDeleted(o)}onLinesInserted(o){return this._visibleLines.onLinesInserted(o)}onRevealRangeRequest(o){const h=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),o.source,o.minimalReveal,o.range,o.selections,o.verticalType);if(h===-1)return!1;let A=this._context.viewLayout.validateScrollPosition({scrollTop:h});o.revealHorizontal?o.range&&o.range.startLineNumber!==o.range.endLineNumber?A={scrollTop:A.scrollTop,scrollLeft:0}:o.range?this._horizontalRevealRequest=new jr(o.minimalReveal,o.range.startLineNumber,o.range.startColumn,o.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),A.scrollTop,o.scrollType):o.selections&&o.selections.length>0&&(this._horizontalRevealRequest=new No(o.minimalReveal,o.selections,this._context.viewLayout.getCurrentScrollTop(),A.scrollTop,o.scrollType)):this._horizontalRevealRequest=null;const se=Math.abs(this._context.viewLayout.getCurrentScrollTop()-A.scrollTop)<=this._lineHeight?1:o.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(A,se),!0}onScrollChanged(o){if(this._horizontalRevealRequest&&o.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&o.scrollTopChanged){const h=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),A=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(o.scrollTop<h||o.scrollTop>A)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(o.scrollWidth),this._visibleLines.onScrollChanged(o)||!0}onTokensChanged(o){return this._visibleLines.onTokensChanged(o)}onZonesChanged(o){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(o)}onThemeChanged(o){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(o,h){const A=this._getViewLineDomNode(o);if(A===null)return null;const Z=this._getLineNumberFor(A);if(Z===-1||Z<1||Z>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(Z)===1)return new Re.L(Z,1);const se=this._visibleLines.getStartLineNumber(),Se=this._visibleLines.getEndLineNumber();if(Z<se||Z>Se)return null;let $e=this._visibleLines.getVisibleLine(Z).getColumnOfNodeOffset(Z,o,h);const rt=this._context.viewModel.getLineMinColumn(Z);return $e<rt&&($e=rt),new Re.L(Z,$e)}_getViewLineDomNode(o){for(;o&&o.nodeType===1;){if(o.className===_t.CLASS_NAME)return o;o=o.parentElement}return null}_getLineNumberFor(o){const h=this._visibleLines.getStartLineNumber(),A=this._visibleLines.getEndLineNumber();for(let Z=h;Z<=A;Z++){const se=this._visibleLines.getVisibleLine(Z);if(o===se.getDomNode())return Z}return-1}getLineWidth(o){const h=this._visibleLines.getStartLineNumber(),A=this._visibleLines.getEndLineNumber();return o<h||o>A?-1:this._visibleLines.getVisibleLine(o).getWidth()}linesVisibleRangesForRange(o,h){if(this.shouldRender())return null;const A=o.endLineNumber,Z=Ve.e.intersectRanges(o,this._lastRenderedData.getCurrentVisibleRange());if(!Z)return null;let se=[],Se=0;const $e=new Ge(this.domNode.domNode,this._textRangeRestingSpot);let rt=0;h&&(rt=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Re.L(Z.startLineNumber,1)).lineNumber);const ht=this._visibleLines.getStartLineNumber(),xt=this._visibleLines.getEndLineNumber();for(let Wt=Z.startLineNumber;Wt<=Z.endLineNumber;Wt++){if(Wt<ht||Wt>xt)continue;const qt=Wt===Z.startLineNumber?Z.startColumn:1,on=Wt===Z.endLineNumber?Z.endColumn:this._context.viewModel.getLineMaxColumn(Wt),_n=this._visibleLines.getVisibleLine(Wt).getVisibleRangesForRange(Wt,qt,on,$e);if(!!_n){if(h&&Wt<A){const Mn=rt;rt=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Re.L(Wt+1,1)).lineNumber,Mn!==rt&&(_n.ranges[_n.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}se[Se++]=new Pe(_n.outsideRenderedLine,Wt,Oe.from(_n.ranges))}}return Se===0?null:se}_visibleRangesForLineRange(o,h,A){return this.shouldRender()||o<this._visibleLines.getStartLineNumber()||o>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(o).getVisibleRangesForRange(o,h,A,new Ge(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(o){const h=this._visibleRangesForLineRange(o.lineNumber,o.column,o.column);return h?new Je(h.outsideRenderedLine,h.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(o){const h=this._visibleLines.getStartLineNumber(),A=this._visibleLines.getEndLineNumber();let Z=1,se=!0;for(let Se=h;Se<=A;Se++){const $e=this._visibleLines.getVisibleLine(Se);if(o&&!$e.getWidthIsFast()){se=!1;continue}Z=Math.max(Z,$e.getWidth())}return se&&h===1&&A===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(Z),se}_checkMonospaceFontAssumptions(){let o=-1,h=-1;const A=this._visibleLines.getStartLineNumber(),Z=this._visibleLines.getEndLineNumber();for(let se=A;se<=Z;se++){const Se=this._visibleLines.getVisibleLine(se);if(Se.needsMonospaceFontCheck()){const $e=Se.getWidth();$e>h&&(h=$e,o=se)}}if(o!==-1&&!this._visibleLines.getVisibleLine(o).monospaceAssumptionsAreValid())for(let se=A;se<=Z;se++)this._visibleLines.getVisibleLine(se).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(o){if(this._visibleLines.renderLines(o),this._lastRenderedData.setCurrentVisibleRange(o.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const A=this._horizontalRevealRequest;if(o.startLineNumber<=A.minLineNumber&&A.maxLineNumber<=o.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const Z=this._computeScrollLeftToReveal(A);Z&&(this._isViewportWrapping||this._ensureMaxLineWidth(Z.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:Z.scrollLeft},A.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),C.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const A=this._visibleLines.getStartLineNumber(),Z=this._visibleLines.getEndLineNumber();for(let se=A;se<=Z;se++)if(this._visibleLines.getVisibleLine(se).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const h=this._context.viewLayout.getCurrentScrollTop()-o.bigNumbersDelta;this._linesContent.setTop(-h),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(o){const h=Math.ceil(o);this._maxLineWidth<h&&(this._maxLineWidth=h,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(o,h,A,Z,se,Se){const $e=o.top,rt=o.height,ht=$e+rt;let xt,Wt,qt;if(se&&se.length>0){let Mn=se[0].startLineNumber,$n=se[0].endLineNumber;for(let vi=1,Ii=se.length;vi<Ii;vi++){const Di=se[vi];Mn=Math.min(Mn,Di.startLineNumber),$n=Math.max($n,Di.endLineNumber)}xt=!1,Wt=this._context.viewLayout.getVerticalOffsetForLineNumber(Mn),qt=this._context.viewLayout.getVerticalOffsetForLineNumber($n)+this._lineHeight}else if(Z)xt=!0,Wt=this._context.viewLayout.getVerticalOffsetForLineNumber(Z.startLineNumber),qt=this._context.viewLayout.getVerticalOffsetForLineNumber(Z.endLineNumber)+this._lineHeight;else return-1;if((h==="mouse"||A)&&this._cursorSurroundingLinesStyle==="default")A||(Wt-=this._lineHeight);else{const Mn=Math.min(rt/this._lineHeight/2,this._cursorSurroundingLines);Wt-=Mn*this._lineHeight,qt+=Math.max(0,Mn-1)*this._lineHeight}(Se===0||Se===4)&&(qt+=A?this._horizontalScrollbarHeight:this._lineHeight);let _n;if(qt-Wt>rt){if(!xt)return-1;_n=Wt}else if(Se===5||Se===6)if(Se===6&&$e<=Wt&&qt<=ht)_n=$e;else{const Mn=Math.max(5*this._lineHeight,rt*.2),$n=Wt-Mn,vi=qt-rt;_n=Math.max(vi,$n)}else if(Se===1||Se===2)if(Se===2&&$e<=Wt&&qt<=ht)_n=$e;else{const Mn=(Wt+qt)/2;_n=Math.max(0,Mn-rt/2)}else _n=this._computeMinimumScrolling($e,ht,Wt,qt,Se===3,Se===4);return _n}_computeScrollLeftToReveal(o){const h=this._context.viewLayout.getCurrentViewport(),A=h.left,Z=A+h.width;let se=1073741824,Se=0;if(o.type==="range"){const rt=this._visibleRangesForLineRange(o.lineNumber,o.startColumn,o.endColumn);if(!rt)return null;for(const ht of rt.ranges)se=Math.min(se,Math.round(ht.left)),Se=Math.max(Se,Math.round(ht.left+ht.width))}else for(const rt of o.selections){if(rt.startLineNumber!==rt.endLineNumber)return null;const ht=this._visibleRangesForLineRange(rt.startLineNumber,rt.startColumn,rt.endColumn);if(!ht)return null;for(const xt of ht.ranges)se=Math.min(se,Math.round(xt.left)),Se=Math.max(Se,Math.round(xt.left+xt.width))}return o.minimalReveal||(se=Math.max(0,se-ko.HORIZONTAL_EXTRA_PX),Se+=this._revealHorizontalRightPadding),o.type==="selections"&&Se-se>h.width?null:{scrollLeft:this._computeMinimumScrolling(A,Z,se,Se),maxHorizontalOffset:Se}}_computeMinimumScrolling(o,h,A,Z,se,Se){o=o|0,h=h|0,A=A|0,Z=Z|0,se=!!se,Se=!!Se;const $e=h-o;if(Z-A<$e){if(se)return A;if(Se)return Math.max(0,Z-$e);if(A<o)return A;if(Z>h)return Math.max(0,Z-$e)}else return A;return o}}ko.HORIZONTAL_EXTRA_PX=30;class li extends $o{constructor(o){super();this._context=o;const A=this._context.configuration.options.get(131);this._decorationsLeft=A.decorationsLeft,this._decorationsWidth=A.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(o){const A=this._context.configuration.options.get(131);return this._decorationsLeft=A.decorationsLeft,this._decorationsWidth=A.decorationsWidth,!0}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return o.scrollTopChanged}onZonesChanged(o){return!0}_getDecorations(o){const h=o.getDecorationsInViewport(),A=[];let Z=0;for(let se=0,Se=h.length;se<Se;se++){const $e=h[se],rt=$e.options.linesDecorationsClassName;rt&&(A[Z++]=new Jr($e.range.startLineNumber,$e.range.endLineNumber,rt));const ht=$e.options.firstLineDecorationClassName;ht&&(A[Z++]=new Jr($e.range.startLineNumber,$e.range.startLineNumber,ht))}return A}prepareRender(o){const h=o.visibleRange.startLineNumber,A=o.visibleRange.endLineNumber,Z=this._render(h,A,this._getDecorations(o)),se=this._decorationsLeft.toString(),Se=this._decorationsWidth.toString(),$e='" style="left:'+se+"px;width:"+Se+'px;"></div>',rt=[];for(let ht=h;ht<=A;ht++){const xt=ht-h,Wt=Z[xt];let qt="";for(let on=0,_n=Wt.length;on<_n;on++)qt+='<div class="cldr '+Wt[on]+$e;rt[xt]=qt}this._renderResult=rt}render(o,h){return this._renderResult?this._renderResult[h-o]:""}}class tt extends $o{constructor(o){super();this._context=o,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(o){return!0}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return o.scrollTopChanged}onZonesChanged(o){return!0}_getDecorations(o){const h=o.getDecorationsInViewport(),A=[];let Z=0;for(let se=0,Se=h.length;se<Se;se++){const $e=h[se],rt=$e.options.marginClassName;rt&&(A[Z++]=new Jr($e.range.startLineNumber,$e.range.endLineNumber,rt))}return A}prepareRender(o){const h=o.visibleRange.startLineNumber,A=o.visibleRange.endLineNumber,Z=this._render(h,A,this._getDecorations(o)),se=[];for(let Se=h;Se<=A;Se++){const $e=Se-h,rt=Z[$e];let ht="";for(let xt=0,Wt=rt.length;xt<Wt;xt++)ht+='<div class="cmdr '+rt[xt]+'" style=""></div>';se[$e]=ht}this._renderResult=se}render(o,h){return this._renderResult?this._renderResult[h-o]:""}}var St=a(57974);class Pt{constructor(o,h,A,Z){this._rgba8Brand=void 0,this.r=Pt._clamp(o),this.g=Pt._clamp(h),this.b=Pt._clamp(A),this.a=Pt._clamp(Z)}equals(o){return this.r===o.r&&this.g===o.g&&this.b===o.b&&this.a===o.a}static _clamp(o){return o<0?0:o>255?255:o|0}}Pt.Empty=new Pt(0,0,0,0);class Yt extends x.JT{constructor(){super();this._onDidChange=new F.Q5,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(On.RW.onDidChange(o=>{o.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=(0,x.dk)(new Yt)),this._INSTANCE}_updateColorMap(){const o=On.RW.getColorMap();if(!o){this._colors=[Pt.Empty],this._backgroundIsLight=!0;return}this._colors=[Pt.Empty];for(let A=1;A<o.length;A++){const Z=o[A].rgba;this._colors[A]=new Pt(Z.r,Z.g,Z.b,Math.round(Z.a*255))}const h=o[2].getRelativeLuminance();this._backgroundIsLight=h>=.5,this._onDidChange.fire(void 0)}getColor(o){return(o<1||o>=this._colors.length)&&(o=2),this._colors[o]}backgroundIsLight(){return this._backgroundIsLight}}Yt._INSTANCE=null;var en=a(1118);const Ct=(()=>{const Ut=[];for(let o=32;o<=126;o++)Ut.push(o);return Ut.push(65533),Ut})(),J=(Ut,o)=>(Ut-=32,Ut<0||Ut>96?o<=2?(Ut+96)%96:96-1:Ut);var Ae=a(85427);class ot{constructor(o,h){this.scale=h,this._minimapCharRendererBrand=void 0,this.charDataNormal=ot.soften(o,12/15),this.charDataLight=ot.soften(o,50/60)}static soften(o,h){const A=new Uint8ClampedArray(o.length);for(let Z=0,se=o.length;Z<se;Z++)A[Z]=(0,Ae.K)(o[Z]*h);return A}renderChar(o,h,A,Z,se,Se,$e,rt,ht,xt,Wt){const qt=1*this.scale,on=2*this.scale,_n=Wt?1:on;if(h+qt>o.width||A+_n>o.height){console.warn("bad render request outside image data");return}const Mn=xt?this.charDataLight:this.charDataNormal,$n=J(Z,ht),vi=o.width*4,Ii=$e.r,Di=$e.g,mr=$e.b,or=se.r-Ii,Tr=se.g-Di,Er=se.b-mr,cr=Math.max(Se,rt),Or=o.data;let Lo=$n*qt*on,Kr=A*vi+h*4;for(let us=0;us<_n;us++){let hs=Kr;for(let Es=0;Es<qt;Es++){const go=Mn[Lo++]/255*(Se/255);Or[hs++]=Ii+or*go,Or[hs++]=Di+Tr*go,Or[hs++]=mr+Er*go,Or[hs++]=cr}Kr+=vi}}blockRenderChar(o,h,A,Z,se,Se,$e,rt){const ht=1*this.scale,xt=2*this.scale,Wt=rt?1:xt;if(h+ht>o.width||A+Wt>o.height){console.warn("bad render request outside image data");return}const qt=o.width*4,on=.5*(se/255),_n=Se.r,Mn=Se.g,$n=Se.b,vi=Z.r-_n,Ii=Z.g-Mn,Di=Z.b-$n,mr=_n+vi*on,or=Mn+Ii*on,Tr=$n+Di*on,Er=Math.max(se,$e),cr=o.data;let Or=A*qt+h*4;for(let Lo=0;Lo<Wt;Lo++){let Kr=Or;for(let us=0;us<ht;us++)cr[Kr++]=mr,cr[Kr++]=or,cr[Kr++]=Tr,cr[Kr++]=Er;Or+=qt}}}var Ee=a(88289);const m={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,A:10,B:11,C:12,D:13,E:14,F:15},V=Ut=>{const o=new Uint8ClampedArray(Ut.length/2);for(let h=0;h<Ut.length;h+=2)o[h>>1]=m[Ut[h]]<<4|m[Ut[h+1]]&15;return o},G={1:(0,Ee.I)(()=>V("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:(0,Ee.I)(()=>V("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class ce{static create(o,h){if(this.lastCreated&&o===this.lastCreated.scale&&h===this.lastFontFamily)return this.lastCreated;let A;return G[o]?A=new ot(G[o](),o):A=ce.createFromSampleData(ce.createSampleData(h).data,o),this.lastFontFamily=h,this.lastCreated=A,A}static createSampleData(o){const h=document.createElement("canvas"),A=h.getContext("2d");h.style.height=`${16}px`,h.height=16,h.width=96*10,h.style.width=96*10+"px",A.fillStyle="#ffffff",A.font=`bold ${16}px ${o}`,A.textBaseline="middle";let Z=0;for(const se of Ct)A.fillText(String.fromCharCode(se),Z,16/2),Z+=10;return A.getImageData(0,0,96*10,16)}static createFromSampleData(o,h){const A=16*10*4*96;if(o.length!==A)throw new Error("Unexpected source in MinimapCharRenderer");const Z=ce._downsample(o,h);return new ot(Z,h)}static _downsampleChar(o,h,A,Z,se){const Se=1*se,$e=2*se;let rt=Z,ht=0;for(let xt=0;xt<$e;xt++){const Wt=xt/$e*16,qt=(xt+1)/$e*16;for(let on=0;on<Se;on++){const _n=on/Se*10,Mn=(on+1)/Se*10;let $n=0,vi=0;for(let Di=Wt;Di<qt;Di++){const mr=h+Math.floor(Di)*3840,or=1-(Di-Math.floor(Di));for(let Tr=_n;Tr<Mn;Tr++){const Er=1-(Tr-Math.floor(Tr)),cr=mr+Math.floor(Tr)*4,Or=Er*or;vi+=Or,$n+=o[cr]*o[cr+3]/255*Or}}const Ii=$n/vi;ht=Math.max(ht,Ii),A[rt++]=(0,Ae.K)(Ii)}}return ht}static _downsample(o,h){const A=2*h*1*h,Z=A*96,se=new Uint8ClampedArray(Z);let Se=0,$e=0,rt=0;for(let ht=0;ht<96;ht++)rt=Math.max(rt,this._downsampleChar(o,$e,se,Se,h)),Se+=A,$e+=10*4;if(rt>0){const ht=255/rt;for(let xt=0;xt<Z;xt++)se[xt]*=ht}return se}}var ve=a(84973);const De=140,ct=2;class lt{constructor(o,h,A){const Z=o.options,se=Z.get(129),Se=Z.get(131),$e=Se.minimap,rt=Z.get(44),ht=Z.get(65);this.renderMinimap=$e.renderMinimap,this.size=ht.size,this.minimapHeightIsEditorHeight=$e.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=Z.get(94),this.showSlider=ht.showSlider,this.pixelRatio=se,this.typicalHalfwidthCharacterWidth=rt.typicalHalfwidthCharacterWidth,this.lineHeight=Z.get(59),this.minimapLeft=$e.minimapLeft,this.minimapWidth=$e.minimapWidth,this.minimapHeight=Se.height,this.canvasInnerWidth=$e.minimapCanvasInnerWidth,this.canvasInnerHeight=$e.minimapCanvasInnerHeight,this.canvasOuterWidth=$e.minimapCanvasOuterWidth,this.canvasOuterHeight=$e.minimapCanvasOuterHeight,this.isSampling=$e.minimapIsSampling,this.editorHeight=Se.height,this.fontScale=$e.minimapScale,this.minimapLineHeight=$e.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=(0,Ee.I)(()=>ce.create(this.fontScale,rt.fontFamily)),this.defaultBackgroundColor=A.getColor(2),this.backgroundColor=lt._getMinimapBackground(h,this.defaultBackgroundColor),this.foregroundAlpha=lt._getMinimapForegroundOpacity(h)}static _getMinimapBackground(o,h){const A=o.getColor(yr.kVY);return A?new Pt(A.rgba.r,A.rgba.g,A.rgba.b,Math.round(255*A.rgba.a)):h}static _getMinimapForegroundOpacity(o){const h=o.getColor(yr.Itd);return h?Pt._clamp(Math.round(255*h.rgba.a)):255}equals(o){return this.renderMinimap===o.renderMinimap&&this.size===o.size&&this.minimapHeightIsEditorHeight===o.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===o.scrollBeyondLastLine&&this.showSlider===o.showSlider&&this.pixelRatio===o.pixelRatio&&this.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&this.lineHeight===o.lineHeight&&this.minimapLeft===o.minimapLeft&&this.minimapWidth===o.minimapWidth&&this.minimapHeight===o.minimapHeight&&this.canvasInnerWidth===o.canvasInnerWidth&&this.canvasInnerHeight===o.canvasInnerHeight&&this.canvasOuterWidth===o.canvasOuterWidth&&this.canvasOuterHeight===o.canvasOuterHeight&&this.isSampling===o.isSampling&&this.editorHeight===o.editorHeight&&this.fontScale===o.fontScale&&this.minimapLineHeight===o.minimapLineHeight&&this.minimapCharWidth===o.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(o.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(o.backgroundColor)&&this.foregroundAlpha===o.foregroundAlpha}}class Nt{constructor(o,h,A,Z,se,Se,$e,rt){this.scrollTop=o,this.scrollHeight=h,this.sliderNeeded=A,this._computedSliderRatio=Z,this.sliderTop=se,this.sliderHeight=Se,this.startLineNumber=$e,this.endLineNumber=rt}getDesiredScrollTopFromDelta(o){return Math.round(this.scrollTop+o/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(o){return Math.round((o-this.sliderHeight/2)/this._computedSliderRatio)}static create(o,h,A,Z,se,Se,$e,rt,ht,xt,Wt){const qt=o.pixelRatio,on=o.minimapLineHeight,_n=Math.floor(o.canvasInnerHeight/on),Mn=o.lineHeight;if(o.minimapHeightIsEditorHeight){const or=rt*o.lineHeight+(o.scrollBeyondLastLine?se-o.lineHeight:0),Tr=Math.max(1,Math.floor(se*se/or)),Er=Math.max(0,o.minimapHeight-Tr),cr=Er/(xt-se),Or=ht*cr,Lo=Er>0,Kr=Math.floor(o.canvasInnerHeight/o.minimapLineHeight);return new Nt(ht,xt,Lo,cr,Or,Tr,1,Math.min($e,Kr))}let $n;if(Se&&A!==$e){const or=A-h+1;$n=Math.floor(or*on/qt)}else{const or=se/Mn;$n=Math.floor(or*on/qt)}let vi;o.scrollBeyondLastLine?vi=($e-1)*on/qt:vi=Math.max(0,$e*on/qt-$n),vi=Math.min(o.minimapHeight-$n,vi);const Ii=vi/(xt-se),Di=ht*Ii;let mr=0;if(o.scrollBeyondLastLine&&(mr=se/Mn-1),_n>=$e+mr){const or=1,Tr=$e,Er=vi>0;return new Nt(ht,xt,Er,Ii,Di,$n,or,Tr)}else{let or=Math.max(1,Math.floor(h-Di*qt/on));Wt&&Wt.scrollHeight===xt&&(Wt.scrollTop>ht&&(or=Math.min(or,Wt.startLineNumber)),Wt.scrollTop<ht&&(or=Math.max(or,Wt.startLineNumber)));const Tr=Math.min($e,or+_n-1),Er=(ht-Z)/Mn,cr=(h-or+Er)*on/qt;return new Nt(ht,xt,!0,Ii,cr,$n,or,Tr)}}}class It{constructor(o){this.dy=o}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}It.INVALID=new It(-1);class Ft{constructor(o,h,A){this.renderedLayout=o,this._imageData=h,this._renderedLines=new kn(()=>It.INVALID),this._renderedLines._set(o.startLineNumber,A)}linesEquals(o){if(!this.scrollEquals(o))return!1;const A=this._renderedLines._get().lines;for(let Z=0,se=A.length;Z<se;Z++)if(A[Z].dy===-1)return!1;return!0}scrollEquals(o){return this.renderedLayout.startLineNumber===o.startLineNumber&&this.renderedLayout.endLineNumber===o.endLineNumber}_get(){const o=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:o.rendLineNumberStart,lines:o.lines}}onLinesChanged(o,h){return this._renderedLines.onLinesChanged(o,h)}onLinesDeleted(o,h){this._renderedLines.onLinesDeleted(o,h)}onLinesInserted(o,h){this._renderedLines.onLinesInserted(o,h)}onTokensChanged(o){return this._renderedLines.onTokensChanged(o)}}class jt{constructor(o,h,A,Z){this._backgroundFillData=jt._createBackgroundFillData(h,A,Z),this._buffers=[o.createImageData(h,A),o.createImageData(h,A)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const o=this._buffers[this._lastUsedBuffer];return o.data.set(this._backgroundFillData),o}static _createBackgroundFillData(o,h,A){const Z=A.r,se=A.g,Se=A.b,$e=A.a,rt=new Uint8ClampedArray(o*h*4);let ht=0;for(let xt=0;xt<h;xt++)for(let Wt=0;Wt<o;Wt++)rt[ht]=Z,rt[ht+1]=se,rt[ht+2]=Se,rt[ht+3]=$e,ht+=4;return rt}}class bn{constructor(o,h){this.samplingRatio=o,this.minimapLines=h}static compute(o,h,A){if(o.renderMinimap===0||!o.isSampling)return[null,[]];const Z=o.pixelRatio,se=o.lineHeight,Se=o.scrollBeyondLastLine,{minimapLineCount:$e}=b.gk.computeContainedMinimapLineCount({viewLineCount:h,scrollBeyondLastLine:Se,height:o.editorHeight,lineHeight:se,pixelRatio:Z}),rt=h/$e,ht=rt/2;if(!A||A.minimapLines.length===0){const Di=[];if(Di[0]=1,$e>1){for(let mr=0,or=$e-1;mr<or;mr++)Di[mr]=Math.round(mr*rt+ht);Di[$e-1]=h}return[new bn(rt,Di),[]]}const xt=A.minimapLines,Wt=xt.length,qt=[];let on=0,_n=0,Mn=1;const $n=10;let vi=[],Ii=null;for(let Di=0;Di<$e;Di++){const mr=Math.max(Mn,Math.round(Di*rt)),or=Math.max(mr,Math.round((Di+1)*rt));for(;on<Wt&&xt[on]<mr;){if(vi.length<$n){const Er=on+1+_n;Ii&&Ii.type==="deleted"&&Ii._oldIndex===on-1?Ii.deleteToLineNumber++:(Ii={type:"deleted",_oldIndex:on,deleteFromLineNumber:Er,deleteToLineNumber:Er},vi.push(Ii)),_n--}on++}let Tr;if(on<Wt&&xt[on]<=or)Tr=xt[on],on++;else if(Di===0?Tr=1:Di+1===$e?Tr=h:Tr=Math.round(Di*rt+ht),vi.length<$n){const Er=on+1+_n;Ii&&Ii.type==="inserted"&&Ii._i===Di-1?Ii.insertToLineNumber++:(Ii={type:"inserted",_i:Di,insertFromLineNumber:Er,insertToLineNumber:Er},vi.push(Ii)),_n++}qt[Di]=Tr,Mn=Tr}if(vi.length<$n)for(;on<Wt;){const Di=on+1+_n;Ii&&Ii.type==="deleted"&&Ii._oldIndex===on-1?Ii.deleteToLineNumber++:(Ii={type:"deleted",_oldIndex:on,deleteFromLineNumber:Di,deleteToLineNumber:Di},vi.push(Ii)),_n--,on++}else vi=[{type:"flush"}];return[new bn(rt,qt),vi]}modelLineToMinimapLine(o){return Math.min(this.minimapLines.length,Math.max(1,Math.round(o/this.samplingRatio)))}modelLineRangeToMinimapLineRange(o,h){let A=this.modelLineToMinimapLine(o)-1;for(;A>0&&this.minimapLines[A-1]>=o;)A--;let Z=this.modelLineToMinimapLine(h)-1;for(;Z+1<this.minimapLines.length&&this.minimapLines[Z+1]<=h;)Z++;if(A===Z){const se=this.minimapLines[A];if(se<o||se>h)return null}return[A+1,Z+1]}decorationLineRangeToMinimapLineRange(o,h){let A=this.modelLineToMinimapLine(o),Z=this.modelLineToMinimapLine(h);return o!==h&&Z===A&&(Z===this.minimapLines.length?A>1&&A--:Z++),[A,Z]}onLinesDeleted(o){const h=o.toLineNumber-o.fromLineNumber+1;let A=this.minimapLines.length,Z=0;for(let se=this.minimapLines.length-1;se>=0&&!(this.minimapLines[se]<o.fromLineNumber);se--)this.minimapLines[se]<=o.toLineNumber?(this.minimapLines[se]=Math.max(1,o.fromLineNumber-1),A=Math.min(A,se),Z=Math.max(Z,se)):this.minimapLines[se]-=h;return[A,Z]}onLinesInserted(o){const h=o.toLineNumber-o.fromLineNumber+1;for(let A=this.minimapLines.length-1;A>=0&&!(this.minimapLines[A]<o.fromLineNumber);A--)this.minimapLines[A]+=h}}class Zn extends ge{constructor(o){super(o);this.tokensColorTracker=Yt.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new lt(this._context.configuration,this._context.theme,this.tokensColorTracker);const[h]=bn.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=h,this._shouldCheckSampling=!1,this._actual=new Xn(o.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const o=new lt(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(o)?!1:(this.options=o,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(o){return this._onOptionsMaybeChanged()}onCursorStateChanged(o){return this._selections=o.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(o){return o.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(o){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(o){if(this._samplingState){const h=this._samplingState.modelLineRangeToMinimapLineRange(o.fromLineNumber,o.toLineNumber);return h?this._actual.onLinesChanged(h[0],h[1]):!1}else return this._actual.onLinesChanged(o.fromLineNumber,o.toLineNumber)}onLinesDeleted(o){if(this._samplingState){const[h,A]=this._samplingState.onLinesDeleted(o);return h<=A&&this._actual.onLinesChanged(h+1,A+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(o.fromLineNumber,o.toLineNumber)}onLinesInserted(o){return this._samplingState?(this._samplingState.onLinesInserted(o),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(o.fromLineNumber,o.toLineNumber)}onScrollChanged(o){return this._actual.onScrollChanged()}onThemeChanged(o){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(o){if(this._samplingState){const h=[];for(const A of o.ranges){const Z=this._samplingState.modelLineRangeToMinimapLineRange(A.fromLineNumber,A.toLineNumber);Z&&h.push({fromLineNumber:Z[0],toLineNumber:Z[1]})}return h.length?this._actual.onTokensChanged(h):!1}else return this._actual.onTokensChanged(o.ranges)}onTokensColorsChanged(o){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(o){return this._actual.onZonesChanged()}prepareRender(o){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(o){let h=o.visibleRange.startLineNumber,A=o.visibleRange.endLineNumber;this._samplingState&&(h=this._samplingState.modelLineToMinimapLine(h),A=this._samplingState.modelLineToMinimapLine(A));const Z={viewportContainsWhitespaceGaps:o.viewportData.whitespaceViewportData.length>0,scrollWidth:o.scrollWidth,scrollHeight:o.scrollHeight,viewportStartLineNumber:h,viewportEndLineNumber:A,viewportStartLineNumberVerticalOffset:o.getVerticalOffsetForLineNumber(h),scrollTop:o.scrollTop,scrollLeft:o.scrollLeft,viewportWidth:o.viewportWidth,viewportHeight:o.viewportHeight};this._actual.render(Z)}_recreateLineSampling(){this._minimapSelections=null;const o=Boolean(this._samplingState),[h,A]=bn.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=h,o&&this._samplingState)for(const Z of A)switch(Z.type){case"deleted":this._actual.onLinesDeleted(Z.deleteFromLineNumber,Z.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(Z.insertFromLineNumber,Z.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(o){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[o-1]):this._context.viewModel.getLineContent(o)}getLineMaxColumn(o){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[o-1]):this._context.viewModel.getLineMaxColumn(o)}getMinimapLinesRenderingData(o,h,A){if(this._samplingState){const Z=[];for(let se=0,Se=h-o+1;se<Se;se++)A[se]?Z[se]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[o+se-1]):Z[se]=null;return Z}return this._context.viewModel.getMinimapLinesRenderingData(o,h,A).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const o of this._selections){const[h,A]=this._samplingState.decorationLineRangeToMinimapLineRange(o.startLineNumber,o.endLineNumber);this._minimapSelections.push(new X.Y(h,o.startColumn,A,o.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(o,h){let A;if(this._samplingState){const se=this._samplingState.minimapLines[o-1],Se=this._samplingState.minimapLines[h-1];A=new Ve.e(se,1,Se,this._context.viewModel.getLineMaxColumn(Se))}else A=new Ve.e(o,1,h,this._context.viewModel.getLineMaxColumn(h));const Z=this._context.viewModel.getDecorationsInViewport(A);if(this._samplingState){const se=[];for(const Se of Z){if(!Se.options.minimap)continue;const $e=Se.range,rt=this._samplingState.modelLineToMinimapLine($e.startLineNumber),ht=this._samplingState.modelLineToMinimapLine($e.endLineNumber);se.push(new en.$l(new Ve.e(rt,$e.startColumn,ht,$e.endColumn),Se.options))}return se}return Z}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(o){this._samplingState&&(o=this._samplingState.minimapLines[o-1]),this._context.viewModel.revealRange("mouse",!1,new Ve.e(o,1,o,1),1,0)}setScrollTop(o){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:o},1)}}class Xn extends x.JT{constructor(o,h){super();this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=o,this._model=h,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(yr.ov3),this._domNode=(0,le.X)(document.createElement("div")),we.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=(0,le.X)(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=(0,le.X)(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=(0,le.X)(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=(0,le.X)(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=(0,le.X)(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=T.mu(this._domNode.domNode,"mousedown",A=>{if(A.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(A.leftButton&&this._lastRenderData){const ht=T.i(this._slider.domNode),xt=ht.top+ht.height/2;this._startSliderDragging(A.buttons,A.posx,xt,A.posy,this._lastRenderData.renderedLayout)}return}const se=this._model.options.minimapLineHeight,Se=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*A.browserEvent.offsetY;let rt=Math.floor(Se/se)+this._lastRenderData.renderedLayout.startLineNumber;rt=Math.min(rt,this._model.getLineCount()),this._model.revealLineNumber(rt)}),this._sliderMouseMoveMonitor=new St.Z,this._sliderMouseDownListener=T.mu(this._slider.domNode,"mousedown",A=>{A.preventDefault(),A.stopPropagation(),A.leftButton&&this._lastRenderData&&this._startSliderDragging(A.buttons,A.posx,A.posy,A.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=oe.o.addTarget(this._domNode.domNode),this._sliderTouchStartListener=T.nm(this._domNode.domNode,oe.t.Start,A=>{A.preventDefault(),A.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(A))},{passive:!1}),this._sliderTouchMoveListener=T.nm(this._domNode.domNode,oe.t.Change,A=>{A.preventDefault(),A.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(A)},{passive:!1}),this._sliderTouchEndListener=T.mu(this._domNode.domNode,oe.t.End,A=>{A.preventDefault(),A.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(o,h,A,Z,se){this._slider.toggleClassName("active",!0);const Se=($e,rt)=>{const ht=Math.abs(rt-h);if(C.ED&&ht>De){this._model.setScrollTop(se.scrollTop);return}const xt=$e-A;this._model.setScrollTop(se.getDesiredScrollTopFromDelta(xt))};Z!==A&&Se(Z,h),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,o,St.e,$e=>Se($e.posy,$e.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(o){const h=this._domNode.domNode.getBoundingClientRect().top,A=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(o.pageY-h);this._model.setScrollTop(A)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new jt(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(o,h){return this._lastRenderData?this._lastRenderData.onLinesChanged(o,h):!1}onLinesDeleted(o,h){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(o,h),!0}onLinesInserted(o,h){return this._lastRenderData&&this._lastRenderData.onLinesInserted(o,h),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(yr.ov3),this._renderDecorations=!0,!0}onTokensChanged(o){return this._lastRenderData?this._lastRenderData.onTokensChanged(o):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(o){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}o.scrollLeft+o.viewportWidth>=o.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const A=Nt.create(this._model.options,o.viewportStartLineNumber,o.viewportEndLineNumber,o.viewportStartLineNumberVerticalOffset,o.viewportHeight,o.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),o.scrollTop,o.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(A.sliderNeeded?"block":"none"),this._slider.setTop(A.sliderTop),this._slider.setHeight(A.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(A.sliderHeight),this.renderDecorations(A),this._lastRenderData=this.renderLines(A)}renderDecorations(o){if(this._renderDecorations){this._renderDecorations=!1;const h=this._model.getSelections();h.sort(Ve.e.compareRangesUsingStarts);const A=this._model.getMinimapDecorationsInViewport(o.startLineNumber,o.endLineNumber);A.sort((qt,on)=>(qt.options.zIndex||0)-(on.options.zIndex||0));const{canvasInnerWidth:Z,canvasInnerHeight:se}=this._model.options,Se=this._model.options.minimapLineHeight,$e=this._model.options.minimapCharWidth,rt=this._model.getOptions().tabSize,ht=this._decorationsCanvas.domNode.getContext("2d");ht.clearRect(0,0,Z,se);const xt=new gi(o.startLineNumber,o.endLineNumber,!1);this._renderSelectionLineHighlights(ht,h,xt,o,Se),this._renderDecorationsLineHighlights(ht,A,xt,o,Se);const Wt=new gi(o.startLineNumber,o.endLineNumber,null);this._renderSelectionsHighlights(ht,h,Wt,o,Se,rt,$e,Z),this._renderDecorationsHighlights(ht,A,Wt,o,Se,rt,$e,Z)}}_renderSelectionLineHighlights(o,h,A,Z,se){if(!this._selectionColor||this._selectionColor.isTransparent())return;o.fillStyle=this._selectionColor.transparent(.5).toString();let Se=0,$e=0;for(const rt of h){const ht=Math.max(Z.startLineNumber,rt.startLineNumber),xt=Math.min(Z.endLineNumber,rt.endLineNumber);if(ht>xt)continue;for(let on=ht;on<=xt;on++)A.set(on,!0);const Wt=(ht-Z.startLineNumber)*se,qt=(xt-Z.startLineNumber)*se+se;$e>=Wt||($e>Se&&o.fillRect(b.y0,Se,o.canvas.width,$e-Se),Se=Wt),$e=qt}$e>Se&&o.fillRect(b.y0,Se,o.canvas.width,$e-Se)}_renderDecorationsLineHighlights(o,h,A,Z,se){const Se=new Map;for(let $e=h.length-1;$e>=0;$e--){const rt=h[$e],ht=rt.options.minimap;if(!ht||ht.position!==ve.F5.Inline)continue;const xt=Math.max(Z.startLineNumber,rt.range.startLineNumber),Wt=Math.min(Z.endLineNumber,rt.range.endLineNumber);if(xt>Wt)continue;const qt=ht.getColor(this._theme.value);if(!qt||qt.isTransparent())continue;let on=Se.get(qt.toString());on||(on=qt.transparent(.5).toString(),Se.set(qt.toString(),on)),o.fillStyle=on;for(let _n=xt;_n<=Wt;_n++){if(A.has(_n))continue;A.set(_n,!0);const Mn=(xt-Z.startLineNumber)*se;o.fillRect(b.y0,Mn,o.canvas.width,se)}}}_renderSelectionsHighlights(o,h,A,Z,se,Se,$e,rt){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const ht of h){const xt=Math.max(Z.startLineNumber,ht.startLineNumber),Wt=Math.min(Z.endLineNumber,ht.endLineNumber);if(!(xt>Wt))for(let qt=xt;qt<=Wt;qt++)this.renderDecorationOnLine(o,A,ht,this._selectionColor,Z,qt,se,se,Se,$e,rt)}}_renderDecorationsHighlights(o,h,A,Z,se,Se,$e,rt){for(const ht of h){const xt=ht.options.minimap;if(!xt)continue;const Wt=Math.max(Z.startLineNumber,ht.range.startLineNumber),qt=Math.min(Z.endLineNumber,ht.range.endLineNumber);if(Wt>qt)continue;const on=xt.getColor(this._theme.value);if(!(!on||on.isTransparent()))for(let _n=Wt;_n<=qt;_n++)switch(xt.position){case ve.F5.Inline:this.renderDecorationOnLine(o,A,ht.range,on,Z,_n,se,se,Se,$e,rt);continue;case ve.F5.Gutter:{const Mn=(_n-Z.startLineNumber)*se,$n=2;this.renderDecoration(o,on,$n,Mn,ct,se);continue}}}}renderDecorationOnLine(o,h,A,Z,se,Se,$e,rt,ht,xt,Wt){const qt=(Se-se.startLineNumber)*rt;if(qt+$e<0||qt>this._model.options.canvasInnerHeight)return;const{startLineNumber:on,endLineNumber:_n}=A,Mn=on===Se?A.startColumn:1,$n=_n===Se?A.endColumn:this._model.getLineMaxColumn(Se),vi=this.getXOffsetForPosition(h,Se,Mn,ht,xt,Wt),Ii=this.getXOffsetForPosition(h,Se,$n,ht,xt,Wt);this.renderDecoration(o,Z,vi,qt,Ii-vi,$e)}getXOffsetForPosition(o,h,A,Z,se,Se){if(A===1)return b.y0;if((A-1)*se>=Se)return Se;let rt=o.get(h);if(!rt){const ht=this._model.getLineContent(h);rt=[b.y0];let xt=b.y0;for(let Wt=1;Wt<ht.length+1;Wt++){const qt=ht.charCodeAt(Wt-1),on=qt===9?Z*se:Sn.K7(qt)?2*se:se,_n=xt+on;if(_n>=Se){rt[Wt]=Se;break}rt[Wt]=_n,xt=_n}o.set(h,rt)}return A-1<rt.length?rt[A-1]:Se}renderDecoration(o,h,A,Z,se,Se){o.fillStyle=h&&h.toString()||"",o.fillRect(A,Z,se,Se)}renderLines(o){const h=o.startLineNumber,A=o.endLineNumber,Z=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(o)){const go=this._lastRenderData._get();return new Ft(o,go.imageData,go.lines)}const se=this._getBuffer();if(!se)return null;const[Se,$e,rt]=Xn._renderUntouchedLines(se,h,A,Z,this._lastRenderData),ht=this._model.getMinimapLinesRenderingData(h,A,rt),xt=this._model.getOptions().tabSize,Wt=this._model.options.defaultBackgroundColor,qt=this._model.options.backgroundColor,on=this._model.options.foregroundAlpha,_n=this._model.tokensColorTracker,Mn=_n.backgroundIsLight(),$n=this._model.options.renderMinimap,vi=this._model.options.charRenderer(),Ii=this._model.options.fontScale,Di=this._model.options.minimapCharWidth,or=($n===1?2:2+1)*Ii,Tr=Z>or?Math.floor((Z-or)/2):0,Er=qt.a/255,cr=new Pt(Math.round((qt.r-Wt.r)*Er+Wt.r),Math.round((qt.g-Wt.g)*Er+Wt.g),Math.round((qt.b-Wt.b)*Er+Wt.b),255);let Or=0;const Lo=[];for(let go=0,Ks=A-h+1;go<Ks;go++)rt[go]&&Xn._renderLine(se,cr,qt.a,Mn,$n,Di,_n,on,vi,Or,Tr,xt,ht[go],Ii,Z),Lo[go]=new It(Or),Or+=Z;const Kr=Se===-1?0:Se,hs=($e===-1?se.height:$e)-Kr;return this._canvas.domNode.getContext("2d").putImageData(se,0,0,0,Kr,se.width,hs),new Ft(o,se,Lo)}static _renderUntouchedLines(o,h,A,Z,se){const Se=[];if(!se){for(let cr=0,Or=A-h+1;cr<Or;cr++)Se[cr]=!0;return[-1,-1,Se]}const $e=se._get(),rt=$e.imageData.data,ht=$e.rendLineNumberStart,xt=$e.lines,Wt=xt.length,qt=o.width,on=o.data,_n=(A-h+1)*Z*qt*4;let Mn=-1,$n=-1,vi=-1,Ii=-1,Di=-1,mr=-1,or=0;for(let cr=h;cr<=A;cr++){const Or=cr-h,Lo=cr-ht,Kr=Lo>=0&&Lo<Wt?xt[Lo].dy:-1;if(Kr===-1){Se[Or]=!0,or+=Z;continue}const us=Kr*qt*4,hs=(Kr+Z)*qt*4,Es=or*qt*4,go=(or+Z)*qt*4;Ii===us&&mr===Es?(Ii=hs,mr=go):(vi!==-1&&(on.set(rt.subarray(vi,Ii),Di),Mn===-1&&vi===0&&vi===Di&&(Mn=Ii),$n===-1&&Ii===_n&&vi===Di&&($n=vi)),vi=us,Ii=hs,Di=Es,mr=go),Se[Or]=!1,or+=Z}vi!==-1&&(on.set(rt.subarray(vi,Ii),Di),Mn===-1&&vi===0&&vi===Di&&(Mn=Ii),$n===-1&&Ii===_n&&vi===Di&&($n=vi));const Tr=Mn===-1?-1:Mn/(qt*4),Er=$n===-1?-1:$n/(qt*4);return[Tr,Er,Se]}static _renderLine(o,h,A,Z,se,Se,$e,rt,ht,xt,Wt,qt,on,_n,Mn){const $n=on.content,vi=on.tokens,Ii=o.width-Se,Di=Mn===1;let mr=b.y0,or=0,Tr=0;for(let Er=0,cr=vi.getCount();Er<cr;Er++){const Or=vi.getEndOffset(Er),Lo=vi.getForeground(Er),Kr=$e.getColor(Lo);for(;or<Or;or++){if(mr>Ii)return;const us=$n.charCodeAt(or);if(us===9){const hs=qt-(or+Tr)%qt;Tr+=hs-1,mr+=hs*Se}else if(us===32)mr+=Se;else{const hs=Sn.K7(us)?2:1;for(let Es=0;Es<hs;Es++)if(se===2?ht.blockRenderChar(o,mr,xt+Wt,Kr,rt,h,A,Di):ht.renderChar(o,mr,xt+Wt,us,Kr,rt,h,A,_n,Z,Di),mr+=Se,mr>Ii)return}}}}}class gi{constructor(o,h,A){this._startLineNumber=o,this._endLineNumber=h,this._defaultValue=A,this._values=[];for(let Z=0,se=this._endLineNumber-this._startLineNumber+1;Z<se;Z++)this._values[Z]=A}has(o){return this.get(o)!==this._defaultValue}set(o,h){o<this._startLineNumber||o>this._endLineNumber||(this._values[o-this._startLineNumber]=h)}get(o){return o<this._startLineNumber||o>this._endLineNumber?this._defaultValue:this._values[o-this._startLineNumber]}}(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(yr.CA6);h&&o.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${h}; }`);const A=Ut.getColor(yr.Xy4);A&&o.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${A}; }`);const Z=Ut.getColor(yr.brw);Z&&o.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${Z}; }`);const se=Ut.getColor(yr._wn);se&&o.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${se} -6px 0 6px -6px inset; }`)});class ji extends ge{constructor(o){super(o);const A=this._context.configuration.options.get(131);this._widgets={},this._verticalScrollbarWidth=A.verticalScrollbarWidth,this._minimapWidth=A.minimap.minimapWidth,this._horizontalScrollbarHeight=A.horizontalScrollbarHeight,this._editorHeight=A.height,this._editorWidth=A.width,this._domNode=(0,le.X)(document.createElement("div")),we.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(o){const A=this._context.configuration.options.get(131);return this._verticalScrollbarWidth=A.verticalScrollbarWidth,this._minimapWidth=A.minimap.minimapWidth,this._horizontalScrollbarHeight=A.horizontalScrollbarHeight,this._editorHeight=A.height,this._editorWidth=A.width,!0}addWidget(o){const h=(0,le.X)(o.getDomNode());this._widgets[o.getId()]={widget:o,preference:null,domNode:h},h.setPosition("absolute"),h.setAttribute("widgetId",o.getId()),this._domNode.appendChild(h),this.setShouldRender()}setWidgetPosition(o,h){const A=this._widgets[o.getId()];return A.preference===h?!1:(A.preference=h,this.setShouldRender(),!0)}removeWidget(o){const h=o.getId();if(this._widgets.hasOwnProperty(h)){const Z=this._widgets[h].domNode.domNode;delete this._widgets[h],Z.parentNode.removeChild(Z),this.setShouldRender()}}_renderWidget(o){const h=o.domNode;if(o.preference===null){h.unsetTop();return}if(o.preference===0)h.setTop(0),h.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(o.preference===1){const A=h.domNode.clientHeight;h.setTop(this._editorHeight-A-2*this._horizontalScrollbarHeight),h.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else o.preference===2&&(h.setTop(0),h.domNode.style.right="50%")}prepareRender(o){}render(o){this._domNode.setWidth(this._editorWidth);const h=Object.keys(this._widgets);for(let A=0,Z=h.length;A<Z;A++){const se=h[A];this._renderWidget(this._widgets[se])}}}class vr{constructor(o,h){const A=o.options;this.lineHeight=A.get(59),this.pixelRatio=A.get(129),this.overviewRulerLanes=A.get(74),this.renderBorder=A.get(73);const Z=h.getColor(En.zw);this.borderColor=Z?Z.toString():null,this.hideCursor=A.get(52);const se=h.getColor(En.n0);this.cursorColor=se?se.transparent(.7).toString():null,this.themeType=h.type;const Se=A.get(65),$e=Se.enabled,rt=Se.side,ht=$e?h.getColor(En.e_)||On.RW.getDefaultBackground():null;ht===null||rt==="left"?this.backgroundColor=null:this.backgroundColor=Qn.Il.Format.CSS.formatHex(ht);const Wt=A.get(131).overviewRuler;this.top=Wt.top,this.right=Wt.right,this.domWidth=Wt.width,this.domHeight=Wt.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[qt,on]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=qt,this.w=on}_initLanes(o,h,A){const Z=h-o;if(A>=3){const se=Math.floor(Z/3),Se=Math.floor(Z/3),$e=Z-se-Se,rt=o,ht=rt+se,xt=rt+se+$e;return[[0,rt,ht,rt,xt,rt,ht,rt],[0,se,$e,se+$e,Se,se+$e+Se,$e+Se,se+$e+Se]]}else if(A===2){const se=Math.floor(Z/2),Se=Z-se,$e=o,rt=$e+se;return[[0,$e,$e,$e,rt,$e,$e,$e],[0,se,se,se,Se,se+Se,se+Se,se+Se]]}else{const se=o,Se=Z;return[[0,se,se,se,se,se,se,se],[0,Se,Se,Se,Se,Se,Se,Se]]}}equals(o){return this.lineHeight===o.lineHeight&&this.pixelRatio===o.pixelRatio&&this.overviewRulerLanes===o.overviewRulerLanes&&this.renderBorder===o.renderBorder&&this.borderColor===o.borderColor&&this.hideCursor===o.hideCursor&&this.cursorColor===o.cursorColor&&this.themeType===o.themeType&&this.backgroundColor===o.backgroundColor&&this.top===o.top&&this.right===o.right&&this.domWidth===o.domWidth&&this.domHeight===o.domHeight&&this.canvasWidth===o.canvasWidth&&this.canvasHeight===o.canvasHeight}}class Un extends ge{constructor(o){super(o);this._domNode=(0,le.X)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=On.RW.onDidChange(h=>{h.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(o){const h=new vr(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(h)?!1:(this._settings=h,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,o&&this._render(),!0)}onConfigurationChanged(o){return this._updateSettings(!1)}onCursorStateChanged(o){this._cursorPositions=[];for(let h=0,A=o.selections.length;h<A;h++)this._cursorPositions[h]=o.selections[h].getPosition();return this._cursorPositions.sort(Re.L.compare),!0}onDecorationsChanged(o){return!!o.affectsOverviewRuler}onFlushed(o){return!0}onScrollChanged(o){return o.scrollHeightChanged}onZonesChanged(o){return!0}onThemeChanged(o){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(o){}render(o){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const o=this._settings.canvasWidth,h=this._settings.canvasHeight,A=this._settings.lineHeight,Z=this._context.viewLayout,se=this._context.viewLayout.getScrollHeight(),Se=h/se,$e=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),rt=6*this._settings.pixelRatio|0,ht=rt/2|0,xt=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?xt.clearRect(0,0,o,h):(xt.fillStyle=this._settings.backgroundColor,xt.fillRect(0,0,o,h));const Wt=this._settings.x,qt=this._settings.w;$e.sort(en.SQ.cmp);for(const on of $e){const _n=on.color,Mn=on.data;xt.fillStyle=_n;let $n=0,vi=0,Ii=0;for(let Di=0,mr=Mn.length/3;Di<mr;Di++){const or=Mn[3*Di],Tr=Mn[3*Di+1],Er=Mn[3*Di+2];let cr=Z.getVerticalOffsetForLineNumber(Tr)*Se|0,Or=(Z.getVerticalOffsetForLineNumber(Er)+A)*Se|0;if(Or-cr<rt){let Kr=(cr+Or)/2|0;Kr<ht?Kr=ht:Kr+ht>h&&(Kr=h-ht),cr=Kr-ht,Or=Kr+ht}cr>Ii+1||or!==$n?(Di!==0&&xt.fillRect(Wt[$n],vi,qt[$n],Ii-vi),$n=or,vi=cr,Ii=Or):Or>Ii&&(Ii=Or)}xt.fillRect(Wt[$n],vi,qt[$n],Ii-vi)}if(!this._settings.hideCursor&&this._settings.cursorColor){const on=2*this._settings.pixelRatio|0,_n=on/2|0,Mn=this._settings.x[7],$n=this._settings.w[7];xt.fillStyle=this._settings.cursorColor;let vi=-100,Ii=-100;for(let Di=0,mr=this._cursorPositions.length;Di<mr;Di++){const or=this._cursorPositions[Di];let Tr=Z.getVerticalOffsetForLineNumber(or.lineNumber)*Se|0;Tr<_n?Tr=_n:Tr+_n>h&&(Tr=h-_n);const Er=Tr-_n,cr=Er+on;Er>Ii+1?(Di!==0&&xt.fillRect(Mn,vi,$n,Ii-vi),vi=Er,Ii=cr):cr>Ii&&(Ii=cr)}xt.fillRect(Mn,vi,$n,Ii-vi)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(xt.beginPath(),xt.lineWidth=1,xt.strokeStyle=this._settings.borderColor,xt.moveTo(0,0),xt.lineTo(0,h),xt.stroke(),xt.moveTo(0,0),xt.lineTo(o,0),xt.stroke())}}var fn=a(30665);class Vo extends Te{constructor(o,h){super();this._context=o;const A=this._context.configuration.options;this._domNode=(0,le.X)(document.createElement("canvas")),this._domNode.setClassName(h),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new fn.Tj(Z=>this._context.viewLayout.getVerticalOffsetForLineNumber(Z)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(A.get(59)),this._zoneManager.setPixelRatio(A.get(129)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(o){const h=this._context.configuration.options;return o.hasChanged(59)&&(this._zoneManager.setLineHeight(h.get(59)),this._render()),o.hasChanged(129)&&(this._zoneManager.setPixelRatio(h.get(129)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(o){return this._render(),!0}onScrollChanged(o){return o.scrollHeightChanged&&(this._zoneManager.setOuterHeight(o.scrollHeight),this._render()),!0}onZonesChanged(o){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(o){this._domNode.setTop(o.top),this._domNode.setRight(o.right);let h=!1;h=this._zoneManager.setDOMWidth(o.width)||h,h=this._zoneManager.setDOMHeight(o.height)||h,h&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(o){this._zoneManager.setZones(o),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const o=this._zoneManager.getCanvasWidth(),h=this._zoneManager.getCanvasHeight(),A=this._zoneManager.resolveColorZones(),Z=this._zoneManager.getId2Color(),se=this._domNode.domNode.getContext("2d");return se.clearRect(0,0,o,h),A.length>0&&this._renderOneLane(se,A,Z,o),!0}_renderOneLane(o,h,A,Z){let se=0,Se=0,$e=0;for(const rt of h){const ht=rt.colorId,xt=rt.from,Wt=rt.to;ht!==se?(o.fillRect(0,Se,Z,$e-Se),se=ht,o.fillStyle=A[se],Se=xt,$e=Wt):$e>=xt?$e=Math.max($e,Wt):(o.fillRect(0,Se,Z,$e-Se),Se=xt,$e=Wt)}o.fillRect(0,Se,Z,$e-Se)}}class jo extends ge{constructor(o){super(o);this.domNode=(0,le.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const h=this._context.configuration.options;this._rulers=h.get(91),this._typicalHalfwidthCharacterWidth=h.get(44).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(o){const h=this._context.configuration.options;return this._rulers=h.get(91),this._typicalHalfwidthCharacterWidth=h.get(44).typicalHalfwidthCharacterWidth,!0}onScrollChanged(o){return o.scrollHeightChanged}prepareRender(o){}_ensureRulersCount(){const o=this._renderedRulers.length,h=this._rulers.length;if(o===h)return;if(o<h){const{tabSize:Z}=this._context.viewModel.model.getOptions(),se=Z;let Se=h-o;for(;Se>0;){const $e=(0,le.X)(document.createElement("div"));$e.setClassName("view-ruler"),$e.setWidth(se),this.domNode.appendChild($e),this._renderedRulers.push($e),Se--}return}let A=o-h;for(;A>0;){const Z=this._renderedRulers.pop();this.domNode.removeChild(Z),A--}}render(o){this._ensureRulersCount();for(let h=0,A=this._rulers.length;h<A;h++){const Z=this._renderedRulers[h],se=this._rulers[h];Z.setBoxShadow(se.color?`1px 0 0 0 ${se.color} inset`:""),Z.setHeight(Math.min(o.scrollHeight,1e6)),Z.setLeft(se.column*this._typicalHalfwidthCharacterWidth)}}}(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(En.zk);h&&o.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${h} inset; }`)});class Uo extends ge{constructor(o){super(o);this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const A=this._context.configuration.options.get(92);this._useShadows=A.useShadows,this._domNode=(0,le.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const o=this._useShadows&&this._scrollTop>0;return this._shouldShow!==o?(this._shouldShow=o,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const h=this._context.configuration.options.get(131);h.minimap.renderMinimap===0||h.minimap.minimapWidth>0&&h.minimap.minimapLeft===0?this._width=h.width:this._width=h.width-h.minimap.minimapWidth-h.verticalScrollbarWidth}onConfigurationChanged(o){const A=this._context.configuration.options.get(92);return this._useShadows=A.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(o){return this._scrollTop=o.scrollTop,this._updateShouldShow()}prepareRender(o){}render(o){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(yr._wn);h&&o.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${h} 0 6px 6px -6px inset; }`)});class qs{constructor(o){this.left=o.left,this.width=o.width,this.startStyle=null,this.endStyle=null}}class ss{constructor(o,h){this.lineNumber=o,this.ranges=h}}function va(Ut){return new qs(Ut)}function ps(Ut){return new ss(Ut.lineNumber,Ut.ranges.map(va))}class wo extends Jt{constructor(o){super();this._previousFrameVisibleRangesWithStyle=[],this._context=o;const h=this._context.configuration.options;this._lineHeight=h.get(59),this._roundedSelection=h.get(90),this._typicalHalfwidthCharacterWidth=h.get(44).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(o){const h=this._context.configuration.options;return this._lineHeight=h.get(59),this._roundedSelection=h.get(90),this._typicalHalfwidthCharacterWidth=h.get(44).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(o){return this._selections=o.selections.slice(0),!0}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return o.scrollTopChanged}onZonesChanged(o){return!0}_visibleRangesHaveGaps(o){for(let h=0,A=o.length;h<A;h++)if(o[h].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(o,h,A){const Z=this._typicalHalfwidthCharacterWidth/4;let se=null,Se=null;if(A&&A.length>0&&h.length>0){const $e=h[0].lineNumber;if($e===o.startLineNumber)for(let ht=0;!se&&ht<A.length;ht++)A[ht].lineNumber===$e&&(se=A[ht].ranges[0]);const rt=h[h.length-1].lineNumber;if(rt===o.endLineNumber)for(let ht=A.length-1;!Se&&ht>=0;ht--)A[ht].lineNumber===rt&&(Se=A[ht].ranges[0]);se&&!se.startStyle&&(se=null),Se&&!Se.startStyle&&(Se=null)}for(let $e=0,rt=h.length;$e<rt;$e++){const ht=h[$e].ranges[0],xt=ht.left,Wt=ht.left+ht.width,qt={top:0,bottom:0},on={top:0,bottom:0};if($e>0){const _n=h[$e-1].ranges[0].left,Mn=h[$e-1].ranges[0].left+h[$e-1].ranges[0].width;Ss(xt-_n)<Z?qt.top=2:xt>_n&&(qt.top=1),Ss(Wt-Mn)<Z?on.top=2:_n<Wt&&Wt<Mn&&(on.top=1)}else se&&(qt.top=se.startStyle.top,on.top=se.endStyle.top);if($e+1<rt){const _n=h[$e+1].ranges[0].left,Mn=h[$e+1].ranges[0].left+h[$e+1].ranges[0].width;Ss(xt-_n)<Z?qt.bottom=2:_n<xt&&xt<Mn&&(qt.bottom=1),Ss(Wt-Mn)<Z?on.bottom=2:Wt<Mn&&(on.bottom=1)}else Se&&(qt.bottom=Se.startStyle.bottom,on.bottom=Se.endStyle.bottom);ht.startStyle=qt,ht.endStyle=on}}_getVisibleRangesWithStyle(o,h,A){const se=(h.linesVisibleRangesForRange(o,!0)||[]).map(ps);return!this._visibleRangesHaveGaps(se)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(h.visibleRange,se,A),se}_createSelectionPiece(o,h,A,Z,se){return'<div class="cslr '+A+'" style="top:'+o.toString()+"px;left:"+Z.toString()+"px;width:"+se.toString()+"px;height:"+h+'px;"></div>'}_actualRenderOneSelection(o,h,A,Z){if(Z.length===0)return;const se=!!Z[0].ranges[0].startStyle,Se=this._lineHeight.toString(),$e=(this._lineHeight-1).toString(),rt=Z[0].lineNumber,ht=Z[Z.length-1].lineNumber;for(let xt=0,Wt=Z.length;xt<Wt;xt++){const qt=Z[xt],on=qt.lineNumber,_n=on-h,Mn=A&&(on===ht||on===rt)?$e:Se,$n=A&&on===rt?1:0;let vi="",Ii="";for(let Di=0,mr=qt.ranges.length;Di<mr;Di++){const or=qt.ranges[Di];if(se){const Er=or.startStyle,cr=or.endStyle;if(Er.top===1||Er.bottom===1){vi+=this._createSelectionPiece($n,Mn,wo.SELECTION_CLASS_NAME,or.left-wo.ROUNDED_PIECE_WIDTH,wo.ROUNDED_PIECE_WIDTH);let Or=wo.EDITOR_BACKGROUND_CLASS_NAME;Er.top===1&&(Or+=" "+wo.SELECTION_TOP_RIGHT),Er.bottom===1&&(Or+=" "+wo.SELECTION_BOTTOM_RIGHT),vi+=this._createSelectionPiece($n,Mn,Or,or.left-wo.ROUNDED_PIECE_WIDTH,wo.ROUNDED_PIECE_WIDTH)}if(cr.top===1||cr.bottom===1){vi+=this._createSelectionPiece($n,Mn,wo.SELECTION_CLASS_NAME,or.left+or.width,wo.ROUNDED_PIECE_WIDTH);let Or=wo.EDITOR_BACKGROUND_CLASS_NAME;cr.top===1&&(Or+=" "+wo.SELECTION_TOP_LEFT),cr.bottom===1&&(Or+=" "+wo.SELECTION_BOTTOM_LEFT),vi+=this._createSelectionPiece($n,Mn,Or,or.left+or.width,wo.ROUNDED_PIECE_WIDTH)}}let Tr=wo.SELECTION_CLASS_NAME;if(se){const Er=or.startStyle,cr=or.endStyle;Er.top===0&&(Tr+=" "+wo.SELECTION_TOP_LEFT),Er.bottom===0&&(Tr+=" "+wo.SELECTION_BOTTOM_LEFT),cr.top===0&&(Tr+=" "+wo.SELECTION_TOP_RIGHT),cr.bottom===0&&(Tr+=" "+wo.SELECTION_BOTTOM_RIGHT)}Ii+=this._createSelectionPiece($n,Mn,Tr,or.left,or.width)}o[_n][0]+=vi,o[_n][1]+=Ii}}prepareRender(o){const h=[],A=o.visibleRange.startLineNumber,Z=o.visibleRange.endLineNumber;for(let Se=A;Se<=Z;Se++){const $e=Se-A;h[$e]=["",""]}const se=[];for(let Se=0,$e=this._selections.length;Se<$e;Se++){const rt=this._selections[Se];if(rt.isEmpty()){se[Se]=null;continue}const ht=this._getVisibleRangesWithStyle(rt,o,this._previousFrameVisibleRangesWithStyle[Se]);se[Se]=ht,this._actualRenderOneSelection(h,A,this._selections.length>1,ht)}this._previousFrameVisibleRangesWithStyle=se,this._renderResult=h.map(([Se,$e])=>Se+$e)}render(o,h){if(!this._renderResult)return"";const A=h-o;return A<0||A>=this._renderResult.length?"":this._renderResult[A]}}wo.SELECTION_CLASS_NAME="selected-text",wo.SELECTION_TOP_LEFT="top-left-radius",wo.SELECTION_BOTTOM_LEFT="bottom-left-radius",wo.SELECTION_TOP_RIGHT="top-right-radius",wo.SELECTION_BOTTOM_RIGHT="bottom-right-radius",wo.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",wo.ROUNDED_PIECE_WIDTH=10,(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(yr.hEj);h&&o.addRule(`.monaco-editor .focused .selected-text { background-color: ${h}; }`);const A=Ut.getColor(yr.ES4);A&&o.addRule(`.monaco-editor .selected-text { background-color: ${A}; }`);const Z=Ut.getColor(yr.yb5);Z&&!Z.isTransparent()&&o.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${Z}; }`)});function Ss(Ut){return Ut<0?-Ut:Ut}class ts{constructor(o,h,A,Z,se,Se){this.top=o,this.left=h,this.width=A,this.height=Z,this.textContent=se,this.textContentClassName=Se}}class gr{constructor(o){this._context=o;const h=this._context.configuration.options,A=h.get(44);this._cursorStyle=h.get(24),this._lineHeight=h.get(59),this._typicalHalfwidthCharacterWidth=A.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(h.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,le.X)(document.createElement("div")),this._domNode.setClassName(`cursor ${oi.S}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,Bn.N)(this._domNode,A),this._domNode.setDisplay("none"),this._position=new Re.L(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(o){const h=this._context.configuration.options,A=h.get(44);return this._cursorStyle=h.get(24),this._lineHeight=h.get(59),this._typicalHalfwidthCharacterWidth=A.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(h.get(27),this._typicalHalfwidthCharacterWidth),(0,Bn.N)(this._domNode,A),!0}onCursorPositionChanged(o){return this._position=o,!0}_getGraphemeAwarePosition(){const{lineNumber:o,column:h}=this._position,A=this._context.viewModel.getLineContent(o),[Z,se]=Sn.J_(A,h-1);return[new Re.L(o,Z+1),A.substring(Z,se)]}_prepareRender(o){let h="";const[A,Z]=this._getGraphemeAwarePosition();if(this._cursorStyle===b.d2.Line||this._cursorStyle===b.d2.LineThin){const qt=o.visibleRangeForPosition(A);if(!qt||qt.outsideRenderedLine)return null;let on;this._cursorStyle===b.d2.Line?(on=T.Uh(this._lineCursorWidth>0?this._lineCursorWidth:2),on>2&&(h=Z)):on=T.Uh(1);let _n=qt.left;on>=2&&_n>=1&&(_n-=1);const Mn=o.getVerticalOffsetForLineNumber(A.lineNumber)-o.bigNumbersDelta;return new ts(Mn,_n,on,this._lineHeight,h,"")}const se=o.linesVisibleRangesForRange(new Ve.e(A.lineNumber,A.column,A.lineNumber,A.column+Z.length),!1);if(!se||se.length===0)return null;const Se=se[0];if(Se.outsideRenderedLine||Se.ranges.length===0)return null;const $e=Se.ranges[0],rt=$e.width<1?this._typicalHalfwidthCharacterWidth:$e.width;let ht="";if(this._cursorStyle===b.d2.Block){const qt=this._context.viewModel.getViewLineData(A.lineNumber);h=Z;const on=qt.tokens.findTokenIndexAtOffset(A.column-1);ht=qt.tokens.getClassName(on)}let xt=o.getVerticalOffsetForLineNumber(A.lineNumber)-o.bigNumbersDelta,Wt=this._lineHeight;return(this._cursorStyle===b.d2.Underline||this._cursorStyle===b.d2.UnderlineThin)&&(xt+=this._lineHeight-2,Wt=2),new ts(xt,$e.left,rt,Wt,h,ht)}prepareRender(o){this._renderData=this._prepareRender(o)}render(o){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${oi.S} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class ns extends ge{constructor(o){super(o);const h=this._context.configuration.options;this._readOnly=h.get(81),this._cursorBlinking=h.get(22),this._cursorStyle=h.get(24),this._cursorSmoothCaretAnimation=h.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new gr(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=(0,le.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new ye._F,this._cursorFlatBlinkInterval=new ye.zh,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(o){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(o){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(o){const h=this._context.configuration.options;this._readOnly=h.get(81),this._cursorBlinking=h.get(22),this._cursorStyle=h.get(24),this._cursorSmoothCaretAnimation=h.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(o);for(let A=0,Z=this._secondaryCursors.length;A<Z;A++)this._secondaryCursors[A].onConfigurationChanged(o);return!0}_onCursorPositionChanged(o,h){if(this._primaryCursor.onCursorPositionChanged(o),this._updateBlinking(),this._secondaryCursors.length<h.length){const A=h.length-this._secondaryCursors.length;for(let Z=0;Z<A;Z++){const se=new gr(this._context);this._domNode.domNode.insertBefore(se.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(se)}}else if(this._secondaryCursors.length>h.length){const A=this._secondaryCursors.length-h.length;for(let Z=0;Z<A;Z++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let A=0;A<h.length;A++)this._secondaryCursors[A].onCursorPositionChanged(h[A])}onCursorStateChanged(o){const h=[];for(let Z=0,se=o.selections.length;Z<se;Z++)h[Z]=o.selections[Z].getPosition();this._onCursorPositionChanged(h[0],h.slice(1));const A=o.selections[0].isEmpty();return this._selectionIsEmpty!==A&&(this._selectionIsEmpty=A,this._updateDomClassName()),!0}onDecorationsChanged(o){return!0}onFlushed(o){return!0}onFocusChanged(o){return this._editorHasFocus=o.isFocused,this._updateBlinking(),!1}onLinesChanged(o){return!0}onLinesDeleted(o){return!0}onLinesInserted(o){return!0}onScrollChanged(o){return!0}onTokensChanged(o){const h=A=>{for(let Z=0,se=o.ranges.length;Z<se;Z++)if(o.ranges[Z].fromLineNumber<=A.lineNumber&&A.lineNumber<=o.ranges[Z].toLineNumber)return!0;return!1};if(h(this._primaryCursor.getPosition()))return!0;for(const A of this._secondaryCursors)if(h(A.getPosition()))return!0;return!1}onZonesChanged(o){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const o=this._getCursorBlinking(),h=o===0,A=o===5;h?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!h&&!A&&(o===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},ns.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},ns.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let o="cursors-layer";switch(this._selectionIsEmpty||(o+=" has-selection"),this._cursorStyle){case b.d2.Line:o+=" cursor-line-style";break;case b.d2.Block:o+=" cursor-block-style";break;case b.d2.Underline:o+=" cursor-underline-style";break;case b.d2.LineThin:o+=" cursor-line-thin-style";break;case b.d2.BlockOutline:o+=" cursor-block-outline-style";break;case b.d2.UnderlineThin:o+=" cursor-underline-thin-style";break;default:o+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:o+=" cursor-blink";break;case 2:o+=" cursor-smooth";break;case 3:o+=" cursor-phase";break;case 4:o+=" cursor-expand";break;case 5:o+=" cursor-solid";break;default:o+=" cursor-solid"}else o+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(o+=" cursor-smooth-caret-animation"),o}_show(){this._primaryCursor.show();for(let o=0,h=this._secondaryCursors.length;o<h;o++)this._secondaryCursors[o].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let o=0,h=this._secondaryCursors.length;o<h;o++)this._secondaryCursors[o].hide();this._isVisible=!1}prepareRender(o){this._primaryCursor.prepareRender(o);for(let h=0,A=this._secondaryCursors.length;h<A;h++)this._secondaryCursors[h].prepareRender(o)}render(o){const h=[];let A=0;const Z=this._primaryCursor.render(o);Z&&(h[A++]=Z);for(let se=0,Se=this._secondaryCursors.length;se<Se;se++){const $e=this._secondaryCursors[se].render(o);$e&&(h[A++]=$e)}this._renderData=h}getLastRenderData(){return this._renderData}}ns.BLINK_INTERVAL=500,(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(En.n0);if(h){let A=Ut.getColor(En.fY);A||(A=h.opposite()),o.addRule(`.monaco-editor .inputarea.ime-input { caret-color: ${h}; }`),o.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${h}; border-color: ${h}; color: ${A}; }`),Ut.type==="hc"&&o.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${A}; border-right: 1px solid ${A}; }`)}});const xr=()=>{throw new Error("Invalid change accessor")};class Jn extends ge{constructor(o){super(o);const h=this._context.configuration.options,A=h.get(131);this._lineHeight=h.get(59),this._contentWidth=A.contentWidth,this._contentLeft=A.contentLeft,this.domNode=(0,le.X)(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=(0,le.X)(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const o=this._context.viewLayout.getWhitespaces(),h=new Map;for(const Z of o)h.set(Z.id,Z);let A=!1;return this._context.viewModel.changeWhitespace(Z=>{const se=Object.keys(this._zones);for(let Se=0,$e=se.length;Se<$e;Se++){const rt=se[Se],ht=this._zones[rt],xt=this._computeWhitespaceProps(ht.delegate);ht.isInHiddenArea=xt.isInHiddenArea;const Wt=h.get(rt);Wt&&(Wt.afterLineNumber!==xt.afterViewLineNumber||Wt.height!==xt.heightInPx)&&(Z.changeOneWhitespace(rt,xt.afterViewLineNumber,xt.heightInPx),this._safeCallOnComputedHeight(ht.delegate,xt.heightInPx),A=!0)}}),A}onConfigurationChanged(o){const h=this._context.configuration.options,A=h.get(131);return this._lineHeight=h.get(59),this._contentWidth=A.contentWidth,this._contentLeft=A.contentLeft,o.hasChanged(59)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(o){return this._recomputeWhitespacesProps()}onLinesDeleted(o){return!0}onScrollChanged(o){return o.scrollTopChanged||o.scrollWidthChanged}onZonesChanged(o){return!0}onLinesInserted(o){return!0}_getZoneOrdinal(o){return typeof o.afterColumn!="undefined"?o.afterColumn:1e4}_computeWhitespaceProps(o){if(o.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(o),minWidthInPx:this._minWidthInPixels(o)};let h;if(typeof o.afterColumn!="undefined")h=this._context.viewModel.model.validatePosition({lineNumber:o.afterLineNumber,column:o.afterColumn});else{const Se=this._context.viewModel.model.validatePosition({lineNumber:o.afterLineNumber,column:1}).lineNumber;h=new Re.L(Se,this._context.viewModel.model.getLineMaxColumn(Se))}let A;h.column===this._context.viewModel.model.getLineMaxColumn(h.lineNumber)?A=this._context.viewModel.model.validatePosition({lineNumber:h.lineNumber+1,column:1}):A=this._context.viewModel.model.validatePosition({lineNumber:h.lineNumber,column:h.column+1});const Z=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(h,o.afterColumnAffinity),se=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(A);return{isInHiddenArea:!se,afterViewLineNumber:Z.lineNumber,heightInPx:se?this._heightInPixels(o):0,minWidthInPx:this._minWidthInPixels(o)}}changeViewZones(o){let h=!1;return this._context.viewModel.changeWhitespace(A=>{const Z={addZone:se=>(h=!0,this._addZone(A,se)),removeZone:se=>{!se||(h=this._removeZone(A,se)||h)},layoutZone:se=>{!se||(h=this._layoutZone(A,se)||h)}};hr(o,Z),Z.addZone=xr,Z.removeZone=xr,Z.layoutZone=xr}),h}_addZone(o,h){const A=this._computeWhitespaceProps(h),se={whitespaceId:o.insertWhitespace(A.afterViewLineNumber,this._getZoneOrdinal(h),A.heightInPx,A.minWidthInPx),delegate:h,isInHiddenArea:A.isInHiddenArea,isVisible:!1,domNode:(0,le.X)(h.domNode),marginDomNode:h.marginDomNode?(0,le.X)(h.marginDomNode):null};return this._safeCallOnComputedHeight(se.delegate,A.heightInPx),se.domNode.setPosition("absolute"),se.domNode.domNode.style.width="100%",se.domNode.setDisplay("none"),se.domNode.setAttribute("monaco-view-zone",se.whitespaceId),this.domNode.appendChild(se.domNode),se.marginDomNode&&(se.marginDomNode.setPosition("absolute"),se.marginDomNode.domNode.style.width="100%",se.marginDomNode.setDisplay("none"),se.marginDomNode.setAttribute("monaco-view-zone",se.whitespaceId),this.marginDomNode.appendChild(se.marginDomNode)),this._zones[se.whitespaceId]=se,this.setShouldRender(),se.whitespaceId}_removeZone(o,h){if(this._zones.hasOwnProperty(h)){const A=this._zones[h];return delete this._zones[h],o.removeWhitespace(A.whitespaceId),A.domNode.removeAttribute("monaco-visible-view-zone"),A.domNode.removeAttribute("monaco-view-zone"),A.domNode.domNode.parentNode.removeChild(A.domNode.domNode),A.marginDomNode&&(A.marginDomNode.removeAttribute("monaco-visible-view-zone"),A.marginDomNode.removeAttribute("monaco-view-zone"),A.marginDomNode.domNode.parentNode.removeChild(A.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(o,h){if(this._zones.hasOwnProperty(h)){const A=this._zones[h],Z=this._computeWhitespaceProps(A.delegate);return A.isInHiddenArea=Z.isInHiddenArea,o.changeOneWhitespace(A.whitespaceId,Z.afterViewLineNumber,Z.heightInPx),this._safeCallOnComputedHeight(A.delegate,Z.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(o){if(this._zones.hasOwnProperty(o)){const h=this._zones[o];return Boolean(h.delegate.suppressMouseDown)}return!1}_heightInPixels(o){return typeof o.heightInPx=="number"?o.heightInPx:typeof o.heightInLines=="number"?this._lineHeight*o.heightInLines:this._lineHeight}_minWidthInPixels(o){return typeof o.minWidthInPx=="number"?o.minWidthInPx:0}_safeCallOnComputedHeight(o,h){if(typeof o.onComputedHeight=="function")try{o.onComputedHeight(h)}catch(A){(0,B.dL)(A)}}_safeCallOnDomNodeTop(o,h){if(typeof o.onDomNodeTop=="function")try{o.onDomNodeTop(h)}catch(A){(0,B.dL)(A)}}prepareRender(o){}render(o){const h=o.viewportData.whitespaceViewportData,A={};let Z=!1;for(const Se of h)this._zones[Se.id].isInHiddenArea||(A[Se.id]=Se,Z=!0);const se=Object.keys(this._zones);for(let Se=0,$e=se.length;Se<$e;Se++){const rt=se[Se],ht=this._zones[rt];let xt=0,Wt=0,qt="none";A.hasOwnProperty(rt)?(xt=A[rt].verticalOffset-o.bigNumbersDelta,Wt=A[rt].height,qt="block",ht.isVisible||(ht.domNode.setAttribute("monaco-visible-view-zone","true"),ht.isVisible=!0),this._safeCallOnDomNodeTop(ht.delegate,o.getScrolledTopFromAbsoluteTop(A[rt].verticalOffset))):(ht.isVisible&&(ht.domNode.removeAttribute("monaco-visible-view-zone"),ht.isVisible=!1),this._safeCallOnDomNodeTop(ht.delegate,o.getScrolledTopFromAbsoluteTop(-1e6))),ht.domNode.setTop(xt),ht.domNode.setHeight(Wt),ht.domNode.setDisplay(qt),ht.marginDomNode&&(ht.marginDomNode.setTop(xt),ht.marginDomNode.setHeight(Wt),ht.marginDomNode.setDisplay(qt))}Z&&(this.domNode.setWidth(Math.max(o.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function hr(Ut,o){try{return Ut(o)}catch(h){(0,B.dL)(h)}}class Pr{constructor(o){this._theme=o}get type(){return this._theme.type}get value(){return this._theme}update(o){this._theme=o}getColor(o){return this._theme.getColor(o)}}class Po{constructor(o,h,A){this.configuration=o,this.theme=new Pr(h),this.viewModel=A,this.viewLayout=A.viewLayout}addEventHandler(o){this.viewModel.addViewEventHandler(o)}removeEventHandler(o){this.viewModel.removeViewEventHandler(o)}}class Cs{constructor(o,h,A,Z){this.selections=o,this.startLineNumber=h.startLineNumber|0,this.endLineNumber=h.endLineNumber|0,this.relativeVerticalOffset=h.relativeVerticalOffset,this.bigNumbersDelta=h.bigNumbersDelta|0,this.whitespaceViewportData=A,this._model=Z,this.visibleRange=new Ve.e(h.startLineNumber,this._model.getLineMinColumn(h.startLineNumber),h.endLineNumber,this._model.getLineMaxColumn(h.endLineNumber))}getViewLineRenderingData(o){return this._model.getViewLineRenderingData(this.visibleRange,o)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Ns extends Te{constructor(o,h,A,Z,se,Se){super();this._selections=[new X.Y(1,1,1,1)],this._renderAnimationFrame=null;const $e=new Ro(h,Z,se,o);this._context=new Po(h,A,Z),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new Dr(this._context,$e,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=(0,le.X)(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=(0,le.X)(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=(0,le.X)(document.createElement("div")),we.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new Xr(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new ko(this._context,this._linesContent),this._viewZones=new Jn(this._context),this._viewParts.push(this._viewZones);const rt=new Un(this._context);this._viewParts.push(rt);const ht=new Uo(this._context);this._viewParts.push(ht);const xt=new vt(this._context);this._viewParts.push(xt),xt.addDynamicOverlay(new wi(this._context)),xt.addDynamicOverlay(new wo(this._context)),xt.addDynamicOverlay(new Br(this._context)),xt.addDynamicOverlay(new Xi(this._context));const Wt=new Lt(this._context);this._viewParts.push(Wt),Wt.addDynamicOverlay(new Ci(this._context)),Wt.addDynamicOverlay(new ms(this._context)),Wt.addDynamicOverlay(new tt(this._context)),Wt.addDynamicOverlay(new li(this._context)),Wt.addDynamicOverlay(new sn(this._context));const qt=new Tn(this._context);qt.getDomNode().appendChild(this._viewZones.marginDomNode),qt.getDomNode().appendChild(Wt.getDomNode()),this._viewParts.push(qt),this._contentWidgets=new dn(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new ns(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new ji(this._context),this._viewParts.push(this._overlayWidgets);const on=new jo(this._context);this._viewParts.push(on);const _n=new Zn(this._context);if(this._viewParts.push(_n),rt){const Mn=this._scrollbar.getOverviewRulerLayoutInfo();Mn.parent.insertBefore(rt.getDomNode(),Mn.insertBefore)}this._linesContent.appendChild(xt.getDomNode()),this._linesContent.appendChild(on.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(qt.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(ht.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_n.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),Se?Se.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new vn(this._context,$e,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:o=>{this._textAreaHandler.textArea.domNode.dispatchEvent(o)},getLastRenderData:()=>{const o=this._viewCursors.getLastRenderData()||[],h=this._textAreaHandler.getLastRenderData();return new Dt(o,h)},shouldSuppressMouseDownOnViewZone:o=>this._viewZones.shouldSuppressMouseDownOnViewZone(o),shouldSuppressMouseDownOnWidget:o=>this._contentWidgets.shouldSuppressMouseDownOnWidget(o),getPositionFromDOMInfo:(o,h)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(o,h)),visibleRangeForPosition:(o,h)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Re.L(o,h))),getLineWidth:o=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(o))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:o=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(o))}}_applyLayout(){const h=this._context.configuration.options.get(131);this.domNode.setWidth(h.width),this.domNode.setHeight(h.height),this._overflowGuardContainer.setWidth(h.width),this._overflowGuardContainer.setHeight(h.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const o=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(128)+" "+(0,$t.m6)(this._context.theme.type)+o}handleEvents(o){super.handleEvents(o),this._scheduleRender()}onConfigurationChanged(o){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(o){return this._selections=o.selections,!1}onFocusChanged(o){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(o){return this._context.theme.update(o.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const o of this._viewParts)o.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=T.lI(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){as(()=>this._actualRender())}_getViewPartsToRender(){const o=[];let h=0;for(const A of this._viewParts)A.shouldRender()&&(o[h++]=A);return o}_actualRender(){if(!T.Uw(this.domNode.domNode))return;let o=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&o.length===0)return;const h=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(h.startLineNumber,h.endLineNumber,h.centeredLineNumber);const A=new Cs(this._selections,h,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(A),this._viewLines.shouldRender()&&(this._viewLines.renderText(A),this._viewLines.onDidRender(),o=this._getViewPartsToRender());const Z=new Qe(this._context.viewLayout,A,this._viewLines);for(const se of o)se.prepareRender(Z);for(const se of o)se.render(Z),se.onDidRender()}delegateVerticalScrollbarMouseDown(o){this._scrollbar.delegateVerticalScrollbarMouseDown(o)}restoreState(o){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:o.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:o.scrollLeft},1)}getOffsetForColumn(o,h){const A=this._context.viewModel.model.validatePosition({lineNumber:o,column:h}),Z=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(A);this._flushAccumulatedAndRenderNow();const se=this._viewLines.visibleRangeForPosition(new Re.L(Z.lineNumber,Z.column));return se?se.left:-1}getTargetAtClientPoint(o,h){const A=this._pointerHandler.getTargetAtClientPoint(o,h);return A?to.convertViewToModelMouseTarget(A,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(o){return new Vo(this._context,o)}change(o){this._viewZones.changeViewZones(o),this._scheduleRender()}render(o,h){if(h){this._viewLines.forceShouldRender();for(const A of this._viewParts)A.forceShouldRender()}o?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(o){this._textAreaHandler.setAriaOptions(o)}addContentWidget(o){this._contentWidgets.addWidget(o.widget),this.layoutContentWidget(o),this._scheduleRender()}layoutContentWidget(o){let h=o.position&&o.position.range||null;if(h===null){const Z=o.position?o.position.position:null;Z!==null&&(h=new Ve.e(Z.lineNumber,Z.column,Z.lineNumber,Z.column))}const A=o.position?o.position.preference:null;this._contentWidgets.setWidgetPosition(o.widget,h,A),this._scheduleRender()}removeContentWidget(o){this._contentWidgets.removeWidget(o.widget),this._scheduleRender()}addOverlayWidget(o){this._overlayWidgets.addWidget(o.widget),this.layoutOverlayWidget(o),this._scheduleRender()}layoutOverlayWidget(o){const h=o.position?o.position.preference:null;this._overlayWidgets.setWidgetPosition(o.widget,h)&&this._scheduleRender()}removeOverlayWidget(o){this._overlayWidgets.removeWidget(o.widget),this._scheduleRender()}}function as(Ut){try{return Ut()}catch(o){(0,B.dL)(o)}}var is=a(55343);class Xs{constructor(o){this._selTrackedRange=null,this._trackSelection=!0,this._setState(o,new is.rS(new Ve.e(1,1,1,1),0,new Re.L(1,1),0),new is.rS(new Ve.e(1,1,1,1),0,new Re.L(1,1),0))}dispose(o){this._removeTrackedRange(o)}startTrackingSelection(o){this._trackSelection=!0,this._updateTrackedRange(o)}stopTrackingSelection(o){this._trackSelection=!1,this._removeTrackedRange(o)}_updateTrackedRange(o){!this._trackSelection||(this._selTrackedRange=o.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(o){this._selTrackedRange=o.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new is.Vi(this.modelState,this.viewState)}readSelectionFromMarkers(o){const h=o.model._getTrackedRange(this._selTrackedRange);return X.Y.fromRange(h,this.modelState.selection.getDirection())}ensureValidState(o){this._setState(o,this.modelState,this.viewState)}setState(o,h,A){this._setState(o,h,A)}static _validatePositionWithCache(o,h,A,Z){return h.equals(A)?Z:o.normalizePosition(h,2)}static _validateViewState(o,h){const A=h.position,Z=h.selectionStart.getStartPosition(),se=h.selectionStart.getEndPosition(),Se=o.normalizePosition(A,2),$e=this._validatePositionWithCache(o,Z,A,Se),rt=this._validatePositionWithCache(o,se,Z,$e);return A.equals(Se)&&Z.equals($e)&&se.equals(rt)?h:new is.rS(Ve.e.fromPositions($e,rt),h.selectionStartLeftoverVisibleColumns+Z.column-$e.column,Se,h.leftoverVisibleColumns+A.column-Se.column)}_setState(o,h,A){if(A&&(A=Xs._validateViewState(o.viewModel,A)),h){const Z=o.model.validateRange(h.selectionStart),se=h.selectionStart.equalsRange(Z)?h.selectionStartLeftoverVisibleColumns:0,Se=o.model.validatePosition(h.position),$e=h.position.equals(Se)?h.leftoverVisibleColumns:0;h=new is.rS(Z,se,Se,$e)}else{if(!A)return;const Z=o.model.validateRange(o.coordinatesConverter.convertViewRangeToModelRange(A.selectionStart)),se=o.model.validatePosition(o.coordinatesConverter.convertViewPositionToModelPosition(A.position));h=new is.rS(Z,A.selectionStartLeftoverVisibleColumns,se,A.leftoverVisibleColumns)}if(A){const Z=o.coordinatesConverter.validateViewRange(A.selectionStart,h.selectionStart),se=o.coordinatesConverter.validateViewPosition(A.position,h.position);A=new is.rS(Z,h.selectionStartLeftoverVisibleColumns,se,h.leftoverVisibleColumns)}else{const Z=o.coordinatesConverter.convertModelPositionToViewPosition(new Re.L(h.selectionStart.startLineNumber,h.selectionStart.startColumn)),se=o.coordinatesConverter.convertModelPositionToViewPosition(new Re.L(h.selectionStart.endLineNumber,h.selectionStart.endColumn)),Se=new Ve.e(Z.lineNumber,Z.column,se.lineNumber,se.column),$e=o.coordinatesConverter.convertModelPositionToViewPosition(h.position);A=new is.rS(Se,h.selectionStartLeftoverVisibleColumns,$e,h.leftoverVisibleColumns)}this.modelState=h,this.viewState=A,this._updateTrackedRange(o)}}class hl{constructor(o){this.context=o,this.cursors=[new Xs(o)],this.lastAddedCursorIndex=0}dispose(){for(const o of this.cursors)o.dispose(this.context)}startTrackingSelections(){for(const o of this.cursors)o.startTrackingSelection(this.context)}stopTrackingSelections(){for(const o of this.cursors)o.stopTrackingSelection(this.context)}updateContext(o){this.context=o}ensureValidState(){for(const o of this.cursors)o.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(o=>o.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(o=>o.asCursorState())}getViewPositions(){return this.cursors.map(o=>o.viewState.position)}getTopMostViewPosition(){return(0,D.VJ)(this.cursors,(0,D.tT)(o=>o.viewState.position,Re.L.compare)).viewState.position}getBottomMostViewPosition(){return(0,D.jV)(this.cursors,(0,D.tT)(o=>o.viewState.position,Re.L.compare)).viewState.position}getSelections(){return this.cursors.map(o=>o.modelState.selection)}getViewSelections(){return this.cursors.map(o=>o.viewState.selection)}setSelections(o){this.setStates(is.Vi.fromModelSelections(o))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(o){o!==null&&(this.cursors[0].setState(this.context,o[0].modelState,o[0].viewState),this._setSecondaryStates(o.slice(1)))}_setSecondaryStates(o){const h=this.cursors.length-1,A=o.length;if(h<A){const Z=A-h;for(let se=0;se<Z;se++)this._addSecondaryCursor()}else if(h>A){const Z=h-A;for(let se=0;se<Z;se++)this._removeSecondaryCursor(this.cursors.length-2)}for(let Z=0;Z<A;Z++)this.cursors[Z+1].setState(this.context,o[Z].modelState,o[Z].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Xs(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(o){this.lastAddedCursorIndex>=o+1&&this.lastAddedCursorIndex--,this.cursors[o+1].dispose(this.context),this.cursors.splice(o+1,1)}normalize(){if(this.cursors.length===1)return;const o=this.cursors.slice(0),h=[];for(let A=0,Z=o.length;A<Z;A++)h.push({index:A,selection:o[A].modelState.selection});h.sort((0,D.tT)(A=>A.selection,Ve.e.compareRangesUsingStarts));for(let A=0;A<h.length-1;A++){const Z=h[A],se=h[A+1],Se=Z.selection,$e=se.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let rt;if($e.isEmpty()||Se.isEmpty()?rt=$e.getStartPosition().isBeforeOrEqual(Se.getEndPosition()):rt=$e.getStartPosition().isBefore(Se.getEndPosition()),rt){const ht=Z.index<se.index?A:A+1,xt=Z.index<se.index?A+1:A,Wt=h[xt].index,qt=h[ht].index,on=h[xt].selection,_n=h[ht].selection;if(!on.equalsSelection(_n)){const Mn=on.plusRange(_n),$n=on.selectionStartLineNumber===on.startLineNumber&&on.selectionStartColumn===on.startColumn,vi=_n.selectionStartLineNumber===_n.startLineNumber&&_n.selectionStartColumn===_n.startColumn;let Ii;Wt===this.lastAddedCursorIndex?(Ii=$n,this.lastAddedCursorIndex=qt):Ii=vi;let Di;Ii?Di=new X.Y(Mn.startLineNumber,Mn.startColumn,Mn.endLineNumber,Mn.endColumn):Di=new X.Y(Mn.endLineNumber,Mn.endColumn,Mn.startLineNumber,Mn.startColumn),h[ht].selection=Di;const mr=is.Vi.fromModelSelection(Di);o[qt].setState(this.context,mr.modelState,mr.viewState)}for(const Mn of h)Mn.index>Wt&&Mn.index--;o.splice(Wt,1),h.splice(xt,1),this._removeSecondaryCursor(Wt-1),A--}}}}class za{constructor(o,h,A,Z){this._cursorContextBrand=void 0,this.model=o,this.viewModel=h,this.coordinatesConverter=A,this.cursorConfig=Z}}var fc=a(29436),xl=a(51336),fl=a(14706);class ed{constructor(){this.type=0}}class Su{constructor(){this.type=1}}class js{constructor(o){this.type=2,this._source=o}hasChanged(o){return this._source.hasChanged(o)}}class eu{constructor(o,h){this.type=3,this.selections=o,this.modelSelections=h}}class _a{constructor(o){this.type=4,o?(this.affectsMinimap=o.affectsMinimap,this.affectsOverviewRuler=o.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class gl{constructor(){this.type=5}}class ea{constructor(o){this.type=6,this.isFocused=o}}class jl{constructor(){this.type=7}}class sa{constructor(){this.type=8}}class ml{constructor(o,h){this.type=9,this.fromLineNumber=o,this.toLineNumber=h}}class pl{constructor(o,h){this.type=10,this.fromLineNumber=o,this.toLineNumber=h}}class el{constructor(o,h){this.type=11,this.fromLineNumber=o,this.toLineNumber=h}}class vl{constructor(o,h,A,Z,se,Se,$e){this.source=o,this.minimalReveal=h,this.range=A,this.selections=Z,this.verticalType=se,this.revealHorizontal=Se,this.scrollType=$e,this.type=12}}class Rc{constructor(o){this.type=13,this.scrollWidth=o.scrollWidth,this.scrollLeft=o.scrollLeft,this.scrollHeight=o.scrollHeight,this.scrollTop=o.scrollTop,this.scrollWidthChanged=o.scrollWidthChanged,this.scrollLeftChanged=o.scrollLeftChanged,this.scrollHeightChanged=o.scrollHeightChanged,this.scrollTopChanged=o.scrollTopChanged}}class tu{constructor(o){this.theme=o,this.type=14}}class Eu{constructor(o){this.type=15,this.ranges=o}}class td{constructor(){this.type=16}}class Za{constructor(){this.type=17}}class Pc extends x.JT{constructor(){super();this._onEvent=this._register(new F.Q5),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(o){this._addOutgoingEvent(o),this._emitOutgoingEvents()}_addOutgoingEvent(o){for(let h=0,A=this._outgoingEvents.length;h<A;h++)if(this._outgoingEvents[h].kind===o.kind){this._outgoingEvents[h]=this._outgoingEvents[h].merge(o);return}this._outgoingEvents.push(o)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const o=this._outgoingEvents.shift();o.isNoOp()||this._onEvent.fire(o)}}addViewEventHandler(o){for(let h=0,A=this._eventHandlers.length;h<A;h++)this._eventHandlers[h]===o&&console.warn("Detected duplicate listener in ViewEventDispatcher",o);this._eventHandlers.push(o)}removeViewEventHandler(o){for(let h=0;h<this._eventHandlers.length;h++)if(this._eventHandlers[h]===o){this._eventHandlers.splice(h,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new Oc),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const o=this._collector.outgoingEvents,h=this._collector.viewEvents;this._collector=null;for(const A of o)this._addOutgoingEvent(A);h.length>0&&this._emitMany(h)}this._emitOutgoingEvents()}emitSingleViewEvent(o){try{this.beginEmitViewEvents().emitViewEvent(o)}finally{this.endEmitViewEvents()}}_emitMany(o){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(o):this._viewEventQueue=o,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const o=this._viewEventQueue;this._viewEventQueue=null;const h=this._eventHandlers.slice(0);for(const A of h)A.handleEvents(o)}}}class Oc{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(o){this.viewEvents.push(o)}emitOutgoingEvent(o){this.outgoingEvents.push(o)}}class nu{constructor(o,h,A,Z){this.kind=0,this._oldContentWidth=o,this._oldContentHeight=h,this.contentWidth=A,this.contentHeight=Z,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(o){return o.kind!==0?this:new nu(this._oldContentWidth,this._oldContentHeight,o.contentWidth,o.contentHeight)}}class Il{constructor(o,h){this.kind=1,this.oldHasFocus=o,this.hasFocus=h}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(o){return o.kind!==1?this:new Il(this.oldHasFocus,o.hasFocus)}}class kc{constructor(o,h,A,Z,se,Se,$e,rt){this.kind=2,this._oldScrollWidth=o,this._oldScrollLeft=h,this._oldScrollHeight=A,this._oldScrollTop=Z,this.scrollWidth=se,this.scrollLeft=Se,this.scrollHeight=$e,this.scrollTop=rt,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(o){return o.kind!==2?this:new kc(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,o.scrollWidth,o.scrollLeft,o.scrollHeight,o.scrollTop)}}class Kl{constructor(){this.kind=3}isNoOp(){return!1}merge(o){return this}}class ta{constructor(){this.kind=4}isNoOp(){return!1}merge(o){return this}}class Pa{constructor(o,h,A,Z,se,Se,$e){this.kind=6,this.oldSelections=o,this.selections=h,this.oldModelVersionId=A,this.modelVersionId=Z,this.source=se,this.reason=Se,this.reachedMaxCursorCount=$e}static _selectionsAreEqual(o,h){if(!o&&!h)return!0;if(!o||!h)return!1;const A=o.length,Z=h.length;if(A!==Z)return!1;for(let se=0;se<A;se++)if(!o[se].equalsSelection(h[se]))return!1;return!0}isNoOp(){return Pa._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(o){return o.kind!==6?this:new Pa(this.oldSelections,o.selections,this.oldModelVersionId,o.modelVersionId,o.source,o.reason,this.reachedMaxCursorCount||o.reachedMaxCursorCount)}}class Wr{constructor(){this.kind=5}isNoOp(){return!1}merge(o){return this}}class Oa extends x.JT{constructor(o,h,A,Z){super();this._model=o,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=h,this._coordinatesConverter=A,this.context=new za(this._model,this._viewModel,this._coordinatesConverter,Z),this._cursors=new hl(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,x.B9)(this._autoClosedActions),super.dispose()}updateConfiguration(o){this.context=new za(this._model,this._viewModel,this._coordinatesConverter,o),this._cursors.updateContext(this.context)}onLineMappingChanged(o){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(o,"viewModel",0,this.getCursorStates())}setHasFocus(o){this._hasFocus=o}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const o=this._cursors.getSelections();for(let h=0;h<this._autoClosedActions.length;h++){const A=this._autoClosedActions[h];A.isValid(o)||(A.dispose(),this._autoClosedActions.splice(h,1),h--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(o,h,A,Z){let se=!1;Z!==null&&Z.length>Oa.MAX_CURSOR_COUNT&&(Z=Z.slice(0,Oa.MAX_CURSOR_COUNT),se=!0);const Se=Ca.from(this._model,this);return this._cursors.setStates(Z),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(o,h,A,Se,se)}setCursorColumnSelectData(o){this._columnSelectData=o}revealPrimary(o,h,A,Z,se,Se){const $e=this._cursors.getViewPositions();let rt=null,ht=null;$e.length>1?ht=this._cursors.getViewSelections():rt=Ve.e.fromPositions($e[0],$e[0]),o.emitViewEvent(new vl(h,A,rt,ht,Z,se,Se))}saveState(){const o=[],h=this._cursors.getSelections();for(let A=0,Z=h.length;A<Z;A++){const se=h[A];o.push({inSelectionMode:!se.isEmpty(),selectionStart:{lineNumber:se.selectionStartLineNumber,column:se.selectionStartColumn},position:{lineNumber:se.positionLineNumber,column:se.positionColumn}})}return o}restoreState(o,h){const A=[];for(let Z=0,se=h.length;Z<se;Z++){const Se=h[Z];let $e=1,rt=1;Se.position&&Se.position.lineNumber&&($e=Se.position.lineNumber),Se.position&&Se.position.column&&(rt=Se.position.column);let ht=$e,xt=rt;Se.selectionStart&&Se.selectionStart.lineNumber&&(ht=Se.selectionStart.lineNumber),Se.selectionStart&&Se.selectionStart.column&&(xt=Se.selectionStart.column),A.push({selectionStartLineNumber:ht,selectionStartColumn:xt,positionLineNumber:$e,positionColumn:rt})}this.setStates(o,"restoreState",0,is.Vi.fromModelSelections(A)),this.revealPrimary(o,"restoreState",!1,0,!0,1)}onModelContentChanged(o,h){if(h instanceof fl.D8){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(o,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=h.versionId,this._isHandling)return;const A=h.containsEvent(1);if(this._prevEditOperationType=0,A)this._cursors.dispose(),this._cursors=new hl(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(o,"model",1,null,!1);else if(this._hasFocus&&h.resultingSelection&&h.resultingSelection.length>0){const Z=is.Vi.fromModelSelections(h.resultingSelection);this.setStates(o,"modelChange",h.isUndoing?5:h.isRedoing?6:2,Z)&&this.revealPrimary(o,"modelChange",!1,0,!0,0)}else{const Z=this._cursors.readSelectionFromMarkers();this.setStates(o,"modelChange",2,is.Vi.fromModelSelections(Z))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const o=this._cursors.getPrimaryCursor(),h=o.viewState.selectionStart.getStartPosition(),A=o.viewState.position;return{isReal:!1,fromViewLineNumber:h.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,h),toViewLineNumber:A.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,A)}}getSelections(){return this._cursors.getSelections()}setSelections(o,h,A,Z){this.setStates(o,h,Z,is.Vi.fromModelSelections(A))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(o){this._prevEditOperationType=o}_pushAutoClosedAction(o,h){const A=[],Z=[];for(let $e=0,rt=o.length;$e<rt;$e++)A.push({range:o[$e],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),Z.push({range:h[$e],options:{description:"auto-closed-enclosing",stickiness:1}});const se=this._model.deltaDecorations([],A),Se=this._model.deltaDecorations([],Z);this._autoClosedActions.push(new na(this._model,se,Se))}_executeEditOperation(o){if(!o)return;o.shouldPushStackElementBefore&&this._model.pushStackElement();const h=ia.executeCommands(this._model,this._cursors.getSelections(),o.commands);if(h){this._interpretCommandResult(h);const A=[],Z=[];for(let se=0;se<o.commands.length;se++){const Se=o.commands[se];Se instanceof xl.g&&Se.enclosingRange&&Se.closeCharacterRange&&(A.push(Se.closeCharacterRange),Z.push(Se.enclosingRange))}A.length>0&&this._pushAutoClosedAction(A,Z),this._prevEditOperationType=o.type}o.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(o){(!o||o.length===0)&&(o=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(o),this._cursors.normalize()}_emitStateChangedIfNecessary(o,h,A,Z,se){const Se=Ca.from(this._model,this);if(Se.equals(Z))return!1;const $e=this._cursors.getSelections(),rt=this._cursors.getViewSelections();if(o.emitViewEvent(new eu(rt,$e)),!Z||Z.cursorState.length!==Se.cursorState.length||Se.cursorState.some((ht,xt)=>!ht.modelState.equals(Z.cursorState[xt].modelState))){const ht=Z?Z.cursorState.map(Wt=>Wt.modelState.selection):null,xt=Z?Z.modelVersionId:0;o.emitOutgoingEvent(new Pa(ht,$e,xt,Se.modelVersionId,h||"keyboard",A,se))}return!0}_findAutoClosingPairs(o){if(!o.length)return null;const h=[];for(let A=0,Z=o.length;A<Z;A++){const se=o[A];if(!se.text||se.text.indexOf(`
`)>=0)return null;const Se=se.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!Se)return null;const $e=Se[1],rt=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get($e);if(!rt||rt.length!==1)return null;const ht=rt[0].open,xt=se.text.length-Se[2].length-1,Wt=se.text.lastIndexOf(ht,xt-1);if(Wt===-1)return null;h.push([Wt,xt])}return h}executeEdits(o,h,A,Z){let se=null;h==="snippet"&&(se=this._findAutoClosingPairs(A)),se&&(A[0]._isTracked=!0);const Se=[],$e=[],rt=this._model.pushEditOperations(this.getSelections(),A,ht=>{if(se)for(let Wt=0,qt=se.length;Wt<qt;Wt++){const[on,_n]=se[Wt],Mn=ht[Wt],$n=Mn.range.startLineNumber,vi=Mn.range.startColumn-1+on,Ii=Mn.range.startColumn-1+_n;Se.push(new Ve.e($n,Ii+1,$n,Ii+2)),$e.push(new Ve.e($n,vi+1,$n,Ii+2))}const xt=Z(ht);return xt&&(this._isHandling=!0),xt});rt&&(this._isHandling=!1,this.setSelections(o,h,rt,0)),Se.length>0&&this._pushAutoClosedAction(Se,$e)}_executeEdit(o,h,A,Z=0){if(this.context.cursorConfig.readOnly)return;const se=Ca.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),o()}catch(Se){(0,B.dL)(Se)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(h,A,Z,se,!1)&&this.revealPrimary(h,A,!1,0,!0,0)}setIsDoingComposition(o){this._isDoingComposition=o}getAutoClosedCharacters(){return na.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(o){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(o,h){this._executeEdit(()=>{h==="keyboard"&&(this._executeEditOperation(xl.u.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},o,h)}type(o,h,A){this._executeEdit(()=>{if(A==="keyboard"){const Z=h.length;let se=0;for(;se<Z;){const Se=Sn.vH(h,se),$e=h.substr(se,Se);this._executeEditOperation(xl.u.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),$e)),se+=Se}}else this._executeEditOperation(xl.u.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),h))},o,A)}compositionType(o,h,A,Z,se,Se){if(h.length===0&&A===0&&Z===0){if(se!==0){const $e=this.getSelections().map(rt=>{const ht=rt.getPosition();return new X.Y(ht.lineNumber,ht.column+se,ht.lineNumber,ht.column+se)});this.setSelections(o,Se,$e,0)}return}this._executeEdit(()=>{this._executeEditOperation(xl.u.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),h,A,Z,se))},o,Se)}paste(o,h,A,Z,se){this._executeEdit(()=>{this._executeEditOperation(xl.u.paste(this.context.cursorConfig,this._model,this.getSelections(),h,A,Z||[]))},o,se,4)}cut(o,h){this._executeEdit(()=>{this._executeEditOperation(fc.A.cut(this.context.cursorConfig,this._model,this.getSelections()))},o,h)}executeCommand(o,h,A){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new is.Tp(0,[h],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},o,A)}executeCommands(o,h,A){this._executeEdit(()=>{this._executeEditOperation(new is.Tp(0,h,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},o,A)}}Oa.MAX_CURSOR_COUNT=1e4;class Ca{constructor(o,h){this.modelVersionId=o,this.cursorState=h}static from(o,h){return new Ca(o.getVersionId(),h.getCursorStates())}equals(o){if(!o||this.modelVersionId!==o.modelVersionId||this.cursorState.length!==o.cursorState.length)return!1;for(let h=0,A=this.cursorState.length;h<A;h++)if(!this.cursorState[h].equals(o.cursorState[h]))return!1;return!0}}class na{constructor(o,h,A){this._model=o,this._autoClosedCharactersDecorations=h,this._autoClosedEnclosingDecorations=A}static getAllAutoClosedCharacters(o){let h=[];for(const A of o)h=h.concat(A.getAutoClosedCharactersRanges());return h}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const o=[];for(let h=0;h<this._autoClosedCharactersDecorations.length;h++){const A=this._model.getDecorationRange(this._autoClosedCharactersDecorations[h]);A&&o.push(A)}return o}isValid(o){const h=[];for(let A=0;A<this._autoClosedEnclosingDecorations.length;A++){const Z=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[A]);if(Z&&(h.push(Z),Z.startLineNumber!==Z.endLineNumber))return!1}h.sort(Ve.e.compareRangesUsingStarts),o.sort(Ve.e.compareRangesUsingStarts);for(let A=0;A<o.length;A++)if(A>=h.length||!h[A].strictContainsRange(o[A]))return!1;return!0}}class ia{static executeCommands(o,h,A){const Z={model:o,selectionsBefore:h,trackedRanges:[],trackedRangesDirection:[]},se=this._innerExecuteCommands(Z,A);for(let Se=0,$e=Z.trackedRanges.length;Se<$e;Se++)Z.model._setTrackedRange(Z.trackedRanges[Se],null,0);return se}static _innerExecuteCommands(o,h){if(this._arrayIsEmpty(h))return null;const A=this._getEditOperations(o,h);if(A.operations.length===0)return null;const Z=A.operations,se=this._getLoserCursorMap(Z);if(se.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const Se=[];for(let ht=0,xt=Z.length;ht<xt;ht++)se.hasOwnProperty(Z[ht].identifier.major.toString())||Se.push(Z[ht]);A.hadTrackedEditOperation&&Se.length>0&&(Se[0]._isTracked=!0);let $e=o.model.pushEditOperations(o.selectionsBefore,Se,ht=>{const xt=[];for(let on=0;on<o.selectionsBefore.length;on++)xt[on]=[];for(const on of ht)!on.identifier||xt[on.identifier.major].push(on);const Wt=(on,_n)=>on.identifier.minor-_n.identifier.minor,qt=[];for(let on=0;on<o.selectionsBefore.length;on++)xt[on].length>0?(xt[on].sort(Wt),qt[on]=h[on].computeCursorState(o.model,{getInverseEditOperations:()=>xt[on],getTrackedSelection:_n=>{const Mn=parseInt(_n,10),$n=o.model._getTrackedRange(o.trackedRanges[Mn]);return o.trackedRangesDirection[Mn]===0?new X.Y($n.startLineNumber,$n.startColumn,$n.endLineNumber,$n.endColumn):new X.Y($n.endLineNumber,$n.endColumn,$n.startLineNumber,$n.startColumn)}})):qt[on]=o.selectionsBefore[on];return qt});$e||($e=o.selectionsBefore);const rt=[];for(let ht in se)se.hasOwnProperty(ht)&&rt.push(parseInt(ht,10));rt.sort((ht,xt)=>xt-ht);for(const ht of rt)$e.splice(ht,1);return $e}static _arrayIsEmpty(o){for(let h=0,A=o.length;h<A;h++)if(o[h])return!1;return!0}static _getEditOperations(o,h){let A=[],Z=!1;for(let se=0,Se=h.length;se<Se;se++){const $e=h[se];if($e){const rt=this._getEditOperationsFromCommand(o,se,$e);A=A.concat(rt.operations),Z=Z||rt.hadTrackedEditOperation}}return{operations:A,hadTrackedEditOperation:Z}}static _getEditOperationsFromCommand(o,h,A){const Z=[];let se=0;const Se=(Wt,qt,on=!1)=>{Ve.e.isEmpty(Wt)&&qt===""||Z.push({identifier:{major:h,minor:se++},range:Wt,text:qt,forceMoveMarkers:on,isAutoWhitespaceEdit:A.insertsAutoWhitespace})};let $e=!1;const xt={addEditOperation:Se,addTrackedEditOperation:(Wt,qt,on)=>{$e=!0,Se(Wt,qt,on)},trackSelection:(Wt,qt)=>{const on=X.Y.liftSelection(Wt);let _n;if(on.isEmpty())if(typeof qt=="boolean")qt?_n=2:_n=3;else{const vi=o.model.getLineMaxColumn(on.startLineNumber);on.startColumn===vi?_n=2:_n=3}else _n=1;const Mn=o.trackedRanges.length,$n=o.model._setTrackedRange(null,on,_n);return o.trackedRanges[Mn]=$n,o.trackedRangesDirection[Mn]=on.getDirection(),Mn.toString()}};try{A.getEditOperations(o.model,xt)}catch(Wt){return(0,B.dL)(Wt),{operations:[],hadTrackedEditOperation:!1}}return{operations:Z,hadTrackedEditOperation:$e}}static _getLoserCursorMap(o){o=o.slice(0),o.sort((A,Z)=>-Ve.e.compareRangesUsingEnds(A.range,Z.range));const h={};for(let A=1;A<o.length;A++){const Z=o[A-1],se=o[A];if(Ve.e.getStartPosition(Z.range).isBefore(Ve.e.getEndPosition(se.range))){let Se;Z.identifier.major>se.identifier.major?Se=Z.identifier.major:Se=se.identifier.major,h[Se.toString()]=!0;for(let $e=0;$e<o.length;$e++)o[$e].identifier.major===Se&&(o.splice($e,1),$e<A&&A--,$e--);A>0&&A--}}return h}}var Lu=a(30653),$l=a(96518),os=a(29102),So=a(68801),zo=a(82963),bs=a(76633);class Ws{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(o){this._hasPending=!0,this._inserts.push(o)}change(o){this._hasPending=!0,this._changes.push(o)}remove(o){this._hasPending=!0,this._removes.push(o)}mustCommit(){return this._hasPending}commit(o){if(!this._hasPending)return;const h=this._inserts,A=this._changes,Z=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],o._commitPendingChanges(h,A,Z)}}class aa{constructor(o,h,A,Z,se){this.id=o,this.afterLineNumber=h,this.ordinal=A,this.height=Z,this.minWidth=se,this.prefixSum=0}}class ks{constructor(o,h,A,Z){this._instanceId=Sn.PJ(++ks.INSTANCE_COUNT),this._pendingChanges=new Ws,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=o,this._lineHeight=h,this._paddingTop=A,this._paddingBottom=Z}static findInsertionIndex(o,h,A){let Z=0,se=o.length;for(;Z<se;){const Se=Z+se>>>1;h===o[Se].afterLineNumber?A<o[Se].ordinal?se=Se:Z=Se+1:h<o[Se].afterLineNumber?se=Se:Z=Se+1}return Z}setLineHeight(o){this._checkPendingChanges(),this._lineHeight=o}setPadding(o,h){this._paddingTop=o,this._paddingBottom=h}onFlushed(o){this._checkPendingChanges(),this._lineCount=o}changeWhitespace(o){let h=!1;try{o({insertWhitespace:(Z,se,Se,$e)=>{h=!0,Z=Z|0,se=se|0,Se=Se|0,$e=$e|0;const rt=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new aa(rt,Z,se,Se,$e)),rt},changeOneWhitespace:(Z,se,Se)=>{h=!0,se=se|0,Se=Se|0,this._pendingChanges.change({id:Z,newAfterLineNumber:se,newHeight:Se})},removeWhitespace:Z=>{h=!0,this._pendingChanges.remove({id:Z})}})}finally{this._pendingChanges.commit(this)}return h}_commitPendingChanges(o,h,A){if((o.length>0||A.length>0)&&(this._minWidth=-1),o.length+h.length+A.length<=1){for(const rt of o)this._insertWhitespace(rt);for(const rt of h)this._changeOneWhitespace(rt.id,rt.newAfterLineNumber,rt.newHeight);for(const rt of A){const ht=this._findWhitespaceIndex(rt.id);ht!==-1&&this._removeWhitespace(ht)}return}const Z=new Set;for(const rt of A)Z.add(rt.id);const se=new Map;for(const rt of h)se.set(rt.id,rt);const Se=rt=>{const ht=[];for(const xt of rt)if(!Z.has(xt.id)){if(se.has(xt.id)){const Wt=se.get(xt.id);xt.afterLineNumber=Wt.newAfterLineNumber,xt.height=Wt.newHeight}ht.push(xt)}return ht},$e=Se(this._arr).concat(Se(o));$e.sort((rt,ht)=>rt.afterLineNumber===ht.afterLineNumber?rt.ordinal-ht.ordinal:rt.afterLineNumber-ht.afterLineNumber),this._arr=$e,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(o){const h=ks.findInsertionIndex(this._arr,o.afterLineNumber,o.ordinal);this._arr.splice(h,0,o),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,h-1)}_findWhitespaceIndex(o){const h=this._arr;for(let A=0,Z=h.length;A<Z;A++)if(h[A].id===o)return A;return-1}_changeOneWhitespace(o,h,A){const Z=this._findWhitespaceIndex(o);if(Z!==-1&&(this._arr[Z].height!==A&&(this._arr[Z].height=A,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,Z-1)),this._arr[Z].afterLineNumber!==h)){const se=this._arr[Z];this._removeWhitespace(Z),se.afterLineNumber=h,this._insertWhitespace(se)}}_removeWhitespace(o){this._arr.splice(o,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,o-1)}onLinesDeleted(o,h){this._checkPendingChanges(),o=o|0,h=h|0,this._lineCount-=h-o+1;for(let A=0,Z=this._arr.length;A<Z;A++){const se=this._arr[A].afterLineNumber;o<=se&&se<=h?this._arr[A].afterLineNumber=o-1:se>h&&(this._arr[A].afterLineNumber-=h-o+1)}}onLinesInserted(o,h){this._checkPendingChanges(),o=o|0,h=h|0,this._lineCount+=h-o+1;for(let A=0,Z=this._arr.length;A<Z;A++){const se=this._arr[A].afterLineNumber;o<=se&&(this._arr[A].afterLineNumber+=h-o+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(o){this._checkPendingChanges(),o=o|0;let h=Math.max(0,this._prefixSumValidIndex+1);h===0&&(this._arr[0].prefixSum=this._arr[0].height,h++);for(let A=h;A<=o;A++)this._arr[A].prefixSum=this._arr[A-1].prefixSum+this._arr[A].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,o),this._arr[o].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const o=this._lineHeight*this._lineCount,h=this.getWhitespacesTotalHeight();return o+h+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(o){this._checkPendingChanges(),o=o|0;const h=this._findLastWhitespaceBeforeLineNumber(o);return h===-1?0:this.getWhitespacesAccumulatedHeight(h)}_findLastWhitespaceBeforeLineNumber(o){o=o|0;const h=this._arr;let A=0,Z=h.length-1;for(;A<=Z;){const Se=(Z-A|0)/2|0,$e=A+Se|0;if(h[$e].afterLineNumber<o){if($e+1>=h.length||h[$e+1].afterLineNumber>=o)return $e;A=$e+1|0}else Z=$e-1|0}return-1}_findFirstWhitespaceAfterLineNumber(o){o=o|0;const A=this._findLastWhitespaceBeforeLineNumber(o)+1;return A<this._arr.length?A:-1}getFirstWhitespaceIndexAfterLineNumber(o){return this._checkPendingChanges(),o=o|0,this._findFirstWhitespaceAfterLineNumber(o)}getVerticalOffsetForLineNumber(o){this._checkPendingChanges(),o=o|0;let h;o>1?h=this._lineHeight*(o-1):h=0;const A=this.getWhitespaceAccumulatedHeightBeforeLineNumber(o);return h+A+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let o=0;for(let h=0,A=this._arr.length;h<A;h++)o=Math.max(o,this._arr[h].minWidth);this._minWidth=o}return this._minWidth}isAfterLines(o){this._checkPendingChanges();const h=this.getLinesTotalHeight();return o>h}isInTopPadding(o){return this._paddingTop===0?!1:(this._checkPendingChanges(),o<this._paddingTop)}isInBottomPadding(o){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const h=this.getLinesTotalHeight();return o>=h-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(o){if(this._checkPendingChanges(),o=o|0,o<0)return 1;const h=this._lineCount|0,A=this._lineHeight;let Z=1,se=h;for(;Z<se;){const Se=(Z+se)/2|0,$e=this.getVerticalOffsetForLineNumber(Se)|0;if(o>=$e+A)Z=Se+1;else{if(o>=$e)return Se;se=Se}}return Z>h?h:Z}getLinesViewportData(o,h){this._checkPendingChanges(),o=o|0,h=h|0;const A=this._lineHeight,Z=this.getLineNumberAtOrAfterVerticalOffset(o)|0,se=this.getVerticalOffsetForLineNumber(Z)|0;let Se=this._lineCount|0,$e=this.getFirstWhitespaceIndexAfterLineNumber(Z)|0;const rt=this.getWhitespacesCount()|0;let ht,xt;$e===-1?($e=rt,xt=Se+1,ht=0):(xt=this.getAfterLineNumberForWhitespaceIndex($e)|0,ht=this.getHeightForWhitespaceIndex($e)|0);let Wt=se,qt=Wt;const on=5e5;let _n=0;se>=on&&(_n=Math.floor(se/on)*on,_n=Math.floor(_n/A)*A,qt-=_n);const Mn=[],$n=o+(h-o)/2;let vi=-1;for(let or=Z;or<=Se;or++){if(vi===-1){const Tr=Wt,Er=Wt+A;(Tr<=$n&&$n<Er||Tr>$n)&&(vi=or)}for(Wt+=A,Mn[or-Z]=qt,qt+=A;xt===or;)qt+=ht,Wt+=ht,$e++,$e>=rt?xt=Se+1:(xt=this.getAfterLineNumberForWhitespaceIndex($e)|0,ht=this.getHeightForWhitespaceIndex($e)|0);if(Wt>=h){Se=or;break}}vi===-1&&(vi=Se);const Ii=this.getVerticalOffsetForLineNumber(Se)|0;let Di=Z,mr=Se;return Di<mr&&se<o&&Di++,Di<mr&&Ii+A>h&&mr--,{bigNumbersDelta:_n,startLineNumber:Z,endLineNumber:Se,relativeVerticalOffset:Mn,centeredLineNumber:vi,completelyVisibleStartLineNumber:Di,completelyVisibleEndLineNumber:mr}}getVerticalOffsetForWhitespaceIndex(o){this._checkPendingChanges(),o=o|0;const h=this.getAfterLineNumberForWhitespaceIndex(o);let A;h>=1?A=this._lineHeight*h:A=0;let Z;return o>0?Z=this.getWhitespacesAccumulatedHeight(o-1):Z=0,A+Z+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(o){this._checkPendingChanges(),o=o|0;let h=0,A=this.getWhitespacesCount()-1;if(A<0)return-1;const Z=this.getVerticalOffsetForWhitespaceIndex(A),se=this.getHeightForWhitespaceIndex(A);if(o>=Z+se)return-1;for(;h<A;){const Se=Math.floor((h+A)/2),$e=this.getVerticalOffsetForWhitespaceIndex(Se),rt=this.getHeightForWhitespaceIndex(Se);if(o>=$e+rt)h=Se+1;else{if(o>=$e)return Se;A=Se}}return h}getWhitespaceAtVerticalOffset(o){this._checkPendingChanges(),o=o|0;const h=this.getWhitespaceIndexAtOrAfterVerticallOffset(o);if(h<0||h>=this.getWhitespacesCount())return null;const A=this.getVerticalOffsetForWhitespaceIndex(h);if(A>o)return null;const Z=this.getHeightForWhitespaceIndex(h),se=this.getIdForWhitespaceIndex(h),Se=this.getAfterLineNumberForWhitespaceIndex(h);return{id:se,afterLineNumber:Se,verticalOffset:A,height:Z}}getWhitespaceViewportData(o,h){this._checkPendingChanges(),o=o|0,h=h|0;const A=this.getWhitespaceIndexAtOrAfterVerticallOffset(o),Z=this.getWhitespacesCount()-1;if(A<0)return[];const se=[];for(let Se=A;Se<=Z;Se++){const $e=this.getVerticalOffsetForWhitespaceIndex(Se),rt=this.getHeightForWhitespaceIndex(Se);if($e>=h)break;se.push({id:this.getIdForWhitespaceIndex(Se),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(Se),verticalOffset:$e,height:rt})}return se}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(o){return this._checkPendingChanges(),o=o|0,this._arr[o].id}getAfterLineNumberForWhitespaceIndex(o){return this._checkPendingChanges(),o=o|0,this._arr[o].afterLineNumber}getHeightForWhitespaceIndex(o){return this._checkPendingChanges(),o=o|0,this._arr[o].height}}ks.INSTANCE_COUNT=0;const tl=125;class Nl{constructor(o,h,A,Z){o=o|0,h=h|0,A=A|0,Z=Z|0,o<0&&(o=0),h<0&&(h=0),A<0&&(A=0),Z<0&&(Z=0),this.width=o,this.contentWidth=h,this.scrollWidth=Math.max(o,h),this.height=A,this.contentHeight=Z,this.scrollHeight=Math.max(A,Z)}equals(o){return this.width===o.width&&this.contentWidth===o.contentWidth&&this.height===o.height&&this.contentHeight===o.contentHeight}}class ra extends x.JT{constructor(o,h){super();this._onDidContentSizeChange=this._register(new F.Q5),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Nl(0,0,0,0),this._scrollable=this._register(new bs.Rm({forceIntegerValues:!0,smoothScrollDuration:o,scheduleAtNextAnimationFrame:h})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(o){this._scrollable.setSmoothScrollDuration(o)}validateScrollPosition(o){return this._scrollable.validateScrollPosition(o)}getScrollDimensions(){return this._dimensions}setScrollDimensions(o){if(this._dimensions.equals(o))return;const h=this._dimensions;this._dimensions=o,this._scrollable.setScrollDimensions({width:o.width,scrollWidth:o.scrollWidth,height:o.height,scrollHeight:o.scrollHeight},!0);const A=h.contentWidth!==o.contentWidth,Z=h.contentHeight!==o.contentHeight;(A||Z)&&this._onDidContentSizeChange.fire(new nu(h.contentWidth,h.contentHeight,o.contentWidth,o.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(o){this._scrollable.setScrollPositionNow(o)}setScrollPositionSmooth(o){this._scrollable.setScrollPositionSmooth(o)}}class dh extends x.JT{constructor(o,h,A){super();this._configuration=o;const Z=this._configuration.options,se=Z.get(131),Se=Z.get(75);this._linesLayout=new ks(h,Z.get(59),Se.top,Se.bottom),this._scrollable=this._register(new ra(0,A)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Nl(se.contentWidth,0,se.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(103)?tl:0)}onConfigurationChanged(o){const h=this._configuration.options;if(o.hasChanged(59)&&this._linesLayout.setLineHeight(h.get(59)),o.hasChanged(75)){const A=h.get(75);this._linesLayout.setPadding(A.top,A.bottom)}if(o.hasChanged(131)){const A=h.get(131),Z=A.contentWidth,se=A.height,Se=this._scrollable.getScrollDimensions(),$e=Se.contentWidth;this._scrollable.setScrollDimensions(new Nl(Z,Se.contentWidth,se,this._getContentHeight(Z,se,$e)))}else this._updateHeight();o.hasChanged(103)&&this._configureSmoothScrollDuration()}onFlushed(o){this._linesLayout.onFlushed(o)}onLinesDeleted(o,h){this._linesLayout.onLinesDeleted(o,h)}onLinesInserted(o,h){this._linesLayout.onLinesInserted(o,h)}_getHorizontalScrollbarHeight(o,h){const Z=this._configuration.options.get(92);return Z.horizontal===2||o>=h?0:Z.horizontalScrollbarSize}_getContentHeight(o,h,A){const Z=this._configuration.options;let se=this._linesLayout.getLinesTotalHeight();return Z.get(94)?se+=Math.max(0,h-Z.get(59)-Z.get(75).bottom):se+=this._getHorizontalScrollbarHeight(o,A),se}_updateHeight(){const o=this._scrollable.getScrollDimensions(),h=o.width,A=o.height,Z=o.contentWidth;this._scrollable.setScrollDimensions(new Nl(h,o.contentWidth,A,this._getContentHeight(h,A,Z)))}getCurrentViewport(){const o=this._scrollable.getScrollDimensions(),h=this._scrollable.getCurrentScrollPosition();return new en.l_(h.scrollTop,h.scrollLeft,o.width,o.height)}getFutureViewport(){const o=this._scrollable.getScrollDimensions(),h=this._scrollable.getFutureScrollPosition();return new en.l_(h.scrollTop,h.scrollLeft,o.width,o.height)}_computeContentWidth(o){const h=this._configuration.options,A=h.get(132),Z=h.get(44);if(A.isViewportWrapping){const se=h.get(131),Se=h.get(65);return o>se.contentWidth+Z.typicalHalfwidthCharacterWidth&&Se.enabled&&Se.side==="right"?o+se.verticalScrollbarWidth:o}else{const se=h.get(93)*Z.typicalHalfwidthCharacterWidth,Se=this._linesLayout.getWhitespaceMinWidth();return Math.max(o+se,Se)}}setMaxLineWidth(o){const h=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Nl(h.width,this._computeContentWidth(o),h.height,h.contentHeight)),this._updateHeight()}saveState(){const o=this._scrollable.getFutureScrollPosition(),h=o.scrollTop,A=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(h),Z=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(A);return{scrollTop:h,scrollTopWithoutViewZones:h-Z,scrollLeft:o.scrollLeft}}changeWhitespace(o){const h=this._linesLayout.changeWhitespace(o);return h&&this.onHeightMaybeChanged(),h}getVerticalOffsetForLineNumber(o){return this._linesLayout.getVerticalOffsetForLineNumber(o)}isAfterLines(o){return this._linesLayout.isAfterLines(o)}isInTopPadding(o){return this._linesLayout.isInTopPadding(o)}isInBottomPadding(o){return this._linesLayout.isInBottomPadding(o)}getLineNumberAtVerticalOffset(o){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(o)}getWhitespaceAtVerticalOffset(o){return this._linesLayout.getWhitespaceAtVerticalOffset(o)}getLinesViewportData(){const o=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(o.top,o.top+o.height)}getLinesViewportDataAtScrollTop(o){const h=this._scrollable.getScrollDimensions();return o+h.height>h.scrollHeight&&(o=h.scrollHeight-h.height),o<0&&(o=0),this._linesLayout.getLinesViewportData(o,o+h.height)}getWhitespaceViewportData(){const o=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(o.top,o.top+o.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(o){return this._scrollable.validateScrollPosition(o)}setScrollPosition(o,h){h===1?this._scrollable.setScrollPositionNow(o):this._scrollable.setScrollPositionSmooth(o)}deltaScrollNow(o,h){const A=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:A.scrollLeft+o,scrollTop:A.scrollTop+h})}}var hh=a(30168),nd=a(45146),qh=a(77378);function Zo(Ut,o){return Ut===null?o?iu.INSTANCE:_l.INSTANCE:new Fc(Ut,o)}class Fc{constructor(o,h){this._projectionData=o,this._isVisible=h}isVisible(){return this._isVisible}setVisible(o){return this._isVisible=o,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(o,h,A){this._assertVisible();const Z=A>0?this._projectionData.breakOffsets[A-1]:0,se=this._projectionData.breakOffsets[A];let Se;if(this._projectionData.injectionOffsets!==null){const $e=this._projectionData.injectionOffsets.map((ht,xt)=>new fl.gk(0,0,ht+1,this._projectionData.injectionOptions[xt],0));Se=fl.gk.applyInjectedText(o.getLineContent(h),$e).substring(Z,se)}else Se=o.getValueInRange({startLineNumber:h,startColumn:Z+1,endLineNumber:h,endColumn:se+1});return A>0&&(Se=Tl(this._projectionData.wrappedTextIndentLength)+Se),Se}getViewLineLength(o,h,A){return this._assertVisible(),this._projectionData.getLineLength(A)}getViewLineMinColumn(o,h,A){return this._assertVisible(),this._projectionData.getMinOutputOffset(A)+1}getViewLineMaxColumn(o,h,A){return this._assertVisible(),this._projectionData.getMaxOutputOffset(A)+1}getViewLineData(o,h,A){const Z=new Array;return this.getViewLinesData(o,h,A,1,0,[!0],Z),Z[0]}getViewLinesData(o,h,A,Z,se,Se,$e){this._assertVisible();const rt=this._projectionData,ht=rt.injectionOffsets,xt=rt.injectionOptions;let Wt=null;if(ht){Wt=[];let on=0,_n=0;for(let Mn=0;Mn<rt.getOutputLineCount();Mn++){const $n=new Array;Wt[Mn]=$n;const vi=Mn>0?rt.breakOffsets[Mn-1]:0,Ii=rt.breakOffsets[Mn];for(;_n<ht.length;){const Di=xt[_n].content.length,mr=ht[_n]+on,or=mr+Di;if(mr>Ii)break;if(vi<or){const Tr=xt[_n];if(Tr.inlineClassName){const Er=Mn>0?rt.wrappedTextIndentLength:0,cr=Er+Math.max(mr-vi,0),Or=Er+Math.min(or-vi,Ii);cr!==Or&&$n.push(new en.Wx(cr,Or,Tr.inlineClassName,Tr.inlineClassNameAffectsLetterSpacing))}}if(or<=Ii)on+=Di,_n++;else break}}}let qt;ht?qt=o.getLineTokens(h).withInserted(ht.map((on,_n)=>({offset:on,text:xt[_n].content,tokenMetadata:qh.A.defaultTokenMetadata}))):qt=o.getLineTokens(h);for(let on=A;on<A+Z;on++){const _n=se+on-A;if(!Se[_n]){$e[_n]=null;continue}$e[_n]=this._getViewLineData(qt,Wt?Wt[on]:null,on)}}_getViewLineData(o,h,A){this._assertVisible();const Z=this._projectionData,se=A>0?Z.wrappedTextIndentLength:0,Se=A>0?Z.breakOffsets[A-1]:0,$e=Z.breakOffsets[A],rt=o.sliceAndInflate(Se,$e,se);let ht=rt.getLineContent();A>0&&(ht=Tl(Z.wrappedTextIndentLength)+ht);const xt=this._projectionData.getMinOutputOffset(A)+1,Wt=ht.length+1,qt=A+1<this.getViewLineCount(),on=A===0?0:Z.breakOffsetsVisibleColumn[A-1];return new en.IP(ht,qt,xt,Wt,on,rt,h)}getModelColumnOfViewPosition(o,h){return this._assertVisible(),this._projectionData.translateToInputOffset(o,h-1)+1}getViewPositionOfModelPosition(o,h,A=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(h-1,A).toPosition(o)}getViewLineNumberOfModelPosition(o,h){this._assertVisible();const A=this._projectionData.translateToOutputPosition(h-1);return o+A.outputLineIndex}normalizePosition(o,h,A){const Z=h.lineNumber-o;return this._projectionData.normalizeOutputPosition(o,h.column-1,A).toPosition(Z)}getInjectedTextAt(o,h){return this._projectionData.getInjectedText(o,h-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class iu{constructor(){}isVisible(){return!0}setVisible(o){return o?this:_l.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(o,h,A){return o.getLineContent(h)}getViewLineLength(o,h,A){return o.getLineLength(h)}getViewLineMinColumn(o,h,A){return o.getLineMinColumn(h)}getViewLineMaxColumn(o,h,A){return o.getLineMaxColumn(h)}getViewLineData(o,h,A){const Z=o.getLineTokens(h),se=Z.getLineContent();return new en.IP(se,!1,1,se.length+1,0,Z.inflate(),null)}getViewLinesData(o,h,A,Z,se,Se,$e){if(!Se[se]){$e[se]=null;return}$e[se]=this.getViewLineData(o,h,0)}getModelColumnOfViewPosition(o,h){return h}getViewPositionOfModelPosition(o,h){return new Re.L(o,h)}getViewLineNumberOfModelPosition(o,h){return o}normalizePosition(o,h,A){return h}getInjectedTextAt(o,h){return null}}iu.INSTANCE=new iu;class _l{constructor(){}isVisible(){return!1}setVisible(o){return o?iu.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(o,h,A){throw new Error("Not supported")}getViewLineLength(o,h,A){throw new Error("Not supported")}getViewLineMinColumn(o,h,A){throw new Error("Not supported")}getViewLineMaxColumn(o,h,A){throw new Error("Not supported")}getViewLineData(o,h,A){throw new Error("Not supported")}getViewLinesData(o,h,A,Z,se,Se,$e){throw new Error("Not supported")}getModelColumnOfViewPosition(o,h){throw new Error("Not supported")}getViewPositionOfModelPosition(o,h){throw new Error("Not supported")}getViewLineNumberOfModelPosition(o,h){throw new Error("Not supported")}normalizePosition(o,h,A){throw new Error("Not supported")}getInjectedTextAt(o,h){throw new Error("Not supported")}}_l.INSTANCE=new _l;let ba=[""];function Tl(Ut){if(Ut>=ba.length)for(let o=1;o<=Ut;o++)ba[o]=id(o);return ba[Ut]}function id(Ut){return new Array(Ut+1).join(" ")}var ru=a(90310);class Du{constructor(o,h,A,Z,se,Se,$e,rt,ht){this._editorId=o,this.model=h,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=A,this._monospaceLineBreaksComputerFactory=Z,this.fontInfo=se,this.tabSize=Se,this.wrappingStrategy=$e,this.wrappingColumn=rt,this.wrappingIndent=ht,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new fh(this)}_constructLines(o,h){this.modelLineProjections=[],o&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const A=this.model.getLinesContent(),Z=this.model.getInjectedTextDecorations(this._editorId),se=A.length,Se=this.createLineBreaksComputer(),$e=new D.H9(fl.gk.fromDecorations(Z));for(let Mn=0;Mn<se;Mn++){const $n=$e.takeWhile(vi=>vi.lineNumber===Mn+1);Se.addRequest(A[Mn],$n,h?h[Mn]:null)}const rt=Se.finalize(),ht=[],xt=this.hiddenAreasDecorationIds.map(Mn=>this.model.getDecorationRange(Mn)).sort(Ve.e.compareRangesUsingStarts);let Wt=1,qt=0,on=-1,_n=on+1<xt.length?qt+1:se+2;for(let Mn=0;Mn<se;Mn++){const $n=Mn+1;$n===_n&&(on++,Wt=xt[on].startLineNumber,qt=xt[on].endLineNumber,_n=on+1<xt.length?qt+1:se+2);const vi=$n>=Wt&&$n<=qt,Ii=Zo(rt[Mn],!vi);ht[Mn]=Ii.getViewLineCount(),this.modelLineProjections[Mn]=Ii}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new ru.Ck(ht)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(o=>this.model.getDecorationRange(o))}setHiddenAreas(o){const h=o.map(qt=>this.model.validateRange(qt)),A=xa(h),Z=this.hiddenAreasDecorationIds.map(qt=>this.model.getDecorationRange(qt)).sort(Ve.e.compareRangesUsingStarts);if(A.length===Z.length){let qt=!1;for(let on=0;on<A.length;on++)if(!A[on].equalsRange(Z[on])){qt=!0;break}if(!qt)return!1}const se=A.map(qt=>({range:qt,options:nd.qx.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,se);const Se=A;let $e=1,rt=0,ht=-1,xt=ht+1<Se.length?rt+1:this.modelLineProjections.length+2,Wt=!1;for(let qt=0;qt<this.modelLineProjections.length;qt++){const on=qt+1;on===xt&&(ht++,$e=Se[ht].startLineNumber,rt=Se[ht].endLineNumber,xt=ht+1<Se.length?rt+1:this.modelLineProjections.length+2);let _n=!1;if(on>=$e&&on<=rt?this.modelLineProjections[qt].isVisible()&&(this.modelLineProjections[qt]=this.modelLineProjections[qt].setVisible(!1),_n=!0):(Wt=!0,this.modelLineProjections[qt].isVisible()||(this.modelLineProjections[qt]=this.modelLineProjections[qt].setVisible(!0),_n=!0)),_n){const Mn=this.modelLineProjections[qt].getViewLineCount();this.projectedModelLineLineCounts.setValue(qt,Mn)}}return Wt||this.setHiddenAreas([]),!0}modelPositionIsVisible(o,h){return o<1||o>this.modelLineProjections.length?!1:this.modelLineProjections[o-1].isVisible()}getModelLineViewLineCount(o){return o<1||o>this.modelLineProjections.length?1:this.modelLineProjections[o-1].getViewLineCount()}setTabSize(o){return this.tabSize===o?!1:(this.tabSize=o,this._constructLines(!1,null),!0)}setWrappingSettings(o,h,A,Z){const se=this.fontInfo.equals(o),Se=this.wrappingStrategy===h,$e=this.wrappingColumn===A,rt=this.wrappingIndent===Z;if(se&&Se&&$e&&rt)return!1;const ht=se&&Se&&!$e&&rt;this.fontInfo=o,this.wrappingStrategy=h,this.wrappingColumn=A,this.wrappingIndent=Z;let xt=null;if(ht){xt=[];for(let Wt=0,qt=this.modelLineProjections.length;Wt<qt;Wt++)xt[Wt]=this.modelLineProjections[Wt].getProjectionData()}return this._constructLines(!1,xt),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(o,h,A){if(!o||o<=this._validModelVersionId)return null;const Z=h===1?1:this.projectedModelLineLineCounts.getPrefixSum(h-1)+1,se=this.projectedModelLineLineCounts.getPrefixSum(A);return this.modelLineProjections.splice(h-1,A-h+1),this.projectedModelLineLineCounts.removeValues(h-1,A-h+1),new pl(Z,se)}onModelLinesInserted(o,h,A,Z){if(!o||o<=this._validModelVersionId)return null;const se=h>2&&!this.modelLineProjections[h-2].isVisible(),Se=h===1?1:this.projectedModelLineLineCounts.getPrefixSum(h-1)+1;let $e=0;const rt=[],ht=[];for(let xt=0,Wt=Z.length;xt<Wt;xt++){const qt=Zo(Z[xt],!se);rt.push(qt);const on=qt.getViewLineCount();$e+=on,ht[xt]=on}return this.modelLineProjections=this.modelLineProjections.slice(0,h-1).concat(rt).concat(this.modelLineProjections.slice(h-1)),this.projectedModelLineLineCounts.insertValues(h-1,ht),new el(Se,Se+$e-1)}onModelLineChanged(o,h,A){if(o!==null&&o<=this._validModelVersionId)return[!1,null,null,null];const Z=h-1,se=this.modelLineProjections[Z].getViewLineCount(),Se=this.modelLineProjections[Z].isVisible(),$e=Zo(A,Se);this.modelLineProjections[Z]=$e;const rt=this.modelLineProjections[Z].getViewLineCount();let ht=!1,xt=0,Wt=-1,qt=0,on=-1,_n=0,Mn=-1;se>rt?(xt=this.projectedModelLineLineCounts.getPrefixSum(h-1)+1,Wt=xt+rt-1,_n=Wt+1,Mn=_n+(se-rt)-1,ht=!0):se<rt?(xt=this.projectedModelLineLineCounts.getPrefixSum(h-1)+1,Wt=xt+se-1,qt=Wt+1,on=qt+(rt-se)-1,ht=!0):(xt=this.projectedModelLineLineCounts.getPrefixSum(h-1)+1,Wt=xt+rt-1),this.projectedModelLineLineCounts.setValue(Z,rt);const $n=xt<=Wt?new ml(xt,Wt):null,vi=qt<=on?new el(qt,on):null,Ii=_n<=Mn?new pl(_n,Mn):null;return[ht,$n,vi,Ii]}acceptVersionId(o){this._validModelVersionId=o,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(o){if(o<1)return 1;const h=this.getViewLineCount();return o>h?h:o|0}getActiveIndentGuide(o,h,A){o=this._toValidViewLineNumber(o),h=this._toValidViewLineNumber(h),A=this._toValidViewLineNumber(A);const Z=this.convertViewPositionToModelPosition(o,this.getViewLineMinColumn(o)),se=this.convertViewPositionToModelPosition(h,this.getViewLineMinColumn(h)),Se=this.convertViewPositionToModelPosition(A,this.getViewLineMinColumn(A)),$e=this.model.guides.getActiveIndentGuide(Z.lineNumber,se.lineNumber,Se.lineNumber),rt=this.convertModelPositionToViewPosition($e.startLineNumber,1),ht=this.convertModelPositionToViewPosition($e.endLineNumber,this.model.getLineMaxColumn($e.endLineNumber));return{startLineNumber:rt.lineNumber,endLineNumber:ht.lineNumber,indent:$e.indent}}getViewLineInfo(o){o=this._toValidViewLineNumber(o);const h=this.projectedModelLineLineCounts.getIndexOf(o-1),A=h.index,Z=h.remainder;return new rd(A+1,Z)}getMinColumnOfViewLine(o){return this.modelLineProjections[o.modelLineNumber-1].getViewLineMinColumn(this.model,o.modelLineNumber,o.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(o){const h=this.modelLineProjections[o.modelLineNumber-1],A=h.getViewLineMinColumn(this.model,o.modelLineNumber,o.modelLineWrappedLineIdx),Z=h.getModelColumnOfViewPosition(o.modelLineWrappedLineIdx,A);return new Re.L(o.modelLineNumber,Z)}getModelEndPositionOfViewLine(o){const h=this.modelLineProjections[o.modelLineNumber-1],A=h.getViewLineMaxColumn(this.model,o.modelLineNumber,o.modelLineWrappedLineIdx),Z=h.getModelColumnOfViewPosition(o.modelLineWrappedLineIdx,A);return new Re.L(o.modelLineNumber,Z)}getViewLineInfosGroupedByModelRanges(o,h){const A=this.getViewLineInfo(o),Z=this.getViewLineInfo(h),se=new Array;let Se=this.getModelStartPositionOfViewLine(A),$e=new Array;for(let rt=A.modelLineNumber;rt<=Z.modelLineNumber;rt++){const ht=this.modelLineProjections[rt-1];if(ht.isVisible()){const xt=rt===A.modelLineNumber?A.modelLineWrappedLineIdx:0,Wt=rt===Z.modelLineNumber?Z.modelLineWrappedLineIdx+1:ht.getViewLineCount();for(let qt=xt;qt<Wt;qt++)$e.push(new rd(rt,qt))}if(!ht.isVisible()&&Se){const xt=new Re.L(rt-1,this.model.getLineMaxColumn(rt-1)+1),Wt=Ve.e.fromPositions(Se,xt);se.push(new nl(Wt,$e)),$e=[],Se=null}else ht.isVisible()&&!Se&&(Se=new Re.L(rt,1))}if(Se){const rt=Ve.e.fromPositions(Se,this.getModelEndPositionOfViewLine(Z));se.push(new nl(rt,$e))}return se}getViewLinesBracketGuides(o,h,A,Z){const se=A?this.convertViewPositionToModelPosition(A.lineNumber,A.column):null,Se=[];for(const $e of this.getViewLineInfosGroupedByModelRanges(o,h)){const rt=$e.modelRange.startLineNumber,ht=this.model.guides.getLinesBracketGuides(rt,$e.modelRange.endLineNumber,se,Z);for(const xt of $e.viewLines)if(xt.isWrappedLineContinuation&&this.getMinColumnOfViewLine(xt)===1)Se.push([]);else{let Wt=ht[xt.modelLineNumber-rt];Wt=Wt.map(qt=>qt.horizontalLine?new tr.UO(qt.visibleColumn,qt.className,new tr.vW(qt.horizontalLine.top,this.convertModelPositionToViewPosition(xt.modelLineNumber,qt.horizontalLine.endColumn).column)):qt),Se.push(Wt)}}return Se}getViewLinesIndentGuides(o,h){o=this._toValidViewLineNumber(o),h=this._toValidViewLineNumber(h);const A=this.convertViewPositionToModelPosition(o,this.getViewLineMinColumn(o)),Z=this.convertViewPositionToModelPosition(h,this.getViewLineMaxColumn(h));let se=[];const Se=[],$e=[],rt=A.lineNumber-1,ht=Z.lineNumber-1;let xt=null;for(let _n=rt;_n<=ht;_n++){const Mn=this.modelLineProjections[_n];if(Mn.isVisible()){const $n=Mn.getViewLineNumberOfModelPosition(0,_n===rt?A.column:1),vi=Mn.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(_n+1)),Ii=vi-$n+1;let Di=0;Ii>1&&Mn.getViewLineMinColumn(this.model,_n+1,vi)===1&&(Di=$n===0?1:2),Se.push(Ii),$e.push(Di),xt===null&&(xt=new Re.L(_n+1,0))}else xt!==null&&(se=se.concat(this.model.guides.getLinesIndentGuides(xt.lineNumber,_n)),xt=null)}xt!==null&&(se=se.concat(this.model.guides.getLinesIndentGuides(xt.lineNumber,Z.lineNumber)),xt=null);const Wt=h-o+1,qt=new Array(Wt);let on=0;for(let _n=0,Mn=se.length;_n<Mn;_n++){let $n=se[_n];const vi=Math.min(Wt-on,Se[_n]),Ii=$e[_n];let Di;Ii===2?Di=0:Ii===1?Di=1:Di=vi;for(let mr=0;mr<vi;mr++)mr===Di&&($n=0),qt[on++]=$n}return qt}getViewLineContent(o){const h=this.getViewLineInfo(o);return this.modelLineProjections[h.modelLineNumber-1].getViewLineContent(this.model,h.modelLineNumber,h.modelLineWrappedLineIdx)}getViewLineLength(o){const h=this.getViewLineInfo(o);return this.modelLineProjections[h.modelLineNumber-1].getViewLineLength(this.model,h.modelLineNumber,h.modelLineWrappedLineIdx)}getViewLineMinColumn(o){const h=this.getViewLineInfo(o);return this.modelLineProjections[h.modelLineNumber-1].getViewLineMinColumn(this.model,h.modelLineNumber,h.modelLineWrappedLineIdx)}getViewLineMaxColumn(o){const h=this.getViewLineInfo(o);return this.modelLineProjections[h.modelLineNumber-1].getViewLineMaxColumn(this.model,h.modelLineNumber,h.modelLineWrappedLineIdx)}getViewLineData(o){const h=this.getViewLineInfo(o);return this.modelLineProjections[h.modelLineNumber-1].getViewLineData(this.model,h.modelLineNumber,h.modelLineWrappedLineIdx)}getViewLinesData(o,h,A){o=this._toValidViewLineNumber(o),h=this._toValidViewLineNumber(h);const Z=this.projectedModelLineLineCounts.getIndexOf(o-1);let se=o;const Se=Z.index,$e=Z.remainder,rt=[];for(let ht=Se,xt=this.model.getLineCount();ht<xt;ht++){const Wt=this.modelLineProjections[ht];if(!Wt.isVisible())continue;const qt=ht===Se?$e:0;let on=Wt.getViewLineCount()-qt,_n=!1;if(se+on>h&&(_n=!0,on=h-se+1),Wt.getViewLinesData(this.model,ht+1,qt,on,se-o,A,rt),se+=on,_n)break}return rt}validateViewPosition(o,h,A){o=this._toValidViewLineNumber(o);const Z=this.projectedModelLineLineCounts.getIndexOf(o-1),se=Z.index,Se=Z.remainder,$e=this.modelLineProjections[se],rt=$e.getViewLineMinColumn(this.model,se+1,Se),ht=$e.getViewLineMaxColumn(this.model,se+1,Se);h<rt&&(h=rt),h>ht&&(h=ht);const xt=$e.getModelColumnOfViewPosition(Se,h);return this.model.validatePosition(new Re.L(se+1,xt)).equals(A)?new Re.L(o,h):this.convertModelPositionToViewPosition(A.lineNumber,A.column)}validateViewRange(o,h){const A=this.validateViewPosition(o.startLineNumber,o.startColumn,h.getStartPosition()),Z=this.validateViewPosition(o.endLineNumber,o.endColumn,h.getEndPosition());return new Ve.e(A.lineNumber,A.column,Z.lineNumber,Z.column)}convertViewPositionToModelPosition(o,h){const A=this.getViewLineInfo(o),Z=this.modelLineProjections[A.modelLineNumber-1].getModelColumnOfViewPosition(A.modelLineWrappedLineIdx,h);return this.model.validatePosition(new Re.L(A.modelLineNumber,Z))}convertViewRangeToModelRange(o){const h=this.convertViewPositionToModelPosition(o.startLineNumber,o.startColumn),A=this.convertViewPositionToModelPosition(o.endLineNumber,o.endColumn);return new Ve.e(h.lineNumber,h.column,A.lineNumber,A.column)}convertModelPositionToViewPosition(o,h,A=2){const Z=this.model.validatePosition(new Re.L(o,h)),se=Z.lineNumber,Se=Z.column;let $e=se-1,rt=!1;for(;$e>0&&!this.modelLineProjections[$e].isVisible();)$e--,rt=!0;if($e===0&&!this.modelLineProjections[$e].isVisible())return new Re.L(1,1);const ht=1+this.projectedModelLineLineCounts.getPrefixSum($e);let xt;return rt?xt=this.modelLineProjections[$e].getViewPositionOfModelPosition(ht,this.model.getLineMaxColumn($e+1),A):xt=this.modelLineProjections[se-1].getViewPositionOfModelPosition(ht,Se,A),xt}convertModelRangeToViewRange(o,h=0){if(o.isEmpty()){const A=this.convertModelPositionToViewPosition(o.startLineNumber,o.startColumn,h);return Ve.e.fromPositions(A)}else{const A=this.convertModelPositionToViewPosition(o.startLineNumber,o.startColumn,1),Z=this.convertModelPositionToViewPosition(o.endLineNumber,o.endColumn,0);return new Ve.e(A.lineNumber,A.column,Z.lineNumber,Z.column)}}getViewLineNumberOfModelPosition(o,h){let A=o-1;if(this.modelLineProjections[A].isVisible()){const se=1+this.projectedModelLineLineCounts.getPrefixSum(A);return this.modelLineProjections[A].getViewLineNumberOfModelPosition(se,h)}for(;A>0&&!this.modelLineProjections[A].isVisible();)A--;if(A===0&&!this.modelLineProjections[A].isVisible())return 1;const Z=1+this.projectedModelLineLineCounts.getPrefixSum(A);return this.modelLineProjections[A].getViewLineNumberOfModelPosition(Z,this.model.getLineMaxColumn(A+1))}getDecorationsInRange(o,h,A){const Z=this.convertViewPositionToModelPosition(o.startLineNumber,o.startColumn),se=this.convertViewPositionToModelPosition(o.endLineNumber,o.endColumn);if(se.lineNumber-Z.lineNumber<=o.endLineNumber-o.startLineNumber)return this.model.getDecorationsInRange(new Ve.e(Z.lineNumber,1,se.lineNumber,se.column),h,A);let Se=[];const $e=Z.lineNumber-1,rt=se.lineNumber-1;let ht=null;for(let on=$e;on<=rt;on++)if(this.modelLineProjections[on].isVisible())ht===null&&(ht=new Re.L(on+1,on===$e?Z.column:1));else if(ht!==null){const Mn=this.model.getLineMaxColumn(on);Se=Se.concat(this.model.getDecorationsInRange(new Ve.e(ht.lineNumber,ht.column,on,Mn),h,A)),ht=null}ht!==null&&(Se=Se.concat(this.model.getDecorationsInRange(new Ve.e(ht.lineNumber,ht.column,se.lineNumber,se.column),h,A)),ht=null),Se.sort((on,_n)=>{const Mn=Ve.e.compareRangesUsingStarts(on.range,_n.range);return Mn===0?on.id<_n.id?-1:on.id>_n.id?1:0:Mn});let xt=[],Wt=0,qt=null;for(const on of Se){const _n=on.id;qt!==_n&&(qt=_n,xt[Wt++]=on)}return xt}getInjectedTextAt(o){const h=this.getViewLineInfo(o.lineNumber);return this.modelLineProjections[h.modelLineNumber-1].getInjectedTextAt(h.modelLineWrappedLineIdx,o.column)}normalizePosition(o,h){const A=this.getViewLineInfo(o.lineNumber);return this.modelLineProjections[A.modelLineNumber-1].normalizePosition(A.modelLineWrappedLineIdx,o,h)}getLineIndentColumn(o){const h=this.getViewLineInfo(o);return h.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(h.modelLineNumber):0}}function xa(Ut){if(Ut.length===0)return[];const o=Ut.slice();o.sort(Ve.e.compareRangesUsingStarts);const h=[];let A=o[0].startLineNumber,Z=o[0].endLineNumber;for(let se=1,Se=o.length;se<Se;se++){const $e=o[se];$e.startLineNumber>Z+1?(h.push(new Ve.e(A,1,Z,1)),A=$e.startLineNumber,Z=$e.endLineNumber):$e.endLineNumber>Z&&(Z=$e.endLineNumber)}return h.push(new Ve.e(A,1,Z,1)),h}class rd{constructor(o,h){this.modelLineNumber=o,this.modelLineWrappedLineIdx=h}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class nl{constructor(o,h){this.modelRange=o,this.viewLines=h}}class fh{constructor(o){this._lines=o}convertViewPositionToModelPosition(o){return this._lines.convertViewPositionToModelPosition(o.lineNumber,o.column)}convertViewRangeToModelRange(o){return this._lines.convertViewRangeToModelRange(o)}validateViewPosition(o,h){return this._lines.validateViewPosition(o.lineNumber,o.column,h)}validateViewRange(o,h){return this._lines.validateViewRange(o,h)}convertModelPositionToViewPosition(o,h){return this._lines.convertModelPositionToViewPosition(o.lineNumber,o.column,h)}convertModelRangeToViewRange(o,h){return this._lines.convertModelRangeToViewRange(o,h)}modelPositionIsVisible(o){return this._lines.modelPositionIsVisible(o.lineNumber,o.column)}getModelLineViewLineCount(o){return this._lines.getModelLineViewLineCount(o)}getViewLineNumberOfModelPosition(o,h){return this._lines.getViewLineNumberOfModelPosition(o,h)}}class Zl{constructor(o){this.model=o}dispose(){}createCoordinatesConverter(){return new Ys(this)}getHiddenAreas(){return[]}setHiddenAreas(o){return!1}setTabSize(o){return!1}setWrappingSettings(o,h,A,Z){return!1}createLineBreaksComputer(){const o=[];return{addRequest:(h,A,Z)=>{o.push(null)},finalize:()=>o}}onModelFlushed(){}onModelLinesDeleted(o,h,A){return new pl(h,A)}onModelLinesInserted(o,h,A,Z){return new el(h,A)}onModelLineChanged(o,h,A){return[!1,new ml(h,h),null,null]}acceptVersionId(o){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(o,h,A){return{startLineNumber:o,endLineNumber:o,indent:0}}getViewLinesBracketGuides(o,h,A){return new Array(h-o+1).fill([])}getViewLinesIndentGuides(o,h){const A=h-o+1,Z=new Array(A);for(let se=0;se<A;se++)Z[se]=0;return Z}getViewLineContent(o){return this.model.getLineContent(o)}getViewLineLength(o){return this.model.getLineLength(o)}getViewLineMinColumn(o){return this.model.getLineMinColumn(o)}getViewLineMaxColumn(o){return this.model.getLineMaxColumn(o)}getViewLineData(o){const h=this.model.getLineTokens(o),A=h.getLineContent();return new en.IP(A,!1,1,A.length+1,0,h.inflate(),null)}getViewLinesData(o,h,A){const Z=this.model.getLineCount();o=Math.min(Math.max(1,o),Z),h=Math.min(Math.max(1,h),Z);const se=[];for(let Se=o;Se<=h;Se++){const $e=Se-o;se[$e]=A[$e]?this.getViewLineData(Se):null}return se}getDecorationsInRange(o,h,A){return this.model.getDecorationsInRange(o,h,A)}normalizePosition(o,h){return this.model.normalizePosition(o,h)}getLineIndentColumn(o){return this.model.getLineIndentColumn(o)}getInjectedTextAt(o){return null}}class Ys{constructor(o){this._lines=o}_validPosition(o){return this._lines.model.validatePosition(o)}_validRange(o){return this._lines.model.validateRange(o)}convertViewPositionToModelPosition(o){return this._validPosition(o)}convertViewRangeToModelRange(o){return this._validRange(o)}validateViewPosition(o,h){return this._validPosition(h)}validateViewRange(o,h){return this._validRange(h)}convertModelPositionToViewPosition(o){return this._validPosition(o)}convertModelRangeToViewRange(o){return this._validRange(o)}modelPositionIsVisible(o){const h=this._lines.model.getLineCount();return!(o.lineNumber<1||o.lineNumber>h)}getModelLineViewLineCount(o){return 1}getViewLineNumberOfModelPosition(o,h){return o}}const gc=!0;class xu extends x.JT{constructor(o,h,A,Z,se,Se,$e,rt){super();if(this.languageConfigurationService=$e,this._themeService=rt,this._editorId=o,this._configuration=h,this.model=A,this._eventDispatcher=new Pc,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new is.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._tokenizeViewportSoon=this._register(new ye.pY(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new ye.pY(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,gc&&this.model.isTooLargeForTokenization())this._lines=new Zl(this.model);else{const ht=this._configuration.options,xt=ht.get(44),Wt=ht.get(125),qt=ht.get(132),on=ht.get(124);this._lines=new Du(this._editorId,this.model,Z,se,xt,this.model.getOptions().tabSize,Wt,qt.wrappingColumn,on)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Oa(A,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new dh(this._configuration,this.getLineCount(),Se)),this._register(this.viewLayout.onDidScroll(ht=>{ht.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new Rc(ht)),this._eventDispatcher.emitOutgoingEvent(new kc(ht.oldScrollWidth,ht.oldScrollLeft,ht.oldScrollHeight,ht.oldScrollTop,ht.scrollWidth,ht.scrollLeft,ht.scrollHeight,ht.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(ht=>{this._eventDispatcher.emitOutgoingEvent(ht)})),this._decorations=new hh.CU(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(ht=>{try{const xt=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(xt,ht)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(Yt.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new td)})),this._register(this._themeService.onDidColorThemeChange(ht=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new tu(ht))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(o){this._eventDispatcher.addViewEventHandler(o)}removeViewEventHandler(o){this._eventDispatcher.removeViewEventHandler(o)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const o=this.viewLayout.getLinesViewportData(),h=new Ve.e(o.startLineNumber,this.getLineMinColumn(o.startLineNumber),o.endLineNumber,this.getLineMaxColumn(o.endLineNumber)),A=this._toModelVisibleRanges(h);for(const Z of A)this.model.tokenizeViewport(Z.startLineNumber,Z.endLineNumber)}setHasFocus(o){this._hasFocus=o,this._cursor.setHasFocus(o),this._eventDispatcher.emitSingleViewEvent(new ea(o)),this._eventDispatcher.emitOutgoingEvent(new Il(!o,o))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new ed)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new Su)}_onConfigurationChanged(o,h){let A=null;if(this._viewportStartLine!==-1){const xt=new Re.L(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));A=this.coordinatesConverter.convertViewPositionToModelPosition(xt)}let Z=!1;const se=this._configuration.options,Se=se.get(44),$e=se.get(125),rt=se.get(132),ht=se.get(124);if(this._lines.setWrappingSettings(Se,$e,rt.wrappingColumn,ht)&&(o.emitViewEvent(new gl),o.emitViewEvent(new sa),o.emitViewEvent(new _a(null)),this._cursor.onLineMappingChanged(o),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(Z=!0),this._updateConfigurationViewLineCount.schedule()),h.hasChanged(81)&&(this._decorations.reset(),o.emitViewEvent(new _a(null))),o.emitViewEvent(new js(h)),this.viewLayout.onConfigurationChanged(h),Z&&A){const xt=this.coordinatesConverter.convertModelPositionToViewPosition(A),Wt=this.viewLayout.getVerticalOffsetForLineNumber(xt.lineNumber);this.viewLayout.setScrollPosition({scrollTop:Wt+this._viewportStartLineDelta},1)}is.LM.shouldRecreate(h)&&(this.cursorConfig=new is.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(o=>{try{const h=this._eventDispatcher.beginEmitViewEvents();let A=!1,Z=!1;const se=o.changes,Se=o instanceof fl.dQ?o.versionId:null,$e=this._lines.createLineBreaksComputer();for(const xt of se)switch(xt.changeType){case 4:{for(let Wt=0;Wt<xt.detail.length;Wt++){const qt=xt.detail[Wt];let on=xt.injectedTexts[Wt];on&&(on=on.filter(_n=>!_n.ownerId||_n.ownerId===this._editorId)),$e.addRequest(qt,on,null)}break}case 2:{let Wt=null;xt.injectedText&&(Wt=xt.injectedText.filter(qt=>!qt.ownerId||qt.ownerId===this._editorId)),$e.addRequest(xt.detail,Wt,null);break}}const rt=$e.finalize(),ht=new D.H9(rt);for(const xt of se)switch(xt.changeType){case 1:{this._lines.onModelFlushed(),h.emitViewEvent(new gl),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),A=!0;break}case 3:{const Wt=this._lines.onModelLinesDeleted(Se,xt.fromLineNumber,xt.toLineNumber);Wt!==null&&(h.emitViewEvent(Wt),this.viewLayout.onLinesDeleted(Wt.fromLineNumber,Wt.toLineNumber)),A=!0;break}case 4:{const Wt=ht.takeCount(xt.detail.length),qt=this._lines.onModelLinesInserted(Se,xt.fromLineNumber,xt.toLineNumber,Wt);qt!==null&&(h.emitViewEvent(qt),this.viewLayout.onLinesInserted(qt.fromLineNumber,qt.toLineNumber)),A=!0;break}case 2:{const Wt=ht.dequeue(),[qt,on,_n,Mn]=this._lines.onModelLineChanged(Se,xt.lineNumber,Wt);Z=qt,on&&h.emitViewEvent(on),_n&&(h.emitViewEvent(_n),this.viewLayout.onLinesInserted(_n.fromLineNumber,_n.toLineNumber)),Mn&&(h.emitViewEvent(Mn),this.viewLayout.onLinesDeleted(Mn.fromLineNumber,Mn.toLineNumber));break}case 5:break}Se!==null&&this._lines.acceptVersionId(Se),this.viewLayout.onHeightMaybeChanged(),!A&&Z&&(h.emitViewEvent(new sa),h.emitViewEvent(new _a(null)),this._cursor.onLineMappingChanged(h),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const h=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(h){const A=this.coordinatesConverter.convertModelPositionToViewPosition(h.getStartPosition()),Z=this.viewLayout.getVerticalOffsetForLineNumber(A.lineNumber);this.viewLayout.setScrollPosition({scrollTop:Z+this._viewportStartLineDelta},1)}}try{const h=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(h,o)}finally{this._eventDispatcher.endEmitViewEvents()}this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeTokens(o=>{const h=[];for(let A=0,Z=o.ranges.length;A<Z;A++){const se=o.ranges[A],Se=this.coordinatesConverter.convertModelPositionToViewPosition(new Re.L(se.fromLineNumber,1)).lineNumber,$e=this.coordinatesConverter.convertModelPositionToViewPosition(new Re.L(se.toLineNumber,this.model.getLineMaxColumn(se.toLineNumber))).lineNumber;h[A]={fromLineNumber:Se,toLineNumber:$e}}this._eventDispatcher.emitSingleViewEvent(new Eu(h)),o.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(o=>{this._eventDispatcher.emitSingleViewEvent(new jl),this.cursorConfig=new is.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(o=>{this.cursorConfig=new is.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(o=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const h=this._eventDispatcher.beginEmitViewEvents();h.emitViewEvent(new gl),h.emitViewEvent(new sa),h.emitViewEvent(new _a(null)),this._cursor.onLineMappingChanged(h),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new is.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(o=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new _a(o))}))}setHiddenAreas(o){let h=!1;try{const A=this._eventDispatcher.beginEmitViewEvents();h=this._lines.setHiddenAreas(o),h&&(A.emitViewEvent(new gl),A.emitViewEvent(new sa),A.emitViewEvent(new _a(null)),this._cursor.onLineMappingChanged(A),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),h&&this._eventDispatcher.emitOutgoingEvent(new Kl)}getVisibleRangesPlusViewportAboveBelow(){const o=this._configuration.options.get(131),h=this._configuration.options.get(59),A=Math.max(20,Math.round(o.height/h)),Z=this.viewLayout.getLinesViewportData(),se=Math.max(1,Z.completelyVisibleStartLineNumber-A),Se=Math.min(this.getLineCount(),Z.completelyVisibleEndLineNumber+A);return this._toModelVisibleRanges(new Ve.e(se,this.getLineMinColumn(se),Se,this.getLineMaxColumn(Se)))}getVisibleRanges(){const o=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(o)}_toModelVisibleRanges(o){const h=this.coordinatesConverter.convertViewRangeToModelRange(o),A=this._lines.getHiddenAreas();if(A.length===0)return[h];const Z=[];let se=0,Se=h.startLineNumber,$e=h.startColumn;const rt=h.endLineNumber,ht=h.endColumn;for(let xt=0,Wt=A.length;xt<Wt;xt++){const qt=A[xt].startLineNumber,on=A[xt].endLineNumber;on<Se||qt>rt||(Se<qt&&(Z[se++]=new Ve.e(Se,$e,qt-1,this.model.getLineMaxColumn(qt-1))),Se=on+1,$e=1)}return(Se<rt||Se===rt&&$e<ht)&&(Z[se++]=new Ve.e(Se,$e,rt,ht)),Z}getCompletelyVisibleViewRange(){const o=this.viewLayout.getLinesViewportData(),h=o.completelyVisibleStartLineNumber,A=o.completelyVisibleEndLineNumber;return new Ve.e(h,this.getLineMinColumn(h),A,this.getLineMaxColumn(A))}getCompletelyVisibleViewRangeAtScrollTop(o){const h=this.viewLayout.getLinesViewportDataAtScrollTop(o),A=h.completelyVisibleStartLineNumber,Z=h.completelyVisibleEndLineNumber;return new Ve.e(A,this.getLineMinColumn(A),Z,this.getLineMaxColumn(Z))}saveState(){const o=this.viewLayout.saveState(),h=o.scrollTop,A=this.viewLayout.getLineNumberAtVerticalOffset(h),Z=this.coordinatesConverter.convertViewPositionToModelPosition(new Re.L(A,this.getLineMinColumn(A))),se=this.viewLayout.getVerticalOffsetForLineNumber(A)-h;return{scrollLeft:o.scrollLeft,firstPosition:Z,firstPositionDeltaTop:se}}reduceRestoreState(o){if(typeof o.firstPosition=="undefined")return this._reduceRestoreStateCompatibility(o);const h=this.model.validatePosition(o.firstPosition),A=this.coordinatesConverter.convertModelPositionToViewPosition(h),Z=this.viewLayout.getVerticalOffsetForLineNumber(A.lineNumber)-o.firstPositionDeltaTop;return{scrollLeft:o.scrollLeft,scrollTop:Z}}_reduceRestoreStateCompatibility(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(o,h,A){this._viewportStartLine=o;const Z=this.coordinatesConverter.convertViewPositionToModelPosition(new Re.L(o,this.getLineMinColumn(o)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new Ve.e(Z.lineNumber,Z.column,Z.lineNumber,Z.column),1);const se=this.viewLayout.getVerticalOffsetForLineNumber(o),Se=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=Se-se}getActiveIndentGuide(o,h,A){return this._lines.getActiveIndentGuide(o,h,A)}getLinesIndentGuides(o,h){return this._lines.getViewLinesIndentGuides(o,h)}getBracketGuidesInRangeByLine(o,h,A,Z){return this._lines.getViewLinesBracketGuides(o,h,A,Z)}getLineContent(o){return this._lines.getViewLineContent(o)}getLineLength(o){return this._lines.getViewLineLength(o)}getLineMinColumn(o){return this._lines.getViewLineMinColumn(o)}getLineMaxColumn(o){return this._lines.getViewLineMaxColumn(o)}getLineFirstNonWhitespaceColumn(o){const h=Sn.LC(this.getLineContent(o));return h===-1?0:h+1}getLineLastNonWhitespaceColumn(o){const h=Sn.ow(this.getLineContent(o));return h===-1?0:h+2}getDecorationsInViewport(o){return this._decorations.getDecorationsViewportData(o).decorations}getInjectedTextAt(o){return this._lines.getInjectedTextAt(o)}getViewLineRenderingData(o,h){const A=this.model.mightContainRTL(),Z=this.model.mightContainNonBasicASCII(),se=this.getTabSize(),Se=this._lines.getViewLineData(h);let rt=this._decorations.getDecorationsViewportData(o).inlineDecorations[h-o.startLineNumber];return Se.inlineDecorations&&(rt=[...rt,...Se.inlineDecorations.map(ht=>ht.toInlineDecoration(h))]),new en.wA(Se.minColumn,Se.maxColumn,Se.content,Se.continuesWithWrappedLine,A,Z,Se.tokens,rt,se,Se.startVisibleColumn)}getViewLineData(o){return this._lines.getViewLineData(o)}getMinimapLinesRenderingData(o,h,A){const Z=this._lines.getViewLinesData(o,h,A);return new en.ud(this.getTabSize(),Z)}getAllOverviewRulerDecorations(o){const h=this.model.getOverviewRulerDecorations(this._editorId,(0,b.$J)(this._configuration.options)),A=new Ml;for(const Z of h){const se=Z.options,Se=se.overviewRuler;if(!Se)continue;const $e=Se.position;if($e===0)continue;const rt=Se.getColor(o.value),ht=this.coordinatesConverter.getViewLineNumberOfModelPosition(Z.range.startLineNumber,Z.range.startColumn),xt=this.coordinatesConverter.getViewLineNumberOfModelPosition(Z.range.endLineNumber,Z.range.endColumn);A.accept(rt,se.zIndex,ht,xt,$e)}return A.asArray}_invalidateDecorationsColorCache(){const o=this.model.getOverviewRulerDecorations();for(const h of o){const A=h.options.overviewRuler;A&&A.invalidateCachedColor();const Z=h.options.minimap;Z&&Z.invalidateCachedColor()}}getValueInRange(o,h){const A=this.coordinatesConverter.convertViewRangeToModelRange(o);return this.model.getValueInRange(A,h)}deduceModelPositionRelativeToViewPosition(o,h,A){const Z=this.coordinatesConverter.convertViewPositionToModelPosition(o);this.model.getEOL().length===2&&(h<0?h-=A:h+=A);const Se=this.model.getOffsetAt(Z)+h;return this.model.getPositionAt(Se)}getPlainTextToCopy(o,h,A){const Z=A?`\r
`:this.model.getEOL();o=o.slice(0),o.sort(Ve.e.compareRangesUsingStarts);let se=!1,Se=!1;for(const rt of o)rt.isEmpty()?se=!0:Se=!0;if(!Se){if(!h)return"";const rt=o.map(xt=>xt.startLineNumber);let ht="";for(let xt=0;xt<rt.length;xt++)xt>0&&rt[xt-1]===rt[xt]||(ht+=this.model.getLineContent(rt[xt])+Z);return ht}if(se&&h){const rt=[];let ht=0;for(const xt of o){const Wt=xt.startLineNumber;xt.isEmpty()?Wt!==ht&&rt.push(this.model.getLineContent(Wt)):rt.push(this.model.getValueInRange(xt,A?2:0)),ht=Wt}return rt.length===1?rt[0]:rt}const $e=[];for(const rt of o)rt.isEmpty()||$e.push(this.model.getValueInRange(rt,A?2:0));return $e.length===1?$e[0]:$e}getRichTextToCopy(o,h){const A=this.model.getLanguageId();if(A===So.bd||o.length!==1)return null;let Z=o[0];if(Z.isEmpty()){if(!h)return null;const xt=Z.startLineNumber;Z=new Ve.e(xt,this.model.getLineMinColumn(xt),xt,this.model.getLineMaxColumn(xt))}const se=this._configuration.options.get(44),Se=this._getColorMap(),rt=/[:;\\\/<>]/.test(se.fontFamily)||se.fontFamily===b.hL.fontFamily;let ht;return rt?ht=b.hL.fontFamily:(ht=se.fontFamily,ht=ht.replace(/"/g,"'"),/[,']/.test(ht)||/[+ ]/.test(ht)&&(ht=`'${ht}'`),ht=`${ht}, ${b.hL.fontFamily}`),{mode:A,html:`<div style="color: ${Se[1]};background-color: ${Se[2]};font-family: ${ht};font-weight: ${se.fontWeight};font-size: ${se.fontSize}px;line-height: ${se.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(Z,Se)+"</div>"}}_getHTMLToCopy(o,h){const A=o.startLineNumber,Z=o.startColumn,se=o.endLineNumber,Se=o.endColumn,$e=this.getTabSize();let rt="";for(let ht=A;ht<=se;ht++){const xt=this.model.getLineTokens(ht),Wt=xt.getLineContent(),qt=ht===A?Z-1:0,on=ht===se?Se-1:Wt.length;Wt===""?rt+="<br>":rt+=(0,zo.Fq)(Wt,xt.inflate(),h,qt,on,$e,C.ED)}return rt}_getColorMap(){const o=On.RW.getColorMap(),h=["#000000"];if(o)for(let A=1,Z=o.length;A<Z;A++)h[A]=Qn.Il.Format.CSS.formatHex(o[A]);return h}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(o,h,A){return this._withViewEventsCollector(Z=>this._cursor.setStates(Z,o,h,A))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(o){this._cursor.setCursorColumnSelectData(o)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(o){this._cursor.setPrevEditOperationType(o)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(o,h,A=0){this._withViewEventsCollector(Z=>this._cursor.setSelections(Z,o,h,A))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(o){this._withViewEventsCollector(h=>this._cursor.restoreState(h,o))}_executeCursorEdit(o){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Wr);return}this._withViewEventsCollector(o)}executeEdits(o,h,A){this._executeCursorEdit(Z=>this._cursor.executeEdits(Z,o,h,A))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(o=>this._cursor.startComposition(o))}endComposition(o){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(h=>this._cursor.endComposition(h,o))}type(o,h){this._executeCursorEdit(A=>this._cursor.type(A,o,h))}compositionType(o,h,A,Z,se){this._executeCursorEdit(Se=>this._cursor.compositionType(Se,o,h,A,Z,se))}paste(o,h,A,Z){this._executeCursorEdit(se=>this._cursor.paste(se,o,h,A,Z))}cut(o){this._executeCursorEdit(h=>this._cursor.cut(h,o))}executeCommand(o,h){this._executeCursorEdit(A=>this._cursor.executeCommand(A,o,h))}executeCommands(o,h){this._executeCursorEdit(A=>this._cursor.executeCommands(A,o,h))}revealPrimaryCursor(o,h,A=!1){this._withViewEventsCollector(Z=>this._cursor.revealPrimary(Z,o,A,0,h,0))}revealTopMostCursor(o){const h=this._cursor.getTopMostViewPosition(),A=new Ve.e(h.lineNumber,h.column,h.lineNumber,h.column);this._withViewEventsCollector(Z=>Z.emitViewEvent(new vl(o,!1,A,null,0,!0,0)))}revealBottomMostCursor(o){const h=this._cursor.getBottomMostViewPosition(),A=new Ve.e(h.lineNumber,h.column,h.lineNumber,h.column);this._withViewEventsCollector(Z=>Z.emitViewEvent(new vl(o,!1,A,null,0,!0,0)))}revealRange(o,h,A,Z,se){this._withViewEventsCollector(Se=>Se.emitViewEvent(new vl(o,!1,A,null,Z,h,se)))}changeWhitespace(o){this.viewLayout.changeWhitespace(o)&&(this._eventDispatcher.emitSingleViewEvent(new Za),this._eventDispatcher.emitOutgoingEvent(new Kl))}_withViewEventsCollector(o){try{const h=this._eventDispatcher.beginEmitViewEvents();return o(h)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(o,h){return this._lines.normalizePosition(o,h)}getLineIndentColumn(o){return this._lines.getLineIndentColumn(o)}}class Ml{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(o,h,A,Z,se){const Se=this._asMap[o];if(Se){const $e=Se.data,rt=$e[$e.length-3],ht=$e[$e.length-1];if(rt===se&&ht+1>=A){Z>ht&&($e[$e.length-1]=Z);return}$e.push(se,A,Z)}else{const $e=new en.SQ(o,h,[se,A,Z]);this._asMap[o]=$e,this.asArray.push($e)}}}var ou=a(94565),su=a(16141),Od=a(72065),gh=a(60972),kd=a(59422),Iu=a(44906);class Al{constructor(o,h,A,Z,se){this.injectionOffsets=o,this.injectionOptions=h,this.breakOffsets=A,this.breakOffsetsVisibleColumn=Z,this.wrappedTextIndentLength=se}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(o){return o>0?this.wrappedTextIndentLength:0}getLineLength(o){const h=o>0?this.breakOffsets[o-1]:0;let Z=this.breakOffsets[o]-h;return o>0&&(Z+=this.wrappedTextIndentLength),Z}getMaxOutputOffset(o){return this.getLineLength(o)}translateToInputOffset(o,h){o>0&&(h=Math.max(0,h-this.wrappedTextIndentLength));let Z=o===0?h:this.breakOffsets[o-1]+h;if(this.injectionOffsets!==null)for(let se=0;se<this.injectionOffsets.length&&Z>this.injectionOffsets[se];se++)Z<this.injectionOffsets[se]+this.injectionOptions[se].content.length?Z=this.injectionOffsets[se]:Z-=this.injectionOptions[se].content.length;return Z}translateToOutputPosition(o,h=2){let A=o;if(this.injectionOffsets!==null)for(let Z=0;Z<this.injectionOffsets.length&&!(o<this.injectionOffsets[Z]||h!==1&&o===this.injectionOffsets[Z]);Z++)A+=this.injectionOptions[Z].content.length;return this.offsetInInputWithInjectionsToOutputPosition(A,h)}offsetInInputWithInjectionsToOutputPosition(o,h=2){let A=0,Z=this.breakOffsets.length-1,se=0,Se=0;for(;A<=Z;){se=A+(Z-A)/2|0;const rt=this.breakOffsets[se];if(Se=se>0?this.breakOffsets[se-1]:0,h===0)if(o<=Se)Z=se-1;else if(o>rt)A=se+1;else break;else if(o<Se)Z=se-1;else if(o>=rt)A=se+1;else break}let $e=o-Se;return se>0&&($e+=this.wrappedTextIndentLength),new la(se,$e)}normalizeOutputPosition(o,h,A){if(this.injectionOffsets!==null){const Z=this.outputPositionToOffsetInInputWithInjections(o,h),se=this.normalizeOffsetInInputWithInjectionsAroundInjections(Z,A);if(se!==Z)return this.offsetInInputWithInjectionsToOutputPosition(se,A)}if(A===0){if(o>0&&h===this.getMinOutputOffset(o))return new la(o-1,this.getMaxOutputOffset(o-1))}else if(A===1){const Z=this.getOutputLineCount()-1;if(o<Z&&h===this.getMaxOutputOffset(o))return new la(o+1,this.getMinOutputOffset(o+1))}return new la(o,h)}outputPositionToOffsetInInputWithInjections(o,h){return o>0&&(h=Math.max(0,h-this.wrappedTextIndentLength)),(o>0?this.breakOffsets[o-1]:0)+h}normalizeOffsetInInputWithInjectionsAroundInjections(o,h){const A=this.getInjectedTextAtOffset(o);if(!A)return o;if(h===2){if(o===A.offsetInInputWithInjections+A.length&&au(this.injectionOptions[A.injectedTextIndex].cursorStops))return A.offsetInInputWithInjections+A.length;{let Z=A.offsetInInputWithInjections;if(mc(this.injectionOptions[A.injectedTextIndex].cursorStops))return Z;let se=A.injectedTextIndex-1;for(;se>=0&&this.injectionOffsets[se]===this.injectionOffsets[A.injectedTextIndex]&&!(au(this.injectionOptions[se].cursorStops)||(Z-=this.injectionOptions[se].content.length,mc(this.injectionOptions[se].cursorStops)));)se--;return Z}}else if(h===1){let Z=A.offsetInInputWithInjections+A.length,se=A.injectedTextIndex;for(;se+1<this.injectionOffsets.length&&this.injectionOffsets[se+1]===this.injectionOffsets[se];)Z+=this.injectionOptions[se+1].content.length,se++;return Z}else if(h===0){let Z=A.offsetInInputWithInjections,se=A.injectedTextIndex;for(;se-1>=0&&this.injectionOffsets[se-1]===this.injectionOffsets[se];)Z-=this.injectionOptions[se-1].content.length,se--;return Z}(0,cs.vE)(h)}getInjectedText(o,h){const A=this.outputPositionToOffsetInInputWithInjections(o,h),Z=this.getInjectedTextAtOffset(A);return Z?{options:this.injectionOptions[Z.injectedTextIndex]}:null}getInjectedTextAtOffset(o){const h=this.injectionOffsets,A=this.injectionOptions;if(h!==null){let Z=0;for(let se=0;se<h.length;se++){const Se=A[se].content.length,$e=h[se]+Z,rt=h[se]+Z+Se;if($e>o)break;if(o<=rt)return{injectedTextIndex:se,offsetInInputWithInjections:$e,length:Se};Z+=Se}}}}function au(Ut){return Ut==null?!0:Ut===ve.RM.Right||Ut===ve.RM.Both}function mc(Ut){return Ut==null?!0:Ut===ve.RM.Left||Ut===ve.RM.Both}class ef{constructor(o){this.options=o}}class la{constructor(o,h){this.outputLineIndex=o,this.outputOffset=h}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(o){return new Re.L(o+this.outputLineIndex,this.outputOffset+1)}}class Cl{constructor(o,h){this.classifier=new Nu(o,h)}static create(o){return new Cl(o.get(120),o.get(119))}createLineBreaksComputer(o,h,A,Z){const se=[],Se=[],$e=[];return{addRequest:(rt,ht,xt)=>{se.push(rt),Se.push(ht),$e.push(xt)},finalize:()=>{const rt=o.typicalFullwidthCharacterWidth/o.typicalHalfwidthCharacterWidth,ht=[];for(let xt=0,Wt=se.length;xt<Wt;xt++){const qt=Se[xt],on=$e[xt];on&&!on.injectionOptions&&!qt?ht[xt]=Yl(this.classifier,on,se[xt],h,A,rt,Z):ht[xt]=od(this.classifier,se[xt],qt,h,A,rt,Z)}return Xl.length=0,Ba.length=0,ht}}}}class Nu extends Iu.N{constructor(o,h){super(0);for(let A=0;A<o.length;A++)this.set(o.charCodeAt(A),1);for(let A=0;A<h.length;A++)this.set(h.charCodeAt(A),2)}get(o){return o>=0&&o<256?this._asciiMap[o]:o>=12352&&o<=12543||o>=13312&&o<=19903||o>=19968&&o<=40959?3:this._map.get(o)||this._defaultValue}}let Xl=[],Ba=[];function Yl(Ut,o,h,A,Z,se,Se){if(Z===-1)return null;const $e=h.length;if($e<=1)return null;const rt=o.breakOffsets,ht=o.breakOffsetsVisibleColumn,xt=ad(h,A,Z,se,Se),Wt=Z-xt,qt=Xl,on=Ba;let _n=0,Mn=0,$n=0,vi=Z;const Ii=rt.length;let Di=0;if(Di>=0){let mr=Math.abs(ht[Di]-vi);for(;Di+1<Ii;){const or=Math.abs(ht[Di+1]-vi);if(or>=mr)break;mr=or,Di++}}for(;Di<Ii;){let mr=Di<0?0:rt[Di],or=Di<0?0:ht[Di];Mn>mr&&(mr=Mn,or=$n);let Tr=0,Er=0,cr=0,Or=0;if(or<=vi){let Kr=or,us=mr===0?0:h.charCodeAt(mr-1),hs=mr===0?0:Ut.get(us),Es=!0;for(let go=mr;go<$e;go++){const Ks=go,Ls=h.charCodeAt(go);let Ts,La;if(Sn.ZG(Ls)?(go++,Ts=0,La=2):(Ts=Ut.get(Ls),La=Rl(Ls,Kr,A,se)),Ks>Mn&&pc(us,hs,Ls,Ts)&&(Tr=Ks,Er=Kr),Kr+=La,Kr>vi){Ks>Mn?(cr=Ks,Or=Kr-La):(cr=go+1,Or=Kr),Kr-Er>Wt&&(Tr=0),Es=!1;break}us=Ls,hs=Ts}if(Es){_n>0&&(qt[_n]=rt[rt.length-1],on[_n]=ht[rt.length-1],_n++);break}}if(Tr===0){let Kr=or,us=h.charCodeAt(mr),hs=Ut.get(us),Es=!1;for(let go=mr-1;go>=Mn;go--){const Ks=go+1,Ls=h.charCodeAt(go);if(Ls===9){Es=!0;break}let Ts,La;if(Sn.YK(Ls)?(go--,Ts=0,La=2):(Ts=Ut.get(Ls),La=Sn.K7(Ls)?se:1),Kr<=vi){if(cr===0&&(cr=Ks,Or=Kr),Kr<=vi-Wt)break;if(pc(Ls,Ts,us,hs)){Tr=Ks,Er=Kr;break}}Kr-=La,us=Ls,hs=Ts}if(Tr!==0){const go=Wt-(Or-Er);if(go<=A){const Ks=h.charCodeAt(cr);let Ls;Sn.ZG(Ks)?Ls=2:Ls=Rl(Ks,Or,A,se),go-Ls<0&&(Tr=0)}}if(Es){Di--;continue}}if(Tr===0&&(Tr=cr,Er=Or),Tr<=Mn){const Kr=h.charCodeAt(Mn);Sn.ZG(Kr)?(Tr=Mn+2,Er=$n+2):(Tr=Mn+1,Er=$n+Rl(Kr,$n,A,se))}for(Mn=Tr,qt[_n]=Tr,$n=Er,on[_n]=Er,_n++,vi=Er+Wt;Di<0||Di<Ii&&ht[Di]<Er;)Di++;let Lo=Math.abs(ht[Di]-vi);for(;Di+1<Ii;){const Kr=Math.abs(ht[Di+1]-vi);if(Kr>=Lo)break;Lo=Kr,Di++}}return _n===0?null:(qt.length=_n,on.length=_n,Xl=o.breakOffsets,Ba=o.breakOffsetsVisibleColumn,o.breakOffsets=qt,o.breakOffsetsVisibleColumn=on,o.wrappedTextIndentLength=xt,o)}function od(Ut,o,h,A,Z,se,Se){const $e=fl.gk.applyInjectedText(o,h);let rt,ht;if(h&&h.length>0?(rt=h.map(Er=>Er.options),ht=h.map(Er=>Er.column-1)):(rt=null,ht=null),Z===-1)return rt?new Al(ht,rt,[$e.length],[],0):null;const xt=$e.length;if(xt<=1)return rt?new Al(ht,rt,[$e.length],[],0):null;const Wt=ad($e,A,Z,se,Se),qt=Z-Wt,on=[],_n=[];let Mn=0,$n=0,vi=0,Ii=Z,Di=$e.charCodeAt(0),mr=Ut.get(Di),or=Rl(Di,0,A,se),Tr=1;Sn.ZG(Di)&&(or+=1,Di=$e.charCodeAt(1),mr=Ut.get(Di),Tr++);for(let Er=Tr;Er<xt;Er++){const cr=Er,Or=$e.charCodeAt(Er);let Lo,Kr;Sn.ZG(Or)?(Er++,Lo=0,Kr=2):(Lo=Ut.get(Or),Kr=Rl(Or,or,A,se)),pc(Di,mr,Or,Lo)&&($n=cr,vi=or),or+=Kr,or>Ii&&(($n===0||or-vi>qt)&&($n=cr,vi=or-Kr),on[Mn]=$n,_n[Mn]=vi,Mn++,Ii=vi+qt,$n=0),Di=Or,mr=Lo}return Mn===0&&(!h||h.length===0)?null:(on[Mn]=xt,_n[Mn]=or,new Al(ht,rt,on,_n,Wt))}function Rl(Ut,o,h,A){return Ut===9?h-o%h:Sn.K7(Ut)||Ut<32?A:1}function sd(Ut,o){return o-Ut%o}function pc(Ut,o,h,A){return h!==32&&(o===2||o===3&&A!==2||A===1||A===3&&o!==1)}function ad(Ut,o,h,A,Z){let se=0;if(Z!==0){const Se=Sn.LC(Ut);if(Se!==-1){for(let rt=0;rt<Se;rt++)se+=Ut.charCodeAt(rt)===9?sd(se,o):1;const $e=Z===3?2:Z===2?1:0;for(let rt=0;rt<$e;rt++)se+=sd(se,o);se+A>h&&(se=0)}}return se}var Tu;const ld=(Tu=window.trustedTypes)===null||Tu===void 0?void 0:Tu.createPolicy("domLineBreaksComputer",{createHTML:Ut=>Ut});class cd{static create(){return new cd}constructor(){}createLineBreaksComputer(o,h,A,Z){const se=[],Se=[];return{addRequest:($e,rt,ht)=>{se.push($e),Se.push(rt)},finalize:()=>Fd(se,o,h,A,Z,Se)}}}function Fd(Ut,o,h,A,Z,se){var Se;function $e(cr){const Or=se[cr];if(Or){const Lo=fl.gk.applyInjectedText(Ut[cr],Or),Kr=Or.map(hs=>hs.options),us=Or.map(hs=>hs.column-1);return new Al(us,Kr,[Lo.length],[],0)}else return null}if(A===-1){const cr=[];for(let Or=0,Lo=Ut.length;Or<Lo;Or++)cr[Or]=$e(Or);return cr}const rt=Math.round(A*o.typicalHalfwidthCharacterWidth),xt=Math.round(h*(Z===3?2:Z===2?1:0)),Wt=Math.ceil(o.spaceWidth*xt),qt=document.createElement("div");(0,Bn.N)(qt,o);const on=(0,no.l$)(1e4),_n=[],Mn=[],$n=[],vi=[],Ii=[];for(let cr=0;cr<Ut.length;cr++){const Or=fl.gk.applyInjectedText(Ut[cr],se[cr]);let Lo=0,Kr=0,us=rt;if(Z!==0)if(Lo=Sn.LC(Or),Lo===-1)Lo=0;else{for(let Ks=0;Ks<Lo;Ks++)Kr+=Or.charCodeAt(Ks)===9?h-Kr%h:1;const go=Math.ceil(o.spaceWidth*Kr);go+o.typicalFullwidthCharacterWidth>rt?(Lo=0,Kr=0):us=rt-go}const hs=Or.substr(Lo),Es=il(hs,Kr,h,us,on,Wt);_n[cr]=Lo,Mn[cr]=Kr,$n[cr]=hs,vi[cr]=Es[0],Ii[cr]=Es[1]}const Di=on.build(),mr=(Se=ld==null?void 0:ld.createHTML(Di))!==null&&Se!==void 0?Se:Di;qt.innerHTML=mr,qt.style.position="absolute",qt.style.top="10000",qt.style.wordWrap="break-word",document.body.appendChild(qt);const or=document.createRange(),Tr=Array.prototype.slice.call(qt.children,0),Er=[];for(let cr=0;cr<Ut.length;cr++){const Or=Tr[cr],Lo=Ia(or,Or,$n[cr],vi[cr]);if(Lo===null){Er[cr]=$e(cr);continue}const Kr=_n[cr],us=Mn[cr]+xt,hs=Ii[cr],Es=[];for(let Ts=0,La=Lo.length;Ts<La;Ts++)Es[Ts]=hs[Lo[Ts]];if(Kr!==0)for(let Ts=0,La=Lo.length;Ts<La;Ts++)Lo[Ts]+=Kr;let go,Ks;const Ls=se[cr];Ls?(go=Ls.map(Ts=>Ts.options),Ks=Ls.map(Ts=>Ts.column-1)):(go=null,Ks=null),Er[cr]=new Al(Ks,go,Lo,Es,us)}return document.body.removeChild(qt),Er}function il(Ut,o,h,A,Z,se){if(se!==0){const qt=String(se);Z.appendASCIIString('<div style="text-indent: -'),Z.appendASCIIString(qt),Z.appendASCIIString("px; padding-left: "),Z.appendASCIIString(qt),Z.appendASCIIString("px; box-sizing: border-box; width:")}else Z.appendASCIIString('<div style="width:');Z.appendASCIIString(String(A)),Z.appendASCIIString('px;">');const Se=Ut.length;let $e=o,rt=0;const ht=[],xt=[];let Wt=0<Se?Ut.charCodeAt(0):0;Z.appendASCIIString("<span>");for(let qt=0;qt<Se;qt++){qt!==0&&qt%16384==0&&Z.appendASCIIString("</span><span>"),ht[qt]=rt,xt[qt]=$e;const on=Wt;Wt=qt+1<Se?Ut.charCodeAt(qt+1):0;let _n=1,Mn=1;switch(on){case 9:_n=h-$e%h,Mn=_n;for(let $n=1;$n<=_n;$n++)$n<_n?Z.write1(160):Z.appendASCII(32);break;case 32:Wt===32?Z.write1(160):Z.appendASCII(32);break;case 60:Z.appendASCIIString("&lt;");break;case 62:Z.appendASCIIString("&gt;");break;case 38:Z.appendASCIIString("&amp;");break;case 0:Z.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:Z.write1(65533);break;default:Sn.K7(on)&&Mn++,on<32?Z.write1(9216+on):Z.write1(on)}rt+=_n,$e+=Mn}return Z.appendASCIIString("</span>"),ht[Ut.length]=rt,xt[Ut.length]=$e,Z.appendASCIIString("</div>"),[ht,xt]}function Ia(Ut,o,h,A){if(h.length<=1)return null;const Z=Array.prototype.slice.call(o.children,0),se=[];try{Na(Ut,Z,A,0,null,h.length-1,null,se)}catch(Se){return console.log(Se),null}return se.length===0?null:(se.push(h.length),se)}function Na(Ut,o,h,A,Z,se,Se,$e){if(A===se||(Z=Z||Vs(Ut,o,h[A],h[A+1]),Se=Se||Vs(Ut,o,h[se],h[se+1]),Math.abs(Z[0].top-Se[0].top)<=.1))return;if(A+1===se){$e.push(se);return}const rt=A+(se-A)/2|0,ht=Vs(Ut,o,h[rt],h[rt+1]);Na(Ut,o,h,A,Z,rt,ht,$e),Na(Ut,o,h,rt,ht,se,Se,$e)}function Vs(Ut,o,h,A){return Ut.setStart(o[h/16384|0].firstChild,h%16384),Ut.setEnd(o[A/16384|0].firstChild,A%16384),Ut.getClientRects()}var Ta=a(92896),vc=a(89381),_c=a(71922),ud=function(Ut,o,h,A){var Z=arguments.length,se=Z<3?o:A===null?A=Object.getOwnPropertyDescriptor(o,h):A,Se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(Ut,o,h,A);else for(var $e=Ut.length-1;$e>=0;$e--)(Se=Ut[$e])&&(se=(Z<3?Se(se):Z>3?Se(o,h,se):Se(o,h))||se);return Z>3&&se&&Object.defineProperty(o,h,se),se},bl=function(Ut,o){return function(h,A){o(h,A,Ut)}};let Bd=0;class Cc{constructor(o,h,A,Z,se){this.model=o,this.viewModel=h,this.view=A,this.hasRealView=Z,this.listenersToRemove=se}dispose(){(0,x.B9)(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let Ql=class mp extends x.JT{constructor(o,h,A,Z,se,Se,$e,rt,ht,xt,Wt,qt){super();this.languageConfigurationService=Wt,this._onDidDispose=this._register(new F.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new F.Q5),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new F.Q5),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new F.Q5),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new F.Q5),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new F.Q5),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new F.Q5),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new F.Q5),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new F.Q5),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new F.Q5),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new F.Q5),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new F.Q5),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new bc),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new bc),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new F.Q5),this.onWillType=this._onWillType.event,this._onDidType=this._register(new F.Q5),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new F.Q5),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new F.Q5),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new F.Q5),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new F.Q5),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new F.Q5),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new F.Q5),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new F.Q5),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new F.Q5),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new F.Q5),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new F.Q5),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new F.Q5),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new F.Q5),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new F.Q5),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new F.Q5),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new F.Q5),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new F.Q5),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new F.Q5),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new F.Q5),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const on=Object.assign({},h);this._domElement=o,this._overflowWidgetsDomNode=on.overflowWidgetsDomNode,delete on.overflowWidgetsDomNode,this._id=++Bd,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=A.telemetryData,this._configuration=this._register(this._createConfiguration(A.isSimpleWidget||!1,on,xt)),this._register(this._configuration.onDidChange(Mn=>{this._onDidChangeConfiguration.fire(Mn);const $n=this._configuration.options;if(Mn.hasChanged(131)){const vi=$n.get(131);this._onDidLayoutChange.fire(vi)}})),this._contextKeyService=this._register($e.createScoped(this._domElement)),this._notificationService=ht,this._codeEditorService=se,this._commandService=Se,this._themeService=rt,this._register(new dd(this,this._contextKeyService)),this._register(new Mu(this,this._contextKeyService,qt)),this._instantiationService=Z.createChild(new gh.y([su.i6,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new mh(o),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let _n;Array.isArray(A.contributions)?_n=A.contributions:_n=d.Uc.getEditorContributions();for(const Mn of _n){if(this._contributions[Mn.id]){(0,B.dL)(new Error(`Cannot have two contributions with the same id ${Mn.id}`));continue}try{const $n=this._instantiationService.createInstance(Mn.ctor,this);this._contributions[Mn.id]=$n}catch($n){(0,B.dL)($n)}}d.Uc.getEditorActions().forEach(Mn=>{if(this._actions[Mn.id]){(0,B.dL)(new Error(`Cannot have two actions with the same id ${Mn.id}`));return}const $n=new Lu.p(Mn.id,Mn.label,Mn.alias,(0,cs.f6)(Mn.precondition),()=>this._instantiationService.invokeFunction(vi=>Promise.resolve(Mn.runEditorCommand(vi,this,null))),this._contextKeyService);this._actions[$n.id]=$n}),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(o,h,A){return new de(o,h,this._domElement,A)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return $l.g.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const o=Object.keys(this._contributions);for(let h=0,A=o.length;h<A;h++){const Z=o[h];this._contributions[Z].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(o){return this._instantiationService.invokeFunction(o)}updateOptions(o){this._configuration.updateOptions(o||{})}getOptions(){return this._configuration.options}getOption(o){return this._configuration.options.get(o)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(o){return this._modelData?Ta.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(117),o):null}getValue(o=null){if(!this._modelData)return"";const h=!!(o&&o.preserveBOM);let A=0;return o&&o.lineEnding&&o.lineEnding===`
`?A=1:o&&o.lineEnding&&o.lineEnding===`\r
`&&(A=2),this._modelData.model.getValue(A,h)}setValue(o){!this._modelData||this._modelData.model.setValue(o)}getModel(){return this._modelData?this._modelData.model:null}setModel(o=null){const h=o;if(this._modelData===null&&h===null||this._modelData&&this._modelData.model===h)return;const A=this.hasTextFocus(),Z=this._detachModel();this._attachModel(h),A&&this.hasModel()&&this.focus();const se={oldModelUrl:Z?Z.uri:null,newModelUrl:h?h.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(se),this._postDetachModelCleanup(Z)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let o in this._decorationTypeSubtypes){const h=this._decorationTypeSubtypes[o];for(let A in h)this._removeDecorationType(o+"-"+A)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(o,h,A){const Z=o.model.validatePosition({lineNumber:h,column:A}),se=o.viewModel.coordinatesConverter.convertModelPositionToViewPosition(Z);return o.viewModel.viewLayout.getVerticalOffsetForLineNumber(se.lineNumber)}getTopForLineNumber(o){return this._modelData?mp._getVerticalOffsetForPosition(this._modelData,o,1):-1}getTopForPosition(o,h){return this._modelData?mp._getVerticalOffsetForPosition(this._modelData,o,h):-1}setHiddenAreas(o){this._modelData&&this._modelData.viewModel.setHiddenAreas(o.map(h=>Ve.e.lift(h)))}getVisibleColumnFromPosition(o){if(!this._modelData)return o.column;const h=this._modelData.model.validatePosition(o),A=this._modelData.model.getOptions().tabSize;return at.i.visibleColumnFromColumn(this._modelData.model.getLineContent(h.lineNumber),h.column,A)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(o,h="api"){if(!!this._modelData){if(!Re.L.isIPosition(o))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(h,[{selectionStartLineNumber:o.lineNumber,selectionStartColumn:o.column,positionLineNumber:o.lineNumber,positionColumn:o.column}])}}_sendRevealRange(o,h,A,Z){if(!this._modelData)return;if(!Ve.e.isIRange(o))throw new Error("Invalid arguments");const se=this._modelData.model.validateRange(o),Se=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(se);this._modelData.viewModel.revealRange("api",A,Se,h,Z)}revealLine(o,h=0){this._revealLine(o,0,h)}revealLineInCenter(o,h=0){this._revealLine(o,1,h)}revealLineInCenterIfOutsideViewport(o,h=0){this._revealLine(o,2,h)}revealLineNearTop(o,h=0){this._revealLine(o,5,h)}_revealLine(o,h,A){if(typeof o!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Ve.e(o,1,o,1),h,!1,A)}revealPosition(o,h=0){this._revealPosition(o,0,!0,h)}revealPositionInCenter(o,h=0){this._revealPosition(o,1,!0,h)}revealPositionInCenterIfOutsideViewport(o,h=0){this._revealPosition(o,2,!0,h)}revealPositionNearTop(o,h=0){this._revealPosition(o,5,!0,h)}_revealPosition(o,h,A,Z){if(!Re.L.isIPosition(o))throw new Error("Invalid arguments");this._sendRevealRange(new Ve.e(o.lineNumber,o.column,o.lineNumber,o.column),h,A,Z)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(o,h="api"){const A=X.Y.isISelection(o),Z=Ve.e.isIRange(o);if(!A&&!Z)throw new Error("Invalid arguments");if(A)this._setSelectionImpl(o,h);else if(Z){const se={selectionStartLineNumber:o.startLineNumber,selectionStartColumn:o.startColumn,positionLineNumber:o.endLineNumber,positionColumn:o.endColumn};this._setSelectionImpl(se,h)}}_setSelectionImpl(o,h){if(!this._modelData)return;const A=new X.Y(o.selectionStartLineNumber,o.selectionStartColumn,o.positionLineNumber,o.positionColumn);this._modelData.viewModel.setSelections(h,[A])}revealLines(o,h,A=0){this._revealLines(o,h,0,A)}revealLinesInCenter(o,h,A=0){this._revealLines(o,h,1,A)}revealLinesInCenterIfOutsideViewport(o,h,A=0){this._revealLines(o,h,2,A)}revealLinesNearTop(o,h,A=0){this._revealLines(o,h,5,A)}_revealLines(o,h,A,Z){if(typeof o!="number"||typeof h!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Ve.e(o,1,h,1),A,!1,Z)}revealRange(o,h=0,A=!1,Z=!0){this._revealRange(o,A?1:0,Z,h)}revealRangeInCenter(o,h=0){this._revealRange(o,1,!0,h)}revealRangeInCenterIfOutsideViewport(o,h=0){this._revealRange(o,2,!0,h)}revealRangeNearTop(o,h=0){this._revealRange(o,5,!0,h)}revealRangeNearTopIfOutsideViewport(o,h=0){this._revealRange(o,6,!0,h)}revealRangeAtTop(o,h=0){this._revealRange(o,3,!0,h)}_revealRange(o,h,A,Z){if(!Ve.e.isIRange(o))throw new Error("Invalid arguments");this._sendRevealRange(Ve.e.lift(o),h,A,Z)}setSelections(o,h="api",A=0){if(!!this._modelData){if(!o||o.length===0)throw new Error("Invalid arguments");for(let Z=0,se=o.length;Z<se;Z++)if(!X.Y.isISelection(o[Z]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(h,o,A)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(o,h=1){if(!!this._modelData){if(typeof o!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:o},h)}}setScrollTop(o,h=1){if(!!this._modelData){if(typeof o!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:o},h)}}setScrollPosition(o,h=1){!this._modelData||this._modelData.viewModel.viewLayout.setScrollPosition(o,h)}saveViewState(){if(!this._modelData)return null;const o={},h=Object.keys(this._contributions);for(const se of h){const Se=this._contributions[se];typeof Se.saveViewState=="function"&&(o[se]=Se.saveViewState())}const A=this._modelData.viewModel.saveCursorState(),Z=this._modelData.viewModel.saveState();return{cursorState:A,viewState:Z,contributionsState:o}}restoreViewState(o){if(!this._modelData||!this._modelData.hasRealView)return;const h=o;if(h&&h.cursorState&&h.viewState){const A=h.cursorState;Array.isArray(A)?A.length>0&&this._modelData.viewModel.restoreCursorState(A):this._modelData.viewModel.restoreCursorState([A]);const Z=h.contributionsState||{},se=Object.keys(this._contributions);for(let $e=0,rt=se.length;$e<rt;$e++){const ht=se[$e],xt=this._contributions[ht];typeof xt.restoreViewState=="function"&&xt.restoreViewState(Z[ht])}const Se=this._modelData.viewModel.reduceRestoreState(h.viewState);this._modelData.view.restoreState(Se)}}getContribution(o){return this._contributions[o]||null}getActions(){const o=[],h=Object.keys(this._actions);for(let A=0,Z=h.length;A<Z;A++){const se=h[A];o.push(this._actions[se])}return o}getSupportedActions(){let o=this.getActions();return o=o.filter(h=>h.isSupported()),o}getAction(o){return this._actions[o]||null}trigger(o,h,A){switch(A=A||{},h){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(o);return;case"type":{const se=A;this._type(o,se.text||"");return}case"replacePreviousChar":{const se=A;this._compositionType(o,se.text||"",se.replaceCharCnt||0,0,0);return}case"compositionType":{const se=A;this._compositionType(o,se.text||"",se.replacePrevCharCnt||0,se.replaceNextCharCnt||0,se.positionDelta||0);return}case"paste":{const se=A;this._paste(o,se.text||"",se.pasteOnNewLine||!1,se.multicursorText||null,se.mode||null);return}case"cut":this._cut(o);return}const Z=this.getAction(h);if(Z){Promise.resolve(Z.run()).then(void 0,B.dL);return}!this._modelData||this._triggerEditorCommand(o,h,A)||this._triggerCommand(h,A)}_triggerCommand(o,h){this._commandService.executeCommand(o,h)}_startComposition(){!this._modelData||(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(o){!this._modelData||(this._modelData.viewModel.endComposition(o),this._onDidCompositionEnd.fire())}_type(o,h){!this._modelData||h.length===0||(o==="keyboard"&&this._onWillType.fire(h),this._modelData.viewModel.type(h,o),o==="keyboard"&&this._onDidType.fire(h))}_compositionType(o,h,A,Z,se){!this._modelData||this._modelData.viewModel.compositionType(h,A,Z,se,o)}_paste(o,h,A,Z,se){if(!this._modelData||h.length===0)return;const Se=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(h,A,Z,o);const $e=this._modelData.viewModel.getSelection().getStartPosition();o==="keyboard"&&this._onDidPaste.fire({range:new Ve.e(Se.lineNumber,Se.column,$e.lineNumber,$e.column),languageId:se})}_cut(o){!this._modelData||this._modelData.viewModel.cut(o)}_triggerEditorCommand(o,h,A){const Z=d.Uc.getEditorCommand(h);return Z?(A=A||{},A.source=o,this._instantiationService.invokeFunction(se=>{Promise.resolve(Z.runEditorCommand(se,this,A)).then(void 0,B.dL)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(81)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(81)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(o,h,A){if(!this._modelData||this._configuration.options.get(81))return!1;let Z;return A?Array.isArray(A)?Z=()=>A:Z=A:Z=()=>null,this._modelData.viewModel.executeEdits(o,h,Z),!0}executeCommand(o,h){!this._modelData||this._modelData.viewModel.executeCommand(h,o)}executeCommands(o,h){!this._modelData||this._modelData.viewModel.executeCommands(h,o)}changeDecorations(o){return this._modelData?this._modelData.model.changeDecorations(o,this._id):null}getLineDecorations(o){return this._modelData?this._modelData.model.getLineDecorations(o,this._id,(0,b.$J)(this._configuration.options)):null}getDecorationsInRange(o){return this._modelData?this._modelData.model.getDecorationsInRange(o,this._id,(0,b.$J)(this._configuration.options)):null}deltaDecorations(o,h){return this._modelData?o.length===0&&h.length===0?o:this._modelData.model.deltaDecorations(o,h,this._id):[]}removeDecorations(o){const h=this._decorationTypeKeysToIds[o];h&&this.deltaDecorations(h,[]),this._decorationTypeKeysToIds.hasOwnProperty(o)&&delete this._decorationTypeKeysToIds[o],this._decorationTypeSubtypes.hasOwnProperty(o)&&delete this._decorationTypeSubtypes[o]}getLayoutInfo(){return this._configuration.options.get(131)}createOverviewRuler(o){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(o)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(o){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(o)}layout(o){this._configuration.observeContainer(o),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(o){const h={widget:o,position:o.getPosition()};this._contentWidgets.hasOwnProperty(o.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[o.getId()]=h,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(h)}layoutContentWidget(o){const h=o.getId();if(this._contentWidgets.hasOwnProperty(h)){const A=this._contentWidgets[h];A.position=o.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(A)}}removeContentWidget(o){const h=o.getId();if(this._contentWidgets.hasOwnProperty(h)){const A=this._contentWidgets[h];delete this._contentWidgets[h],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(A)}}addOverlayWidget(o){const h={widget:o,position:o.getPosition()};this._overlayWidgets.hasOwnProperty(o.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[o.getId()]=h,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(h)}layoutOverlayWidget(o){const h=o.getId();if(this._overlayWidgets.hasOwnProperty(h)){const A=this._overlayWidgets[h];A.position=o.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(A)}}removeOverlayWidget(o){const h=o.getId();if(this._overlayWidgets.hasOwnProperty(h)){const A=this._overlayWidgets[h];delete this._overlayWidgets[h],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(A)}}changeViewZones(o){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(o)}getTargetAtClientPoint(o,h){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(o,h)}getScrolledVisiblePosition(o){if(!this._modelData||!this._modelData.hasRealView)return null;const h=this._modelData.model.validatePosition(o),A=this._configuration.options,Z=A.get(131),se=mp._getVerticalOffsetForPosition(this._modelData,h.lineNumber,h.column)-this.getScrollTop(),Se=this._modelData.view.getOffsetForColumn(h.lineNumber,h.column)+Z.glyphMarginWidth+Z.lineNumbersWidth+Z.decorationsWidth-this.getScrollLeft();return{top:se,left:Se,height:A.get(59)}}getOffsetForColumn(o,h){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(o,h)}render(o=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,o)}setAriaOptions(o){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(o)}applyFontInfo(o){(0,Bn.N)(o,this._configuration.options.get(44))}setBanner(o,h){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=o,this._configuration.setReservedHeight(o?h:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(o){if(!o){this._modelData=null;return}const h=[];this._domElement.setAttribute("data-mode-id",o.getLanguageId()),this._configuration.setIsDominatedByLongLines(o.isDominatedByLongLines()),this._configuration.setModelLineCount(o.getLineCount()),o.onBeforeAttached();const A=new xu(this._id,this._configuration,o,cd.create(),Cl.create(this._configuration.options),Se=>T.jL(Se),this.languageConfigurationService,this._themeService);h.push(o.onDidChangeDecorations(Se=>this._onDidChangeModelDecorations.fire(Se))),h.push(o.onDidChangeLanguage(Se=>{this._domElement.setAttribute("data-mode-id",o.getLanguageId()),this._onDidChangeModelLanguage.fire(Se)})),h.push(o.onDidChangeLanguageConfiguration(Se=>this._onDidChangeModelLanguageConfiguration.fire(Se))),h.push(o.onDidChangeContent(Se=>this._onDidChangeModelContent.fire(Se))),h.push(o.onDidChangeOptions(Se=>this._onDidChangeModelOptions.fire(Se))),h.push(o.onWillDispose(()=>this.setModel(null))),h.push(A.onEvent(Se=>{switch(Se.kind){case 0:this._onDidContentSizeChange.fire(Se);break;case 1:this._editorTextFocus.setValue(Se.hasFocus);break;case 2:this._onDidScrollChange.fire(Se);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{Se.reachedMaxCursorCount&&this._notificationService.warn(j.N("cursors.maximum","The number of cursors has been limited to {0}.",Oa.MAX_CURSOR_COUNT));const $e=[];for(let xt=0,Wt=Se.selections.length;xt<Wt;xt++)$e[xt]=Se.selections[xt].getPosition();const rt={position:$e[0],secondaryPositions:$e.slice(1),reason:Se.reason,source:Se.source};this._onDidChangeCursorPosition.fire(rt);const ht={selection:Se.selections[0],secondarySelections:Se.selections.slice(1),modelVersionId:Se.modelVersionId,oldSelections:Se.oldSelections,oldModelVersionId:Se.oldModelVersionId,source:Se.source,reason:Se.reason};this._onDidChangeCursorSelection.fire(ht);break}}}));const[Z,se]=this._createView(A);if(se){this._domElement.appendChild(Z.domNode.domNode);let Se=Object.keys(this._contentWidgets);for(let $e=0,rt=Se.length;$e<rt;$e++){const ht=Se[$e];Z.addContentWidget(this._contentWidgets[ht])}Se=Object.keys(this._overlayWidgets);for(let $e=0,rt=Se.length;$e<rt;$e++){const ht=Se[$e];Z.addOverlayWidget(this._overlayWidgets[ht])}Z.render(!1,!0),Z.domNode.domNode.setAttribute("data-uri",o.uri.toString())}this._modelData=new Cc(o,A,Z,se,h)}_createView(o){let h;this.isSimpleWidget?h={paste:(se,Se,$e,rt)=>{this._paste("keyboard",se,Se,$e,rt)},type:se=>{this._type("keyboard",se)},compositionType:(se,Se,$e,rt)=>{this._compositionType("keyboard",se,Se,$e,rt)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:h={paste:(se,Se,$e,rt)=>{const ht={text:se,pasteOnNewLine:Se,multicursorText:$e,mode:rt};this._commandService.executeCommand("paste",ht)},type:se=>{const Se={text:se};this._commandService.executeCommand("type",Se)},compositionType:(se,Se,$e,rt)=>{if($e||rt){const ht={text:se,replacePrevCharCnt:Se,replaceNextCharCnt:$e,positionDelta:rt};this._commandService.executeCommand("compositionType",ht)}else{const ht={text:se,replaceCharCnt:Se};this._commandService.executeCommand("replacePreviousChar",ht)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const A=new to(o.coordinatesConverter);return A.onKeyDown=se=>this._onKeyDown.fire(se),A.onKeyUp=se=>this._onKeyUp.fire(se),A.onContextMenu=se=>this._onContextMenu.fire(se),A.onMouseMove=se=>this._onMouseMove.fire(se),A.onMouseLeave=se=>this._onMouseLeave.fire(se),A.onMouseDown=se=>this._onMouseDown.fire(se),A.onMouseUp=se=>this._onMouseUp.fire(se),A.onMouseDrag=se=>this._onMouseDrag.fire(se),A.onMouseDrop=se=>this._onMouseDrop.fire(se),A.onMouseDropCanceled=se=>this._onMouseDropCanceled.fire(se),A.onMouseWheel=se=>this._onMouseWheel.fire(se),[new Ns(h,this._configuration,this._themeService.getColorTheme(),o,A,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(o){o&&o.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const o=this._modelData.model,h=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),h&&this._domElement.contains(h)&&this._domElement.removeChild(h),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),o}_removeDecorationType(o){this._codeEditorService.removeDecorationType(o)}hasModel(){return this._modelData!==null}};Ql=ud([bl(3,Od.TG),bl(4,ee.$),bl(5,ou.Hy),bl(6,su.i6),bl(7,$t.XE),bl(8,kd.lT),bl(9,W.F),bl(10,vc.c_),bl(11,_c.p)],Ql);class bc extends x.JT{constructor(){super();this._onDidChangeToTrue=this._register(new F.Q5),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new F.Q5),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(o){const h=o?2:1;this._value!==h&&(this._value=h,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class dd extends x.JT{constructor(o,h){super();this._editor=o,h.createKey("editorId",o.getId()),this._editorSimpleInput=os.u.editorSimpleInput.bindTo(h),this._editorFocus=os.u.focus.bindTo(h),this._textInputFocus=os.u.textInputFocus.bindTo(h),this._editorTextFocus=os.u.editorTextFocus.bindTo(h),this._editorTabMovesFocus=os.u.tabMovesFocus.bindTo(h),this._editorReadonly=os.u.readOnly.bindTo(h),this._inDiffEditor=os.u.inDiffEditor.bindTo(h),this._editorColumnSelection=os.u.columnSelection.bindTo(h),this._hasMultipleSelections=os.u.hasMultipleSelections.bindTo(h),this._hasNonEmptySelection=os.u.hasNonEmptySelection.bindTo(h),this._canUndo=os.u.canUndo.bindTo(h),this._canRedo=os.u.canRedo.bindTo(h),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const o=this._editor.getOptions();this._editorTabMovesFocus.set(o.get(130)),this._editorReadonly.set(o.get(81)),this._inDiffEditor.set(o.get(54)),this._editorColumnSelection.set(o.get(18))}_updateFromSelection(){const o=this._editor.getSelections();o?(this._hasMultipleSelections.set(o.length>1),this._hasNonEmptySelection.set(o.some(h=>!h.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const o=this._editor.getModel();this._canUndo.set(Boolean(o&&o.canUndo())),this._canRedo.set(Boolean(o&&o.canRedo()))}}class Mu extends x.JT{constructor(o,h,A){super();this._editor=o,this._contextKeyService=h,this._languageFeaturesService=A,this._langId=os.u.languageId.bindTo(h),this._hasCompletionItemProvider=os.u.hasCompletionItemProvider.bindTo(h),this._hasCodeActionsProvider=os.u.hasCodeActionsProvider.bindTo(h),this._hasCodeLensProvider=os.u.hasCodeLensProvider.bindTo(h),this._hasDefinitionProvider=os.u.hasDefinitionProvider.bindTo(h),this._hasDeclarationProvider=os.u.hasDeclarationProvider.bindTo(h),this._hasImplementationProvider=os.u.hasImplementationProvider.bindTo(h),this._hasTypeDefinitionProvider=os.u.hasTypeDefinitionProvider.bindTo(h),this._hasHoverProvider=os.u.hasHoverProvider.bindTo(h),this._hasDocumentHighlightProvider=os.u.hasDocumentHighlightProvider.bindTo(h),this._hasDocumentSymbolProvider=os.u.hasDocumentSymbolProvider.bindTo(h),this._hasReferenceProvider=os.u.hasReferenceProvider.bindTo(h),this._hasRenameProvider=os.u.hasRenameProvider.bindTo(h),this._hasSignatureHelpProvider=os.u.hasSignatureHelpProvider.bindTo(h),this._hasInlayHintsProvider=os.u.hasInlayHintsProvider.bindTo(h),this._hasDocumentFormattingProvider=os.u.hasDocumentFormattingProvider.bindTo(h),this._hasDocumentSelectionFormattingProvider=os.u.hasDocumentSelectionFormattingProvider.bindTo(h),this._hasMultipleDocumentFormattingProvider=os.u.hasMultipleDocumentFormattingProvider.bindTo(h),this._hasMultipleDocumentSelectionFormattingProvider=os.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(h),this._isInWalkThrough=os.u.isInWalkThroughSnippet.bindTo(h);const Z=()=>this._update();this._register(o.onDidChangeModel(Z)),this._register(o.onDidChangeModelLanguage(Z)),this._register(A.completionProvider.onDidChange(Z)),this._register(A.codeActionProvider.onDidChange(Z)),this._register(A.codeLensProvider.onDidChange(Z)),this._register(A.definitionProvider.onDidChange(Z)),this._register(A.declarationProvider.onDidChange(Z)),this._register(A.implementationProvider.onDidChange(Z)),this._register(A.typeDefinitionProvider.onDidChange(Z)),this._register(A.hoverProvider.onDidChange(Z)),this._register(A.documentHighlightProvider.onDidChange(Z)),this._register(A.documentSymbolProvider.onDidChange(Z)),this._register(A.referenceProvider.onDidChange(Z)),this._register(A.renameProvider.onDidChange(Z)),this._register(A.documentFormattingEditProvider.onDidChange(Z)),this._register(A.documentRangeFormattingEditProvider.onDidChange(Z)),this._register(A.signatureHelpProvider.onDidChange(Z)),this._register(A.inlayHintsProvider.onDidChange(Z)),Z()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const o=this._editor.getModel();if(!o){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(o.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(o)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(o)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(o)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(o)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(o)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(o)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(o)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(o)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(o)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(o)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(o)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(o)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(o)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(o)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(o)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(o)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(o)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(o).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(o).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(o).length>1),this._isInWalkThrough.set(o.uri.scheme===v.lg.walkThroughSnippet)})}}class mh extends x.JT{constructor(o){super();this._onChange=this._register(new F.Q5),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(T.go(o)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const Wd=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Au=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function yc(Ut){return Wd+encodeURIComponent(Ut.toString())+Au}const Vd=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),wc=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function ph(Ut){return Vd+encodeURIComponent(Ut.toString())+wc}(0,$t.Ic)((Ut,o)=>{const h=Ut.getColor(yr.b6y);h&&o.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${h}; }`);const A=Ut.getColor(yr.lXJ);A&&o.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${yc(A)}") repeat-x bottom left; }`);const Z=Ut.getColor(yr.L_H);Z&&o.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${Z}; }`);const se=Ut.getColor(yr.pW3);se&&o.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${se}; }`);const Se=Ut.getColor(yr.uoC);Se&&o.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${yc(Se)}") repeat-x bottom left; }`);const $e=Ut.getColor(yr.gpD);$e&&o.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${$e}; }`);const rt=Ut.getColor(yr.T83);rt&&o.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${rt}; }`);const ht=Ut.getColor(yr.c63);ht&&o.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${yc(ht)}") repeat-x bottom left; }`);const xt=Ut.getColor(yr.few);xt&&o.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${xt}; }`);const Wt=Ut.getColor(yr.fEB);Wt&&o.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${Wt}; }`);const qt=Ut.getColor(yr.Dut);qt&&o.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${ph(qt)}") no-repeat bottom left; }`);const on=Ut.getColor(En.zu);on&&o.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${on.rgba.a}; }`);const _n=Ut.getColor(En.kp);_n&&o.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${_n}; }`);const Mn=Ut.getColor(yr.NOs)||"inherit";o.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${Mn}}`)})},84527:function(Tt,me,a){"use strict";a.d(me,{H:function(){return c}});var p=a(36248),d=a(11640),z=a(63455),O=a(94565),S=a(16141),j=a(72065),T=a(59422),B=a(97781),F=a(31106),x=a(89381),v=a(71922),g=function(C,M,E,_){var L=arguments.length,N=L<3?M:_===null?_=Object.getOwnPropertyDescriptor(M,E):_,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(C,M,E,_);else for(var I=C.length-1;I>=0;I--)(b=C[I])&&(N=(L<3?b(N):L>3?b(M,E,N):b(M,E))||N);return L>3&&N&&Object.defineProperty(M,E,N),N},D=function(C,M){return function(E,_){M(E,_,C)}};let c=class extends z.Gm{constructor(M,E,_,L,N,b,I,k,W,q,re,de){super(M,Object.assign(Object.assign({},_.getRawOptions()),{overflowWidgetsDomNode:_.getOverflowWidgetsDomNode()}),{},L,N,b,I,k,W,q,re,de);this._parentEditor=_,this._overwriteOptions=E,super.updateOptions(this._overwriteOptions),this._register(_.onDidChangeConfiguration(pe=>this._onParentConfigurationChanged(pe)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(M){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(M){p.jB(this._overwriteOptions,M,!0),super.updateOptions(this._overwriteOptions)}};c=g([D(3,j.TG),D(4,d.$),D(5,O.Hy),D(6,S.i6),D(7,B.XE),D(8,T.lT),D(9,F.F),D(10,x.c_),D(11,v.p)],c)},61329:function(Tt,me,a){"use strict";a.d(me,{T4:function(){return d},OY:function(){return z},Sj:function(){return O},Uo:function(){return S},hP:function(){return j}});var p=a(3860);class d{constructor(B,F,x=!1){this._range=B,this._text=F,this.insertsAutoWhitespace=x}getEditOperations(B,F){F.addTrackedEditOperation(this._range,this._text)}computeCursorState(B,F){const v=F.getInverseEditOperations()[0].range;return p.Y.fromPositions(v.getEndPosition())}}class z{constructor(B,F){this._range=B,this._text=F}getEditOperations(B,F){F.addTrackedEditOperation(this._range,this._text)}computeCursorState(B,F){const v=F.getInverseEditOperations()[0].range;return p.Y.fromRange(v,0)}}class O{constructor(B,F,x=!1){this._range=B,this._text=F,this.insertsAutoWhitespace=x}getEditOperations(B,F){F.addTrackedEditOperation(this._range,this._text)}computeCursorState(B,F){const v=F.getInverseEditOperations()[0].range;return p.Y.fromPositions(v.getStartPosition())}}class S{constructor(B,F,x,v,g=!1){this._range=B,this._text=F,this._columnDeltaOffset=v,this._lineNumberDeltaOffset=x,this.insertsAutoWhitespace=g}getEditOperations(B,F){F.addTrackedEditOperation(this._range,this._text)}computeCursorState(B,F){const v=F.getInverseEditOperations()[0].range;return p.Y.fromPositions(v.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class j{constructor(B,F,x,v=!1){this._range=B,this._text=F,this._initialSelection=x,this._forceMoveMarkers=v,this._selectionId=null}getEditOperations(B,F){F.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=F.trackSelection(this._initialSelection)}computeCursorState(B,F){return F.getTrackedSelection(this._selectionId)}}},10291:function(Tt,me,a){"use strict";a.d(me,{U:function(){return B}});var p=a(25924),d=a(7988),z=a(24314),O=a(3860),S=a(89381);const j=Object.create(null);function T(F,x){if(x<=0)return"";j[F]||(j[F]=["",F]);const v=j[F];for(let g=v.length;g<=x;g++)v[g]=v[g-1]+F;return v[x]}class B{constructor(x,v){this._opts=v,this._selection=x,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(x,v,g,D,c){const C=d.i.visibleColumnFromColumn(x,v,g);if(c){const M=T(" ",D),_=d.i.prevIndentTabStop(C,D)/D;return T(M,_)}else{const M="	",_=d.i.prevRenderTabStop(C,g)/g;return T(M,_)}}static shiftIndent(x,v,g,D,c){const C=d.i.visibleColumnFromColumn(x,v,g);if(c){const M=T(" ",D),_=d.i.nextIndentTabStop(C,D)/D;return T(M,_)}else{const M="	",_=d.i.nextRenderTabStop(C,g)/g;return T(M,_)}}_addEditOperation(x,v,g){this._useLastEditRangeForCursorEndPosition?x.addTrackedEditOperation(v,g):x.addEditOperation(v,g)}getEditOperations(x,v){const g=this._selection.startLineNumber;let D=this._selection.endLineNumber;this._selection.endColumn===1&&g!==D&&(D=D-1);const{tabSize:c,indentSize:C,insertSpaces:M}=this._opts,E=g===D;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(x.getLineContent(g))&&(this._useLastEditRangeForCursorEndPosition=!0);let _=0,L=0;for(let N=g;N<=D;N++,_=L){L=0;const b=x.getLineContent(N);let I=p.LC(b);if(this._opts.isUnshift&&(b.length===0||I===0)||!E&&!this._opts.isUnshift&&b.length===0)continue;if(I===-1&&(I=b.length),N>1&&d.i.visibleColumnFromColumn(b,I+1,c)%C!=0&&x.isCheapToTokenize(N-1)){const q=S.zu.getEnterAction(this._opts.autoIndent,x,new z.e(N-1,x.getLineMaxColumn(N-1),N-1,x.getLineMaxColumn(N-1)));if(q){if(L=_,q.appendText)for(let re=0,de=q.appendText.length;re<de&&L<C&&q.appendText.charCodeAt(re)===32;re++)L++;q.removeText&&(L=Math.max(0,L-q.removeText));for(let re=0;re<L&&!(I===0||b.charCodeAt(I-1)!==32);re++)I--}}if(this._opts.isUnshift&&I===0)continue;let k;this._opts.isUnshift?k=B.unshiftIndent(b,I+1,c,C,M):k=B.shiftIndent(b,I+1,c,C,M),this._addEditOperation(v,new z.e(N,1,N,I+1),k),N===g&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=I+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&x.getLineLength(g)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const _=M?T(" ",C):"	";for(let L=g;L<=D;L++){const N=x.getLineContent(L);let b=p.LC(N);if(!(this._opts.isUnshift&&(N.length===0||b===0))&&!(!E&&!this._opts.isUnshift&&N.length===0)&&(b===-1&&(b=N.length),!(this._opts.isUnshift&&b===0)))if(this._opts.isUnshift){b=Math.min(b,C);for(let I=0;I<b;I++)if(N.charCodeAt(I)===9){b=I+1;break}this._addEditOperation(v,new z.e(L,1,L,b+1),"")}else this._addEditOperation(v,new z.e(L,1,L,1),_),L===g&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=v.trackSelection(this._selection)}computeCursorState(x,v){if(this._useLastEditRangeForCursorEndPosition){const D=v.getInverseEditOperations()[0];return new O.Y(D.range.endLineNumber,D.range.endColumn,D.range.endLineNumber,D.range.endColumn)}const g=v.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const D=this._selection.startColumn;return g.startColumn<=D?g:g.getDirection()===0?new O.Y(g.startLineNumber,D,g.endLineNumber,g.endColumn):new O.Y(g.endLineNumber,g.endColumn,g.startLineNumber,D)}return g}}},64141:function(Tt,me,a){"use strict";a.d(me,{y0:function(){return T},Bb:function(){return B},LJ:function(){return F},rk:function(){return v},O7:function(){return C},Zc:function(){return E},NY:function(){return b},d2:function(){return pe},n0:function(){return U},gk:function(){return ye},$J:function(){return Ne},Av:function(){return ie},qt:function(){return xe},hL:function(){return pt},Bc:function(){return Be},BH:function(){return Et}});var p=a(63580),d=a(1432),z=a(270),O=a(9488),S=a(36248),j=a(22075);const T=8;class B{constructor(Xe){this._values=Xe}hasChanged(Xe){return this._values[Xe]}}class F{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class x{constructor(Xe,ft,an,An){this.id=Xe,this.name=ft,this.defaultValue=an,this.schema=An}applyUpdate(Xe,ft){return g(Xe,ft)}compute(Xe,ft,an){return an}}class v{constructor(Xe,ft){this.newValue=Xe,this.didChange=ft}}function g(Dt,Xe){if(typeof Dt!="object"||typeof Xe!="object"||!Dt||!Xe)return new v(Xe,Dt!==Xe);if(Array.isArray(Dt)||Array.isArray(Xe)){const an=Array.isArray(Dt)&&Array.isArray(Xe)&&O.fS(Dt,Xe);return new v(Xe,an)}let ft=!1;for(const an in Xe)if(Xe.hasOwnProperty(an)){const An=g(Dt[an],Xe[an]);An.didChange&&(Dt[an]=An.newValue,ft=!0)}return new v(Dt,ft)}class D{constructor(Xe){this.schema=void 0,this.id=Xe,this.name="_never_",this.defaultValue=void 0}applyUpdate(Xe,ft){return g(Xe,ft)}validate(Xe){return this.defaultValue}}class c{constructor(Xe,ft,an,An){this.id=Xe,this.name=ft,this.defaultValue=an,this.schema=An}applyUpdate(Xe,ft){return g(Xe,ft)}validate(Xe){return typeof Xe=="undefined"?this.defaultValue:Xe}compute(Xe,ft,an){return an}}function C(Dt,Xe){return typeof Dt=="undefined"?Xe:Dt==="false"?!1:Boolean(Dt)}class M extends c{constructor(Xe,ft,an,An=void 0){typeof An!="undefined"&&(An.type="boolean",An.default=an),super(Xe,ft,an,An)}validate(Xe){return C(Xe,this.defaultValue)}}function E(Dt,Xe,ft,an){if(typeof Dt=="undefined")return Xe;let An=parseInt(Dt,10);return isNaN(An)?Xe:(An=Math.max(ft,An),An=Math.min(an,An),An|0)}class _ extends c{constructor(Xe,ft,an,An,Fn,Ht=void 0){typeof Ht!="undefined"&&(Ht.type="integer",Ht.default=an,Ht.minimum=An,Ht.maximum=Fn),super(Xe,ft,an,Ht),this.minimum=An,this.maximum=Fn}static clampedInt(Xe,ft,an,An){return E(Xe,ft,an,An)}validate(Xe){return _.clampedInt(Xe,this.defaultValue,this.minimum,this.maximum)}}class L extends c{constructor(Xe,ft,an,An,Fn){typeof Fn!="undefined"&&(Fn.type="number",Fn.default=an),super(Xe,ft,an,Fn),this.validationFn=An}static clamp(Xe,ft,an){return Xe<ft?ft:Xe>an?an:Xe}static float(Xe,ft){if(typeof Xe=="number")return Xe;if(typeof Xe=="undefined")return ft;const an=parseFloat(Xe);return isNaN(an)?ft:an}validate(Xe){return this.validationFn(L.float(Xe,this.defaultValue))}}class N extends c{static string(Xe,ft){return typeof Xe!="string"?ft:Xe}constructor(Xe,ft,an,An=void 0){typeof An!="undefined"&&(An.type="string",An.default=an),super(Xe,ft,an,An)}validate(Xe){return N.string(Xe,this.defaultValue)}}function b(Dt,Xe,ft){return typeof Dt!="string"||ft.indexOf(Dt)===-1?Xe:Dt}class I extends c{constructor(Xe,ft,an,An,Fn=void 0){typeof Fn!="undefined"&&(Fn.type="string",Fn.enum=An,Fn.default=an),super(Xe,ft,an,Fn),this._allowedValues=An}validate(Xe){return b(Xe,this.defaultValue,this._allowedValues)}}class k extends x{constructor(Xe,ft,an,An,Fn,Ht,Kt=void 0){typeof Kt!="undefined"&&(Kt.type="string",Kt.enum=Fn,Kt.default=An),super(Xe,ft,an,Kt),this._allowedValues=Fn,this._convert=Ht}validate(Xe){return typeof Xe!="string"?this.defaultValue:this._allowedValues.indexOf(Xe)===-1?this.defaultValue:this._convert(Xe)}}function W(Dt){switch(Dt){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class q extends x{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p.N("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),p.N("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),p.N("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:p.N("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(Xe){switch(Xe){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(Xe,ft,an){return an===0?Xe.accessibilitySupport:an}}class re extends x{constructor(){const Xe={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",Xe,{"editor.comments.insertSpace":{type:"boolean",default:Xe.insertSpace,description:p.N("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:Xe.ignoreEmptyLines,description:p.N("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{insertSpace:C(ft.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:C(ft.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function de(Dt){switch(Dt){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var pe;(function(Dt){Dt[Dt.Line=1]="Line",Dt[Dt.Block=2]="Block",Dt[Dt.Underline=3]="Underline",Dt[Dt.LineThin=4]="LineThin",Dt[Dt.BlockOutline=5]="BlockOutline",Dt[Dt.UnderlineThin=6]="UnderlineThin"})(pe||(pe={}));function ae(Dt){switch(Dt){case"line":return pe.Line;case"block":return pe.Block;case"underline":return pe.Underline;case"line-thin":return pe.LineThin;case"block-outline":return pe.BlockOutline;case"underline-thin":return pe.UnderlineThin}}class ue extends D{constructor(){super(128)}compute(Xe,ft,an){const An=["monaco-editor"];return ft.get(33)&&An.push(ft.get(33)),Xe.extraEditorClassName&&An.push(Xe.extraEditorClassName),ft.get(66)==="default"?An.push("mouse-default"):ft.get(66)==="copy"&&An.push("mouse-copy"),ft.get(100)&&An.push("showUnused"),ft.get(126)&&An.push("showDeprecated"),An.join(" ")}}class te extends M{constructor(){super(32,"emptySelectionClipboard",!0,{description:p.N("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(Xe,ft,an){return an&&Xe.emptySelectionClipboard}}class K extends x{constructor(){const Xe={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",Xe,{"editor.find.cursorMoveOnType":{type:"boolean",default:Xe.cursorMoveOnType,description:p.N("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:Xe.seedSearchStringFromSelection,enumDescriptions:[p.N("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),p.N("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),p.N("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:p.N("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:Xe.autoFindInSelection,enumDescriptions:[p.N("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),p.N("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),p.N("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:p.N("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:Xe.globalFindClipboard,description:p.N("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:d.dz},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:Xe.addExtraSpaceOnTop,description:p.N("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:Xe.loop,description:p.N("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{cursorMoveOnType:C(ft.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof Xe.seedSearchStringFromSelection=="boolean"?Xe.seedSearchStringFromSelection?"always":"never":b(ft.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof Xe.autoFindInSelection=="boolean"?Xe.autoFindInSelection?"always":"never":b(ft.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:C(ft.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:C(ft.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:C(ft.loop,this.defaultValue.loop)}}}class U extends x{constructor(){super(45,"fontLigatures",U.OFF,{anyOf:[{type:"boolean",description:p.N("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:p.N("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:p.N("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(Xe){return typeof Xe=="undefined"?this.defaultValue:typeof Xe=="string"?Xe==="false"?U.OFF:Xe==="true"?U.ON:Xe:Boolean(Xe)?U.ON:U.OFF}}U.OFF='"liga" off, "calt" off',U.ON='"liga" on, "calt" on';class ee extends D{constructor(){super(44)}compute(Xe,ft,an){return Xe.fontInfo}}class X extends c{constructor(){super(46,"fontSize",pt.fontSize,{type:"number",minimum:6,maximum:100,default:pt.fontSize,description:p.N("fontSize","Controls the font size in pixels.")})}validate(Xe){const ft=L.float(Xe,this.defaultValue);return ft===0?pt.fontSize:L.clamp(ft,6,100)}compute(Xe,ft,an){return Xe.fontInfo.fontSize}}class le extends x{constructor(){super(47,"fontWeight",pt.fontWeight,{anyOf:[{type:"number",minimum:le.MINIMUM_VALUE,maximum:le.MAXIMUM_VALUE,errorMessage:p.N("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:le.SUGGESTION_VALUES}],default:pt.fontWeight,description:p.N("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(Xe){return Xe==="normal"||Xe==="bold"?Xe:String(_.clampedInt(Xe,pt.fontWeight,le.MINIMUM_VALUE,le.MAXIMUM_VALUE))}}le.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],le.MINIMUM_VALUE=1,le.MAXIMUM_VALUE=1e3;class oe extends x{constructor(){const Xe={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},ft={type:"string",enum:["peek","gotoAndPeek","goto"],default:Xe.multiple,enumDescriptions:[p.N("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),p.N("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),p.N("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},an=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(51,"gotoLocation",Xe,{"editor.gotoLocation.multiple":{deprecationMessage:p.N("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:p.N("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},ft),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:p.N("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},ft),"editor.gotoLocation.multipleDeclarations":Object.assign({description:p.N("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},ft),"editor.gotoLocation.multipleImplementations":Object.assign({description:p.N("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},ft),"editor.gotoLocation.multipleReferences":Object.assign({description:p.N("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},ft),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:Xe.alternativeDefinitionCommand,enum:an,description:p.N("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:Xe.alternativeTypeDefinitionCommand,enum:an,description:p.N("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:Xe.alternativeDeclarationCommand,enum:an,description:p.N("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:Xe.alternativeImplementationCommand,enum:an,description:p.N("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:Xe.alternativeReferenceCommand,enum:an,description:p.N("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(Xe){var ft,an,An,Fn,Ht;if(!Xe||typeof Xe!="object")return this.defaultValue;const Kt=Xe;return{multiple:b(Kt.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(ft=Kt.multipleDefinitions)!==null&&ft!==void 0?ft:b(Kt.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(an=Kt.multipleTypeDefinitions)!==null&&an!==void 0?an:b(Kt.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(An=Kt.multipleDeclarations)!==null&&An!==void 0?An:b(Kt.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(Fn=Kt.multipleImplementations)!==null&&Fn!==void 0?Fn:b(Kt.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(Ht=Kt.multipleReferences)!==null&&Ht!==void 0?Ht:b(Kt.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:N.string(Kt.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:N.string(Kt.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:N.string(Kt.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:N.string(Kt.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:N.string(Kt.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class Ce extends x{constructor(){const Xe={enabled:!0,delay:300,sticky:!0,above:!0};super(53,"hover",Xe,{"editor.hover.enabled":{type:"boolean",default:Xe.enabled,description:p.N("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:Xe.delay,minimum:0,maximum:1e4,description:p.N("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:Xe.sticky,description:p.N("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:Xe.above,description:p.N("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{enabled:C(ft.enabled,this.defaultValue.enabled),delay:_.clampedInt(ft.delay,this.defaultValue.delay,0,1e4),sticky:C(ft.sticky,this.defaultValue.sticky),above:C(ft.above,this.defaultValue.above)}}}class ye extends D{constructor(){super(131)}compute(Xe,ft,an){return ye.computeLayout(ft,{memory:Xe.memory,outerWidth:Xe.outerWidth,outerHeight:Xe.outerHeight,isDominatedByLongLines:Xe.isDominatedByLongLines,lineHeight:Xe.fontInfo.lineHeight,viewLineCount:Xe.viewLineCount,lineNumbersDigitCount:Xe.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:Xe.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:Xe.fontInfo.maxDigitWidth,pixelRatio:Xe.pixelRatio})}static computeContainedMinimapLineCount(Xe){const ft=Xe.height/Xe.lineHeight,an=Xe.scrollBeyondLastLine?ft-1:0,An=(Xe.viewLineCount+an)/(Xe.pixelRatio*Xe.height),Fn=Math.floor(Xe.viewLineCount/An);return{typicalViewportLineCount:ft,extraLinesBeyondLastLine:an,desiredRatio:An,minimapLineCount:Fn}}static _computeMinimapLayout(Xe,ft){const an=Xe.outerWidth,An=Xe.outerHeight,Fn=Xe.pixelRatio;if(!Xe.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(Fn*An),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:An};const Ht=ft.stableMinimapLayoutInput,Kt=Ht&&Xe.outerHeight===Ht.outerHeight&&Xe.lineHeight===Ht.lineHeight&&Xe.typicalHalfwidthCharacterWidth===Ht.typicalHalfwidthCharacterWidth&&Xe.pixelRatio===Ht.pixelRatio&&Xe.scrollBeyondLastLine===Ht.scrollBeyondLastLine&&Xe.minimap.enabled===Ht.minimap.enabled&&Xe.minimap.side===Ht.minimap.side&&Xe.minimap.size===Ht.minimap.size&&Xe.minimap.showSlider===Ht.minimap.showSlider&&Xe.minimap.renderCharacters===Ht.minimap.renderCharacters&&Xe.minimap.maxColumn===Ht.minimap.maxColumn&&Xe.minimap.scale===Ht.minimap.scale&&Xe.verticalScrollbarWidth===Ht.verticalScrollbarWidth&&Xe.isViewportWrapping===Ht.isViewportWrapping,pn=Xe.lineHeight,Vn=Xe.typicalHalfwidthCharacterWidth,kt=Xe.scrollBeyondLastLine,Zt=Xe.minimap.renderCharacters;let wn=Fn>=2?Math.round(Xe.minimap.scale*2):Xe.minimap.scale;const Pi=Xe.minimap.maxColumn,Fi=Xe.minimap.size,Ji=Xe.minimap.side,si=Xe.verticalScrollbarWidth,zt=Xe.viewLineCount,Vt=Xe.remainingWidth,vn=Xe.isViewportWrapping,Sn=Zt?2:3;let Bn=Math.floor(Fn*An);const mn=Bn/Fn;let Jt=!1,En=!1,$t=Sn*wn,sn=wn/Fn,Tn=1;if(Fi==="fill"||Fi==="fit"){const{typicalViewportLineCount:Dr,extraLinesBeyondLastLine:Fr,desiredRatio:Sr,minimapLineCount:Ro}=ye.computeContainedMinimapLineCount({viewLineCount:zt,scrollBeyondLastLine:kt,height:An,lineHeight:pn,pixelRatio:Fn});if(zt/Ro>1)Jt=!0,En=!0,wn=1,$t=1,sn=wn/Fn;else{let no=!1,dr=wn+1;if(Fi==="fit"){const kn=Math.ceil((zt+Fr)*$t);vn&&Kt&&Vt<=ft.stableFitRemainingWidth?(no=!0,dr=ft.stableFitMaxMinimapScale):no=kn>Bn}if(Fi==="fill"||no){Jt=!0;const kn=wn;$t=Math.min(pn*Fn,Math.max(1,Math.floor(1/Sr))),vn&&Kt&&Vt<=ft.stableFitRemainingWidth&&(dr=ft.stableFitMaxMinimapScale),wn=Math.min(dr,Math.max(1,Math.floor($t/Sn))),wn>kn&&(Tn=Math.min(2,wn/kn)),sn=wn/Fn/Tn,Bn=Math.ceil(Math.max(Dr,zt+Fr)*$t),vn?(ft.stableMinimapLayoutInput=Xe,ft.stableFitRemainingWidth=Vt,ft.stableFitMaxMinimapScale=wn):(ft.stableMinimapLayoutInput=null,ft.stableFitRemainingWidth=0)}}}const ri=Math.floor(Pi*sn),oi=Math.min(ri,Math.max(0,Math.floor((Vt-si-2)*sn/(Vn+sn)))+T);let On=Math.floor(Fn*oi);const Qn=On/Fn;On=Math.floor(On*Tn);const Yi=Zt?1:2,Lr=Ji==="left"?0:an-oi-si;return{renderMinimap:Yi,minimapLeft:Lr,minimapWidth:oi,minimapHeightIsEditorHeight:Jt,minimapIsSampling:En,minimapScale:wn,minimapLineHeight:$t,minimapCanvasInnerWidth:On,minimapCanvasInnerHeight:Bn,minimapCanvasOuterWidth:Qn,minimapCanvasOuterHeight:mn}}static computeLayout(Xe,ft){const an=ft.outerWidth|0,An=ft.outerHeight|0,Fn=ft.lineHeight|0,Ht=ft.lineNumbersDigitCount|0,Kt=ft.typicalHalfwidthCharacterWidth,pn=ft.maxDigitWidth,Vn=ft.pixelRatio,kt=ft.viewLineCount,Zt=Xe.get(123),wn=Zt==="inherit"?Xe.get(122):Zt,Pi=wn==="inherit"?Xe.get(118):wn,Fi=Xe.get(121),Ji=Xe.get(2),si=ft.isDominatedByLongLines,zt=Xe.get(50),Vt=Xe.get(60).renderType!==0,vn=Xe.get(61),Sn=Xe.get(94),Bn=Xe.get(65),mn=Xe.get(92),Jt=mn.verticalScrollbarSize,En=mn.verticalHasArrows,$t=mn.arrowSize,sn=mn.horizontalScrollbarSize,Tn=Xe.get(58),ri=Xe.get(37);let oi;if(typeof Tn=="string"&&/^\d+(\.\d+)?ch$/.test(Tn)){const At=parseFloat(Tn.substr(0,Tn.length-2));oi=_.clampedInt(At*Kt,0,0,1e3)}else oi=_.clampedInt(Tn,0,0,1e3);ri&&(oi+=16);let On=0;if(Vt){const At=Math.max(Ht,vn);On=Math.round(At*pn)}let Qn=0;zt&&(Qn=Fn);let Yi=0,Lr=Yi+Qn,Dr=Lr+On,Fr=Dr+oi;const Sr=an-Qn-On-oi;let Ro=!1,to=!1,no=-1;Ji!==2&&(wn==="inherit"&&si?(Ro=!0,to=!0):Pi==="on"||Pi==="bounded"?to=!0:Pi==="wordWrapColumn"&&(no=Fi));const dr=ye._computeMinimapLayout({outerWidth:an,outerHeight:An,lineHeight:Fn,typicalHalfwidthCharacterWidth:Kt,pixelRatio:Vn,scrollBeyondLastLine:Sn,minimap:Bn,verticalScrollbarWidth:Jt,viewLineCount:kt,remainingWidth:Sr,isViewportWrapping:to},ft.memory||new F);dr.renderMinimap!==0&&dr.minimapLeft===0&&(Yi+=dr.minimapWidth,Lr+=dr.minimapWidth,Dr+=dr.minimapWidth,Fr+=dr.minimapWidth);const kn=Sr-dr.minimapWidth,bt=Math.max(1,Math.floor((kn-Jt-2)/Kt)),Bt=En?$t:0;return to&&(no=Math.max(1,bt),Pi==="bounded"&&(no=Math.min(no,Fi))),{width:an,height:An,glyphMarginLeft:Yi,glyphMarginWidth:Qn,lineNumbersLeft:Lr,lineNumbersWidth:On,decorationsLeft:Dr,decorationsWidth:oi,contentLeft:Fr,contentWidth:kn,minimap:dr,viewportColumn:bt,isWordWrapMinified:Ro,isViewportWrapping:to,wrappingColumn:no,verticalScrollbarWidth:Jt,horizontalScrollbarHeight:sn,overviewRuler:{top:Bt,width:Jt,height:An-2*Bt,right:0}}}}class ke extends x{constructor(){const Xe={enabled:!0};super(57,"lightbulb",Xe,{"editor.lightbulb.enabled":{type:"boolean",default:Xe.enabled,description:p.N("codeActions","Enables the code action lightbulb in the editor.")}})}validate(Xe){return!Xe||typeof Xe!="object"?this.defaultValue:{enabled:C(Xe.enabled,this.defaultValue.enabled)}}}class Te extends x{constructor(){const Xe={enabled:!0,fontSize:0,fontFamily:""};super(127,"inlayHints",Xe,{"editor.inlayHints.enabled":{type:"boolean",default:Xe.enabled,description:p.N("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:Xe.fontSize,markdownDescription:p.N("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:Xe.fontFamily,markdownDescription:p.N("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{enabled:C(ft.enabled,this.defaultValue.enabled),fontSize:_.clampedInt(ft.fontSize,this.defaultValue.fontSize,0,100),fontFamily:N.string(ft.fontFamily,this.defaultValue.fontFamily)}}}class ge extends L{constructor(){super(59,"lineHeight",pt.lineHeight,Xe=>L.clamp(Xe,0,150),{markdownDescription:p.N("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(Xe,ft,an){return Xe.fontInfo.lineHeight}}class we extends x{constructor(){const Xe={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(65,"minimap",Xe,{"editor.minimap.enabled":{type:"boolean",default:Xe.enabled,description:p.N("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p.N("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),p.N("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),p.N("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:Xe.size,description:p.N("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:Xe.side,description:p.N("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:Xe.showSlider,description:p.N("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:Xe.scale,minimum:1,maximum:3,enum:[1,2,3],description:p.N("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:Xe.renderCharacters,description:p.N("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:Xe.maxColumn,description:p.N("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{enabled:C(ft.enabled,this.defaultValue.enabled),size:b(ft.size,this.defaultValue.size,["proportional","fill","fit"]),side:b(ft.side,this.defaultValue.side,["right","left"]),showSlider:b(ft.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:C(ft.renderCharacters,this.defaultValue.renderCharacters),scale:_.clampedInt(ft.scale,1,1,3),maxColumn:_.clampedInt(ft.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function ze(Dt){return Dt==="ctrlCmd"?d.dz?"metaKey":"ctrlKey":"altKey"}class Qe extends x{constructor(){super(75,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p.N("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p.N("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{top:_.clampedInt(ft.top,0,0,1e3),bottom:_.clampedInt(ft.bottom,0,0,1e3)}}}class Pe extends x{constructor(){const Xe={enabled:!0,cycle:!1};super(76,"parameterHints",Xe,{"editor.parameterHints.enabled":{type:"boolean",default:Xe.enabled,description:p.N("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:Xe.cycle,description:p.N("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{enabled:C(ft.enabled,this.defaultValue.enabled),cycle:C(ft.cycle,this.defaultValue.cycle)}}}class Oe extends D{constructor(){super(129)}compute(Xe,ft,an){return Xe.pixelRatio}}class qe extends x{constructor(){const Xe={other:!0,comments:!1,strings:!1};super(79,"quickSuggestions",Xe,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:Xe.strings,description:p.N("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:Xe.comments,description:p.N("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:Xe.other,description:p.N("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:Xe,description:p.N("quickSuggestions","Controls whether suggestions should automatically show up while typing.")});this.defaultValue=Xe}validate(Xe){if(typeof Xe=="boolean")return Xe;if(Xe&&typeof Xe=="object"){const ft=Xe,an={other:C(ft.other,this.defaultValue.other),comments:C(ft.comments,this.defaultValue.comments),strings:C(ft.strings,this.defaultValue.strings)};return an.other&&an.comments&&an.strings?!0:!an.other&&!an.comments&&!an.strings?!1:an}return this.defaultValue}}class Je extends x{constructor(){super(60,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p.N("lineNumbers.off","Line numbers are not rendered."),p.N("lineNumbers.on","Line numbers are rendered as absolute number."),p.N("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),p.N("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:p.N("lineNumbers","Controls the display of line numbers.")})}validate(Xe){let ft=this.defaultValue.renderType,an=this.defaultValue.renderFn;return typeof Xe!="undefined"&&(typeof Xe=="function"?(ft=4,an=Xe):Xe==="interval"?ft=3:Xe==="relative"?ft=2:Xe==="on"?ft=1:ft=0),{renderType:ft,renderFn:an}}}function Ne(Dt){const Xe=Dt.get(87);return Xe==="editable"?Dt.get(81):Xe!=="on"}class Fe extends x{constructor(){const Xe=[],ft={type:"number",description:p.N("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(91,"rulers",Xe,{type:"array",items:{anyOf:[ft,{type:["object"],properties:{column:ft,color:{type:"string",description:p.N("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:Xe,description:p.N("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(Xe){if(Array.isArray(Xe)){const ft=[];for(let an of Xe)if(typeof an=="number")ft.push({column:_.clampedInt(an,0,0,1e4),color:null});else if(an&&typeof an=="object"){const An=an;ft.push({column:_.clampedInt(An.column,0,0,1e4),color:An.color})}return ft.sort((an,An)=>an.column-An.column),ft}return this.defaultValue}}function ne(Dt,Xe){if(typeof Dt!="string")return Xe;switch(Dt){case"hidden":return 2;case"visible":return 3;default:return 1}}class Q extends x{constructor(){const Xe={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(92,"scrollbar",Xe,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p.N("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),p.N("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),p.N("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:p.N("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p.N("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),p.N("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),p.N("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:p.N("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:Xe.verticalScrollbarSize,description:p.N("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:Xe.horizontalScrollbarSize,description:p.N("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:Xe.scrollByPage,description:p.N("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe,an=_.clampedInt(ft.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),An=_.clampedInt(ft.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:_.clampedInt(ft.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:ne(ft.vertical,this.defaultValue.vertical),horizontal:ne(ft.horizontal,this.defaultValue.horizontal),useShadows:C(ft.useShadows,this.defaultValue.useShadows),verticalHasArrows:C(ft.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:C(ft.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:C(ft.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:C(ft.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:an,horizontalSliderSize:_.clampedInt(ft.horizontalSliderSize,an,0,1e3),verticalScrollbarSize:An,verticalSliderSize:_.clampedInt(ft.verticalSliderSize,An,0,1e3),scrollByPage:C(ft.scrollByPage,this.defaultValue.scrollByPage)}}}const ie="inUntrustedWorkspace",xe={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class be extends x{constructor(){const Xe={nonBasicASCII:ie,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:ie,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(113,"unicodeHighlight",Xe,{[xe.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ie],default:Xe.nonBasicASCII,description:p.N("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[xe.invisibleCharacters]:{restricted:!0,type:"boolean",default:Xe.invisibleCharacters,description:p.N("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[xe.ambiguousCharacters]:{restricted:!0,type:"boolean",default:Xe.ambiguousCharacters,description:p.N("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[xe.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ie],default:Xe.includeComments,description:p.N("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[xe.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,ie],default:Xe.includeStrings,description:p.N("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to unicode highlighting.")},[xe.allowedCharacters]:{restricted:!0,type:"object",default:Xe.allowedCharacters,description:p.N("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[xe.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:Xe.allowedLocales,description:p.N("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(Xe,ft){let an=!1;ft.allowedCharacters&&(S.fS(Xe.allowedCharacters,ft.allowedCharacters)||(Xe=Object.assign(Object.assign({},Xe),{allowedCharacters:ft.allowedCharacters}),an=!0)),ft.allowedLocales&&(S.fS(Xe.allowedLocales,ft.allowedLocales)||(Xe=Object.assign(Object.assign({},Xe),{allowedLocales:ft.allowedLocales}),an=!0));const An=super.applyUpdate(Xe,ft);return an?new v(An.newValue,!0):An}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{nonBasicASCII:Ot(ft.nonBasicASCII,ie,[!0,!1,ie]),invisibleCharacters:C(ft.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:C(ft.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Ot(ft.includeComments,ie,[!0,!1,ie]),includeStrings:Ot(ft.includeStrings,ie,[!0,!1,ie]),allowedCharacters:this.validateBooleanMap(Xe.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(Xe.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(Xe,ft){if(typeof Xe!="object"||!Xe)return ft;const an={};for(const[An,Fn]of Object.entries(Xe))Fn===!0&&(an[An]=!0);return an}}class Ge extends x{constructor(){const Xe={enabled:!0,mode:"subwordSmart"};super(55,"inlineSuggest",Xe,{"editor.inlineSuggest.enabled":{type:"boolean",default:Xe.enabled,description:p.N("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{enabled:C(ft.enabled,this.defaultValue.enabled),mode:b(ft.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class nt extends x{constructor(){const Xe={enabled:j.D.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",Xe,{"editor.bracketPairColorization.enabled":{type:"boolean",default:Xe.enabled,description:p.N("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(Xe){return!Xe||typeof Xe!="object"?this.defaultValue:{enabled:C(Xe.enabled,this.defaultValue.enabled)}}}class _t extends x{constructor(){const Xe={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",Xe,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p.N("editor.guides.bracketPairs.true","Enables bracket pair guides."),p.N("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),p.N("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:Xe.bracketPairs,description:p.N("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p.N("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),p.N("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),p.N("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:Xe.bracketPairsHorizontal,description:p.N("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:Xe.highlightActiveBracketPair,description:p.N("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:Xe.indentation,description:p.N("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:Xe.highlightActiveIndentation,description:p.N("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{bracketPairs:Ot(ft.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Ot(ft.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:C(ft.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:C(ft.indentation,this.defaultValue.indentation),highlightActiveIndentation:C(ft.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function Ot(Dt,Xe,ft){const an=ft.indexOf(Dt);return an===-1?Xe:ft[an]}class rn extends x{constructor(){const Xe={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(106,"suggest",Xe,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p.N("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),p.N("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:Xe.insertMode,description:p.N("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:Xe.filterGraceful,description:p.N("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:Xe.localityBonus,description:p.N("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:Xe.shareSuggestSelections,markdownDescription:p.N("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:Xe.snippetsPreventQuickSuggestions,description:p.N("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:Xe.showIcons,description:p.N("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:Xe.showStatusBar,description:p.N("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:Xe.preview,description:p.N("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:Xe.showInlineDetails,description:p.N("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p.N("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p.N("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p.N("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(Xe){if(!Xe||typeof Xe!="object")return this.defaultValue;const ft=Xe;return{insertMode:b(ft.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:C(ft.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:C(ft.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:C(ft.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:C(ft.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:C(ft.showIcons,this.defaultValue.showIcons),showStatusBar:C(ft.showStatusBar,this.defaultValue.showStatusBar),preview:C(ft.preview,this.defaultValue.preview),previewMode:b(ft.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:C(ft.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:C(ft.showMethods,this.defaultValue.showMethods),showFunctions:C(ft.showFunctions,this.defaultValue.showFunctions),showConstructors:C(ft.showConstructors,this.defaultValue.showConstructors),showDeprecated:C(ft.showDeprecated,this.defaultValue.showDeprecated),showFields:C(ft.showFields,this.defaultValue.showFields),showVariables:C(ft.showVariables,this.defaultValue.showVariables),showClasses:C(ft.showClasses,this.defaultValue.showClasses),showStructs:C(ft.showStructs,this.defaultValue.showStructs),showInterfaces:C(ft.showInterfaces,this.defaultValue.showInterfaces),showModules:C(ft.showModules,this.defaultValue.showModules),showProperties:C(ft.showProperties,this.defaultValue.showProperties),showEvents:C(ft.showEvents,this.defaultValue.showEvents),showOperators:C(ft.showOperators,this.defaultValue.showOperators),showUnits:C(ft.showUnits,this.defaultValue.showUnits),showValues:C(ft.showValues,this.defaultValue.showValues),showConstants:C(ft.showConstants,this.defaultValue.showConstants),showEnums:C(ft.showEnums,this.defaultValue.showEnums),showEnumMembers:C(ft.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:C(ft.showKeywords,this.defaultValue.showKeywords),showWords:C(ft.showWords,this.defaultValue.showWords),showColors:C(ft.showColors,this.defaultValue.showColors),showFiles:C(ft.showFiles,this.defaultValue.showFiles),showReferences:C(ft.showReferences,this.defaultValue.showReferences),showFolders:C(ft.showFolders,this.defaultValue.showFolders),showTypeParameters:C(ft.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:C(ft.showSnippets,this.defaultValue.showSnippets),showUsers:C(ft.showUsers,this.defaultValue.showUsers),showIssues:C(ft.showIssues,this.defaultValue.showIssues)}}}class gt extends x{constructor(){super(102,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p.N("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(Xe){return!Xe||typeof Xe!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:C(Xe.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class Ue extends D{constructor(){super(130)}compute(Xe,ft,an){return ft.get(81)?!0:Xe.tabFocusMode}}function Ye(Dt){switch(Dt){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class dt extends D{constructor(){super(132)}compute(Xe,ft,an){const An=ft.get(131);return{isDominatedByLongLines:Xe.isDominatedByLongLines,isWordWrapMinified:An.isWordWrapMinified,isViewportWrapping:An.isViewportWrapping,wrappingColumn:An.wrappingColumn}}}const Re="Consolas, 'Courier New', monospace",Ve="Menlo, Monaco, 'Courier New', monospace",at="'Droid Sans Mono', 'monospace', monospace",pt={fontFamily:d.dz?Ve:d.IJ?at:Re,fontWeight:"normal",fontSize:d.dz?12:14,lineHeight:0,letterSpacing:0},Be=[];function je(Dt){return Be[Dt.id]=Dt,Dt}const Et={acceptSuggestionOnCommitCharacter:je(new M(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p.N("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:je(new I(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p.N("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:p.N("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:je(new q),accessibilityPageSize:je(new _(3,"accessibilityPageSize",10,1,1073741824,{description:p.N("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:je(new N(4,"ariaLabel",p.N("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:je(new I(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p.N("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),p.N("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:p.N("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:je(new I(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p.N("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:p.N("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:je(new I(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p.N("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:p.N("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:je(new I(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p.N("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),p.N("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:p.N("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:je(new k(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],W,{enumDescriptions:[p.N("editor.autoIndent.none","The editor will not insert indentation automatically."),p.N("editor.autoIndent.keep","The editor will keep the current line's indentation."),p.N("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),p.N("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),p.N("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:p.N("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:je(new M(10,"automaticLayout",!1)),autoSurround:je(new I(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p.N("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),p.N("editor.autoSurround.quotes","Surround with quotes but not brackets."),p.N("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:p.N("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:je(new nt),bracketPairGuides:je(new _t),stickyTabStops:je(new M(104,"stickyTabStops",!1,{description:p.N("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:je(new M(14,"codeLens",!0,{description:p.N("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:je(new N(15,"codeLensFontFamily","",{description:p.N("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:je(new _(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p.N("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:je(new M(17,"colorDecorators",!0,{description:p.N("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:je(new M(18,"columnSelection",!1,{description:p.N("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:je(new re),contextmenu:je(new M(20,"contextmenu",!0)),copyWithSyntaxHighlighting:je(new M(21,"copyWithSyntaxHighlighting",!0,{description:p.N("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:je(new k(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],de,{description:p.N("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:je(new M(23,"cursorSmoothCaretAnimation",!1,{description:p.N("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:je(new k(24,"cursorStyle",pe.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],ae,{description:p.N("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:je(new _(25,"cursorSurroundingLines",0,0,1073741824,{description:p.N("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:je(new I(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p.N("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),p.N("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:p.N("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:je(new _(27,"cursorWidth",0,0,1073741824,{markdownDescription:p.N("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:je(new M(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:je(new M(29,"disableMonospaceOptimizations",!1)),domReadOnly:je(new M(30,"domReadOnly",!1)),dragAndDrop:je(new M(31,"dragAndDrop",!0,{description:p.N("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:je(new te),extraEditorClassName:je(new N(33,"extraEditorClassName","")),fastScrollSensitivity:je(new L(34,"fastScrollSensitivity",5,Dt=>Dt<=0?5:Dt,{markdownDescription:p.N("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:je(new K),fixedOverflowWidgets:je(new M(36,"fixedOverflowWidgets",!1)),folding:je(new M(37,"folding",!0,{description:p.N("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:je(new I(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p.N("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),p.N("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:p.N("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:je(new M(39,"foldingHighlight",!0,{description:p.N("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:je(new M(40,"foldingImportsByDefault",!1,{description:p.N("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:je(new _(41,"foldingMaximumRegions",5e3,10,65e3,{description:p.N("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:je(new M(42,"unfoldOnClickAfterEndOfLine",!1,{description:p.N("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:je(new N(43,"fontFamily",pt.fontFamily,{description:p.N("fontFamily","Controls the font family.")})),fontInfo:je(new ee),fontLigatures2:je(new U),fontSize:je(new X),fontWeight:je(new le),formatOnPaste:je(new M(48,"formatOnPaste",!1,{description:p.N("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:je(new M(49,"formatOnType",!1,{description:p.N("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:je(new M(50,"glyphMargin",!0,{description:p.N("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:je(new oe),hideCursorInOverviewRuler:je(new M(52,"hideCursorInOverviewRuler",!1,{description:p.N("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:je(new Ce),inDiffEditor:je(new M(54,"inDiffEditor",!1)),letterSpacing:je(new L(56,"letterSpacing",pt.letterSpacing,Dt=>L.clamp(Dt,-5,20),{description:p.N("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:je(new ke),lineDecorationsWidth:je(new c(58,"lineDecorationsWidth",10)),lineHeight:je(new ge),lineNumbers:je(new Je),lineNumbersMinChars:je(new _(61,"lineNumbersMinChars",5,1,300)),linkedEditing:je(new M(62,"linkedEditing",!1,{description:p.N("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:je(new M(63,"links",!0,{description:p.N("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:je(new I(64,"matchBrackets","always",["always","near","never"],{description:p.N("matchBrackets","Highlight matching brackets.")})),minimap:je(new we),mouseStyle:je(new I(66,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:je(new L(67,"mouseWheelScrollSensitivity",1,Dt=>Dt===0?1:Dt,{markdownDescription:p.N("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:je(new M(68,"mouseWheelZoom",!1,{markdownDescription:p.N("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:je(new M(69,"multiCursorMergeOverlapping",!0,{description:p.N("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:je(new k(70,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],ze,{markdownEnumDescriptions:[p.N("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p.N("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:p.N({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:je(new I(71,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p.N("multiCursorPaste.spread","Each cursor pastes a single line of the text."),p.N("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:p.N("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:je(new M(72,"occurrencesHighlight",!0,{description:p.N("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:je(new M(73,"overviewRulerBorder",!0,{description:p.N("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:je(new _(74,"overviewRulerLanes",3,0,3)),padding:je(new Qe),parameterHints:je(new Pe),peekWidgetDefaultFocus:je(new I(77,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p.N("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),p.N("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:p.N("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:je(new M(78,"definitionLinkOpensInPeek",!1,{description:p.N("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:je(new qe),quickSuggestionsDelay:je(new _(80,"quickSuggestionsDelay",10,0,1073741824,{description:p.N("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:je(new M(81,"readOnly",!1)),renameOnType:je(new M(82,"renameOnType",!1,{description:p.N("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:p.N("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:je(new M(83,"renderControlCharacters",!0,{description:p.N("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:je(new M(84,"renderFinalNewline",!0,{description:p.N("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:je(new I(85,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p.N("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:p.N("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:je(new M(86,"renderLineHighlightOnlyWhenFocus",!1,{description:p.N("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:je(new I(87,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:je(new I(88,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p.N("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),p.N("renderWhitespace.selection","Render whitespace characters only on selected text."),p.N("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:p.N("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:je(new _(89,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:je(new M(90,"roundedSelection",!0,{description:p.N("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:je(new Fe),scrollbar:je(new Q),scrollBeyondLastColumn:je(new _(93,"scrollBeyondLastColumn",5,0,1073741824,{description:p.N("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:je(new M(94,"scrollBeyondLastLine",!0,{description:p.N("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:je(new M(95,"scrollPredominantAxis",!0,{description:p.N("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:je(new M(96,"selectionClipboard",!0,{description:p.N("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:d.IJ})),selectionHighlight:je(new M(97,"selectionHighlight",!0,{description:p.N("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:je(new M(98,"selectOnLineNumbers",!0)),showFoldingControls:je(new I(99,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[p.N("showFoldingControls.always","Always show the folding controls."),p.N("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:p.N("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:je(new M(100,"showUnused",!0,{description:p.N("showUnused","Controls fading out of unused code.")})),showDeprecated:je(new M(126,"showDeprecated",!0,{description:p.N("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:je(new Te),snippetSuggestions:je(new I(101,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p.N("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),p.N("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),p.N("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),p.N("snippetSuggestions.none","Do not show snippet suggestions.")],description:p.N("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:je(new gt),smoothScrolling:je(new M(103,"smoothScrolling",!1,{description:p.N("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:je(new _(105,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:je(new rn),inlineSuggest:je(new Ge),suggestFontSize:je(new _(107,"suggestFontSize",0,0,1e3,{markdownDescription:p.N("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:je(new _(108,"suggestLineHeight",0,0,1e3,{markdownDescription:p.N("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:je(new M(109,"suggestOnTriggerCharacters",!0,{description:p.N("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:je(new I(110,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p.N("suggestSelection.first","Always select the first suggestion."),p.N("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),p.N("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:p.N("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:je(new I(111,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p.N("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),p.N("tabCompletion.off","Disable tab completions."),p.N("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:p.N("tabCompletion","Enables tab completions.")})),tabIndex:je(new _(112,"tabIndex",0,-1,1073741824)),unicodeHighlight:je(new be),unusualLineTerminators:je(new I(114,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p.N("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),p.N("unusualLineTerminators.off","Unusual line terminators are ignored."),p.N("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:p.N("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:je(new M(115,"useShadowDOM",!0)),useTabStops:je(new M(116,"useTabStops",!0,{description:p.N("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:je(new N(117,"wordSeparators",z.vu,{description:p.N("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:je(new I(118,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p.N("wordWrap.off","Lines will never wrap."),p.N("wordWrap.on","Lines will wrap at the viewport width."),p.N({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),p.N({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:p.N({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:je(new N(119,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:je(new N(120,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:je(new _(121,"wordWrapColumn",80,1,1073741824,{markdownDescription:p.N({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:je(new I(122,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:je(new I(123,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:je(new k(124,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],Ye,{enumDescriptions:[p.N("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),p.N("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),p.N("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),p.N("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:p.N("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:je(new I(125,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[p.N("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),p.N("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:p.N("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:je(new ue),pixelRatio:je(new Oe),tabFocusMode:je(new Ue),layoutInfo:je(new ye),wrappingInfo:je(new dt)}},82334:function(Tt,me,a){"use strict";a.d(me,{C:function(){return d}});var p=a(4669);const d=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new p.Q5,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(z){z=Math.min(Math.max(-5,z),20),this._zoomLevel!==z&&(this._zoomLevel=z,this._onDidChangeZoomLevel.fire(this._zoomLevel))}}},27374:function(Tt,me,a){"use strict";a.d(me,{E4:function(){return S},pR:function(){return T}});var p=a(1432),d=a(82334);const z=p.dz?1.5:1.35,O=8;class S{constructor(F){this._bareFontInfoBrand=void 0,this.pixelRatio=F.pixelRatio,this.fontFamily=String(F.fontFamily),this.fontWeight=String(F.fontWeight),this.fontSize=F.fontSize,this.fontFeatureSettings=F.fontFeatureSettings,this.lineHeight=F.lineHeight|0,this.letterSpacing=F.letterSpacing}static createFromValidatedSettings(F,x,v){const g=F.get(43),D=F.get(47),c=F.get(46),C=F.get(45),M=F.get(59),E=F.get(56);return S._create(g,D,c,C,M,E,x,v)}static _create(F,x,v,g,D,c,C,M){D===0?D=z*v:D<O&&(D=D*v),D=Math.round(D),D<O&&(D=O);const E=1+(M?0:d.C.getZoomLevel()*.1);return v*=E,D*=E,new S({pixelRatio:C,fontFamily:F,fontWeight:x,fontSize:v,fontFeatureSettings:g,lineHeight:D,letterSpacing:c})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(F){const x=S._wrapInQuotes(this.fontFamily);return F&&this.fontFamily!==F?`${x}, ${F}`:x}static _wrapInQuotes(F){return/[,"']/.test(F)?F:/[+ ]/.test(F)?`"${F}"`:F}}const j=1;class T extends S{constructor(F,x){super(F);this._editorStylingBrand=void 0,this.version=j,this.isTrusted=x,this.isMonospace=F.isMonospace,this.typicalHalfwidthCharacterWidth=F.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=F.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=F.canUseHalfwidthRightwardsArrow,this.spaceWidth=F.spaceWidth,this.middotWidth=F.middotWidth,this.wsmiddotWidth=F.wsmiddotWidth,this.maxDigitWidth=F.maxDigitWidth}equals(F){return this.fontFamily===F.fontFamily&&this.fontWeight===F.fontWeight&&this.fontSize===F.fontSize&&this.fontFeatureSettings===F.fontFeatureSettings&&this.lineHeight===F.lineHeight&&this.letterSpacing===F.letterSpacing&&this.typicalHalfwidthCharacterWidth===F.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===F.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===F.canUseHalfwidthRightwardsArrow&&this.spaceWidth===F.spaceWidth&&this.middotWidth===F.middotWidth&&this.wsmiddotWidth===F.wsmiddotWidth&&this.maxDigitWidth===F.maxDigitWidth}}},44906:function(Tt,me,a){"use strict";a.d(me,{N:function(){return d},q:function(){return z}});var p=a(85427);class d{constructor(S){const j=(0,p.K)(S);this._defaultValue=j,this._asciiMap=d._createAsciiMap(j),this._map=new Map}static _createAsciiMap(S){const j=new Uint8Array(256);for(let T=0;T<256;T++)j[T]=S;return j}set(S,j){const T=(0,p.K)(j);S>=0&&S<256?this._asciiMap[S]=T:this._map.set(S,T)}get(S){return S>=0&&S<256?this._asciiMap[S]:this._map.get(S)||this._defaultValue}}class z{constructor(){this._actual=new d(0)}add(S){this._actual.set(S,1)}has(S){return this._actual.get(S)===1}}},7988:function(Tt,me,a){"use strict";a.d(me,{i:function(){return d}});var p=a(25924);class d{static _nextVisibleColumn(O,S,j){return O===9?d.nextRenderTabStop(S,j):p.K7(O)||p.C8(O)?S+2:S+1}static visibleColumnFromColumn(O,S,j){const T=Math.min(S-1,O.length),B=O.substring(0,T),F=new p.W1(B);let x=0;for(;!F.eol();){const v=p.ZH(B,T,F.offset);F.nextGraphemeLength(),x=this._nextVisibleColumn(v,x,j)}return x}static columnFromVisibleColumn(O,S,j){if(S<=0)return 1;const T=O.length,B=new p.W1(O);let F=0,x=1;for(;!B.eol();){const v=p.ZH(O,T,B.offset);B.nextGraphemeLength();const g=this._nextVisibleColumn(v,F,j),D=B.offset+1;if(g>=S){const c=S-F;return g-S<c?D:x}F=g,x=D}return T+1}static nextRenderTabStop(O,S){return O+S-O%S}static nextIndentTabStop(O,S){return O+S-O%S}static prevRenderTabStop(O,S){return Math.max(0,O-1-(O-1)%S)}static prevIndentTabStop(O,S){return Math.max(0,O-1-(O-1)%S)}}},69386:function(Tt,me,a){"use strict";a.d(me,{h:function(){return d}});var p=a(24314);class d{static insert(O,S){return{range:new p.e(O.lineNumber,O.column,O.lineNumber,O.column),text:S,forceMoveMarkers:!0}}static delete(O){return{range:O,text:null}}static replace(O,S){return{range:O,text:S}}static replaceMove(O,S){return{range:O,text:S,forceMoveMarkers:!0}}}},8625:function(Tt,me,a){"use strict";a.d(me,{Kh:function(){return S},Mm:function(){return j},n0:function(){return v},fY:function(){return g},tR:function(){return c},Ym:function(){return C},hw:function(){return M},DD:function(){return _},zk:function(){return L},TC:function(){return b},Dl:function(){return I},zw:function(){return k},e_:function(){return W},kp:function(){return re},zu:function(){return de},x3:function(){return pe},N5:function(){return ae},IO:function(){return ue},m9:function(){return K},lK:function(){return U},Re:function(){return ee},eS:function(){return X},zJ:function(){return le},Vs:function(){return oe},CE:function(){return Ce},UP:function(){return ye},r0:function(){return ke},m1:function(){return Te},ts:function(){return ge},oV:function(){return we},m$:function(){return ze},DS:function(){return Qe},lS:function(){return Pe},Jn:function(){return Oe},YF:function(){return qe},Qb:function(){return Je},m3:function(){return Ne},To:function(){return Fe},L7:function(){return ne},HV:function(){return Q},f9:function(){return ie}});var p=a(63580),d=a(41264),z=a(73910),O=a(97781);const S=(0,z.P6G)("editor.lineHighlightBackground",{dark:null,light:null,hc:null},p.N("lineHighlight","Background color for the highlight of line at the cursor position.")),j=(0,z.P6G)("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},p.N("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),T=(0,z.P6G)("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},p.N("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),B=(0,z.P6G)("editor.rangeHighlightBorder",{dark:null,light:null,hc:z.xL1},p.N("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),F=(0,z.P6G)("editor.symbolHighlightBackground",{dark:z.MUv,light:z.MUv,hc:null},p.N("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),x=(0,z.P6G)("editor.symbolHighlightBorder",{dark:null,light:null,hc:z.xL1},p.N("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),v=(0,z.P6G)("editorCursor.foreground",{dark:"#AEAFAD",light:d.Il.black,hc:d.Il.white},p.N("caret","Color of the editor cursor.")),g=(0,z.P6G)("editorCursor.background",null,p.N("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),D=(0,z.P6G)("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},p.N("editorWhitespaces","Color of whitespace characters in the editor.")),c=(0,z.P6G)("editorIndentGuide.background",{dark:D,light:D,hc:D},p.N("editorIndentGuides","Color of the editor indentation guides.")),C=(0,z.P6G)("editorIndentGuide.activeBackground",{dark:D,light:D,hc:D},p.N("editorActiveIndentGuide","Color of the active editor indentation guides.")),M=(0,z.P6G)("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:d.Il.white},p.N("editorLineNumbers","Color of editor line numbers.")),E=(0,z.P6G)("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:z.xL1},p.N("editorActiveLineNumber","Color of editor active line number"),!1,p.N("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),_=(0,z.P6G)("editorLineNumber.activeForeground",{dark:E,light:E,hc:E},p.N("editorActiveLineNumber","Color of editor active line number")),L=(0,z.P6G)("editorRuler.foreground",{dark:"#5A5A5A",light:d.Il.lightgrey,hc:d.Il.white},p.N("editorRuler","Color of the editor rulers.")),N=(0,z.P6G)("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},p.N("editorCodeLensForeground","Foreground color of editor CodeLens")),b=(0,z.P6G)("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},p.N("editorBracketMatchBackground","Background color behind matching brackets")),I=(0,z.P6G)("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:z.lRK},p.N("editorBracketMatchBorder","Color for matching brackets boxes")),k=(0,z.P6G)("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},p.N("editorOverviewRulerBorder","Color of the overview ruler border.")),W=(0,z.P6G)("editorOverviewRuler.background",null,p.N("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),q=(0,z.P6G)("editorGutter.background",{dark:z.cvW,light:z.cvW,hc:z.cvW},p.N("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),re=(0,z.P6G)("editorUnnecessaryCode.border",{dark:null,light:null,hc:d.Il.fromHex("#fff").transparent(.8)},p.N("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),de=(0,z.P6G)("editorUnnecessaryCode.opacity",{dark:d.Il.fromHex("#000a"),light:d.Il.fromHex("#0007"),hc:null},p.N("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),pe=(0,z.P6G)("editorGhostText.border",{dark:null,light:null,hc:d.Il.fromHex("#fff").transparent(.8)},p.N("editorGhostTextBorder","Border color of ghost text in the editor.")),ae=(0,z.P6G)("editorGhostText.foreground",{dark:d.Il.fromHex("#ffffff56"),light:d.Il.fromHex("#0007"),hc:null},p.N("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),ue=(0,z.P6G)("editorGhostText.background",{dark:null,light:null,hc:null},p.N("editorGhostTextBackground","Background color of the ghost text in the editor.")),te=new d.Il(new d.VS(0,122,204,.6)),K=(0,z.P6G)("editorOverviewRuler.rangeHighlightForeground",{dark:te,light:te,hc:te},p.N("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),U=(0,z.P6G)("editorOverviewRuler.errorForeground",{dark:new d.Il(new d.VS(255,18,18,.7)),light:new d.Il(new d.VS(255,18,18,.7)),hc:new d.Il(new d.VS(255,50,50,1))},p.N("overviewRuleError","Overview ruler marker color for errors.")),ee=(0,z.P6G)("editorOverviewRuler.warningForeground",{dark:z.uoC,light:z.uoC,hc:z.pW3},p.N("overviewRuleWarning","Overview ruler marker color for warnings.")),X=(0,z.P6G)("editorOverviewRuler.infoForeground",{dark:z.c63,light:z.c63,hc:z.T83},p.N("overviewRuleInfo","Overview ruler marker color for infos.")),le=(0,z.P6G)("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},p.N("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),oe=(0,z.P6G)("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},p.N("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Ce=(0,z.P6G)("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},p.N("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),ye=(0,z.P6G)("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),ke=(0,z.P6G)("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Te=(0,z.P6G)("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),ge=(0,z.P6G)("editorBracketHighlight.unexpectedBracket.foreground",{dark:new d.Il(new d.VS(255,18,18,.8)),light:new d.Il(new d.VS(255,18,18,.8)),hc:new d.Il(new d.VS(255,50,50,1))},p.N("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),we=(0,z.P6G)("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),ze=(0,z.P6G)("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Qe=(0,z.P6G)("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Pe=(0,z.P6G)("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Oe=(0,z.P6G)("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),qe=(0,z.P6G)("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Je=(0,z.P6G)("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Ne=(0,z.P6G)("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Fe=(0,z.P6G)("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),ne=(0,z.P6G)("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Q=(0,z.P6G)("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),ie=(0,z.P6G)("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p.N("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),xe=(0,z.P6G)("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hc:"#ff0000"},p.N("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));(0,O.Ic)((be,Ge)=>{const nt=be.getColor(z.cvW);nt&&Ge.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${nt}; }`);const _t=be.getColor(z.NOs);_t&&Ge.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${_t}; }`);const Ot=be.getColor(q);Ot&&Ge.addRule(`.monaco-editor .margin { background-color: ${Ot}; }`);const rn=be.getColor(T);rn&&Ge.addRule(`.monaco-editor .rangeHighlight { background-color: ${rn}; }`);const gt=be.getColor(B);gt&&Ge.addRule(`.monaco-editor .rangeHighlight { border: 1px ${be.type==="hc"?"dotted":"solid"} ${gt}; }`);const Ue=be.getColor(F);Ue&&Ge.addRule(`.monaco-editor .symbolHighlight { background-color: ${Ue}; }`);const Ye=be.getColor(x);Ye&&Ge.addRule(`.monaco-editor .symbolHighlight { border: 1px ${be.type==="hc"?"dotted":"solid"} ${Ye}; }`);const dt=be.getColor(D);dt&&(Ge.addRule(`.monaco-editor .mtkw { color: ${dt} !important; }`),Ge.addRule(`.monaco-editor .mtkz { color: ${dt} !important; }`))})},23795:function(Tt,me,a){"use strict";a.d(me,{Q:function(){return p}});function p(d){let z=0,O=0,S=0,j=0;for(let T=0,B=d.length;T<B;T++){const F=d.charCodeAt(T);F===13?(z===0&&(O=T),z++,T+1<B&&d.charCodeAt(T+1)===10?(j|=2,T++):j|=3,S=T+1):F===10&&(j|=1,z===0&&(O=T),z++,S=T+1)}return z===0&&(O=d.length),[z,O,d.length-S,j]}},83158:function(Tt,me,a){"use strict";a.d(me,{x:function(){return z}});var p=a(25924);function d(O,S,j){let T=0;for(let F=0;F<O.length;F++)O.charAt(F)==="	"?T+=S:T++;let B="";if(!j){const F=Math.floor(T/S);T=T%S;for(let x=0;x<F;x++)B+="	"}for(let F=0;F<T;F++)B+=" ";return B}function z(O,S,j){let T=p.LC(O);return T===-1&&(T=O.length),d(O.substring(0,T),S,j)+O.substring(T)}},50187:function(Tt,me,a){"use strict";a.d(me,{L:function(){return p}});class p{constructor(z,O){this.lineNumber=z,this.column=O}with(z=this.lineNumber,O=this.column){return z===this.lineNumber&&O===this.column?this:new p(z,O)}delta(z=0,O=0){return this.with(this.lineNumber+z,this.column+O)}equals(z){return p.equals(this,z)}static equals(z,O){return!z&&!O?!0:!!z&&!!O&&z.lineNumber===O.lineNumber&&z.column===O.column}isBefore(z){return p.isBefore(this,z)}static isBefore(z,O){return z.lineNumber<O.lineNumber?!0:O.lineNumber<z.lineNumber?!1:z.column<O.column}isBeforeOrEqual(z){return p.isBeforeOrEqual(this,z)}static isBeforeOrEqual(z,O){return z.lineNumber<O.lineNumber?!0:O.lineNumber<z.lineNumber?!1:z.column<=O.column}static compare(z,O){const S=z.lineNumber|0,j=O.lineNumber|0;if(S===j){const T=z.column|0,B=O.column|0;return T-B}return S-j}clone(){return new p(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(z){return new p(z.lineNumber,z.column)}static isIPosition(z){return z&&typeof z.lineNumber=="number"&&typeof z.column=="number"}}},24314:function(Tt,me,a){"use strict";a.d(me,{e:function(){return d}});var p=a(50187);class d{constructor(O,S,j,T){O>j||O===j&&S>T?(this.startLineNumber=j,this.startColumn=T,this.endLineNumber=O,this.endColumn=S):(this.startLineNumber=O,this.startColumn=S,this.endLineNumber=j,this.endColumn=T)}isEmpty(){return d.isEmpty(this)}static isEmpty(O){return O.startLineNumber===O.endLineNumber&&O.startColumn===O.endColumn}containsPosition(O){return d.containsPosition(this,O)}static containsPosition(O,S){return!(S.lineNumber<O.startLineNumber||S.lineNumber>O.endLineNumber||S.lineNumber===O.startLineNumber&&S.column<O.startColumn||S.lineNumber===O.endLineNumber&&S.column>O.endColumn)}static strictContainsPosition(O,S){return!(S.lineNumber<O.startLineNumber||S.lineNumber>O.endLineNumber||S.lineNumber===O.startLineNumber&&S.column<=O.startColumn||S.lineNumber===O.endLineNumber&&S.column>=O.endColumn)}containsRange(O){return d.containsRange(this,O)}static containsRange(O,S){return!(S.startLineNumber<O.startLineNumber||S.endLineNumber<O.startLineNumber||S.startLineNumber>O.endLineNumber||S.endLineNumber>O.endLineNumber||S.startLineNumber===O.startLineNumber&&S.startColumn<O.startColumn||S.endLineNumber===O.endLineNumber&&S.endColumn>O.endColumn)}strictContainsRange(O){return d.strictContainsRange(this,O)}static strictContainsRange(O,S){return!(S.startLineNumber<O.startLineNumber||S.endLineNumber<O.startLineNumber||S.startLineNumber>O.endLineNumber||S.endLineNumber>O.endLineNumber||S.startLineNumber===O.startLineNumber&&S.startColumn<=O.startColumn||S.endLineNumber===O.endLineNumber&&S.endColumn>=O.endColumn)}plusRange(O){return d.plusRange(this,O)}static plusRange(O,S){let j,T,B,F;return S.startLineNumber<O.startLineNumber?(j=S.startLineNumber,T=S.startColumn):S.startLineNumber===O.startLineNumber?(j=S.startLineNumber,T=Math.min(S.startColumn,O.startColumn)):(j=O.startLineNumber,T=O.startColumn),S.endLineNumber>O.endLineNumber?(B=S.endLineNumber,F=S.endColumn):S.endLineNumber===O.endLineNumber?(B=S.endLineNumber,F=Math.max(S.endColumn,O.endColumn)):(B=O.endLineNumber,F=O.endColumn),new d(j,T,B,F)}intersectRanges(O){return d.intersectRanges(this,O)}static intersectRanges(O,S){let j=O.startLineNumber,T=O.startColumn,B=O.endLineNumber,F=O.endColumn,x=S.startLineNumber,v=S.startColumn,g=S.endLineNumber,D=S.endColumn;return j<x?(j=x,T=v):j===x&&(T=Math.max(T,v)),B>g?(B=g,F=D):B===g&&(F=Math.min(F,D)),j>B||j===B&&T>F?null:new d(j,T,B,F)}equalsRange(O){return d.equalsRange(this,O)}static equalsRange(O,S){return!!O&&!!S&&O.startLineNumber===S.startLineNumber&&O.startColumn===S.startColumn&&O.endLineNumber===S.endLineNumber&&O.endColumn===S.endColumn}getEndPosition(){return d.getEndPosition(this)}static getEndPosition(O){return new p.L(O.endLineNumber,O.endColumn)}getStartPosition(){return d.getStartPosition(this)}static getStartPosition(O){return new p.L(O.startLineNumber,O.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(O,S){return new d(this.startLineNumber,this.startColumn,O,S)}setStartPosition(O,S){return new d(O,S,this.endLineNumber,this.endColumn)}collapseToStart(){return d.collapseToStart(this)}static collapseToStart(O){return new d(O.startLineNumber,O.startColumn,O.startLineNumber,O.startColumn)}static fromPositions(O,S=O){return new d(O.lineNumber,O.column,S.lineNumber,S.column)}static lift(O){return O?new d(O.startLineNumber,O.startColumn,O.endLineNumber,O.endColumn):null}static isIRange(O){return O&&typeof O.startLineNumber=="number"&&typeof O.startColumn=="number"&&typeof O.endLineNumber=="number"&&typeof O.endColumn=="number"}static areIntersectingOrTouching(O,S){return!(O.endLineNumber<S.startLineNumber||O.endLineNumber===S.startLineNumber&&O.endColumn<S.startColumn||S.endLineNumber<O.startLineNumber||S.endLineNumber===O.startLineNumber&&S.endColumn<O.startColumn)}static areIntersecting(O,S){return!(O.endLineNumber<S.startLineNumber||O.endLineNumber===S.startLineNumber&&O.endColumn<=S.startColumn||S.endLineNumber<O.startLineNumber||S.endLineNumber===O.startLineNumber&&S.endColumn<=O.startColumn)}static compareRangesUsingStarts(O,S){if(O&&S){const B=O.startLineNumber|0,F=S.startLineNumber|0;if(B===F){const x=O.startColumn|0,v=S.startColumn|0;if(x===v){const g=O.endLineNumber|0,D=S.endLineNumber|0;if(g===D){const c=O.endColumn|0,C=S.endColumn|0;return c-C}return g-D}return x-v}return B-F}return(O?1:0)-(S?1:0)}static compareRangesUsingEnds(O,S){return O.endLineNumber===S.endLineNumber?O.endColumn===S.endColumn?O.startLineNumber===S.startLineNumber?O.startColumn-S.startColumn:O.startLineNumber-S.startLineNumber:O.endColumn-S.endColumn:O.endLineNumber-S.endLineNumber}static spansMultipleLines(O){return O.endLineNumber>O.startLineNumber}toJSON(){return this}}},3860:function(Tt,me,a){"use strict";a.d(me,{Y:function(){return z}});var p=a(50187),d=a(24314);class z extends d.e{constructor(S,j,T,B){super(S,j,T,B);this.selectionStartLineNumber=S,this.selectionStartColumn=j,this.positionLineNumber=T,this.positionColumn=B}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(S){return z.selectionsEqual(this,S)}static selectionsEqual(S,j){return S.selectionStartLineNumber===j.selectionStartLineNumber&&S.selectionStartColumn===j.selectionStartColumn&&S.positionLineNumber===j.positionLineNumber&&S.positionColumn===j.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(S,j){return this.getDirection()===0?new z(this.startLineNumber,this.startColumn,S,j):new z(S,j,this.startLineNumber,this.startColumn)}getPosition(){return new p.L(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new p.L(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(S,j){return this.getDirection()===0?new z(S,j,this.endLineNumber,this.endColumn):new z(this.endLineNumber,this.endColumn,S,j)}static fromPositions(S,j=S){return new z(S.lineNumber,S.column,j.lineNumber,j.column)}static fromRange(S,j){return j===0?new z(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn):new z(S.endLineNumber,S.endColumn,S.startLineNumber,S.startColumn)}static liftSelection(S){return new z(S.selectionStartLineNumber,S.selectionStartColumn,S.positionLineNumber,S.positionColumn)}static selectionsArrEqual(S,j){if(S&&!j||!S&&j)return!1;if(!S&&!j)return!0;if(S.length!==j.length)return!1;for(let T=0,B=S.length;T<B;T++)if(!this.selectionsEqual(S[T],j[T]))return!1;return!0}static isISelection(S){return S&&typeof S.selectionStartLineNumber=="number"&&typeof S.selectionStartColumn=="number"&&typeof S.positionLineNumber=="number"&&typeof S.positionColumn=="number"}static createWithDirection(S,j,T,B,F){return F===0?new z(S,j,T,B):new z(T,B,S,j)}}},50072:function(Tt,me,a){"use strict";a.d(me,{oe:function(){return F},lZ:function(){return x},l$:function(){return v},kH:function(){return g}});var p=a(25924),d=a(1432),z=a(53060);let O;function S(){return O||(O=new TextDecoder("UTF-16LE")),O}let j;function T(){return j||(j=new TextDecoder("UTF-16BE")),j}let B;function F(){return B||(B=d.r()?S():T()),B}const x=typeof TextDecoder!="undefined";let v,g;x?(v=E=>new C(E),g=D):(v=E=>new M,g=c);function D(E,_,L){const N=new Uint16Array(E.buffer,_,L);return L>0&&(N[0]===65279||N[0]===65534)?c(E,_,L):S().decode(N)}function c(E,_,L){const N=[];let b=0;for(let I=0;I<L;I++){const k=z.mP(E,_);_+=2,N[b++]=String.fromCharCode(k)}return N.join("")}class C{constructor(_){this._capacity=_|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const _=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return F().decode(_)}_flushBuffer(){const _=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[_]:this._completedStrings[this._completedStrings.length]=_}write1(_){const L=this._capacity-this._bufferLength;L<=1&&(L===0||p.ZG(_))&&this._flushBuffer(),this._buffer[this._bufferLength++]=_}appendASCII(_){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=_}appendASCIIString(_){const L=_.length;if(this._bufferLength+L>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=_;return}for(let N=0;N<L;N++)this._buffer[this._bufferLength++]=_.charCodeAt(N)}}class M{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(_){this._pieces[this._piecesLen++]=String.fromCharCode(_)}appendASCII(_){this._pieces[this._piecesLen++]=String.fromCharCode(_)}appendASCIIString(_){this._pieces[this._piecesLen++]=_}}},93033:function(Tt,me,a){"use strict";a.d(me,{q:function(){return O},b:function(){return S}});var p=a(53060),d=a(50072);function z(T){return T.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class O{constructor(B,F,x,v){this.oldPosition=B,this.oldText=F,this.newPosition=x,this.newText=v}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${z(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${z(this.oldText)}")`:`(replace@${this.oldPosition} "${z(this.oldText)}" with "${z(this.newText)}")`}static _writeStringSize(B){return 4+2*B.length}static _writeString(B,F,x){const v=F.length;p.T4(B,v,x),x+=4;for(let g=0;g<v;g++)p.oq(B,F.charCodeAt(g),x),x+=2;return x}static _readString(B,F){const x=p.Ag(B,F);return F+=4,(0,d.kH)(B,F,x)}writeSize(){return 4+4+O._writeStringSize(this.oldText)+O._writeStringSize(this.newText)}write(B,F){return p.T4(B,this.oldPosition,F),F+=4,p.T4(B,this.newPosition,F),F+=4,F=O._writeString(B,this.oldText,F),F=O._writeString(B,this.newText,F),F}static read(B,F,x){const v=p.Ag(B,F);F+=4;const g=p.Ag(B,F);F+=4;const D=O._readString(B,F);F+=O._writeStringSize(D);const c=O._readString(B,F);return F+=O._writeStringSize(c),x.push(new O(v,D,g,c)),F}}function S(T,B){return T===null||T.length===0?B:new j(T,B).compress()}class j{constructor(B,F){this._prevEdits=B,this._currEdits=F,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let B=0,F=0,x=this._getPrev(B),v=this._getCurr(F);for(;B<this._prevLen||F<this._currLen;){if(x===null){this._acceptCurr(v),v=this._getCurr(++F);continue}if(v===null){this._acceptPrev(x),x=this._getPrev(++B);continue}if(v.oldEnd<=x.newPosition){this._acceptCurr(v),v=this._getCurr(++F);continue}if(x.newEnd<=v.oldPosition){this._acceptPrev(x),x=this._getPrev(++B);continue}if(v.oldPosition<x.newPosition){const[M,E]=j._splitCurr(v,x.newPosition-v.oldPosition);this._acceptCurr(M),v=E;continue}if(x.newPosition<v.oldPosition){const[M,E]=j._splitPrev(x,v.oldPosition-x.newPosition);this._acceptPrev(M),x=E;continue}let c,C;if(v.oldEnd===x.newEnd)c=x,C=v,x=this._getPrev(++B),v=this._getCurr(++F);else if(v.oldEnd<x.newEnd){const[M,E]=j._splitPrev(x,v.oldLength);c=M,C=v,x=E,v=this._getCurr(++F)}else{const[M,E]=j._splitCurr(v,x.newLength);c=x,C=M,x=this._getPrev(++B),v=E}this._result[this._resultLen++]=new O(c.oldPosition,c.oldText,C.newPosition,C.newText),this._prevDeltaOffset+=c.newLength-c.oldLength,this._currDeltaOffset+=C.newLength-C.oldLength}const g=j._merge(this._result);return j._removeNoOps(g)}_acceptCurr(B){this._result[this._resultLen++]=j._rebaseCurr(this._prevDeltaOffset,B),this._currDeltaOffset+=B.newLength-B.oldLength}_getCurr(B){return B<this._currLen?this._currEdits[B]:null}_acceptPrev(B){this._result[this._resultLen++]=j._rebasePrev(this._currDeltaOffset,B),this._prevDeltaOffset+=B.newLength-B.oldLength}_getPrev(B){return B<this._prevLen?this._prevEdits[B]:null}static _rebaseCurr(B,F){return new O(F.oldPosition-B,F.oldText,F.newPosition,F.newText)}static _rebasePrev(B,F){return new O(F.oldPosition,F.oldText,F.newPosition+B,F.newText)}static _splitPrev(B,F){const x=B.newText.substr(0,F),v=B.newText.substr(F);return[new O(B.oldPosition,B.oldText,B.newPosition,x),new O(B.oldEnd,"",B.newPosition+F,v)]}static _splitCurr(B,F){const x=B.oldText.substr(0,F),v=B.oldText.substr(F);return[new O(B.oldPosition,x,B.newPosition,B.newText),new O(B.oldPosition+F,v,B.newEnd,"")]}static _merge(B){if(B.length===0)return B;const F=[];let x=0,v=B[0];for(let g=1;g<B.length;g++){const D=B[g];v.oldEnd===D.oldPosition?v=new O(v.oldPosition,v.oldText+D.oldText,v.newPosition,v.newText+D.newText):(F[x++]=v,v=D)}return F[x++]=v,F}static _removeNoOps(B){if(B.length===0)return B;const F=[];let x=0;for(let v=0;v<B.length;v++){const g=B[v];g.oldText!==g.newText&&(F[x++]=g)}return F}}},22075:function(Tt,me,a){"use strict";a.d(me,{D:function(){return p}});const p={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}}},24929:function(Tt,me,a){"use strict";a.d(me,{u:function(){return O}});var p=a(44906);class d extends p.N{constructor(j){super(0);for(let T=0,B=j.length;T<B;T++)this.set(j.charCodeAt(T),2);this.set(32,1),this.set(9,1)}}function z(S){const j={};return T=>(j.hasOwnProperty(T)||(j[T]=S(T)),j[T])}const O=z(S=>new d(S))},270:function(Tt,me,a){"use strict";a.d(me,{vu:function(){return p},Af:function(){return z},eq:function(){return O},t2:function(){return j}});const p="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function d(B=""){let F="(-?\\d*\\.\\d\\w*)|([^";for(const x of p)B.indexOf(x)>=0||(F+="\\"+x);return F+="\\s]+)",new RegExp(F,"g")}const z=d();function O(B){let F=z;if(B&&B instanceof RegExp)if(B.global)F=B;else{let x="g";B.ignoreCase&&(x+="i"),B.multiline&&(x+="m"),B.unicode&&(x+="u"),F=new RegExp(B.source,x)}return F.lastIndex=0,F}const S={maxLen:1e3,windowSize:15,timeBudget:150};function j(B,F,x,v,g=S){if(x.length>g.maxLen){let E=B-g.maxLen/2;return E<0?E=0:v+=E,x=x.substring(E,B+g.maxLen/2),j(B,F,x,v,g)}const D=Date.now(),c=B-1-v;let C=-1,M=null;for(let E=1;!(Date.now()-D>=g.timeBudget);E++){const _=c-g.windowSize*E;F.lastIndex=Math.max(0,_);const L=T(F,x,c,C);if(!L&&M||(M=L,_<=0))break;C=_}if(M){const E={word:M[0],startColumn:v+1+M.index,endColumn:v+1+M.index+M[0].length};return F.lastIndex=0,E}return null}function T(B,F,x,v){let g;for(;g=B.exec(F);){const D=g.index||0;if(D<=x&&B.lastIndex>=x)return g;if(v>0&&D>v)return null}return null}},47128:function(Tt,me,a){"use strict";a.d(me,{l:function(){return d}});var p=a(7988);class d{static whitespaceVisibleColumn(O,S,j){const T=O.length;let B=0,F=-1,x=-1;for(let v=0;v<T;v++){if(v===S)return[F,x,B];switch(B%j==0&&(F=v,x=B),O.charCodeAt(v)){case 32:B+=1;break;case 9:B=p.i.nextRenderTabStop(B,j);break;default:return[-1,-1,-1]}}return S===T?[F,x,B]:[-1,-1,-1]}static atomicPosition(O,S,j,T){const B=O.length,[F,x,v]=d.whitespaceVisibleColumn(O,S,j);if(v===-1)return-1;let g;switch(T){case 0:g=!0;break;case 1:g=!1;break;case 2:if(v%j==0)return S;g=v%j<=j/2;break}if(g){if(F===-1)return-1;let C=x;for(let M=F;M<B;++M){if(C===x+j)return F;switch(O.charCodeAt(M)){case 32:C+=1;break;case 9:C=p.i.nextRenderTabStop(C,j);break;default:return-1}}return C===x+j?F:-1}const D=p.i.nextRenderTabStop(v,j);let c=v;for(let C=S;C<B;C++){if(c===D)return C;switch(O.charCodeAt(C)){case 32:c+=1;break;case 9:c=p.i.nextRenderTabStop(c,j);break;default:return-1}}return c===D?B:-1}}},29436:function(Tt,me,a){"use strict";a.d(me,{A:function(){return B}});var p=a(25924),d=a(61329),z=a(55343),O=a(7988),S=a(10839),j=a(24314),T=a(50187);class B{static deleteRight(x,v,g,D){const c=[];let C=x!==3;for(let M=0,E=D.length;M<E;M++){const _=D[M];let L=_;if(L.isEmpty()){const N=_.getPosition(),b=S.o.right(v,g,N);L=new j.e(b.lineNumber,b.column,N.lineNumber,N.column)}if(L.isEmpty()){c[M]=null;continue}L.startLineNumber!==L.endLineNumber&&(C=!0),c[M]=new d.T4(L,"")}return[C,c]}static isAutoClosingPairDelete(x,v,g,D,c,C,M){if(v==="never"&&g==="never"||x==="never")return!1;for(let E=0,_=C.length;E<_;E++){const L=C[E],N=L.getPosition();if(!L.isEmpty())return!1;const b=c.getLineContent(N.lineNumber);if(N.column<2||N.column>=b.length+1)return!1;const I=b.charAt(N.column-2),k=D.get(I);if(!k)return!1;if((0,z.LN)(I)){if(g==="never")return!1}else if(v==="never")return!1;const W=b.charAt(N.column-1);let q=!1;for(const re of k)re.open===I&&re.close===W&&(q=!0);if(!q)return!1;if(x==="auto"){let re=!1;for(let de=0,pe=M.length;de<pe;de++){const ae=M[de];if(N.lineNumber===ae.startLineNumber&&N.column===ae.startColumn){re=!0;break}}if(!re)return!1}}return!0}static _runAutoClosingPairDelete(x,v,g){const D=[];for(let c=0,C=g.length;c<C;c++){const M=g[c].getPosition(),E=new j.e(M.lineNumber,M.column-1,M.lineNumber,M.column+1);D[c]=new d.T4(E,"")}return[!0,D]}static deleteLeft(x,v,g,D,c){if(this.isAutoClosingPairDelete(v.autoClosingDelete,v.autoClosingBrackets,v.autoClosingQuotes,v.autoClosingPairs.autoClosingPairsOpenByEnd,g,D,c))return this._runAutoClosingPairDelete(v,g,D);const C=[];let M=x!==2;for(let E=0,_=D.length;E<_;E++){const L=B.getDeleteRange(D[E],g,v);if(L.isEmpty()){C[E]=null;continue}L.startLineNumber!==L.endLineNumber&&(M=!0),C[E]=new d.T4(L,"")}return[M,C]}static getDeleteRange(x,v,g){if(!x.isEmpty())return x;const D=x.getPosition();if(g.useTabStops&&D.column>1){const c=v.getLineContent(D.lineNumber),C=p.LC(c),M=C===-1?c.length+1:C+1;if(D.column<=M){const E=g.visibleColumnFromColumn(v,D),_=O.i.prevIndentTabStop(E,g.indentSize),L=g.columnFromVisibleColumn(v,D.lineNumber,_);return new j.e(D.lineNumber,L,D.lineNumber,D.column)}}return j.e.fromPositions(B.getPositionAfterDeleteLeft(D,v),D)}static getPositionAfterDeleteLeft(x,v){if(x.column>1){const g=p.oH(x.column-1,v.getLineContent(x.lineNumber));return x.with(void 0,g+1)}else if(x.lineNumber>1){const g=x.lineNumber-1;return new T.L(g,v.getLineMaxColumn(g))}else return x}static cut(x,v,g){const D=[];let c=null;g.sort((C,M)=>T.L.compare(C.getStartPosition(),M.getEndPosition()));for(let C=0,M=g.length;C<M;C++){const E=g[C];if(E.isEmpty())if(x.emptySelectionClipboard){const _=E.getPosition();let L,N,b,I;_.lineNumber<v.getLineCount()?(L=_.lineNumber,N=1,b=_.lineNumber+1,I=1):_.lineNumber>1&&(c==null?void 0:c.endLineNumber)!==_.lineNumber?(L=_.lineNumber-1,N=v.getLineMaxColumn(_.lineNumber-1),b=_.lineNumber,I=v.getLineMaxColumn(_.lineNumber)):(L=_.lineNumber,N=1,b=_.lineNumber,I=v.getLineMaxColumn(_.lineNumber));const k=new j.e(L,N,b,I);c=k,k.isEmpty()?D[C]=null:D[C]=new d.T4(k,"")}else D[C]=null;else D[C]=new d.T4(E,"")}return new z.Tp(0,D,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},28108:function(Tt,me,a){"use strict";a.d(me,{P:function(){return T},N:function(){return B}});var p=a(98401),d=a(55343),z=a(10839),O=a(92896),S=a(50187),j=a(24314);class T{static addCursorDown(x,v,g){const D=[];let c=0;for(let C=0,M=v.length;C<M;C++){const E=v[C];D[c++]=new d.Vi(E.modelState,E.viewState),g?D[c++]=d.Vi.fromModelState(z.o.translateDown(x.cursorConfig,x.model,E.modelState)):D[c++]=d.Vi.fromViewState(z.o.translateDown(x.cursorConfig,x,E.viewState))}return D}static addCursorUp(x,v,g){const D=[];let c=0;for(let C=0,M=v.length;C<M;C++){const E=v[C];D[c++]=new d.Vi(E.modelState,E.viewState),g?D[c++]=d.Vi.fromModelState(z.o.translateUp(x.cursorConfig,x.model,E.modelState)):D[c++]=d.Vi.fromViewState(z.o.translateUp(x.cursorConfig,x,E.viewState))}return D}static moveToBeginningOfLine(x,v,g){let D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c];D[c]=this._moveToLineStart(x,M,g)}return D}static _moveToLineStart(x,v,g){const D=v.viewState.position.column,c=v.modelState.position.column,C=D===c,M=v.viewState.position.lineNumber,E=x.getLineFirstNonWhitespaceColumn(M);return!C&&!(D===E)?this._moveToLineStartByView(x,v,g):this._moveToLineStartByModel(x,v,g)}static _moveToLineStartByView(x,v,g){return d.Vi.fromViewState(z.o.moveToBeginningOfLine(x.cursorConfig,x,v.viewState,g))}static _moveToLineStartByModel(x,v,g){return d.Vi.fromModelState(z.o.moveToBeginningOfLine(x.cursorConfig,x.model,v.modelState,g))}static moveToEndOfLine(x,v,g,D){const c=[];for(let C=0,M=v.length;C<M;C++){const E=v[C];c[C]=this._moveToLineEnd(x,E,g,D)}return c}static _moveToLineEnd(x,v,g,D){const c=v.viewState.position,C=x.getLineMaxColumn(c.lineNumber),M=c.column===C,E=v.modelState.position,_=x.model.getLineMaxColumn(E.lineNumber),L=C-c.column==_-E.column;return M||L?this._moveToLineEndByModel(x,v,g,D):this._moveToLineEndByView(x,v,g,D)}static _moveToLineEndByView(x,v,g,D){return d.Vi.fromViewState(z.o.moveToEndOfLine(x.cursorConfig,x,v.viewState,g,D))}static _moveToLineEndByModel(x,v,g,D){return d.Vi.fromModelState(z.o.moveToEndOfLine(x.cursorConfig,x.model,v.modelState,g,D))}static expandLineSelection(x,v){const g=[];for(let D=0,c=v.length;D<c;D++){const C=v[D],M=C.modelState.selection.startLineNumber,E=x.model.getLineCount();let _=C.modelState.selection.endLineNumber,L;_===E?L=x.model.getLineMaxColumn(E):(_++,L=1),g[D]=d.Vi.fromModelState(new d.rS(new j.e(M,1,M,1),0,new S.L(_,L),0))}return g}static moveToBeginningOfBuffer(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c];D[c]=d.Vi.fromModelState(z.o.moveToBeginningOfBuffer(x.cursorConfig,x.model,M.modelState,g))}return D}static moveToEndOfBuffer(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c];D[c]=d.Vi.fromModelState(z.o.moveToEndOfBuffer(x.cursorConfig,x.model,M.modelState,g))}return D}static selectAll(x,v){const g=x.model.getLineCount(),D=x.model.getLineMaxColumn(g);return d.Vi.fromModelState(new d.rS(new j.e(1,1,1,1),0,new S.L(g,D),0))}static line(x,v,g,D,c){const C=x.model.validatePosition(D),M=c?x.coordinatesConverter.validateViewPosition(new S.L(c.lineNumber,c.column),C):x.coordinatesConverter.convertModelPositionToViewPosition(C);if(!g||!v.modelState.hasSelection()){const _=x.model.getLineCount();let L=C.lineNumber+1,N=1;return L>_&&(L=_,N=x.model.getLineMaxColumn(L)),d.Vi.fromModelState(new d.rS(new j.e(C.lineNumber,1,L,N),0,new S.L(L,N),0))}const E=v.modelState.selectionStart.getStartPosition().lineNumber;if(C.lineNumber<E)return d.Vi.fromViewState(v.viewState.move(v.modelState.hasSelection(),M.lineNumber,1,0));if(C.lineNumber>E){const _=x.getLineCount();let L=M.lineNumber+1,N=1;return L>_&&(L=_,N=x.getLineMaxColumn(L)),d.Vi.fromViewState(v.viewState.move(v.modelState.hasSelection(),L,N,0))}else{const _=v.modelState.selectionStart.getEndPosition();return d.Vi.fromModelState(v.modelState.move(v.modelState.hasSelection(),_.lineNumber,_.column,0))}}static word(x,v,g,D){const c=x.model.validatePosition(D);return d.Vi.fromModelState(O.w.word(x.cursorConfig,x.model,v.modelState,g,c))}static cancelSelection(x,v){if(!v.modelState.hasSelection())return new d.Vi(v.modelState,v.viewState);const g=v.viewState.position.lineNumber,D=v.viewState.position.column;return d.Vi.fromViewState(new d.rS(new j.e(g,D,g,D),0,new S.L(g,D),0))}static moveTo(x,v,g,D,c){const C=x.model.validatePosition(D),M=c?x.coordinatesConverter.validateViewPosition(new S.L(c.lineNumber,c.column),C):x.coordinatesConverter.convertModelPositionToViewPosition(C);return d.Vi.fromViewState(v.viewState.move(g,M.lineNumber,M.column,0))}static simpleMove(x,v,g,D,c,C){switch(g){case 0:return C===4?this._moveHalfLineLeft(x,v,D):this._moveLeft(x,v,D,c);case 1:return C===4?this._moveHalfLineRight(x,v,D):this._moveRight(x,v,D,c);case 2:return C===2?this._moveUpByViewLines(x,v,D,c):this._moveUpByModelLines(x,v,D,c);case 3:return C===2?this._moveDownByViewLines(x,v,D,c):this._moveDownByModelLines(x,v,D,c);case 4:return C===2?v.map(M=>d.Vi.fromViewState(z.o.moveToPrevBlankLine(x.cursorConfig,x,M.viewState,D))):v.map(M=>d.Vi.fromModelState(z.o.moveToPrevBlankLine(x.cursorConfig,x.model,M.modelState,D)));case 5:return C===2?v.map(M=>d.Vi.fromViewState(z.o.moveToNextBlankLine(x.cursorConfig,x,M.viewState,D))):v.map(M=>d.Vi.fromModelState(z.o.moveToNextBlankLine(x.cursorConfig,x.model,M.modelState,D)));case 6:return this._moveToViewMinColumn(x,v,D);case 7:return this._moveToViewFirstNonWhitespaceColumn(x,v,D);case 8:return this._moveToViewCenterColumn(x,v,D);case 9:return this._moveToViewMaxColumn(x,v,D);case 10:return this._moveToViewLastNonWhitespaceColumn(x,v,D);default:return null}}static viewportMove(x,v,g,D,c){const C=x.getCompletelyVisibleViewRange(),M=x.coordinatesConverter.convertViewRangeToModelRange(C);switch(g){case 11:{const E=this._firstLineNumberInRange(x.model,M,c),_=x.model.getLineFirstNonWhitespaceColumn(E);return[this._moveToModelPosition(x,v[0],D,E,_)]}case 13:{const E=this._lastLineNumberInRange(x.model,M,c),_=x.model.getLineFirstNonWhitespaceColumn(E);return[this._moveToModelPosition(x,v[0],D,E,_)]}case 12:{const E=Math.round((M.startLineNumber+M.endLineNumber)/2),_=x.model.getLineFirstNonWhitespaceColumn(E);return[this._moveToModelPosition(x,v[0],D,E,_)]}case 14:{const E=[];for(let _=0,L=v.length;_<L;_++){const N=v[_];E[_]=this.findPositionInViewportIfOutside(x,N,C,D)}return E}default:return null}}static findPositionInViewportIfOutside(x,v,g,D){const c=v.viewState.position.lineNumber;if(g.startLineNumber<=c&&c<=g.endLineNumber-1)return new d.Vi(v.modelState,v.viewState);{let C;c>g.endLineNumber-1?C=g.endLineNumber-1:c<g.startLineNumber?C=g.startLineNumber:C=c;const M=z.o.vertical(x.cursorConfig,x,c,v.viewState.position.column,v.viewState.leftoverVisibleColumns,C,!1);return d.Vi.fromViewState(v.viewState.move(D,M.lineNumber,M.column,M.leftoverVisibleColumns))}}static _firstLineNumberInRange(x,v,g){let D=v.startLineNumber;return v.startColumn!==x.getLineMinColumn(D)&&D++,Math.min(v.endLineNumber,D+g-1)}static _lastLineNumberInRange(x,v,g){let D=v.startLineNumber;return v.startColumn!==x.getLineMinColumn(D)&&D++,Math.max(D,v.endLineNumber-g+1)}static _moveLeft(x,v,g,D){return v.map(c=>d.Vi.fromViewState(z.o.moveLeft(x.cursorConfig,x,c.viewState,g,D)))}static _moveHalfLineLeft(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c],E=M.viewState.position.lineNumber,_=Math.round(x.getLineContent(E).length/2);D[c]=d.Vi.fromViewState(z.o.moveLeft(x.cursorConfig,x,M.viewState,g,_))}return D}static _moveRight(x,v,g,D){return v.map(c=>d.Vi.fromViewState(z.o.moveRight(x.cursorConfig,x,c.viewState,g,D)))}static _moveHalfLineRight(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c],E=M.viewState.position.lineNumber,_=Math.round(x.getLineContent(E).length/2);D[c]=d.Vi.fromViewState(z.o.moveRight(x.cursorConfig,x,M.viewState,g,_))}return D}static _moveDownByViewLines(x,v,g,D){const c=[];for(let C=0,M=v.length;C<M;C++){const E=v[C];c[C]=d.Vi.fromViewState(z.o.moveDown(x.cursorConfig,x,E.viewState,g,D))}return c}static _moveDownByModelLines(x,v,g,D){const c=[];for(let C=0,M=v.length;C<M;C++){const E=v[C];c[C]=d.Vi.fromModelState(z.o.moveDown(x.cursorConfig,x.model,E.modelState,g,D))}return c}static _moveUpByViewLines(x,v,g,D){const c=[];for(let C=0,M=v.length;C<M;C++){const E=v[C];c[C]=d.Vi.fromViewState(z.o.moveUp(x.cursorConfig,x,E.viewState,g,D))}return c}static _moveUpByModelLines(x,v,g,D){const c=[];for(let C=0,M=v.length;C<M;C++){const E=v[C];c[C]=d.Vi.fromModelState(z.o.moveUp(x.cursorConfig,x.model,E.modelState,g,D))}return c}static _moveToViewPosition(x,v,g,D,c){return d.Vi.fromViewState(v.viewState.move(g,D,c,0))}static _moveToModelPosition(x,v,g,D,c){return d.Vi.fromModelState(v.modelState.move(g,D,c,0))}static _moveToViewMinColumn(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c],E=M.viewState.position.lineNumber,_=x.getLineMinColumn(E);D[c]=this._moveToViewPosition(x,M,g,E,_)}return D}static _moveToViewFirstNonWhitespaceColumn(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c],E=M.viewState.position.lineNumber,_=x.getLineFirstNonWhitespaceColumn(E);D[c]=this._moveToViewPosition(x,M,g,E,_)}return D}static _moveToViewCenterColumn(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c],E=M.viewState.position.lineNumber,_=Math.round((x.getLineMaxColumn(E)+x.getLineMinColumn(E))/2);D[c]=this._moveToViewPosition(x,M,g,E,_)}return D}static _moveToViewMaxColumn(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c],E=M.viewState.position.lineNumber,_=x.getLineMaxColumn(E);D[c]=this._moveToViewPosition(x,M,g,E,_)}return D}static _moveToViewLastNonWhitespaceColumn(x,v,g){const D=[];for(let c=0,C=v.length;c<C;c++){const M=v[c],E=M.viewState.position.lineNumber,_=x.getLineLastNonWhitespaceColumn(E);D[c]=this._moveToViewPosition(x,M,g,E,_)}return D}}var B;(function(F){const x=function(g){if(!p.Kn(g))return!1;const D=g;return!(!p.HD(D.to)||!p.o8(D.select)&&!p.jn(D.select)||!p.o8(D.by)&&!p.HD(D.by)||!p.o8(D.value)&&!p.hj(D.value))};F.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:x,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},F.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},F.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function v(g){if(!g.to)return null;let D;switch(g.to){case F.RawDirection.Left:D=0;break;case F.RawDirection.Right:D=1;break;case F.RawDirection.Up:D=2;break;case F.RawDirection.Down:D=3;break;case F.RawDirection.PrevBlankLine:D=4;break;case F.RawDirection.NextBlankLine:D=5;break;case F.RawDirection.WrappedLineStart:D=6;break;case F.RawDirection.WrappedLineFirstNonWhitespaceCharacter:D=7;break;case F.RawDirection.WrappedLineColumnCenter:D=8;break;case F.RawDirection.WrappedLineEnd:D=9;break;case F.RawDirection.WrappedLineLastNonWhitespaceCharacter:D=10;break;case F.RawDirection.ViewPortTop:D=11;break;case F.RawDirection.ViewPortBottom:D=13;break;case F.RawDirection.ViewPortCenter:D=12;break;case F.RawDirection.ViewPortIfOutside:D=14;break;default:return null}let c=0;switch(g.by){case F.RawUnit.Line:c=1;break;case F.RawUnit.WrappedLine:c=2;break;case F.RawUnit.Character:c=3;break;case F.RawUnit.HalfLine:c=4;break}return{direction:D,unit:c,select:!!g.select,value:g.value||1}}F.parse=v})(B||(B={}))},10839:function(Tt,me,a){"use strict";a.d(me,{o:function(){return B}});var p=a(55343),d=a(7988),z=a(50187),O=a(24314),S=a(25924),j=a(47128);class T{constructor(x,v,g){this._cursorPositionBrand=void 0,this.lineNumber=x,this.column=v,this.leftoverVisibleColumns=g}}class B{static leftPosition(x,v){if(v.column>x.getLineMinColumn(v.lineNumber))return v.delta(void 0,-S.HO(x.getLineContent(v.lineNumber),v.column-1));if(v.lineNumber>1){const g=v.lineNumber-1;return new z.L(g,x.getLineMaxColumn(g))}else return v}static leftPositionAtomicSoftTabs(x,v,g){if(v.column<=x.getLineIndentColumn(v.lineNumber)){const D=x.getLineMinColumn(v.lineNumber),c=x.getLineContent(v.lineNumber),C=j.l.atomicPosition(c,v.column-1,g,0);if(C!==-1&&C+1>=D)return new z.L(v.lineNumber,C+1)}return this.leftPosition(x,v)}static left(x,v,g){const D=x.stickyTabStops?B.leftPositionAtomicSoftTabs(v,g,x.tabSize):B.leftPosition(v,g);return new T(D.lineNumber,D.column,0)}static moveLeft(x,v,g,D,c){let C,M;if(g.hasSelection()&&!D)C=g.selection.startLineNumber,M=g.selection.startColumn;else{const E=g.position.delta(void 0,-(c-1)),_=v.normalizePosition(B.clipPositionColumn(E,v),0),L=B.left(x,v,_);C=L.lineNumber,M=L.column}return g.move(D,C,M,0)}static clipPositionColumn(x,v){return new z.L(x.lineNumber,B.clipRange(x.column,v.getLineMinColumn(x.lineNumber),v.getLineMaxColumn(x.lineNumber)))}static clipRange(x,v,g){return x<v?v:x>g?g:x}static rightPosition(x,v,g){return g<x.getLineMaxColumn(v)?g=g+S.vH(x.getLineContent(v),g-1):v<x.getLineCount()&&(v=v+1,g=x.getLineMinColumn(v)),new z.L(v,g)}static rightPositionAtomicSoftTabs(x,v,g,D,c){if(g<x.getLineIndentColumn(v)){const C=x.getLineContent(v),M=j.l.atomicPosition(C,g-1,D,1);if(M!==-1)return new z.L(v,M+1)}return this.rightPosition(x,v,g)}static right(x,v,g){const D=x.stickyTabStops?B.rightPositionAtomicSoftTabs(v,g.lineNumber,g.column,x.tabSize,x.indentSize):B.rightPosition(v,g.lineNumber,g.column);return new T(D.lineNumber,D.column,0)}static moveRight(x,v,g,D,c){let C,M;if(g.hasSelection()&&!D)C=g.selection.endLineNumber,M=g.selection.endColumn;else{const E=g.position.delta(void 0,c-1),_=v.normalizePosition(B.clipPositionColumn(E,v),1),L=B.right(x,v,_);C=L.lineNumber,M=L.column}return g.move(D,C,M,0)}static vertical(x,v,g,D,c,C,M,E){const _=d.i.visibleColumnFromColumn(v.getLineContent(g),D,x.tabSize)+c,L=v.getLineCount(),N=g===1&&D===1,b=g===L&&D===v.getLineMaxColumn(g),I=C<g?N:b;if(g=C,g<1?(g=1,M?D=v.getLineMinColumn(g):D=Math.min(v.getLineMaxColumn(g),D)):g>L?(g=L,M?D=v.getLineMaxColumn(g):D=Math.min(v.getLineMaxColumn(g),D)):D=x.columnFromVisibleColumn(v,g,_),I?c=0:c=_-d.i.visibleColumnFromColumn(v.getLineContent(g),D,x.tabSize),E!==void 0){const k=new z.L(g,D),W=v.normalizePosition(k,E);c=c+(D-W.column),g=W.lineNumber,D=W.column}return new T(g,D,c)}static down(x,v,g,D,c,C,M){return this.vertical(x,v,g,D,c,g+C,M,1)}static moveDown(x,v,g,D,c){let C,M;g.hasSelection()&&!D?(C=g.selection.endLineNumber,M=g.selection.endColumn):(C=g.position.lineNumber,M=g.position.column);const E=B.down(x,v,C,M,g.leftoverVisibleColumns,c,!0);return g.move(D,E.lineNumber,E.column,E.leftoverVisibleColumns)}static translateDown(x,v,g){const D=g.selection,c=B.down(x,v,D.selectionStartLineNumber,D.selectionStartColumn,g.selectionStartLeftoverVisibleColumns,1,!1),C=B.down(x,v,D.positionLineNumber,D.positionColumn,g.leftoverVisibleColumns,1,!1);return new p.rS(new O.e(c.lineNumber,c.column,c.lineNumber,c.column),c.leftoverVisibleColumns,new z.L(C.lineNumber,C.column),C.leftoverVisibleColumns)}static up(x,v,g,D,c,C,M){return this.vertical(x,v,g,D,c,g-C,M,0)}static moveUp(x,v,g,D,c){let C,M;g.hasSelection()&&!D?(C=g.selection.startLineNumber,M=g.selection.startColumn):(C=g.position.lineNumber,M=g.position.column);const E=B.up(x,v,C,M,g.leftoverVisibleColumns,c,!0);return g.move(D,E.lineNumber,E.column,E.leftoverVisibleColumns)}static translateUp(x,v,g){const D=g.selection,c=B.up(x,v,D.selectionStartLineNumber,D.selectionStartColumn,g.selectionStartLeftoverVisibleColumns,1,!1),C=B.up(x,v,D.positionLineNumber,D.positionColumn,g.leftoverVisibleColumns,1,!1);return new p.rS(new O.e(c.lineNumber,c.column,c.lineNumber,c.column),c.leftoverVisibleColumns,new z.L(C.lineNumber,C.column),C.leftoverVisibleColumns)}static _isBlankLine(x,v){return x.getLineFirstNonWhitespaceColumn(v)===0}static moveToPrevBlankLine(x,v,g,D){let c=g.position.lineNumber;for(;c>1&&this._isBlankLine(v,c);)c--;for(;c>1&&!this._isBlankLine(v,c);)c--;return g.move(D,c,v.getLineMinColumn(c),0)}static moveToNextBlankLine(x,v,g,D){const c=v.getLineCount();let C=g.position.lineNumber;for(;C<c&&this._isBlankLine(v,C);)C++;for(;C<c&&!this._isBlankLine(v,C);)C++;return g.move(D,C,v.getLineMinColumn(C),0)}static moveToBeginningOfLine(x,v,g,D){const c=g.position.lineNumber,C=v.getLineMinColumn(c),M=v.getLineFirstNonWhitespaceColumn(c)||C;let E;return g.position.column===M?E=C:E=M,g.move(D,c,E,0)}static moveToEndOfLine(x,v,g,D,c){const C=g.position.lineNumber,M=v.getLineMaxColumn(C);return g.move(D,C,M,c?1073741824-M:0)}static moveToBeginningOfBuffer(x,v,g,D){return g.move(D,1,1,0)}static moveToEndOfBuffer(x,v,g,D){const c=v.getLineCount(),C=v.getLineMaxColumn(c);return g.move(D,c,C,0)}}},51336:function(Tt,me,a){"use strict";a.d(me,{u:function(){return c},g:function(){return C}});var p=a(17301),d=a(25924),z=a(61329),O=a(10291),S=a(24314),j=a(3860);class T{constructor(b,I,k){this._range=b,this._charBeforeSelection=I,this._charAfterSelection=k}getEditOperations(b,I){I.addTrackedEditOperation(new S.e(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),I.addTrackedEditOperation(new S.e(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(b,I){const k=I.getInverseEditOperations(),W=k[0].range,q=k[1].range;return new j.Y(W.endLineNumber,W.endColumn,q.endLineNumber,q.endColumn-this._charAfterSelection.length)}}var B=a(55343),F=a(24929),x=a(50187),v=a(49119),g=a(89381),D=a(19111);class c{static indent(b,I,k){if(I===null||k===null)return[];const W=[];for(let q=0,re=k.length;q<re;q++)W[q]=new O.U(k[q],{isUnshift:!1,tabSize:b.tabSize,indentSize:b.indentSize,insertSpaces:b.insertSpaces,useTabStops:b.useTabStops,autoIndent:b.autoIndent});return W}static outdent(b,I,k){const W=[];for(let q=0,re=k.length;q<re;q++)W[q]=new O.U(k[q],{isUnshift:!0,tabSize:b.tabSize,indentSize:b.indentSize,insertSpaces:b.insertSpaces,useTabStops:b.useTabStops,autoIndent:b.autoIndent});return W}static shiftIndent(b,I,k){return k=k||1,O.U.shiftIndent(I,I.length+k,b.tabSize,b.indentSize,b.insertSpaces)}static unshiftIndent(b,I,k){return k=k||1,O.U.unshiftIndent(I,I.length+k,b.tabSize,b.indentSize,b.insertSpaces)}static _distributedPaste(b,I,k,W){const q=[];for(let re=0,de=k.length;re<de;re++)q[re]=new z.T4(k[re],W[re]);return new B.Tp(0,q,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(b,I,k,W,q){const re=[];for(let de=0,pe=k.length;de<pe;de++){const ae=k[de],ue=ae.getPosition();if(q&&!ae.isEmpty()&&(q=!1),q&&W.indexOf(`
`)!==W.length-1&&(q=!1),q){const te=new S.e(ue.lineNumber,1,ue.lineNumber,1);re[de]=new z.hP(te,W,ae,!0)}else re[de]=new z.T4(ae,W)}return new B.Tp(0,re,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(b,I,k,W,q){if(W||I.length===1)return null;if(q&&q.length===I.length)return q;if(b.multiCursorPaste==="spread"){k.charCodeAt(k.length-1)===10&&(k=k.substr(0,k.length-1)),k.charCodeAt(k.length-1)===13&&(k=k.substr(0,k.length-1));const re=d.uq(k);if(re.length===I.length)return re}return null}static paste(b,I,k,W,q,re){const de=this._distributePasteToCursors(b,k,W,q,re);return de?(k=k.sort(S.e.compareRangesUsingStarts),this._distributedPaste(b,I,k,de)):this._simplePaste(b,I,k,W,q)}static _goodIndentForLine(b,I,k){let W=null,q="";const re=g.zu.getInheritIndentForLine(b.autoIndent,I,k,!1);if(re)W=re.action,q=re.indentation;else if(k>1){let de;for(de=k-1;de>=1;de--){const ue=I.getLineContent(de);if(d.ow(ue)>=0)break}if(de<1)return null;const pe=I.getLineMaxColumn(de),ae=g.zu.getEnterAction(b.autoIndent,I,new S.e(de,pe,de,pe));ae&&(q=ae.indentation+ae.appendText)}return W&&(W===v.wU.Indent&&(q=c.shiftIndent(b,q)),W===v.wU.Outdent&&(q=c.unshiftIndent(b,q)),q=b.normalizeIndentation(q)),q||null}static _replaceJumpToNextIndent(b,I,k,W){let q="";const re=k.getStartPosition();if(b.insertSpaces){const de=b.visibleColumnFromColumn(I,re),pe=b.indentSize,ae=pe-de%pe;for(let ue=0;ue<ae;ue++)q+=" "}else q="	";return new z.T4(k,q,W)}static tab(b,I,k){const W=[];for(let q=0,re=k.length;q<re;q++){const de=k[q];if(de.isEmpty()){const pe=I.getLineContent(de.startLineNumber);if(/^\s*$/.test(pe)&&I.isCheapToTokenize(de.startLineNumber)){let ae=this._goodIndentForLine(b,I,de.startLineNumber);ae=ae||"	";const ue=b.normalizeIndentation(ae);if(!pe.startsWith(ue)){W[q]=new z.T4(new S.e(de.startLineNumber,1,de.startLineNumber,pe.length+1),ue,!0);continue}}W[q]=this._replaceJumpToNextIndent(b,I,de,!0)}else{if(de.startLineNumber===de.endLineNumber){const pe=I.getLineMaxColumn(de.startLineNumber);if(de.startColumn!==1||de.endColumn!==pe){W[q]=this._replaceJumpToNextIndent(b,I,de,!1);continue}}W[q]=new O.U(de,{isUnshift:!1,tabSize:b.tabSize,indentSize:b.indentSize,insertSpaces:b.insertSpaces,useTabStops:b.useTabStops,autoIndent:b.autoIndent})}}return W}static compositionType(b,I,k,W,q,re,de,pe){const ae=W.map(ue=>this._compositionType(k,ue,q,re,de,pe));return new B.Tp(4,ae,{shouldPushStackElementBefore:E(b,4),shouldPushStackElementAfter:!1})}static _compositionType(b,I,k,W,q,re){if(!I.isEmpty())return null;const de=I.getPosition(),pe=Math.max(1,de.column-W),ae=Math.min(b.getLineMaxColumn(de.lineNumber),de.column+q),ue=new S.e(de.lineNumber,pe,de.lineNumber,ae);return b.getValueInRange(ue)===k&&re===0?null:new z.Uo(ue,k,0,re)}static _typeCommand(b,I,k){return k?new z.Sj(b,I,!0):new z.T4(b,I,!0)}static _enter(b,I,k,W){if(b.autoIndent===0)return c._typeCommand(W,`
`,k);if(!I.isCheapToTokenize(W.getStartPosition().lineNumber)||b.autoIndent===1){const pe=I.getLineContent(W.startLineNumber),ae=d.V8(pe).substring(0,W.startColumn-1);return c._typeCommand(W,`
`+b.normalizeIndentation(ae),k)}const q=g.zu.getEnterAction(b.autoIndent,I,W);if(q){if(q.indentAction===v.wU.None)return c._typeCommand(W,`
`+b.normalizeIndentation(q.indentation+q.appendText),k);if(q.indentAction===v.wU.Indent)return c._typeCommand(W,`
`+b.normalizeIndentation(q.indentation+q.appendText),k);if(q.indentAction===v.wU.IndentOutdent){const pe=b.normalizeIndentation(q.indentation),ae=b.normalizeIndentation(q.indentation+q.appendText),ue=`
`+ae+`
`+pe;return k?new z.Sj(W,ue,!0):new z.Uo(W,ue,-1,ae.length-pe.length,!0)}else if(q.indentAction===v.wU.Outdent){const pe=c.unshiftIndent(b,q.indentation);return c._typeCommand(W,`
`+b.normalizeIndentation(pe+q.appendText),k)}}const re=I.getLineContent(W.startLineNumber),de=d.V8(re).substring(0,W.startColumn-1);if(b.autoIndent>=4){const pe=g.zu.getIndentForEnter(b.autoIndent,I,W,{unshiftIndent:ae=>c.unshiftIndent(b,ae),shiftIndent:ae=>c.shiftIndent(b,ae),normalizeIndentation:ae=>b.normalizeIndentation(ae)});if(pe){let ae=b.visibleColumnFromColumn(I,W.getEndPosition());const ue=W.endColumn,te=I.getLineContent(W.endLineNumber),K=d.LC(te);if(K>=0?W=W.setEndPosition(W.endLineNumber,Math.max(W.endColumn,K+1)):W=W.setEndPosition(W.endLineNumber,I.getLineMaxColumn(W.endLineNumber)),k)return new z.Sj(W,`
`+b.normalizeIndentation(pe.afterEnter),!0);{let U=0;return ue<=K+1&&(b.insertSpaces||(ae=Math.ceil(ae/b.indentSize)),U=Math.min(ae+1-b.normalizeIndentation(pe.afterEnter).length-1,0)),new z.Uo(W,`
`+b.normalizeIndentation(pe.afterEnter),0,U,!0)}}}return c._typeCommand(W,`
`+b.normalizeIndentation(de),k)}static _isAutoIndentType(b,I,k){if(b.autoIndent<4)return!1;for(let W=0,q=k.length;W<q;W++)if(!I.isCheapToTokenize(k[W].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(b,I,k,W){const q=g.zu.getIndentationAtPosition(I,k.startLineNumber,k.startColumn),re=g.zu.getIndentActionForType(b.autoIndent,I,k,W,{shiftIndent:de=>c.shiftIndent(b,de),unshiftIndent:de=>c.unshiftIndent(b,de)});if(re===null)return null;if(re!==b.normalizeIndentation(q)){const de=I.getLineFirstNonWhitespaceColumn(k.startLineNumber);return de===0?c._typeCommand(new S.e(k.startLineNumber,1,k.endLineNumber,k.endColumn),b.normalizeIndentation(re)+W,!1):c._typeCommand(new S.e(k.startLineNumber,1,k.endLineNumber,k.endColumn),b.normalizeIndentation(re)+I.getLineContent(k.startLineNumber).substring(de-1,k.startColumn-1)+W,!1)}return null}static _isAutoClosingOvertype(b,I,k,W,q){if(b.autoClosingOvertype==="never"||!b.autoClosingPairs.autoClosingPairsCloseSingleChar.has(q))return!1;for(let re=0,de=k.length;re<de;re++){const pe=k[re];if(!pe.isEmpty())return!1;const ae=pe.getPosition(),ue=I.getLineContent(ae.lineNumber);if(ue.charAt(ae.column-1)!==q)return!1;const K=(0,B.LN)(q);if((ae.column>2?ue.charCodeAt(ae.column-2):0)===92&&K)return!1;if(b.autoClosingOvertype==="auto"){let ee=!1;for(let X=0,le=W.length;X<le;X++){const oe=W[X];if(ae.lineNumber===oe.startLineNumber&&ae.column===oe.startColumn){ee=!0;break}}if(!ee)return!1}}return!0}static _runAutoClosingOvertype(b,I,k,W,q){const re=[];for(let de=0,pe=W.length;de<pe;de++){const ue=W[de].getPosition(),te=new S.e(ue.lineNumber,ue.column,ue.lineNumber,ue.column+1);re[de]=new z.T4(te,q)}return new B.Tp(4,re,{shouldPushStackElementBefore:E(b,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(b,I){const k=I.charAt(0),W=b.autoClosingPairs.autoClosingPairsOpenByStart.get(k)||[],q=b.autoClosingPairs.autoClosingPairsCloseByStart.get(k)||[],re=W.some(pe=>I.startsWith(pe.open)),de=q.some(pe=>I.startsWith(pe.close));return!re&&de}static _findAutoClosingPairOpen(b,I,k,W){const q=b.autoClosingPairs.autoClosingPairsOpenByEnd.get(W);if(!q)return null;let re=null;for(const de of q)if(re===null||de.open.length>re.open.length){let pe=!0;for(const ae of k)if(I.getValueInRange(new S.e(ae.lineNumber,ae.column-de.open.length+1,ae.lineNumber,ae.column))+W!==de.open){pe=!1;break}pe&&(re=de)}return re}static _findContainedAutoClosingPair(b,I){if(I.open.length<=1)return null;const k=I.close.charAt(I.close.length-1),W=b.autoClosingPairs.autoClosingPairsCloseByEnd.get(k)||[];let q=null;for(const re of W)re.open!==I.open&&I.open.includes(re.open)&&I.close.endsWith(re.close)&&(!q||re.open.length>q.open.length)&&(q=re);return q}static _getAutoClosingPairClose(b,I,k,W,q){const re=(0,B.LN)(W),de=re?b.autoClosingQuotes:b.autoClosingBrackets,pe=re?b.shouldAutoCloseBefore.quote:b.shouldAutoCloseBefore.bracket;if(de==="never")return null;for(const ee of k)if(!ee.isEmpty())return null;const ae=k.map(ee=>{const X=ee.getPosition();return q?{lineNumber:X.lineNumber,beforeColumn:X.column-W.length,afterColumn:X.column}:{lineNumber:X.lineNumber,beforeColumn:X.column,afterColumn:X.column}}),ue=this._findAutoClosingPairOpen(b,I,ae.map(ee=>new x.L(ee.lineNumber,ee.beforeColumn)),W);if(!ue)return null;const te=this._findContainedAutoClosingPair(b,ue),K=te?te.close:"";let U=!0;for(const ee of ae){const{lineNumber:X,beforeColumn:le,afterColumn:oe}=ee,Ce=I.getLineContent(X),ye=Ce.substring(0,le-1),ke=Ce.substring(oe-1);if(ke.startsWith(K)||(U=!1),ke.length>0){const ze=ke.charAt(0);if(!c._isBeforeClosingBrace(b,ke)&&!pe(ze))return null}if(ue.open.length===1&&(W==="'"||W==='"')&&de!=="always"){const ze=(0,F.u)(b.wordSeparators);if(ye.length>0){const Qe=ye.charCodeAt(ye.length-1);if(ze.get(Qe)===0)return null}}if(!I.isCheapToTokenize(X))return null;I.forceTokenization(X);const Te=I.getLineTokens(X),ge=(0,D.wH)(Te,le-1);if(!ue.shouldAutoClose(ge,le-ge.firstCharOffset))return null;const we=ue.findNeutralCharacter();if(we){const ze=I.getTokenTypeIfInsertingCharacter(X,le,we);if(!ue.isOK(ze))return null}}return U?ue.close.substring(0,ue.close.length-K.length):ue.close}static _runAutoClosingOpenCharType(b,I,k,W,q,re,de){const pe=[];for(let ae=0,ue=W.length;ae<ue;ae++){const te=W[ae];pe[ae]=new C(te,q,!re,de)}return new B.Tp(4,pe,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(b,I){return(0,B.LN)(I)?b.autoSurround==="quotes"||b.autoSurround==="languageDefined":b.autoSurround==="brackets"||b.autoSurround==="languageDefined"}static _isSurroundSelectionType(b,I,k,W){if(!c._shouldSurroundChar(b,W)||!b.surroundingPairs.hasOwnProperty(W))return!1;const q=(0,B.LN)(W);for(let re=0,de=k.length;re<de;re++){const pe=k[re];if(pe.isEmpty())return!1;let ae=!0;for(let ue=pe.startLineNumber;ue<=pe.endLineNumber;ue++){const te=I.getLineContent(ue),K=ue===pe.startLineNumber?pe.startColumn-1:0,U=ue===pe.endLineNumber?pe.endColumn-1:te.length,ee=te.substring(K,U);if(/[^ \t]/.test(ee)){ae=!1;break}}if(ae)return!1;if(q&&pe.startLineNumber===pe.endLineNumber&&pe.startColumn+1===pe.endColumn){const ue=I.getValueInRange(pe);if((0,B.LN)(ue))return!1}}return!0}static _runSurroundSelectionType(b,I,k,W,q){const re=[];for(let de=0,pe=W.length;de<pe;de++){const ae=W[de],ue=I.surroundingPairs[q];re[de]=new T(ae,q,ue)}return new B.Tp(0,re,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(b,I,k){return!!(k.length===1&&I.isCheapToTokenize(k[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(b,I,k,W,q){if(!I.electricChars.hasOwnProperty(q)||!W.isEmpty())return null;const re=W.getPosition();k.forceTokenization(re.lineNumber);const de=k.getLineTokens(re.lineNumber);let pe;try{pe=I.onElectricCharacter(q,de,re.column)}catch(ae){return(0,p.dL)(ae),null}if(!pe)return null;if(pe.matchOpenBracket){const ae=(de.getLineContent()+q).lastIndexOf(pe.matchOpenBracket)+1,ue=k.bracketPairs.findMatchingBracketUp(pe.matchOpenBracket,{lineNumber:re.lineNumber,column:ae},500);if(ue){if(ue.startLineNumber===re.lineNumber)return null;const te=k.getLineContent(ue.startLineNumber),K=d.V8(te),U=I.normalizeIndentation(K),ee=k.getLineContent(re.lineNumber),X=k.getLineFirstNonWhitespaceColumn(re.lineNumber)||re.column,le=ee.substring(X-1,re.column-1),oe=U+le+q,Ce=new S.e(re.lineNumber,1,re.lineNumber,re.column),ye=new z.T4(Ce,oe);return new B.Tp(M(oe,b),[ye],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(b,I,k,W,q,re){if(!W||j.Y.selectionsArrEqual(W,q))return null;let de=null;for(const ae of q){if(!ae.isEmpty())return null;const ue=ae.getPosition(),te=k.getValueInRange(new S.e(ue.lineNumber,ue.column-1,ue.lineNumber,ue.column));if(de===null)de=te;else if(de!==te)return null}if(!de)return null;if(this._isAutoClosingOvertype(I,k,q,re,de)){const ae=q.map(ue=>new z.T4(new S.e(ue.positionLineNumber,ue.positionColumn,ue.positionLineNumber,ue.positionColumn+1),"",!1));return new B.Tp(4,ae,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const pe=this._getAutoClosingPairClose(I,k,q,de,!0);return pe!==null?this._runAutoClosingOpenCharType(b,I,k,q,de,!0,pe):null}static typeWithInterceptors(b,I,k,W,q,re,de){if(!b&&de===`
`){const ue=[];for(let te=0,K=q.length;te<K;te++)ue[te]=c._enter(k,W,!1,q[te]);return new B.Tp(4,ue,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!b&&this._isAutoIndentType(k,W,q)){const ue=[];let te=!1;for(let K=0,U=q.length;K<U;K++)if(ue[K]=this._runAutoIndentType(k,W,q[K],de),!ue[K]){te=!0;break}if(!te)return new B.Tp(4,ue,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!b&&this._isAutoClosingOvertype(k,W,q,re,de))return this._runAutoClosingOvertype(I,k,W,q,de);if(!b){const ue=this._getAutoClosingPairClose(k,W,q,de,!1);if(ue)return this._runAutoClosingOpenCharType(I,k,W,q,de,!1,ue)}if(this._isSurroundSelectionType(k,W,q,de))return this._runSurroundSelectionType(I,k,W,q,de);if(!b&&this._isTypeInterceptorElectricChar(k,W,q)){const ue=this._typeInterceptorElectricChar(I,k,W,q[0],de);if(ue)return ue}const pe=[];for(let ue=0,te=q.length;ue<te;ue++)pe[ue]=new z.T4(q[ue],de);const ae=M(de,I);return new B.Tp(ae,pe,{shouldPushStackElementBefore:E(I,ae),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(b,I,k,W,q){const re=[];for(let pe=0,ae=W.length;pe<ae;pe++)re[pe]=new z.T4(W[pe],q);const de=M(q,b);return new B.Tp(de,re,{shouldPushStackElementBefore:E(b,de),shouldPushStackElementAfter:!1})}static lineInsertBefore(b,I,k){if(I===null||k===null)return[];const W=[];for(let q=0,re=k.length;q<re;q++){let de=k[q].positionLineNumber;if(de===1)W[q]=new z.Sj(new S.e(1,1,1,1),`
`);else{de--;const pe=I.getLineMaxColumn(de);W[q]=this._enter(b,I,!1,new S.e(de,pe,de,pe))}}return W}static lineInsertAfter(b,I,k){if(I===null||k===null)return[];const W=[];for(let q=0,re=k.length;q<re;q++){const de=k[q].positionLineNumber,pe=I.getLineMaxColumn(de);W[q]=this._enter(b,I,!1,new S.e(de,pe,de,pe))}return W}static lineBreakInsert(b,I,k){const W=[];for(let q=0,re=k.length;q<re;q++)W[q]=this._enter(b,I,!0,k[q]);return W}}class C extends z.Uo{constructor(b,I,k,W){super(b,(k?I:"")+W,0,-W.length);this._openCharacter=I,this._closeCharacter=W,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(b,I){const W=I.getInverseEditOperations()[0].range;return this.closeCharacterRange=new S.e(W.startLineNumber,W.endColumn-this._closeCharacter.length,W.endLineNumber,W.endColumn),this.enclosingRange=new S.e(W.startLineNumber,W.endColumn-this._openCharacter.length-this._closeCharacter.length,W.endLineNumber,W.endColumn),super.computeCursorState(b,I)}}function M(N,b){return N===" "?b===5||b===6?6:5:4}function E(N,b){return L(N)&&!L(b)?!0:N===5?!1:_(N)!==_(b)}function _(N){return N===6||N===5?"space":N}function L(N){return N===4||N===5||N===6}},92896:function(Tt,me,a){"use strict";a.d(me,{w:function(){return T},L:function(){return B}});var p=a(25924),d=a(55343),z=a(29436),O=a(24929),S=a(50187),j=a(24314);class T{static _createWord(v,g,D,c,C){return{start:c,end:C,wordType:g,nextCharClass:D}}static _findPreviousWordOnLine(v,g,D){const c=g.getLineContent(D.lineNumber);return this._doFindPreviousWordOnLine(c,v,D)}static _doFindPreviousWordOnLine(v,g,D){let c=0;for(let C=D.column-2;C>=0;C--){const M=v.charCodeAt(C),E=g.get(M);if(E===0){if(c===2)return this._createWord(v,c,E,C+1,this._findEndOfWord(v,g,c,C+1));c=1}else if(E===2){if(c===1)return this._createWord(v,c,E,C+1,this._findEndOfWord(v,g,c,C+1));c=2}else if(E===1&&c!==0)return this._createWord(v,c,E,C+1,this._findEndOfWord(v,g,c,C+1))}return c!==0?this._createWord(v,c,1,0,this._findEndOfWord(v,g,c,0)):null}static _findEndOfWord(v,g,D,c){const C=v.length;for(let M=c;M<C;M++){const E=v.charCodeAt(M),_=g.get(E);if(_===1||D===1&&_===2||D===2&&_===0)return M}return C}static _findNextWordOnLine(v,g,D){const c=g.getLineContent(D.lineNumber);return this._doFindNextWordOnLine(c,v,D)}static _doFindNextWordOnLine(v,g,D){let c=0;const C=v.length;for(let M=D.column-1;M<C;M++){const E=v.charCodeAt(M),_=g.get(E);if(_===0){if(c===2)return this._createWord(v,c,_,this._findStartOfWord(v,g,c,M-1),M);c=1}else if(_===2){if(c===1)return this._createWord(v,c,_,this._findStartOfWord(v,g,c,M-1),M);c=2}else if(_===1&&c!==0)return this._createWord(v,c,_,this._findStartOfWord(v,g,c,M-1),M)}return c!==0?this._createWord(v,c,1,this._findStartOfWord(v,g,c,C-1),C):null}static _findStartOfWord(v,g,D,c){for(let C=c;C>=0;C--){const M=v.charCodeAt(C),E=g.get(M);if(E===1||D===1&&E===2||D===2&&E===0)return C+1}return 0}static moveWordLeft(v,g,D,c){let C=D.lineNumber,M=D.column;M===1&&C>1&&(C=C-1,M=g.getLineMaxColumn(C));let E=T._findPreviousWordOnLine(v,g,new S.L(C,M));if(c===0)return new S.L(C,E?E.start+1:1);if(c===1)return E&&E.wordType===2&&E.end-E.start==1&&E.nextCharClass===0&&(E=T._findPreviousWordOnLine(v,g,new S.L(C,E.start+1))),new S.L(C,E?E.start+1:1);if(c===3){for(;E&&E.wordType===2;)E=T._findPreviousWordOnLine(v,g,new S.L(C,E.start+1));return new S.L(C,E?E.start+1:1)}return E&&M<=E.end+1&&(E=T._findPreviousWordOnLine(v,g,new S.L(C,E.start+1))),new S.L(C,E?E.end+1:1)}static _moveWordPartLeft(v,g){const D=g.lineNumber,c=v.getLineMaxColumn(D);if(g.column===1)return D>1?new S.L(D-1,v.getLineMaxColumn(D-1)):g;const C=v.getLineContent(D);for(let M=g.column-1;M>1;M--){const E=C.charCodeAt(M-2),_=C.charCodeAt(M-1);if(E===95&&_!==95)return new S.L(D,M);if(p.mK(E)&&p.df(_))return new S.L(D,M);if(p.df(E)&&p.df(_)&&M+1<c){const L=C.charCodeAt(M);if(p.mK(L))return new S.L(D,M)}}return new S.L(D,1)}static moveWordRight(v,g,D,c){let C=D.lineNumber,M=D.column,E=!1;M===g.getLineMaxColumn(C)&&C<g.getLineCount()&&(E=!0,C=C+1,M=1);let _=T._findNextWordOnLine(v,g,new S.L(C,M));if(c===2)_&&_.wordType===2&&_.end-_.start==1&&_.nextCharClass===0&&(_=T._findNextWordOnLine(v,g,new S.L(C,_.end+1))),_?M=_.end+1:M=g.getLineMaxColumn(C);else if(c===3){for(E&&(M=0);_&&(_.wordType===2||_.start+1<=M);)_=T._findNextWordOnLine(v,g,new S.L(C,_.end+1));_?M=_.start+1:M=g.getLineMaxColumn(C)}else _&&!E&&M>=_.start+1&&(_=T._findNextWordOnLine(v,g,new S.L(C,_.end+1))),_?M=_.start+1:M=g.getLineMaxColumn(C);return new S.L(C,M)}static _moveWordPartRight(v,g){const D=g.lineNumber,c=v.getLineMaxColumn(D);if(g.column===c)return D<v.getLineCount()?new S.L(D+1,1):g;const C=v.getLineContent(D);for(let M=g.column+1;M<c;M++){const E=C.charCodeAt(M-2),_=C.charCodeAt(M-1);if(E!==95&&_===95)return new S.L(D,M);if(p.mK(E)&&p.df(_))return new S.L(D,M);if(p.df(E)&&p.df(_)&&M+1<c){const L=C.charCodeAt(M);if(p.mK(L))return new S.L(D,M)}}return new S.L(D,c)}static _deleteWordLeftWhitespace(v,g){const D=v.getLineContent(g.lineNumber),c=g.column-2,C=p.ow(D,c);return C+1<c?new j.e(g.lineNumber,C+2,g.lineNumber,g.column):null}static deleteWordLeft(v,g){const D=v.wordSeparators,c=v.model,C=v.selection,M=v.whitespaceHeuristics;if(!C.isEmpty())return C;if(z.A.isAutoClosingPairDelete(v.autoClosingDelete,v.autoClosingBrackets,v.autoClosingQuotes,v.autoClosingPairs.autoClosingPairsOpenByEnd,v.model,[v.selection],v.autoClosedCharacters)){const b=v.selection.getPosition();return new j.e(b.lineNumber,b.column-1,b.lineNumber,b.column+1)}const E=new S.L(C.positionLineNumber,C.positionColumn);let _=E.lineNumber,L=E.column;if(_===1&&L===1)return null;if(M){const b=this._deleteWordLeftWhitespace(c,E);if(b)return b}let N=T._findPreviousWordOnLine(D,c,E);return g===0?N?L=N.start+1:L>1?L=1:(_--,L=c.getLineMaxColumn(_)):(N&&L<=N.end+1&&(N=T._findPreviousWordOnLine(D,c,new S.L(_,N.start+1))),N?L=N.end+1:L>1?L=1:(_--,L=c.getLineMaxColumn(_))),new j.e(_,L,E.lineNumber,E.column)}static deleteInsideWord(v,g,D){if(!D.isEmpty())return D;const c=new S.L(D.positionLineNumber,D.positionColumn),C=this._deleteInsideWordWhitespace(g,c);return C||this._deleteInsideWordDetermineDeleteRange(v,g,c)}static _charAtIsWhitespace(v,g){const D=v.charCodeAt(g);return D===32||D===9}static _deleteInsideWordWhitespace(v,g){const D=v.getLineContent(g.lineNumber),c=D.length;if(c===0)return null;let C=Math.max(g.column-2,0);if(!this._charAtIsWhitespace(D,C))return null;let M=Math.min(g.column-1,c-1);if(!this._charAtIsWhitespace(D,M))return null;for(;C>0&&this._charAtIsWhitespace(D,C-1);)C--;for(;M+1<c&&this._charAtIsWhitespace(D,M+1);)M++;return new j.e(g.lineNumber,C+1,g.lineNumber,M+2)}static _deleteInsideWordDetermineDeleteRange(v,g,D){const c=g.getLineContent(D.lineNumber),C=c.length;if(C===0)return D.lineNumber>1?new j.e(D.lineNumber-1,g.getLineMaxColumn(D.lineNumber-1),D.lineNumber,1):D.lineNumber<g.getLineCount()?new j.e(D.lineNumber,1,D.lineNumber+1,1):new j.e(D.lineNumber,1,D.lineNumber,1);const M=b=>b.start+1<=D.column&&D.column<=b.end+1,E=(b,I)=>(b=Math.min(b,D.column),I=Math.max(I,D.column),new j.e(D.lineNumber,b,D.lineNumber,I)),_=b=>{let I=b.start+1,k=b.end+1,W=!1;for(;k-1<C&&this._charAtIsWhitespace(c,k-1);)W=!0,k++;if(!W)for(;I>1&&this._charAtIsWhitespace(c,I-2);)I--;return E(I,k)},L=T._findPreviousWordOnLine(v,g,D);if(L&&M(L))return _(L);const N=T._findNextWordOnLine(v,g,D);return N&&M(N)?_(N):L&&N?E(L.end+1,N.start+1):L?E(L.start+1,L.end+1):N?E(N.start+1,N.end+1):E(1,C+1)}static _deleteWordPartLeft(v,g){if(!g.isEmpty())return g;const D=g.getPosition(),c=T._moveWordPartLeft(v,D);return new j.e(D.lineNumber,D.column,c.lineNumber,c.column)}static _findFirstNonWhitespaceChar(v,g){const D=v.length;for(let c=g;c<D;c++){const C=v.charAt(c);if(C!==" "&&C!=="	")return c}return D}static _deleteWordRightWhitespace(v,g){const D=v.getLineContent(g.lineNumber),c=g.column-1,C=this._findFirstNonWhitespaceChar(D,c);return c+1<C?new j.e(g.lineNumber,g.column,g.lineNumber,C+1):null}static deleteWordRight(v,g){const D=v.wordSeparators,c=v.model,C=v.selection,M=v.whitespaceHeuristics;if(!C.isEmpty())return C;const E=new S.L(C.positionLineNumber,C.positionColumn);let _=E.lineNumber,L=E.column;const N=c.getLineCount(),b=c.getLineMaxColumn(_);if(_===N&&L===b)return null;if(M){const k=this._deleteWordRightWhitespace(c,E);if(k)return k}let I=T._findNextWordOnLine(D,c,E);return g===2?I?L=I.end+1:L<b||_===N?L=b:(_++,I=T._findNextWordOnLine(D,c,new S.L(_,1)),I?L=I.start+1:L=c.getLineMaxColumn(_)):(I&&L>=I.start+1&&(I=T._findNextWordOnLine(D,c,new S.L(_,I.end+1))),I?L=I.start+1:L<b||_===N?L=b:(_++,I=T._findNextWordOnLine(D,c,new S.L(_,1)),I?L=I.start+1:L=c.getLineMaxColumn(_))),new j.e(_,L,E.lineNumber,E.column)}static _deleteWordPartRight(v,g){if(!g.isEmpty())return g;const D=g.getPosition(),c=T._moveWordPartRight(v,D);return new j.e(D.lineNumber,D.column,c.lineNumber,c.column)}static _createWordAtPosition(v,g,D){const c=new j.e(g,D.start+1,g,D.end+1);return{word:v.getValueInRange(c),startColumn:c.startColumn,endColumn:c.endColumn}}static getWordAtPosition(v,g,D){const c=(0,O.u)(g),C=T._findPreviousWordOnLine(c,v,D);if(C&&C.wordType===1&&C.start<=D.column-1&&D.column-1<=C.end)return T._createWordAtPosition(v,D.lineNumber,C);const M=T._findNextWordOnLine(c,v,D);return M&&M.wordType===1&&M.start<=D.column-1&&D.column-1<=M.end?T._createWordAtPosition(v,D.lineNumber,M):null}static word(v,g,D,c,C){const M=(0,O.u)(v.wordSeparators),E=T._findPreviousWordOnLine(M,g,C),_=T._findNextWordOnLine(M,g,C);if(!c){let k,W;return E&&E.wordType===1&&E.start<=C.column-1&&C.column-1<=E.end?(k=E.start+1,W=E.end+1):_&&_.wordType===1&&_.start<=C.column-1&&C.column-1<=_.end?(k=_.start+1,W=_.end+1):(E?k=E.end+1:k=1,_?W=_.start+1:W=g.getLineMaxColumn(C.lineNumber)),new d.rS(new j.e(C.lineNumber,k,C.lineNumber,W),0,new S.L(C.lineNumber,W),0)}let L,N;E&&E.wordType===1&&E.start<C.column-1&&C.column-1<E.end?(L=E.start+1,N=E.end+1):_&&_.wordType===1&&_.start<C.column-1&&C.column-1<_.end?(L=_.start+1,N=_.end+1):(L=C.column,N=C.column);const b=C.lineNumber;let I;if(D.selectionStart.containsPosition(C))I=D.selectionStart.endColumn;else if(C.isBeforeOrEqual(D.selectionStart.getStartPosition())){I=L;const k=new S.L(b,I);D.selectionStart.containsPosition(k)&&(I=D.selectionStart.endColumn)}else{I=N;const k=new S.L(b,I);D.selectionStart.containsPosition(k)&&(I=D.selectionStart.startColumn)}return D.move(!0,b,I,0)}}class B extends T{static deleteWordPartLeft(v){const g=F([T.deleteWordLeft(v,0),T.deleteWordLeft(v,2),T._deleteWordPartLeft(v.model,v.selection)]);return g.sort(j.e.compareRangesUsingEnds),g[2]}static deleteWordPartRight(v){const g=F([T.deleteWordRight(v,0),T.deleteWordRight(v,2),T._deleteWordPartRight(v.model,v.selection)]);return g.sort(j.e.compareRangesUsingStarts),g[0]}static moveWordPartLeft(v,g,D){const c=F([T.moveWordLeft(v,g,D,0),T.moveWordLeft(v,g,D,2),T._moveWordPartLeft(g,D)]);return c.sort(S.L.compare),c[2]}static moveWordPartRight(v,g,D){const c=F([T.moveWordRight(v,g,D,0),T.moveWordRight(v,g,D,2),T._moveWordPartRight(g,D)]);return c.sort(S.L.compare),c[0]}}function F(x){return x.filter(v=>Boolean(v))}},55343:function(Tt,me,a){"use strict";a.d(me,{LM:function(){return x},Vi:function(){return v},rS:function(){return c},Tp:function(){return C},LN:function(){return M}});var p=a(50187),d=a(24314),z=a(3860),O=a(19111),S=a(7988),j=a(83158);const T=()=>!0,B=()=>!1,F=E=>E===" "||E==="	";class x{constructor(_,L,N,b){this.languageConfigurationService=b,this._cursorMoveConfigurationBrand=void 0,this._languageId=_;const I=N.options,k=I.get(131);this.readOnly=I.get(81),this.tabSize=L.tabSize,this.indentSize=L.indentSize,this.insertSpaces=L.insertSpaces,this.stickyTabStops=I.get(104),this.lineHeight=I.get(59),this.pageSize=Math.max(1,Math.floor(k.height/this.lineHeight)-2),this.useTabStops=I.get(116),this.wordSeparators=I.get(117),this.emptySelectionClipboard=I.get(32),this.copyWithSyntaxHighlighting=I.get(21),this.multiCursorMergeOverlapping=I.get(69),this.multiCursorPaste=I.get(71),this.autoClosingBrackets=I.get(5),this.autoClosingQuotes=I.get(8),this.autoClosingDelete=I.get(6),this.autoClosingOvertype=I.get(7),this.autoSurround=I.get(11),this.autoIndent=I.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(_,this.autoClosingQuotes),bracket:this._getShouldAutoClose(_,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(_).getAutoClosingPairs();const W=this.languageConfigurationService.getLanguageConfiguration(_).getSurroundingPairs();if(W)for(const q of W)this.surroundingPairs[q.open]=q.close}static shouldRecreate(_){return _.hasChanged(131)||_.hasChanged(117)||_.hasChanged(32)||_.hasChanged(69)||_.hasChanged(71)||_.hasChanged(5)||_.hasChanged(8)||_.hasChanged(6)||_.hasChanged(7)||_.hasChanged(11)||_.hasChanged(116)||_.hasChanged(59)||_.hasChanged(81)}get electricChars(){var _;if(!this._electricChars){this._electricChars={};const L=(_=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||_===void 0?void 0:_.getElectricCharacters();if(L)for(const N of L)this._electricChars[N]=!0}return this._electricChars}onElectricCharacter(_,L,N){const b=(0,O.wH)(L,N-1),I=this.languageConfigurationService.getLanguageConfiguration(b.languageId).electricCharacter;return I?I.onElectricCharacter(_,b,N-b.firstCharOffset):null}normalizeIndentation(_){return(0,j.x)(_,this.indentSize,this.insertSpaces)}_getShouldAutoClose(_,L){switch(L){case"beforeWhitespace":return F;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(_);case"always":return T;case"never":return B}}_getLanguageDefinedShouldAutoClose(_){const L=this.languageConfigurationService.getLanguageConfiguration(_).getAutoCloseBeforeSet();return N=>L.indexOf(N)!==-1}visibleColumnFromColumn(_,L){return S.i.visibleColumnFromColumn(_.getLineContent(L.lineNumber),L.column,this.tabSize)}columnFromVisibleColumn(_,L,N){const b=S.i.columnFromVisibleColumn(_.getLineContent(L),N,this.tabSize),I=_.getLineMinColumn(L);if(b<I)return I;const k=_.getLineMaxColumn(L);return b>k?k:b}}class v{constructor(_,L){this._cursorStateBrand=void 0,this.modelState=_,this.viewState=L}static fromModelState(_){return new g(_)}static fromViewState(_){return new D(_)}static fromModelSelection(_){const L=z.Y.liftSelection(_),N=new c(d.e.fromPositions(L.getSelectionStart()),0,L.getPosition(),0);return v.fromModelState(N)}static fromModelSelections(_){const L=[];for(let N=0,b=_.length;N<b;N++)L[N]=this.fromModelSelection(_[N]);return L}equals(_){return this.viewState.equals(_.viewState)&&this.modelState.equals(_.modelState)}}class g{constructor(_){this.modelState=_,this.viewState=null}}class D{constructor(_){this.modelState=null,this.viewState=_}}class c{constructor(_,L,N,b){this._singleCursorStateBrand=void 0,this.selectionStart=_,this.selectionStartLeftoverVisibleColumns=L,this.position=N,this.leftoverVisibleColumns=b,this.selection=c._computeSelection(this.selectionStart,this.position)}equals(_){return this.selectionStartLeftoverVisibleColumns===_.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===_.leftoverVisibleColumns&&this.position.equals(_.position)&&this.selectionStart.equalsRange(_.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(_,L,N,b){return _?new c(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new p.L(L,N),b):new c(new d.e(L,N,L,N),b,new p.L(L,N),b)}static _computeSelection(_,L){return _.isEmpty()||!L.isBeforeOrEqual(_.getStartPosition())?z.Y.fromPositions(_.getStartPosition(),L):z.Y.fromPositions(_.getEndPosition(),L)}}class C{constructor(_,L,N){this._editOperationResultBrand=void 0,this.type=_,this.commands=L,this.shouldPushStackElementBefore=N.shouldPushStackElementBefore,this.shouldPushStackElementAfter=N.shouldPushStackElementAfter}}function M(E){return E==="'"||E==='"'||E==="`"}},30653:function(Tt,me,a){"use strict";a.d(me,{p:function(){return p}});class p{constructor(z,O,S,j,T,B){this.id=z,this.label=O,this.alias=S,this._precondition=j,this._run=T,this._contextKeyService=B}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}},96518:function(Tt,me,a){"use strict";a.d(me,{g:function(){return p}});const p={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"}},29102:function(Tt,me,a){"use strict";a.d(me,{u:function(){return z}});var p=a(63580),d=a(16141),z;(function(O){O.editorSimpleInput=new d.uy("editorSimpleInput",!1,!0),O.editorTextFocus=new d.uy("editorTextFocus",!1,p.N("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),O.focus=new d.uy("editorFocus",!1,p.N("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),O.textInputFocus=new d.uy("textInputFocus",!1,p.N("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),O.readOnly=new d.uy("editorReadonly",!1,p.N("editorReadonly","Whether the editor is read only")),O.inDiffEditor=new d.uy("inDiffEditor",!1,p.N("inDiffEditor","Whether the context is a diff editor")),O.columnSelection=new d.uy("editorColumnSelection",!1,p.N("editorColumnSelection","Whether `editor.columnSelection` is enabled")),O.writable=O.readOnly.toNegated(),O.hasNonEmptySelection=new d.uy("editorHasSelection",!1,p.N("editorHasSelection","Whether the editor has text selected")),O.hasOnlyEmptySelection=O.hasNonEmptySelection.toNegated(),O.hasMultipleSelections=new d.uy("editorHasMultipleSelections",!1,p.N("editorHasMultipleSelections","Whether the editor has multiple selections")),O.hasSingleSelection=O.hasMultipleSelections.toNegated(),O.tabMovesFocus=new d.uy("editorTabMovesFocus",!1,p.N("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),O.tabDoesNotMoveFocus=O.tabMovesFocus.toNegated(),O.isInWalkThroughSnippet=new d.uy("isInEmbeddedEditor",!1,!0),O.canUndo=new d.uy("canUndo",!1,!0),O.canRedo=new d.uy("canRedo",!1,!0),O.hoverVisible=new d.uy("editorHoverVisible",!1,p.N("editorHoverVisible","Whether the editor hover is visible")),O.inCompositeEditor=new d.uy("inCompositeEditor",void 0,p.N("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),O.notInCompositeEditor=O.inCompositeEditor.toNegated(),O.languageId=new d.uy("editorLangId","",p.N("editorLangId","The language identifier of the editor")),O.hasCompletionItemProvider=new d.uy("editorHasCompletionItemProvider",!1,p.N("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),O.hasCodeActionsProvider=new d.uy("editorHasCodeActionsProvider",!1,p.N("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),O.hasCodeLensProvider=new d.uy("editorHasCodeLensProvider",!1,p.N("editorHasCodeLensProvider","Whether the editor has a code lens provider")),O.hasDefinitionProvider=new d.uy("editorHasDefinitionProvider",!1,p.N("editorHasDefinitionProvider","Whether the editor has a definition provider")),O.hasDeclarationProvider=new d.uy("editorHasDeclarationProvider",!1,p.N("editorHasDeclarationProvider","Whether the editor has a declaration provider")),O.hasImplementationProvider=new d.uy("editorHasImplementationProvider",!1,p.N("editorHasImplementationProvider","Whether the editor has an implementation provider")),O.hasTypeDefinitionProvider=new d.uy("editorHasTypeDefinitionProvider",!1,p.N("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),O.hasHoverProvider=new d.uy("editorHasHoverProvider",!1,p.N("editorHasHoverProvider","Whether the editor has a hover provider")),O.hasDocumentHighlightProvider=new d.uy("editorHasDocumentHighlightProvider",!1,p.N("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),O.hasDocumentSymbolProvider=new d.uy("editorHasDocumentSymbolProvider",!1,p.N("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),O.hasReferenceProvider=new d.uy("editorHasReferenceProvider",!1,p.N("editorHasReferenceProvider","Whether the editor has a reference provider")),O.hasRenameProvider=new d.uy("editorHasRenameProvider",!1,p.N("editorHasRenameProvider","Whether the editor has a rename provider")),O.hasSignatureHelpProvider=new d.uy("editorHasSignatureHelpProvider",!1,p.N("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),O.hasInlayHintsProvider=new d.uy("editorHasInlayHintsProvider",!1,p.N("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),O.hasDocumentFormattingProvider=new d.uy("editorHasDocumentFormattingProvider",!1,p.N("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),O.hasDocumentSelectionFormattingProvider=new d.uy("editorHasDocumentSelectionFormattingProvider",!1,p.N("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),O.hasMultipleDocumentFormattingProvider=new d.uy("editorHasMultipleDocumentFormattingProvider",!1,p.N("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),O.hasMultipleDocumentSelectionFormattingProvider=new d.uy("editorHasMultipleDocumentSelectionFormattingProvider",!1,p.N("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(z||(z={}))},96887:function(Tt,me,a){"use strict";a.d(me,{mY:function(){return N},gX:function(){return D},MY:function(){return M},DI:function(){return g},AD:function(){return L},gl:function(){return b},bw:function(){return c},WW:function(){return C},uZ:function(){return _},WU:function(){return x},NX:function(){return F},RW:function(){return I},hG:function(){return v},vx:function(){return E}});var p=a(70666),d=a(24314),z=a(4669),O=a(9917),S=function(k,W,q,re){function de(pe){return pe instanceof q?pe:new q(function(ae){ae(pe)})}return new(q||(q=Promise))(function(pe,ae){function ue(U){try{K(re.next(U))}catch(ee){ae(ee)}}function te(U){try{K(re.throw(U))}catch(ee){ae(ee)}}function K(U){U.done?pe(U.value):de(U.value).then(ue,te)}K((re=re.apply(k,W||[])).next())})};class j{constructor(){this._map=new Map,this._factories=new Map,this._onDidChange=new z.Q5,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(W){this._onDidChange.fire({changedLanguages:W,changedColorMap:!1})}register(W,q){return this._map.set(W,q),this.fire([W]),(0,O.OF)(()=>{this._map.get(W)===q&&(this._map.delete(W),this.fire([W]))})}registerFactory(W,q){var re;(re=this._factories.get(W))===null||re===void 0||re.dispose();const de=new T(this,W,q);return this._factories.set(W,de),(0,O.OF)(()=>{const pe=this._factories.get(W);!pe||pe!==de||(this._factories.delete(W),pe.dispose())})}getOrCreate(W){return S(this,void 0,void 0,function*(){const q=this.get(W);if(q)return q;const re=this._factories.get(W);return!re||re.isResolved?null:(yield re.resolve(),this.get(W))})}get(W){return this._map.get(W)||null}isResolved(W){if(this.get(W))return!0;const re=this._factories.get(W);return!!(!re||re.isResolved)}setColorMap(W){this._colorMap=W,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class T extends O.JT{constructor(W,q,re){super();this._registry=W,this._languageId=q,this._factory=re,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return S(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return S(this,void 0,void 0,function*(){const W=yield Promise.resolve(this._factory.createTokenizationSupport());this._isResolved=!0,W&&!this._isDisposed&&this._register(this._registry.register(this._languageId,W))})}}var B=a(73046);class F{static getLanguageId(W){return(W&255)>>>0}static getTokenType(W){return(W&768)>>>8}static getFontStyle(W){return(W&15360)>>>10}static getForeground(W){return(W&8372224)>>>14}static getBackground(W){return(W&4286578688)>>>23}static getClassNameFromMetadata(W){const q=this.getForeground(W);let re="mtk"+q;const de=this.getFontStyle(W);return de&1&&(re+=" mtki"),de&2&&(re+=" mtkb"),de&4&&(re+=" mtku"),de&8&&(re+=" mtks"),re}static getInlineStyleFromMetadata(W,q){const re=this.getForeground(W),de=this.getFontStyle(W);let pe=`color: ${q[re]};`;de&1&&(pe+="font-style: italic;"),de&2&&(pe+="font-weight: bold;");let ae="";return de&4&&(ae+=" underline"),de&8&&(ae+=" line-through"),ae&&(pe+=`text-decoration:${ae};`),pe}static getPresentationFromMetadata(W){const q=this.getForeground(W),re=this.getFontStyle(W);return{foreground:q,italic:Boolean(re&1),bold:Boolean(re&2),underline:Boolean(re&4),strikethrough:Boolean(re&8)}}}class x{constructor(W,q,re){this._tokenBrand=void 0,this.offset=W,this.type=q,this.language=re}toString(){return"("+this.offset+", "+this.type+")"}}class v{constructor(W,q){this._tokenizationResultBrand=void 0,this.tokens=W,this.endState=q}}class g{constructor(W,q){this._encodedTokenizationResultBrand=void 0,this.tokens=W,this.endState=q}}var D;(function(k){const W=new Map;W.set(0,B.lA.symbolMethod),W.set(1,B.lA.symbolFunction),W.set(2,B.lA.symbolConstructor),W.set(3,B.lA.symbolField),W.set(4,B.lA.symbolVariable),W.set(5,B.lA.symbolClass),W.set(6,B.lA.symbolStruct),W.set(7,B.lA.symbolInterface),W.set(8,B.lA.symbolModule),W.set(9,B.lA.symbolProperty),W.set(10,B.lA.symbolEvent),W.set(11,B.lA.symbolOperator),W.set(12,B.lA.symbolUnit),W.set(13,B.lA.symbolValue),W.set(15,B.lA.symbolEnum),W.set(14,B.lA.symbolConstant),W.set(15,B.lA.symbolEnum),W.set(16,B.lA.symbolEnumMember),W.set(17,B.lA.symbolKeyword),W.set(27,B.lA.symbolSnippet),W.set(18,B.lA.symbolText),W.set(19,B.lA.symbolColor),W.set(20,B.lA.symbolFile),W.set(21,B.lA.symbolReference),W.set(22,B.lA.symbolCustomColor),W.set(23,B.lA.symbolFolder),W.set(24,B.lA.symbolTypeParameter),W.set(25,B.lA.account),W.set(26,B.lA.issues);function q(pe){let ae=W.get(pe);return ae||(console.info("No codicon found for CompletionItemKind "+pe),ae=B.lA.symbolProperty),ae}k.toIcon=q;const re=new Map;re.set("method",0),re.set("function",1),re.set("constructor",2),re.set("field",3),re.set("variable",4),re.set("class",5),re.set("struct",6),re.set("interface",7),re.set("module",8),re.set("property",9),re.set("event",10),re.set("operator",11),re.set("unit",12),re.set("value",13),re.set("constant",14),re.set("enum",15),re.set("enum-member",16),re.set("enumMember",16),re.set("keyword",17),re.set("snippet",27),re.set("text",18),re.set("color",19),re.set("file",20),re.set("reference",21),re.set("customcolor",22),re.set("folder",23),re.set("type-parameter",24),re.set("typeParameter",24),re.set("account",25),re.set("issue",26);function de(pe,ae){let ue=re.get(pe);return typeof ue=="undefined"&&!ae&&(ue=9),ue}k.fromString=de})(D||(D={}));var c;(function(k){k[k.Automatic=0]="Automatic",k[k.Explicit=1]="Explicit"})(c||(c={}));var C;(function(k){k[k.Invoke=1]="Invoke",k[k.TriggerCharacter=2]="TriggerCharacter",k[k.ContentChange=3]="ContentChange"})(C||(C={}));var M;(function(k){k[k.Text=0]="Text",k[k.Read=1]="Read",k[k.Write=2]="Write"})(M||(M={}));function E(k){return k&&p.o.isUri(k.uri)&&d.e.isIRange(k.range)&&(d.e.isIRange(k.originSelectionRange)||d.e.isIRange(k.targetSelectionRange))}var _;(function(k){const W=new Map;W.set(0,B.lA.symbolFile),W.set(1,B.lA.symbolModule),W.set(2,B.lA.symbolNamespace),W.set(3,B.lA.symbolPackage),W.set(4,B.lA.symbolClass),W.set(5,B.lA.symbolMethod),W.set(6,B.lA.symbolProperty),W.set(7,B.lA.symbolField),W.set(8,B.lA.symbolConstructor),W.set(9,B.lA.symbolEnum),W.set(10,B.lA.symbolInterface),W.set(11,B.lA.symbolFunction),W.set(12,B.lA.symbolVariable),W.set(13,B.lA.symbolConstant),W.set(14,B.lA.symbolString),W.set(15,B.lA.symbolNumber),W.set(16,B.lA.symbolBoolean),W.set(17,B.lA.symbolArray),W.set(18,B.lA.symbolObject),W.set(19,B.lA.symbolKey),W.set(20,B.lA.symbolNull),W.set(21,B.lA.symbolEnumMember),W.set(22,B.lA.symbolStruct),W.set(23,B.lA.symbolEvent),W.set(24,B.lA.symbolOperator),W.set(25,B.lA.symbolTypeParameter);function q(re){let de=W.get(re);return de||(console.info("No codicon found for SymbolKind "+re),de=B.lA.symbolProperty),de}k.toIcon=q})(_||(_={}));class L{constructor(W){this.value=W}}L.Comment=new L("comment"),L.Imports=new L("imports"),L.Region=new L("region");var N;(function(k){function W(q){return!q||typeof q!="object"?!1:typeof q.id=="string"&&typeof q.title=="string"}k.is=W})(N||(N={}));var b;(function(k){k[k.Type=1]="Type",k[k.Parameter=2]="Parameter"})(b||(b={}));const I=new j},72042:function(Tt,me,a){"use strict";a.d(me,{O:function(){return d}});var p=a(72065);const d=(0,p.yh)("languageService")},49119:function(Tt,me,a){"use strict";a.d(me,{wU:function(){return p},V6:function(){return d},c$:function(){return z}});var p;(function(S){S[S.None=0]="None",S[S.Indent=1]="Indent",S[S.IndentOutdent=2]="IndentOutdent",S[S.Outdent=3]="Outdent"})(p||(p={}));class d{constructor(j){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=j.open,this.close=j.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(j.notIn))for(let T=0,B=j.notIn.length;T<B;T++)switch(j.notIn[T]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(j){switch(j){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(j,T){if(j.getTokenCount()===0)return!0;const B=j.findTokenIndexAtOffset(T-2),F=j.getStandardTokenType(B);return this.isOK(F)}_findNeutralCharacterInRange(j,T){for(let B=j;B<=T;B++){const F=String.fromCharCode(B);if(!this.open.includes(F)&&!this.close.includes(F))return F}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class z{constructor(j){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const T of j)O(this.autoClosingPairsOpenByStart,T.open.charAt(0),T),O(this.autoClosingPairsOpenByEnd,T.open.charAt(T.open.length-1),T),O(this.autoClosingPairsCloseByStart,T.close.charAt(0),T),O(this.autoClosingPairsCloseByEnd,T.close.charAt(T.close.length-1),T),T.close.length===1&&T.open.length===1&&O(this.autoClosingPairsCloseSingleChar,T.close,T)}}function O(S,j,T){S.has(j)?S.get(j).push(T):S.set(j,[T])}},89381:function(Tt,me,a){"use strict";a.d(me,{c_:function(){return k},zu:function(){return te}});var p=a(4669),d=a(9917),z=a(25924),O=a(270),S=a(49119),j=a(19111);class T{constructor(oe){if(oe.autoClosingPairs?this._autoClosingPairs=oe.autoClosingPairs.map(Ce=>new S.V6(Ce)):oe.brackets?this._autoClosingPairs=oe.brackets.map(Ce=>new S.V6({open:Ce[0],close:Ce[1]})):this._autoClosingPairs=[],oe.colorizedBracketPairs?this._colorizedBracketPairs=B(oe.colorizedBracketPairs.map(Ce=>[Ce[0],Ce[1]])):oe.brackets?this._colorizedBracketPairs=B(oe.brackets.map(Ce=>[Ce[0],Ce[1]]).filter(Ce=>!(Ce[0]==="<"&&Ce[1]===">"))):this._colorizedBracketPairs=[],oe.__electricCharacterSupport&&oe.__electricCharacterSupport.docComment){const Ce=oe.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new S.V6({open:Ce.open,close:Ce.close||""}))}this._autoCloseBefore=typeof oe.autoCloseBefore=="string"?oe.autoCloseBefore:T.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=oe.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}T.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function B(le){return le.filter(([oe,Ce])=>oe!==""&&Ce!=="")}var F=a(9488),x=a(34302);class v{constructor(oe){this._richEditBrackets=oe}getElectricCharacters(){const oe=[];if(this._richEditBrackets)for(const Ce of this._richEditBrackets.brackets)for(const ye of Ce.close){const ke=ye.charAt(ye.length-1);oe.push(ke)}return(0,F.EB)(oe)}onElectricCharacter(oe,Ce,ye){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const ke=Ce.findTokenIndexAtOffset(ye-1);if((0,j.Bu)(Ce.getStandardTokenType(ke)))return null;const Te=this._richEditBrackets.reversedRegex,ge=Ce.getLineContent().substring(0,ye-1)+oe,we=x.Vr.findPrevBracketInRange(Te,1,ge,0,ge.length);if(!we)return null;const ze=ge.substring(we.startColumn-1,we.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[ze])return null;const Pe=Ce.getActualLineContentBefore(we.startColumn-1);return/^\s*$/.test(Pe)?{matchOpenBracket:ze}:null}}function g(le){return le.global&&(le.lastIndex=0),!0}class D{constructor(oe){this._indentationRules=oe}shouldIncrease(oe){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&g(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(oe))}shouldDecrease(oe){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&g(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(oe))}shouldIndentNextLine(oe){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&g(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(oe))}shouldIgnore(oe){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&g(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(oe))}getIndentMetadata(oe){let Ce=0;return this.shouldIncrease(oe)&&(Ce+=1),this.shouldDecrease(oe)&&(Ce+=2),this.shouldIndentNextLine(oe)&&(Ce+=4),this.shouldIgnore(oe)&&(Ce+=8),Ce}}var c=a(17301);class C{constructor(oe){oe=oe||{},oe.brackets=oe.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],oe.brackets.forEach(Ce=>{const ye=C._createOpenBracketRegExp(Ce[0]),ke=C._createCloseBracketRegExp(Ce[1]);ye&&ke&&this._brackets.push({open:Ce[0],openRegExp:ye,close:Ce[1],closeRegExp:ke})}),this._regExpRules=oe.onEnterRules||[]}onEnter(oe,Ce,ye,ke){if(oe>=3)for(let Te=0,ge=this._regExpRules.length;Te<ge;Te++){const we=this._regExpRules[Te];if([{reg:we.beforeText,text:ye},{reg:we.afterText,text:ke},{reg:we.previousLineText,text:Ce}].every(Qe=>Qe.reg?(Qe.reg.lastIndex=0,Qe.reg.test(Qe.text)):!0))return we.action}if(oe>=2&&ye.length>0&&ke.length>0)for(let Te=0,ge=this._brackets.length;Te<ge;Te++){const we=this._brackets[Te];if(we.openRegExp.test(ye)&&we.closeRegExp.test(ke))return{indentAction:S.wU.IndentOutdent}}if(oe>=2&&ye.length>0){for(let Te=0,ge=this._brackets.length;Te<ge;Te++)if(this._brackets[Te].openRegExp.test(ye))return{indentAction:S.wU.Indent}}return null}static _createOpenBracketRegExp(oe){let Ce=z.ec(oe);return/\B/.test(Ce.charAt(0))||(Ce="\\b"+Ce),Ce+="\\s*$",C._safeRegExp(Ce)}static _createCloseBracketRegExp(oe){let Ce=z.ec(oe);return/\B/.test(Ce.charAt(Ce.length-1))||(Ce=Ce+"\\b"),Ce="^\\s*"+Ce,C._safeRegExp(Ce)}static _safeRegExp(oe){try{return new RegExp(oe)}catch(Ce){return(0,c.dL)(Ce),null}}}var M=a(72065),E=a(33108),_=a(72042),L=a(65026),N=function(le,oe,Ce,ye){var ke=arguments.length,Te=ke<3?oe:ye===null?ye=Object.getOwnPropertyDescriptor(oe,Ce):ye,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Te=Reflect.decorate(le,oe,Ce,ye);else for(var we=le.length-1;we>=0;we--)(ge=le[we])&&(Te=(ke<3?ge(Te):ke>3?ge(oe,Ce,Te):ge(oe,Ce))||Te);return ke>3&&Te&&Object.defineProperty(oe,Ce,Te),Te},b=function(le,oe){return function(Ce,ye){oe(Ce,ye,le)}};class I{constructor(oe){this.languageId=oe}affects(oe){return this.languageId?this.languageId===oe:!0}}const k=(0,M.yh)("languageConfigurationService");let W=class extends d.JT{constructor(oe,Ce){super();this.configurationService=oe,this.languageService=Ce,this.onDidChangeEmitter=this._register(new p.Q5),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const ye=new Set(Object.values(re));this._register(this.configurationService.onDidChangeConfiguration(ke=>{const Te=ke.change.keys.some(we=>ye.has(we)),ge=ke.change.overrides.filter(([we,ze])=>ze.some(Qe=>ye.has(Qe))).map(([we])=>we);if(Te)this.configurations.clear(),this.onDidChangeEmitter.fire(new I(void 0));else for(const we of ge)this.languageService.isRegisteredLanguageId(we)&&(this.configurations.delete(we),this.onDidChangeEmitter.fire(new I(we)))})),this._register(te.onDidChange(ke=>{this.configurations.delete(ke.languageId),this.onDidChangeEmitter.fire(new I(ke.languageId))}))}getLanguageConfiguration(oe){let Ce=this.configurations.get(oe);return Ce||(Ce=q(oe,this.configurationService,this.languageService),this.configurations.set(oe,Ce)),Ce}};W=N([b(0,E.Ui),b(1,_.O)],W);function q(le,oe,Ce){let ye=te.getLanguageConfiguration(le);if(!ye){if(!Ce.isRegisteredLanguageId(le))throw new Error(`Language id "${le}" is not configured nor known`);ye=new X(le,{})}const ke=de(ye.languageId,oe),Te=U([ye.underlyingConfig,ke]);return new X(ye.languageId,Te)}const re={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function de(le,oe){const Ce=oe.getValue(re.brackets,{overrideIdentifier:le}),ye=oe.getValue(re.colorizedBracketPairs,{overrideIdentifier:le});return{brackets:pe(Ce),colorizedBracketPairs:pe(ye)}}function pe(le){if(!!Array.isArray(le))return le.map(oe=>{if(!(!Array.isArray(oe)||oe.length!==2))return[oe[0],oe[1]]}).filter(oe=>!!oe)}class ae{constructor(oe){this.languageId=oe}}class ue{constructor(){this._entries=new Map,this._onDidChange=new p.Q5,this.onDidChange=this._onDidChange.event}register(oe,Ce,ye=0){let ke=this._entries.get(oe);ke||(ke=new K(oe),this._entries.set(oe,ke));const Te=ke.register(Ce,ye);return this._onDidChange.fire(new ae(oe)),(0,d.OF)(()=>{Te.dispose(),this._onDidChange.fire(new ae(oe))})}getLanguageConfiguration(oe){const Ce=this._entries.get(oe);return(Ce==null?void 0:Ce.getResolvedConfiguration())||null}getComments(oe){const Ce=this.getLanguageConfiguration(oe);return Ce&&Ce.comments||null}getIndentRulesSupport(oe){const Ce=this.getLanguageConfiguration(oe);return Ce&&Ce.indentRulesSupport||null}getPrecedingValidLine(oe,Ce,ye){const ke=oe.getLanguageIdAtPosition(Ce,0);if(Ce>1){let Te,ge=-1;for(Te=Ce-1;Te>=1;Te--){if(oe.getLanguageIdAtPosition(Te,0)!==ke)return ge;const we=oe.getLineContent(Te);if(ye.shouldIgnore(we)||/^\s+$/.test(we)||we===""){ge=Te;continue}return Te}}return-1}getInheritIndentForLine(oe,Ce,ye,ke=!0){if(oe<4)return null;const Te=this.getIndentRulesSupport(Ce.getLanguageId());if(!Te)return null;if(ye<=1)return{indentation:"",action:null};const ge=this.getPrecedingValidLine(Ce,ye,Te);if(ge<0)return null;if(ge<1)return{indentation:"",action:null};const we=Ce.getLineContent(ge);if(Te.shouldIncrease(we)||Te.shouldIndentNextLine(we))return{indentation:z.V8(we),action:S.wU.Indent,line:ge};if(Te.shouldDecrease(we))return{indentation:z.V8(we),action:null,line:ge};{if(ge===1)return{indentation:z.V8(Ce.getLineContent(ge)),action:null,line:ge};const ze=ge-1,Qe=Te.getIndentMetadata(Ce.getLineContent(ze));if(!(Qe&(1|2))&&Qe&4){let Pe=0;for(let Oe=ze-1;Oe>0;Oe--)if(!Te.shouldIndentNextLine(Ce.getLineContent(Oe))){Pe=Oe;break}return{indentation:z.V8(Ce.getLineContent(Pe+1)),action:null,line:Pe+1}}if(ke)return{indentation:z.V8(Ce.getLineContent(ge)),action:null,line:ge};for(let Pe=ge;Pe>0;Pe--){const Oe=Ce.getLineContent(Pe);if(Te.shouldIncrease(Oe))return{indentation:z.V8(Oe),action:S.wU.Indent,line:Pe};if(Te.shouldIndentNextLine(Oe)){let qe=0;for(let Je=Pe-1;Je>0;Je--)if(!Te.shouldIndentNextLine(Ce.getLineContent(Pe))){qe=Je;break}return{indentation:z.V8(Ce.getLineContent(qe+1)),action:null,line:qe+1}}else if(Te.shouldDecrease(Oe))return{indentation:z.V8(Oe),action:null,line:Pe}}return{indentation:z.V8(Ce.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(oe,Ce,ye,ke,Te){if(oe<4)return null;const ge=this.getLanguageConfiguration(ye);if(!ge)return null;const we=this.getIndentRulesSupport(ye);if(!we)return null;const ze=this.getInheritIndentForLine(oe,Ce,ke),Qe=Ce.getLineContent(ke);if(ze){const Pe=ze.line;if(Pe!==void 0){const Oe=ge.onEnter(oe,"",Ce.getLineContent(Pe),"");if(Oe){let qe=z.V8(Ce.getLineContent(Pe));return Oe.removeText&&(qe=qe.substring(0,qe.length-Oe.removeText)),Oe.indentAction===S.wU.Indent||Oe.indentAction===S.wU.IndentOutdent?qe=Te.shiftIndent(qe):Oe.indentAction===S.wU.Outdent&&(qe=Te.unshiftIndent(qe)),we.shouldDecrease(Qe)&&(qe=Te.unshiftIndent(qe)),Oe.appendText&&(qe+=Oe.appendText),z.V8(qe)}}return we.shouldDecrease(Qe)?ze.action===S.wU.Indent?ze.indentation:Te.unshiftIndent(ze.indentation):ze.action===S.wU.Indent?Te.shiftIndent(ze.indentation):ze.indentation}return null}getIndentForEnter(oe,Ce,ye,ke){if(oe<4)return null;Ce.forceTokenization(ye.startLineNumber);const Te=Ce.getLineTokens(ye.startLineNumber),ge=(0,j.wH)(Te,ye.startColumn-1),we=ge.getLineContent();let ze=!1,Qe;ge.firstCharOffset>0&&Te.getLanguageId(0)!==ge.languageId?(ze=!0,Qe=we.substr(0,ye.startColumn-1-ge.firstCharOffset)):Qe=Te.getLineContent().substring(0,ye.startColumn-1);let Pe;ye.isEmpty()?Pe=we.substr(ye.startColumn-1-ge.firstCharOffset):Pe=this.getScopedLineTokens(Ce,ye.endLineNumber,ye.endColumn).getLineContent().substr(ye.endColumn-1-ge.firstCharOffset);const Oe=this.getIndentRulesSupport(ge.languageId);if(!Oe)return null;const qe=Qe,Je=z.V8(Qe),Ne={getLineTokens:ie=>Ce.getLineTokens(ie),getLanguageId:()=>Ce.getLanguageId(),getLanguageIdAtPosition:(ie,xe)=>Ce.getLanguageIdAtPosition(ie,xe),getLineContent:ie=>ie===ye.startLineNumber?qe:Ce.getLineContent(ie)},Fe=z.V8(Te.getLineContent()),ne=this.getInheritIndentForLine(oe,Ne,ye.startLineNumber+1);if(!ne){const ie=ze?Fe:Je;return{beforeEnter:ie,afterEnter:ie}}let Q=ze?Fe:ne.indentation;return ne.action===S.wU.Indent&&(Q=ke.shiftIndent(Q)),Oe.shouldDecrease(Pe)&&(Q=ke.unshiftIndent(Q)),{beforeEnter:ze?Fe:Je,afterEnter:Q}}getIndentActionForType(oe,Ce,ye,ke,Te){if(oe<4)return null;const ge=this.getScopedLineTokens(Ce,ye.startLineNumber,ye.startColumn);if(ge.firstCharOffset)return null;const we=this.getIndentRulesSupport(ge.languageId);if(!we)return null;const ze=ge.getLineContent(),Qe=ze.substr(0,ye.startColumn-1-ge.firstCharOffset);let Pe;if(ye.isEmpty()?Pe=ze.substr(ye.startColumn-1-ge.firstCharOffset):Pe=this.getScopedLineTokens(Ce,ye.endLineNumber,ye.endColumn).getLineContent().substr(ye.endColumn-1-ge.firstCharOffset),!we.shouldDecrease(Qe+Pe)&&we.shouldDecrease(Qe+ke+Pe)){const Oe=this.getInheritIndentForLine(oe,Ce,ye.startLineNumber,!1);if(!Oe)return null;let qe=Oe.indentation;return Oe.action!==S.wU.Indent&&(qe=Te.unshiftIndent(qe)),qe}return null}getIndentMetadata(oe,Ce){const ye=this.getIndentRulesSupport(oe.getLanguageId());return!ye||Ce<1||Ce>oe.getLineCount()?null:ye.getIndentMetadata(oe.getLineContent(Ce))}getEnterAction(oe,Ce,ye){const ke=this.getScopedLineTokens(Ce,ye.startLineNumber,ye.startColumn),Te=this.getLanguageConfiguration(ke.languageId);if(!Te)return null;const ge=ke.getLineContent(),we=ge.substr(0,ye.startColumn-1-ke.firstCharOffset);let ze;ye.isEmpty()?ze=ge.substr(ye.startColumn-1-ke.firstCharOffset):ze=this.getScopedLineTokens(Ce,ye.endLineNumber,ye.endColumn).getLineContent().substr(ye.endColumn-1-ke.firstCharOffset);let Qe="";if(ye.startLineNumber>1&&ke.firstCharOffset===0){const Fe=this.getScopedLineTokens(Ce,ye.startLineNumber-1);Fe.languageId===ke.languageId&&(Qe=Fe.getLineContent())}const Pe=Te.onEnter(oe,Qe,we,ze);if(!Pe)return null;const Oe=Pe.indentAction;let qe=Pe.appendText;const Je=Pe.removeText||0;qe?Oe===S.wU.Indent&&(qe="	"+qe):Oe===S.wU.Indent||Oe===S.wU.IndentOutdent?qe="	":qe="";let Ne=this.getIndentationAtPosition(Ce,ye.startLineNumber,ye.startColumn);return Je&&(Ne=Ne.substring(0,Ne.length-Je)),{indentAction:Oe,appendText:qe,removeText:Je,indentation:Ne}}getIndentationAtPosition(oe,Ce,ye){const ke=oe.getLineContent(Ce);let Te=z.V8(ke);return Te.length>ye-1&&(Te=Te.substring(0,ye-1)),Te}getScopedLineTokens(oe,Ce,ye){oe.forceTokenization(Ce);const ke=oe.getLineTokens(Ce),Te=typeof ye=="undefined"?oe.getLineMaxColumn(Ce)-1:ye-1;return(0,j.wH)(ke,Te)}}const te=new ue;class K{constructor(oe){this.languageId=oe,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(oe,Ce){const ye=new ee(oe,Ce,++this._order);return this._entries.push(ye),this._resolved=null,(0,d.OF)(()=>{for(let ke=0;ke<this._entries.length;ke++)if(this._entries[ke]===ye){this._entries.splice(ke,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const oe=this._resolve();oe&&(this._resolved=new X(this.languageId,oe))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(ee.cmp),U(this._entries.map(oe=>oe.configuration)))}}function U(le){let oe={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const Ce of le)oe={comments:Ce.comments||oe.comments,brackets:Ce.brackets||oe.brackets,wordPattern:Ce.wordPattern||oe.wordPattern,indentationRules:Ce.indentationRules||oe.indentationRules,onEnterRules:Ce.onEnterRules||oe.onEnterRules,autoClosingPairs:Ce.autoClosingPairs||oe.autoClosingPairs,surroundingPairs:Ce.surroundingPairs||oe.surroundingPairs,autoCloseBefore:Ce.autoCloseBefore||oe.autoCloseBefore,folding:Ce.folding||oe.folding,colorizedBracketPairs:Ce.colorizedBracketPairs||oe.colorizedBracketPairs,__electricCharacterSupport:Ce.__electricCharacterSupport||oe.__electricCharacterSupport};return oe}class ee{constructor(oe,Ce,ye){this.configuration=oe,this.priority=Ce,this.order=ye}static cmp(oe,Ce){return oe.priority===Ce.priority?oe.order-Ce.order:oe.priority-Ce.priority}}class X{constructor(oe,Ce){this.languageId=oe,this.underlyingConfig=Ce,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new C(this.underlyingConfig):null,this.comments=X._handleComments(this.underlyingConfig),this.characterPair=new T(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||O.Af,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new D(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return(0,O.eq)(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new x.EA(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new v(this.brackets)),this._electricCharacter}onEnter(oe,Ce,ye,ke){return this._onEnterSupport?this._onEnterSupport.onEnter(oe,Ce,ye,ke):null}getAutoClosingPairs(){return new S.c$(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet()}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(oe){const Ce=oe.comments;if(!Ce)return null;const ye={};if(Ce.lineComment&&(ye.lineCommentToken=Ce.lineComment),Ce.blockComment){const[ke,Te]=Ce.blockComment;ye.blockCommentStartToken=ke,ye.blockCommentEndToken=Te}return ye}}(0,L.z)(k,W)},68801:function(Tt,me,a){"use strict";a.d(me,{dQ:function(){return F},bd:function(){return x}});var p=a(63580),d=a(4669),z=a(89381),O=a(89872),S=a(81170),j=a(23193);const T={ModesRegistry:"editor.modesRegistry"};class B{constructor(){this._onDidChangeLanguages=new d.Q5,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(D){return this._languages.push(D),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let c=0,C=this._languages.length;c<C;c++)if(this._languages[c]===D){this._languages.splice(c,1);return}}}}getLanguages(){return this._languages}}const F=new B;O.B.add(T.ModesRegistry,F);const x="plaintext",v=".txt";F.registerLanguage({id:x,extensions:[v],aliases:[p.N("plainText.alias","Plain Text"),"text"],mimetypes:[S.v.text]}),z.zu.register(x,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0),O.B.as(j.IP.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}])},276:function(Tt,me,a){"use strict";a.d(me,{TJ:function(){return d},Ri:function(){return z},Dy:function(){return O}});var p=a(96887);const d=new class{clone(){return this}equals(S){return this===S}};function z(S,j){return new p.hG([new p.WU(0,"",S)],j)}function O(S,j){const T=new Uint32Array(2);return T[0]=0,T[1]=(S<<0|0<<8|0<<10|1<<14|2<<23)>>>0,new p.DI(T,j===null?d:j)}},19111:function(Tt,me,a){"use strict";a.d(me,{wH:function(){return p},Bu:function(){return z}});function p(O,S){const j=O.getCount(),T=O.findTokenIndexAtOffset(S),B=O.getLanguageId(T);let F=T;for(;F+1<j&&O.getLanguageId(F+1)===B;)F++;let x=T;for(;x>0&&O.getLanguageId(x-1)===B;)x--;return new d(O,B,x,F+1,O.getStartOffset(x),O.getEndOffset(F))}class d{constructor(S,j,T,B,F,x){this._scopedLineTokensBrand=void 0,this._actual=S,this.languageId=j,this._firstTokenIndex=T,this._lastTokenIndex=B,this.firstCharOffset=F,this._lastCharOffset=x}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(S){return this._actual.getLineContent().substring(0,this.firstCharOffset+S)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(S){return this._actual.findTokenIndexAtOffset(S+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(S){return this._actual.getStandardTokenType(S+this._firstTokenIndex)}}function z(O){return(O&3)!=0}},34302:function(Tt,me,a){"use strict";a.d(me,{EA:function(){return j},Vr:function(){return E}});var p=a(25924),d=a(50072),z=a(24314);class O{constructor(L,N,b,I,k,W){this._richEditBracketBrand=void 0,this.languageId=L,this.index=N,this.open=b,this.close=I,this.forwardRegex=k,this.reversedRegex=W,this._openSet=O._toSet(this.open),this._closeSet=O._toSet(this.close)}isOpen(L){return this._openSet.has(L)}isClose(L){return this._closeSet.has(L)}static _toSet(L){const N=new Set;for(const b of L)N.add(b);return N}}function S(_){const L=_.length;_=_.map(W=>[W[0].toLowerCase(),W[1].toLowerCase()]);const N=[];for(let W=0;W<L;W++)N[W]=W;const b=(W,q)=>{const[re,de]=W,[pe,ae]=q;return re===pe||re===ae||de===pe||de===ae},I=(W,q)=>{const re=Math.min(W,q),de=Math.max(W,q);for(let pe=0;pe<L;pe++)N[pe]===de&&(N[pe]=re)};for(let W=0;W<L;W++){const q=_[W];for(let re=W+1;re<L;re++){const de=_[re];b(q,de)&&I(N[W],N[re])}}const k=[];for(let W=0;W<L;W++){const q=[],re=[];for(let de=0;de<L;de++)if(N[de]===W){const[pe,ae]=_[de];q.push(pe),re.push(ae)}q.length>0&&k.push({open:q,close:re})}return k}class j{constructor(L,N){this._richEditBracketsBrand=void 0;const b=S(N);this.brackets=b.map((I,k)=>new O(L,k,I.open,I.close,x(I.open,I.close,b,k),v(I.open,I.close,b,k))),this.forwardRegex=g(this.brackets),this.reversedRegex=D(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const I of this.brackets){for(const k of I.open)this.textIsBracket[k]=I,this.textIsOpenBracket[k]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,k.length);for(const k of I.close)this.textIsBracket[k]=I,this.textIsOpenBracket[k]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,k.length)}}}function T(_,L,N,b){for(let I=0,k=L.length;I<k;I++){if(I===N)continue;const W=L[I];for(const q of W.open)q.indexOf(_)>=0&&b.push(q);for(const q of W.close)q.indexOf(_)>=0&&b.push(q)}}function B(_,L){return _.length-L.length}function F(_){if(_.length<=1)return _;const L=[],N=new Set;for(const b of _)N.has(b)||(L.push(b),N.add(b));return L}function x(_,L,N,b){let I=[];I=I.concat(_),I=I.concat(L);for(let k=0,W=I.length;k<W;k++)T(I[k],N,b,I);return I=F(I),I.sort(B),I.reverse(),C(I)}function v(_,L,N,b){let I=[];I=I.concat(_),I=I.concat(L);for(let k=0,W=I.length;k<W;k++)T(I[k],N,b,I);return I=F(I),I.sort(B),I.reverse(),C(I.map(M))}function g(_){let L=[];for(const N of _){for(const b of N.open)L.push(b);for(const b of N.close)L.push(b)}return L=F(L),C(L)}function D(_){let L=[];for(const N of _){for(const b of N.open)L.push(b);for(const b of N.close)L.push(b)}return L=F(L),C(L.map(M))}function c(_){const L=/^[\w ]+$/.test(_);return _=p.ec(_),L?`\\b${_}\\b`:_}function C(_){const L=`(${_.map(c).join(")|(")})`;return p.GF(L,!0)}const M=function(){function _(b){if(d.lZ){const I=new Uint16Array(b.length);let k=0;for(let W=b.length-1;W>=0;W--)I[k++]=b.charCodeAt(W);return d.oe().decode(I)}else{const I=[];let k=0;for(let W=b.length-1;W>=0;W--)I[k++]=b.charAt(W);return I.join("")}}let L=null,N=null;return function(I){return L!==I&&(L=I,N=_(L)),N}}();class E{static _findPrevBracketInText(L,N,b,I){const k=b.match(L);if(!k)return null;const W=b.length-(k.index||0),q=k[0].length,re=I+W;return new z.e(N,re-q+1,N,re+1)}static findPrevBracketInRange(L,N,b,I,k){const q=M(b).substring(b.length-k,b.length-I);return this._findPrevBracketInText(L,N,q,I)}static findNextBracketInText(L,N,b,I){const k=b.match(L);if(!k)return null;const W=k.index||0,q=k[0].length;if(q===0)return null;const re=I+W;return new z.e(N,re+1,N,re+1+q)}static findNextBracketInRange(L,N,b,I,k){const W=b.substring(I,k);return this.findNextBracketInText(L,N,W,I)}}},82963:function(Tt,me,a){"use strict";a.d(me,{C2:function(){return T},Fq:function(){return B}});var p=a(25924),d=a(77378),z=a(96887),O=a(276),S=function(x,v,g,D){function c(C){return C instanceof g?C:new g(function(M){M(C)})}return new(g||(g=Promise))(function(C,M){function E(N){try{L(D.next(N))}catch(b){M(b)}}function _(N){try{L(D.throw(N))}catch(b){M(b)}}function L(N){N.done?C(N.value):c(N.value).then(E,_)}L((D=D.apply(x,v||[])).next())})};const j={getInitialState:()=>O.TJ,tokenizeEncoded:(x,v,g)=>(0,O.Dy)(0,g)};function T(x,v,g){return S(this,void 0,void 0,function*(){if(!g)return F(v,x.languageIdCodec,j);const D=yield z.RW.getOrCreate(g);return F(v,x.languageIdCodec,D||j)})}function B(x,v,g,D,c,C,M){let E="<div>",_=D,L=0,N=!0;for(let b=0,I=v.getCount();b<I;b++){const k=v.getEndOffset(b);if(k<=D)continue;let W="";for(;_<k&&_<c;_++){const q=x.charCodeAt(_);switch(q){case 9:{let re=C-(_+L)%C;for(L+=re-1;re>0;)M&&N?(W+="&#160;",N=!1):(W+=" ",N=!0),re--;break}case 60:W+="&lt;",N=!1;break;case 62:W+="&gt;",N=!1;break;case 38:W+="&amp;",N=!1;break;case 0:W+="&#00;",N=!1;break;case 65279:case 8232:case 8233:case 133:W+="\uFFFD",N=!1;break;case 13:W+="&#8203",N=!1;break;case 32:M&&N?(W+="&#160;",N=!1):(W+=" ",N=!0);break;default:W+=String.fromCharCode(q),N=!1}}if(E+=`<span style="${v.getInlineStyle(b,g)}">${W}</span>`,k>c||_>=c)break}return E+="</div>",E}function F(x,v,g){let D='<div class="monaco-tokenized-source">';const c=p.uq(x);let C=g.getInitialState();for(let M=0,E=c.length;M<E;M++){const _=c[M];M>0&&(D+="<br/>");const L=g.tokenizeEncoded(_,!0,C);d.A.convertToEndOffset(L.tokens,_.length);const b=new d.A(L.tokens,_,v).inflate();let I=0;for(let k=0,W=b.getCount();k<W;k++){const q=b.getClassName(k),re=b.getEndOffset(k);D+=`<span class="${q}">${p.YU(_.substring(I,re))}</span>`,I=re}C=L.endState}return D+="</div>",D}},84973:function(Tt,me,a){"use strict";a.d(me,{sh:function(){return d},F5:function(){return z},RM:function(){return O},dJ:function(){return S},tk:function(){return j},Qi:function(){return T},Tx:function(){return B},je:function(){return F},pt:function(){return x}});var p=a(36248),d;(function(v){v[v.Left=1]="Left",v[v.Center=2]="Center",v[v.Right=4]="Right",v[v.Full=7]="Full"})(d||(d={}));var z;(function(v){v[v.Inline=1]="Inline",v[v.Gutter=2]="Gutter"})(z||(z={}));var O;(function(v){v[v.Both=0]="Both",v[v.Right=1]="Right",v[v.Left=2]="Left",v[v.None=3]="None"})(O||(O={}));class S{constructor(g){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,g.tabSize|0),this.indentSize=g.tabSize|0,this.insertSpaces=Boolean(g.insertSpaces),this.defaultEOL=g.defaultEOL|0,this.trimAutoWhitespace=Boolean(g.trimAutoWhitespace),this.bracketPairColorizationOptions=g.bracketPairColorizationOptions}equals(g){return this.tabSize===g.tabSize&&this.indentSize===g.indentSize&&this.insertSpaces===g.insertSpaces&&this.defaultEOL===g.defaultEOL&&this.trimAutoWhitespace===g.trimAutoWhitespace&&(0,p.fS)(this.bracketPairColorizationOptions,g.bracketPairColorizationOptions)}createChangeEvent(g){return{tabSize:this.tabSize!==g.tabSize,indentSize:this.indentSize!==g.indentSize,insertSpaces:this.insertSpaces!==g.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==g.trimAutoWhitespace}}}class j{constructor(g,D){this._findMatchBrand=void 0,this.range=g,this.matches=D}}class T{constructor(g,D,c,C,M,E){this.identifier=g,this.range=D,this.text=c,this.forceMoveMarkers=C,this.isAutoWhitespaceEdit=M,this._isTracked=E}}class B{constructor(g,D,c){this.regex=g,this.wordSeparators=D,this.simpleSearch=c}}class F{constructor(g,D,c){this.reverseEdits=g,this.changes=D,this.trimAutoWhitespaceLineNumbers=c}}function x(v){return!v.isTooLargeForSyncing()&&!v.isForSimpleWidget}},41720:function(Tt,me,a){"use strict";a.d(me,{Kd:function(){return S},Y0:function(){return j},BH:function(){return D},n2:function(){return c},Dm:function(){return C}});var p=a(7988),d=a(45035),z=a(61761);class O{constructor(E){this._length=E}get length(){return this._length}}class S extends O{constructor(E,_,L,N,b){super(E);this.openingBracket=_,this.child=L,this.closingBracket=N,this.missingOpeningBracketIds=b}static create(E,_,L){let N=E.length;return _&&(N=(0,d.Ii)(N,_.length)),L&&(N=(0,d.Ii)(N,L.length)),new S(N,E,_,L,_?_.missingOpeningBracketIds:z.tS.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(E){switch(E){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const E=new Array;return E.push(this.openingBracket),this.child&&E.push(this.child),this.closingBracket&&E.push(this.closingBracket),E}canBeReused(E){return!(this.closingBracket===null||E.intersects(this.missingOpeningBracketIds))}deepClone(){return new S(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(E,_){return this.child?this.child.computeMinIndentation((0,d.Ii)(E,this.openingBracket.length),_):Number.MAX_SAFE_INTEGER}}class j extends O{constructor(E,_,L){super(E);this.listHeight=_,this._missingOpeningBracketIds=L,this.cachedMinIndentation=-1}static create23(E,_,L,N=!1){let b=E.length,I=E.missingOpeningBracketIds;if(E.listHeight!==_.listHeight)throw new Error("Invalid list heights");if(b=(0,d.Ii)(b,_.length),I=I.merge(_.missingOpeningBracketIds),L){if(E.listHeight!==L.listHeight)throw new Error("Invalid list heights");b=(0,d.Ii)(b,L.length),I=I.merge(L.missingOpeningBracketIds)}return N?new B(b,E.listHeight+1,E,_,L,I):new T(b,E.listHeight+1,E,_,L,I)}static getEmpty(){return new x(d.xl,0,[],z.tS.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const E=this.childrenLength;if(E===0)return;const _=this.getChild(E-1),L=_.kind===4?_.toMutable():_;return _!==L&&this.setChild(E-1,L),L}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const _=this.getChild(0),L=_.kind===4?_.toMutable():_;return _!==L&&this.setChild(0,L),L}canBeReused(E){if(E.intersects(this.missingOpeningBracketIds))return!1;let _=this,L;for(;_.kind===4&&(L=_.childrenLength)>0;)_=_.getChild(L-1);return _.canBeReused(E)}handleChildrenChanged(){this.throwIfImmutable();const E=this.childrenLength;let _=this.getChild(0).length,L=this.getChild(0).missingOpeningBracketIds;for(let N=1;N<E;N++){const b=this.getChild(N);_=(0,d.Ii)(_,b.length),L=L.merge(b.missingOpeningBracketIds)}this._length=_,this._missingOpeningBracketIds=L,this.cachedMinIndentation=-1}computeMinIndentation(E,_){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let L=Number.MAX_SAFE_INTEGER,N=E;for(let b=0;b<this.childrenLength;b++){const I=this.getChild(b);I&&(L=Math.min(L,I.computeMinIndentation(N,_)),N=(0,d.Ii)(N,I.length))}return this.cachedMinIndentation=L,L}}class T extends j{constructor(E,_,L,N,b,I){super(E,_,I);this._item1=L,this._item2=N,this._item3=b}get childrenLength(){return this._item3!==null?3:2}getChild(E){switch(E){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(E,_){switch(E){case 0:this._item1=_;return;case 1:this._item2=_;return;case 2:this._item3=_;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new T(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(E){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=E,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const E=this._item3;return this._item3=null,this.handleChildrenChanged(),E}prependChildOfSameHeight(E){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=E,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const E=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),E}toMutable(){return this}}class B extends T{toMutable(){return new T(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class F extends j{constructor(E,_,L,N){super(E,_,N);this._children=L}get childrenLength(){return this._children.length}getChild(E){return this._children[E]}setChild(E,_){this._children[E]=_}get children(){return this._children}deepClone(){const E=new Array(this._children.length);for(let _=0;_<this._children.length;_++)E[_]=this._children[_].deepClone();return new F(this.length,this.listHeight,E,this.missingOpeningBracketIds)}appendChildOfSameHeight(E){this.throwIfImmutable(),this._children.push(E),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const E=this._children.pop();return this.handleChildrenChanged(),E}prependChildOfSameHeight(E){this.throwIfImmutable(),this._children.unshift(E),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const E=this._children.shift();return this.handleChildrenChanged(),E}toMutable(){return this}}class x extends F{toMutable(){return new F(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const v=[];class g extends O{get listHeight(){return 0}get childrenLength(){return 0}getChild(E){return null}get children(){return v}deepClone(){return this}}class D extends g{get kind(){return 0}get missingOpeningBracketIds(){return z.tS.getEmpty()}canBeReused(E){return!0}computeMinIndentation(E,_){const L=(0,d.Hw)(E),N=(L.columnCount===0?L.lineCount:L.lineCount+1)+1,b=(0,d.W9)((0,d.Ii)(E,this.length))+1;let I=Number.MAX_SAFE_INTEGER;for(let k=N;k<=b;k++){const W=_.getLineFirstNonWhitespaceColumn(k),q=_.getLineContent(k);if(W===0)continue;const re=p.i.visibleColumnFromColumn(q,W,_.getOptions().tabSize);I=Math.min(I,re)}return I}}class c extends g{constructor(E,_,L){super(E);this.languageId=_,this.bracketIds=L}static create(E,_,L){return new c(E,_,L)}get kind(){return 1}get missingOpeningBracketIds(){return z.tS.getEmpty()}canBeReused(E){return!1}computeMinIndentation(E,_){return Number.MAX_SAFE_INTEGER}}class C extends g{constructor(E,_){super(_);this.missingOpeningBracketIds=E}get kind(){return 3}canBeReused(E){return!E.intersects(this.missingOpeningBracketIds)}computeMinIndentation(E,_){return Number.MAX_SAFE_INTEGER}}},2442:function(Tt,me,a){"use strict";a.d(me,{Q:function(){return d},Y:function(){return z}});var p=a(45035);class d{constructor(j,T,B){this.startOffset=j,this.endOffset=T,this.newLength=B}}class z{constructor(j,T){this.documentLength=T,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=j.map(B=>O.from(B))}getOffsetBeforeChange(j){return this.adjustNextEdit(j),this.translateCurToOld(j)}getDistanceToNextChange(j){this.adjustNextEdit(j);const T=this.edits[this.nextEditIdx],B=T?this.translateOldToCur(T.offsetObj):this.documentLength;return(0,p.BE)(j,B)}translateOldToCur(j){return j.lineCount===this.deltaLineIdxInOld?(0,p.Hg)(j.lineCount+this.deltaOldToNewLineCount,j.columnCount+this.deltaOldToNewColumnCount):(0,p.Hg)(j.lineCount+this.deltaOldToNewLineCount,j.columnCount)}translateCurToOld(j){const T=(0,p.Hw)(j);return T.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?(0,p.Hg)(T.lineCount-this.deltaOldToNewLineCount,T.columnCount-this.deltaOldToNewColumnCount):(0,p.Hg)(T.lineCount-this.deltaOldToNewLineCount,T.columnCount)}adjustNextEdit(j){for(;this.nextEditIdx<this.edits.length;){const T=this.edits[this.nextEditIdx],B=this.translateOldToCur(T.endOffsetAfterObj);if((0,p.By)(B,j)){this.nextEditIdx++;const F=(0,p.Hw)(B),x=(0,p.Hw)(this.translateOldToCur(T.endOffsetBeforeObj)),v=F.lineCount-x.lineCount;this.deltaOldToNewLineCount+=v;const g=this.deltaLineIdxInOld===T.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,D=F.columnCount-x.columnCount;this.deltaOldToNewColumnCount=g+D,this.deltaLineIdxInOld=T.endOffsetBeforeObj.lineCount}else break}}}class O{constructor(j,T,B){this.endOffsetBeforeObj=(0,p.Hw)(T),this.endOffsetAfterObj=(0,p.Hw)((0,p.Ii)(j,B)),this.offsetObj=(0,p.Hw)(j)}static from(j){return new O(j.startOffset,j.endOffset,j.newLength)}}},35382:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return B}});var p=a(25924),d=a(41720),z=a(45035),O=a(61761),S=a(6735);class j{constructor(x){this.map=x,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(x,v){function g(E,_){return v.getKey(`${E}:::${_}`)}const D=x.characterPair.getColorizedBrackets(),c=new Map,C=new Set;for(const[E,_]of D){C.add(E);let L=c.get(_);const N=g(x.languageId,E);L||(L={openingBrackets:O.tS.getEmpty(),first:N},c.set(_,L)),L.openingBrackets=L.openingBrackets.add(N,O.Qw)}const M=new Map;for(const[E,_]of c){const L=(0,z.Hg)(0,E.length);M.set(E,new S.WU(L,2,_.first,_.openingBrackets,d.n2.create(L,x.languageId,_.openingBrackets)))}for(const E of C){const _=(0,z.Hg)(0,E.length),L=g(x.languageId,E),N=O.tS.getEmpty().add(L,O.Qw);M.set(E,new S.WU(_,1,L,N,d.n2.create(_,x.languageId,N)))}return new j(M)}getRegExpStr(){if(this.isEmpty)return null;{const x=[...this.map.keys()];return x.sort(),x.reverse(),x.map(v=>T(v)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const x=this.getRegExpStr();this._regExpGlobal=x?new RegExp(x,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(x){return this.map.get(x)}findClosingTokenText(x){for(const[v,g]of this.map)if(g.bracketIds.intersects(x))return v}get isEmpty(){return this.map.size===0}}function T(F){const x=(0,p.ec)(F);return/^[\w ]+$/.test(F)?`\\b${x}\\b`:x}class B{constructor(x,v){this.denseKeyProvider=x,this.getLanguageConfiguration=v,this.languageIdToBracketTokens=new Map}didLanguageChange(x){const v=this.languageIdToBracketTokens.get(x);if(!v)return!1;const g=j.createFromLanguage(this.getLanguageConfiguration(x),this.denseKeyProvider).getRegExpStr();return v.getRegExpStr()!==g}getSingleLanguageBracketTokens(x){let v=this.languageIdToBracketTokens.get(x);return v||(v=j.createFromLanguage(this.getLanguageConfiguration(x),this.denseKeyProvider),this.languageIdToBracketTokens.set(x,v)),v}}},45035:function(Tt,me,a){"use strict";a.d(me,{av:function(){return O},xl:function(){return S},xd:function(){return j},Hg:function(){return B},Hw:function(){return F},W9:function(){return x},F_:function(){return v},Ii:function(){return g},BE:function(){return D},VR:function(){return c},By:function(){return C},Zq:function(){return M},PZ:function(){return E},Qw:function(){return _},oR:function(){return L}});var p=a(25924),d=a(24314);class z{constructor(b,I){this.lineCount=b,this.columnCount=I}toString(){return`${this.lineCount},${this.columnCount}`}}z.zero=new z(0,0);function O(N,b,I,k){return N!==I?B(I-N,k):B(0,k-b)}const S=0;function j(N){return N===0}const T=Math.pow(2,26);function B(N,b){return N*T+b}function F(N){const b=N,I=Math.floor(b/T),k=b-I*T;return new z(I,k)}function x(N){return Math.floor(N/T)}function v(N){return N}function g(N,b){return b<T?N+b:N-N%T+b}function D(N,b){const I=N,k=b;if(k-I<=0)return S;const q=Math.floor(I/T),re=Math.floor(k/T),de=k-re*T;if(q===re){const pe=I-q*T;return B(0,de-pe)}else return B(re-q,de)}function c(N,b){return N<b}function C(N,b){return N<=b}function M(N,b){return N>=b}function E(N){return B(N.lineNumber-1,N.column-1)}function _(N,b){const I=N,k=Math.floor(I/T),W=I-k*T,q=b,re=Math.floor(q/T),de=q-re*T;return new d.e(k+1,W+1,re+1,de+1)}function L(N){const b=(0,p.uq)(N);return B(b.length-1,b[b.length-1].length)}},13883:function(Tt,me,a){"use strict";a.d(me,{w:function(){return c}});var p=a(41720),d=a(2442),z=a(61761),O=a(45035);function S(M){if(M.length===0)return null;if(M.length===1)return M[0];let E=0;function _(){if(E>=M.length)return null;const I=E,k=M[I].listHeight;for(E++;E<M.length&&M[E].listHeight===k;)E++;return E-I>=2?j(I===0&&E===M.length?M:M.slice(I,E),!1):M[I]}let L=_(),N=_();if(!N)return L;for(let I=_();I;I=_())T(L,N)<=T(N,I)?(L=B(L,N),N=I):N=B(N,I);return B(L,N)}function j(M,E=!1){if(M.length===0)return null;if(M.length===1)return M[0];let _=M.length;for(;_>3;){const L=_>>1;for(let N=0;N<L;N++){const b=N<<1;M[N]=p.Y0.create23(M[b],M[b+1],b+3===_?M[b+2]:null,E)}_=L}return p.Y0.create23(M[0],M[1],_>=3?M[2]:null,E)}function T(M,E){return Math.abs(M.listHeight-E.listHeight)}function B(M,E){return M.listHeight===E.listHeight?p.Y0.create23(M,E,null,!1):M.listHeight>E.listHeight?F(M,E):x(E,M)}function F(M,E){M=M.toMutable();let _=M;const L=new Array;let N;for(;;){if(E.listHeight===_.listHeight){N=E;break}if(_.kind!==4)throw new Error("unexpected");L.push(_),_=_.makeLastElementMutable()}for(let b=L.length-1;b>=0;b--){const I=L[b];N?I.childrenLength>=3?N=p.Y0.create23(I.unappendChild(),N,null,!1):(I.appendChildOfSameHeight(N),N=void 0):I.handleChildrenChanged()}return N?p.Y0.create23(M,N,null,!1):M}function x(M,E){M=M.toMutable();let _=M;const L=new Array;for(;E.listHeight!==_.listHeight;){if(_.kind!==4)throw new Error("unexpected");L.push(_),_=_.makeFirstElementMutable()}let N=E;for(let b=L.length-1;b>=0;b--){const I=L[b];N?I.childrenLength>=3?N=p.Y0.create23(N,I.unprependChild(),null,!1):(I.prependChildOfSameHeight(N),N=void 0):I.handleChildrenChanged()}return N?p.Y0.create23(N,M,null,!1):M}class v{constructor(E){this.lastOffset=O.xl,this.nextNodes=[E],this.offsets=[O.xl],this.idxs=[]}readLongestNodeAt(E,_){if((0,O.VR)(E,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=E;;){const L=D(this.nextNodes);if(!L)return;const N=D(this.offsets);if((0,O.VR)(E,N))return;if((0,O.VR)(N,E))if((0,O.Ii)(N,L.length)<=E)this.nextNodeAfterCurrent();else{const b=g(L);b!==-1?(this.nextNodes.push(L.getChild(b)),this.offsets.push(N),this.idxs.push(b)):this.nextNodeAfterCurrent()}else{if(_(L))return this.nextNodeAfterCurrent(),L;{const b=g(L);if(b===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(L.getChild(b)),this.offsets.push(N),this.idxs.push(b)}}}}nextNodeAfterCurrent(){for(;;){const E=D(this.offsets),_=D(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const L=D(this.nextNodes),N=g(L,this.idxs[this.idxs.length-1]);if(N!==-1){this.nextNodes.push(L.getChild(N)),this.offsets.push((0,O.Ii)(E,_.length)),this.idxs[this.idxs.length-1]=N;break}else this.idxs.pop()}}}function g(M,E=-1){for(;;){if(E++,E>=M.childrenLength)return-1;if(M.getChild(E))return E}}function D(M){return M.length>0?M[M.length-1]:void 0}function c(M,E,_,L){return new C(M,E,_,L).parseDocument()}class C{constructor(E,_,L,N){if(this.tokenizer=E,this.createImmutableLists=N,this._itemsConstructed=0,this._itemsFromCache=0,L&&N)throw new Error("Not supported");this.oldNodeReader=L?new v(L):void 0,this.positionMapper=new d.Y(_,E.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let E=this.parseList(z.tS.getEmpty());return E||(E=p.Y0.getEmpty()),E}parseList(E){const _=new Array;for(;;){const N=this.tokenizer.peek();if(!N||N.kind===2&&N.bracketIds.intersects(E))break;const b=this.parseChild(E);b.kind===4&&b.childrenLength===0||_.push(b)}return this.oldNodeReader?S(_):j(_,this.createImmutableLists)}parseChild(E){if(this.oldNodeReader){const L=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!(0,O.xd)(L)){const N=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),b=>(0,O.VR)(b.length,L)?b.canBeReused(E):!1);if(N)return this._itemsFromCache++,this.tokenizer.skip(N.length),N}}this._itemsConstructed++;const _=this.tokenizer.read();switch(_.kind){case 2:return new p.Dm(_.bracketIds,_.length);case 0:return _.astNode;case 1:{const L=E.merge(_.bracketIds),N=this.parseList(L),b=this.tokenizer.peek();return b&&b.kind===2&&(b.bracketId===_.bracketId||b.bracketIds.intersects(_.bracketIds))?(this.tokenizer.read(),p.Kd.create(_.astNode,N,b.astNode)):p.Kd.create(_.astNode,N,null)}default:throw new Error("unexpected")}}}},61761:function(Tt,me,a){"use strict";a.d(me,{tS:function(){return d},Qw:function(){return z},FE:function(){return O}});const p=new Array;class d{constructor(j,T){this.items=j,this.additionalItems=T}static create(j,T){if(j<=128&&T.length===0){let B=d.cache[j];return B||(B=new d(j,T),d.cache[j]=B),B}return new d(j,T)}static getEmpty(){return this.empty}add(j,T){const B=T.getKey(j);let F=B>>5;if(F===0){const v=1<<B|this.items;return v===this.items?this:d.create(v,this.additionalItems)}F--;const x=this.additionalItems.slice(0);for(;x.length<F;)x.push(0);return x[F]|=1<<(B&31),d.create(this.items,x)}merge(j){const T=this.items|j.items;if(this.additionalItems===p&&j.additionalItems===p)return T===this.items?this:T===j.items?j:d.create(T,p);const B=new Array;for(let F=0;F<Math.max(this.additionalItems.length,j.additionalItems.length);F++){const x=this.additionalItems[F]||0,v=j.additionalItems[F]||0;B.push(x|v)}return d.create(T,B)}intersects(j){if((this.items&j.items)!=0)return!0;for(let T=0;T<Math.min(this.additionalItems.length,j.additionalItems.length);T++)if((this.additionalItems[T]&j.additionalItems[T])!=0)return!0;return!1}}d.cache=new Array(129),d.empty=d.create(0,p);const z={getKey(S){return S}};class O{constructor(){this.items=new Map}getKey(j){let T=this.items.get(j);return T===void 0&&(T=this.items.size,this.items.set(j,T)),T}}},6735:function(Tt,me,a){"use strict";a.d(me,{WU:function(){return j},xH:function(){return T},g:function(){return F}});var p=a(17301),d=a(96887),z=a(41720),O=a(45035),S=a(61761);class j{constructor(v,g,D,c,C){this.length=v,this.kind=g,this.bracketId=D,this.bracketIds=c,this.astNode=C}}class T{constructor(v,g){this.textModel=v,this.bracketTokens=g,this.reader=new B(this.textModel,this.bracketTokens),this._offset=O.xl,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=v.getLineCount(),this.textBufferLastLineLength=v.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return(0,O.Hg)(this.textBufferLineCount,this.textBufferLastLineLength)}skip(v){this.didPeek=!1,this._offset=(0,O.Ii)(this._offset,v);const g=(0,O.Hw)(this._offset);this.reader.setPosition(g.lineCount,g.columnCount)}read(){let v;return this.peeked?(this.didPeek=!1,v=this.peeked):v=this.reader.read(),v&&(this._offset=(0,O.Ii)(this._offset,v.length)),v}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class B{constructor(v,g){this.textModel=v,this.bracketTokens=g,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=v.getLineCount(),this.textBufferLastLineLength=v.getLineLength(this.textBufferLineCount)}setPosition(v,g){v===this.lineIdx?(this.lineCharOffset=g,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=v,this.lineCharOffset=g,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const C=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=(0,O.F_)(C.length),C}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const v=this.lineIdx,g=this.lineCharOffset;let D=0;for(;;){const C=this.lineTokens,M=C.getCount();let E=null;if(this.lineTokenOffset<M){const _=C.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<M&&_===C.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const L=d.NX.getTokenType(_)===0,N=C.getEndOffset(this.lineTokenOffset);if(L&&N!==this.lineCharOffset){const b=C.getLanguageId(this.lineTokenOffset),I=this.line.substring(this.lineCharOffset,N),k=this.bracketTokens.getSingleLanguageBracketTokens(b),W=k.regExpGlobal;if(W){W.lastIndex=0;const q=W.exec(I);q&&(E=k.getToken(q[0]),E&&(this.lineCharOffset+=q.index))}}if(D+=N-this.lineCharOffset,E)if(v!==this.lineIdx||g!==this.lineCharOffset){this.peekedToken=E;break}else return this.lineCharOffset+=(0,O.F_)(E.length),E;else this.lineTokenOffset++,this.lineCharOffset=N}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,D+=33,D>1e3))break;if(D>1500)break}const c=(0,O.av)(v,g,this.lineIdx,this.lineCharOffset);return new j(c,0,-1,S.tS.getEmpty(),new z.BH(c))}}class F{constructor(v,g){this.text=v,this._offset=O.xl,this.idx=0;const c=g.getRegExpStr()?new RegExp(g.getRegExpStr()+`|
`,"g"):null,C=[];let M,E=0,_=0,L=0,N=0;const b=new Array;for(let W=0;W<60;W++)b.push(new j((0,O.Hg)(0,W),0,-1,S.tS.getEmpty(),new z.BH((0,O.Hg)(0,W))));const I=new Array;for(let W=0;W<60;W++)I.push(new j((0,O.Hg)(1,W),0,-1,S.tS.getEmpty(),new z.BH((0,O.Hg)(1,W))));if(c)for(c.lastIndex=0;(M=c.exec(v))!==null;){const W=M.index,q=M[0];if(q===`
`)E++,_=W+1;else{if(L!==W){let re;if(N===E){const de=W-L;if(de<b.length)re=b[de];else{const pe=(0,O.Hg)(0,de);re=new j(pe,0,-1,S.tS.getEmpty(),new z.BH(pe))}}else{const de=E-N,pe=W-_;if(de===1&&pe<I.length)re=I[pe];else{const ae=(0,O.Hg)(de,pe);re=new j(ae,0,-1,S.tS.getEmpty(),new z.BH(ae))}}C.push(re)}C.push(g.getToken(q)),L=W+q.length,N=E}}const k=v.length;if(L!==k){const W=N===E?(0,O.Hg)(0,k-L):(0,O.Hg)(E-N,k-_);C.push(new j(W,0,-1,S.tS.getEmpty(),new z.BH(W)))}this.length=(0,O.Hg)(E,k-_),this.tokens=C}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(v){throw new p.B8}}},95215:function(Tt,me,a){"use strict";a.d(me,{e9:function(){return D},NL:function(){return c}});var p=a(63580),d=a(17301),z=a(3860),O=a(70666),S=a(93033),j=a(53060),T=a(95935);function B(C){return C.toString()}class F{constructor(M,E,_,L,N,b,I){this.beforeVersionId=M,this.afterVersionId=E,this.beforeEOL=_,this.afterEOL=L,this.beforeCursorState=N,this.afterCursorState=b,this.changes=I}static create(M,E){const _=M.getAlternativeVersionId(),L=g(M);return new F(_,_,L,L,E,E,[])}append(M,E,_,L,N){E.length>0&&(this.changes=(0,S.b)(this.changes,E)),this.afterEOL=_,this.afterVersionId=L,this.afterCursorState=N}static _writeSelectionsSize(M){return 4+4*4*(M?M.length:0)}static _writeSelections(M,E,_){if(j.T4(M,E?E.length:0,_),_+=4,E)for(const L of E)j.T4(M,L.selectionStartLineNumber,_),_+=4,j.T4(M,L.selectionStartColumn,_),_+=4,j.T4(M,L.positionLineNumber,_),_+=4,j.T4(M,L.positionColumn,_),_+=4;return _}static _readSelections(M,E,_){const L=j.Ag(M,E);E+=4;for(let N=0;N<L;N++){const b=j.Ag(M,E);E+=4;const I=j.Ag(M,E);E+=4;const k=j.Ag(M,E);E+=4;const W=j.Ag(M,E);E+=4,_.push(new z.Y(b,I,k,W))}return E}serialize(){let M=4+4+1+1+F._writeSelectionsSize(this.beforeCursorState)+F._writeSelectionsSize(this.afterCursorState)+4;for(const L of this.changes)M+=L.writeSize();const E=new Uint8Array(M);let _=0;j.T4(E,this.beforeVersionId,_),_+=4,j.T4(E,this.afterVersionId,_),_+=4,j.Cg(E,this.beforeEOL,_),_+=1,j.Cg(E,this.afterEOL,_),_+=1,_=F._writeSelections(E,this.beforeCursorState,_),_=F._writeSelections(E,this.afterCursorState,_),j.T4(E,this.changes.length,_),_+=4;for(const L of this.changes)_=L.write(E,_);return E.buffer}static deserialize(M){const E=new Uint8Array(M);let _=0;const L=j.Ag(E,_);_+=4;const N=j.Ag(E,_);_+=4;const b=j.Q$(E,_);_+=1;const I=j.Q$(E,_);_+=1;const k=[];_=F._readSelections(E,_,k);const W=[];_=F._readSelections(E,_,W);const q=j.Ag(E,_);_+=4;const re=[];for(let de=0;de<q;de++)_=S.q.read(E,_,re);return new F(L,N,b,I,k,W,re)}}class x{constructor(M,E){this.model=M,this._data=F.create(M,E)}get type(){return 0}get resource(){return O.o.isUri(this.model)?this.model:this.model.uri}get label(){return p.N("edit","Typing")}toString(){return(this._data instanceof F?this._data:F.deserialize(this._data)).changes.map(E=>E.toString()).join(", ")}matchesResource(M){return(O.o.isUri(this.model)?this.model:this.model.uri).toString()===M.toString()}setModel(M){this.model=M}canAppend(M){return this.model===M&&this._data instanceof F}append(M,E,_,L,N){this._data instanceof F&&this._data.append(M,E,_,L,N)}close(){this._data instanceof F&&(this._data=this._data.serialize())}open(){this._data instanceof F||(this._data=F.deserialize(this._data))}undo(){if(O.o.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof F&&(this._data=this._data.serialize());const M=F.deserialize(this._data);this.model._applyUndo(M.changes,M.beforeEOL,M.beforeVersionId,M.beforeCursorState)}redo(){if(O.o.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof F&&(this._data=this._data.serialize());const M=F.deserialize(this._data);this.model._applyRedo(M.changes,M.afterEOL,M.afterVersionId,M.afterCursorState)}heapSize(){return this._data instanceof F&&(this._data=this._data.serialize()),this._data.byteLength+168}}class v{constructor(M,E){this.type=1,this.label=M,this._isOpen=!0,this._editStackElementsArr=E.slice(0),this._editStackElementsMap=new Map;for(const _ of this._editStackElementsArr){const L=B(_.resource);this._editStackElementsMap.set(L,_)}this._delegate=null}get resources(){return this._editStackElementsArr.map(M=>M.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(M){const E=B(M);return this._editStackElementsMap.has(E)}setModel(M){const E=B(O.o.isUri(M)?M:M.uri);this._editStackElementsMap.has(E)&&this._editStackElementsMap.get(E).setModel(M)}canAppend(M){if(!this._isOpen)return!1;const E=B(M.uri);return this._editStackElementsMap.has(E)?this._editStackElementsMap.get(E).canAppend(M):!1}append(M,E,_,L,N){const b=B(M.uri);this._editStackElementsMap.get(b).append(M,E,_,L,N)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const M of this._editStackElementsArr)M.undo()}redo(){for(const M of this._editStackElementsArr)M.redo()}heapSize(M){const E=B(M);return this._editStackElementsMap.has(E)?this._editStackElementsMap.get(E).heapSize():0}split(){return this._editStackElementsArr}toString(){let M=[];for(const E of this._editStackElementsArr)M.push(`${(0,T.EZ)(E.resource)}: ${E}`);return`{${M.join(", ")}}`}}function g(C){return C.getEOL()===`
`?0:1}function D(C){return C?C instanceof x||C instanceof v:!1}class c{constructor(M,E){this._model=M,this._undoRedoService=E}pushStackElement(){const M=this._undoRedoService.getLastElement(this._model.uri);D(M)&&M.close()}popStackElement(){const M=this._undoRedoService.getLastElement(this._model.uri);D(M)&&M.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(M){const E=this._undoRedoService.getLastElement(this._model.uri);if(D(E)&&E.canAppend(this._model))return E;const _=new x(this._model,M);return this._undoRedoService.pushElement(_),_}pushEOL(M){const E=this._getOrCreateEditStackElement(null);this._model.setEOL(M),E.append(this._model,[],g(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(M,E,_){const L=this._getOrCreateEditStackElement(M),N=this._model.applyEdits(E,!0),b=c._computeCursorState(_,N),I=N.map((k,W)=>({index:W,textChange:k.textChange}));return I.sort((k,W)=>k.textChange.oldPosition===W.textChange.oldPosition?k.index-W.index:k.textChange.oldPosition-W.textChange.oldPosition),L.append(this._model,I.map(k=>k.textChange),g(this._model),this._model.getAlternativeVersionId(),b),b}static _computeCursorState(M,E){try{return M?M(E):null}catch(_){return(0,d.dL)(_),null}}}},97671:function(Tt,me,a){"use strict";a.d(me,{W:function(){return F},l:function(){return B}});var p=a(9488),d=a(25924),z=a(7988),O=a(24314);class S{constructor(){this._isDisposed=!1}dispose(){this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}var j=a(59616),T=a(65094);class B extends S{constructor(v,g){super();this.textModel=v,this.languageConfigurationService=g}getLanguageConfiguration(v){return this.languageConfigurationService.getLanguageConfiguration(v)}_computeIndentLevel(v){return(0,j.q)(this.textModel.getLineContent(v+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(v,g,D){this.assertNotDisposed();const c=this.textModel.getLineCount();if(v<1||v>c)throw new Error("Illegal value for lineNumber");const C=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,M=Boolean(C&&C.offSide);let E=-2,_=-1,L=-2,N=-1;const b=U=>{if(E!==-1&&(E===-2||E>U-1)){E=-1,_=-1;for(let ee=U-2;ee>=0;ee--){const X=this._computeIndentLevel(ee);if(X>=0){E=ee,_=X;break}}}if(L===-2){L=-1,N=-1;for(let ee=U;ee<c;ee++){const X=this._computeIndentLevel(ee);if(X>=0){L=ee,N=X;break}}}};let I=-2,k=-1,W=-2,q=-1;const re=U=>{if(I===-2){I=-1,k=-1;for(let ee=U-2;ee>=0;ee--){const X=this._computeIndentLevel(ee);if(X>=0){I=ee,k=X;break}}}if(W!==-1&&(W===-2||W<U-1)){W=-1,q=-1;for(let ee=U;ee<c;ee++){const X=this._computeIndentLevel(ee);if(X>=0){W=ee,q=X;break}}}};let de=0,pe=!0,ae=0,ue=!0,te=0,K=0;for(let U=0;pe||ue;U++){const ee=v-U,X=v+U;U>1&&(ee<1||ee<g)&&(pe=!1),U>1&&(X>c||X>D)&&(ue=!1),U>5e4&&(pe=!1,ue=!1);let le=-1;if(pe&&ee>=1){const Ce=this._computeIndentLevel(ee-1);Ce>=0?(L=ee-1,N=Ce,le=Math.ceil(Ce/this.textModel.getOptions().indentSize)):(b(ee),le=this._getIndentLevelForWhitespaceLine(M,_,N))}let oe=-1;if(ue&&X<=c){const Ce=this._computeIndentLevel(X-1);Ce>=0?(I=X-1,k=Ce,oe=Math.ceil(Ce/this.textModel.getOptions().indentSize)):(re(X),oe=this._getIndentLevelForWhitespaceLine(M,k,q))}if(U===0){K=le;continue}if(U===1){if(X<=c&&oe>=0&&K+1===oe){pe=!1,de=X,ae=X,te=oe;continue}if(ee>=1&&le>=0&&le-1===K){ue=!1,de=ee,ae=ee,te=le;continue}if(de=v,ae=v,te=K,te===0)return{startLineNumber:de,endLineNumber:ae,indent:te}}pe&&(le>=te?de=ee:pe=!1),ue&&(oe>=te?ae=X:ue=!1)}return{startLineNumber:de,endLineNumber:ae,indent:te}}getLinesBracketGuides(v,g,D,c){var C,M,E,_,L;const N=[],b=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new O.e(v,1,g,this.textModel.getLineMaxColumn(g)));let I;if(D&&b.length>0){const de=v<=D.lineNumber&&D.lineNumber<=g?b.filter(pe=>O.e.strictContainsPosition(pe.range,D)):this.textModel.bracketPairs.getBracketPairsInRange(O.e.fromPositions(D));I=(C=(0,p.dF)(de,pe=>pe.range.startLineNumber!==pe.range.endLineNumber))===null||C===void 0?void 0:C.range}const k=new p.H9(b),W=new Array,q=new Array,re=new F;for(let de=v;de<=g;de++){let pe=new Array;q.length>0&&(pe=pe.concat(q),q.length=0),N.push(pe);for(const ue of k.takeWhile(te=>te.openingBracketRange.startLineNumber<=de)||[]){if(ue.range.startLineNumber===ue.range.endLineNumber)continue;const te=Math.min(this.getVisibleColumnFromPosition(ue.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((E=(M=ue.closingBracketRange)===null||M===void 0?void 0:M.getStartPosition())!==null&&E!==void 0?E:ue.range.getEndPosition()),ue.minVisibleColumnIndentation+1);let K=!1;ue.closingBracketRange&&d.LC(this.textModel.getLineContent(ue.closingBracketRange.startLineNumber))<ue.closingBracketRange.startColumn-1&&(K=!0);const U=ue.openingBracketRange.getStartPosition(),ee=(L=(_=ue.closingBracketRange)===null||_===void 0?void 0:_.getStartPosition())!==null&&L!==void 0?L:ue.range.getEndPosition();ue.closingBracketRange===void 0?W[ue.nestingLevel]=null:W[ue.nestingLevel]={nestingLevel:ue.nestingLevel,guideVisibleColumn:te,start:U,visibleStartColumn:this.getVisibleColumnFromPosition(U),end:ee,visibleEndColumn:this.getVisibleColumnFromPosition(ee),bracketPair:ue,renderHorizontalEndLineAtTheBottom:K}}for(const ue of W){if(!ue)continue;const te=I&&ue.bracketPair.range.equalsRange(I),K=re.getInlineClassNameOfLevel(ue.nestingLevel)+(c.highlightActive&&te?" "+re.activeClassName:"");(te&&c.horizontalGuides!==T.s6.Disabled||c.includeInactive&&c.horizontalGuides===T.s6.Enabled)&&(ue.start.lineNumber===de&&ue.guideVisibleColumn<ue.visibleStartColumn&&pe.push(new T.UO(ue.guideVisibleColumn,K,new T.vW(!1,ue.start.column))),ue.end.lineNumber===de+1&&ue.guideVisibleColumn<ue.visibleEndColumn&&q.push(new T.UO(ue.guideVisibleColumn,K,new T.vW(!ue.renderHorizontalEndLineAtTheBottom,ue.end.column))))}let ae=Number.MAX_SAFE_INTEGER;for(let ue=W.length-1;ue>=0;ue--){const te=W[ue];if(!te)continue;const K=c.highlightActive&&I&&te.bracketPair.range.equalsRange(I),U=re.getInlineClassNameOfLevel(te.nestingLevel)+(K?" "+re.activeClassName:"");(K||c.includeInactive)&&te.renderHorizontalEndLineAtTheBottom&&te.end.lineNumber===de+1&&q.push(new T.UO(te.guideVisibleColumn,U,null)),!(te.end.lineNumber<=de||te.start.lineNumber>=de)&&(te.guideVisibleColumn>=ae&&!K||(ae=te.guideVisibleColumn,(K||c.includeInactive)&&pe.push(new T.UO(te.guideVisibleColumn,U,null))))}pe.sort((ue,te)=>ue.visibleColumn-te.visibleColumn)}return N}getVisibleColumnFromPosition(v){return z.i.visibleColumnFromColumn(this.textModel.getLineContent(v.lineNumber),v.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(v,g){this.assertNotDisposed();const D=this.textModel.getLineCount();if(v<1||v>D)throw new Error("Illegal value for startLineNumber");if(g<1||g>D)throw new Error("Illegal value for endLineNumber");const c=this.textModel.getOptions(),C=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,M=Boolean(C&&C.offSide),E=new Array(g-v+1);let _=-2,L=-1,N=-2,b=-1;for(let I=v;I<=g;I++){const k=I-v,W=this._computeIndentLevel(I-1);if(W>=0){_=I-1,L=W,E[k]=Math.ceil(W/c.indentSize);continue}if(_===-2){_=-1,L=-1;for(let q=I-2;q>=0;q--){const re=this._computeIndentLevel(q);if(re>=0){_=q,L=re;break}}}if(N!==-1&&(N===-2||N<I-1)){N=-1,b=-1;for(let q=I;q<D;q++){const re=this._computeIndentLevel(q);if(re>=0){N=q,b=re;break}}}E[k]=this._getIndentLevelForWhitespaceLine(M,L,b)}return E}_getIndentLevelForWhitespaceLine(v,g,D){const c=this.textModel.getOptions();return g===-1||D===-1?0:g<D?1+Math.floor(g/c.indentSize):g===D||v?Math.ceil(D/c.indentSize):1+Math.floor(D/c.indentSize)}}class F{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(v){return`bracket-indent-guide lvl-${v%30}`}}},90310:function(Tt,me,a){"use strict";a.d(me,{oQ:function(){return z},Ck:function(){return O}});var p=a(9488),d=a(85427);class z{constructor(T){this.values=T,this.prefixSum=new Uint32Array(T.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(T,B){T=(0,d.A)(T);const F=this.values,x=this.prefixSum,v=B.length;return v===0?!1:(this.values=new Uint32Array(F.length+v),this.values.set(F.subarray(0,T),0),this.values.set(F.subarray(T),T+v),this.values.set(B,T),T-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=T-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(x.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(T,B){return T=(0,d.A)(T),B=(0,d.A)(B),this.values[T]===B?!1:(this.values[T]=B,T-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=T-1),!0)}removeValues(T,B){T=(0,d.A)(T),B=(0,d.A)(B);const F=this.values,x=this.prefixSum;if(T>=F.length)return!1;const v=F.length-T;return B>=v&&(B=v),B===0?!1:(this.values=new Uint32Array(F.length-B),this.values.set(F.subarray(0,T),0),this.values.set(F.subarray(T+B),T),this.prefixSum=new Uint32Array(this.values.length),T-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=T-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(x.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(T){return T<0?0:(T=(0,d.A)(T),this._getPrefixSum(T))}_getPrefixSum(T){if(T<=this.prefixSumValidIndex[0])return this.prefixSum[T];let B=this.prefixSumValidIndex[0]+1;B===0&&(this.prefixSum[0]=this.values[0],B++),T>=this.values.length&&(T=this.values.length-1);for(let F=B;F<=T;F++)this.prefixSum[F]=this.prefixSum[F-1]+this.values[F];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],T),this.prefixSum[T]}getIndexOf(T){T=Math.floor(T),this.getTotalSum();let B=0,F=this.values.length-1,x=0,v=0,g=0;for(;B<=F;)if(x=B+(F-B)/2|0,v=this.prefixSum[x],g=v-this.values[x],T<g)F=x-1;else if(T>=v)B=x+1;else break;return new S(x,T-g)}}class O{constructor(T){this._values=T,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(T){return this._ensureValid(),T===0?0:this._prefixSum[T-1]}getIndexOf(T){this._ensureValid();const B=this._indexBySum[T],F=B>0?this._prefixSum[B-1]:0;return new S(B,T-F)}removeValues(T,B){this._values.splice(T,B),this._invalidate(T)}insertValues(T,B){this._values=(0,p.Zv)(this._values,T,B),this._invalidate(T)}_invalidate(T){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,T-1)}_ensureValid(){if(!this._isValid){for(let T=this._validEndIndex+1,B=this._values.length;T<B;T++){const F=this._values[T],x=T>0?this._prefixSum[T-1]:0;this._prefixSum[T]=x+F;for(let v=0;v<F;v++)this._indexBySum[x+v]=T}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(T,B){this._values[T]!==B&&(this._values[T]=B,this._invalidate(T))}}class S{constructor(T,B){this.index=T,this.remainder=B,this._prefixSumIndexOfResultBrand=void 0,this.index=T,this.remainder=B}}},45146:function(Tt,me,a){"use strict";a.d(me,{HS:function(){return Yt},qx:function(){return en},yO:function(){return Mr}});var p=a(9488),d=a(41264),z=a(17301),O=a(4669),S=a(9917),j=a(25924),T=a(70666),B=a(50187),F=a(24314),x=a(3860),v=a(84973);class g{constructor(m,V,G){this.range=m,this.nestingLevel=V,this.isInvalid=G}}class D{constructor(m,V,G,ce){this.range=m,this.openingBracketRange=V,this.closingBracketRange=G,this.nestingLevel=ce}}class c extends D{constructor(m,V,G,ce,ve){super(m,V,G,ce);this.minVisibleColumnIndentation=ve}}var C=a(2442),M=a(35382),E=a(45035),_=a(13883),L=a(61761),N=a(6735);class b extends S.JT{constructor(m,V){super();if(this.textModel=m,this.getLanguageConfiguration=V,this.didChangeEmitter=new O.Q5,this.denseKeyProvider=new L.FE,this.brackets=new M.Z(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,m.backgroundTokenizationState===0){const G=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),ce=new N.g(this.textModel.getValue(),G);this.initialAstWithoutTokens=(0,_.w)(ce,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else m.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):m.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(m){return this.brackets.didLanguageChange(m)}handleDidChangeBackgroundTokenizationState(){if(this.textModel.backgroundTokenizationState===2){const m=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,m||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:m}){const V=m.map(G=>new C.Q((0,E.Hg)(G.fromLineNumber-1,0),(0,E.Hg)(G.toLineNumber,0),(0,E.Hg)(G.toLineNumber-G.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(V,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(m){const V=m.changes.map(G=>{const ce=F.e.lift(G.range);return new C.Q((0,E.PZ)(ce.getStartPosition()),(0,E.PZ)(ce.getEndPosition()),(0,E.oR)(G.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(V,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(V,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(m,V,G){const ve=!1?V==null?void 0:V.deepClone():V,De=new N.xH(this.textModel,this.brackets);return(0,_.w)(De,m,ve,G)}getBracketsInRange(m){const V=(0,E.Hg)(m.startLineNumber-1,m.startColumn-1),G=(0,E.Hg)(m.endLineNumber-1,m.endColumn-1),ce=new Array,ve=this.initialAstWithoutTokens||this.astWithTokens;return I(ve,E.xl,ve.length,V,G,ce),ce}getBracketPairsInRange(m,V){const G=new Array,ce=(0,E.PZ)(m.getStartPosition()),ve=(0,E.PZ)(m.getEndPosition()),De=this.initialAstWithoutTokens||this.astWithTokens,ct=new k(G,V,this.textModel);return W(De,E.xl,De.length,ce,ve,ct),G}}function I(Ee,m,V,G,ce,ve,De=0){if(Ee.kind===4)for(const ct of Ee.children)V=(0,E.Ii)(m,ct.length),(0,E.By)(m,ce)&&(0,E.Zq)(V,G)&&I(ct,m,V,G,ce,ve,De),m=V;else if(Ee.kind===2){De++;{const ct=Ee.openingBracket;if(V=(0,E.Ii)(m,ct.length),(0,E.By)(m,ce)&&(0,E.Zq)(V,G)){const lt=(0,E.Qw)(m,V);ve.push(new g(lt,De-1,!Ee.closingBracket))}m=V}if(Ee.child){const ct=Ee.child;V=(0,E.Ii)(m,ct.length),(0,E.By)(m,ce)&&(0,E.Zq)(V,G)&&I(ct,m,V,G,ce,ve,De),m=V}if(Ee.closingBracket){const ct=Ee.closingBracket;if(V=(0,E.Ii)(m,ct.length),(0,E.By)(m,ce)&&(0,E.Zq)(V,G)){const lt=(0,E.Qw)(m,V);ve.push(new g(lt,De-1,!1))}m=V}}else if(Ee.kind===3){const ct=(0,E.Qw)(m,V);ve.push(new g(ct,De-1,!0))}else if(Ee.kind===1){const ct=(0,E.Qw)(m,V);ve.push(new g(ct,De-1,!1))}}class k{constructor(m,V,G){this.result=m,this.includeMinIndentation=V,this.textModel=G}}function W(Ee,m,V,G,ce,ve,De=0){var ct;if(Ee.kind===2){const Nt=(0,E.Ii)(m,Ee.openingBracket.length);let It=-1;ve.includeMinIndentation&&(It=Ee.computeMinIndentation(m,ve.textModel)),ve.result.push(new c((0,E.Qw)(m,V),(0,E.Qw)(m,Nt),Ee.closingBracket?(0,E.Qw)((0,E.Ii)(Nt,((ct=Ee.child)===null||ct===void 0?void 0:ct.length)||E.xl),V):void 0,De,It)),De++}let lt=m;for(const Nt of Ee.children){const It=lt;lt=(0,E.Ii)(lt,Nt.length),(0,E.By)(It,ce)&&(0,E.By)(G,lt)&&W(Nt,It,lt,G,ce,ve,De)}}var q=a(19111),re=a(34302);class de extends S.JT{constructor(m,V){super();this.textModel=m,this.languageConfigurationService=V,this.bracketPairsTree=this._register(new S.XK),this.onDidChangeEmitter=new O.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(G=>{var ce;(!G.languageId||((ce=this.bracketPairsTree.value)===null||ce===void 0?void 0:ce.object.didLanguageChange(G.languageId)))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get isDocumentSupported(){const m=5e4*100;return this.textModel.getValueLength()<=m}handleDidChangeOptions(m){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(m){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(m){var V;(V=this.bracketPairsTree.value)===null||V===void 0||V.object.handleContentChanged(m)}handleDidChangeBackgroundTokenizationState(){var m;(m=this.bracketPairsTree.value)===null||m===void 0||m.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(m){var V;(V=this.bracketPairsTree.value)===null||V===void 0||V.object.handleDidChangeTokens(m)}updateBracketPairsTree(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){const m=new S.SL;this.bracketPairsTree.value=pe(m.add(new b(this.textModel,V=>this.languageConfigurationService.getLanguageConfiguration(V))),m),m.add(this.bracketPairsTree.value.object.onDidChange(V=>this.onDidChangeEmitter.fire(V))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(m){var V;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((V=this.bracketPairsTree.value)===null||V===void 0?void 0:V.object.getBracketPairsInRange(m,!1))||[]}getBracketPairsInRangeWithMinIndentation(m){var V;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((V=this.bracketPairsTree.value)===null||V===void 0?void 0:V.object.getBracketPairsInRange(m,!0))||[]}getBracketsInRange(m){var V;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((V=this.bracketPairsTree.value)===null||V===void 0?void 0:V.object.getBracketsInRange(m))||[]}findMatchingBracketUp(m,V,G){const ce=m.toLowerCase(),ve=this.textModel.validatePosition(V),De=this.textModel.getLanguageIdAtPosition(ve.lineNumber,ve.column),ct=this.languageConfigurationService.getLanguageConfiguration(De).brackets;if(!ct)return null;const lt=ct.textIsBracket[ce];return lt?te(this._findMatchingBracketUp(lt,ve,ae(G))):null}matchBracket(m,V){const G=ae(V);return this._matchBracket(this.textModel.validatePosition(m),G)}_establishBracketSearchOffsets(m,V,G,ce){const ve=V.getCount(),De=V.getLanguageId(ce);let ct=Math.max(0,m.column-1-G.maxBracketLength);for(let Nt=ce-1;Nt>=0;Nt--){const It=V.getEndOffset(Nt);if(It<=ct)break;if((0,q.Bu)(V.getStandardTokenType(Nt))||V.getLanguageId(Nt)!==De){ct=It;break}}let lt=Math.min(V.getLineContent().length,m.column-1+G.maxBracketLength);for(let Nt=ce+1;Nt<ve;Nt++){const It=V.getStartOffset(Nt);if(It>=lt)break;if((0,q.Bu)(V.getStandardTokenType(Nt))||V.getLanguageId(Nt)!==De){lt=It;break}}return{searchStartOffset:ct,searchEndOffset:lt}}_matchBracket(m,V){const G=m.lineNumber,ce=this.textModel.getLineTokens(G),ve=this.textModel.getLineContent(G),De=ce.findTokenIndexAtOffset(m.column-1);if(De<0)return null;const ct=this.languageConfigurationService.getLanguageConfiguration(ce.getLanguageId(De)).brackets;if(ct&&!(0,q.Bu)(ce.getStandardTokenType(De))){let{searchStartOffset:lt,searchEndOffset:Nt}=this._establishBracketSearchOffsets(m,ce,ct,De),It=null;for(;;){const Ft=re.Vr.findNextBracketInRange(ct.forwardRegex,G,ve,lt,Nt);if(!Ft)break;if(Ft.startColumn<=m.column&&m.column<=Ft.endColumn){const jt=ve.substring(Ft.startColumn-1,Ft.endColumn-1).toLowerCase(),bn=this._matchFoundBracket(Ft,ct.textIsBracket[jt],ct.textIsOpenBracket[jt],V);if(bn){if(bn instanceof ue)return null;It=bn}}lt=Ft.endColumn-1}if(It)return It}if(De>0&&ce.getStartOffset(De)===m.column-1){const lt=De-1,Nt=this.languageConfigurationService.getLanguageConfiguration(ce.getLanguageId(lt)).brackets;if(Nt&&!(0,q.Bu)(ce.getStandardTokenType(lt))){const{searchStartOffset:It,searchEndOffset:Ft}=this._establishBracketSearchOffsets(m,ce,Nt,lt),jt=re.Vr.findPrevBracketInRange(Nt.reversedRegex,G,ve,It,Ft);if(jt&&jt.startColumn<=m.column&&m.column<=jt.endColumn){const bn=ve.substring(jt.startColumn-1,jt.endColumn-1).toLowerCase(),Zn=this._matchFoundBracket(jt,Nt.textIsBracket[bn],Nt.textIsOpenBracket[bn],V);if(Zn)return Zn instanceof ue?null:Zn}}}return null}_matchFoundBracket(m,V,G,ce){if(!V)return null;const ve=G?this._findMatchingBracketDown(V,m.getEndPosition(),ce):this._findMatchingBracketUp(V,m.getStartPosition(),ce);return ve?ve instanceof ue?ve:[m,ve]:null}_findMatchingBracketUp(m,V,G){const ce=m.languageId,ve=m.reversedRegex;let De=-1,ct=0;const lt=(Nt,It,Ft,jt)=>{for(;;){if(G&&++ct%100==0&&!G())return ue.INSTANCE;const bn=re.Vr.findPrevBracketInRange(ve,Nt,It,Ft,jt);if(!bn)break;const Zn=It.substring(bn.startColumn-1,bn.endColumn-1).toLowerCase();if(m.isOpen(Zn)?De++:m.isClose(Zn)&&De--,De===0)return bn;jt=bn.startColumn-1}return null};for(let Nt=V.lineNumber;Nt>=1;Nt--){const It=this.textModel.getLineTokens(Nt),Ft=It.getCount(),jt=this.textModel.getLineContent(Nt);let bn=Ft-1,Zn=jt.length,Xn=jt.length;Nt===V.lineNumber&&(bn=It.findTokenIndexAtOffset(V.column-1),Zn=V.column-1,Xn=V.column-1);let gi=!0;for(;bn>=0;bn--){const ji=It.getLanguageId(bn)===ce&&!(0,q.Bu)(It.getStandardTokenType(bn));if(ji)gi?Zn=It.getStartOffset(bn):(Zn=It.getStartOffset(bn),Xn=It.getEndOffset(bn));else if(gi&&Zn!==Xn){const vr=lt(Nt,jt,Zn,Xn);if(vr)return vr}gi=ji}if(gi&&Zn!==Xn){const ji=lt(Nt,jt,Zn,Xn);if(ji)return ji}}return null}_findMatchingBracketDown(m,V,G){const ce=m.languageId,ve=m.forwardRegex;let De=1,ct=0;const lt=(It,Ft,jt,bn)=>{for(;;){if(G&&++ct%100==0&&!G())return ue.INSTANCE;const Zn=re.Vr.findNextBracketInRange(ve,It,Ft,jt,bn);if(!Zn)break;const Xn=Ft.substring(Zn.startColumn-1,Zn.endColumn-1).toLowerCase();if(m.isOpen(Xn)?De++:m.isClose(Xn)&&De--,De===0)return Zn;jt=Zn.endColumn-1}return null},Nt=this.textModel.getLineCount();for(let It=V.lineNumber;It<=Nt;It++){const Ft=this.textModel.getLineTokens(It),jt=Ft.getCount(),bn=this.textModel.getLineContent(It);let Zn=0,Xn=0,gi=0;It===V.lineNumber&&(Zn=Ft.findTokenIndexAtOffset(V.column-1),Xn=V.column-1,gi=V.column-1);let ji=!0;for(;Zn<jt;Zn++){const vr=Ft.getLanguageId(Zn)===ce&&!(0,q.Bu)(Ft.getStandardTokenType(Zn));if(vr)ji||(Xn=Ft.getStartOffset(Zn)),gi=Ft.getEndOffset(Zn);else if(ji&&Xn!==gi){const Un=lt(It,bn,Xn,gi);if(Un)return Un}ji=vr}if(ji&&Xn!==gi){const vr=lt(It,bn,Xn,gi);if(vr)return vr}}return null}findPrevBracket(m){const V=this.textModel.validatePosition(m);let G=null,ce=null;for(let ve=V.lineNumber;ve>=1;ve--){const De=this.textModel.getLineTokens(ve),ct=De.getCount(),lt=this.textModel.getLineContent(ve);let Nt=ct-1,It=lt.length,Ft=lt.length;if(ve===V.lineNumber){Nt=De.findTokenIndexAtOffset(V.column-1),It=V.column-1,Ft=V.column-1;const bn=De.getLanguageId(Nt);G!==bn&&(G=bn,ce=this.languageConfigurationService.getLanguageConfiguration(G).brackets)}let jt=!0;for(;Nt>=0;Nt--){const bn=De.getLanguageId(Nt);if(G!==bn){if(ce&&jt&&It!==Ft){const Xn=re.Vr.findPrevBracketInRange(ce.reversedRegex,ve,lt,It,Ft);if(Xn)return this._toFoundBracket(ce,Xn);jt=!1}G=bn,ce=this.languageConfigurationService.getLanguageConfiguration(G).brackets}const Zn=!!ce&&!(0,q.Bu)(De.getStandardTokenType(Nt));if(Zn)jt?It=De.getStartOffset(Nt):(It=De.getStartOffset(Nt),Ft=De.getEndOffset(Nt));else if(ce&&jt&&It!==Ft){const Xn=re.Vr.findPrevBracketInRange(ce.reversedRegex,ve,lt,It,Ft);if(Xn)return this._toFoundBracket(ce,Xn)}jt=Zn}if(ce&&jt&&It!==Ft){const bn=re.Vr.findPrevBracketInRange(ce.reversedRegex,ve,lt,It,Ft);if(bn)return this._toFoundBracket(ce,bn)}}return null}findNextBracket(m){const V=this.textModel.validatePosition(m),G=this.textModel.getLineCount();let ce=null,ve=null;for(let De=V.lineNumber;De<=G;De++){const ct=this.textModel.getLineTokens(De),lt=ct.getCount(),Nt=this.textModel.getLineContent(De);let It=0,Ft=0,jt=0;if(De===V.lineNumber){It=ct.findTokenIndexAtOffset(V.column-1),Ft=V.column-1,jt=V.column-1;const Zn=ct.getLanguageId(It);ce!==Zn&&(ce=Zn,ve=this.languageConfigurationService.getLanguageConfiguration(ce).brackets)}let bn=!0;for(;It<lt;It++){const Zn=ct.getLanguageId(It);if(ce!==Zn){if(ve&&bn&&Ft!==jt){const gi=re.Vr.findNextBracketInRange(ve.forwardRegex,De,Nt,Ft,jt);if(gi)return this._toFoundBracket(ve,gi);bn=!1}ce=Zn,ve=this.languageConfigurationService.getLanguageConfiguration(ce).brackets}const Xn=!!ve&&!(0,q.Bu)(ct.getStandardTokenType(It));if(Xn)bn||(Ft=ct.getStartOffset(It)),jt=ct.getEndOffset(It);else if(ve&&bn&&Ft!==jt){const gi=re.Vr.findNextBracketInRange(ve.forwardRegex,De,Nt,Ft,jt);if(gi)return this._toFoundBracket(ve,gi)}bn=Xn}if(ve&&bn&&Ft!==jt){const Zn=re.Vr.findNextBracketInRange(ve.forwardRegex,De,Nt,Ft,jt);if(Zn)return this._toFoundBracket(ve,Zn)}}return null}findEnclosingBrackets(m,V){const G=ae(V),ce=this.textModel.validatePosition(m),ve=this.textModel.getLineCount(),De=new Map;let ct=[];const lt=(bn,Zn)=>{if(!De.has(bn)){const Xn=[];for(let gi=0,ji=Zn?Zn.brackets.length:0;gi<ji;gi++)Xn[gi]=0;De.set(bn,Xn)}ct=De.get(bn)};let Nt=0;const It=(bn,Zn,Xn,gi,ji)=>{for(;;){if(G&&++Nt%100==0&&!G())return ue.INSTANCE;const vr=re.Vr.findNextBracketInRange(bn.forwardRegex,Zn,Xn,gi,ji);if(!vr)break;const Un=Xn.substring(vr.startColumn-1,vr.endColumn-1).toLowerCase(),fn=bn.textIsBracket[Un];if(fn&&(fn.isOpen(Un)?ct[fn.index]++:fn.isClose(Un)&&ct[fn.index]--,ct[fn.index]===-1))return this._matchFoundBracket(vr,fn,!1,G);gi=vr.endColumn-1}return null};let Ft=null,jt=null;for(let bn=ce.lineNumber;bn<=ve;bn++){const Zn=this.textModel.getLineTokens(bn),Xn=Zn.getCount(),gi=this.textModel.getLineContent(bn);let ji=0,vr=0,Un=0;if(bn===ce.lineNumber){ji=Zn.findTokenIndexAtOffset(ce.column-1),vr=ce.column-1,Un=ce.column-1;const Vo=Zn.getLanguageId(ji);Ft!==Vo&&(Ft=Vo,jt=this.languageConfigurationService.getLanguageConfiguration(Ft).brackets,lt(Ft,jt))}let fn=!0;for(;ji<Xn;ji++){const Vo=Zn.getLanguageId(ji);if(Ft!==Vo){if(jt&&fn&&vr!==Un){const Uo=It(jt,bn,gi,vr,Un);if(Uo)return te(Uo);fn=!1}Ft=Vo,jt=this.languageConfigurationService.getLanguageConfiguration(Ft).brackets,lt(Ft,jt)}const jo=!!jt&&!(0,q.Bu)(Zn.getStandardTokenType(ji));if(jo)fn||(vr=Zn.getStartOffset(ji)),Un=Zn.getEndOffset(ji);else if(jt&&fn&&vr!==Un){const Uo=It(jt,bn,gi,vr,Un);if(Uo)return te(Uo)}fn=jo}if(jt&&fn&&vr!==Un){const Vo=It(jt,bn,gi,vr,Un);if(Vo)return te(Vo)}}return null}_toFoundBracket(m,V){if(!V)return null;let G=this.textModel.getValueInRange(V);G=G.toLowerCase();const ce=m.textIsBracket[G];return ce?{range:V,open:ce.open,close:ce.close,isOpen:m.textIsOpenBracket[G]}:null}}function pe(Ee,m){return{object:Ee,dispose:()=>m==null?void 0:m.dispose()}}function ae(Ee){if(typeof Ee=="undefined")return()=>!0;{const m=Date.now();return()=>Date.now()-m<=Ee}}class ue{constructor(){this._searchCanceledBrand=void 0}}ue.INSTANCE=new ue;function te(Ee){return Ee instanceof ue?null:Ee}var K=a(8625),U=a(97781);class ee extends S.JT{constructor(m){super();this.textModel=m,this.colorProvider=new X,this.onDidChangeEmitter=new O.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=m.getOptions().bracketPairColorizationOptions,this._register(m.bracketPairs.onDidChange(V=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(m){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(m,V,G){if(V===void 0)return[];if(!this.colorizationOptions.enabled)return[];const ce=new Array,ve=this.textModel.bracketPairs.getBracketsInRange(m);for(const De of ve)ce.push({id:`bracket${De.range.toString()}-${De.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(De)},ownerId:0,range:De.range});return ce}getAllDecorations(m,V){return m===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new F.e(1,1,this.textModel.getLineCount(),1),m,V):[]}}class X{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(m){return m.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(m.nestingLevel)}getInlineClassNameOfLevel(m){return`bracket-highlighting-${m%30}`}}(0,U.Ic)((Ee,m)=>{const V=[K.zJ,K.Vs,K.CE,K.UP,K.r0,K.m1],G=new X;m.addRule(`.monaco-editor .${G.unexpectedClosingBracketClassName} { color: ${Ee.getColor(K.ts)}; }`);const ce=V.map(ve=>Ee.getColor(ve)).filter(ve=>!!ve).filter(ve=>!ve.isTransparent());for(let ve=0;ve<30;ve++){const De=ce[ve%ce.length];m.addRule(`.monaco-editor .${G.getInlineClassNameOfLevel(ve)} { color: ${De}; }`)}});var le=a(95215),oe=a(97671);class Ce{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function ye(Ee,m,V,G,ce){ce.spacesDiff=0,ce.looksLikeAlignment=!1;let ve;for(ve=0;ve<m&&ve<G;ve++){const jt=Ee.charCodeAt(ve),bn=V.charCodeAt(ve);if(jt!==bn)break}let De=0,ct=0;for(let jt=ve;jt<m;jt++)Ee.charCodeAt(jt)===32?De++:ct++;let lt=0,Nt=0;for(let jt=ve;jt<G;jt++)V.charCodeAt(jt)===32?lt++:Nt++;if(De>0&&ct>0||lt>0&&Nt>0)return;const It=Math.abs(ct-Nt),Ft=Math.abs(De-lt);if(It===0){ce.spacesDiff=Ft,Ft>0&&0<=lt-1&&lt-1<Ee.length&&lt<V.length&&V.charCodeAt(lt)!==32&&Ee.charCodeAt(lt-1)===32&&Ee.charCodeAt(Ee.length-1)===44&&(ce.looksLikeAlignment=!0);return}if(Ft%It==0){ce.spacesDiff=Ft/It;return}}function ke(Ee,m,V){const G=Math.min(Ee.getLineCount(),1e4);let ce=0,ve=0,De="",ct=0;const lt=[2,4,6,8,3,5,7],Nt=8,It=[0,0,0,0,0,0,0,0,0],Ft=new Ce;for(let Zn=1;Zn<=G;Zn++){const Xn=Ee.getLineLength(Zn),gi=Ee.getLineContent(Zn),ji=Xn<=65536;let vr=!1,Un=0,fn=0,Vo=0;for(let Uo=0,qs=Xn;Uo<qs;Uo++){const ss=ji?gi.charCodeAt(Uo):Ee.getLineCharCode(Zn,Uo);if(ss===9)Vo++;else if(ss===32)fn++;else{vr=!0,Un=Uo;break}}if(!vr||(Vo>0?ce++:fn>1&&ve++,ye(De,ct,gi,Un,Ft),Ft.looksLikeAlignment&&!(V&&m===Ft.spacesDiff)))continue;const jo=Ft.spacesDiff;jo<=Nt&&It[jo]++,De=gi,ct=Un}let jt=V;ce!==ve&&(jt=ce<ve);let bn=m;if(jt){let Zn=jt?0:.1*G;lt.forEach(Xn=>{const gi=It[Xn];gi>Zn&&(Zn=gi,bn=Xn)}),bn===4&&It[4]>0&&It[2]>0&&It[2]>=It[4]/2&&(bn=2)}return{insertSpaces:jt,tabSize:bn}}function Te(Ee){return(Ee.metadata&1)>>>0}function ge(Ee,m){Ee.metadata=Ee.metadata&254|m<<0}function we(Ee){return(Ee.metadata&2)>>>1==1}function ze(Ee,m){Ee.metadata=Ee.metadata&253|(m?1:0)<<1}function Qe(Ee){return(Ee.metadata&4)>>>2==1}function Pe(Ee,m){Ee.metadata=Ee.metadata&251|(m?1:0)<<2}function Oe(Ee){return(Ee.metadata&24)>>>3}function qe(Ee,m){Ee.metadata=Ee.metadata&231|m<<3}function Je(Ee){return(Ee.metadata&32)>>>5==1}function Ne(Ee,m){Ee.metadata=Ee.metadata&223|(m?1:0)<<5}class Fe{constructor(m,V,G){this.metadata=0,this.parent=this,this.left=this,this.right=this,ge(this,1),this.start=V,this.end=G,this.delta=0,this.maxEnd=G,this.id=m,this.ownerId=0,this.options=null,Pe(this,!1),qe(this,1),Ne(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=V,this.cachedAbsoluteEnd=G,this.range=null,ze(this,!1)}reset(m,V,G,ce){this.start=V,this.end=G,this.maxEnd=G,this.cachedVersionId=m,this.cachedAbsoluteStart=V,this.cachedAbsoluteEnd=G,this.range=ce}setOptions(m){this.options=m;const V=this.options.className;Pe(this,V==="squiggly-error"||V==="squiggly-warning"||V==="squiggly-info"),qe(this,this.options.stickiness),Ne(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(m,V,G){this.cachedVersionId!==G&&(this.range=null),this.cachedVersionId=G,this.cachedAbsoluteStart=m,this.cachedAbsoluteEnd=V}detach(){this.parent=null,this.left=null,this.right=null}}const ne=new Fe(null,0,0);ne.parent=ne,ne.left=ne,ne.right=ne,ge(ne,0);class Q{constructor(){this.root=ne,this.requestNormalizeDelta=!1}intervalSearch(m,V,G,ce,ve){return this.root===ne?[]:gt(this,m,V,G,ce,ve)}search(m,V,G){return this.root===ne?[]:rn(this,m,V,G)}collectNodesFromOwner(m){return _t(this,m)}collectNodesPostOrder(){return Ot(this)}insert(m){Ue(this,m),this._normalizeDeltaIfNecessary()}delete(m){dt(this,m),this._normalizeDeltaIfNecessary()}resolveNode(m,V){const G=m;let ce=0;for(;m!==this.root;)m===m.parent.right&&(ce+=m.parent.delta),m=m.parent;const ve=G.start+ce,De=G.end+ce;G.setCachedOffsets(ve,De,V)}acceptReplace(m,V,G,ce){const ve=Ge(this,m,m+V);for(let De=0,ct=ve.length;De<ct;De++){const lt=ve[De];dt(this,lt)}this._normalizeDeltaIfNecessary(),nt(this,m,m+V,G),this._normalizeDeltaIfNecessary();for(let De=0,ct=ve.length;De<ct;De++){const lt=ve[De];lt.start=lt.cachedAbsoluteStart,lt.end=lt.cachedAbsoluteEnd,be(lt,m,m+V,G,ce),lt.maxEnd=lt.end,Ue(this,lt)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){!this.requestNormalizeDelta||(this.requestNormalizeDelta=!1,ie(this))}}function ie(Ee){let m=Ee.root,V=0;for(;m!==ne;){if(m.left!==ne&&!we(m.left)){m=m.left;continue}if(m.right!==ne&&!we(m.right)){V+=m.delta,m=m.right;continue}m.start=V+m.start,m.end=V+m.end,m.delta=0,je(m),ze(m,!0),ze(m.left,!1),ze(m.right,!1),m===m.parent.right&&(V-=m.parent.delta),m=m.parent}ze(Ee.root,!1)}function xe(Ee,m,V,G){return Ee<V?!0:Ee>V||G===1?!1:G===2?!0:m}function be(Ee,m,V,G,ce){const ve=Oe(Ee),De=ve===0||ve===2,ct=ve===1||ve===2,lt=V-m,Nt=G,It=Math.min(lt,Nt),Ft=Ee.start;let jt=!1;const bn=Ee.end;let Zn=!1;m<=Ft&&bn<=V&&Je(Ee)&&(Ee.start=m,jt=!0,Ee.end=m,Zn=!0);{const gi=ce?1:lt>0?2:0;!jt&&xe(Ft,De,m,gi)&&(jt=!0),!Zn&&xe(bn,ct,m,gi)&&(Zn=!0)}if(It>0&&!ce){const gi=lt>Nt?2:0;!jt&&xe(Ft,De,m+It,gi)&&(jt=!0),!Zn&&xe(bn,ct,m+It,gi)&&(Zn=!0)}{const gi=ce?1:0;!jt&&xe(Ft,De,V,gi)&&(Ee.start=m+Nt,jt=!0),!Zn&&xe(bn,ct,V,gi)&&(Ee.end=m+Nt,Zn=!0)}const Xn=Nt-lt;jt||(Ee.start=Math.max(0,Ft+Xn)),Zn||(Ee.end=Math.max(0,bn+Xn)),Ee.start>Ee.end&&(Ee.end=Ee.start)}function Ge(Ee,m,V){let G=Ee.root,ce=0,ve=0,De=0,ct=0;const lt=[];let Nt=0;for(;G!==ne;){if(we(G)){ze(G.left,!1),ze(G.right,!1),G===G.parent.right&&(ce-=G.parent.delta),G=G.parent;continue}if(!we(G.left)){if(ve=ce+G.maxEnd,ve<m){ze(G,!0);continue}if(G.left!==ne){G=G.left;continue}}if(De=ce+G.start,De>V){ze(G,!0);continue}if(ct=ce+G.end,ct>=m&&(G.setCachedOffsets(De,ct,0),lt[Nt++]=G),ze(G,!0),G.right!==ne&&!we(G.right)){ce+=G.delta,G=G.right;continue}}return ze(Ee.root,!1),lt}function nt(Ee,m,V,G){let ce=Ee.root,ve=0,De=0,ct=0;const lt=G-(V-m);for(;ce!==ne;){if(we(ce)){ze(ce.left,!1),ze(ce.right,!1),ce===ce.parent.right&&(ve-=ce.parent.delta),je(ce),ce=ce.parent;continue}if(!we(ce.left)){if(De=ve+ce.maxEnd,De<m){ze(ce,!0);continue}if(ce.left!==ne){ce=ce.left;continue}}if(ct=ve+ce.start,ct>V){ce.start+=lt,ce.end+=lt,ce.delta+=lt,(ce.delta<-1073741824||ce.delta>1073741824)&&(Ee.requestNormalizeDelta=!0),ze(ce,!0);continue}if(ze(ce,!0),ce.right!==ne&&!we(ce.right)){ve+=ce.delta,ce=ce.right;continue}}ze(Ee.root,!1)}function _t(Ee,m){let V=Ee.root;const G=[];let ce=0;for(;V!==ne;){if(we(V)){ze(V.left,!1),ze(V.right,!1),V=V.parent;continue}if(V.left!==ne&&!we(V.left)){V=V.left;continue}if(V.ownerId===m&&(G[ce++]=V),ze(V,!0),V.right!==ne&&!we(V.right)){V=V.right;continue}}return ze(Ee.root,!1),G}function Ot(Ee){let m=Ee.root;const V=[];let G=0;for(;m!==ne;){if(we(m)){ze(m.left,!1),ze(m.right,!1),m=m.parent;continue}if(m.left!==ne&&!we(m.left)){m=m.left;continue}if(m.right!==ne&&!we(m.right)){m=m.right;continue}V[G++]=m,ze(m,!0)}return ze(Ee.root,!1),V}function rn(Ee,m,V,G){let ce=Ee.root,ve=0,De=0,ct=0;const lt=[];let Nt=0;for(;ce!==ne;){if(we(ce)){ze(ce.left,!1),ze(ce.right,!1),ce===ce.parent.right&&(ve-=ce.parent.delta),ce=ce.parent;continue}if(ce.left!==ne&&!we(ce.left)){ce=ce.left;continue}De=ve+ce.start,ct=ve+ce.end,ce.setCachedOffsets(De,ct,G);let It=!0;if(m&&ce.ownerId&&ce.ownerId!==m&&(It=!1),V&&Qe(ce)&&(It=!1),It&&(lt[Nt++]=ce),ze(ce,!0),ce.right!==ne&&!we(ce.right)){ve+=ce.delta,ce=ce.right;continue}}return ze(Ee.root,!1),lt}function gt(Ee,m,V,G,ce,ve){let De=Ee.root,ct=0,lt=0,Nt=0,It=0;const Ft=[];let jt=0;for(;De!==ne;){if(we(De)){ze(De.left,!1),ze(De.right,!1),De===De.parent.right&&(ct-=De.parent.delta),De=De.parent;continue}if(!we(De.left)){if(lt=ct+De.maxEnd,lt<m){ze(De,!0);continue}if(De.left!==ne){De=De.left;continue}}if(Nt=ct+De.start,Nt>V){ze(De,!0);continue}if(It=ct+De.end,It>=m){De.setCachedOffsets(Nt,It,ve);let bn=!0;G&&De.ownerId&&De.ownerId!==G&&(bn=!1),ce&&Qe(De)&&(bn=!1),bn&&(Ft[jt++]=De)}if(ze(De,!0),De.right!==ne&&!we(De.right)){ct+=De.delta,De=De.right;continue}}return ze(Ee.root,!1),Ft}function Ue(Ee,m){if(Ee.root===ne)return m.parent=ne,m.left=ne,m.right=ne,ge(m,0),Ee.root=m,Ee.root;Ye(Ee,m),Et(m.parent);let V=m;for(;V!==Ee.root&&Te(V.parent)===1;)if(V.parent===V.parent.parent.left){const G=V.parent.parent.right;Te(G)===1?(ge(V.parent,0),ge(G,0),ge(V.parent.parent,1),V=V.parent.parent):(V===V.parent.right&&(V=V.parent,at(Ee,V)),ge(V.parent,0),ge(V.parent.parent,1),pt(Ee,V.parent.parent))}else{const G=V.parent.parent.left;Te(G)===1?(ge(V.parent,0),ge(G,0),ge(V.parent.parent,1),V=V.parent.parent):(V===V.parent.left&&(V=V.parent,pt(Ee,V)),ge(V.parent,0),ge(V.parent.parent,1),at(Ee,V.parent.parent))}return ge(Ee.root,0),m}function Ye(Ee,m){let V=0,G=Ee.root;const ce=m.start,ve=m.end;for(;;)if(Dt(ce,ve,G.start+V,G.end+V)<0)if(G.left===ne){m.start-=V,m.end-=V,m.maxEnd-=V,G.left=m;break}else G=G.left;else if(G.right===ne){m.start-=V+G.delta,m.end-=V+G.delta,m.maxEnd-=V+G.delta,G.right=m;break}else V+=G.delta,G=G.right;m.parent=G,m.left=ne,m.right=ne,ge(m,1)}function dt(Ee,m){let V,G;if(m.left===ne?(V=m.right,G=m,V.delta+=m.delta,(V.delta<-1073741824||V.delta>1073741824)&&(Ee.requestNormalizeDelta=!0),V.start+=m.delta,V.end+=m.delta):m.right===ne?(V=m.left,G=m):(G=Re(m.right),V=G.right,V.start+=G.delta,V.end+=G.delta,V.delta+=G.delta,(V.delta<-1073741824||V.delta>1073741824)&&(Ee.requestNormalizeDelta=!0),G.start+=m.delta,G.end+=m.delta,G.delta=m.delta,(G.delta<-1073741824||G.delta>1073741824)&&(Ee.requestNormalizeDelta=!0)),G===Ee.root){Ee.root=V,ge(V,0),m.detach(),Ve(),je(V),Ee.root.parent=ne;return}const ce=Te(G)===1;if(G===G.parent.left?G.parent.left=V:G.parent.right=V,G===m?V.parent=G.parent:(G.parent===m?V.parent=G:V.parent=G.parent,G.left=m.left,G.right=m.right,G.parent=m.parent,ge(G,Te(m)),m===Ee.root?Ee.root=G:m===m.parent.left?m.parent.left=G:m.parent.right=G,G.left!==ne&&(G.left.parent=G),G.right!==ne&&(G.right.parent=G)),m.detach(),ce){Et(V.parent),G!==m&&(Et(G),Et(G.parent)),Ve();return}Et(V),Et(V.parent),G!==m&&(Et(G),Et(G.parent));let ve;for(;V!==Ee.root&&Te(V)===0;)V===V.parent.left?(ve=V.parent.right,Te(ve)===1&&(ge(ve,0),ge(V.parent,1),at(Ee,V.parent),ve=V.parent.right),Te(ve.left)===0&&Te(ve.right)===0?(ge(ve,1),V=V.parent):(Te(ve.right)===0&&(ge(ve.left,0),ge(ve,1),pt(Ee,ve),ve=V.parent.right),ge(ve,Te(V.parent)),ge(V.parent,0),ge(ve.right,0),at(Ee,V.parent),V=Ee.root)):(ve=V.parent.left,Te(ve)===1&&(ge(ve,0),ge(V.parent,1),pt(Ee,V.parent),ve=V.parent.left),Te(ve.left)===0&&Te(ve.right)===0?(ge(ve,1),V=V.parent):(Te(ve.left)===0&&(ge(ve.right,0),ge(ve,1),at(Ee,ve),ve=V.parent.left),ge(ve,Te(V.parent)),ge(V.parent,0),ge(ve.left,0),pt(Ee,V.parent),V=Ee.root));ge(V,0),Ve()}function Re(Ee){for(;Ee.left!==ne;)Ee=Ee.left;return Ee}function Ve(){ne.parent=ne,ne.delta=0,ne.start=0,ne.end=0}function at(Ee,m){const V=m.right;V.delta+=m.delta,(V.delta<-1073741824||V.delta>1073741824)&&(Ee.requestNormalizeDelta=!0),V.start+=m.delta,V.end+=m.delta,m.right=V.left,V.left!==ne&&(V.left.parent=m),V.parent=m.parent,m.parent===ne?Ee.root=V:m===m.parent.left?m.parent.left=V:m.parent.right=V,V.left=m,m.parent=V,je(m),je(V)}function pt(Ee,m){const V=m.left;m.delta-=V.delta,(m.delta<-1073741824||m.delta>1073741824)&&(Ee.requestNormalizeDelta=!0),m.start-=V.delta,m.end-=V.delta,m.left=V.right,V.right!==ne&&(V.right.parent=m),V.parent=m.parent,m.parent===ne?Ee.root=V:m===m.parent.right?m.parent.right=V:m.parent.left=V,V.right=m,m.parent=V,je(m),je(V)}function Be(Ee){let m=Ee.end;if(Ee.left!==ne){const V=Ee.left.maxEnd;V>m&&(m=V)}if(Ee.right!==ne){const V=Ee.right.maxEnd+Ee.delta;V>m&&(m=V)}return m}function je(Ee){Ee.maxEnd=Be(Ee)}function Et(Ee){for(;Ee!==ne;){const m=Be(Ee);if(Ee.maxEnd===m)return;Ee.maxEnd=m,Ee=Ee.parent}}function Dt(Ee,m,V,G){return Ee===V?m-G:Ee-V}class Xe{constructor(m,V){this.piece=m,this.color=V,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ft)return an(this.right);let m=this;for(;m.parent!==ft&&m.parent.left!==m;)m=m.parent;return m.parent===ft?ft:m.parent}prev(){if(this.left!==ft)return An(this.left);let m=this;for(;m.parent!==ft&&m.parent.right!==m;)m=m.parent;return m.parent===ft?ft:m.parent}detach(){this.parent=null,this.left=null,this.right=null}}const ft=new Xe(null,0);ft.parent=ft,ft.left=ft,ft.right=ft,ft.color=0;function an(Ee){for(;Ee.left!==ft;)Ee=Ee.left;return Ee}function An(Ee){for(;Ee.right!==ft;)Ee=Ee.right;return Ee}function Fn(Ee){return Ee===ft?0:Ee.size_left+Ee.piece.length+Fn(Ee.right)}function Ht(Ee){return Ee===ft?0:Ee.lf_left+Ee.piece.lineFeedCnt+Ht(Ee.right)}function Kt(){ft.parent=ft}function pn(Ee,m){const V=m.right;V.size_left+=m.size_left+(m.piece?m.piece.length:0),V.lf_left+=m.lf_left+(m.piece?m.piece.lineFeedCnt:0),m.right=V.left,V.left!==ft&&(V.left.parent=m),V.parent=m.parent,m.parent===ft?Ee.root=V:m.parent.left===m?m.parent.left=V:m.parent.right=V,V.left=m,m.parent=V}function Vn(Ee,m){const V=m.left;m.left=V.right,V.right!==ft&&(V.right.parent=m),V.parent=m.parent,m.size_left-=V.size_left+(V.piece?V.piece.length:0),m.lf_left-=V.lf_left+(V.piece?V.piece.lineFeedCnt:0),m.parent===ft?Ee.root=V:m===m.parent.right?m.parent.right=V:m.parent.left=V,V.right=m,m.parent=V}function kt(Ee,m){let V,G;if(m.left===ft?(G=m,V=G.right):m.right===ft?(G=m,V=G.left):(G=an(m.right),V=G.right),G===Ee.root){Ee.root=V,V.color=0,m.detach(),Kt(),Ee.root.parent=ft;return}const ce=G.color===1;if(G===G.parent.left?G.parent.left=V:G.parent.right=V,G===m?(V.parent=G.parent,Pi(Ee,V)):(G.parent===m?V.parent=G:V.parent=G.parent,Pi(Ee,V),G.left=m.left,G.right=m.right,G.parent=m.parent,G.color=m.color,m===Ee.root?Ee.root=G:m===m.parent.left?m.parent.left=G:m.parent.right=G,G.left!==ft&&(G.left.parent=G),G.right!==ft&&(G.right.parent=G),G.size_left=m.size_left,G.lf_left=m.lf_left,Pi(Ee,G)),m.detach(),V.parent.left===V){const De=Fn(V),ct=Ht(V);if(De!==V.parent.size_left||ct!==V.parent.lf_left){const lt=De-V.parent.size_left,Nt=ct-V.parent.lf_left;V.parent.size_left=De,V.parent.lf_left=ct,wn(Ee,V.parent,lt,Nt)}}if(Pi(Ee,V.parent),ce){Kt();return}let ve;for(;V!==Ee.root&&V.color===0;)V===V.parent.left?(ve=V.parent.right,ve.color===1&&(ve.color=0,V.parent.color=1,pn(Ee,V.parent),ve=V.parent.right),ve.left.color===0&&ve.right.color===0?(ve.color=1,V=V.parent):(ve.right.color===0&&(ve.left.color=0,ve.color=1,Vn(Ee,ve),ve=V.parent.right),ve.color=V.parent.color,V.parent.color=0,ve.right.color=0,pn(Ee,V.parent),V=Ee.root)):(ve=V.parent.left,ve.color===1&&(ve.color=0,V.parent.color=1,Vn(Ee,V.parent),ve=V.parent.left),ve.left.color===0&&ve.right.color===0?(ve.color=1,V=V.parent):(ve.left.color===0&&(ve.right.color=0,ve.color=1,pn(Ee,ve),ve=V.parent.left),ve.color=V.parent.color,V.parent.color=0,ve.left.color=0,Vn(Ee,V.parent),V=Ee.root));V.color=0,Kt()}function Zt(Ee,m){for(Pi(Ee,m);m!==Ee.root&&m.parent.color===1;)if(m.parent===m.parent.parent.left){const V=m.parent.parent.right;V.color===1?(m.parent.color=0,V.color=0,m.parent.parent.color=1,m=m.parent.parent):(m===m.parent.right&&(m=m.parent,pn(Ee,m)),m.parent.color=0,m.parent.parent.color=1,Vn(Ee,m.parent.parent))}else{const V=m.parent.parent.left;V.color===1?(m.parent.color=0,V.color=0,m.parent.parent.color=1,m=m.parent.parent):(m===m.parent.left&&(m=m.parent,Vn(Ee,m)),m.parent.color=0,m.parent.parent.color=1,pn(Ee,m.parent.parent))}Ee.root.color=0}function wn(Ee,m,V,G){for(;m!==Ee.root&&m!==ft;)m.parent.left===m&&(m.parent.size_left+=V,m.parent.lf_left+=G),m=m.parent}function Pi(Ee,m){let V=0,G=0;if(m!==Ee.root){for(;m!==Ee.root&&m===m.parent.right;)m=m.parent;if(m!==Ee.root)for(m=m.parent,V=Fn(m.left)-m.size_left,G=Ht(m.left)-m.lf_left,m.size_left+=V,m.lf_left+=G;m!==Ee.root&&(V!==0||G!==0);)m.parent.left===m&&(m.parent.size_left+=V,m.parent.lf_left+=G),m=m.parent}}var Fi=a(77277);const Ji=65535;function si(Ee){let m;return Ee[Ee.length-1]<65536?m=new Uint16Array(Ee.length):m=new Uint32Array(Ee.length),m.set(Ee,0),m}class zt{constructor(m,V,G,ce,ve){this.lineStarts=m,this.cr=V,this.lf=G,this.crlf=ce,this.isBasicASCII=ve}}function Vt(Ee,m=!0){const V=[0];let G=1;for(let ce=0,ve=Ee.length;ce<ve;ce++){const De=Ee.charCodeAt(ce);De===13?ce+1<ve&&Ee.charCodeAt(ce+1)===10?(V[G++]=ce+2,ce++):V[G++]=ce+1:De===10&&(V[G++]=ce+1)}return m?si(V):V}function vn(Ee,m){Ee.length=0,Ee[0]=0;let V=1,G=0,ce=0,ve=0,De=!0;for(let lt=0,Nt=m.length;lt<Nt;lt++){const It=m.charCodeAt(lt);It===13?lt+1<Nt&&m.charCodeAt(lt+1)===10?(ve++,Ee[V++]=lt+2,lt++):(G++,Ee[V++]=lt+1):It===10?(ce++,Ee[V++]=lt+1):De&&It!==9&&(It<32||It>126)&&(De=!1)}const ct=new zt(si(Ee),G,ce,ve,De);return Ee.length=0,ct}class Sn{constructor(m,V,G,ce,ve){this.bufferIndex=m,this.start=V,this.end=G,this.lineFeedCnt=ce,this.length=ve}}class Bn{constructor(m,V){this.buffer=m,this.lineStarts=V}}class mn{constructor(m,V){this._pieces=[],this._tree=m,this._BOM=V,this._index=0,m.root!==ft&&m.iterate(m.root,G=>(G!==ft&&this._pieces.push(G.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Jt{constructor(m){this._limit=m,this._cache=[]}get(m){for(let V=this._cache.length-1;V>=0;V--){const G=this._cache[V];if(G.nodeStartOffset<=m&&G.nodeStartOffset+G.node.piece.length>=m)return G}return null}get2(m){for(let V=this._cache.length-1;V>=0;V--){const G=this._cache[V];if(G.nodeStartLineNumber&&G.nodeStartLineNumber<m&&G.nodeStartLineNumber+G.node.piece.lineFeedCnt>=m)return G}return null}set(m){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(m)}validate(m){let V=!1;const G=this._cache;for(let ce=0;ce<G.length;ce++){const ve=G[ce];if(ve.node.parent===null||ve.nodeStartOffset>=m){G[ce]=null,V=!0;continue}}if(V){const ce=[];for(const ve of G)ve!==null&&ce.push(ve);this._cache=ce}}}class En{constructor(m,V,G){this.create(m,V,G)}create(m,V,G){this._buffers=[new Bn("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=ft,this._lineCnt=1,this._length=0,this._EOL=V,this._EOLLength=V.length,this._EOLNormalized=G;let ce=null;for(let ve=0,De=m.length;ve<De;ve++)if(m[ve].buffer.length>0){m[ve].lineStarts||(m[ve].lineStarts=Vt(m[ve].buffer));const ct=new Sn(ve+1,{line:0,column:0},{line:m[ve].lineStarts.length-1,column:m[ve].buffer.length-m[ve].lineStarts[m[ve].lineStarts.length-1]},m[ve].lineStarts.length-1,m[ve].buffer.length);this._buffers.push(m[ve]),ce=this.rbInsertRight(ce,ct)}this._searchCache=new Jt(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(m){const V=Ji,G=V-Math.floor(V/3),ce=G*2;let ve="",De=0;const ct=[];if(this.iterate(this.root,lt=>{const Nt=this.getNodeContent(lt),It=Nt.length;if(De<=G||De+It<ce)return ve+=Nt,De+=It,!0;const Ft=ve.replace(/\r\n|\r|\n/g,m);return ct.push(new Bn(Ft,Vt(Ft))),ve=Nt,De=It,!0}),De>0){const lt=ve.replace(/\r\n|\r|\n/g,m);ct.push(new Bn(lt,Vt(lt)))}this.create(ct,m,!0)}getEOL(){return this._EOL}setEOL(m){this._EOL=m,this._EOLLength=this._EOL.length,this.normalizeEOL(m)}createSnapshot(m){return new mn(this,m)}getOffsetAt(m,V){let G=0,ce=this.root;for(;ce!==ft;)if(ce.left!==ft&&ce.lf_left+1>=m)ce=ce.left;else{if(ce.lf_left+ce.piece.lineFeedCnt+1>=m)return G+=ce.size_left,G+=this.getAccumulatedValue(ce,m-ce.lf_left-2)+V-1;m-=ce.lf_left+ce.piece.lineFeedCnt,G+=ce.size_left+ce.piece.length,ce=ce.right}return G}getPositionAt(m){m=Math.floor(m),m=Math.max(0,m);let V=this.root,G=0;const ce=m;for(;V!==ft;)if(V.size_left!==0&&V.size_left>=m)V=V.left;else if(V.size_left+V.piece.length>=m){const ve=this.getIndexOf(V,m-V.size_left);if(G+=V.lf_left+ve.index,ve.index===0){const De=this.getOffsetAt(G+1,1),ct=ce-De;return new B.L(G+1,ct+1)}return new B.L(G+1,ve.remainder+1)}else if(m-=V.size_left+V.piece.length,G+=V.lf_left+V.piece.lineFeedCnt,V.right===ft){const ve=this.getOffsetAt(G+1,1),De=ce-m-ve;return new B.L(G+1,De+1)}else V=V.right;return new B.L(1,1)}getValueInRange(m,V){if(m.startLineNumber===m.endLineNumber&&m.startColumn===m.endColumn)return"";const G=this.nodeAt2(m.startLineNumber,m.startColumn),ce=this.nodeAt2(m.endLineNumber,m.endColumn),ve=this.getValueInRange2(G,ce);return V?V!==this._EOL||!this._EOLNormalized?ve.replace(/\r\n|\r|\n/g,V):V===this.getEOL()&&this._EOLNormalized?ve:ve.replace(/\r\n|\r|\n/g,V):ve}getValueInRange2(m,V){if(m.node===V.node){const ct=m.node,lt=this._buffers[ct.piece.bufferIndex].buffer,Nt=this.offsetInBuffer(ct.piece.bufferIndex,ct.piece.start);return lt.substring(Nt+m.remainder,Nt+V.remainder)}let G=m.node;const ce=this._buffers[G.piece.bufferIndex].buffer,ve=this.offsetInBuffer(G.piece.bufferIndex,G.piece.start);let De=ce.substring(ve+m.remainder,ve+G.piece.length);for(G=G.next();G!==ft;){const ct=this._buffers[G.piece.bufferIndex].buffer,lt=this.offsetInBuffer(G.piece.bufferIndex,G.piece.start);if(G===V.node){De+=ct.substring(lt,lt+V.remainder);break}else De+=ct.substr(lt,G.piece.length);G=G.next()}return De}getLinesContent(){const m=[];let V=0,G="",ce=!1;return this.iterate(this.root,ve=>{if(ve===ft)return!0;const De=ve.piece;let ct=De.length;if(ct===0)return!0;const lt=this._buffers[De.bufferIndex].buffer,Nt=this._buffers[De.bufferIndex].lineStarts,It=De.start.line,Ft=De.end.line;let jt=Nt[It]+De.start.column;if(ce&&(lt.charCodeAt(jt)===10&&(jt++,ct--),m[V++]=G,G="",ce=!1,ct===0))return!0;if(It===Ft)return!this._EOLNormalized&&lt.charCodeAt(jt+ct-1)===13?(ce=!0,G+=lt.substr(jt,ct-1)):G+=lt.substr(jt,ct),!0;G+=this._EOLNormalized?lt.substring(jt,Math.max(jt,Nt[It+1]-this._EOLLength)):lt.substring(jt,Nt[It+1]).replace(/(\r\n|\r|\n)$/,""),m[V++]=G;for(let bn=It+1;bn<Ft;bn++)G=this._EOLNormalized?lt.substring(Nt[bn],Nt[bn+1]-this._EOLLength):lt.substring(Nt[bn],Nt[bn+1]).replace(/(\r\n|\r|\n)$/,""),m[V++]=G;return!this._EOLNormalized&&lt.charCodeAt(Nt[Ft]+De.end.column-1)===13?(ce=!0,De.end.column===0?V--:G=lt.substr(Nt[Ft],De.end.column-1)):G=lt.substr(Nt[Ft],De.end.column),!0}),ce&&(m[V++]=G,G=""),m[V++]=G,m}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(m){return this._lastVisitedLine.lineNumber===m?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=m,m===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(m):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(m,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(m).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(m){if(m.remainder===m.node.piece.length){const V=m.node.next();if(!V)return 0;const G=this._buffers[V.piece.bufferIndex],ce=this.offsetInBuffer(V.piece.bufferIndex,V.piece.start);return G.buffer.charCodeAt(ce)}else{const V=this._buffers[m.node.piece.bufferIndex],ce=this.offsetInBuffer(m.node.piece.bufferIndex,m.node.piece.start)+m.remainder;return V.buffer.charCodeAt(ce)}}getLineCharCode(m,V){const G=this.nodeAt2(m,V+1);return this._getCharCode(G)}getLineLength(m){if(m===this.getLineCount()){const V=this.getOffsetAt(m,1);return this.getLength()-V}return this.getOffsetAt(m+1,1)-this.getOffsetAt(m,1)-this._EOLLength}findMatchesInNode(m,V,G,ce,ve,De,ct,lt,Nt,It,Ft){const jt=this._buffers[m.piece.bufferIndex],bn=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),Zn=this.offsetInBuffer(m.piece.bufferIndex,ve),Xn=this.offsetInBuffer(m.piece.bufferIndex,De);let gi;const ji={line:0,column:0};let vr,Un;V._wordSeparators?(vr=jt.buffer.substring(Zn,Xn),Un=fn=>fn+Zn,V.reset(0)):(vr=jt.buffer,Un=fn=>fn,V.reset(Zn));do if(gi=V.next(vr),gi){if(Un(gi.index)>=Xn)return It;this.positionInBuffer(m,Un(gi.index)-bn,ji);const fn=this.getLineFeedCnt(m.piece.bufferIndex,ve,ji),Vo=ji.line===ve.line?ji.column-ve.column+ce:ji.column+1,jo=Vo+gi[0].length;if(Ft[It++]=(0,Fi.iE)(new F.e(G+fn,Vo,G+fn,jo),gi,lt),Un(gi.index)+gi[0].length>=Xn||It>=Nt)return It}while(gi);return It}findMatchesLineByLine(m,V,G,ce){const ve=[];let De=0;const ct=new Fi.sz(V.wordSeparators,V.regex);let lt=this.nodeAt2(m.startLineNumber,m.startColumn);if(lt===null)return[];const Nt=this.nodeAt2(m.endLineNumber,m.endColumn);if(Nt===null)return[];let It=this.positionInBuffer(lt.node,lt.remainder);const Ft=this.positionInBuffer(Nt.node,Nt.remainder);if(lt.node===Nt.node)return this.findMatchesInNode(lt.node,ct,m.startLineNumber,m.startColumn,It,Ft,V,G,ce,De,ve),ve;let jt=m.startLineNumber,bn=lt.node;for(;bn!==Nt.node;){const Xn=this.getLineFeedCnt(bn.piece.bufferIndex,It,bn.piece.end);if(Xn>=1){const ji=this._buffers[bn.piece.bufferIndex].lineStarts,vr=this.offsetInBuffer(bn.piece.bufferIndex,bn.piece.start),Un=ji[It.line+Xn],fn=jt===m.startLineNumber?m.startColumn:1;if(De=this.findMatchesInNode(bn,ct,jt,fn,It,this.positionInBuffer(bn,Un-vr),V,G,ce,De,ve),De>=ce)return ve;jt+=Xn}const gi=jt===m.startLineNumber?m.startColumn-1:0;if(jt===m.endLineNumber){const ji=this.getLineContent(jt).substring(gi,m.endColumn-1);return De=this._findMatchesInLine(V,ct,ji,m.endLineNumber,gi,De,ve,G,ce),ve}if(De=this._findMatchesInLine(V,ct,this.getLineContent(jt).substr(gi),jt,gi,De,ve,G,ce),De>=ce)return ve;jt++,lt=this.nodeAt2(jt,1),bn=lt.node,It=this.positionInBuffer(lt.node,lt.remainder)}if(jt===m.endLineNumber){const Xn=jt===m.startLineNumber?m.startColumn-1:0,gi=this.getLineContent(jt).substring(Xn,m.endColumn-1);return De=this._findMatchesInLine(V,ct,gi,m.endLineNumber,Xn,De,ve,G,ce),ve}const Zn=jt===m.startLineNumber?m.startColumn:1;return De=this.findMatchesInNode(Nt.node,ct,jt,Zn,It,Ft,V,G,ce,De,ve),ve}_findMatchesInLine(m,V,G,ce,ve,De,ct,lt,Nt){const It=m.wordSeparators;if(!lt&&m.simpleSearch){const jt=m.simpleSearch,bn=jt.length,Zn=G.length;let Xn=-bn;for(;(Xn=G.indexOf(jt,Xn+bn))!==-1;)if((!It||(0,Fi.cM)(It,G,Zn,Xn,bn))&&(ct[De++]=new v.tk(new F.e(ce,Xn+1+ve,ce,Xn+1+bn+ve),null),De>=Nt))return De;return De}let Ft;V.reset(0);do if(Ft=V.next(G),Ft&&(ct[De++]=(0,Fi.iE)(new F.e(ce,Ft.index+1+ve,ce,Ft.index+1+Ft[0].length+ve),Ft,lt),De>=Nt))return De;while(Ft);return De}insert(m,V,G=!1){if(this._EOLNormalized=this._EOLNormalized&&G,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==ft){const{node:ce,remainder:ve,nodeStartOffset:De}=this.nodeAt(m),ct=ce.piece,lt=ct.bufferIndex,Nt=this.positionInBuffer(ce,ve);if(ce.piece.bufferIndex===0&&ct.end.line===this._lastChangeBufferPos.line&&ct.end.column===this._lastChangeBufferPos.column&&De+ct.length===m&&V.length<Ji){this.appendToNode(ce,V),this.computeBufferMetadata();return}if(De===m)this.insertContentToNodeLeft(V,ce),this._searchCache.validate(m);else if(De+ce.piece.length>m){const It=[];let Ft=new Sn(ct.bufferIndex,Nt,ct.end,this.getLineFeedCnt(ct.bufferIndex,Nt,ct.end),this.offsetInBuffer(lt,ct.end)-this.offsetInBuffer(lt,Nt));if(this.shouldCheckCRLF()&&this.endWithCR(V)&&this.nodeCharCodeAt(ce,ve)===10){const Xn={line:Ft.start.line+1,column:0};Ft=new Sn(Ft.bufferIndex,Xn,Ft.end,this.getLineFeedCnt(Ft.bufferIndex,Xn,Ft.end),Ft.length-1),V+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(V))if(this.nodeCharCodeAt(ce,ve-1)===13){const Xn=this.positionInBuffer(ce,ve-1);this.deleteNodeTail(ce,Xn),V="\r"+V,ce.piece.length===0&&It.push(ce)}else this.deleteNodeTail(ce,Nt);else this.deleteNodeTail(ce,Nt);const jt=this.createNewPieces(V);Ft.length>0&&this.rbInsertRight(ce,Ft);let bn=ce;for(let Zn=0;Zn<jt.length;Zn++)bn=this.rbInsertRight(bn,jt[Zn]);this.deleteNodes(It)}else this.insertContentToNodeRight(V,ce)}else{const ce=this.createNewPieces(V);let ve=this.rbInsertLeft(null,ce[0]);for(let De=1;De<ce.length;De++)ve=this.rbInsertRight(ve,ce[De])}this.computeBufferMetadata()}delete(m,V){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",V<=0||this.root===ft)return;const G=this.nodeAt(m),ce=this.nodeAt(m+V),ve=G.node,De=ce.node;if(ve===De){const jt=this.positionInBuffer(ve,G.remainder),bn=this.positionInBuffer(ve,ce.remainder);if(G.nodeStartOffset===m){if(V===ve.piece.length){const Zn=ve.next();kt(this,ve),this.validateCRLFWithPrevNode(Zn),this.computeBufferMetadata();return}this.deleteNodeHead(ve,bn),this._searchCache.validate(m),this.validateCRLFWithPrevNode(ve),this.computeBufferMetadata();return}if(G.nodeStartOffset+ve.piece.length===m+V){this.deleteNodeTail(ve,jt),this.validateCRLFWithNextNode(ve),this.computeBufferMetadata();return}this.shrinkNode(ve,jt,bn),this.computeBufferMetadata();return}const ct=[],lt=this.positionInBuffer(ve,G.remainder);this.deleteNodeTail(ve,lt),this._searchCache.validate(m),ve.piece.length===0&&ct.push(ve);const Nt=this.positionInBuffer(De,ce.remainder);this.deleteNodeHead(De,Nt),De.piece.length===0&&ct.push(De);const It=ve.next();for(let jt=It;jt!==ft&&jt!==De;jt=jt.next())ct.push(jt);const Ft=ve.piece.length===0?ve.prev():ve;this.deleteNodes(ct),this.validateCRLFWithNextNode(Ft),this.computeBufferMetadata()}insertContentToNodeLeft(m,V){const G=[];if(this.shouldCheckCRLF()&&this.endWithCR(m)&&this.startWithLF(V)){const De=V.piece,ct={line:De.start.line+1,column:0},lt=new Sn(De.bufferIndex,ct,De.end,this.getLineFeedCnt(De.bufferIndex,ct,De.end),De.length-1);V.piece=lt,m+=`
`,wn(this,V,-1,-1),V.piece.length===0&&G.push(V)}const ce=this.createNewPieces(m);let ve=this.rbInsertLeft(V,ce[ce.length-1]);for(let De=ce.length-2;De>=0;De--)ve=this.rbInsertLeft(ve,ce[De]);this.validateCRLFWithPrevNode(ve),this.deleteNodes(G)}insertContentToNodeRight(m,V){this.adjustCarriageReturnFromNext(m,V)&&(m+=`
`);const G=this.createNewPieces(m),ce=this.rbInsertRight(V,G[0]);let ve=ce;for(let De=1;De<G.length;De++)ve=this.rbInsertRight(ve,G[De]);this.validateCRLFWithPrevNode(ce)}positionInBuffer(m,V,G){const ce=m.piece,ve=m.piece.bufferIndex,De=this._buffers[ve].lineStarts,lt=De[ce.start.line]+ce.start.column+V;let Nt=ce.start.line,It=ce.end.line,Ft=0,jt=0,bn=0;for(;Nt<=It&&(Ft=Nt+(It-Nt)/2|0,bn=De[Ft],Ft!==It);)if(jt=De[Ft+1],lt<bn)It=Ft-1;else if(lt>=jt)Nt=Ft+1;else break;return G?(G.line=Ft,G.column=lt-bn,null):{line:Ft,column:lt-bn}}getLineFeedCnt(m,V,G){if(G.column===0)return G.line-V.line;const ce=this._buffers[m].lineStarts;if(G.line===ce.length-1)return G.line-V.line;const ve=ce[G.line+1],De=ce[G.line]+G.column;if(ve>De+1)return G.line-V.line;const ct=De-1;return this._buffers[m].buffer.charCodeAt(ct)===13?G.line-V.line+1:G.line-V.line}offsetInBuffer(m,V){return this._buffers[m].lineStarts[V.line]+V.column}deleteNodes(m){for(let V=0;V<m.length;V++)kt(this,m[V])}createNewPieces(m){if(m.length>Ji){const It=[];for(;m.length>Ji;){const jt=m.charCodeAt(Ji-1);let bn;jt===13||jt>=55296&&jt<=56319?(bn=m.substring(0,Ji-1),m=m.substring(Ji-1)):(bn=m.substring(0,Ji),m=m.substring(Ji));const Zn=Vt(bn);It.push(new Sn(this._buffers.length,{line:0,column:0},{line:Zn.length-1,column:bn.length-Zn[Zn.length-1]},Zn.length-1,bn.length)),this._buffers.push(new Bn(bn,Zn))}const Ft=Vt(m);return It.push(new Sn(this._buffers.length,{line:0,column:0},{line:Ft.length-1,column:m.length-Ft[Ft.length-1]},Ft.length-1,m.length)),this._buffers.push(new Bn(m,Ft)),It}let V=this._buffers[0].buffer.length;const G=Vt(m,!1);let ce=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===V&&V!==0&&this.startWithLF(m)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},ce=this._lastChangeBufferPos;for(let It=0;It<G.length;It++)G[It]+=V+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(G.slice(1)),this._buffers[0].buffer+="_"+m,V+=1}else{if(V!==0)for(let It=0;It<G.length;It++)G[It]+=V;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(G.slice(1)),this._buffers[0].buffer+=m}const ve=this._buffers[0].buffer.length,De=this._buffers[0].lineStarts.length-1,ct=ve-this._buffers[0].lineStarts[De],lt={line:De,column:ct},Nt=new Sn(0,ce,lt,this.getLineFeedCnt(0,ce,lt),ve-V);return this._lastChangeBufferPos=lt,[Nt]}getLineRawContent(m,V=0){let G=this.root,ce="";const ve=this._searchCache.get2(m);if(ve){G=ve.node;const De=this.getAccumulatedValue(G,m-ve.nodeStartLineNumber-1),ct=this._buffers[G.piece.bufferIndex].buffer,lt=this.offsetInBuffer(G.piece.bufferIndex,G.piece.start);if(ve.nodeStartLineNumber+G.piece.lineFeedCnt===m)ce=ct.substring(lt+De,lt+G.piece.length);else{const Nt=this.getAccumulatedValue(G,m-ve.nodeStartLineNumber);return ct.substring(lt+De,lt+Nt-V)}}else{let De=0;const ct=m;for(;G!==ft;)if(G.left!==ft&&G.lf_left>=m-1)G=G.left;else if(G.lf_left+G.piece.lineFeedCnt>m-1){const lt=this.getAccumulatedValue(G,m-G.lf_left-2),Nt=this.getAccumulatedValue(G,m-G.lf_left-1),It=this._buffers[G.piece.bufferIndex].buffer,Ft=this.offsetInBuffer(G.piece.bufferIndex,G.piece.start);return De+=G.size_left,this._searchCache.set({node:G,nodeStartOffset:De,nodeStartLineNumber:ct-(m-1-G.lf_left)}),It.substring(Ft+lt,Ft+Nt-V)}else if(G.lf_left+G.piece.lineFeedCnt===m-1){const lt=this.getAccumulatedValue(G,m-G.lf_left-2),Nt=this._buffers[G.piece.bufferIndex].buffer,It=this.offsetInBuffer(G.piece.bufferIndex,G.piece.start);ce=Nt.substring(It+lt,It+G.piece.length);break}else m-=G.lf_left+G.piece.lineFeedCnt,De+=G.size_left+G.piece.length,G=G.right}for(G=G.next();G!==ft;){const De=this._buffers[G.piece.bufferIndex].buffer;if(G.piece.lineFeedCnt>0){const ct=this.getAccumulatedValue(G,0),lt=this.offsetInBuffer(G.piece.bufferIndex,G.piece.start);return ce+=De.substring(lt,lt+ct-V),ce}else{const ct=this.offsetInBuffer(G.piece.bufferIndex,G.piece.start);ce+=De.substr(ct,G.piece.length)}G=G.next()}return ce}computeBufferMetadata(){let m=this.root,V=1,G=0;for(;m!==ft;)V+=m.lf_left+m.piece.lineFeedCnt,G+=m.size_left+m.piece.length,m=m.right;this._lineCnt=V,this._length=G,this._searchCache.validate(this._length)}getIndexOf(m,V){const G=m.piece,ce=this.positionInBuffer(m,V),ve=ce.line-G.start.line;if(this.offsetInBuffer(G.bufferIndex,G.end)-this.offsetInBuffer(G.bufferIndex,G.start)===V){const De=this.getLineFeedCnt(m.piece.bufferIndex,G.start,ce);if(De!==ve)return{index:De,remainder:0}}return{index:ve,remainder:ce.column}}getAccumulatedValue(m,V){if(V<0)return 0;const G=m.piece,ce=this._buffers[G.bufferIndex].lineStarts,ve=G.start.line+V+1;return ve>G.end.line?ce[G.end.line]+G.end.column-ce[G.start.line]-G.start.column:ce[ve]-ce[G.start.line]-G.start.column}deleteNodeTail(m,V){const G=m.piece,ce=G.lineFeedCnt,ve=this.offsetInBuffer(G.bufferIndex,G.end),De=V,ct=this.offsetInBuffer(G.bufferIndex,De),lt=this.getLineFeedCnt(G.bufferIndex,G.start,De),Nt=lt-ce,It=ct-ve,Ft=G.length+It;m.piece=new Sn(G.bufferIndex,G.start,De,lt,Ft),wn(this,m,It,Nt)}deleteNodeHead(m,V){const G=m.piece,ce=G.lineFeedCnt,ve=this.offsetInBuffer(G.bufferIndex,G.start),De=V,ct=this.getLineFeedCnt(G.bufferIndex,De,G.end),lt=this.offsetInBuffer(G.bufferIndex,De),Nt=ct-ce,It=ve-lt,Ft=G.length+It;m.piece=new Sn(G.bufferIndex,De,G.end,ct,Ft),wn(this,m,It,Nt)}shrinkNode(m,V,G){const ce=m.piece,ve=ce.start,De=ce.end,ct=ce.length,lt=ce.lineFeedCnt,Nt=V,It=this.getLineFeedCnt(ce.bufferIndex,ce.start,Nt),Ft=this.offsetInBuffer(ce.bufferIndex,V)-this.offsetInBuffer(ce.bufferIndex,ve);m.piece=new Sn(ce.bufferIndex,ce.start,Nt,It,Ft),wn(this,m,Ft-ct,It-lt);const jt=new Sn(ce.bufferIndex,G,De,this.getLineFeedCnt(ce.bufferIndex,G,De),this.offsetInBuffer(ce.bufferIndex,De)-this.offsetInBuffer(ce.bufferIndex,G)),bn=this.rbInsertRight(m,jt);this.validateCRLFWithPrevNode(bn)}appendToNode(m,V){this.adjustCarriageReturnFromNext(V,m)&&(V+=`
`);const G=this.shouldCheckCRLF()&&this.startWithLF(V)&&this.endWithCR(m),ce=this._buffers[0].buffer.length;this._buffers[0].buffer+=V;const ve=Vt(V,!1);for(let bn=0;bn<ve.length;bn++)ve[bn]+=ce;if(G){const bn=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:ce-bn}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(ve.slice(1));const De=this._buffers[0].lineStarts.length-1,ct=this._buffers[0].buffer.length-this._buffers[0].lineStarts[De],lt={line:De,column:ct},Nt=m.piece.length+V.length,It=m.piece.lineFeedCnt,Ft=this.getLineFeedCnt(0,m.piece.start,lt),jt=Ft-It;m.piece=new Sn(m.piece.bufferIndex,m.piece.start,lt,Ft,Nt),this._lastChangeBufferPos=lt,wn(this,m,V.length,jt)}nodeAt(m){let V=this.root;const G=this._searchCache.get(m);if(G)return{node:G.node,nodeStartOffset:G.nodeStartOffset,remainder:m-G.nodeStartOffset};let ce=0;for(;V!==ft;)if(V.size_left>m)V=V.left;else if(V.size_left+V.piece.length>=m){ce+=V.size_left;const ve={node:V,remainder:m-V.size_left,nodeStartOffset:ce};return this._searchCache.set(ve),ve}else m-=V.size_left+V.piece.length,ce+=V.size_left+V.piece.length,V=V.right;return null}nodeAt2(m,V){let G=this.root,ce=0;for(;G!==ft;)if(G.left!==ft&&G.lf_left>=m-1)G=G.left;else if(G.lf_left+G.piece.lineFeedCnt>m-1){const ve=this.getAccumulatedValue(G,m-G.lf_left-2),De=this.getAccumulatedValue(G,m-G.lf_left-1);return ce+=G.size_left,{node:G,remainder:Math.min(ve+V-1,De),nodeStartOffset:ce}}else if(G.lf_left+G.piece.lineFeedCnt===m-1){const ve=this.getAccumulatedValue(G,m-G.lf_left-2);if(ve+V-1<=G.piece.length)return{node:G,remainder:ve+V-1,nodeStartOffset:ce};V-=G.piece.length-ve;break}else m-=G.lf_left+G.piece.lineFeedCnt,ce+=G.size_left+G.piece.length,G=G.right;for(G=G.next();G!==ft;){if(G.piece.lineFeedCnt>0){const ve=this.getAccumulatedValue(G,0),De=this.offsetOfNode(G);return{node:G,remainder:Math.min(V-1,ve),nodeStartOffset:De}}else if(G.piece.length>=V-1){const ve=this.offsetOfNode(G);return{node:G,remainder:V-1,nodeStartOffset:ve}}else V-=G.piece.length;G=G.next()}return null}nodeCharCodeAt(m,V){if(m.piece.lineFeedCnt<1)return-1;const G=this._buffers[m.piece.bufferIndex],ce=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start)+V;return G.buffer.charCodeAt(ce)}offsetOfNode(m){if(!m)return 0;let V=m.size_left;for(;m!==this.root;)m.parent.right===m&&(V+=m.parent.size_left+m.parent.piece.length),m=m.parent;return V}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(m){if(typeof m=="string")return m.charCodeAt(0)===10;if(m===ft||m.piece.lineFeedCnt===0)return!1;const V=m.piece,G=this._buffers[V.bufferIndex].lineStarts,ce=V.start.line,ve=G[ce]+V.start.column;return ce===G.length-1||G[ce+1]>ve+1?!1:this._buffers[V.bufferIndex].buffer.charCodeAt(ve)===10}endWithCR(m){return typeof m=="string"?m.charCodeAt(m.length-1)===13:m===ft||m.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(m,m.piece.length-1)===13}validateCRLFWithPrevNode(m){if(this.shouldCheckCRLF()&&this.startWithLF(m)){const V=m.prev();this.endWithCR(V)&&this.fixCRLF(V,m)}}validateCRLFWithNextNode(m){if(this.shouldCheckCRLF()&&this.endWithCR(m)){const V=m.next();this.startWithLF(V)&&this.fixCRLF(m,V)}}fixCRLF(m,V){const G=[],ce=this._buffers[m.piece.bufferIndex].lineStarts;let ve;m.piece.end.column===0?ve={line:m.piece.end.line-1,column:ce[m.piece.end.line]-ce[m.piece.end.line-1]-1}:ve={line:m.piece.end.line,column:m.piece.end.column-1};const De=m.piece.length-1,ct=m.piece.lineFeedCnt-1;m.piece=new Sn(m.piece.bufferIndex,m.piece.start,ve,ct,De),wn(this,m,-1,-1),m.piece.length===0&&G.push(m);const lt={line:V.piece.start.line+1,column:0},Nt=V.piece.length-1,It=this.getLineFeedCnt(V.piece.bufferIndex,lt,V.piece.end);V.piece=new Sn(V.piece.bufferIndex,lt,V.piece.end,It,Nt),wn(this,V,-1,-1),V.piece.length===0&&G.push(V);const Ft=this.createNewPieces(`\r
`);this.rbInsertRight(m,Ft[0]);for(let jt=0;jt<G.length;jt++)kt(this,G[jt])}adjustCarriageReturnFromNext(m,V){if(this.shouldCheckCRLF()&&this.endWithCR(m)){const G=V.next();if(this.startWithLF(G)){if(m+=`
`,G.piece.length===1)kt(this,G);else{const ce=G.piece,ve={line:ce.start.line+1,column:0},De=ce.length-1,ct=this.getLineFeedCnt(ce.bufferIndex,ve,ce.end);G.piece=new Sn(ce.bufferIndex,ve,ce.end,ct,De),wn(this,G,-1,-1)}return!0}}return!1}iterate(m,V){if(m===ft)return V(ft);const G=this.iterate(m.left,V);return G&&V(m)&&this.iterate(m.right,V)}getNodeContent(m){if(m===ft)return"";const V=this._buffers[m.piece.bufferIndex];let G;const ce=m.piece,ve=this.offsetInBuffer(ce.bufferIndex,ce.start),De=this.offsetInBuffer(ce.bufferIndex,ce.end);return G=V.buffer.substring(ve,De),G}getPieceContent(m){const V=this._buffers[m.bufferIndex],G=this.offsetInBuffer(m.bufferIndex,m.start),ce=this.offsetInBuffer(m.bufferIndex,m.end);return V.buffer.substring(G,ce)}rbInsertRight(m,V){const G=new Xe(V,1);if(G.left=ft,G.right=ft,G.parent=ft,G.size_left=0,G.lf_left=0,this.root===ft)this.root=G,G.color=0;else if(m.right===ft)m.right=G,G.parent=m;else{const ve=an(m.right);ve.left=G,G.parent=ve}return Zt(this,G),G}rbInsertLeft(m,V){const G=new Xe(V,1);if(G.left=ft,G.right=ft,G.parent=ft,G.size_left=0,G.lf_left=0,this.root===ft)this.root=G,G.color=0;else if(m.left===ft)m.left=G,G.parent=m;else{const ce=An(m.left);ce.right=G,G.parent=ce}return Zt(this,G),G}}var $t=a(23795),sn=a(93033);class Tn extends S.JT{constructor(m,V,G,ce,ve,De,ct){super();this._onDidChangeContent=this._register(new O.Q5),this._BOM=V,this._mightContainNonBasicASCII=!De,this._mightContainRTL=ce,this._mightContainUnusualLineTerminators=ve,this._pieceTree=new En(m,G,ct)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(m){return this._pieceTree.createSnapshot(m?this._BOM:"")}getOffsetAt(m,V){return this._pieceTree.getOffsetAt(m,V)}getPositionAt(m){return this._pieceTree.getPositionAt(m)}getRangeAt(m,V){const G=m+V,ce=this.getPositionAt(m),ve=this.getPositionAt(G);return new F.e(ce.lineNumber,ce.column,ve.lineNumber,ve.column)}getValueInRange(m,V=0){if(m.isEmpty())return"";const G=this._getEndOfLine(V);return this._pieceTree.getValueInRange(m,G)}getValueLengthInRange(m,V=0){if(m.isEmpty())return 0;if(m.startLineNumber===m.endLineNumber)return m.endColumn-m.startColumn;const G=this.getOffsetAt(m.startLineNumber,m.startColumn);return this.getOffsetAt(m.endLineNumber,m.endColumn)-G}getCharacterCountInRange(m,V=0){if(this._mightContainNonBasicASCII){let G=0;const ce=m.startLineNumber,ve=m.endLineNumber;for(let De=ce;De<=ve;De++){const ct=this.getLineContent(De),lt=De===ce?m.startColumn-1:0,Nt=De===ve?m.endColumn-1:ct.length;for(let It=lt;It<Nt;It++)j.ZG(ct.charCodeAt(It))?(G=G+1,It=It+1):G=G+1}return G+=this._getEndOfLine(V).length*(ve-ce),G}return this.getValueLengthInRange(m,V)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(m){return this._pieceTree.getLineContent(m)}getLineCharCode(m,V){return this._pieceTree.getLineCharCode(m,V)}getLineLength(m){return this._pieceTree.getLineLength(m)}getLineFirstNonWhitespaceColumn(m){const V=j.LC(this.getLineContent(m));return V===-1?0:V+1}getLineLastNonWhitespaceColumn(m){const V=j.ow(this.getLineContent(m));return V===-1?0:V+2}_getEndOfLine(m){switch(m){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(m){this._pieceTree.setEOL(m)}applyEdits(m,V,G){let ce=this._mightContainRTL,ve=this._mightContainUnusualLineTerminators,De=this._mightContainNonBasicASCII,ct=!0,lt=[];for(let Xn=0;Xn<m.length;Xn++){const gi=m[Xn];ct&&gi._isTracked&&(ct=!1);const ji=gi.range;if(gi.text){let jo=!0;De||(jo=!j.$i(gi.text),De=jo),!ce&&jo&&(ce=j.Ut(gi.text)),!ve&&jo&&(ve=j.ab(gi.text))}let vr="",Un=0,fn=0,Vo=0;if(gi.text){let jo;[Un,fn,Vo,jo]=(0,$t.Q)(gi.text);const Uo=this.getEOL();jo===0||jo===(Uo===`\r
`?2:1)?vr=gi.text:vr=gi.text.replace(/\r\n|\r|\n/g,Uo)}lt[Xn]={sortIndex:Xn,identifier:gi.identifier||null,range:ji,rangeOffset:this.getOffsetAt(ji.startLineNumber,ji.startColumn),rangeLength:this.getValueLengthInRange(ji),text:vr,eolCount:Un,firstLineLength:fn,lastLineLength:Vo,forceMoveMarkers:Boolean(gi.forceMoveMarkers),isAutoWhitespaceEdit:gi.isAutoWhitespaceEdit||!1}}lt.sort(Tn._sortOpsAscending);let Nt=!1;for(let Xn=0,gi=lt.length-1;Xn<gi;Xn++){const ji=lt[Xn].range.getEndPosition(),vr=lt[Xn+1].range.getStartPosition();if(vr.isBeforeOrEqual(ji)){if(vr.isBefore(ji))throw new Error("Overlapping ranges are not allowed!");Nt=!0}}ct&&(lt=this._reduceOperations(lt));const It=G||V?Tn._getInverseEditRanges(lt):[],Ft=[];if(V)for(let Xn=0;Xn<lt.length;Xn++){const gi=lt[Xn],ji=It[Xn];if(gi.isAutoWhitespaceEdit&&gi.range.isEmpty())for(let vr=ji.startLineNumber;vr<=ji.endLineNumber;vr++){let Un="";vr===ji.startLineNumber&&(Un=this.getLineContent(gi.range.startLineNumber),j.LC(Un)!==-1)||Ft.push({lineNumber:vr,oldContent:Un})}}let jt=null;if(G){let Xn=0;jt=[];for(let gi=0;gi<lt.length;gi++){const ji=lt[gi],vr=It[gi],Un=this.getValueInRange(ji.range),fn=ji.rangeOffset+Xn;Xn+=ji.text.length-Un.length,jt[gi]={sortIndex:ji.sortIndex,identifier:ji.identifier,range:vr,text:Un,textChange:new sn.q(ji.rangeOffset,Un,fn,ji.text)}}Nt||jt.sort((gi,ji)=>gi.sortIndex-ji.sortIndex)}this._mightContainRTL=ce,this._mightContainUnusualLineTerminators=ve,this._mightContainNonBasicASCII=De;const bn=this._doApplyEdits(lt);let Zn=null;if(V&&Ft.length>0){Ft.sort((Xn,gi)=>gi.lineNumber-Xn.lineNumber),Zn=[];for(let Xn=0,gi=Ft.length;Xn<gi;Xn++){const ji=Ft[Xn].lineNumber;if(Xn>0&&Ft[Xn-1].lineNumber===ji)continue;const vr=Ft[Xn].oldContent,Un=this.getLineContent(ji);Un.length===0||Un===vr||j.LC(Un)!==-1||Zn.push(ji)}}return this._onDidChangeContent.fire(),new v.je(jt,bn,Zn)}_reduceOperations(m){return m.length<1e3?m:[this._toSingleEditOperation(m)]}_toSingleEditOperation(m){let V=!1;const G=m[0].range,ce=m[m.length-1].range,ve=new F.e(G.startLineNumber,G.startColumn,ce.endLineNumber,ce.endColumn);let De=G.startLineNumber,ct=G.startColumn;const lt=[];for(let bn=0,Zn=m.length;bn<Zn;bn++){const Xn=m[bn],gi=Xn.range;V=V||Xn.forceMoveMarkers,lt.push(this.getValueInRange(new F.e(De,ct,gi.startLineNumber,gi.startColumn))),Xn.text.length>0&&lt.push(Xn.text),De=gi.endLineNumber,ct=gi.endColumn}const Nt=lt.join(""),[It,Ft,jt]=(0,$t.Q)(Nt);return{sortIndex:0,identifier:m[0].identifier,range:ve,rangeOffset:this.getOffsetAt(ve.startLineNumber,ve.startColumn),rangeLength:this.getValueLengthInRange(ve,0),text:Nt,eolCount:It,firstLineLength:Ft,lastLineLength:jt,forceMoveMarkers:V,isAutoWhitespaceEdit:!1}}_doApplyEdits(m){m.sort(Tn._sortOpsDescending);const V=[];for(let G=0;G<m.length;G++){const ce=m[G],ve=ce.range.startLineNumber,De=ce.range.startColumn,ct=ce.range.endLineNumber,lt=ce.range.endColumn;if(ve===ct&&De===lt&&ce.text.length===0)continue;ce.text?(this._pieceTree.delete(ce.rangeOffset,ce.rangeLength),this._pieceTree.insert(ce.rangeOffset,ce.text,!0)):this._pieceTree.delete(ce.rangeOffset,ce.rangeLength);const Nt=new F.e(ve,De,ct,lt);V.push({range:Nt,rangeLength:ce.rangeLength,text:ce.text,rangeOffset:ce.rangeOffset,forceMoveMarkers:ce.forceMoveMarkers})}return V}findMatchesLineByLine(m,V,G,ce){return this._pieceTree.findMatchesLineByLine(m,V,G,ce)}static _getInverseEditRanges(m){const V=[];let G=0,ce=0,ve=null;for(let De=0,ct=m.length;De<ct;De++){const lt=m[De];let Nt,It;ve?ve.range.endLineNumber===lt.range.startLineNumber?(Nt=G,It=ce+(lt.range.startColumn-ve.range.endColumn)):(Nt=G+(lt.range.startLineNumber-ve.range.endLineNumber),It=lt.range.startColumn):(Nt=lt.range.startLineNumber,It=lt.range.startColumn);let Ft;if(lt.text.length>0){const jt=lt.eolCount+1;jt===1?Ft=new F.e(Nt,It,Nt,It+lt.firstLineLength):Ft=new F.e(Nt,It,Nt+jt-1,lt.lastLineLength+1)}else Ft=new F.e(Nt,It,Nt,It);G=Ft.endLineNumber,ce=Ft.endColumn,V.push(Ft),ve=lt}return V}static _sortOpsAscending(m,V){const G=F.e.compareRangesUsingEnds(m.range,V.range);return G===0?m.sortIndex-V.sortIndex:G}static _sortOpsDescending(m,V){const G=F.e.compareRangesUsingEnds(m.range,V.range);return G===0?V.sortIndex-m.sortIndex:-G}}class ri{constructor(m,V,G,ce,ve,De,ct,lt,Nt){this._chunks=m,this._bom=V,this._cr=G,this._lf=ce,this._crlf=ve,this._containsRTL=De,this._containsUnusualLineTerminators=ct,this._isBasicASCII=lt,this._normalizeEOL=Nt}_getEOL(m){const V=this._cr+this._lf+this._crlf,G=this._cr+this._crlf;return V===0?m===1?`
`:`\r
`:G>V/2?`\r
`:`
`}create(m){const V=this._getEOL(m),G=this._chunks;if(this._normalizeEOL&&(V===`\r
`&&(this._cr>0||this._lf>0)||V===`
`&&(this._cr>0||this._crlf>0)))for(let ve=0,De=G.length;ve<De;ve++){const ct=G[ve].buffer.replace(/\r\n|\r|\n/g,V),lt=Vt(ct);G[ve]=new Bn(ct,lt)}const ce=new Tn(G,this._bom,V,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:ce,disposable:ce}}}class oi{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(m){if(m.length===0)return;this.chunks.length===0&&j.uS(m)&&(this.BOM=j.c1,m=m.substr(1));const V=m.charCodeAt(m.length-1);V===13||V>=55296&&V<=56319?(this._acceptChunk1(m.substr(0,m.length-1),!1),this._hasPreviousChar=!0,this._previousChar=V):(this._acceptChunk1(m,!1),this._hasPreviousChar=!1,this._previousChar=V)}_acceptChunk1(m,V){!V&&m.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+m):this._acceptChunk2(m))}_acceptChunk2(m){const V=vn(this._tmpLineStarts,m);this.chunks.push(new Bn(m,V.lineStarts)),this.cr+=V.cr,this.lf+=V.lf,this.crlf+=V.crlf,this.isBasicASCII&&(this.isBasicASCII=V.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=j.Ut(m)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=j.ab(m))}finish(m=!0){return this._finish(),new ri(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,m)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const m=this.chunks[this.chunks.length-1];m.buffer+=String.fromCharCode(this._previousChar);const V=Vt(m.buffer);m.lineStarts=V,this._previousChar===13&&this.cr++}}}var On=a(14706),Qn=a(77378),Yi=a(96887),Lr=a(276),Dr=a(84013);class Fr{constructor(m,V){this._startLineNumber=m,this._tokens=V}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}getLineTokens(m){return this._tokens[m-this._startLineNumber]}appendLineTokens(m){this._tokens.push(m)}}class Sr{constructor(){this._tokens=[]}add(m,V){if(this._tokens.length>0){const G=this._tokens[this._tokens.length-1];if(G.endLineNumber+1===m){G.appendLineTokens(V);return}}this._tokens.push(new Fr(m,[V]))}finalize(){return this._tokens}}var Ro=a(15393),to=a(1432);class no{constructor(m){this._default=m,this._store=[]}get(m){return m<this._store.length?this._store[m]:this._default}set(m,V){for(;m>=this._store.length;)this._store[this._store.length]=this._default;this._store[m]=V}delete(m,V){V===0||m>=this._store.length||this._store.splice(m,V)}insert(m,V){if(V===0||m>=this._store.length)return;const G=[];for(let ce=0;ce<V;ce++)G[ce]=this._default;this._store=p.Zv(this._store,m,G)}}class dr{constructor(m,V){this.tokenizationSupport=m,this.initialState=V,this._lineBeginState=new no(null),this._lineNeedsTokenization=new no(!0),this._firstLineNeedsTokenization=0,this._lineBeginState.set(0,this.initialState)}get invalidLineStartIndex(){return this._firstLineNeedsTokenization}markMustBeTokenized(m){this._lineNeedsTokenization.set(m,!0),this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,m)}getBeginState(m){return this._lineBeginState.get(m)}setEndState(m,V,G){if(this._lineNeedsTokenization.set(V,!1),this._firstLineNeedsTokenization=V+1,V===m-1)return;const ce=this._lineBeginState.get(V+1);if(ce===null||!G.equals(ce)){this._lineBeginState.set(V+1,G),this.markMustBeTokenized(V+1);return}let ve=V+1;for(;ve<m&&!this._lineNeedsTokenization.get(ve);)ve++;this._firstLineNeedsTokenization=ve}applyEdits(m,V){this.markMustBeTokenized(m.startLineNumber-1),this._lineBeginState.delete(m.startLineNumber,m.endLineNumber-m.startLineNumber),this._lineNeedsTokenization.delete(m.startLineNumber,m.endLineNumber-m.startLineNumber),this._lineBeginState.insert(m.startLineNumber,V),this._lineNeedsTokenization.insert(m.startLineNumber,V)}}class kn extends S.JT{constructor(m,V){super();this._textModel=m,this._languageIdCodec=V,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=null,this._register(Yi.RW.onDidChange(G=>{const ce=this._textModel.getLanguageId();G.changedLanguages.indexOf(ce)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}handleDidChangeContent(m){if(m.isFlush){this._resetTokenizationState();return}if(this._tokenizationStateStore)for(let V=0,G=m.changes.length;V<G;V++){const ce=m.changes[V],[ve]=(0,$t.Q)(ce.text);this._tokenizationStateStore.applyEdits(ce.range,ve)}this._beginBackgroundTokenization()}handleDidChangeAttached(){this._beginBackgroundTokenization()}handleDidChangeLanguage(m){this._resetTokenizationState(),this._textModel.clearTokens()}_resetTokenizationState(){const[m,V]=bt(this._textModel);m&&V?this._tokenizationStateStore=new dr(m,V):this._tokenizationStateStore=null,this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,(0,Ro.To)(m=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(m)}))}_backgroundTokenizeWithDeadline(m){const V=Date.now()+m.timeRemaining(),G=()=>{this._isDisposed||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<V?(0,to.fn)(G):this._beginBackgroundTokenization())};G()}_backgroundTokenizeForAtLeast1ms(){const m=this._textModel.getLineCount(),V=new Sr,G=Dr.G.create(!1);do if(G.elapsed()>1||this._tokenizeOneInvalidLine(V)>=m)break;while(this._hasLinesToTokenize());this._textModel.setTokens(V.finalize(),!this._hasLinesToTokenize())}tokenizeViewport(m,V){const G=new Sr;this._tokenizeViewport(G,m,V),this._textModel.setTokens(G.finalize(),!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(m){const V=new Sr;this._updateTokensUntilLine(V,m),this._textModel.setTokens(V.finalize(),!this._hasLinesToTokenize())}getTokenTypeIfInsertingCharacter(m,V){if(!this._tokenizationStateStore)return 0;this.forceTokenization(m.lineNumber);const G=this._tokenizationStateStore.getBeginState(m.lineNumber-1);if(!G)return 0;const ce=this._textModel.getLanguageId(),ve=this._textModel.getLineContent(m.lineNumber),De=ve.substring(0,m.column-1)+V+ve.substring(m.column-1),ct=Bt(this._languageIdCodec,ce,this._tokenizationStateStore.tokenizationSupport,De,!0,G),lt=new Qn.A(ct.tokens,De,this._languageIdCodec);if(lt.getCount()===0)return 0;const Nt=lt.findTokenIndexAtOffset(m.column-1);return lt.getStandardTokenType(Nt)}tokenizeLineWithEdit(m,V,G){const ce=m.lineNumber,ve=m.column;if(!this._tokenizationStateStore)return null;this.forceTokenization(ce);const De=this._tokenizationStateStore.getBeginState(ce-1);if(!De)return null;const ct=this._textModel.getLineContent(ce),lt=ct.substring(0,ve-1)+G+ct.substring(ve-1+V),Nt=this._textModel.getLanguageIdAtPosition(ce,0),It=Bt(this._languageIdCodec,Nt,this._tokenizationStateStore.tokenizationSupport,lt,!0,De);return new Qn.A(It.tokens,lt,this._languageIdCodec)}isCheapToTokenize(m){if(!this._tokenizationStateStore)return!0;const V=this._tokenizationStateStore.invalidLineStartIndex+1;return m>V?!1:m<V||this._textModel.getLineLength(m)<2048}_hasLinesToTokenize(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(m){if(!this._tokenizationStateStore||!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const V=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(m,V),V}_updateTokensUntilLine(m,V){if(!this._tokenizationStateStore)return;const G=this._textModel.getLanguageId(),ce=this._textModel.getLineCount(),ve=V-1;for(let De=this._tokenizationStateStore.invalidLineStartIndex;De<=ve;De++){const ct=this._textModel.getLineContent(De+1),lt=this._tokenizationStateStore.getBeginState(De),Nt=Bt(this._languageIdCodec,G,this._tokenizationStateStore.tokenizationSupport,ct,!0,lt);m.add(De+1,Nt.tokens),this._tokenizationStateStore.setEndState(ce,De,Nt.endState),De=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(m,V,G){if(!this._tokenizationStateStore||G<=this._tokenizationStateStore.invalidLineStartIndex)return;if(V<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(m,G);return}let ce=this._textModel.getLineFirstNonWhitespaceColumn(V);const ve=[];let De=null;for(let Nt=V-1;ce>1&&Nt>=1;Nt--){const It=this._textModel.getLineFirstNonWhitespaceColumn(Nt);if(It!==0&&It<ce){if(De=this._tokenizationStateStore.getBeginState(Nt-1),De)break;ve.push(this._textModel.getLineContent(Nt)),ce=It}}De||(De=this._tokenizationStateStore.initialState);const ct=this._textModel.getLanguageId();let lt=De;for(let Nt=ve.length-1;Nt>=0;Nt--)lt=Bt(this._languageIdCodec,ct,this._tokenizationStateStore.tokenizationSupport,ve[Nt],!1,lt).endState;for(let Nt=V;Nt<=G;Nt++){const It=this._textModel.getLineContent(Nt),Ft=Bt(this._languageIdCodec,ct,this._tokenizationStateStore.tokenizationSupport,It,!0,lt);m.add(Nt,Ft.tokens),this._tokenizationStateStore.markMustBeTokenized(Nt-1),lt=Ft.endState}}}function bt(Ee){if(Ee.isTooLargeForTokenization())return[null,null];const m=Yi.RW.get(Ee.getLanguageId());if(!m)return[null,null];let V;try{V=m.getInitialState()}catch(G){return(0,z.dL)(G),[null,null]}return[m,V]}function Bt(Ee,m,V,G,ce,ve){let De=null;if(V)try{De=V.tokenizeEncoded(G,ce,ve.clone())}catch(ct){(0,z.dL)(ct)}return De||(De=(0,Lr.Dy)(Ee.encodeLanguageId(m),ve)),Qn.A.convertToEndOffset(De.tokens,G.length),De}const At=new Uint32Array(0).buffer;class Ke{static deleteBeginning(m,V){return m===null||m===At?m:Ke.delete(m,0,V)}static deleteEnding(m,V){if(m===null||m===At)return m;const G=vt(m),ce=G[G.length-2];return Ke.delete(m,V,ce)}static delete(m,V,G){if(m===null||m===At||V===G)return m;const ce=vt(m),ve=ce.length>>>1;if(V===0&&ce[ce.length-2]===G)return At;const De=Qn.A.findIndexInTokensArray(ce,V),ct=De>0?ce[De-1<<1]:0,lt=ce[De<<1];if(G<lt){const bn=G-V;for(let Zn=De;Zn<ve;Zn++)ce[Zn<<1]-=bn;return m}let Nt,It;ct!==V?(ce[De<<1]=V,Nt=De+1<<1,It=V):(Nt=De<<1,It=ct);const Ft=G-V;for(let bn=De+1;bn<ve;bn++){const Zn=ce[bn<<1]-Ft;Zn>It&&(ce[Nt++]=Zn,ce[Nt++]=ce[(bn<<1)+1],It=Zn)}if(Nt===ce.length)return m;const jt=new Uint32Array(Nt);return jt.set(ce.subarray(0,Nt),0),jt.buffer}static append(m,V){if(V===At)return m;if(m===At)return V;if(m===null)return m;if(V===null)return null;const G=vt(m),ce=vt(V),ve=ce.length>>>1,De=new Uint32Array(G.length+ce.length);De.set(G,0);let ct=G.length;const lt=G[G.length-2];for(let Nt=0;Nt<ve;Nt++)De[ct++]=ce[Nt<<1]+lt,De[ct++]=ce[(Nt<<1)+1];return De.buffer}static insert(m,V,G){if(m===null||m===At)return m;const ce=vt(m),ve=ce.length>>>1;let De=Qn.A.findIndexInTokensArray(ce,V);De>0&&ce[De-1<<1]===V&&De--;for(let ct=De;ct<ve;ct++)ce[ct<<1]+=G;return m}}function vt(Ee){return Ee instanceof Uint32Array?Ee:new Uint32Array(Ee)}class Lt{constructor(m){this._lineTokens=[],this._len=0,this._languageIdCodec=m}flush(){this._lineTokens=[],this._len=0}getTokens(m,V,G){let ce=null;if(V<this._len&&(ce=this._lineTokens[V]),ce!==null&&ce!==At)return new Qn.A(vt(ce),G,this._languageIdCodec);const ve=new Uint32Array(2);return ve[0]=G.length,ve[1]=tn(this._languageIdCodec.encodeLanguageId(m)),new Qn.A(ve,G,this._languageIdCodec)}static _massageTokens(m,V,G){const ce=G?vt(G):null;if(V===0){let ve=!1;if(ce&&ce.length>1&&(ve=Yi.NX.getLanguageId(ce[1])!==m),!ve)return At}if(!ce||ce.length===0){const ve=new Uint32Array(2);return ve[0]=V,ve[1]=tn(m),ve.buffer}return ce[ce.length-2]=V,ce.byteOffset===0&&ce.byteLength===ce.buffer.byteLength?ce.buffer:ce}_ensureLine(m){for(;m>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(m,V){V!==0&&(m+V>this._len&&(V=this._len-m),this._lineTokens.splice(m,V),this._len-=V)}_insertLines(m,V){if(V===0)return;const G=[];for(let ce=0;ce<V;ce++)G[ce]=null;this._lineTokens=p.Zv(this._lineTokens,m,G),this._len+=V}setTokens(m,V,G,ce,ve){const De=Lt._massageTokens(this._languageIdCodec.encodeLanguageId(m),G,ce);this._ensureLine(V);const ct=this._lineTokens[V];return this._lineTokens[V]=De,ve?!Lt._equals(ct,De):!1}static _equals(m,V){if(!m||!V)return!m&&!V;const G=vt(m),ce=vt(V);if(G.length!==ce.length)return!1;for(let ve=0,De=G.length;ve<De;ve++)if(G[ve]!==ce[ve])return!1;return!0}acceptEdit(m,V,G){this._acceptDeleteRange(m),this._acceptInsertText(new B.L(m.startLineNumber,m.startColumn),V,G)}_acceptDeleteRange(m){const V=m.startLineNumber-1;if(V>=this._len)return;if(m.startLineNumber===m.endLineNumber){if(m.startColumn===m.endColumn)return;this._lineTokens[V]=Ke.delete(this._lineTokens[V],m.startColumn-1,m.endColumn-1);return}this._lineTokens[V]=Ke.deleteEnding(this._lineTokens[V],m.startColumn-1);const G=m.endLineNumber-1;let ce=null;G<this._len&&(ce=Ke.deleteBeginning(this._lineTokens[G],m.endColumn-1)),this._lineTokens[V]=Ke.append(this._lineTokens[V],ce),this._deleteLines(m.startLineNumber,m.endLineNumber-m.startLineNumber)}_acceptInsertText(m,V,G){if(V===0&&G===0)return;const ce=m.lineNumber-1;if(!(ce>=this._len)){if(V===0){this._lineTokens[ce]=Ke.insert(this._lineTokens[ce],m.column-1,G);return}this._lineTokens[ce]=Ke.deleteEnding(this._lineTokens[ce],m.column-1),this._lineTokens[ce]=Ke.insert(this._lineTokens[ce],m.column-1,G),this._insertLines(m.lineNumber,V)}}}function tn(Ee){return(Ee<<0|0<<8|0<<10|1<<14|2<<23)>>>0}class dn{constructor(m){this._pieces=[],this._isComplete=!1,this._languageIdCodec=m}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(m,V){this._pieces=m||[],this._isComplete=V}setPartial(m,V){let G=m;if(V.length>0){const ve=V[0].getRange(),De=V[V.length-1].getRange();if(!ve||!De)return m;G=m.plusRange(ve).plusRange(De)}let ce=null;for(let ve=0,De=this._pieces.length;ve<De;ve++){const ct=this._pieces[ve];if(ct.endLineNumber<G.startLineNumber)continue;if(ct.startLineNumber>G.endLineNumber){ce=ce||{index:ve};break}if(ct.removeTokens(G),ct.isEmpty()){this._pieces.splice(ve,1),ve--,De--;continue}if(ct.endLineNumber<G.startLineNumber)continue;if(ct.startLineNumber>G.endLineNumber){ce=ce||{index:ve};continue}const[lt,Nt]=ct.split(G);if(lt.isEmpty()){ce=ce||{index:ve};continue}Nt.isEmpty()||(this._pieces.splice(ve,1,lt,Nt),ve++,De++,ce=ce||{index:ve})}return ce=ce||{index:this._pieces.length},V.length>0&&(this._pieces=p.Zv(this._pieces,ce.index,V)),G}isComplete(){return this._isComplete}addSparseTokens(m,V){const G=this._pieces;if(G.length===0)return V;const ce=dn._findFirstPieceWithLine(G,m),ve=G[ce].getLineTokens(m);if(!ve)return V;const De=V.getCount(),ct=ve.getCount();let lt=0;const Nt=[];let It=0,Ft=0;const jt=(bn,Zn)=>{bn!==Ft&&(Ft=bn,Nt[It++]=bn,Nt[It++]=Zn)};for(let bn=0;bn<ct;bn++){const Zn=ve.getStartCharacter(bn),Xn=ve.getEndCharacter(bn),gi=ve.getMetadata(bn),ji=((gi&1?1024:0)|(gi&2?2048:0)|(gi&4?4096:0)|(gi&8?8192:0)|(gi&16?8372224:0)|(gi&32?4286578688:0))>>>0,vr=~ji>>>0;for(;lt<De&&V.getEndOffset(lt)<=Zn;)jt(V.getEndOffset(lt),V.getMetadata(lt)),lt++;for(lt<De&&V.getStartOffset(lt)<Zn&&jt(Zn,V.getMetadata(lt));lt<De&&V.getEndOffset(lt)<Xn;)jt(V.getEndOffset(lt),V.getMetadata(lt)&vr|gi&ji),lt++;if(lt<De)jt(Xn,V.getMetadata(lt)&vr|gi&ji),V.getEndOffset(lt)===Xn&&lt++;else{const Un=Math.min(Math.max(0,lt-1),De-1);jt(Xn,V.getMetadata(Un)&vr|gi&ji)}}for(;lt<De;)jt(V.getEndOffset(lt),V.getMetadata(lt)),lt++;return new Qn.A(new Uint32Array(Nt),V.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(m,V){let G=0,ce=m.length-1;for(;G<ce;){let ve=G+Math.floor((ce-G)/2);if(m[ve].endLineNumber<V)G=ve+1;else if(m[ve].startLineNumber>V)ce=ve-1;else{for(;ve>G&&m[ve-1].startLineNumber<=V&&V<=m[ve-1].endLineNumber;)ve--;return ve}}return G}acceptEdit(m,V,G,ce,ve){for(const De of this._pieces)De.acceptEdit(m,V,G,ce,ve)}}var hn=a(270),Wn=a(89381),Gn=a(72042),wi=a(64862),Ci=a(22075),Xi=a(83158),Nr=function(Ee,m,V,G){var ce=arguments.length,ve=ce<3?m:G===null?G=Object.getOwnPropertyDescriptor(m,V):G,De;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(Ee,m,V,G);else for(var ct=Ee.length-1;ct>=0;ct--)(De=Ee[ct])&&(ve=(ce<3?De(ve):ce>3?De(m,V,ve):De(m,V))||ve);return ce>3&&ve&&Object.defineProperty(m,V,ve),ve},yr=function(Ee,m){return function(V,G){m(V,G,Ee)}};function Xr(){return new oi}function Jr(Ee){const m=Xr();return m.acceptChunk(Ee),m.finish()}function $o(Ee,m){return(typeof Ee=="string"?Jr(Ee):Ee).create(m)}let ms=0;const cs=999,nr=1e4;class tr{constructor(m){this._source=m,this._eos=!1}read(){if(this._eos)return null;const m=[];let V=0,G=0;do{const ce=this._source.read();if(ce===null)return this._eos=!0,V===0?null:m.join("");if(ce.length>0&&(m[V++]=ce,G+=ce.length),G>=64*1024)return m.join("")}while(!0)}}const Br=()=>{throw new Error("Invalid change accessor")};let Mr=class Yh extends S.JT{constructor(m,V,G,ce=null,ve,De,ct){super();this._undoRedoService=ve,this._languageService=De,this._languageConfigurationService=ct,this._onWillDispose=this._register(new O.Q5),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new Ae(jt=>this.handleBeforeFireDecorationsChangedEvent(jt))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new O.Q5),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new O.Q5),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new O.Q5),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new O.Q5),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new O.Q5),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new O.Q5),this._eventEmitter=this._register(new ot),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new O.Q5),ms++,this.id="$model"+ms,this.isForSimpleWidget=G.isForSimpleWidget,typeof ce=="undefined"||ce===null?this._associatedResource=T.o.parse("inmemory://model/"+ms):this._associatedResource=ce,this._attachedEditorCount=0;const{textBuffer:lt,disposable:Nt}=$o(m,G.defaultEOL);this._buffer=lt,this._bufferDisposable=Nt,this._options=Yh.resolveOptions(this._buffer,G);const It=this._buffer.getLineCount(),Ft=this._buffer.getValueLengthInRange(new F.e(1,1,It,this._buffer.getLineLength(It)+1),0);G.largeFileOptimizations?this._isTooLargeForTokenization=Ft>Yh.LARGE_FILE_SIZE_THRESHOLD||It>Yh.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=Ft>Yh.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=V,this._languageRegistryListener=this._languageConfigurationService.onDidChange(jt=>{jt.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=j.PJ(ms),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new ko,this._commandManager=new le.NL(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Lt(this._languageService.languageIdCodec),this._semanticTokens=new dn(this._languageService.languageIdCodec),this._tokenization=new kn(this,this._languageService.languageIdCodec),this._bracketPairColorizer=this._register(new de(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new oe.l(this,this._languageConfigurationService)),this._decorationProvider=this._register(new ee(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(m,V){if(V.detectIndentation){const G=ke(m,V.tabSize,V.insertSpaces);return new v.dJ({tabSize:G.tabSize,indentSize:G.tabSize,insertSpaces:G.insertSpaces,trimAutoWhitespace:V.trimAutoWhitespace,defaultEOL:V.defaultEOL,bracketPairColorizationOptions:V.bracketPairColorizationOptions})}return new v.dJ({tabSize:V.tabSize,indentSize:V.indentSize,insertSpaces:V.insertSpaces,trimAutoWhitespace:V.trimAutoWhitespace,defaultEOL:V.defaultEOL,bracketPairColorizationOptions:V.bracketPairColorizationOptions})}onDidChangeContent(m){return this._eventEmitter.slowEvent(V=>m(V.contentChangedEvent))}onDidChangeContentOrInjectedText(m){return(0,S.F8)(this._eventEmitter.fastEvent(V=>m(V.rawContentChangedEvent)),this._onDidChangeInjectedText.event(V=>m(V)))}get bracketPairs(){return this._bracketPairColorizer}get guides(){return this._guidesTextModelPart}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(m){if(this._backgroundTokenizationState===2)return;const V=m?2:1;this._backgroundTokenizationState!==V&&(this._backgroundTokenizationState=V,this._bracketPairColorizer.handleDidChangeBackgroundTokenizationState(),this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const m=new Tn([],"",`
`,!1,!1,!0,!0);m.dispose(),this._buffer=m,this._bufferDisposable=S.JT.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(m,V){this._isDisposing||(this._bracketPairColorizer.handleDidChangeContent(V),this._tokenization.handleDidChangeContent(V),this._eventEmitter.fire(new On.fV(m,V)))}setValue(m){if(this._assertNotDisposed(),m===null)return;const{textBuffer:V,disposable:G}=$o(m,this._options.defaultEOL);this._setValueFromTextBuffer(V,G)}_createContentChanged2(m,V,G,ce,ve,De,ct){return{changes:[{range:m,rangeOffset:V,rangeLength:G,text:ce}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:ve,isRedoing:De,isFlush:ct}}_setValueFromTextBuffer(m,V){this._assertNotDisposed();const G=this.getFullModelRange(),ce=this.getValueLengthInRange(G),ve=this.getLineCount(),De=this.getLineMaxColumn(ve);this._buffer=m,this._bufferDisposable.dispose(),this._bufferDisposable=V,this._increaseVersionId(),this._tokens.flush(),this._semanticTokens.flush(),this._decorations=Object.create(null),this._decorationsTree=new ko,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new On.dQ([new On.Jx],this._versionId,!1,!1),this._createContentChanged2(new F.e(1,1,ve,De),0,ce,this.getValue(),!1,!1,!0))}setEOL(m){this._assertNotDisposed();const V=m===1?`\r
`:`
`;if(this._buffer.getEOL()===V)return;const G=this.getFullModelRange(),ce=this.getValueLengthInRange(G),ve=this.getLineCount(),De=this.getLineMaxColumn(ve);this._onBeforeEOLChange(),this._buffer.setEOL(V),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new On.dQ([new On.CZ],this._versionId,!1,!1),this._createContentChanged2(new F.e(1,1,ve,De),0,ce,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const m=this.getVersionId(),V=this._decorationsTree.collectNodesPostOrder();for(let G=0,ce=V.length;G<ce;G++){const ve=V[G],De=ve.range,ct=ve.cachedAbsoluteStart-ve.start,lt=this._buffer.getOffsetAt(De.startLineNumber,De.startColumn),Nt=this._buffer.getOffsetAt(De.endLineNumber,De.endColumn);ve.cachedAbsoluteStart=lt,ve.cachedAbsoluteEnd=Nt,ve.cachedVersionId=m,ve.start=lt-ct,ve.end=Nt-ct,je(ve)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenization.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenization.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let m=0,V=0;const G=this._buffer.getLineCount();for(let ce=1;ce<=G;ce++){const ve=this._buffer.getLineLength(ce);ve>=nr?V+=ve:m+=ve}return V>m}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(m){this._assertNotDisposed();const V=typeof m.tabSize!="undefined"?m.tabSize:this._options.tabSize,G=typeof m.indentSize!="undefined"?m.indentSize:this._options.indentSize,ce=typeof m.insertSpaces!="undefined"?m.insertSpaces:this._options.insertSpaces,ve=typeof m.trimAutoWhitespace!="undefined"?m.trimAutoWhitespace:this._options.trimAutoWhitespace,De=typeof m.bracketColorizationOptions!="undefined"?m.bracketColorizationOptions:this._options.bracketPairColorizationOptions,ct=new v.dJ({tabSize:V,indentSize:G,insertSpaces:ce,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:ve,bracketPairColorizationOptions:De});if(this._options.equals(ct))return;const lt=this._options.createChangeEvent(ct);this._options=ct,this._bracketPairColorizer.handleDidChangeOptions(lt),this._decorationProvider.handleDidChangeOptions(lt),this._onDidChangeOptions.fire(lt)}detectIndentation(m,V){this._assertNotDisposed();const G=ke(this._buffer,V,m);this.updateOptions({insertSpaces:G.insertSpaces,tabSize:G.tabSize,indentSize:G.tabSize})}normalizeIndentation(m){return this._assertNotDisposed(),(0,Xi.x)(m,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(m=null){const V=this.findMatches(j.Qe.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(m,V.map(G=>({range:G.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(m){this._assertNotDisposed();const V=this._validatePosition(m.lineNumber,m.column,0);return this._buffer.getOffsetAt(V.lineNumber,V.column)}getPositionAt(m){this._assertNotDisposed();const V=Math.min(this._buffer.getLength(),Math.max(0,m));return this._buffer.getPositionAt(V)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(m){this._versionId=m}_overwriteAlternativeVersionId(m){this._alternativeVersionId=m}_overwriteInitialUndoRedoSnapshot(m){this._initialUndoRedoSnapshot=m}getValue(m,V=!1){this._assertNotDisposed();const G=this.getFullModelRange(),ce=this.getValueInRange(G,m);return V?this._buffer.getBOM()+ce:ce}createSnapshot(m=!1){return new tr(this._buffer.createSnapshot(m))}getValueLength(m,V=!1){this._assertNotDisposed();const G=this.getFullModelRange(),ce=this.getValueLengthInRange(G,m);return V?this._buffer.getBOM().length+ce:ce}getValueInRange(m,V=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(m),V)}getValueLengthInRange(m,V=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(m),V)}getCharacterCountInRange(m,V=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(m),V)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(m){if(this._assertNotDisposed(),m<1||m>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(m)}getLineLength(m){if(this._assertNotDisposed(),m<1||m>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(m)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(m){return this._assertNotDisposed(),1}getLineMaxColumn(m){if(this._assertNotDisposed(),m<1||m>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(m)+1}getLineFirstNonWhitespaceColumn(m){if(this._assertNotDisposed(),m<1||m>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(m)}getLineLastNonWhitespaceColumn(m){if(this._assertNotDisposed(),m<1||m>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(m)}_validateRangeRelaxedNoAllocations(m){const V=this._buffer.getLineCount(),G=m.startLineNumber,ce=m.startColumn;let ve=Math.floor(typeof G=="number"&&!isNaN(G)?G:1),De=Math.floor(typeof ce=="number"&&!isNaN(ce)?ce:1);if(ve<1)ve=1,De=1;else if(ve>V)ve=V,De=this.getLineMaxColumn(ve);else if(De<=1)De=1;else{const Ft=this.getLineMaxColumn(ve);De>=Ft&&(De=Ft)}const ct=m.endLineNumber,lt=m.endColumn;let Nt=Math.floor(typeof ct=="number"&&!isNaN(ct)?ct:1),It=Math.floor(typeof lt=="number"&&!isNaN(lt)?lt:1);if(Nt<1)Nt=1,It=1;else if(Nt>V)Nt=V,It=this.getLineMaxColumn(Nt);else if(It<=1)It=1;else{const Ft=this.getLineMaxColumn(Nt);It>=Ft&&(It=Ft)}return G===ve&&ce===De&&ct===Nt&&lt===It&&m instanceof F.e&&!(m instanceof x.Y)?m:new F.e(ve,De,Nt,It)}_isValidPosition(m,V,G){if(typeof m!="number"||typeof V!="number"||isNaN(m)||isNaN(V)||m<1||V<1||(m|0)!==m||(V|0)!==V)return!1;const ce=this._buffer.getLineCount();if(m>ce)return!1;if(V===1)return!0;const ve=this.getLineMaxColumn(m);if(V>ve)return!1;if(G===1){const De=this._buffer.getLineCharCode(m,V-2);if(j.ZG(De))return!1}return!0}_validatePosition(m,V,G){const ce=Math.floor(typeof m=="number"&&!isNaN(m)?m:1),ve=Math.floor(typeof V=="number"&&!isNaN(V)?V:1),De=this._buffer.getLineCount();if(ce<1)return new B.L(1,1);if(ce>De)return new B.L(De,this.getLineMaxColumn(De));if(ve<=1)return new B.L(ce,1);const ct=this.getLineMaxColumn(ce);if(ve>=ct)return new B.L(ce,ct);if(G===1){const lt=this._buffer.getLineCharCode(ce,ve-2);if(j.ZG(lt))return new B.L(ce,ve-1)}return new B.L(ce,ve)}validatePosition(m){const V=1;return this._assertNotDisposed(),m instanceof B.L&&this._isValidPosition(m.lineNumber,m.column,V)?m:this._validatePosition(m.lineNumber,m.column,V)}_isValidRange(m,V){const G=m.startLineNumber,ce=m.startColumn,ve=m.endLineNumber,De=m.endColumn;if(!this._isValidPosition(G,ce,0)||!this._isValidPosition(ve,De,0))return!1;if(V===1){const ct=ce>1?this._buffer.getLineCharCode(G,ce-2):0,lt=De>1&&De<=this._buffer.getLineLength(ve)?this._buffer.getLineCharCode(ve,De-2):0,Nt=j.ZG(ct),It=j.ZG(lt);return!Nt&&!It}return!0}validateRange(m){const V=1;if(this._assertNotDisposed(),m instanceof F.e&&!(m instanceof x.Y)&&this._isValidRange(m,V))return m;const G=this._validatePosition(m.startLineNumber,m.startColumn,0),ce=this._validatePosition(m.endLineNumber,m.endColumn,0),ve=G.lineNumber,De=G.column,ct=ce.lineNumber,lt=ce.column;if(V===1){const Nt=De>1?this._buffer.getLineCharCode(ve,De-2):0,It=lt>1&&lt<=this._buffer.getLineLength(ct)?this._buffer.getLineCharCode(ct,lt-2):0,Ft=j.ZG(Nt),jt=j.ZG(It);return!Ft&&!jt?new F.e(ve,De,ct,lt):ve===ct&&De===lt?new F.e(ve,De-1,ct,lt-1):Ft&&jt?new F.e(ve,De-1,ct,lt+1):Ft?new F.e(ve,De-1,ct,lt):new F.e(ve,De,ct,lt+1)}return new F.e(ve,De,ct,lt)}modifyPosition(m,V){this._assertNotDisposed();const G=this.getOffsetAt(m)+V;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,G)))}getFullModelRange(){this._assertNotDisposed();const m=this.getLineCount();return new F.e(1,1,m,this.getLineMaxColumn(m))}findMatchesLineByLine(m,V,G,ce){return this._buffer.findMatchesLineByLine(m,V,G,ce)}findMatches(m,V,G,ce,ve,De,ct=cs){this._assertNotDisposed();let lt=null;V!==null&&(Array.isArray(V)||(V=[V]),V.every(Ft=>F.e.isIRange(Ft))&&(lt=V.map(Ft=>this.validateRange(Ft)))),lt===null&&(lt=[this.getFullModelRange()]),lt=lt.sort((Ft,jt)=>Ft.startLineNumber-jt.startLineNumber||Ft.startColumn-jt.startColumn);const Nt=[];Nt.push(lt.reduce((Ft,jt)=>F.e.areIntersecting(Ft,jt)?Ft.plusRange(jt):(Nt.push(Ft),jt)));let It;if(!G&&m.indexOf(`
`)<0){const jt=new Fi.bc(m,G,ce,ve).parseSearchRequest();if(!jt)return[];It=bn=>this.findMatchesLineByLine(bn,jt,De,ct)}else It=Ft=>Fi.pM.findMatches(this,new Fi.bc(m,G,ce,ve),Ft,De,ct);return Nt.map(It).reduce((Ft,jt)=>Ft.concat(jt),[])}findNextMatch(m,V,G,ce,ve,De){this._assertNotDisposed();const ct=this.validatePosition(V);if(!G&&m.indexOf(`
`)<0){const Nt=new Fi.bc(m,G,ce,ve).parseSearchRequest();if(!Nt)return null;const It=this.getLineCount();let Ft=new F.e(ct.lineNumber,ct.column,It,this.getLineMaxColumn(It)),jt=this.findMatchesLineByLine(Ft,Nt,De,1);return Fi.pM.findNextMatch(this,new Fi.bc(m,G,ce,ve),ct,De),jt.length>0||(Ft=new F.e(1,1,ct.lineNumber,this.getLineMaxColumn(ct.lineNumber)),jt=this.findMatchesLineByLine(Ft,Nt,De,1),jt.length>0)?jt[0]:null}return Fi.pM.findNextMatch(this,new Fi.bc(m,G,ce,ve),ct,De)}findPreviousMatch(m,V,G,ce,ve,De){this._assertNotDisposed();const ct=this.validatePosition(V);return Fi.pM.findPreviousMatch(this,new Fi.bc(m,G,ce,ve),ct,De)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(m){if((this.getEOL()===`
`?0:1)!==m)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(m)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(m){return m instanceof v.Qi?m:new v.Qi(m.identifier||null,this.validateRange(m.range),m.text,m.forceMoveMarkers||!1,m.isAutoWhitespaceEdit||!1,m._isTracked||!1)}_validateEditOperations(m){const V=[];for(let G=0,ce=m.length;G<ce;G++)V[G]=this._validateEditOperation(m[G]);return V}pushEditOperations(m,V,G){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(m,this._validateEditOperations(V),G)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(m,V,G){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const ce=V.map(De=>({range:this.validateRange(De.range),text:De.text}));let ve=!0;if(m)for(let De=0,ct=m.length;De<ct;De++){const lt=m[De];let Nt=!1;for(let It=0,Ft=ce.length;It<Ft;It++){const jt=ce[It].range,bn=jt.startLineNumber>lt.endLineNumber,Zn=lt.startLineNumber>jt.endLineNumber;if(!bn&&!Zn){Nt=!0;break}}if(!Nt){ve=!1;break}}if(ve)for(let De=0,ct=this._trimAutoWhitespaceLines.length;De<ct;De++){const lt=this._trimAutoWhitespaceLines[De],Nt=this.getLineMaxColumn(lt);let It=!0;for(let Ft=0,jt=ce.length;Ft<jt;Ft++){const bn=ce[Ft].range,Zn=ce[Ft].text;if(!(lt<bn.startLineNumber||lt>bn.endLineNumber)&&!(lt===bn.startLineNumber&&bn.startColumn===Nt&&bn.isEmpty()&&Zn&&Zn.length>0&&Zn.charAt(0)===`
`)&&!(lt===bn.startLineNumber&&bn.startColumn===1&&bn.isEmpty()&&Zn&&Zn.length>0&&Zn.charAt(Zn.length-1)===`
`)){It=!1;break}}if(It){const Ft=new F.e(lt,1,lt,Nt);V.push(new v.Qi(null,Ft,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(m,V,G)}_applyUndo(m,V,G,ce){const ve=m.map(De=>{const ct=this.getPositionAt(De.newPosition),lt=this.getPositionAt(De.newEnd);return{range:new F.e(ct.lineNumber,ct.column,lt.lineNumber,lt.column),text:De.oldText}});this._applyUndoRedoEdits(ve,V,!0,!1,G,ce)}_applyRedo(m,V,G,ce){const ve=m.map(De=>{const ct=this.getPositionAt(De.oldPosition),lt=this.getPositionAt(De.oldEnd);return{range:new F.e(ct.lineNumber,ct.column,lt.lineNumber,lt.column),text:De.newText}});this._applyUndoRedoEdits(ve,V,!1,!0,G,ce)}_applyUndoRedoEdits(m,V,G,ce,ve,De){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=G,this._isRedoing=ce,this.applyEdits(m,!1),this.setEOL(V),this._overwriteAlternativeVersionId(ve)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(De),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(m,V=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const G=this._validateEditOperations(m);return this._doApplyEdits(G,V)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(m,V){const G=this._buffer.getLineCount(),ce=this._buffer.applyEdits(m,this._options.trimAutoWhitespace,V),ve=this._buffer.getLineCount(),De=ce.changes;if(this._trimAutoWhitespaceLines=ce.trimAutoWhitespaceLineNumbers,De.length!==0){for(let Nt=0,It=De.length;Nt<It;Nt++){const Ft=De[Nt],[jt,bn,Zn]=(0,$t.Q)(Ft.text);this._tokens.acceptEdit(Ft.range,jt,bn),this._semanticTokens.acceptEdit(Ft.range,jt,bn,Zn,Ft.text.length>0?Ft.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(Ft.rangeOffset,Ft.rangeLength,Ft.text.length,Ft.forceMoveMarkers)}const ct=[];this._increaseVersionId();let lt=G;for(let Nt=0,It=De.length;Nt<It;Nt++){const Ft=De[Nt],[jt]=(0,$t.Q)(Ft.text);this._onDidChangeDecorations.fire();const bn=Ft.range.startLineNumber,Zn=Ft.range.endLineNumber,Xn=Zn-bn,gi=jt,ji=Math.min(Xn,gi),vr=gi-Xn,Un=ve-lt-vr+bn,fn=Un,Vo=Un+gi,jo=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new B.L(fn,1)),this.getOffsetAt(new B.L(Vo,this.getLineMaxColumn(Vo))),0),Uo=On.gk.fromDecorations(jo),qs=new p.H9(Uo);for(let ss=ji;ss>=0;ss--){const va=bn+ss,ps=Un+ss;qs.takeFromEndWhile(Ss=>Ss.lineNumber>ps);const wo=qs.takeFromEndWhile(Ss=>Ss.lineNumber===ps);ct.push(new On.rU(va,this.getLineContent(ps),wo))}if(ji<Xn){const ss=bn+ji;ct.push(new On.lN(ss+1,Zn))}if(ji<gi){const ss=new p.H9(Uo),va=bn+ji,ps=gi-ji,wo=ve-lt-ps+va+1,Ss=[],ts=[];for(let gr=0;gr<ps;gr++){const ns=wo+gr;ts[gr]=this.getLineContent(ns),ss.takeWhile(xr=>xr.lineNumber<ns),Ss[gr]=ss.takeWhile(xr=>xr.lineNumber===ns)}ct.push(new On.Tx(va+1,bn+gi,ts,Ss))}lt+=vr}this._emitContentChangedEvent(new On.dQ(ct,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:De,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return ce.reverseEdits===null?void 0:ce.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(m){if(m===null||m.size===0)return;const G=[...m].map(ce=>new On.rU(ce,this.getLineContent(ce),this._getInjectedTextInLine(ce)));this._onDidChangeInjectedText.fire(new On.D8(G))}changeDecorations(m,V=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(V,m)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(m,V){const G={addDecoration:(ve,De)=>this._deltaDecorationsImpl(m,[],[{range:ve,options:De}])[0],changeDecoration:(ve,De)=>{this._changeDecorationImpl(ve,De)},changeDecorationOptions:(ve,De)=>{this._changeDecorationOptionsImpl(ve,J(De))},removeDecoration:ve=>{this._deltaDecorationsImpl(m,[ve],[])},deltaDecorations:(ve,De)=>ve.length===0&&De.length===0?[]:this._deltaDecorationsImpl(m,ve,De)};let ce=null;try{ce=V(G)}catch(ve){(0,z.dL)(ve)}return G.addDecoration=Br,G.changeDecoration=Br,G.changeDecorationOptions=Br,G.removeDecoration=Br,G.deltaDecorations=Br,ce}deltaDecorations(m,V,G=0){if(this._assertNotDisposed(),m||(m=[]),m.length===0&&V.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(G,m,V)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(m){return this.getDecorationRange(m)}_setTrackedRange(m,V,G){const ce=m?this._decorations[m]:null;if(!ce)return V?this._deltaDecorationsImpl(0,[],[{range:V,options:Ct[G]}])[0]:null;if(!V)return this._decorationsTree.delete(ce),delete this._decorations[ce.id],null;const ve=this._validateRangeRelaxedNoAllocations(V),De=this._buffer.getOffsetAt(ve.startLineNumber,ve.startColumn),ct=this._buffer.getOffsetAt(ve.endLineNumber,ve.endColumn);return this._decorationsTree.delete(ce),ce.reset(this.getVersionId(),De,ct,ve),ce.setOptions(Ct[G]),this._decorationsTree.insert(ce),ce.id}removeAllDecorationsWithOwnerId(m){if(this._isDisposed)return;const V=this._decorationsTree.collectNodesFromOwner(m);for(let G=0,ce=V.length;G<ce;G++){const ve=V[G];this._decorationsTree.delete(ve),delete this._decorations[ve.id]}}getDecorationOptions(m){const V=this._decorations[m];return V?V.options:null}getDecorationRange(m){const V=this._decorations[m];return V?this._decorationsTree.getNodeRange(this,V):null}getLineDecorations(m,V=0,G=!1){return m<1||m>this.getLineCount()?[]:this.getLinesDecorations(m,m,V,G)}getLinesDecorations(m,V,G=0,ce=!1){const ve=this.getLineCount(),De=Math.min(ve,Math.max(1,m)),ct=Math.min(ve,Math.max(1,V)),lt=this.getLineMaxColumn(ct),Nt=new F.e(De,1,ct,lt),It=this._getDecorationsInRange(Nt,G,ce);return It.push(...this._decorationProvider.getDecorationsInRange(Nt,G,ce)),It}getDecorationsInRange(m,V=0,G=!1){const ce=this.validateRange(m),ve=this._getDecorationsInRange(ce,V,G);return ve.push(...this._decorationProvider.getDecorationsInRange(ce,V,G)),ve}getOverviewRulerDecorations(m=0,V=!1){return this._decorationsTree.getAll(this,m,V,!0)}getInjectedTextDecorations(m=0){return this._decorationsTree.getAllInjectedText(this,m)}_getInjectedTextInLine(m){const V=this._buffer.getOffsetAt(m,1),G=V+this._buffer.getLineLength(m),ce=this._decorationsTree.getInjectedTextInInterval(this,V,G,0);return On.gk.fromDecorations(ce).filter(ve=>ve.lineNumber===m)}getAllDecorations(m=0,V=!1){let G=this._decorationsTree.getAll(this,m,V,!1);return G=G.concat(this._decorationProvider.getAllDecorations(m,V)),G}_getDecorationsInRange(m,V,G){const ce=this._buffer.getOffsetAt(m.startLineNumber,m.startColumn),ve=this._buffer.getOffsetAt(m.endLineNumber,m.endColumn);return this._decorationsTree.getAllInInterval(this,ce,ve,V,G)}getRangeAt(m,V){return this._buffer.getRangeAt(m,V-m)}_changeDecorationImpl(m,V){const G=this._decorations[m];if(!G)return;if(G.options.after){const ct=this.getDecorationRange(m);this._onDidChangeDecorations.recordLineAffectedByInjectedText(ct.endLineNumber)}if(G.options.before){const ct=this.getDecorationRange(m);this._onDidChangeDecorations.recordLineAffectedByInjectedText(ct.startLineNumber)}const ce=this._validateRangeRelaxedNoAllocations(V),ve=this._buffer.getOffsetAt(ce.startLineNumber,ce.startColumn),De=this._buffer.getOffsetAt(ce.endLineNumber,ce.endColumn);this._decorationsTree.delete(G),G.reset(this.getVersionId(),ve,De,ce),this._decorationsTree.insert(G),this._onDidChangeDecorations.checkAffectedAndFire(G.options),G.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(ce.endLineNumber),G.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(ce.startLineNumber)}_changeDecorationOptionsImpl(m,V){const G=this._decorations[m];if(!G)return;const ce=!!(G.options.overviewRuler&&G.options.overviewRuler.color),ve=!!(V.overviewRuler&&V.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(G.options),this._onDidChangeDecorations.checkAffectedAndFire(V),G.options.after||V.after){const De=this._decorationsTree.getNodeRange(this,G);this._onDidChangeDecorations.recordLineAffectedByInjectedText(De.endLineNumber)}if(G.options.before||V.before){const De=this._decorationsTree.getNodeRange(this,G);this._onDidChangeDecorations.recordLineAffectedByInjectedText(De.startLineNumber)}ce!==ve?(this._decorationsTree.delete(G),G.setOptions(V),this._decorationsTree.insert(G)):G.setOptions(V)}_deltaDecorationsImpl(m,V,G){const ce=this.getVersionId(),ve=V.length;let De=0;const ct=G.length;let lt=0;const Nt=new Array(ct);for(;De<ve||lt<ct;){let It=null;if(De<ve){do It=this._decorations[V[De++]];while(!It&&De<ve);if(It){if(It.options.after){const Ft=this._decorationsTree.getNodeRange(this,It);this._onDidChangeDecorations.recordLineAffectedByInjectedText(Ft.endLineNumber)}if(It.options.before){const Ft=this._decorationsTree.getNodeRange(this,It);this._onDidChangeDecorations.recordLineAffectedByInjectedText(Ft.startLineNumber)}this._decorationsTree.delete(It),this._onDidChangeDecorations.checkAffectedAndFire(It.options)}}if(lt<ct){if(!It){const gi=++this._lastDecorationId,ji=`${this._instanceId};${gi}`;It=new Fe(ji,0,0),this._decorations[ji]=It}const Ft=G[lt],jt=this._validateRangeRelaxedNoAllocations(Ft.range),bn=J(Ft.options),Zn=this._buffer.getOffsetAt(jt.startLineNumber,jt.startColumn),Xn=this._buffer.getOffsetAt(jt.endLineNumber,jt.endColumn);It.ownerId=m,It.reset(ce,Zn,Xn,jt),It.setOptions(bn),It.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(jt.endLineNumber),It.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(jt.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(bn),this._decorationsTree.insert(It),Nt[lt]=It.id,lt++}else It&&delete this._decorations[It.id]}return Nt}setTokens(m,V=!1){if(m.length!==0){const G=[];for(let ce=0,ve=m.length;ce<ve;ce++){const De=m[ce];let ct=0,lt=0,Nt=!1;for(let It=De.startLineNumber;It<=De.endLineNumber;It++)Nt?(this._tokens.setTokens(this._languageId,It-1,this._buffer.getLineLength(It),De.getLineTokens(It),!1),lt=It):this._tokens.setTokens(this._languageId,It-1,this._buffer.getLineLength(It),De.getLineTokens(It),!0)&&(Nt=!0,ct=It,lt=It);Nt&&G.push({fromLineNumber:ct,toLineNumber:lt})}G.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:G})}this.handleTokenizationProgress(V)}setSemanticTokens(m,V){this._semanticTokens.set(m,V),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:m!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(m,V){if(this.hasCompleteSemanticTokens())return;const G=this.validateRange(this._semanticTokens.setPartial(m,V));this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:G.startLineNumber,toLineNumber:G.endLineNumber}]})}tokenizeViewport(m,V){m=Math.max(1,m),V=Math.min(this._buffer.getLineCount(),V),this._tokenization.tokenizeViewport(m,V)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(m){this._isDisposing||(this._bracketPairColorizer.handleDidChangeTokens(m),this._onDidChangeTokens.fire(m))}resetTokenization(){this._tokenization.reset()}forceTokenization(m){if(m<1||m>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(m)}isCheapToTokenize(m){return this._tokenization.isCheapToTokenize(m)}tokenizeIfCheap(m){this.isCheapToTokenize(m)&&this.forceTokenization(m)}getLineTokens(m){if(m<1||m>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(m)}_getLineTokens(m){const V=this.getLineContent(m),G=this._tokens.getTokens(this._languageId,m-1,V);return this._semanticTokens.addSparseTokens(m,G)}getLanguageId(){return this._languageId}setMode(m){if(this._languageId===m)return;const V={oldLanguage:this._languageId,newLanguage:m};this._languageId=m,this._bracketPairColorizer.handleDidChangeLanguage(V),this._tokenization.handleDidChangeLanguage(V),this._onDidChangeLanguage.fire(V),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(m,V){const G=this.validatePosition(new B.L(m,V)),ce=this.getLineTokens(G.lineNumber);return ce.getLanguageId(ce.findTokenIndexAtOffset(G.column-1))}getTokenTypeIfInsertingCharacter(m,V,G){const ce=this.validatePosition(new B.L(m,V));return this._tokenization.getTokenTypeIfInsertingCharacter(ce,G)}tokenizeLineWithEdit(m,V,G){const ce=this.validatePosition(m);return this._tokenization.tokenizeLineWithEdit(ce,V,G)}getLanguageConfiguration(m){return this._languageConfigurationService.getLanguageConfiguration(m)}getWordAtPosition(m){this._assertNotDisposed();const V=this.validatePosition(m),G=this.getLineContent(V.lineNumber),ce=this._getLineTokens(V.lineNumber),ve=ce.findTokenIndexAtOffset(V.column-1),[De,ct]=Yh._findLanguageBoundaries(ce,ve),lt=(0,hn.t2)(V.column,this.getLanguageConfiguration(ce.getLanguageId(ve)).getWordDefinition(),G.substring(De,ct),De);if(lt&&lt.startColumn<=m.column&&m.column<=lt.endColumn)return lt;if(ve>0&&De===V.column-1){const[Nt,It]=Yh._findLanguageBoundaries(ce,ve-1),Ft=(0,hn.t2)(V.column,this.getLanguageConfiguration(ce.getLanguageId(ve-1)).getWordDefinition(),G.substring(Nt,It),Nt);if(Ft&&Ft.startColumn<=m.column&&m.column<=Ft.endColumn)return Ft}return null}static _findLanguageBoundaries(m,V){const G=m.getLanguageId(V);let ce=0;for(let De=V;De>=0&&m.getLanguageId(De)===G;De--)ce=m.getStartOffset(De);let ve=m.getLineContent().length;for(let De=V,ct=m.getCount();De<ct&&m.getLanguageId(De)===G;De++)ve=m.getEndOffset(De);return[ce,ve]}getWordUntilPosition(m){const V=this.getWordAtPosition(m);return V?{word:V.word.substr(0,m.column-V.startColumn),startColumn:V.startColumn,endColumn:m.column}:{word:"",startColumn:m.column,endColumn:m.column}}normalizePosition(m,V){return m}getLineIndentColumn(m){return so(this.getLineContent(m))+1}};Mr.MODEL_SYNC_LIMIT=50*1024*1024,Mr.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,Mr.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,Mr.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ci.D.tabSize,indentSize:Ci.D.indentSize,insertSpaces:Ci.D.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ci.D.trimAutoWhitespace,largeFileOptimizations:Ci.D.largeFileOptimizations,bracketPairColorizationOptions:Ci.D.bracketPairColorizationOptions},Mr=Nr([yr(4,wi.tJ),yr(5,Gn.O),yr(6,Wn.c_)],Mr);function so(Ee){let m=0;for(const V of Ee)if(V===" "||V==="	")m++;else break;return m}function jr(Ee){return!!(Ee.options.overviewRuler&&Ee.options.overviewRuler.color)}function No(Ee){return!!Ee.options.after||!!Ee.options.before}class ko{constructor(){this._decorationsTree0=new Q,this._decorationsTree1=new Q,this._injectedTextDecorationsTree=new Q}ensureAllNodesHaveRanges(m){this.getAll(m,0,!1,!1)}_ensureNodesHaveRanges(m,V){for(const G of V)G.range===null&&(G.range=m.getRangeAt(G.cachedAbsoluteStart,G.cachedAbsoluteEnd));return V}getAllInInterval(m,V,G,ce,ve){const De=m.getVersionId(),ct=this._intervalSearch(V,G,ce,ve,De);return this._ensureNodesHaveRanges(m,ct)}_intervalSearch(m,V,G,ce,ve){const De=this._decorationsTree0.intervalSearch(m,V,G,ce,ve),ct=this._decorationsTree1.intervalSearch(m,V,G,ce,ve),lt=this._injectedTextDecorationsTree.intervalSearch(m,V,G,ce,ve);return De.concat(ct).concat(lt)}getInjectedTextInInterval(m,V,G,ce){const ve=m.getVersionId(),De=this._injectedTextDecorationsTree.intervalSearch(V,G,ce,!1,ve);return this._ensureNodesHaveRanges(m,De).filter(ct=>ct.options.showIfCollapsed||!ct.range.isEmpty())}getAllInjectedText(m,V){const G=m.getVersionId(),ce=this._injectedTextDecorationsTree.search(V,!1,G);return this._ensureNodesHaveRanges(m,ce).filter(ve=>ve.options.showIfCollapsed||!ve.range.isEmpty())}getAll(m,V,G,ce){const ve=m.getVersionId(),De=this._search(V,G,ce,ve);return this._ensureNodesHaveRanges(m,De)}_search(m,V,G,ce){if(G)return this._decorationsTree1.search(m,V,ce);{const ve=this._decorationsTree0.search(m,V,ce),De=this._decorationsTree1.search(m,V,ce),ct=this._injectedTextDecorationsTree.search(m,V,ce);return ve.concat(De).concat(ct)}}collectNodesFromOwner(m){const V=this._decorationsTree0.collectNodesFromOwner(m),G=this._decorationsTree1.collectNodesFromOwner(m),ce=this._injectedTextDecorationsTree.collectNodesFromOwner(m);return V.concat(G).concat(ce)}collectNodesPostOrder(){const m=this._decorationsTree0.collectNodesPostOrder(),V=this._decorationsTree1.collectNodesPostOrder(),G=this._injectedTextDecorationsTree.collectNodesPostOrder();return m.concat(V).concat(G)}insert(m){No(m)?this._injectedTextDecorationsTree.insert(m):jr(m)?this._decorationsTree1.insert(m):this._decorationsTree0.insert(m)}delete(m){No(m)?this._injectedTextDecorationsTree.delete(m):jr(m)?this._decorationsTree1.delete(m):this._decorationsTree0.delete(m)}getNodeRange(m,V){const G=m.getVersionId();return V.cachedVersionId!==G&&this._resolveNode(V,G),V.range===null&&(V.range=m.getRangeAt(V.cachedAbsoluteStart,V.cachedAbsoluteEnd)),V.range}_resolveNode(m,V){No(m)?this._injectedTextDecorationsTree.resolveNode(m,V):jr(m)?this._decorationsTree1.resolveNode(m,V):this._decorationsTree0.resolveNode(m,V)}acceptReplace(m,V,G,ce){this._decorationsTree0.acceptReplace(m,V,G,ce),this._decorationsTree1.acceptReplace(m,V,G,ce),this._injectedTextDecorationsTree.acceptReplace(m,V,G,ce)}}function li(Ee){return Ee.replace(/[^a-z0-9\-_]/gi," ")}class tt{constructor(m){this.color=m.color||"",this.darkColor=m.darkColor||""}}class St extends tt{constructor(m){super(m);this._resolvedColor=null,this.position=typeof m.position=="number"?m.position:v.sh.Center}getColor(m){return this._resolvedColor||(m.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,m):this._resolvedColor=this._resolveColor(this.color,m)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(m,V){if(typeof m=="string")return m;const G=m?V.getColor(m.id):null;return G?G.toString():""}}class Pt extends tt{constructor(m){super(m);this.position=m.position}getColor(m){return this._resolvedColor||(m.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,m):this._resolvedColor=this._resolveColor(this.color,m)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(m,V){return typeof m=="string"?d.Il.fromHex(m):V.getColor(m.id)}}class Yt{constructor(m){this.content=m.content||"",this.inlineClassName=m.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=m.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=m.attachedData||null,this.cursorStops=m.cursorStops||null}static from(m){return m instanceof Yt?m:new Yt(m)}}class en{constructor(m){var V,G;this.description=m.description,this.stickiness=m.stickiness||0,this.zIndex=m.zIndex||0,this.className=m.className?li(m.className):null,this.hoverMessage=m.hoverMessage||null,this.glyphMarginHoverMessage=m.glyphMarginHoverMessage||null,this.isWholeLine=m.isWholeLine||!1,this.showIfCollapsed=m.showIfCollapsed||!1,this.collapseOnReplaceEdit=m.collapseOnReplaceEdit||!1,this.overviewRuler=m.overviewRuler?new St(m.overviewRuler):null,this.minimap=m.minimap?new Pt(m.minimap):null,this.glyphMarginClassName=m.glyphMarginClassName?li(m.glyphMarginClassName):null,this.linesDecorationsClassName=m.linesDecorationsClassName?li(m.linesDecorationsClassName):null,this.firstLineDecorationClassName=m.firstLineDecorationClassName?li(m.firstLineDecorationClassName):null,this.marginClassName=m.marginClassName?li(m.marginClassName):null,this.inlineClassName=m.inlineClassName?li(m.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=m.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=m.beforeContentClassName?li(m.beforeContentClassName):null,this.afterContentClassName=m.afterContentClassName?li(m.afterContentClassName):null,this.after=m.after?Yt.from(m.after):null,this.before=m.before?Yt.from(m.before):null,this.hideInCommentTokens=(V=m.hideInCommentTokens)!==null&&V!==void 0?V:!1,this.hideInStringTokens=(G=m.hideInStringTokens)!==null&&G!==void 0?G:!1}static register(m){return new en(m)}static createDynamic(m){return new en(m)}}en.EMPTY=en.register({description:"empty"});const Ct=[en.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),en.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),en.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),en.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function J(Ee){return Ee instanceof en?Ee:en.createDynamic(Ee)}class Ae extends S.JT{constructor(m){super();this.handleBeforeFire=m,this._actual=this._register(new O.Q5),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var m;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const V={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(V)}(m=this._affectedInjectedTextLines)===null||m===void 0||m.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(m){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(m)}checkAffectedAndFire(m){this._affectsMinimap||(this._affectsMinimap=!!(m.minimap&&m.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(m.overviewRuler&&m.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class ot extends S.JT{constructor(){super();this._fastEmitter=this._register(new O.Q5),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new O.Q5),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(m=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=m;const V=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(V),this._slowEmitter.fire(V)}}fire(m){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(m):this._deferredEvent=m;return}this._fastEmitter.fire(m),this._slowEmitter.fire(m)}}},77277:function(Tt,me,a){"use strict";a.d(me,{bc:function(){return T},iE:function(){return F},pM:function(){return v},cM:function(){return c},sz:function(){return C}});var p=a(25924),d=a(24929),z=a(50187),O=a(24314),S=a(84973);const j=999;class T{constructor(E,_,L,N){this.searchString=E,this.isRegex=_,this.matchCase=L,this.wordSeparators=N}parseSearchRequest(){if(this.searchString==="")return null;let E;this.isRegex?E=B(this.searchString):E=this.searchString.indexOf(`
`)>=0;let _=null;try{_=p.GF(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:E,global:!0,unicode:!0})}catch(N){return null}if(!_)return null;let L=!this.isRegex&&!E;return L&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(L=this.matchCase),new S.Tx(_,this.wordSeparators?(0,d.u)(this.wordSeparators):null,L?this.searchString:null)}}function B(M){if(!M||M.length===0)return!1;for(let E=0,_=M.length;E<_;E++)if(M.charCodeAt(E)===92){if(E++,E>=_)break;const N=M.charCodeAt(E);if(N===110||N===114||N===87)return!0}return!1}function F(M,E,_){if(!_)return new S.tk(M,null);const L=[];for(let N=0,b=E.length;N<b;N++)L[N]=E[N];return new S.tk(M,L)}class x{constructor(E){const _=[];let L=0;for(let N=0,b=E.length;N<b;N++)E.charCodeAt(N)===10&&(_[L++]=N);this._lineFeedsOffsets=_}findLineFeedCountBeforeOffset(E){const _=this._lineFeedsOffsets;let L=0,N=_.length-1;if(N===-1||E<=_[0])return 0;for(;L<N;){const b=L+((N-L)/2>>0);_[b]>=E?N=b-1:_[b+1]>=E?(L=b,N=b):L=b+1}return L+1}}class v{static findMatches(E,_,L,N,b){const I=_.parseSearchRequest();return I?I.regex.multiline?this._doFindMatchesMultiline(E,L,new C(I.wordSeparators,I.regex),N,b):this._doFindMatchesLineByLine(E,L,I,N,b):[]}static _getMultilineMatchRange(E,_,L,N,b,I){let k,W=0;N?(W=N.findLineFeedCountBeforeOffset(b),k=_+b+W):k=_+b;let q;if(N){const ae=N.findLineFeedCountBeforeOffset(b+I.length)-W;q=k+I.length+ae}else q=k+I.length;const re=E.getPositionAt(k),de=E.getPositionAt(q);return new O.e(re.lineNumber,re.column,de.lineNumber,de.column)}static _doFindMatchesMultiline(E,_,L,N,b){const I=E.getOffsetAt(_.getStartPosition()),k=E.getValueInRange(_,1),W=E.getEOL()===`\r
`?new x(k):null,q=[];let re=0,de;for(L.reset(0);de=L.next(k);)if(q[re++]=F(this._getMultilineMatchRange(E,I,k,W,de.index,de[0]),de,N),re>=b)return q;return q}static _doFindMatchesLineByLine(E,_,L,N,b){const I=[];let k=0;if(_.startLineNumber===_.endLineNumber){const q=E.getLineContent(_.startLineNumber).substring(_.startColumn-1,_.endColumn-1);return k=this._findMatchesInLine(L,q,_.startLineNumber,_.startColumn-1,k,I,N,b),I}const W=E.getLineContent(_.startLineNumber).substring(_.startColumn-1);k=this._findMatchesInLine(L,W,_.startLineNumber,_.startColumn-1,k,I,N,b);for(let q=_.startLineNumber+1;q<_.endLineNumber&&k<b;q++)k=this._findMatchesInLine(L,E.getLineContent(q),q,0,k,I,N,b);if(k<b){const q=E.getLineContent(_.endLineNumber).substring(0,_.endColumn-1);k=this._findMatchesInLine(L,q,_.endLineNumber,0,k,I,N,b)}return I}static _findMatchesInLine(E,_,L,N,b,I,k,W){const q=E.wordSeparators;if(!k&&E.simpleSearch){const pe=E.simpleSearch,ae=pe.length,ue=_.length;let te=-ae;for(;(te=_.indexOf(pe,te+ae))!==-1;)if((!q||c(q,_,ue,te,ae))&&(I[b++]=new S.tk(new O.e(L,te+1+N,L,te+1+ae+N),null),b>=W))return b;return b}const re=new C(E.wordSeparators,E.regex);let de;re.reset(0);do if(de=re.next(_),de&&(I[b++]=F(new O.e(L,de.index+1+N,L,de.index+1+de[0].length+N),de,k),b>=W))return b;while(de);return b}static findNextMatch(E,_,L,N){const b=_.parseSearchRequest();if(!b)return null;const I=new C(b.wordSeparators,b.regex);return b.regex.multiline?this._doFindNextMatchMultiline(E,L,I,N):this._doFindNextMatchLineByLine(E,L,I,N)}static _doFindNextMatchMultiline(E,_,L,N){const b=new z.L(_.lineNumber,1),I=E.getOffsetAt(b),k=E.getLineCount(),W=E.getValueInRange(new O.e(b.lineNumber,b.column,k,E.getLineMaxColumn(k)),1),q=E.getEOL()===`\r
`?new x(W):null;L.reset(_.column-1);let re=L.next(W);return re?F(this._getMultilineMatchRange(E,I,W,q,re.index,re[0]),re,N):_.lineNumber!==1||_.column!==1?this._doFindNextMatchMultiline(E,new z.L(1,1),L,N):null}static _doFindNextMatchLineByLine(E,_,L,N){const b=E.getLineCount(),I=_.lineNumber,k=E.getLineContent(I),W=this._findFirstMatchInLine(L,k,I,_.column,N);if(W)return W;for(let q=1;q<=b;q++){const re=(I+q-1)%b,de=E.getLineContent(re+1),pe=this._findFirstMatchInLine(L,de,re+1,1,N);if(pe)return pe}return null}static _findFirstMatchInLine(E,_,L,N,b){E.reset(N-1);const I=E.next(_);return I?F(new O.e(L,I.index+1,L,I.index+1+I[0].length),I,b):null}static findPreviousMatch(E,_,L,N){const b=_.parseSearchRequest();if(!b)return null;const I=new C(b.wordSeparators,b.regex);return b.regex.multiline?this._doFindPreviousMatchMultiline(E,L,I,N):this._doFindPreviousMatchLineByLine(E,L,I,N)}static _doFindPreviousMatchMultiline(E,_,L,N){const b=this._doFindMatchesMultiline(E,new O.e(1,1,_.lineNumber,_.column),L,N,10*j);if(b.length>0)return b[b.length-1];const I=E.getLineCount();return _.lineNumber!==I||_.column!==E.getLineMaxColumn(I)?this._doFindPreviousMatchMultiline(E,new z.L(I,E.getLineMaxColumn(I)),L,N):null}static _doFindPreviousMatchLineByLine(E,_,L,N){const b=E.getLineCount(),I=_.lineNumber,k=E.getLineContent(I).substring(0,_.column-1),W=this._findLastMatchInLine(L,k,I,N);if(W)return W;for(let q=1;q<=b;q++){const re=(b+I-q-1)%b,de=E.getLineContent(re+1),pe=this._findLastMatchInLine(L,de,re+1,N);if(pe)return pe}return null}static _findLastMatchInLine(E,_,L,N){let b=null,I;for(E.reset(0);I=E.next(_);)b=F(new O.e(L,I.index+1,L,I.index+1+I[0].length),I,N);return b}}function g(M,E,_,L,N){if(L===0)return!0;const b=E.charCodeAt(L-1);if(M.get(b)!==0||b===13||b===10)return!0;if(N>0){const I=E.charCodeAt(L);if(M.get(I)!==0)return!0}return!1}function D(M,E,_,L,N){if(L+N===_)return!0;const b=E.charCodeAt(L+N);if(M.get(b)!==0||b===13||b===10)return!0;if(N>0){const I=E.charCodeAt(L+N-1);if(M.get(I)!==0)return!0}return!1}function c(M,E,_,L,N){return g(M,E,_,L,N)&&D(M,E,_,L,N)}class C{constructor(E,_){this._wordSeparators=E,this._searchRegex=_,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(E){this._searchRegex.lastIndex=E,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(E){const _=E.length;let L;do{if(this._prevMatchStartIndex+this._prevMatchLength===_||(L=this._searchRegex.exec(E),!L))return null;const N=L.index,b=L[0].length;if(N===this._prevMatchStartIndex&&b===this._prevMatchLength){if(b===0){p.ZH(E,_,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=N,this._prevMatchLength=b,!this._wordSeparators||c(this._wordSeparators,E,_,N,b))return L}while(L);return null}}},59616:function(Tt,me,a){"use strict";a.d(me,{q:function(){return p}});function p(d,z){let O=0,S=0;const j=d.length;for(;S<j;){const T=d.charCodeAt(S);if(T===32)O++;else if(T===9)O=O-O%z+z;else break;S++}return S===j?-1:O}},85215:function(Tt,me,a){"use strict";a.d(me,{p:function(){return z}});var p=a(72065);const d="editorWorkerService",z=(0,p.yh)(d)},89510:function(Tt,me,a){"use strict";a.d(me,{OG:function(){return re},ML:function(){return b},KO:function(){return W},Jc:function(){return L},Vl:function(){return M},Vj:function(){return E}});var p=a(71050),d=a(17301),z=a(70666),O=a(73733),S=a(94565),j=a(98401),T=a(53060),B=a(1432);function F(de){for(let pe=0,ae=de.length;pe<ae;pe+=4){const ue=de[pe+0],te=de[pe+1],K=de[pe+2],U=de[pe+3];de[pe+0]=U,de[pe+1]=K,de[pe+2]=te,de[pe+3]=ue}}function x(de){const pe=new Uint8Array(de.buffer,de.byteOffset,de.length*4);return B.r()||F(pe),T.KN.wrap(pe)}function v(de){const pe=new Uint32Array(g(de));let ae=0;if(pe[ae++]=de.id,de.type==="full")pe[ae++]=1,pe[ae++]=de.data.length,pe.set(de.data,ae),ae+=de.data.length;else{pe[ae++]=2,pe[ae++]=de.deltas.length;for(const ue of de.deltas)pe[ae++]=ue.start,pe[ae++]=ue.deleteCount,ue.data?(pe[ae++]=ue.data.length,pe.set(ue.data,ae),ae+=ue.data.length):pe[ae++]=0}return x(pe)}function g(de){let pe=0;if(pe+=1+1,de.type==="full")pe+=1+de.data.length;else{pe+=1,pe+=(1+1+1)*de.deltas.length;for(const ae of de.deltas)ae.data&&(pe+=ae.data.length)}return pe}var D=a(24314),c=a(71922),C=function(de,pe,ae,ue){function te(K){return K instanceof ae?K:new ae(function(U){U(K)})}return new(ae||(ae=Promise))(function(K,U){function ee(oe){try{le(ue.next(oe))}catch(Ce){U(Ce)}}function X(oe){try{le(ue.throw(oe))}catch(Ce){U(Ce)}}function le(oe){oe.done?K(oe.value):te(oe.value).then(ee,X)}le((ue=ue.apply(de,pe||[])).next())})};function M(de){return de&&!!de.data}function E(de){return de&&Array.isArray(de.edits)}class _{constructor(pe,ae,ue){this.provider=pe,this.tokens=ae,this.error=ue}}function L(de,pe){return de.has(pe)}function N(de,pe){const ae=de.orderedGroups(pe);return ae.length>0?ae[0]:[]}function b(de,pe,ae,ue,te){return C(this,void 0,void 0,function*(){const K=N(de,pe),U=yield Promise.all(K.map(ee=>C(this,void 0,void 0,function*(){let X,le=null;try{X=yield ee.provideDocumentSemanticTokens(pe,ee===ae?ue:null,te)}catch(oe){le=oe,X=null}return(!X||!M(X)&&!E(X))&&(X=null),new _(ee,X,le)})));for(const ee of U){if(ee.error)throw ee.error;if(ee.tokens)return ee}return U.length>0?U[0]:null})}function I(de,pe){const ae=de.orderedGroups(pe);return ae.length>0?ae[0]:null}class k{constructor(pe,ae){this.provider=pe,this.tokens=ae}}function W(de,pe){return de.has(pe)}function q(de,pe){const ae=de.orderedGroups(pe);return ae.length>0?ae[0]:[]}function re(de,pe,ae,ue){return C(this,void 0,void 0,function*(){const te=q(de,pe),K=yield Promise.all(te.map(U=>C(this,void 0,void 0,function*(){let ee;try{ee=yield U.provideDocumentRangeSemanticTokens(pe,ae,ue)}catch(X){(0,d.Cp)(X),ee=null}return(!ee||!M(ee))&&(ee=null),new k(U,ee)})));for(const U of K)if(U.tokens)return U;return K.length>0?K[0]:null})}S.P0.registerCommand("_provideDocumentSemanticTokensLegend",(de,...pe)=>C(void 0,void 0,void 0,function*(){const[ae]=pe;(0,j.p_)(ae instanceof z.o);const ue=de.get(O.q).getModel(ae);if(!ue)return;const{documentSemanticTokensProvider:te}=de.get(c.p),K=I(te,ue);return K?K[0].getLegend():de.get(S.Hy).executeCommand("_provideDocumentRangeSemanticTokensLegend",ae)})),S.P0.registerCommand("_provideDocumentSemanticTokens",(de,...pe)=>C(void 0,void 0,void 0,function*(){const[ae]=pe;(0,j.p_)(ae instanceof z.o);const ue=de.get(O.q).getModel(ae);if(!ue)return;const{documentSemanticTokensProvider:te}=de.get(c.p);if(!L(te,ue))return de.get(S.Hy).executeCommand("_provideDocumentRangeSemanticTokens",ae,ue.getFullModelRange());const K=yield b(te,ue,null,null,p.T.None);if(!K)return;const{provider:U,tokens:ee}=K;if(!ee||!M(ee))return;const X=v({id:0,type:"full",data:ee.data});return ee.resultId&&U.releaseDocumentSemanticTokens(ee.resultId),X})),S.P0.registerCommand("_provideDocumentRangeSemanticTokensLegend",(de,...pe)=>C(void 0,void 0,void 0,function*(){const[ae,ue]=pe;(0,j.p_)(ae instanceof z.o);const te=de.get(O.q).getModel(ae);if(!te)return;const{documentRangeSemanticTokensProvider:K}=de.get(c.p),U=q(K,te);if(U.length===0)return;if(U.length===1)return U[0].getLegend();if(!ue||!D.e.isIRange(ue))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),U[0].getLegend();const ee=yield re(K,te,D.e.lift(ue),p.T.None);if(!!ee)return ee.provider.getLegend()})),S.P0.registerCommand("_provideDocumentRangeSemanticTokens",(de,...pe)=>C(void 0,void 0,void 0,function*(){const[ae,ue]=pe;(0,j.p_)(ae instanceof z.o),(0,j.p_)(D.e.isIRange(ue));const te=de.get(O.q).getModel(ae);if(!te)return;const{documentRangeSemanticTokensProvider:K}=de.get(c.p),U=yield re(K,te,D.e.lift(ue),p.T.None);if(!(!U||!U.tokens))return v({id:0,type:"full",data:U.tokens.data})}))},88191:function(Tt,me,a){"use strict";a.d(me,{A:function(){return F}});var p=a(89954),d=a(43702),z=a(59870),O=a(65026),S=a(72065),j=a(43557),T=function(D,c,C,M){var E=arguments.length,_=E<3?c:M===null?M=Object.getOwnPropertyDescriptor(c,C):M,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(D,c,C,M);else for(var N=D.length-1;N>=0;N--)(L=D[N])&&(_=(E<3?L(_):E>3?L(c,C,_):L(c,C))||_);return E>3&&_&&Object.defineProperty(c,C,_),_},B=function(D,c){return function(C,M){c(C,M,D)}};const F=(0,S.yh)("ILanguageFeatureDebounceService");var x;(function(D){const c=new WeakMap;let C=0;function M(E){let _=c.get(E);return _===void 0&&(_=++C,c.set(E,_)),_}D.of=M})(x||(x={}));class v{constructor(c,C,M,E,_,L){this._logService=c,this._name=C,this._registry=M,this._default=E,this._min=_,this._max=L,this._cache=new d.z6(50,.7)}_key(c){return c.id+this._registry.all(c).reduce((C,M)=>(0,p.SP)(x.of(M),C),0)}get(c){const C=this._key(c),M=this._cache.get(C);return M?(0,z.uZ)(M.value,this._min,this._max):this.default()}update(c,C){const M=this._key(c);let E=this._cache.get(M);E||(E=new z.N(6),this._cache.set(M,E));const _=(0,z.uZ)(E.update(C),this._min,this._max);return this._logService.trace(`[DEBOUNCE: ${this._name}] for ${c.uri.toString()} is ${_}ms`),_}_overall(){const c=new z.nM;for(const[,C]of this._cache)c.update(C.value);return c.value}default(){const c=this._overall()|0||this._default;return(0,z.uZ)(c,this._min,this._max)}}let g=class{constructor(c){this._logService=c,this._data=new Map}for(c,C,M){var E,_,L;const N=(E=M==null?void 0:M.min)!==null&&E!==void 0?E:50,b=(_=M==null?void 0:M.max)!==null&&_!==void 0?_:Math.pow(N,2),I=(L=M==null?void 0:M.key)!==null&&L!==void 0?L:void 0,k=`${x.of(c)},${N}${I?","+I:""}`;let W=this._data.get(k);return W||(W=new v(this._logService,C,c,this._overallAverage()|0||N*1.5,N,b),this._data.set(k,W)),W}_overallAverage(){let c=new z.nM;for(let C of this._data.values())c.update(C.default());return c.value}};g=T([B(0,j.VZ)],g),(0,O.z)(F,g,!0)},71922:function(Tt,me,a){"use strict";a.d(me,{p:function(){return d}});var p=a(72065);const d=(0,p.yh)("ILanguageFeaturesService")},36357:function(Tt,me,a){"use strict";a.d(me,{i:function(){return d}});var p=a(72065);const d=(0,p.yh)("markerDecorationsService")},73733:function(Tt,me,a){"use strict";a.d(me,{q:function(){return d}});var p=a(72065);const d=(0,p.yh)("modelService")},51200:function(Tt,me,a){"use strict";a.d(me,{b$:function(){return ee},e3:function(){return X},tw:function(){return le}});var p=a(4669),d=a(9917),z=a(1432),O=a(17301),S=a(45146),j=a(22075),T=a(68801),B=a(72042),F=a(73733),x=a(71765),v=a(33108),g=a(15393),D=a(71050),c=a(97781),C=a(43557),M=a(64862),E=a(89954),_=a(95215),L=a(66663),N=a(88802),b=a(89510),I=a(36248),k=a(89381),W=a(88191),q=a(84013),re=a(71922),de=function(Te,ge,we,ze){var Qe=arguments.length,Pe=Qe<3?ge:ze===null?ze=Object.getOwnPropertyDescriptor(ge,we):ze,Oe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Pe=Reflect.decorate(Te,ge,we,ze);else for(var qe=Te.length-1;qe>=0;qe--)(Oe=Te[qe])&&(Pe=(Qe<3?Oe(Pe):Qe>3?Oe(ge,we,Pe):Oe(ge,we))||Pe);return Qe>3&&Pe&&Object.defineProperty(ge,we,Pe),Pe},pe=function(Te,ge){return function(we,ze){ge(we,ze,Te)}};function ae(Te){return Te.toString()}function ue(Te){const ge=new E.yP,we=Te.createSnapshot();let ze;for(;ze=we.read();)ge.update(ze);return ge.digest()}class te{constructor(ge,we,ze){this._modelEventListeners=new d.SL,this.model=ge,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(ge.onWillDispose(()=>we(ge))),this._modelEventListeners.add(ge.onDidChangeLanguage(Qe=>ze(ge,Qe)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(ge){this._disposeLanguageSelection(),this._languageSelection=ge,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(ge.languageId)),this.model.setMode(ge.languageId)}}const K=z.IJ||z.dz?1:2;class U{constructor(ge,we,ze,Qe,Pe,Oe,qe,Je){this.uri=ge,this.initialUndoRedoSnapshot=we,this.time=ze,this.sharesUndoRedoStack=Qe,this.heapSize=Pe,this.sha1=Oe,this.versionId=qe,this.alternativeVersionId=Je}}let ee=class Yg extends d.JT{constructor(ge,we,ze,Qe,Pe,Oe,qe,Je,Ne){super();this._configurationService=ge,this._resourcePropertiesService=we,this._themeService=ze,this._logService=Qe,this._undoRedoService=Pe,this._languageService=Oe,this._languageConfigurationService=qe,this._languageFeatureDebounceService=Je,this._onModelAdded=this._register(new p.Q5),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new p.Q5),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new p.Q5),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new Ce(this._themeService,this._languageService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new oe(this._semanticStyling,this,this._themeService,this._configurationService,this._languageFeatureDebounceService,Ne))}static _readModelOptions(ge,we){var ze;let Qe=j.D.tabSize;if(ge.editor&&typeof ge.editor.tabSize!="undefined"){const ie=parseInt(ge.editor.tabSize,10);isNaN(ie)||(Qe=ie),Qe<1&&(Qe=1)}let Pe=Qe;if(ge.editor&&typeof ge.editor.indentSize!="undefined"&&ge.editor.indentSize!=="tabSize"){const ie=parseInt(ge.editor.indentSize,10);isNaN(ie)||(Pe=ie),Pe<1&&(Pe=1)}let Oe=j.D.insertSpaces;ge.editor&&typeof ge.editor.insertSpaces!="undefined"&&(Oe=ge.editor.insertSpaces==="false"?!1:Boolean(ge.editor.insertSpaces));let qe=K;const Je=ge.eol;Je===`\r
`?qe=2:Je===`
`&&(qe=1);let Ne=j.D.trimAutoWhitespace;ge.editor&&typeof ge.editor.trimAutoWhitespace!="undefined"&&(Ne=ge.editor.trimAutoWhitespace==="false"?!1:Boolean(ge.editor.trimAutoWhitespace));let Fe=j.D.detectIndentation;ge.editor&&typeof ge.editor.detectIndentation!="undefined"&&(Fe=ge.editor.detectIndentation==="false"?!1:Boolean(ge.editor.detectIndentation));let ne=j.D.largeFileOptimizations;ge.editor&&typeof ge.editor.largeFileOptimizations!="undefined"&&(ne=ge.editor.largeFileOptimizations==="false"?!1:Boolean(ge.editor.largeFileOptimizations));let Q=j.D.bracketPairColorizationOptions;return((ze=ge.editor)===null||ze===void 0?void 0:ze.bracketPairColorization)&&typeof ge.editor.bracketPairColorization=="object"&&(Q={enabled:!!ge.editor.bracketPairColorization.enabled}),{isForSimpleWidget:we,tabSize:Qe,indentSize:Pe,insertSpaces:Oe,detectIndentation:Fe,defaultEOL:qe,trimAutoWhitespace:Ne,largeFileOptimizations:ne,bracketPairColorizationOptions:Q}}_getEOL(ge,we){if(ge)return this._resourcePropertiesService.getEOL(ge,we);const ze=this._configurationService.getValue("files.eol",{overrideIdentifier:we});return ze&&typeof ze=="string"&&ze!=="auto"?ze:z.OS===3||z.OS===2?`
`:`\r
`}_shouldRestoreUndoStack(){const ge=this._configurationService.getValue("files.restoreUndoStack");return typeof ge=="boolean"?ge:!0}getCreationOptions(ge,we,ze){let Qe=this._modelCreationOptionsByLanguageAndResource[ge+we];if(!Qe){const Pe=this._configurationService.getValue("editor",{overrideIdentifier:ge,resource:we}),Oe=this._getEOL(we,ge);Qe=Yg._readModelOptions({editor:Pe,eol:Oe},ze),this._modelCreationOptionsByLanguageAndResource[ge+we]=Qe}return Qe}_updateModelOptions(){const ge=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const we=Object.keys(this._models);for(let ze=0,Qe=we.length;ze<Qe;ze++){const Pe=we[ze],Oe=this._models[Pe],qe=Oe.model.getLanguageId(),Je=Oe.model.uri,Ne=ge[qe+Je],Fe=this.getCreationOptions(qe,Je,Oe.model.isForSimpleWidget);Yg._setModelOptionsForModel(Oe.model,Fe,Ne)}}static _setModelOptionsForModel(ge,we,ze){ze&&ze.defaultEOL!==we.defaultEOL&&ge.getLineCount()===1&&ge.setEOL(we.defaultEOL===1?0:1),!(ze&&ze.detectIndentation===we.detectIndentation&&ze.insertSpaces===we.insertSpaces&&ze.tabSize===we.tabSize&&ze.indentSize===we.indentSize&&ze.trimAutoWhitespace===we.trimAutoWhitespace&&(0,I.fS)(ze.bracketPairColorizationOptions,we.bracketPairColorizationOptions))&&(we.detectIndentation?(ge.detectIndentation(we.insertSpaces,we.tabSize),ge.updateOptions({trimAutoWhitespace:we.trimAutoWhitespace,bracketColorizationOptions:we.bracketPairColorizationOptions})):ge.updateOptions({insertSpaces:we.insertSpaces,tabSize:we.tabSize,indentSize:we.indentSize,trimAutoWhitespace:we.trimAutoWhitespace,bracketColorizationOptions:we.bracketPairColorizationOptions}))}_insertDisposedModel(ge){this._disposedModels.set(ae(ge.uri),ge),this._disposedModelsHeapSize+=ge.heapSize}_removeDisposedModel(ge){const we=this._disposedModels.get(ae(ge));return we&&(this._disposedModelsHeapSize-=we.heapSize),this._disposedModels.delete(ae(ge)),we}_ensureDisposedModelsHeapSize(ge){if(this._disposedModelsHeapSize>ge){const we=[];for(this._disposedModels.forEach(ze=>{ze.sharesUndoRedoStack||we.push(ze)}),we.sort((ze,Qe)=>ze.time-Qe.time);we.length>0&&this._disposedModelsHeapSize>ge;){const ze=we.shift();this._removeDisposedModel(ze.uri),ze.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(ze.initialUndoRedoSnapshot)}}}_createModelData(ge,we,ze,Qe){const Pe=this.getCreationOptions(we,ze,Qe),Oe=new S.yO(ge,we,Pe,ze,this._undoRedoService,this._languageService,this._languageConfigurationService);if(ze&&this._disposedModels.has(ae(ze))){const Ne=this._removeDisposedModel(ze),Fe=this._undoRedoService.getElements(ze),ne=ue(Oe)===Ne.sha1;if(ne||Ne.sharesUndoRedoStack){for(const Q of Fe.past)(0,_.e9)(Q)&&Q.matchesResource(ze)&&Q.setModel(Oe);for(const Q of Fe.future)(0,_.e9)(Q)&&Q.matchesResource(ze)&&Q.setModel(Oe);this._undoRedoService.setElementsValidFlag(ze,!0,Q=>(0,_.e9)(Q)&&Q.matchesResource(ze)),ne&&(Oe._overwriteVersionId(Ne.versionId),Oe._overwriteAlternativeVersionId(Ne.alternativeVersionId),Oe._overwriteInitialUndoRedoSnapshot(Ne.initialUndoRedoSnapshot))}else Ne.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(Ne.initialUndoRedoSnapshot)}const qe=ae(Oe.uri);if(this._models[qe])throw new Error("ModelService: Cannot add model because it already exists!");const Je=new te(Oe,Ne=>this._onWillDispose(Ne),(Ne,Fe)=>this._onDidChangeLanguage(Ne,Fe));return this._models[qe]=Je,Je}createModel(ge,we,ze,Qe=!1){let Pe;return we?(Pe=this._createModelData(ge,we.languageId,ze,Qe),this.setMode(Pe.model,we)):Pe=this._createModelData(ge,T.bd,ze,Qe),this._onModelAdded.fire(Pe.model),Pe.model}setMode(ge,we){if(!we)return;const ze=this._models[ae(ge.uri)];!ze||ze.setLanguage(we)}getModels(){const ge=[],we=Object.keys(this._models);for(let ze=0,Qe=we.length;ze<Qe;ze++){const Pe=we[ze];ge.push(this._models[Pe].model)}return ge}getModel(ge){const we=ae(ge),ze=this._models[we];return ze?ze.model:null}getSemanticTokensProviderStyling(ge){return this._semanticStyling.get(ge)}_schemaShouldMaintainUndoRedoElements(ge){return ge.scheme===L.lg.file||ge.scheme===L.lg.vscodeRemote||ge.scheme===L.lg.userData||ge.scheme===L.lg.vscodeNotebookCell||ge.scheme==="fake-fs"}_onWillDispose(ge){const we=ae(ge.uri),ze=this._models[we],Qe=this._undoRedoService.getUriComparisonKey(ge.uri)!==ge.uri.toString();let Pe=!1,Oe=0;if(Qe||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(ge.uri)){const Je=this._undoRedoService.getElements(ge.uri);if(Je.past.length>0||Je.future.length>0){for(const Ne of Je.past)(0,_.e9)(Ne)&&Ne.matchesResource(ge.uri)&&(Pe=!0,Oe+=Ne.heapSize(ge.uri),Ne.setModel(ge.uri));for(const Ne of Je.future)(0,_.e9)(Ne)&&Ne.matchesResource(ge.uri)&&(Pe=!0,Oe+=Ne.heapSize(ge.uri),Ne.setModel(ge.uri))}}const qe=Yg.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(Pe)if(!Qe&&Oe>qe){const Je=ze.model.getInitialUndoRedoSnapshot();Je!==null&&this._undoRedoService.restoreSnapshot(Je)}else this._ensureDisposedModelsHeapSize(qe-Oe),this._undoRedoService.setElementsValidFlag(ge.uri,!1,Je=>(0,_.e9)(Je)&&Je.matchesResource(ge.uri)),this._insertDisposedModel(new U(ge.uri,ze.model.getInitialUndoRedoSnapshot(),Date.now(),Qe,Oe,ue(ge),ge.getVersionId(),ge.getAlternativeVersionId()));else if(!Qe){const Je=ze.model.getInitialUndoRedoSnapshot();Je!==null&&this._undoRedoService.restoreSnapshot(Je)}delete this._models[we],ze.dispose(),delete this._modelCreationOptionsByLanguageAndResource[ge.getLanguageId()+ge.uri],this._onModelRemoved.fire(ge)}_onDidChangeLanguage(ge,we){const ze=we.oldLanguage,Qe=ge.getLanguageId(),Pe=this.getCreationOptions(ze,ge.uri,ge.isForSimpleWidget),Oe=this.getCreationOptions(Qe,ge.uri,ge.isForSimpleWidget);Yg._setModelOptionsForModel(ge,Oe,Pe),this._onModelModeChanged.fire({model:ge,oldLanguageId:ze})}};ee.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,ee=de([pe(0,v.Ui),pe(1,x.y),pe(2,c.XE),pe(3,C.VZ),pe(4,M.tJ),pe(5,B.O),pe(6,k.c_),pe(7,W.A),pe(8,re.p)],ee);const X="editor.semanticHighlighting";function le(Te,ge,we){var ze;const Qe=(ze=we.getValue(X,{overrideIdentifier:Te.getLanguageId(),resource:Te.uri}))===null||ze===void 0?void 0:ze.enabled;return typeof Qe=="boolean"?Qe:ge.getColorTheme().semanticHighlighting}let oe=class extends d.JT{constructor(ge,we,ze,Qe,Pe,Oe){super();this._watchers=Object.create(null),this._semanticStyling=ge;const qe=Fe=>{this._watchers[Fe.uri.toString()]=new ke(Fe,this._semanticStyling,ze,Pe,Oe)},Je=(Fe,ne)=>{ne.dispose(),delete this._watchers[Fe.uri.toString()]},Ne=()=>{for(let Fe of we.getModels()){const ne=this._watchers[Fe.uri.toString()];le(Fe,ze,Qe)?ne||qe(Fe):ne&&Je(Fe,ne)}};this._register(we.onModelAdded(Fe=>{le(Fe,ze,Qe)&&qe(Fe)})),this._register(we.onModelRemoved(Fe=>{const ne=this._watchers[Fe.uri.toString()];ne&&Je(Fe,ne)})),this._register(Qe.onDidChangeConfiguration(Fe=>{Fe.affectsConfiguration(X)&&Ne()})),this._register(ze.onDidColorThemeChange(Ne))}};oe=de([pe(1,F.q),pe(2,c.XE),pe(3,v.Ui),pe(4,W.A),pe(5,re.p)],oe);class Ce extends d.JT{constructor(ge,we,ze){super();this._themeService=ge,this._languageService=we,this._logService=ze,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(ge){return this._caches.has(ge)||this._caches.set(ge,new N.$(ge.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(ge)}}class ye{constructor(ge,we,ze){this.provider=ge,this.resultId=we,this.data=ze}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}let ke=class Qh extends d.JT{constructor(ge,we,ze,Qe,Pe){super();this._isDisposed=!1,this._model=ge,this._semanticStyling=we,this._provider=Pe.documentSemanticTokensProvider,this._debounceInformation=Qe.for(this._provider,"DocumentSemanticTokens",{min:Qh.REQUEST_MIN_DELAY,max:Qh.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new g.pY(()=>this._fetchDocumentSemanticTokensNow(),Qh.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const Oe=()=>{(0,d.B9)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const qe of this._provider.all(ge))typeof qe.onDidChange=="function"&&this._documentProvidersChangeListeners.push(qe.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};Oe(),this._register(this._provider.onDidChange(()=>{Oe(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(ze.onDidColorThemeChange(qe=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!(0,b.Jc)(this._provider,this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const ge=new D.A,we=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,ze=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,Qe=(0,b.ML)(this._provider,this._model,we,ze,ge.token);this._currentDocumentRequestCancellationTokenSource=ge;const Pe=[],Oe=this._model.onDidChangeContent(Je=>{Pe.push(Je)}),qe=new q.G(!1);Qe.then(Je=>{if(this._debounceInformation.update(this._model,qe.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,Oe.dispose(),!Je)this._setDocumentSemanticTokens(null,null,null,Pe);else{const{provider:Ne,tokens:Fe}=Je,ne=this._semanticStyling.get(Ne);this._setDocumentSemanticTokens(Ne,Fe||null,ne,Pe)}},Je=>{Je&&(O.n2(Je)||typeof Je.message=="string"&&Je.message.indexOf("busy")!==-1)||O.dL(Je),this._currentDocumentRequestCancellationTokenSource=null,Oe.dispose(),Pe.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(ge,we,ze,Qe,Pe){for(let Oe=0;Oe<Pe;Oe++)ze[Qe+Oe]=ge[we+Oe]}_setDocumentSemanticTokens(ge,we,ze,Qe){const Pe=this._currentDocumentResponse,Oe=()=>{Qe.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){ge&&we&&ge.releaseDocumentSemanticTokens(we.resultId);return}if(!ge||!ze){this._model.setSemanticTokens(null,!1);return}if(!we){this._model.setSemanticTokens(null,!0),Oe();return}if((0,b.Vj)(we)){if(!Pe){this._model.setSemanticTokens(null,!0);return}if(we.edits.length===0)we={resultId:we.resultId,data:Pe.data};else{let qe=0;for(const Q of we.edits)qe+=(Q.data?Q.data.length:0)-Q.deleteCount;const Je=Pe.data,Ne=new Uint32Array(Je.length+qe);let Fe=Je.length,ne=Ne.length;for(let Q=we.edits.length-1;Q>=0;Q--){const ie=we.edits[Q],xe=Fe-(ie.start+ie.deleteCount);xe>0&&(Qh._copy(Je,Fe-xe,Ne,ne-xe,xe),ne-=xe),ie.data&&(Qh._copy(ie.data,0,Ne,ne-ie.data.length,ie.data.length),ne-=ie.data.length),Fe=ie.start}Fe>0&&Qh._copy(Je,0,Ne,0,Fe),we={resultId:we.resultId,data:Ne}}}if((0,b.Vl)(we)){this._currentDocumentResponse=new ye(ge,we.resultId,we.data);const qe=(0,N.h)(we,ze,this._model.getLanguageId());if(Qe.length>0)for(const Je of Qe)for(const Ne of qe)for(const Fe of Je.changes)Ne.applyEdit(Fe.range,Fe.text);this._model.setSemanticTokens(qe,!0)}else this._model.setSemanticTokens(null,!0);Oe()}};ke.REQUEST_MIN_DELAY=300,ke.REQUEST_MAX_DELAY=2e3,ke=de([pe(2,c.XE),pe(3,W.A),pe(4,re.p)],ke)},88216:function(Tt,me,a){"use strict";a.d(me,{S:function(){return d}});var p=a(72065);const d=(0,p.yh)("textModelService")},88802:function(Tt,me,a){"use strict";a.d(me,{$:function(){return D},h:function(){return c}});var p=a(96887),d=a(97781),z=a(43557),O=a(50187),S=a(24314),j=a(23795);class T{constructor(_,L){this._startLineNumber=_,this._tokens=L,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}static create(_,L){return new T(_,new B(L))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(_){return this._startLineNumber<=_&&_<=this._endLineNumber?this._tokens.getLineTokens(_-this._startLineNumber):null}getRange(){const _=this._tokens.getRange();return _&&new S.e(this._startLineNumber+_.startLineNumber,_.startColumn,this._startLineNumber+_.endLineNumber,_.endColumn)}removeTokens(_){const L=_.startLineNumber-this._startLineNumber,N=_.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(L,_.startColumn-1,N,_.endColumn-1),this._updateEndLineNumber()}split(_){const L=_.startLineNumber-this._startLineNumber,N=_.endLineNumber-this._startLineNumber,[b,I,k]=this._tokens.split(L,_.startColumn-1,N,_.endColumn-1);return[new T(this._startLineNumber,b),new T(this._startLineNumber+k,I)]}applyEdit(_,L){const[N,b,I]=(0,j.Q)(L);this.acceptEdit(_,N,b,I,L.length>0?L.charCodeAt(0):0)}acceptEdit(_,L,N,b,I){this._acceptDeleteRange(_),this._acceptInsertText(new O.L(_.startLineNumber,_.startColumn),L,N,b,I),this._updateEndLineNumber()}_acceptDeleteRange(_){if(_.startLineNumber===_.endLineNumber&&_.startColumn===_.endColumn)return;const L=_.startLineNumber-this._startLineNumber,N=_.endLineNumber-this._startLineNumber;if(N<0){const I=N-L;this._startLineNumber-=I;return}const b=this._tokens.getMaxDeltaLine();if(!(L>=b+1)){if(L<0&&N>=b+1){this._startLineNumber=0,this._tokens.clear();return}if(L<0){const I=-L;this._startLineNumber-=I,this._tokens.acceptDeleteRange(_.startColumn-1,0,0,N,_.endColumn-1)}else this._tokens.acceptDeleteRange(0,L,_.startColumn-1,N,_.endColumn-1)}}_acceptInsertText(_,L,N,b,I){if(L===0&&N===0)return;const k=_.lineNumber-this._startLineNumber;if(k<0){this._startLineNumber+=L;return}const W=this._tokens.getMaxDeltaLine();k>=W+1||this._tokens.acceptInsertText(k,_.column-1,L,N,b,I)}}class B{constructor(_){this._tokens=_,this._tokenCount=_.length/4}toString(_){const L=[];for(let N=0;N<this._tokenCount;N++)L.push(`(${this._getDeltaLine(N)+_},${this._getStartCharacter(N)}-${this._getEndCharacter(N)})`);return`[${L.join(",")}]`}getMaxDeltaLine(){const _=this._getTokenCount();return _===0?-1:this._getDeltaLine(_-1)}getRange(){const _=this._getTokenCount();if(_===0)return null;const L=this._getStartCharacter(0),N=this._getDeltaLine(_-1),b=this._getEndCharacter(_-1);return new S.e(0,L+1,N,b+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(_){return this._tokens[4*_]}_getStartCharacter(_){return this._tokens[4*_+1]}_getEndCharacter(_){return this._tokens[4*_+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(_){let L=0,N=this._getTokenCount()-1;for(;L<N;){const b=L+Math.floor((N-L)/2),I=this._getDeltaLine(b);if(I<_)L=b+1;else if(I>_)N=b-1;else{let k=b;for(;k>L&&this._getDeltaLine(k-1)===_;)k--;let W=b;for(;W<N&&this._getDeltaLine(W+1)===_;)W++;return new F(this._tokens.subarray(4*k,4*W+4))}}return this._getDeltaLine(L)===_?new F(this._tokens.subarray(4*L,4*L+4)):null}clear(){this._tokenCount=0}removeTokens(_,L,N,b){const I=this._tokens,k=this._tokenCount;let W=0,q=!1,re=0;for(let de=0;de<k;de++){const pe=4*de,ae=I[pe],ue=I[pe+1],te=I[pe+2],K=I[pe+3];if((ae>_||ae===_&&te>=L)&&(ae<N||ae===N&&ue<=b))q=!0;else{if(W===0&&(re=ae),q){const U=4*W;I[U]=ae-re,I[U+1]=ue,I[U+2]=te,I[U+3]=K}W++}}return this._tokenCount=W,re}split(_,L,N,b){const I=this._tokens,k=this._tokenCount,W=[],q=[];let re=W,de=0,pe=0;for(let ae=0;ae<k;ae++){const ue=4*ae,te=I[ue],K=I[ue+1],U=I[ue+2],ee=I[ue+3];if(te>_||te===_&&U>=L){if(te<N||te===N&&K<=b)continue;re!==q&&(re=q,de=0,pe=te)}re[de++]=te-pe,re[de++]=K,re[de++]=U,re[de++]=ee}return[new B(new Uint32Array(W)),new B(new Uint32Array(q)),pe]}acceptDeleteRange(_,L,N,b,I){const k=this._tokens,W=this._tokenCount,q=b-L;let re=0,de=!1;for(let pe=0;pe<W;pe++){const ae=4*pe;let ue=k[ae],te=k[ae+1],K=k[ae+2];const U=k[ae+3];if(ue<L||ue===L&&K<=N){re++;continue}else if(ue===L&&te<N)ue===b&&K>I?K-=I-N:K=N;else if(ue===L&&te===N)if(ue===b&&K>I)K-=I-N;else{de=!0;continue}else if(ue<b||ue===b&&te<I)if(ue===b&&K>I)ue===L?(te=N,K=te+(K-I)):(te=0,K=te+(K-I));else{de=!0;continue}else if(ue>b){if(q===0&&!de){re=W;break}ue-=q}else if(ue===b&&te>=I)_&&ue===0&&(te+=_,K+=_),ue-=q,te-=I-N,K-=I-N;else throw new Error("Not possible!");const ee=4*re;k[ee]=ue,k[ee+1]=te,k[ee+2]=K,k[ee+3]=U,re++}this._tokenCount=re}acceptInsertText(_,L,N,b,I,k){const W=N===0&&b===1&&(k>=48&&k<=57||k>=65&&k<=90||k>=97&&k<=122),q=this._tokens,re=this._tokenCount;for(let de=0;de<re;de++){const pe=4*de;let ae=q[pe],ue=q[pe+1],te=q[pe+2];if(!(ae<_||ae===_&&te<L)){if(ae===_&&te===L)if(W)te+=1;else continue;else if(ae===_&&ue<L&&L<te)N===0?te+=b:te=L;else{if(ae===_&&ue===L&&W)continue;if(ae===_)if(ae+=N,N===0)ue+=b,te+=b;else{const K=te-ue;ue=I+(ue-L),te=ue+K}else ae+=N}q[pe]=ae,q[pe+1]=ue,q[pe+2]=te}}}}class F{constructor(_){this._tokens=_}getCount(){return this._tokens.length/4}getStartCharacter(_){return this._tokens[4*_+1]}getEndCharacter(_){return this._tokens[4*_+2]}getMetadata(_){return this._tokens[4*_+3]}}var x=a(72042),v=function(E,_,L,N){var b=arguments.length,I=b<3?_:N===null?N=Object.getOwnPropertyDescriptor(_,L):N,k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(E,_,L,N);else for(var W=E.length-1;W>=0;W--)(k=E[W])&&(I=(b<3?k(I):b>3?k(_,L,I):k(_,L))||I);return b>3&&I&&Object.defineProperty(_,L,I),I},g=function(E,_){return function(L,N){_(L,N,E)}};let D=class{constructor(_,L,N,b){this._legend=_,this._themeService=L,this._languageService=N,this._logService=b,this._hashTable=new M,this._hasWarnedOverlappingTokens=!1}getMetadata(_,L,N){const b=this._languageService.languageIdCodec.encodeLanguageId(N),I=this._hashTable.get(_,L,b);let k;if(I)k=I.metadata,this._logService.getLevel()===z.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${_} / ${L}: foreground ${p.NX.getForeground(k)}, fontStyle ${p.NX.getFontStyle(k).toString(2)}`);else{let W=this._legend.tokenTypes[_];const q=[];if(W){let re=L;for(let pe=0;re>0&&pe<this._legend.tokenModifiers.length;pe++)re&1&&q.push(this._legend.tokenModifiers[pe]),re=re>>1;re>0&&this._logService.getLevel()===z.in.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${L.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),q.push("not-in-legend"));const de=this._themeService.getColorTheme().getTokenStyleMetadata(W,q,N);typeof de=="undefined"?k=2147483647:(k=0,typeof de.italic!="undefined"&&(k|=(de.italic?1:0)<<10|1),typeof de.bold!="undefined"&&(k|=(de.bold?2:0)<<10|2),typeof de.underline!="undefined"&&(k|=(de.underline?4:0)<<10|4),typeof de.strikethrough!="undefined"&&(k|=(de.strikethrough?8:0)<<10|8),de.foreground&&(k|=de.foreground<<14|16),k===0&&(k=2147483647))}else this._logService.getLevel()===z.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${_} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),k=2147483647,W="not-in-legend";this._hashTable.add(_,L,b,k),this._logService.getLevel()===z.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${_} (${W}) / ${L} (${q.join(" ")}): foreground ${p.NX.getForeground(k)}, fontStyle ${p.NX.getFontStyle(k).toString(2)}`)}return k}warnOverlappingSemanticTokens(_,L){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${_}, column ${L}`))}};D=v([g(1,d.XE),g(2,x.O),g(3,z.VZ)],D);function c(E,_,L){const N=E.data,b=E.data.length/5|0,I=Math.max(Math.ceil(b/1024),400),k=[];let W=0,q=1,re=0;for(;W<b;){const de=W;let pe=Math.min(de+I,b);if(pe<b){let le=pe;for(;le-1>de&&N[5*le]===0;)le--;if(le-1===de){let oe=pe;for(;oe+1<b&&N[5*oe]===0;)oe++;pe=oe}else pe=le}let ae=new Uint32Array((pe-de)*4),ue=0,te=0,K=0,U=0,ee=0;for(;W<pe;){const le=5*W,oe=N[le],Ce=N[le+1],ye=q+oe|0,ke=oe===0?re+Ce|0:Ce,Te=N[le+2],ge=N[le+3],we=N[le+4],ze=_.getMetadata(ge,we,L);ze!==2147483647&&(te===0&&(te=ye),K===ye&&ee>ke&&(_.warnOverlappingSemanticTokens(ye,ke+1),U<ke?ae[ue-4+2]=ke:ue-=4),ae[ue]=ye-te,ae[ue+1]=ke,ae[ue+2]=ke+Te,ae[ue+3]=ze,ue+=4,K=ye,U=ke,ee=ke+Te),q=ye,re=ke,W++}ue!==ae.length&&(ae=ae.subarray(0,ue));const X=T.create(te,ae);k.push(X)}return k}class C{constructor(_,L,N,b){this.tokenTypeIndex=_,this.tokenModifierSet=L,this.languageId=N,this.metadata=b,this.next=null}}class M{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=M._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<M._SIZES.length?2/3*this._currentLength:0),this._elements=[],M._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(_,L){for(let N=0;N<L;N++)_[N]=null}_hash2(_,L){return(_<<5)-_+L|0}_hashFunc(_,L,N){return this._hash2(this._hash2(_,L),N)%this._currentLength}get(_,L,N){const b=this._hashFunc(_,L,N);let I=this._elements[b];for(;I;){if(I.tokenTypeIndex===_&&I.tokenModifierSet===L&&I.languageId===N)return I;I=I.next}return null}add(_,L,N,b){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const I=this._elements;this._currentLengthIndex++,this._currentLength=M._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<M._SIZES.length?2/3*this._currentLength:0),this._elements=[],M._nullOutEntries(this._elements,this._currentLength);for(const k of I){let W=k;for(;W;){const q=W.next;W.next=null,this._add(W),W=q}}}this._add(new C(_,L,N,b))}_add(_){const L=this._hashFunc(_.tokenTypeIndex,_.tokenModifierSet,_.languageId);_.next=this._elements[L],this._elements[L]=_}}M._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]},71765:function(Tt,me,a){"use strict";a.d(me,{V:function(){return d},y:function(){return z}});var p=a(72065);const d=(0,p.yh)("textResourceConfigurationService"),z=(0,p.yh)("textResourcePropertiesService")},31446:function(Tt,me,a){"use strict";a.d(me,{a:function(){return j}});var p=a(24314),d=a(77277),z=a(25924),O=a(98401),S=a(270);class j{static computeUnicodeHighlights(v,g,D){const c=D?D.startLineNumber:1,C=D?D.endLineNumber:v.getLineCount(),M=new B(g),E=M.getCandidateCodePoints();let _;E==="allNonBasicAscii"?_=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):_=new RegExp(`${T(Array.from(E))}`,"g");const L=new d.sz(null,_),N=[];let b=!1,I,k=0,W=0,q=0;e:for(let re=c,de=C;re<=de;re++){const pe=v.getLineContent(re),ae=pe.length;L.reset(0);do if(I=L.next(pe),I){let ue=I.index,te=I.index+I[0].length;if(ue>0){const X=pe.charCodeAt(ue-1);z.ZG(X)&&ue--}if(te+1<ae){const X=pe.charCodeAt(te-1);z.ZG(X)&&te++}const K=pe.substring(ue,te),U=(0,S.t2)(ue+1,S.Af,pe,0),ee=M.shouldHighlightNonBasicASCII(K,U?U.word:null);if(ee!==0){ee===3?k++:ee===2?W++:ee===1?q++:(0,O.vE)(ee);const X=1e3;if(N.length>=X){b=!0;break e}N.push(new p.e(re,ue+1,re,te+1))}}while(I)}return{ranges:N,hasMore:b,ambiguousCharacterCount:k,invisibleCharacterCount:W,nonBasicAsciiCharacterCount:q}}static computeUnicodeHighlightReason(v,g){const D=new B(g);switch(D.shouldHighlightNonBasicASCII(v,null)){case 0:return null;case 2:return{kind:1};case 3:{const C=v.codePointAt(0),M=D.ambiguousCharacters.getPrimaryConfusable(C),E=z.ZK.getLocales().filter(_=>!z.ZK.getInstance(new Set([...g.allowedLocales,_])).isAmbiguous(C));return{kind:0,confusableWith:String.fromCodePoint(M),notAmbiguousInLocales:E}}case 1:return{kind:2}}}}function T(x,v){return`[${z.ec(x.map(D=>String.fromCodePoint(D)).join(""))}]`}class B{constructor(v){this.options=v,this.allowedCodePoints=new Set(v.allowedCodePoints),this.ambiguousCharacters=z.ZK.getInstance(new Set(v.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const v=new Set;if(this.options.invisibleCharacters)for(const g of z.vU.codePoints)F(String.fromCodePoint(g))||v.add(g);if(this.options.ambiguousCharacters)for(const g of this.ambiguousCharacters.getConfusableCodePoints())v.add(g);for(const g of this.allowedCodePoints)v.delete(g);return v}shouldHighlightNonBasicASCII(v,g){const D=v.codePointAt(0);if(this.allowedCodePoints.has(D))return 0;if(this.options.nonBasicASCII)return 1;let c=!1,C=!1;if(g)for(let M of g){const E=M.codePointAt(0),_=z.$i(M);c=c||_,!_&&!this.ambiguousCharacters.isAmbiguous(E)&&!z.vU.isInvisibleCharacter(E)&&(C=!0)}return!c&&C?0:this.options.invisibleCharacters&&!F(v)&&z.vU.isInvisibleCharacter(D)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(D)?3:0}}function F(x){return x===" "||x===`
`||x==="	"}},20913:function(Tt,me,a){"use strict";a.d(me,{Oe:function(){return d},ug:function(){return z},qq:function(){return O},ld:function(){return S},UX:function(){return j},aq:function(){return T},B8:function(){return B},xi:function(){return F},iN:function(){return x}});var p=a(63580),d;(function(v){v.noSelection=p.N("noSelection","No selection"),v.singleSelectionRange=p.N("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),v.singleSelection=p.N("singleSelection","Line {0}, Column {1}"),v.multiSelectionRange=p.N("multiSelectionRange","{0} selections ({1} characters selected)"),v.multiSelection=p.N("multiSelection","{0} selections"),v.emergencyConfOn=p.N("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),v.openingDocs=p.N("openingDocs","Now opening the Editor Accessibility documentation page."),v.readonlyDiffEditor=p.N("readonlyDiffEditor"," in a read-only pane of a diff editor."),v.editableDiffEditor=p.N("editableDiffEditor"," in a pane of a diff editor."),v.readonlyEditor=p.N("readonlyEditor"," in a read-only code editor"),v.editableEditor=p.N("editableEditor"," in a code editor"),v.changeConfigToOnMac=p.N("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),v.changeConfigToOnWinLinux=p.N("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),v.auto_on=p.N("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),v.auto_off=p.N("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),v.tabFocusModeOnMsg=p.N("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),v.tabFocusModeOnMsgNoKb=p.N("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),v.tabFocusModeOffMsg=p.N("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),v.tabFocusModeOffMsgNoKb=p.N("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),v.openDocMac=p.N("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),v.openDocWinLinux=p.N("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),v.outroMsg=p.N("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),v.showAccessibilityHelpAction=p.N("showAccessibilityHelpAction","Show Accessibility Help")})(d||(d={}));var z;(function(v){v.inspectTokensAction=p.N("inspectTokens","Developer: Inspect Tokens")})(z||(z={}));var O;(function(v){v.gotoLineActionLabel=p.N("gotoLineActionLabel","Go to Line/Column...")})(O||(O={}));var S;(function(v){v.helpQuickAccessActionLabel=p.N("helpQuickAccess","Show all Quick Access Providers")})(S||(S={}));var j;(function(v){v.quickCommandActionLabel=p.N("quickCommandActionLabel","Command Palette"),v.quickCommandHelp=p.N("quickCommandActionHelp","Show And Run Commands")})(j||(j={}));var T;(function(v){v.quickOutlineActionLabel=p.N("quickOutlineActionLabel","Go to Symbol..."),v.quickOutlineByCategoryActionLabel=p.N("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(T||(T={}));var B;(function(v){v.editorViewAccessibleLabel=p.N("editorViewAccessibleLabel","Editor content"),v.accessibilityHelpMessage=p.N("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(B||(B={}));var F;(function(v){v.toggleHighContrast=p.N("toggleHighContrast","Toggle High Contrast Theme")})(F||(F={}));var x;(function(v){v.bulkEditServiceSummary=p.N("bulkEditServiceSummary","Made {0} edits in {1} files")})(x||(x={}))},14706:function(Tt,me,a){"use strict";a.d(me,{Jx:function(){return p},gk:function(){return d},rU:function(){return z},lN:function(){return O},Tx:function(){return S},CZ:function(){return j},dQ:function(){return T},D8:function(){return B},fV:function(){return F}});class p{constructor(){this.changeType=1}}class d{constructor(v,g,D,c,C){this.ownerId=v,this.lineNumber=g,this.column=D,this.options=c,this.order=C}static applyInjectedText(v,g){if(!g||g.length===0)return v;let D="",c=0;for(const C of g)D+=v.substring(c,C.column-1),c=C.column-1,D+=C.options.content;return D+=v.substring(c),D}static fromDecorations(v){const g=[];for(const D of v)D.options.before&&D.options.before.content.length>0&&g.push(new d(D.ownerId,D.range.startLineNumber,D.range.startColumn,D.options.before,0)),D.options.after&&D.options.after.content.length>0&&g.push(new d(D.ownerId,D.range.endLineNumber,D.range.endColumn,D.options.after,1));return g.sort((D,c)=>D.lineNumber===c.lineNumber?D.column===c.column?D.order-c.order:D.column-c.column:D.lineNumber-c.lineNumber),g}}class z{constructor(v,g,D){this.changeType=2,this.lineNumber=v,this.detail=g,this.injectedText=D}}class O{constructor(v,g){this.changeType=3,this.fromLineNumber=v,this.toLineNumber=g}}class S{constructor(v,g,D,c){this.changeType=4,this.injectedTexts=c,this.fromLineNumber=v,this.toLineNumber=g,this.detail=D}}class j{constructor(){this.changeType=5}}class T{constructor(v,g,D,c){this.changes=v,this.versionId=g,this.isUndoing=D,this.isRedoing=c,this.resultingSelection=null}containsEvent(v){for(let g=0,D=this.changes.length;g<D;g++)if(this.changes[g].changeType===v)return!0;return!1}static merge(v,g){const D=[].concat(v.changes).concat(g.changes),c=g.versionId,C=v.isUndoing||g.isUndoing,M=v.isRedoing||g.isRedoing;return new T(D,c,C,M)}}class B{constructor(v){this.changes=v}}class F{constructor(v,g){this.rawContentChangedEvent=v,this.contentChangedEvent=g}merge(v){const g=T.merge(this.rawContentChangedEvent,v.rawContentChangedEvent),D=F._mergeChangeEvents(this.contentChangedEvent,v.contentChangedEvent);return new F(g,D)}static _mergeChangeEvents(v,g){const D=[].concat(v.changes).concat(g.changes),c=g.eol,C=g.versionId,M=v.isUndoing||g.isUndoing,E=v.isRedoing||g.isRedoing,_=v.isFlush||g.isFlush;return{changes:D,eol:c,versionId:C,isUndoing:M,isRedoing:E,isFlush:_}}}},65094:function(Tt,me,a){"use strict";a.d(me,{s6:function(){return p},UO:function(){return d},vW:function(){return z}});var p;(function(O){O[O.Disabled=0]="Disabled",O[O.EnabledForActive=1]="EnabledForActive",O[O.Enabled=2]="Enabled"})(p||(p={}));class d{constructor(S,j,T){this.visibleColumn=S,this.className=j,this.horizontalLine=T}}class z{constructor(S,j){this.top=S,this.endColumn=j}}},77378:function(Tt,me,a){"use strict";a.d(me,{A:function(){return d}});var p=a(96887);class d{constructor(S,j,T){this._lineTokensBrand=void 0,this._tokens=S,this._tokensCount=this._tokens.length>>>1,this._text=j,this._languageIdCodec=T}static createEmpty(S,j){const T=d.defaultTokenMetadata,B=new Uint32Array(2);return B[0]=S.length,B[1]=T,new d(B,S,j)}equals(S){return S instanceof d?this.slicedEquals(S,0,this._tokensCount):!1}slicedEquals(S,j,T){if(this._text!==S._text||this._tokensCount!==S._tokensCount)return!1;const B=j<<1,F=B+(T<<1);for(let x=B;x<F;x++)if(this._tokens[x]!==S._tokens[x])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(S){return S>0?this._tokens[S-1<<1]:0}getMetadata(S){return this._tokens[(S<<1)+1]}getLanguageId(S){const j=this._tokens[(S<<1)+1],T=p.NX.getLanguageId(j);return this._languageIdCodec.decodeLanguageId(T)}getStandardTokenType(S){const j=this._tokens[(S<<1)+1];return p.NX.getTokenType(j)}getForeground(S){const j=this._tokens[(S<<1)+1];return p.NX.getForeground(j)}getClassName(S){const j=this._tokens[(S<<1)+1];return p.NX.getClassNameFromMetadata(j)}getInlineStyle(S,j){const T=this._tokens[(S<<1)+1];return p.NX.getInlineStyleFromMetadata(T,j)}getPresentation(S){const j=this._tokens[(S<<1)+1];return p.NX.getPresentationFromMetadata(j)}getEndOffset(S){return this._tokens[S<<1]}findTokenIndexAtOffset(S){return d.findIndexInTokensArray(this._tokens,S)}inflate(){return this}sliceAndInflate(S,j,T){return new z(this,S,j,T)}static convertToEndOffset(S,j){const B=(S.length>>>1)-1;for(let F=0;F<B;F++)S[F<<1]=S[F+1<<1];S[B<<1]=j}static findIndexInTokensArray(S,j){if(S.length<=2)return 0;let T=0,B=(S.length>>>1)-1;for(;T<B;){const F=T+Math.floor((B-T)/2),x=S[F<<1];if(x===j)return F+1;x<j?T=F+1:x>j&&(B=F)}return T}withInserted(S){if(S.length===0)return this;let j=0,T=0,B="";const F=new Array;let x=0;for(;;){const v=j<this._tokensCount?this._tokens[j<<1]:-1,g=T<S.length?S[T]:null;if(v!==-1&&(g===null||v<=g.offset)){B+=this._text.substring(x,v);const D=this._tokens[(j<<1)+1];F.push(B.length,D),j++,x=v}else if(g){if(g.offset>x){B+=this._text.substring(x,g.offset);const D=this._tokens[(j<<1)+1];F.push(B.length,D),x=g.offset}B+=g.text,F.push(B.length,g.tokenMetadata),T++}else break}return new d(new Uint32Array(F),B,this._languageIdCodec)}}d.defaultTokenMetadata=(0<<10|1<<14|2<<23)>>>0;class z{constructor(S,j,T,B){this._source=S,this._startOffset=j,this._endOffset=T,this._deltaOffset=B,this._firstTokenIndex=S.findTokenIndexAtOffset(j),this._tokensCount=0;for(let F=this._firstTokenIndex,x=S.getCount();F<x&&!(S.getStartOffset(F)>=T);F++)this._tokensCount++}getMetadata(S){return this._source.getMetadata(this._firstTokenIndex+S)}getLanguageId(S){return this._source.getLanguageId(this._firstTokenIndex+S)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(S){return S instanceof z?this._startOffset===S._startOffset&&this._endOffset===S._endOffset&&this._deltaOffset===S._deltaOffset&&this._source.slicedEquals(S._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(S){return this._source.getForeground(this._firstTokenIndex+S)}getEndOffset(S){const j=this._source.getEndOffset(this._firstTokenIndex+S);return Math.min(this._endOffset,j)-this._startOffset+this._deltaOffset}getClassName(S){return this._source.getClassName(this._firstTokenIndex+S)}getInlineStyle(S,j){return this._source.getInlineStyle(this._firstTokenIndex+S,j)}getPresentation(S){return this._source.getPresentation(this._firstTokenIndex+S)}findTokenIndexAtOffset(S){return this._source.findTokenIndexAtOffset(S+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}},92550:function(Tt,me,a){"use strict";a.d(me,{Kp:function(){return d},k:function(){return S}});var p=a(25924);class d{constructor(T,B,F,x){this.startColumn=T,this.endColumn=B,this.className=F,this.type=x,this._lineDecorationBrand=void 0}static _equals(T,B){return T.startColumn===B.startColumn&&T.endColumn===B.endColumn&&T.className===B.className&&T.type===B.type}static equalsArr(T,B){const F=T.length,x=B.length;if(F!==x)return!1;for(let v=0;v<F;v++)if(!d._equals(T[v],B[v]))return!1;return!0}static extractWrapped(T,B,F){if(T.length===0)return T;const x=B+1,v=F+1,g=F-B,D=[];let c=0;for(const C of T)C.endColumn<=x||C.startColumn>=v||(D[c++]=new d(Math.max(1,C.startColumn-x+1),Math.min(g+1,C.endColumn-x+1),C.className,C.type));return D}static filter(T,B,F,x){if(T.length===0)return[];const v=[];let g=0;for(let D=0,c=T.length;D<c;D++){const C=T[D],M=C.range;if(M.endLineNumber<B||M.startLineNumber>B||M.isEmpty()&&(C.type===0||C.type===3))continue;const E=M.startLineNumber===B?M.startColumn:F,_=M.endLineNumber===B?M.endColumn:x;v[g++]=new d(E,_,C.inlineClassName,C.type)}return v}static _typeCompare(T,B){const F=[2,0,1,3];return F[T]-F[B]}static compare(T,B){if(T.startColumn!==B.startColumn)return T.startColumn-B.startColumn;if(T.endColumn!==B.endColumn)return T.endColumn-B.endColumn;const F=d._typeCompare(T.type,B.type);return F!==0?F:T.className!==B.className?T.className<B.className?-1:1:0}}class z{constructor(T,B,F,x){this.startOffset=T,this.endOffset=B,this.className=F,this.metadata=x}}class O{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(T){let B=0;for(let F=0,x=T.length;F<x;F++)B|=T[F];return B}consumeLowerThan(T,B,F){for(;this.count>0&&this.stopOffsets[0]<T;){let x=0;for(;x+1<this.count&&this.stopOffsets[x]===this.stopOffsets[x+1];)x++;F.push(new z(B,this.stopOffsets[x],this.classNames.join(" "),O._metadata(this.metadata))),B=this.stopOffsets[x]+1,this.stopOffsets.splice(0,x+1),this.classNames.splice(0,x+1),this.metadata.splice(0,x+1),this.count-=x+1}return this.count>0&&B<T&&(F.push(new z(B,T-1,this.classNames.join(" "),O._metadata(this.metadata))),B=T),B}insert(T,B,F){if(this.count===0||this.stopOffsets[this.count-1]<=T)this.stopOffsets.push(T),this.classNames.push(B),this.metadata.push(F);else for(let x=0;x<this.count;x++)if(this.stopOffsets[x]>=T){this.stopOffsets.splice(x,0,T),this.classNames.splice(x,0,B),this.metadata.splice(x,0,F);break}this.count++}}class S{static normalize(T,B){if(B.length===0)return[];const F=[],x=new O;let v=0;for(let g=0,D=B.length;g<D;g++){const c=B[g];let C=c.startColumn,M=c.endColumn;const E=c.className,_=c.type===1?2:c.type===2?4:0;if(C>1){const b=T.charCodeAt(C-2);p.ZG(b)&&C--}if(M>1){const b=T.charCodeAt(M-2);p.ZG(b)&&M--}const L=C-1,N=M-2;v=x.consumeLowerThan(L,v,F),x.count===0&&(v=L),x.insert(N,E,_)}return x.consumeLowerThan(1073741824,v,F),F}}},77736:function(Tt,me,a){"use strict";a.d(me,{zG:function(){return S},IJ:function(){return j},Nd:function(){return T},d1:function(){return x},tF:function(){return g}});var p=a(25924),d=a(50072),z=a(92550);class O{constructor(W,q,re){this._linePartBrand=void 0,this.endIndex=W,this.type=q,this.metadata=re}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class S{constructor(W,q){this.startOffset=W,this.endOffset=q}equals(W){return this.startOffset===W.startOffset&&this.endOffset===W.endOffset}}class j{constructor(W,q,re,de,pe,ae,ue,te,K,U,ee,X,le,oe,Ce,ye,ke,Te,ge){this.useMonospaceOptimizations=W,this.canUseHalfwidthRightwardsArrow=q,this.lineContent=re,this.continuesWithWrappedLine=de,this.isBasicASCII=pe,this.containsRTL=ae,this.fauxIndentLength=ue,this.lineTokens=te,this.lineDecorations=K.sort(z.Kp.compare),this.tabSize=U,this.startVisibleColumn=ee,this.spaceWidth=X,this.stopRenderingLineAfter=Ce,this.renderWhitespace=ye==="all"?4:ye==="boundary"?1:ye==="selection"?2:ye==="trailing"?3:0,this.renderControlCharacters=ke,this.fontLigatures=Te,this.selectionsOnLine=ge&&ge.sort((Qe,Pe)=>Qe.startOffset<Pe.startOffset?-1:1);const we=Math.abs(oe-X),ze=Math.abs(le-X);we<ze?(this.renderSpaceWidth=oe,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=le,this.renderSpaceCharCode=183)}sameSelection(W){if(this.selectionsOnLine===null)return W===null;if(W===null||W.length!==this.selectionsOnLine.length)return!1;for(let q=0;q<this.selectionsOnLine.length;q++)if(!this.selectionsOnLine[q].equals(W[q]))return!1;return!0}equals(W){return this.useMonospaceOptimizations===W.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===W.canUseHalfwidthRightwardsArrow&&this.lineContent===W.lineContent&&this.continuesWithWrappedLine===W.continuesWithWrappedLine&&this.isBasicASCII===W.isBasicASCII&&this.containsRTL===W.containsRTL&&this.fauxIndentLength===W.fauxIndentLength&&this.tabSize===W.tabSize&&this.startVisibleColumn===W.startVisibleColumn&&this.spaceWidth===W.spaceWidth&&this.renderSpaceWidth===W.renderSpaceWidth&&this.renderSpaceCharCode===W.renderSpaceCharCode&&this.stopRenderingLineAfter===W.stopRenderingLineAfter&&this.renderWhitespace===W.renderWhitespace&&this.renderControlCharacters===W.renderControlCharacters&&this.fontLigatures===W.fontLigatures&&z.Kp.equalsArr(this.lineDecorations,W.lineDecorations)&&this.lineTokens.equals(W.lineTokens)&&this.sameSelection(W.selectionsOnLine)}}class T{constructor(W,q){this.partIndex=W,this.charIndex=q}}class B{constructor(W,q){this.length=W,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(W){return(W&4294901760)>>>16}static getCharIndex(W){return(W&65535)>>>0}setColumnInfo(W,q,re,de){const pe=(q<<16|re<<0)>>>0;this._data[W-1]=pe,this._absoluteOffsets[W-1]=de+re}getAbsoluteOffset(W){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[W-1]}charOffsetToPartData(W){return this.length===0?0:W<0?this._data[0]:W>=this.length?this._data[this.length-1]:this._data[W]}getDomPosition(W){const q=this.charOffsetToPartData(W-1),re=B.getPartIndex(q),de=B.getCharIndex(q);return new T(re,de)}getColumn(W,q){return this.partDataToCharOffset(W.partIndex,q,W.charIndex)+1}partDataToCharOffset(W,q,re){if(this.length===0)return 0;const de=(W<<16|re<<0)>>>0;let pe=0,ae=this.length-1;for(;pe+1<ae;){const Ce=pe+ae>>>1,ye=this._data[Ce];if(ye===de)return Ce;ye>de?ae=Ce:pe=Ce}if(pe===ae)return pe;const ue=this._data[pe],te=this._data[ae];if(ue===de)return pe;if(te===de)return ae;const K=B.getPartIndex(ue),U=B.getCharIndex(ue),ee=B.getPartIndex(te);let X;K!==ee?X=q:X=B.getCharIndex(te);const le=re-U,oe=X-re;return le<=oe?pe:ae}}class F{constructor(W,q,re){this._renderLineOutputBrand=void 0,this.characterMapping=W,this.containsRTL=q,this.containsForeignElements=re}}function x(k,W){if(k.lineContent.length===0){if(k.lineDecorations.length>0){W.appendASCIIString("<span>");let q=0,re=0,de=0;for(const ae of k.lineDecorations)(ae.type===1||ae.type===2)&&(W.appendASCIIString('<span class="'),W.appendASCIIString(ae.className),W.appendASCIIString('"></span>'),ae.type===1&&(de|=1,q++),ae.type===2&&(de|=2,re++));W.appendASCIIString("</span>");const pe=new B(1,q+re);return pe.setColumnInfo(1,q,0,0),new F(pe,!1,de)}return W.appendASCIIString("<span><span></span></span>"),new F(new B(0,0),!1,0)}return b(c(k),W)}class v{constructor(W,q,re,de){this.characterMapping=W,this.html=q,this.containsRTL=re,this.containsForeignElements=de}}function g(k){const W=(0,d.l$)(1e4),q=x(k,W);return new v(q.characterMapping,W.build(),q.containsRTL,q.containsForeignElements)}class D{constructor(W,q,re,de,pe,ae,ue,te,K,U,ee,X,le,oe,Ce){this.fontIsMonospace=W,this.canUseHalfwidthRightwardsArrow=q,this.lineContent=re,this.len=de,this.isOverflowing=pe,this.parts=ae,this.containsForeignElements=ue,this.fauxIndentLength=te,this.tabSize=K,this.startVisibleColumn=U,this.containsRTL=ee,this.spaceWidth=X,this.renderSpaceCharCode=le,this.renderWhitespace=oe,this.renderControlCharacters=Ce}}function c(k){const W=k.lineContent;let q,re;k.stopRenderingLineAfter!==-1&&k.stopRenderingLineAfter<W.length?(q=!0,re=k.stopRenderingLineAfter):(q=!1,re=W.length);let de=C(k.lineTokens,k.fauxIndentLength,re);k.renderControlCharacters&&!k.isBasicASCII&&(de=_(W,de)),(k.renderWhitespace===4||k.renderWhitespace===1||k.renderWhitespace===2&&!!k.selectionsOnLine||k.renderWhitespace===3)&&(de=L(k,W,re,de));let pe=0;if(k.lineDecorations.length>0){for(let ae=0,ue=k.lineDecorations.length;ae<ue;ae++){const te=k.lineDecorations[ae];te.type===3||te.type===1?pe|=1:te.type===2&&(pe|=2)}de=N(W,re,de,k.lineDecorations)}return k.containsRTL||(de=M(W,de,!k.isBasicASCII||k.fontLigatures)),new D(k.useMonospaceOptimizations,k.canUseHalfwidthRightwardsArrow,W,re,q,de,pe,k.fauxIndentLength,k.tabSize,k.startVisibleColumn,k.containsRTL,k.spaceWidth,k.renderSpaceCharCode,k.renderWhitespace,k.renderControlCharacters)}function C(k,W,q){const re=[];let de=0;W>0&&(re[de++]=new O(W,"",0));for(let pe=0,ae=k.getCount();pe<ae;pe++){const ue=k.getEndOffset(pe);if(ue<=W)continue;const te=k.getClassName(pe);if(ue>=q){re[de++]=new O(q,te,0);break}re[de++]=new O(ue,te,0)}return re}function M(k,W,q){let re=0;const de=[];let pe=0;if(q)for(let ae=0,ue=W.length;ae<ue;ae++){const te=W[ae],K=te.endIndex;if(re+50<K){const U=te.type,ee=te.metadata;let X=-1,le=re;for(let oe=re;oe<K;oe++)k.charCodeAt(oe)===32&&(X=oe),X!==-1&&oe-le>=50&&(de[pe++]=new O(X+1,U,ee),le=X+1,X=-1);le!==K&&(de[pe++]=new O(K,U,ee))}else de[pe++]=te;re=K}else for(let ae=0,ue=W.length;ae<ue;ae++){const te=W[ae],K=te.endIndex,U=K-re;if(U>50){const ee=te.type,X=te.metadata,le=Math.ceil(U/50);for(let oe=1;oe<le;oe++){const Ce=re+oe*50;de[pe++]=new O(Ce,ee,X)}de[pe++]=new O(K,ee,X)}else de[pe++]=te;re=K}return de}function E(k){return k<32?k!==9:k===127||k>=8234&&k<=8238||k>=8294&&k<=8297||k>=8206&&k<=8207||k===1564}function _(k,W){const q=[];let re=new O(0,"",0),de=0;for(const pe of W){const ae=pe.endIndex;for(;de<ae;de++){const ue=k.charCodeAt(de);E(ue)&&(de>re.endIndex&&(re=new O(de,pe.type,pe.metadata),q.push(re)),re=new O(de+1,"mtkcontrol",pe.metadata),q.push(re))}de>re.endIndex&&(re=new O(ae,pe.type,pe.metadata),q.push(re))}return q}function L(k,W,q,re){const de=k.continuesWithWrappedLine,pe=k.fauxIndentLength,ae=k.tabSize,ue=k.startVisibleColumn,te=k.useMonospaceOptimizations,K=k.selectionsOnLine,U=k.renderWhitespace===1,ee=k.renderWhitespace===3,X=k.renderSpaceWidth!==k.spaceWidth,le=[];let oe=0,Ce=0,ye=re[Ce].type,ke=re[Ce].endIndex;const Te=re.length;let ge=!1,we=p.LC(W),ze;we===-1?(ge=!0,we=q,ze=q):ze=p.ow(W);let Qe=!1,Pe=0,Oe=K&&K[Pe],qe=ue%ae;for(let Ne=pe;Ne<q;Ne++){const Fe=W.charCodeAt(Ne);Oe&&Ne>=Oe.endOffset&&(Pe++,Oe=K&&K[Pe]);let ne;if(Ne<we||Ne>ze)ne=!0;else if(Fe===9)ne=!0;else if(Fe===32)if(U)if(Qe)ne=!0;else{const Q=Ne+1<q?W.charCodeAt(Ne+1):0;ne=Q===32||Q===9}else ne=!0;else ne=!1;if(ne&&K&&(ne=!!Oe&&Oe.startOffset<=Ne&&Oe.endOffset>Ne),ne&&ee&&(ne=ge||Ne>ze),Qe){if(!ne||!te&&qe>=ae){if(X){const Q=oe>0?le[oe-1].endIndex:pe;for(let ie=Q+1;ie<=Ne;ie++)le[oe++]=new O(ie,"mtkw",1)}else le[oe++]=new O(Ne,"mtkw",1);qe=qe%ae}}else(Ne===ke||ne&&Ne>pe)&&(le[oe++]=new O(Ne,ye,0),qe=qe%ae);for(Fe===9?qe=ae:p.K7(Fe)?qe+=2:qe++,Qe=ne;Ne===ke&&(Ce++,Ce<Te);)ye=re[Ce].type,ke=re[Ce].endIndex}let Je=!1;if(Qe)if(de&&U){const Ne=q>0?W.charCodeAt(q-1):0,Fe=q>1?W.charCodeAt(q-2):0;Ne===32&&Fe!==32&&Fe!==9||(Je=!0)}else Je=!0;if(Je)if(X){const Ne=oe>0?le[oe-1].endIndex:pe;for(let Fe=Ne+1;Fe<=q;Fe++)le[oe++]=new O(Fe,"mtkw",1)}else le[oe++]=new O(q,"mtkw",1);else le[oe++]=new O(q,ye,0);return le}function N(k,W,q,re){re.sort(z.Kp.compare);const de=z.k.normalize(k,re),pe=de.length;let ae=0;const ue=[];let te=0,K=0;for(let ee=0,X=q.length;ee<X;ee++){const le=q[ee],oe=le.endIndex,Ce=le.type,ye=le.metadata;for(;ae<pe&&de[ae].startOffset<oe;){const ke=de[ae];if(ke.startOffset>K&&(K=ke.startOffset,ue[te++]=new O(K,Ce,ye)),ke.endOffset+1<=oe)K=ke.endOffset+1,ue[te++]=new O(K,Ce+" "+ke.className,ye|ke.metadata),ae++;else{K=oe,ue[te++]=new O(K,Ce+" "+ke.className,ye|ke.metadata);break}}oe>K&&(K=oe,ue[te++]=new O(K,Ce,ye))}const U=q[q.length-1].endIndex;if(ae<pe&&de[ae].startOffset===U)for(;ae<pe&&de[ae].startOffset===U;){const ee=de[ae];ue[te++]=new O(K,ee.className,ee.metadata),ae++}return ue}function b(k,W){const q=k.fontIsMonospace,re=k.canUseHalfwidthRightwardsArrow,de=k.containsForeignElements,pe=k.lineContent,ae=k.len,ue=k.isOverflowing,te=k.parts,K=k.fauxIndentLength,U=k.tabSize,ee=k.startVisibleColumn,X=k.containsRTL,le=k.spaceWidth,oe=k.renderSpaceCharCode,Ce=k.renderWhitespace,ye=k.renderControlCharacters,ke=new B(ae+1,te.length);let Te=!1,ge=0,we=ee,ze=0,Qe=0,Pe=0,Oe=0;X?W.appendASCIIString('<span dir="ltr">'):W.appendASCIIString("<span>");for(let qe=0,Je=te.length;qe<Je;qe++){Oe+=Pe;const Ne=te[qe],Fe=Ne.endIndex,ne=Ne.type,Q=Ce!==0&&Ne.isWhitespace(),ie=Q&&!q&&(ne==="mtkw"||!de),xe=ge===Fe&&Ne.isPseudoAfter();if(ze=0,W.appendASCIIString('<span class="'),W.appendASCIIString(ie?"mtkz":ne),W.appendASCII(34),Q){let be=0;{let Ge=ge,nt=we;for(;Ge<Fe;Ge++){const Ot=(pe.charCodeAt(Ge)===9?U-nt%U:1)|0;be+=Ot,Ge>=K&&(nt+=Ot)}}for(ie&&(W.appendASCIIString(' style="width:'),W.appendASCIIString(String(le*be)),W.appendASCIIString('px"')),W.appendASCII(62);ge<Fe;ge++){ke.setColumnInfo(ge+1,qe-Qe,ze,Oe),Qe=0;const Ge=pe.charCodeAt(ge);let nt;if(Ge===9){nt=U-we%U|0,!re||nt>1?W.write1(8594):W.write1(65515);for(let _t=2;_t<=nt;_t++)W.write1(160)}else nt=1,W.write1(oe);ze+=nt,ge>=K&&(we+=nt)}Pe=be}else{let be=0;for(W.appendASCII(62);ge<Fe;ge++){ke.setColumnInfo(ge+1,qe-Qe,ze,Oe),Qe=0;const Ge=pe.charCodeAt(ge);let nt=1,_t=1;switch(Ge){case 9:nt=U-we%U,_t=nt;for(let Ot=1;Ot<=nt;Ot++)W.write1(160);break;case 32:W.write1(160);break;case 60:W.appendASCIIString("&lt;");break;case 62:W.appendASCIIString("&gt;");break;case 38:W.appendASCIIString("&amp;");break;case 0:ye?W.write1(9216):W.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:W.write1(65533);break;default:p.K7(Ge)&&_t++,ye&&Ge<32?W.write1(9216+Ge):ye&&Ge===127?W.write1(9249):ye&&E(Ge)?(W.appendASCIIString("[U+"),W.appendASCIIString(I(Ge)),W.appendASCIIString("]"),nt=8):W.write1(Ge)}ze+=nt,be+=nt,ge>=K&&(we+=_t)}Pe=be}xe?Qe++:Qe=0,ge>=ae&&!Te&&Ne.isPseudoAfter()&&(Te=!0,ke.setColumnInfo(ge+1,qe,ze,Oe)),W.appendASCIIString("</span>")}return Te||ke.setColumnInfo(ae+1,te.length-1,ze,Oe),ue&&W.appendASCIIString("<span>&hellip;</span>"),W.appendASCIIString("</span>"),new F(ke,X,de)}function I(k){return k.toString(16).toUpperCase().padStart(4,"0")}},1118:function(Tt,me,a){"use strict";a.d(me,{l_:function(){return z},ud:function(){return O},IP:function(){return S},wA:function(){return j},$t:function(){return T},Wx:function(){return B},$l:function(){return F},SQ:function(){return x}});var p=a(25924),d=a(24314);class z{constructor(g,D,c,C){this._viewportBrand=void 0,this.top=g|0,this.left=D|0,this.width=c|0,this.height=C|0}}class O{constructor(g,D){this.tabSize=g,this.data=D}}class S{constructor(g,D,c,C,M,E,_){this._viewLineDataBrand=void 0,this.content=g,this.continuesWithWrappedLine=D,this.minColumn=c,this.maxColumn=C,this.startVisibleColumn=M,this.tokens=E,this.inlineDecorations=_}}class j{constructor(g,D,c,C,M,E,_,L,N,b){this.minColumn=g,this.maxColumn=D,this.content=c,this.continuesWithWrappedLine=C,this.isBasicASCII=j.isBasicASCII(c,E),this.containsRTL=j.containsRTL(c,this.isBasicASCII,M),this.tokens=_,this.inlineDecorations=L,this.tabSize=N,this.startVisibleColumn=b}static isBasicASCII(g,D){return D?p.$i(g):!0}static containsRTL(g,D,c){return!D&&c?p.Ut(g):!1}}class T{constructor(g,D,c){this.range=g,this.inlineClassName=D,this.type=c}}class B{constructor(g,D,c,C){this.startOffset=g,this.endOffset=D,this.inlineClassName=c,this.inlineClassNameAffectsLetterSpacing=C}toInlineDecoration(g){return new T(new d.e(g,this.startOffset+1,g,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class F{constructor(g,D){this._viewModelDecorationBrand=void 0,this.range=g,this.options=D}}class x{constructor(g,D,c){this.color=g,this.zIndex=D,this.data=c}static cmp(g,D){return g.zIndex===D.zIndex?g.color<D.color?-1:g.color>D.color?1:0:g.zIndex-D.zIndex}}},30665:function(Tt,me,a){"use strict";a.d(me,{EY:function(){return d},Tj:function(){return z}});class p{constructor(S,j,T){this._colorZoneBrand=void 0,this.from=S|0,this.to=j|0,this.colorId=T|0}static compare(S,j){return S.colorId===j.colorId?S.from===j.from?S.to-j.to:S.from-j.from:S.colorId-j.colorId}}class d{constructor(S,j,T,B){this._overviewRulerZoneBrand=void 0,this.startLineNumber=S,this.endLineNumber=j,this.heightInLines=T,this.color=B,this._colorZone=null}static compare(S,j){return S.color===j.color?S.startLineNumber===j.startLineNumber?S.heightInLines===j.heightInLines?S.endLineNumber-j.endLineNumber:S.heightInLines-j.heightInLines:S.startLineNumber-j.startLineNumber:S.color<j.color?-1:1}setColorZone(S){this._colorZone=S}getColorZones(){return this._colorZone}}class z{constructor(S){this._getVerticalOffsetForLine=S,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(S){this._zones=S,this._zones.sort(d.compare)}setLineHeight(S){return this._lineHeight===S?!1:(this._lineHeight=S,this._colorZonesInvalid=!0,!0)}setPixelRatio(S){this._pixelRatio=S,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(S){return this._domWidth===S?!1:(this._domWidth=S,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(S){return this._domHeight===S?!1:(this._domHeight=S,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(S){return this._outerHeight===S?!1:(this._outerHeight=S,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const S=this._colorZonesInvalid,j=Math.floor(this._lineHeight),T=Math.floor(this.getCanvasHeight()),B=Math.floor(this._outerHeight),F=T/B,x=Math.floor(4*this._pixelRatio/2),v=[];for(let g=0,D=this._zones.length;g<D;g++){const c=this._zones[g];if(!S){const W=c.getColorZones();if(W){v.push(W);continue}}const C=this._getVerticalOffsetForLine(c.startLineNumber),M=c.heightInLines===0?this._getVerticalOffsetForLine(c.endLineNumber)+j:C+c.heightInLines*j,E=Math.floor(F*C),_=Math.floor(F*M);let L=Math.floor((E+_)/2),N=_-L;N<x&&(N=x),L-N<0&&(L=N),L+N>T&&(L=T-N);const b=c.color;let I=this._color2Id[b];I||(I=++this._lastAssignedId,this._color2Id[b]=I,this._id2Color[I]=b);const k=new p(L-N,L+N,I);c.setColorZone(k),v.push(k)}return this._colorZonesInvalid=!1,v.sort(p.compare),v}}},30168:function(Tt,me,a){"use strict";a.d(me,{CU:function(){return S},Fd:function(){return j},$t:function(){return T},zg:function(){return B}});var p=a(50187),d=a(24314),z=a(1118),O=a(64141);class S{constructor(v,g,D,c,C){this.editorId=v,this.model=g,this.configuration=D,this._linesCollection=c,this._coordinatesConverter=C,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(v){const g=v.id;let D=this._decorationsCache[g];if(!D){const c=v.range,C=v.options;let M;if(C.isWholeLine){const E=this._coordinatesConverter.convertModelPositionToViewPosition(new p.L(c.startLineNumber,1),0),_=this._coordinatesConverter.convertModelPositionToViewPosition(new p.L(c.endLineNumber,this.model.getLineMaxColumn(c.endLineNumber)),1);M=new d.e(E.lineNumber,E.column,_.lineNumber,_.column)}else M=this._coordinatesConverter.convertModelRangeToViewRange(c,1);D=new z.$l(M,C),this._decorationsCache[g]=D}return D}getDecorationsViewportData(v){let g=this._cachedModelDecorationsResolver!==null;return g=g&&v.equalsRange(this._cachedModelDecorationsResolverViewRange),g||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(v),this._cachedModelDecorationsResolverViewRange=v),this._cachedModelDecorationsResolver}_getDecorationsViewportData(v){const g=this._linesCollection.getDecorationsInRange(v,this.editorId,(0,O.$J)(this.configuration.options)),D=v.startLineNumber,c=v.endLineNumber,C=[];let M=0;const E=[];for(let _=D;_<=c;_++)E[_-D]=[];for(let _=0,L=g.length;_<L;_++){const N=g[_],b=N.options;if(!j(this.model,N))continue;const I=this._getOrCreateViewModelDecoration(N),k=I.range;if(C[M++]=I,b.inlineClassName){const W=new z.$t(k,b.inlineClassName,b.inlineClassNameAffectsLetterSpacing?3:0),q=Math.max(D,k.startLineNumber),re=Math.min(c,k.endLineNumber);for(let de=q;de<=re;de++)E[de-D].push(W)}if(b.beforeContentClassName&&D<=k.startLineNumber&&k.startLineNumber<=c){const W=new z.$t(new d.e(k.startLineNumber,k.startColumn,k.startLineNumber,k.startColumn),b.beforeContentClassName,1);E[k.startLineNumber-D].push(W)}if(b.afterContentClassName&&D<=k.endLineNumber&&k.endLineNumber<=c){const W=new z.$t(new d.e(k.endLineNumber,k.endColumn,k.endLineNumber,k.endColumn),b.afterContentClassName,2);E[k.endLineNumber-D].push(W)}}return{decorations:C,inlineDecorations:E}}}function j(x,v){return!(v.options.hideInCommentTokens&&T(x,v)||v.options.hideInStringTokens&&B(x,v))}function T(x,v){return F(x,v.range,g=>g===1)}function B(x,v){return F(x,v.range,g=>g===2)}function F(x,v,g){for(let D=v.startLineNumber;D<=v.endLineNumber;D++){const c=x.getLineTokens(D),C=D===v.startLineNumber,M=D===v.endLineNumber;let E=C?c.findTokenIndexAtOffset(v.startColumn-1):0;for(;E<c.getCount()&&!(M&&c.getStartOffset(E)>v.endColumn-1);){if(!g(c.getStandardTokenType(E)))return!1;E++}}return!0}},90236:function(Tt,me,a){"use strict";a.r(me),a.d(me,{SelectionAnchorSet:function(){return g}});var p=a(85152),d=a(59365),z=a(22258),O=a(16830),S=a(3860),j=a(29102),T=a(63580),B=a(16141),F=function(_,L,N,b){var I=arguments.length,k=I<3?L:b===null?b=Object.getOwnPropertyDescriptor(L,N):b,W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(_,L,N,b);else for(var q=_.length-1;q>=0;q--)(W=_[q])&&(k=(I<3?W(k):I>3?W(L,N,k):W(L,N))||k);return I>3&&k&&Object.defineProperty(L,N,k),k},x=function(_,L){return function(N,b){L(N,b,_)}},v=function(_,L,N,b){function I(k){return k instanceof N?k:new N(function(W){W(k)})}return new(N||(N=Promise))(function(k,W){function q(pe){try{de(b.next(pe))}catch(ae){W(ae)}}function re(pe){try{de(b.throw(pe))}catch(ae){W(ae)}}function de(pe){pe.done?k(pe.value):I(pe.value).then(q,re)}de((b=b.apply(_,L||[])).next())})};const g=new B.uy("selectionAnchorSet",!1);let D=class eS{constructor(L,N){this.editor=L,this.selectionAnchorSetContextKey=g.bindTo(N),this.modelChangeListener=L.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(L){return L.getContribution(eS.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const L=this.editor.getPosition(),N=this.decorationId?[this.decorationId]:[],b=this.editor.deltaDecorations(N,[{range:S.Y.fromPositions(L,L),options:{description:"selection-anchor",stickiness:1,hoverMessage:new d.W5().appendText((0,T.N)("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=b[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,p.Z9)((0,T.N)("anchorSet","Anchor set at {0}:{1}",L.lineNumber,L.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const L=this.editor.getModel().getDecorationRange(this.decorationId);L&&this.editor.setPosition(L.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const L=this.editor.getModel().getDecorationRange(this.decorationId);if(L){const N=this.editor.getPosition();this.editor.setSelection(S.Y.fromPositions(L.getStartPosition(),N)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};D.ID="editor.contrib.selectionAnchorController",D=F([x(1,B.i6)],D);class c extends O.R6{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,T.N)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:j.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|32),weight:100}})}run(L,N){var b;return v(this,void 0,void 0,function*(){(b=D.get(N))===null||b===void 0||b.setSelectionAnchor()})}}class C extends O.R6{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,T.N)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:g})}run(L,N){var b;return v(this,void 0,void 0,function*(){(b=D.get(N))===null||b===void 0||b.goToSelectionAnchor()})}}class M extends O.R6{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,T.N)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:g,kbOpts:{kbExpr:j.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|41),weight:100}})}run(L,N){var b;return v(this,void 0,void 0,function*(){(b=D.get(N))===null||b===void 0||b.selectFromAnchorToCursor()})}}class E extends O.R6{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,T.N)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:g,kbOpts:{kbExpr:j.u.editorTextFocus,primary:9,weight:100}})}run(L,N){var b;return v(this,void 0,void 0,function*(){(b=D.get(N))===null||b===void 0||b.cancelSelectionAnchor()})}}(0,O._K)(D.ID,D),(0,O.Qr)(c),(0,O.Qr)(C),(0,O.Qr)(M),(0,O.Qr)(E)},71387:function(Tt,me,a){"use strict";a.r(me),a.d(me,{BracketMatchingController:function(){return L}});var p=a(15393),d=a(9917),z=a(16830),O=a(50187),S=a(24314),j=a(3860),T=a(29102),B=a(84973),F=a(45146),x=a(8625),v=a(63580),g=a(84144),D=a(73910),c=a(97781);const C=(0,D.P6G)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},v.N("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class M extends z.R6{constructor(){super({id:"editor.action.jumpToBracket",label:v.N("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:T.u.editorTextFocus,primary:2048|1024|88,weight:100}})}run(b,I){var k;(k=L.get(I))===null||k===void 0||k.jumpToBracket()}}class E extends z.R6{constructor(){super({id:"editor.action.selectToBracket",label:v.N("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(b,I,k){var W;let q=!0;k&&k.selectBrackets===!1&&(q=!1),(W=L.get(I))===null||W===void 0||W.selectToBracket(q)}}class _{constructor(b,I,k){this.position=b,this.brackets=I,this.options=k}}class L extends d.JT{constructor(b){super();this._editor=b,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new p.pY(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(64),this._updateBracketsSoon.schedule(),this._register(b.onDidChangeCursorPosition(I=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(b.onDidChangeModelContent(I=>{this._updateBracketsSoon.schedule()})),this._register(b.onDidChangeModel(I=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(b.onDidChangeModelLanguageConfiguration(I=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(b.onDidChangeConfiguration(I=>{I.hasChanged(64)&&(this._matchBrackets=this._editor.getOption(64),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(b.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(b.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(b){return b.getContribution(L.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const b=this._editor.getModel(),I=this._editor.getSelections().map(k=>{const W=k.getStartPosition(),q=b.bracketPairs.matchBracket(W);let re=null;if(q)q[0].containsPosition(W)?re=q[1].getStartPosition():q[1].containsPosition(W)&&(re=q[0].getStartPosition());else{const de=b.bracketPairs.findEnclosingBrackets(W);if(de)re=de[0].getStartPosition();else{const pe=b.bracketPairs.findNextBracket(W);pe&&pe.range&&(re=pe.range.getStartPosition())}}return re?new j.Y(re.lineNumber,re.column,re.lineNumber,re.column):new j.Y(W.lineNumber,W.column,W.lineNumber,W.column)});this._editor.setSelections(I),this._editor.revealRange(I[0])}selectToBracket(b){if(!this._editor.hasModel())return;const I=this._editor.getModel(),k=[];this._editor.getSelections().forEach(W=>{const q=W.getStartPosition();let re=I.bracketPairs.matchBracket(q);if(!re&&(re=I.bracketPairs.findEnclosingBrackets(q),!re)){const ae=I.bracketPairs.findNextBracket(q);ae&&ae.range&&(re=I.bracketPairs.matchBracket(ae.range.getStartPosition()))}let de=null,pe=null;if(re){re.sort(S.e.compareRangesUsingStarts);const[ae,ue]=re;if(de=b?ae.getStartPosition():ae.getEndPosition(),pe=b?ue.getEndPosition():ue.getStartPosition(),ue.containsPosition(q)){const te=de;de=pe,pe=te}}de&&pe&&k.push(new j.Y(de.lineNumber,de.column,pe.lineNumber,pe.column))}),k.length>0&&(this._editor.setSelections(k),this._editor.revealRange(k[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let b=[],I=0;for(const k of this._lastBracketsData){let W=k.brackets;W&&(b[I++]={range:W[0],options:k.options},b[I++]={range:W[1],options:k.options})}this._decorations=this._editor.deltaDecorations(this._decorations,b)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const b=this._editor.getSelections();if(b.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const I=this._editor.getModel(),k=I.getVersionId();let W=[];this._lastVersionId===k&&(W=this._lastBracketsData);let q=[],re=0;for(let te=0,K=b.length;te<K;te++){let U=b[te];U.isEmpty()&&(q[re++]=U.getStartPosition())}q.length>1&&q.sort(O.L.compare);let de=[],pe=0,ae=0,ue=W.length;for(let te=0,K=q.length;te<K;te++){let U=q[te];for(;ae<ue&&W[ae].position.isBefore(U);)ae++;if(ae<ue&&W[ae].position.equals(U))de[pe++]=W[ae];else{let ee=I.bracketPairs.matchBracket(U,20),X=L._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!ee&&this._matchBrackets==="always"&&(ee=I.bracketPairs.findEnclosingBrackets(U,20),X=L._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),de[pe++]=new _(U,ee,X)}}this._lastBracketsData=de,this._lastVersionId=k}}L.ID="editor.contrib.bracketMatchingController",L._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=F.qx.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,c.EN)(C),position:B.sh.Center}}),L._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=F.qx.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,z._K)(L.ID,L),(0,z.Qr)(E),(0,z.Qr)(M),(0,c.Ic)((N,b)=>{const I=N.getColor(x.TC);I&&b.addRule(`.monaco-editor .bracket-match { background-color: ${I}; }`);const k=N.getColor(x.Dl);k&&b.addRule(`.monaco-editor .bracket-match { border: 1px solid ${k}; }`)}),g.BH.appendMenuItem(g.eH.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:v.N({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},54367:function(Tt,me,a){"use strict";a.r(me);var p=a(16830),d=a(29102),z=a(24314),O=a(3860);class S{constructor(v,g){this._selection=v,this._isMovingLeft=g}getEditOperations(v,g){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const D=this._selection.startLineNumber,c=this._selection.startColumn,C=this._selection.endColumn;if(!(this._isMovingLeft&&c===1)&&!(!this._isMovingLeft&&C===v.getLineMaxColumn(D)))if(this._isMovingLeft){const M=new z.e(D,c-1,D,c),E=v.getValueInRange(M);g.addEditOperation(M,null),g.addEditOperation(new z.e(D,C,D,C),E)}else{const M=new z.e(D,C,D,C+1),E=v.getValueInRange(M);g.addEditOperation(M,null),g.addEditOperation(new z.e(D,c,D,c),E)}}computeCursorState(v,g){return this._isMovingLeft?new O.Y(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new O.Y(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var j=a(63580);class T extends p.R6{constructor(v,g){super(g);this.left=v}run(v,g){if(!g.hasModel())return;const D=[],c=g.getSelections();for(const C of c)D.push(new S(C,this.left));g.pushUndoStop(),g.executeCommands(this.id,D),g.pushUndoStop()}}class B extends T{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:j.N("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:d.u.writable})}}class F extends T{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:j.N("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:d.u.writable})}}(0,p.Qr)(B),(0,p.Qr)(F)},72102:function(Tt,me,a){"use strict";a.r(me);var p=a(16830),d=a(61329),z=a(10839),O=a(24314),S=a(29102),j=a(63580);class T extends p.R6{constructor(){super({id:"editor.action.transposeLetters",label:j.N("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:S.u.writable,kbOpts:{kbExpr:S.u.textInputFocus,primary:0,mac:{primary:256|50},weight:100}})}run(F,x){if(!x.hasModel())return;let v=x.getModel(),g=[],D=x.getSelections();for(let c of D){if(!c.isEmpty())continue;let C=c.startLineNumber,M=c.startColumn,E=v.getLineMaxColumn(C);if(C===1&&(M===1||M===2&&E===2))continue;let _=M===E?c.getPosition():z.o.rightPosition(v,c.getPosition().lineNumber,c.getPosition().column),L=z.o.leftPosition(v,_),N=z.o.leftPosition(v,L),b=v.getValueInRange(O.e.fromPositions(N,L)),I=v.getValueInRange(O.e.fromPositions(L,_)),k=O.e.fromPositions(N,_);g.push(new d.T4(k,I+b))}g.length>0&&(x.pushUndoStop(),x.executeCommands(this.id,g),x.pushUndoStop())}}(0,p.Qr)(T)},55833:function(Tt,me,a){"use strict";a.r(me),a.d(me,{CutAction:function(){return M},CopyAction:function(){return E},PasteAction:function(){return _}});var p=a(16268),d=a(1432),z=a(35715),O=a(16830),S=a(11640),j=a(29102),T=a(63580),B=a(84144),F=a(84972),x=function(b,I,k,W){function q(re){return re instanceof k?re:new k(function(de){de(re)})}return new(k||(k=Promise))(function(re,de){function pe(te){try{ue(W.next(te))}catch(K){de(K)}}function ae(te){try{ue(W.throw(te))}catch(K){de(K)}}function ue(te){te.done?re(te.value):q(te.value).then(pe,ae)}ue((W=W.apply(b,I||[])).next())})};const v="9_cutcopypaste",g=d.tY||document.queryCommandSupported("cut"),D=d.tY||document.queryCommandSupported("copy"),c=typeof navigator.clipboard=="undefined"||p.isFirefox?document.queryCommandSupported("paste"):!0;function C(b){return b.register(),b}const M=g?C(new O.AJ({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:d.tY?{primary:2048|54,win:{primary:2048|54,secondary:[1024|20]},weight:100}:void 0,menuOpts:[{menuId:B.eH.MenubarEditMenu,group:"2_ccp",title:T.N({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:B.eH.EditorContext,group:v,title:T.N("actions.clipboard.cutLabel","Cut"),when:j.u.writable,order:1},{menuId:B.eH.CommandPalette,group:"",title:T.N("actions.clipboard.cutLabel","Cut"),order:1},{menuId:B.eH.SimpleEditorContext,group:v,title:T.N("actions.clipboard.cutLabel","Cut"),when:j.u.writable,order:1}]})):void 0,E=D?C(new O.AJ({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:d.tY?{primary:2048|33,win:{primary:2048|33,secondary:[2048|19]},weight:100}:void 0,menuOpts:[{menuId:B.eH.MenubarEditMenu,group:"2_ccp",title:T.N({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:B.eH.EditorContext,group:v,title:T.N("actions.clipboard.copyLabel","Copy"),order:2},{menuId:B.eH.CommandPalette,group:"",title:T.N("actions.clipboard.copyLabel","Copy"),order:1},{menuId:B.eH.SimpleEditorContext,group:v,title:T.N("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;B.BH.appendMenuItem(B.eH.MenubarEditMenu,{submenu:B.eH.MenubarCopy,title:{value:T.N("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),B.BH.appendMenuItem(B.eH.EditorContext,{submenu:B.eH.EditorContextCopy,title:{value:T.N("copy as","Copy As"),original:"Copy As"},group:v,order:3});const _=c?C(new O.AJ({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:d.tY?{primary:2048|52,win:{primary:2048|52,secondary:[1024|19]},linux:{primary:2048|52,secondary:[1024|19]},weight:100}:void 0,menuOpts:[{menuId:B.eH.MenubarEditMenu,group:"2_ccp",title:T.N({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:B.eH.EditorContext,group:v,title:T.N("actions.clipboard.pasteLabel","Paste"),when:j.u.writable,order:4},{menuId:B.eH.CommandPalette,group:"",title:T.N("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:B.eH.SimpleEditorContext,group:v,title:T.N("actions.clipboard.pasteLabel","Paste"),when:j.u.writable,order:4}]})):void 0;class L extends O.R6{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:T.N("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:j.u.textInputFocus,primary:0,weight:100}})}run(I,k){!k.hasModel()||!k.getOption(32)&&k.getSelection().isEmpty()||(z.RA.forceCopyWithSyntaxHighlighting=!0,k.focus(),document.execCommand("copy"),z.RA.forceCopyWithSyntaxHighlighting=!1)}}function N(b,I){!b||(b.addImplementation(1e4,"code-editor",(k,W)=>{const q=k.get(S.$).getFocusedCodeEditor();if(q&&q.hasTextFocus()){const re=q.getOption(32),de=q.getSelection();return de&&de.isEmpty()&&!re||document.execCommand(I),!0}return!1}),b.addImplementation(0,"generic-dom",(k,W)=>(document.execCommand(I),!0)))}N(M,"cut"),N(E,"copy"),_&&(_.addImplementation(1e4,"code-editor",(b,I)=>{const k=b.get(S.$),W=b.get(F.p),q=k.getFocusedCodeEditor();return q&&q.hasTextFocus()?!document.execCommand("paste")&&d.$L?(()=>x(void 0,void 0,void 0,function*(){const de=yield W.readText();if(de!==""){const pe=z.Nl.INSTANCE.get(de);let ae=!1,ue=null,te=null;pe&&(ae=q.getOption(32)&&!!pe.isFromEmptySelection,ue=typeof pe.multicursorText!="undefined"?pe.multicursorText:null,te=pe.mode),q.trigger("keyboard","paste",{text:de,pasteOnNewLine:ae,multicursorText:ue,mode:te})}}))():!0:!1}),_.addImplementation(0,"generic-dom",(b,I)=>(document.execCommand("paste"),!0))),D&&(0,O.Qr)(L)},75396:function(Tt,me,a){"use strict";a.d(me,{RB:function(){return C},Bb:function(){return M},MN:function(){return E},uH:function(){return _},TM:function(){return L},bA:function(){return N},aI:function(){return k}});var p=a(9488),d=a(71050),z=a(17301),O=a(9917),S=a(70666),j=a(16467),T=a(24314),B=a(3860),F=a(73733),x=a(94565),v=a(90535),g=a(76014),D=a(71922),c=function(re,de,pe,ae){function ue(te){return te instanceof pe?te:new pe(function(K){K(te)})}return new(pe||(pe=Promise))(function(te,K){function U(le){try{X(ae.next(le))}catch(oe){K(oe)}}function ee(le){try{X(ae.throw(le))}catch(oe){K(oe)}}function X(le){le.done?te(le.value):ue(le.value).then(U,ee)}X((ae=ae.apply(re,de||[])).next())})};const C="editor.action.codeAction",M="editor.action.refactor",E="editor.action.sourceAction",_="editor.action.organizeImports",L="editor.action.fixAll";class N{constructor(de,pe){this.action=de,this.provider=pe}resolve(de){var pe;return c(this,void 0,void 0,function*(){if(((pe=this.provider)===null||pe===void 0?void 0:pe.resolveCodeAction)&&!this.action.edit){let ae;try{ae=yield this.provider.resolveCodeAction(this.action,de)}catch(ue){(0,z.Cp)(ue)}ae&&(this.action.edit=ae.edit)}return this})}}class b extends O.JT{constructor(de,pe,ae){super();this.documentation=pe,this._register(ae),this.allActions=[...de].sort(b.codeActionsComparator),this.validActions=this.allActions.filter(({action:ue})=>!ue.disabled)}static codeActionsComparator({action:de},{action:pe}){return de.isPreferred&&!pe.isPreferred?-1:!de.isPreferred&&pe.isPreferred?1:(0,p.Of)(de.diagnostics)?(0,p.Of)(pe.diagnostics)?de.diagnostics[0].message.localeCompare(pe.diagnostics[0].message):-1:(0,p.Of)(pe.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:de})=>!!de.kind&&g.yN.QuickFix.contains(new g.yN(de.kind))&&!!de.isPreferred)}}const I={actions:[],documentation:void 0};function k(re,de,pe,ae,ue,te){var K;const U=ae.filter||{},ee={only:(K=U.include)===null||K===void 0?void 0:K.value,trigger:ae.type},X=new j.YQ(de,te),le=W(re,de,U),oe=new O.SL,Ce=le.map(ke=>c(this,void 0,void 0,function*(){try{ue.report(ke);const Te=yield ke.provideCodeActions(de,pe,ee,X.token);if(Te&&oe.add(Te),X.token.isCancellationRequested)return I;const ge=((Te==null?void 0:Te.actions)||[]).filter(ze=>ze&&(0,g.Yl)(U,ze)),we=q(ke,ge,U.include);return{actions:ge.map(ze=>new N(ze,ke)),documentation:we}}catch(Te){if((0,z.n2)(Te))throw Te;return(0,z.Cp)(Te),I}})),ye=re.onDidChange(()=>{const ke=re.all(de);(0,p.fS)(ke,le)||X.cancel()});return Promise.all(Ce).then(ke=>{const Te=(0,p.xH)(ke.map(we=>we.actions)),ge=(0,p.kX)(ke.map(we=>we.documentation));return new b(Te,ge,oe)}).finally(()=>{ye.dispose(),X.dispose()})}function W(re,de,pe){return re.all(de).filter(ae=>ae.providedCodeActionKinds?ae.providedCodeActionKinds.some(ue=>(0,g.EU)(pe,new g.yN(ue))):!0)}function q(re,de,pe){if(!re.documentation)return;const ae=re.documentation.map(ue=>({kind:new g.yN(ue.kind),command:ue.command}));if(pe){let ue;for(const te of ae)te.kind.contains(pe)&&(ue?ue.kind.contains(te.kind)&&(ue=te):ue=te);if(ue)return ue==null?void 0:ue.command}for(const ue of de)if(!!ue.kind){for(const te of ae)if(te.kind.contains(new g.yN(ue.kind)))return te.command}}x.P0.registerCommand("_executeCodeActionProvider",function(re,de,pe,ae,ue){return c(this,void 0,void 0,function*(){if(!(de instanceof S.o))throw(0,z.b1)();const{codeActionProvider:te}=re.get(D.p),K=re.get(F.q).getModel(de);if(!K)throw(0,z.b1)();const U=B.Y.isISelection(pe)?B.Y.liftSelection(pe):T.e.isIRange(pe)?K.validateRange(pe):void 0;if(!U)throw(0,z.b1)();const ee=typeof ae=="string"?new g.yN(ae):void 0,X=yield k(te,K,U,{type:1,filter:{includeSourceActions:!0,include:ee}},v.Ex.None,d.T.None),le=[],oe=Math.min(X.validActions.length,typeof ue=="number"?ue:0);for(let Ce=0;Ce<oe;Ce++)le.push(X.validActions[Ce].resolve(d.T.None));try{return yield Promise.all(le),X.validActions.map(Ce=>Ce.action)}finally{setTimeout(()=>X.dispose(),100)}})})},86454:function(Tt,me,a){"use strict";a.d(me,{S5:function(){return An},dW:function(){return Et},Hv:function(){return an},o$:function(){return ft},E7:function(){return je},pY:function(){return Ve},Eb:function(){return Dt},VQ:function(){return Xe}});var p=a(71050),d=a(79579),z=a(9917),O=a(25924),S=a(16830),j=a(66007),T=a(29102),B=a(71922),F=a(75396),x=a(17301),v=a(27753),g=a(72065),D=a(65321),c=a(74741),C=a(50187),M=a(76014),E=a(5606),_=a(91847),L=function(Fn,Ht,Kt,pn){var Vn=arguments.length,kt=Vn<3?Ht:pn===null?pn=Object.getOwnPropertyDescriptor(Ht,Kt):pn,Zt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")kt=Reflect.decorate(Fn,Ht,Kt,pn);else for(var wn=Fn.length-1;wn>=0;wn--)(Zt=Fn[wn])&&(kt=(Vn<3?Zt(kt):Vn>3?Zt(Ht,Kt,kt):Zt(Ht,Kt))||kt);return Vn>3&&kt&&Object.defineProperty(Ht,Kt,kt),kt},N=function(Fn,Ht){return function(Kt,pn){Ht(Kt,pn,Fn)}},b=function(Fn,Ht,Kt,pn){function Vn(kt){return kt instanceof Kt?kt:new Kt(function(Zt){Zt(kt)})}return new(Kt||(Kt=Promise))(function(kt,Zt){function wn(Ji){try{Fi(pn.next(Ji))}catch(si){Zt(si)}}function Pi(Ji){try{Fi(pn.throw(Ji))}catch(si){Zt(si)}}function Fi(Ji){Ji.done?kt(Ji.value):Vn(Ji.value).then(wn,Pi)}Fi((pn=pn.apply(Fn,Ht||[])).next())})};class I extends c.aU{constructor(Ht,Kt){super(Ht.command?Ht.command.id:Ht.title,k(Ht.title),void 0,!Ht.disabled,Kt);this.action=Ht}}function k(Fn){return Fn.replace(/\r\n|\r|\n/g," ")}let W=class extends z.JT{constructor(Ht,Kt,pn,Vn,kt){super();this._editor=Ht,this._delegate=Kt,this._contextMenuService=pn,this._languageFeaturesService=kt,this._visible=!1,this._showingActions=this._register(new z.XK),this._keybindingResolver=new q({getKeybindings:()=>Vn.getKeybindings()})}get isVisible(){return this._visible}show(Ht,Kt,pn,Vn){return b(this,void 0,void 0,function*(){const kt=Vn.includeDisabledActions?Kt.allActions:Kt.validActions;if(!kt.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,(0,x.F0)();this._visible=!0,this._showingActions.value=Kt;const Zt=this.getMenuActions(Ht,kt,Kt.documentation),wn=C.L.isIPosition(pn)?this._toCoords(pn):pn||{x:0,y:0},Pi=this._keybindingResolver.getResolver(),Fi=this._editor.getOption(115);this._contextMenuService.showContextMenu({domForShadowRoot:Fi?this._editor.getDomNode():void 0,getAnchor:()=>wn,getActions:()=>Zt,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:Ji=>Ji instanceof I?Pi(Ji.action):void 0})})}getMenuActions(Ht,Kt,pn){var Vn,kt;const Zt=Ji=>new I(Ji.action,()=>this._delegate.onSelectCodeAction(Ji)),wn=Kt.map(Zt),Pi=[...pn],Fi=this._editor.getModel();if(Fi&&wn.length)for(const Ji of this._languageFeaturesService.codeActionProvider.all(Fi))Ji._getAdditionalMenuItems&&Pi.push(...Ji._getAdditionalMenuItems({trigger:Ht.type,only:(kt=(Vn=Ht.filter)===null||Vn===void 0?void 0:Vn.include)===null||kt===void 0?void 0:kt.value},Kt.map(si=>si.action)));return Pi.length&&wn.push(new c.Z0,...Pi.map(Ji=>Zt(new F.bA({title:Ji.title,command:Ji},void 0)))),wn}_toCoords(Ht){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(Ht,1),this._editor.render();const Kt=this._editor.getScrolledVisiblePosition(Ht),pn=(0,D.i)(this._editor.getDomNode()),Vn=pn.left+Kt.left,kt=pn.top+Kt.top+Kt.height;return{x:Vn,y:kt}}};W=L([N(2,E.i),N(3,_.d),N(4,B.p)],W);class q{constructor(Ht){this._keybindingProvider=Ht}getResolver(){const Ht=new d.o(()=>this._keybindingProvider.getKeybindings().filter(Kt=>q.codeActionCommands.indexOf(Kt.command)>=0).filter(Kt=>Kt.resolvedKeybinding).map(Kt=>{let pn=Kt.commandArgs;return Kt.command===F.uH?pn={kind:M.yN.SourceOrganizeImports.value}:Kt.command===F.TM&&(pn={kind:M.yN.SourceFixAll.value}),Object.assign({resolvedKeybinding:Kt.resolvedKeybinding},M.wZ.fromUser(pn,{kind:M.yN.None,apply:"never"}))}));return Kt=>{if(Kt.kind){const pn=this.bestKeybindingForCodeAction(Kt,Ht.getValue());return pn==null?void 0:pn.resolvedKeybinding}}}bestKeybindingForCodeAction(Ht,Kt){if(!Ht.kind)return;const pn=new M.yN(Ht.kind);return Kt.filter(Vn=>Vn.kind.contains(pn)).filter(Vn=>Vn.preferred?Ht.isPreferred:!0).reduceRight((Vn,kt)=>Vn?Vn.kind.contains(kt.kind)?kt:Vn:kt,void 0)}}q.codeActionCommands=[F.Bb,F.RB,F.MN,F.uH,F.TM];var re=a(57974),de=a(10553),pe=a(73046),ae=a(4669),ue=a(59616),te=a(63580),K=a(73910),U=a(97781),ee=function(Fn,Ht,Kt,pn){var Vn=arguments.length,kt=Vn<3?Ht:pn===null?pn=Object.getOwnPropertyDescriptor(Ht,Kt):pn,Zt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")kt=Reflect.decorate(Fn,Ht,Kt,pn);else for(var wn=Fn.length-1;wn>=0;wn--)(Zt=Fn[wn])&&(kt=(Vn<3?Zt(kt):Vn>3?Zt(Ht,Kt,kt):Zt(Ht,Kt))||kt);return Vn>3&&kt&&Object.defineProperty(Ht,Kt,kt),kt},X=function(Fn,Ht){return function(Kt,pn){Ht(Kt,pn,Fn)}},le;(function(Fn){Fn.Hidden={type:0};class Ht{constructor(pn,Vn,kt,Zt){this.actions=pn,this.trigger=Vn,this.editorPosition=kt,this.widgetPosition=Zt,this.type=1}}Fn.Showing=Ht})(le||(le={}));let oe=class tS extends z.JT{constructor(Ht,Kt,pn,Vn){super();this._editor=Ht,this._quickFixActionId=Kt,this._preferredFixActionId=pn,this._keybindingService=Vn,this._onClick=this._register(new ae.Q5),this.onClick=this._onClick.event,this._state=le.Hidden,this._domNode=document.createElement("div"),this._domNode.className=pe.lA.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(kt=>{const Zt=this._editor.getModel();(this.state.type!==1||!Zt||this.state.editorPosition.lineNumber>=Zt.getLineCount())&&this.hide()})),de.o.ignoreTarget(this._domNode),this._register(D.GQ(this._domNode,kt=>{if(this.state.type!==1)return;this._editor.focus(),kt.preventDefault();const{top:Zt,height:wn}=D.i(this._domNode),Pi=this._editor.getOption(59);let Fi=Math.floor(Pi/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(Fi+=Pi),this._onClick.fire({x:kt.posx,y:Zt+wn+Fi,actions:this.state.actions,trigger:this.state.trigger})})),this._register(D.nm(this._domNode,"mouseenter",kt=>{if((kt.buttons&1)!=1)return;this.hide();const Zt=new re.Z;Zt.startMonitoring(kt.target,kt.buttons,re.e,()=>{},()=>{Zt.dispose()})})),this._register(this._editor.onDidChangeConfiguration(kt=>{kt.hasChanged(57)&&!this._editor.getOption(57).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(Ht,Kt,pn){if(Ht.validActions.length<=0)return this.hide();const Vn=this._editor.getOptions();if(!Vn.get(57).enabled)return this.hide();const kt=this._editor.getModel();if(!kt)return this.hide();const{lineNumber:Zt,column:wn}=kt.validatePosition(pn),Pi=kt.getOptions().tabSize,Fi=Vn.get(44),Ji=kt.getLineContent(Zt),si=(0,ue.q)(Ji,Pi),zt=Fi.spaceWidth*si>22,Vt=Sn=>Sn>2&&this._editor.getTopForLineNumber(Sn)===this._editor.getTopForLineNumber(Sn-1);let vn=Zt;if(!zt){if(Zt>1&&!Vt(Zt-1))vn-=1;else if(!Vt(Zt+1))vn+=1;else if(wn*Fi.spaceWidth<22)return this.hide()}this.state=new le.Showing(Ht,Kt,pn,{position:{lineNumber:vn,column:1},preference:tS._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=le.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(Ht){this._state=Ht,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...pe.lA.lightBulb.classNamesArray),this._domNode.classList.add(...pe.lA.lightbulbAutofix.classNamesArray);const Kt=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(Kt){this.title=te.N("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",Kt.getLabel());return}}this._domNode.classList.remove(...pe.lA.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...pe.lA.lightBulb.classNamesArray);const Ht=this._keybindingService.lookupKeybinding(this._quickFixActionId);Ht?this.title=te.N("codeActionWithKb","Show Code Actions ({0})",Ht.getLabel()):this.title=te.N("codeAction","Show Code Actions")}set title(Ht){this._domNode.title=Ht}};oe._posPref=[0],oe=ee([X(3,_.d)],oe),(0,U.Ic)((Fn,Ht)=>{var Kt;const pn=(Kt=Fn.getColor(K.cvW))===null||Kt===void 0?void 0:Kt.transparent(.7),Vn=Fn.getColor(K.Fu1);Vn&&Ht.addRule(`
		.monaco-editor .contentWidgets ${pe.lA.lightBulb.cssSelector} {
			color: ${Vn};
			background-color: ${pn};
		}`);const kt=Fn.getColor(K.sKV);kt&&Ht.addRule(`
		.monaco-editor .contentWidgets ${pe.lA.lightbulbAutofix.cssSelector} {
			color: ${kt};
			background-color: ${pn};
		}`)});var Ce=function(Fn,Ht,Kt,pn){var Vn=arguments.length,kt=Vn<3?Ht:pn===null?pn=Object.getOwnPropertyDescriptor(Ht,Kt):pn,Zt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")kt=Reflect.decorate(Fn,Ht,Kt,pn);else for(var wn=Fn.length-1;wn>=0;wn--)(Zt=Fn[wn])&&(kt=(Vn<3?Zt(kt):Vn>3?Zt(Ht,Kt,kt):Zt(Ht,Kt))||kt);return Vn>3&&kt&&Object.defineProperty(Ht,Kt,kt),kt},ye=function(Fn,Ht){return function(Kt,pn){Ht(Kt,pn,Fn)}},ke=function(Fn,Ht,Kt,pn){function Vn(kt){return kt instanceof Kt?kt:new Kt(function(Zt){Zt(kt)})}return new(Kt||(Kt=Promise))(function(kt,Zt){function wn(Ji){try{Fi(pn.next(Ji))}catch(si){Zt(si)}}function Pi(Ji){try{Fi(pn.throw(Ji))}catch(si){Zt(si)}}function Fi(Ji){Ji.done?kt(Ji.value):Vn(Ji.value).then(wn,Pi)}Fi((pn=pn.apply(Fn,Ht||[])).next())})},Te=function(Fn,Ht,Kt,pn,Vn){if(pn==="m")throw new TypeError("Private method is not writable");if(pn==="a"&&!Vn)throw new TypeError("Private accessor was defined without a setter");if(typeof Ht=="function"?Fn!==Ht||!Vn:!Ht.has(Fn))throw new TypeError("Cannot write private member to an object whose class did not declare it");return pn==="a"?Vn.call(Fn,Kt):Vn?Vn.value=Kt:Ht.set(Fn,Kt),Kt},ge=function(Fn,Ht,Kt,pn){if(Kt==="a"&&!pn)throw new TypeError("Private accessor was defined without a getter");if(typeof Ht=="function"?Fn!==Ht||!pn:!Ht.has(Fn))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Kt==="m"?pn:Kt==="a"?pn.call(Fn):pn?pn.value:Ht.get(Fn)},we;let ze=class extends z.JT{constructor(Ht,Kt,pn,Vn,kt){super();this._editor=Ht,this.delegate=Vn,this._activeCodeActions=this._register(new z.XK),we.set(this,!1),this._codeActionWidget=new d.o(()=>this._register(kt.createInstance(W,this._editor,{onSelectCodeAction:Zt=>ke(this,void 0,void 0,function*(){this.delegate.applyCodeAction(Zt,!0)})}))),this._lightBulbWidget=new d.o(()=>{const Zt=this._register(kt.createInstance(oe,this._editor,Kt,pn));return this._register(Zt.onClick(wn=>this.showCodeActionList(wn.trigger,wn.actions,wn,{includeDisabledActions:!1}))),Zt})}dispose(){Te(this,we,!0,"f"),super.dispose()}update(Ht){var Kt,pn,Vn,kt,Zt;return ke(this,void 0,void 0,function*(){if(Ht.type!==1){(Kt=this._lightBulbWidget.rawValue)===null||Kt===void 0||Kt.hide();return}let wn;try{wn=yield Ht.actions}catch(Pi){(0,x.dL)(Pi);return}if(!ge(this,we,"f"))if(this._lightBulbWidget.getValue().update(wn,Ht.trigger,Ht.position),Ht.trigger.type===1){if((pn=Ht.trigger.filter)===null||pn===void 0?void 0:pn.include){const Fi=this.tryGetValidActionToApply(Ht.trigger,wn);if(Fi){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(Fi,!1)}finally{wn.dispose()}return}if(Ht.trigger.context){const Ji=this.getInvalidActionThatWouldHaveBeenApplied(Ht.trigger,wn);if(Ji&&Ji.action.disabled){(Vn=v.O.get(this._editor))===null||Vn===void 0||Vn.showMessage(Ji.action.disabled,Ht.trigger.context.position),wn.dispose();return}}}const Pi=!!((kt=Ht.trigger.filter)===null||kt===void 0?void 0:kt.include);if(Ht.trigger.context&&(!wn.allActions.length||!Pi&&!wn.validActions.length)){(Zt=v.O.get(this._editor))===null||Zt===void 0||Zt.showMessage(Ht.trigger.context.notAvailableMessage,Ht.trigger.context.position),this._activeCodeActions.value=wn,wn.dispose();return}this._activeCodeActions.value=wn,this._codeActionWidget.getValue().show(Ht.trigger,wn,Ht.position,{includeDisabledActions:Pi})}else this._codeActionWidget.getValue().isVisible?wn.dispose():this._activeCodeActions.value=wn})}getInvalidActionThatWouldHaveBeenApplied(Ht,Kt){if(!!Kt.allActions.length&&(Ht.autoApply==="first"&&Kt.validActions.length===0||Ht.autoApply==="ifSingle"&&Kt.allActions.length===1))return Kt.allActions.find(({action:pn})=>pn.disabled)}tryGetValidActionToApply(Ht,Kt){if(!!Kt.validActions.length&&(Ht.autoApply==="first"&&Kt.validActions.length>0||Ht.autoApply==="ifSingle"&&Kt.validActions.length===1))return Kt.validActions[0]}showCodeActionList(Ht,Kt,pn,Vn){return ke(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(Ht,Kt,pn,Vn)})}};we=new WeakMap,ze=Ce([ye(4,g.TG)],ze);var Qe=a(94565),Pe=a(16141),Oe=a(98674),qe=a(59422),Je=a(90535),Ne=a(10829),Fe=a(15393),ne=a(95935),Q=a(24314),ie=function(Fn,Ht,Kt,pn){if(Kt==="a"&&!pn)throw new TypeError("Private accessor was defined without a getter");if(typeof Ht=="function"?Fn!==Ht||!pn:!Ht.has(Fn))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Kt==="m"?pn:Kt==="a"?pn.call(Fn):pn?pn.value:Ht.get(Fn)},xe=function(Fn,Ht,Kt,pn,Vn){if(pn==="m")throw new TypeError("Private method is not writable");if(pn==="a"&&!Vn)throw new TypeError("Private accessor was defined without a setter");if(typeof Ht=="function"?Fn!==Ht||!Vn:!Ht.has(Fn))throw new TypeError("Cannot write private member to an object whose class did not declare it");return pn==="a"?Vn.call(Fn,Kt):Vn?Vn.value=Kt:Ht.set(Fn,Kt),Kt},be;const Ge=new Pe.uy("supportedCodeAction","");class nt extends z.JT{constructor(Ht,Kt,pn,Vn=250){super();this._editor=Ht,this._markerService=Kt,this._signalChange=pn,this._delay=Vn,this._autoTriggerTimer=this._register(new Fe._F),this._register(this._markerService.onMarkerChanged(kt=>this._onMarkerChanges(kt))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(Ht){const Kt=this._getRangeOfSelectionUnlessWhitespaceEnclosed(Ht);return this._createEventAndSignalChange(Ht,Kt)}_onMarkerChanges(Ht){const Kt=this._editor.getModel();!Kt||Ht.some(pn=>(0,ne.Xy)(pn,Kt.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(Ht){const Kt=this._editor.getModel();if(!!Kt)for(const pn of this._markerService.read({resource:Kt.uri})){const Vn=Kt.validateRange(pn);if(Q.e.intersectRanges(Vn,Ht))return Q.e.lift(Vn)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(Ht){if(!this._editor.hasModel())return;const Kt=this._editor.getModel(),pn=this._editor.getSelection();if(pn.isEmpty()&&Ht.type===2){const{lineNumber:Vn,column:kt}=pn.getPosition(),Zt=Kt.getLineContent(Vn);if(Zt.length===0)return;if(kt===1){if(/\s/.test(Zt[0]))return}else if(kt===Kt.getLineMaxColumn(Vn)){if(/\s/.test(Zt[Zt.length-1]))return}else if(/\s/.test(Zt[kt-2])&&/\s/.test(Zt[kt-1]))return}return pn}_createEventAndSignalChange(Ht,Kt){const pn=this._editor.getModel();if(!Kt||!pn){this._signalChange(void 0);return}const Vn=this._getRangeOfMarker(Kt),kt=Vn?Vn.getStartPosition():Kt.getStartPosition(),Zt={trigger:Ht,selection:Kt,position:kt};return this._signalChange(Zt),Zt}}var _t;(function(Fn){Fn.Empty={type:0};class Ht{constructor(pn,Vn,kt,Zt){this.trigger=pn,this.rangeOrSelection=Vn,this.position=kt,this._cancellablePromise=Zt,this.type=1,this.actions=Zt.catch(wn=>{if((0,x.n2)(wn))return Ot;throw wn})}cancel(){this._cancellablePromise.cancel()}}Fn.Triggered=Ht})(_t||(_t={}));const Ot={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class rn extends z.JT{constructor(Ht,Kt,pn,Vn,kt){super();this._editor=Ht,this._registry=Kt,this._markerService=pn,this._progressService=kt,this._codeActionOracle=this._register(new z.XK),this._state=_t.Empty,this._onDidChangeState=this._register(new ae.Q5),this.onDidChangeState=this._onDidChangeState.event,be.set(this,!1),this._supportedCodeActions=Ge.bindTo(Vn),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){ie(this,be,"f")||(xe(this,be,!0,"f"),super.dispose(),this.setState(_t.Empty,!0))}_update(){if(ie(this,be,"f"))return;this._codeActionOracle.value=void 0,this.setState(_t.Empty);const Ht=this._editor.getModel();if(Ht&&this._registry.has(Ht)&&!this._editor.getOption(81)){const Kt=[];for(const pn of this._registry.all(Ht))Array.isArray(pn.providedCodeActionKinds)&&Kt.push(...pn.providedCodeActionKinds);this._supportedCodeActions.set(Kt.join(" ")),this._codeActionOracle.value=new nt(this._editor,this._markerService,pn=>{var Vn;if(!pn){this.setState(_t.Empty);return}const kt=(0,Fe.PG)(Zt=>(0,F.aI)(this._registry,Ht,pn.selection,pn.trigger,Je.Ex.None,Zt));pn.trigger.type===1&&((Vn=this._progressService)===null||Vn===void 0||Vn.showWhile(kt,250)),this.setState(new _t.Triggered(pn.trigger,pn.selection,pn.position,kt))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(Ht){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(Ht)}setState(Ht,Kt){Ht!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=Ht,!Kt&&!ie(this,be,"f")&&this._onDidChangeState.fire(Ht))}}be=new WeakMap;var gt=function(Fn,Ht,Kt,pn){var Vn=arguments.length,kt=Vn<3?Ht:pn===null?pn=Object.getOwnPropertyDescriptor(Ht,Kt):pn,Zt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")kt=Reflect.decorate(Fn,Ht,Kt,pn);else for(var wn=Fn.length-1;wn>=0;wn--)(Zt=Fn[wn])&&(kt=(Vn<3?Zt(kt):Vn>3?Zt(Ht,Kt,kt):Zt(Ht,Kt))||kt);return Vn>3&&kt&&Object.defineProperty(Ht,Kt,kt),kt},Ue=function(Fn,Ht){return function(Kt,pn){Ht(Kt,pn,Fn)}},Ye=function(Fn,Ht,Kt,pn){function Vn(kt){return kt instanceof Kt?kt:new Kt(function(Zt){Zt(kt)})}return new(Kt||(Kt=Promise))(function(kt,Zt){function wn(Ji){try{Fi(pn.next(Ji))}catch(si){Zt(si)}}function Pi(Ji){try{Fi(pn.throw(Ji))}catch(si){Zt(si)}}function Fi(Ji){Ji.done?kt(Ji.value):Vn(Ji.value).then(wn,Pi)}Fi((pn=pn.apply(Fn,Ht||[])).next())})};function dt(Fn){return Pe.Ao.regex(Ge.keys()[0],new RegExp("(\\s|^)"+(0,O.ec)(Fn.value)+"\\b"))}const Re={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:te.N("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:te.N("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[te.N("args.schema.apply.first","Always apply the first returned code action."),te.N("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),te.N("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:te.N("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let Ve=class nS extends z.JT{constructor(Ht,Kt,pn,Vn,kt,Zt){super();this._instantiationService=kt,this._editor=Ht,this._model=this._register(new rn(this._editor,Zt.codeActionProvider,Kt,pn,Vn)),this._register(this._model.onDidChangeState(wn=>this.update(wn))),this._ui=new d.o(()=>this._register(new ze(Ht,je.Id,An.Id,{applyCodeAction:(wn,Pi)=>Ye(this,void 0,void 0,function*(){try{yield this._applyCodeAction(wn)}finally{Pi&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(Ht){return Ht.getContribution(nS.ID)}update(Ht){this._ui.getValue().update(Ht)}showCodeActions(Ht,Kt,pn){return this._ui.getValue().showCodeActionList(Ht,Kt,pn,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(Ht,Kt,pn){var Vn;if(!this._editor.hasModel())return;(Vn=v.O.get(this._editor))===null||Vn===void 0||Vn.closeMessage();const kt=this._editor.getPosition();this._trigger({type:1,filter:Kt,autoApply:pn,context:{notAvailableMessage:Ht,position:kt}})}_trigger(Ht){return this._model.trigger(Ht)}_applyCodeAction(Ht){return this._instantiationService.invokeFunction(at,Ht,this._editor)}};Ve.ID="editor.contrib.quickFixController",Ve=gt([Ue(1,Oe.lT),Ue(2,Pe.i6),Ue(3,Je.ek),Ue(4,g.TG),Ue(5,B.p)],Ve);function at(Fn,Ht,Kt){return Ye(this,void 0,void 0,function*(){const pn=Fn.get(j.vu),Vn=Fn.get(Qe.Hy),kt=Fn.get(Ne.b),Zt=Fn.get(qe.lT);if(kt.publicLog2("codeAction.applyCodeAction",{codeActionTitle:Ht.action.title,codeActionKind:Ht.action.kind,codeActionIsPreferred:!!Ht.action.isPreferred}),yield Ht.resolve(p.T.None),Ht.action.edit&&(yield pn.apply(j.fo.convert(Ht.action.edit),{editor:Kt,label:Ht.action.title})),Ht.action.command)try{yield Vn.executeCommand(Ht.action.command.id,...Ht.action.command.arguments||[])}catch(wn){const Pi=pt(wn);Zt.error(typeof Pi=="string"?Pi:te.N("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function pt(Fn){return typeof Fn=="string"?Fn:Fn instanceof Error&&typeof Fn.message=="string"?Fn.message:void 0}function Be(Fn,Ht,Kt,pn){if(Fn.hasModel()){const Vn=Ve.get(Fn);Vn&&Vn.manualTriggerAtCurrentPosition(Ht,Kt,pn)}}class je extends S.R6{constructor(){super({id:je.Id,label:te.N("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:Pe.Ao.and(T.u.writable,T.u.hasCodeActionsProvider),kbOpts:{kbExpr:T.u.editorTextFocus,primary:2048|84,weight:100}})}run(Ht,Kt){return Be(Kt,te.N("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}je.Id="editor.action.quickFix";class Et extends S._l{constructor(){super({id:F.RB,precondition:Pe.Ao.and(T.u.writable,T.u.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:Re}]}})}runEditorCommand(Ht,Kt,pn){const Vn=M.wZ.fromUser(pn,{kind:M.yN.Empty,apply:"ifSingle"});return Be(Kt,typeof(pn==null?void 0:pn.kind)=="string"?Vn.preferred?te.N("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",pn.kind):te.N("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",pn.kind):Vn.preferred?te.N("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):te.N("editor.action.codeAction.noneMessage","No code actions available"),{include:Vn.kind,includeSourceActions:!0,onlyIncludePreferredActions:Vn.preferred},Vn.apply)}}class Dt extends S.R6{constructor(){super({id:F.Bb,label:te.N("refactor.label","Refactor..."),alias:"Refactor...",precondition:Pe.Ao.and(T.u.writable,T.u.hasCodeActionsProvider),kbOpts:{kbExpr:T.u.editorTextFocus,primary:2048|1024|48,mac:{primary:256|1024|48},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:Pe.Ao.and(T.u.writable,dt(M.yN.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:Re}]}})}run(Ht,Kt,pn){const Vn=M.wZ.fromUser(pn,{kind:M.yN.Refactor,apply:"never"});return Be(Kt,typeof(pn==null?void 0:pn.kind)=="string"?Vn.preferred?te.N("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",pn.kind):te.N("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",pn.kind):Vn.preferred?te.N("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):te.N("editor.action.refactor.noneMessage","No refactorings available"),{include:M.yN.Refactor.contains(Vn.kind)?Vn.kind:M.yN.None,onlyIncludePreferredActions:Vn.preferred},Vn.apply)}}class Xe extends S.R6{constructor(){super({id:F.MN,label:te.N("source.label","Source Action..."),alias:"Source Action...",precondition:Pe.Ao.and(T.u.writable,T.u.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:Pe.Ao.and(T.u.writable,dt(M.yN.Source))},description:{description:"Source Action...",args:[{name:"args",schema:Re}]}})}run(Ht,Kt,pn){const Vn=M.wZ.fromUser(pn,{kind:M.yN.Source,apply:"never"});return Be(Kt,typeof(pn==null?void 0:pn.kind)=="string"?Vn.preferred?te.N("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",pn.kind):te.N("editor.action.source.noneMessage.kind","No source actions for '{0}' available",pn.kind):Vn.preferred?te.N("editor.action.source.noneMessage.preferred","No preferred source actions available"):te.N("editor.action.source.noneMessage","No source actions available"),{include:M.yN.Source.contains(Vn.kind)?Vn.kind:M.yN.None,includeSourceActions:!0,onlyIncludePreferredActions:Vn.preferred},Vn.apply)}}class ft extends S.R6{constructor(){super({id:F.uH,label:te.N("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:Pe.Ao.and(T.u.writable,dt(M.yN.SourceOrganizeImports)),kbOpts:{kbExpr:T.u.editorTextFocus,primary:1024|512|45,weight:100}})}run(Ht,Kt){return Be(Kt,te.N("editor.action.organize.noneMessage","No organize imports action available"),{include:M.yN.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class an extends S.R6{constructor(){super({id:F.TM,label:te.N("fixAll.label","Fix All"),alias:"Fix All",precondition:Pe.Ao.and(T.u.writable,dt(M.yN.SourceFixAll))})}run(Ht,Kt){return Be(Kt,te.N("fixAll.noneMessage","No fix all action available"),{include:M.yN.SourceFixAll,includeSourceActions:!0},"ifSingle")}}class An extends S.R6{constructor(){super({id:An.Id,label:te.N("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:Pe.Ao.and(T.u.writable,dt(M.yN.QuickFix)),kbOpts:{kbExpr:T.u.editorTextFocus,primary:512|1024|84,mac:{primary:2048|512|84},weight:100}})}run(Ht,Kt){return Be(Kt,te.N("editor.action.autoFix.noneMessage","No auto fixes available"),{include:M.yN.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}An.Id="editor.action.autoFix"},29575:function(Tt,me,a){"use strict";a.r(me);var p=a(16830),d=a(86454);(0,p._K)(d.pY.ID,d.pY),(0,p.Qr)(d.E7),(0,p.Qr)(d.Eb),(0,p.Qr)(d.VQ),(0,p.Qr)(d.o$),(0,p.Qr)(d.S5),(0,p.Qr)(d.Hv),(0,p.fK)(new d.dW)},76014:function(Tt,me,a){"use strict";a.d(me,{yN:function(){return p},EU:function(){return d},Yl:function(){return z},wZ:function(){return S}});class p{constructor(T){this.value=T}equals(T){return this.value===T.value}contains(T){return this.equals(T)||this.value===""||T.value.startsWith(this.value+p.sep)}intersects(T){return this.contains(T)||T.contains(this)}append(T){return new p(this.value+p.sep+T)}}p.sep=".",p.None=new p("@@none@@"),p.Empty=new p(""),p.QuickFix=new p("quickfix"),p.Refactor=new p("refactor"),p.Source=new p("source"),p.SourceOrganizeImports=p.Source.append("organizeImports"),p.SourceFixAll=p.Source.append("fixAll");function d(j,T){return!(j.include&&!j.include.intersects(T)||j.excludes&&j.excludes.some(B=>O(T,B,j.include))||!j.includeSourceActions&&p.Source.contains(T))}function z(j,T){const B=T.kind?new p(T.kind):void 0;return!(j.include&&(!B||!j.include.contains(B))||j.excludes&&B&&j.excludes.some(F=>O(B,F,j.include))||!j.includeSourceActions&&B&&p.Source.contains(B)||j.onlyIncludePreferredActions&&!T.isPreferred)}function O(j,T,B){return!(!T.contains(j)||B&&T.contains(B))}class S{constructor(T,B,F){this.kind=T,this.apply=B,this.preferred=F}static fromUser(T,B){return!T||typeof T!="object"?new S(B.kind,B.apply,!1):new S(S.getKindFromUser(T,B.kind),S.getApplyFromUser(T,B.apply),S.getPreferredUser(T))}static getApplyFromUser(T,B){switch(typeof T.apply=="string"?T.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return B}}static getKindFromUser(T,B){return typeof T.kind=="string"?new p(T.kind):B}static getPreferredUser(T){return typeof T.preferred=="boolean"?T.preferred:!1}}},85729:function(Tt,me,a){"use strict";a.r(me),a.d(me,{CodeLensContribution:function(){return we}});var p=a(65321),d=a(15393),z=a(17301),O=a(89954),S=a(9917),j=a(43407),T=a(16830),B=a(64141),F=a(29102),x=a(71050),v=a(98401),g=a(70666),D=a(73733),c=a(94565),C=a(71922),M=function(ze,Qe,Pe,Oe){function qe(Je){return Je instanceof Pe?Je:new Pe(function(Ne){Ne(Je)})}return new(Pe||(Pe=Promise))(function(Je,Ne){function Fe(ie){try{Q(Oe.next(ie))}catch(xe){Ne(xe)}}function ne(ie){try{Q(Oe.throw(ie))}catch(xe){Ne(xe)}}function Q(ie){ie.done?Je(ie.value):qe(ie.value).then(Fe,ne)}Q((Oe=Oe.apply(ze,Qe||[])).next())})};class E{constructor(){this.lenses=[],this._disposables=new S.SL}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(Qe,Pe){this._disposables.add(Qe);for(const Oe of Qe.lenses)this.lenses.push({symbol:Oe,provider:Pe})}}function _(ze,Qe,Pe){return M(this,void 0,void 0,function*(){const Oe=ze.ordered(Qe),qe=new Map,Je=new E,Ne=Oe.map((Fe,ne)=>M(this,void 0,void 0,function*(){qe.set(Fe,ne);try{const Q=yield Promise.resolve(Fe.provideCodeLenses(Qe,Pe));Q&&Je.add(Q,Fe)}catch(Q){(0,z.Cp)(Q)}}));return yield Promise.all(Ne),Je.lenses=Je.lenses.sort((Fe,ne)=>Fe.symbol.range.startLineNumber<ne.symbol.range.startLineNumber?-1:Fe.symbol.range.startLineNumber>ne.symbol.range.startLineNumber?1:qe.get(Fe.provider)<qe.get(ne.provider)?-1:qe.get(Fe.provider)>qe.get(ne.provider)?1:Fe.symbol.range.startColumn<ne.symbol.range.startColumn?-1:Fe.symbol.range.startColumn>ne.symbol.range.startColumn?1:0),Je})}c.P0.registerCommand("_executeCodeLensProvider",function(ze,...Qe){let[Pe,Oe]=Qe;(0,v.p_)(g.o.isUri(Pe)),(0,v.p_)(typeof Oe=="number"||!Oe);const{codeLensProvider:qe}=ze.get(C.p),Je=ze.get(D.q).getModel(Pe);if(!Je)throw(0,z.b1)();const Ne=[],Fe=new S.SL;return _(qe,Je,x.T.None).then(ne=>{Fe.add(ne);let Q=[];for(const ie of ne.lenses)Oe==null||Boolean(ie.symbol.command)?Ne.push(ie.symbol):Oe-- >0&&ie.provider.resolveCodeLens&&Q.push(Promise.resolve(ie.provider.resolveCodeLens(Je,ie.symbol,x.T.None)).then(xe=>Ne.push(xe||ie.symbol)));return Promise.all(Q)}).then(()=>Ne).finally(()=>{setTimeout(()=>Fe.dispose(),100)})});var L=a(88289),N=a(43702),b=a(24314),I=a(65026),k=a(72065),W=a(26904),q=function(ze,Qe,Pe,Oe){var qe=arguments.length,Je=qe<3?Qe:Oe===null?Oe=Object.getOwnPropertyDescriptor(Qe,Pe):Oe,Ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Je=Reflect.decorate(ze,Qe,Pe,Oe);else for(var Fe=ze.length-1;Fe>=0;Fe--)(Ne=ze[Fe])&&(Je=(qe<3?Ne(Je):qe>3?Ne(Qe,Pe,Je):Ne(Qe,Pe))||Je);return qe>3&&Je&&Object.defineProperty(Qe,Pe,Je),Je},re=function(ze,Qe){return function(Pe,Oe){Qe(Pe,Oe,ze)}};const de=(0,k.yh)("ICodeLensCache");class pe{constructor(Qe,Pe){this.lineCount=Qe,this.data=Pe}}let ae=class{constructor(Qe){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new N.z6(20,.75);const Pe="codelens/cache";(0,d.To)(()=>Qe.remove(Pe,1));const Oe="codelens/cache2",qe=Qe.get(Oe,1,"{}");this._deserialize(qe),(0,L.I)(Qe.onWillSaveState)(Je=>{Je.reason===W.fk.SHUTDOWN&&Qe.store(Oe,this._serialize(),1,1)})}put(Qe,Pe){const Oe=Pe.lenses.map(Ne=>{var Fe;return{range:Ne.symbol.range,command:Ne.symbol.command&&{id:"",title:(Fe=Ne.symbol.command)===null||Fe===void 0?void 0:Fe.title}}}),qe=new E;qe.add({lenses:Oe,dispose:()=>{}},this._fakeProvider);const Je=new pe(Qe.getLineCount(),qe);this._cache.set(Qe.uri.toString(),Je)}get(Qe){const Pe=this._cache.get(Qe.uri.toString());return Pe&&Pe.lineCount===Qe.getLineCount()?Pe.data:void 0}delete(Qe){this._cache.delete(Qe.uri.toString())}_serialize(){const Qe=Object.create(null);for(const[Pe,Oe]of this._cache){const qe=new Set;for(const Je of Oe.data.lenses)qe.add(Je.symbol.range.startLineNumber);Qe[Pe]={lineCount:Oe.lineCount,lines:[...qe.values()]}}return JSON.stringify(Qe)}_deserialize(Qe){try{const Pe=JSON.parse(Qe);for(const Oe in Pe){const qe=Pe[Oe],Je=[];for(const Fe of qe.lines)Je.push({range:new b.e(Fe,1,Fe,11)});const Ne=new E;Ne.add({lenses:Je,dispose(){}},this._fakeProvider),this._cache.set(Oe,new pe(qe.lineCount,Ne))}}catch(Pe){}}};ae=q([re(0,W.Uy)],ae),(0,I.z)(de,ae);var ue=a(56811),te=a(45146);class K{constructor(Qe,Pe,Oe){this.afterColumn=1073741824,this.afterLineNumber=Qe,this.heightInPx=Pe,this._onHeight=Oe,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(Qe){this._lastHeight===void 0?this._lastHeight=Qe:this._lastHeight!==Qe&&(this._lastHeight=Qe,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class U{constructor(Qe,Pe,Oe){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=Qe,this._id=`codelens.widget-${U._idPool++}`,this.updatePosition(Oe),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${Pe}`}withCommands(Qe,Pe){this._commands.clear();let Oe=[],qe=!1;for(let Je=0;Je<Qe.length;Je++){const Ne=Qe[Je];if(!!Ne&&(qe=!0,Ne.command)){const Fe=(0,ue.T)(Ne.command.title.trim());Ne.command.id?(Oe.push(p.$("a",{id:String(Je),title:Ne.command.tooltip},...Fe)),this._commands.set(String(Je),Ne.command)):Oe.push(p.$("span",{title:Ne.command.tooltip},...Fe)),Je+1<Qe.length&&Oe.push(p.$("span",void 0,"\xA0|\xA0"))}}qe?(p.mc(this._domNode,...Oe),this._isEmpty&&Pe&&this._domNode.classList.add("fadein"),this._isEmpty=!1):p.mc(this._domNode,p.$("span",void 0,"no commands"))}getCommand(Qe){return Qe.parentElement===this._domNode?this._commands.get(Qe.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(Qe){const Pe=this._editor.getModel().getLineFirstNonWhitespaceColumn(Qe);this._widgetPosition={position:{lineNumber:Qe,column:Pe},preference:[1]}}getPosition(){return this._widgetPosition||null}}U._idPool=0;class ee{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(Qe,Pe){this._addDecorations.push(Qe),this._addDecorationsCallbacks.push(Pe)}removeDecoration(Qe){this._removeDecorations.push(Qe)}commit(Qe){let Pe=Qe.deltaDecorations(this._removeDecorations,this._addDecorations);for(let Oe=0,qe=Pe.length;Oe<qe;Oe++)this._addDecorationsCallbacks[Oe](Pe[Oe])}}class X{constructor(Qe,Pe,Oe,qe,Je,Ne,Fe){this._isDisposed=!1,this._editor=Pe,this._className=Oe,this._data=Qe,this._decorationIds=[];let ne,Q=[];this._data.forEach((ie,xe)=>{ie.symbol.command&&Q.push(ie.symbol),qe.addDecoration({range:ie.symbol.range,options:te.qx.EMPTY},be=>this._decorationIds[xe]=be),ne?ne=b.e.plusRange(ne,ie.symbol.range):ne=b.e.lift(ie.symbol.range)}),this._viewZone=new K(ne.startLineNumber-1,Ne,Fe),this._viewZoneId=Je.addZone(this._viewZone),Q.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(Q,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new U(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(Qe,Pe){this._decorationIds.forEach(Qe.removeDecoration,Qe),this._decorationIds=[],Pe&&Pe.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((Qe,Pe)=>{const Oe=this._editor.getModel().getDecorationRange(Qe),qe=this._data[Pe].symbol;return!!(Oe&&b.e.isEmpty(qe.range)===Oe.isEmpty())})}updateCodeLensSymbols(Qe,Pe){this._decorationIds.forEach(Pe.removeDecoration,Pe),this._decorationIds=[],this._data=Qe,this._data.forEach((Oe,qe)=>{Pe.addDecoration({range:Oe.symbol.range,options:te.qx.EMPTY},Je=>this._decorationIds[qe]=Je)})}updateHeight(Qe,Pe){this._viewZone.heightInPx=Qe,Pe.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(Qe){if(!this._viewZone.isVisible())return null;for(let Pe=0;Pe<this._decorationIds.length;Pe++){const Oe=Qe.getDecorationRange(this._decorationIds[Pe]);Oe&&(this._data[Pe].symbol.range=Oe)}return this._data}updateCommands(Qe){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(Qe,!0);for(let Pe=0;Pe<this._data.length;Pe++){const Oe=Qe[Pe];if(Oe){const{symbol:qe}=this._data[Pe];qe.command=Oe.command||qe.command}}}getCommand(Qe){var Pe;return(Pe=this._contentWidget)===null||Pe===void 0?void 0:Pe.getCommand(Qe)}getLineNumber(){const Qe=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return Qe?Qe.startLineNumber:-1}update(Qe){if(this.isValid()){const Pe=this._editor.getModel().getDecorationRange(this._decorationIds[0]);Pe&&(this._viewZone.afterLineNumber=Pe.startLineNumber-1,Qe.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(Pe.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var le=a(63580),oe=a(59422),Ce=a(41157),ye=a(88191),ke=function(ze,Qe,Pe,Oe){var qe=arguments.length,Je=qe<3?Qe:Oe===null?Oe=Object.getOwnPropertyDescriptor(Qe,Pe):Oe,Ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Je=Reflect.decorate(ze,Qe,Pe,Oe);else for(var Fe=ze.length-1;Fe>=0;Fe--)(Ne=ze[Fe])&&(Je=(qe<3?Ne(Je):qe>3?Ne(Qe,Pe,Je):Ne(Qe,Pe))||Je);return qe>3&&Je&&Object.defineProperty(Qe,Pe,Je),Je},Te=function(ze,Qe){return function(Pe,Oe){Qe(Pe,Oe,ze)}},ge=function(ze,Qe,Pe,Oe){function qe(Je){return Je instanceof Pe?Je:new Pe(function(Ne){Ne(Je)})}return new(Pe||(Pe=Promise))(function(Je,Ne){function Fe(ie){try{Q(Oe.next(ie))}catch(xe){Ne(xe)}}function ne(ie){try{Q(Oe.throw(ie))}catch(xe){Ne(xe)}}function Q(ie){ie.done?Je(ie.value):qe(ie.value).then(Fe,ne)}Q((Oe=Oe.apply(ze,Qe||[])).next())})};let we=class{constructor(Qe,Pe,Oe,qe,Je,Ne){this._editor=Qe,this._languageFeaturesService=Pe,this._commandService=qe,this._notificationService=Je,this._codeLensCache=Ne,this._disposables=new S.SL,this._localToDispose=new S.SL,this._lenses=[],this._oldCodeLensModels=new S.SL,this._provideCodeLensDebounce=Oe.for(Pe.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=Oe.for(Pe.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new d.pY(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(Fe=>{(Fe.hasChanged(44)||Fe.hasChanged(16)||Fe.hasChanged(15))&&this._updateLensStyle(),Fe.hasChanged(14)&&this._onModelChange()})),this._disposables.add(Pe.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,O.vp)(this._editor.getId()).toString(16),this._styleElement=p.dS(p.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var Qe;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(Qe=this._currentCodeLensModel)===null||Qe===void 0||Qe.dispose(),this._styleElement.remove()}_getLayoutInfo(){let Qe=this._editor.getOption(16),Pe;return!Qe||Qe<5?(Qe=this._editor.getOption(46)*.9|0,Pe=this._editor.getOption(59)):Pe=Qe*Math.max(1.3,this._editor.getOption(59)/this._editor.getOption(46))|0,{codeLensHeight:Pe,fontSize:Qe}}_updateLensStyle(){const{codeLensHeight:Qe,fontSize:Pe}=this._getLayoutInfo(),Oe=this._editor.getOption(15),qe=this._editor.getOption(44),Je=`--codelens-font-family${this._styleClassName}`,Ne=`--codelens-font-features${this._styleClassName}`;let Fe=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${Qe}px; font-size: ${Pe}px; padding-right: ${Math.round(Pe*.5)}px; font-feature-settings: var(${Ne}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${Qe}px; font-size: ${Pe}px; }
		`;Oe&&(Fe+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${Je}), ${B.hL.fontFamily}}`),this._styleElement.textContent=Fe,this._editor.getContainerDomNode().style.setProperty(Je,Oe??"inherit"),this._editor.getContainerDomNode().style.setProperty(Ne,qe.fontFeatureSettings),this._editor.changeViewZones(ne=>{for(let Q of this._lenses)Q.updateHeight(Qe,ne)})}_localDispose(){var Qe,Pe,Oe;(Qe=this._getCodeLensModelPromise)===null||Qe===void 0||Qe.cancel(),this._getCodeLensModelPromise=void 0,(Pe=this._resolveCodeLensesPromise)===null||Pe===void 0||Pe.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(Oe=this._currentCodeLensModel)===null||Oe===void 0||Oe.dispose()}_onModelChange(){this._localDispose();const Qe=this._editor.getModel();if(!Qe||!this._editor.getOption(14))return;const Pe=this._codeLensCache.get(Qe);if(Pe&&this._renderCodeLensSymbols(Pe),!this._languageFeaturesService.codeLensProvider.has(Qe)){Pe&&this._localToDispose.add((0,d.Vg)(()=>{const qe=this._codeLensCache.get(Qe);Pe===qe&&(this._codeLensCache.delete(Qe),this._onModelChange())},30*1e3));return}for(const qe of this._languageFeaturesService.codeLensProvider.all(Qe))if(typeof qe.onDidChange=="function"){let Je=qe.onDidChange(()=>Oe.schedule());this._localToDispose.add(Je)}const Oe=new d.pY(()=>{var qe;const Je=Date.now();(qe=this._getCodeLensModelPromise)===null||qe===void 0||qe.cancel(),this._getCodeLensModelPromise=(0,d.PG)(Ne=>_(this._languageFeaturesService.codeLensProvider,Qe,Ne)),this._getCodeLensModelPromise.then(Ne=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=Ne,this._codeLensCache.put(Qe,Ne);const Fe=this._provideCodeLensDebounce.update(Qe,Date.now()-Je);Oe.delay=Fe,this._renderCodeLensSymbols(Ne),this._resolveCodeLensesInViewportSoon()},z.dL)},this._provideCodeLensDebounce.get(Qe));this._localToDispose.add(Oe),this._localToDispose.add((0,S.OF)(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(qe=>{this._editor.changeViewZones(Je=>{let Ne=[],Fe=-1;this._lenses.forEach(Q=>{!Q.isValid()||Fe===Q.getLineNumber()?Ne.push(Q):(Q.update(Je),Fe=Q.getLineNumber())});let ne=new ee;Ne.forEach(Q=>{Q.dispose(ne,Je),this._lenses.splice(this._lenses.indexOf(Q),1)}),ne.commit(qe)})}),Oe.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{Oe.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(qe=>{qe.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add((0,S.OF)(()=>{if(this._editor.getModel()){const qe=j.Z.capture(this._editor);this._editor.changeDecorations(Je=>{this._editor.changeViewZones(Ne=>{this._disposeAllLenses(Je,Ne)})}),qe.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(qe=>{if(qe.target.type!==9)return;let Je=qe.target.element;if((Je==null?void 0:Je.tagName)==="SPAN"&&(Je=Je.parentElement),(Je==null?void 0:Je.tagName)==="A")for(const Ne of this._lenses){let Fe=Ne.getCommand(Je);if(Fe){this._commandService.executeCommand(Fe.id,...Fe.arguments||[]).catch(ne=>this._notificationService.error(ne));break}}})),Oe.schedule()}_disposeAllLenses(Qe,Pe){const Oe=new ee;for(const qe of this._lenses)qe.dispose(Oe,Pe);Qe&&Oe.commit(Qe),this._lenses.length=0}_renderCodeLensSymbols(Qe){if(!this._editor.hasModel())return;let Pe=this._editor.getModel().getLineCount(),Oe=[],qe;for(let Fe of Qe.lenses){let ne=Fe.symbol.range.startLineNumber;ne<1||ne>Pe||(qe&&qe[qe.length-1].symbol.range.startLineNumber===ne?qe.push(Fe):(qe=[Fe],Oe.push(qe)))}const Je=j.Z.capture(this._editor),Ne=this._getLayoutInfo();this._editor.changeDecorations(Fe=>{this._editor.changeViewZones(ne=>{const Q=new ee;let ie=0,xe=0;for(;xe<Oe.length&&ie<this._lenses.length;){let be=Oe[xe][0].symbol.range.startLineNumber,Ge=this._lenses[ie].getLineNumber();Ge<be?(this._lenses[ie].dispose(Q,ne),this._lenses.splice(ie,1)):Ge===be?(this._lenses[ie].updateCodeLensSymbols(Oe[xe],Q),xe++,ie++):(this._lenses.splice(ie,0,new X(Oe[xe],this._editor,this._styleClassName,Q,ne,Ne.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),ie++,xe++)}for(;ie<this._lenses.length;)this._lenses[ie].dispose(Q,ne),this._lenses.splice(ie,1);for(;xe<Oe.length;)this._lenses.push(new X(Oe[xe],this._editor,this._styleClassName,Q,ne,Ne.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),xe++;Q.commit(Fe)})}),Je.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var Qe;(Qe=this._resolveCodeLensesPromise)===null||Qe===void 0||Qe.cancel(),this._resolveCodeLensesPromise=void 0;const Pe=this._editor.getModel();if(!Pe)return;const Oe=[],qe=[];if(this._lenses.forEach(Fe=>{const ne=Fe.computeIfNecessary(Pe);ne&&(Oe.push(ne),qe.push(Fe))}),Oe.length===0)return;const Je=Date.now(),Ne=(0,d.PG)(Fe=>{const ne=Oe.map((Q,ie)=>{const xe=new Array(Q.length),be=Q.map((Ge,nt)=>!Ge.symbol.command&&typeof Ge.provider.resolveCodeLens=="function"?Promise.resolve(Ge.provider.resolveCodeLens(Pe,Ge.symbol,Fe)).then(_t=>{xe[nt]=_t},z.Cp):(xe[nt]=Ge.symbol,Promise.resolve(void 0)));return Promise.all(be).then(()=>{!Fe.isCancellationRequested&&!qe[ie].isDisposed()&&qe[ie].updateCommands(xe)})});return Promise.all(ne)});this._resolveCodeLensesPromise=Ne,this._resolveCodeLensesPromise.then(()=>{const Fe=this._resolveCodeLensesDebounce.update(Pe,Date.now()-Je);this._resolveCodeLensesScheduler.delay=Fe,this._currentCodeLensModel&&this._codeLensCache.put(Pe,this._currentCodeLensModel),this._oldCodeLensModels.clear(),Ne===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},Fe=>{(0,z.dL)(Fe),Ne===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}};we.ID="css.editor.codeLens",we=ke([Te(1,C.p),Te(2,ye.A),Te(3,c.Hy),Te(4,oe.lT),Te(5,de)],we),(0,T._K)(we.ID,we),(0,T.Qr)(class extends T.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:F.u.hasCodeLensProvider,label:(0,le.N)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(Qe,Pe){return ge(this,void 0,void 0,function*(){if(!Pe.hasModel())return;const Oe=Qe.get(Ce.eJ),qe=Qe.get(c.Hy),Je=Qe.get(oe.lT),Ne=Pe.getSelection().positionLineNumber,Fe=Pe.getContribution(we.ID);if(!Fe)return;const ne=Fe.getModel();if(!ne)return;const Q=[];for(const xe of ne.lenses)xe.symbol.command&&xe.symbol.range.startLineNumber===Ne&&Q.push({label:xe.symbol.command.title,command:xe.symbol.command});if(Q.length===0)return;const ie=yield Oe.pick(Q,{canPickMany:!1});if(!!ie){if(ne.isDisposed)return yield qe.executeCommand(this.id);try{yield qe.executeCommand(ie.command.id,...ie.command.arguments||[])}catch(xe){Je.error(xe)}}})}})},31667:function(Tt,me,a){"use strict";a.r(me),a.d(me,{ColorContribution:function(){return Ne}});var p=a(9917),d=a(16830),z=a(24314),O=a(15393),S=a(41264),j=a(17301),T=a(84013),B=a(25924),F=a(29994),x=a(45146),v=a(88191),g=a(71922),D=a(71050),c=a(70666),C=a(73733),M=a(94565);function E(Fe,ne,Q){const ie=[],be=Fe.ordered(ne).reverse().map(Ge=>Promise.resolve(Ge.provideDocumentColors(ne,Q)).then(nt=>{if(Array.isArray(nt))for(let _t of nt)ie.push({colorInfo:_t,provider:Ge})}));return Promise.all(be).then(()=>ie)}function _(Fe,ne,Q,ie){return Promise.resolve(Q.provideColorPresentations(Fe,ne,ie))}M.P0.registerCommand("_executeDocumentColorProvider",function(Fe,...ne){const[Q]=ne;if(!(Q instanceof c.o))throw(0,j.b1)();const{colorProvider:ie}=Fe.get(g.p),xe=Fe.get(C.q).getModel(Q);if(!xe)throw(0,j.b1)();const be=[],nt=ie.ordered(xe).reverse().map(_t=>Promise.resolve(_t.provideDocumentColors(xe,D.T.None)).then(Ot=>{if(Array.isArray(Ot))for(let rn of Ot)be.push({range:rn.range,color:[rn.color.red,rn.color.green,rn.color.blue,rn.color.alpha]})}));return Promise.all(nt).then(()=>be)}),M.P0.registerCommand("_executeColorPresentationProvider",function(Fe,...ne){const[Q,ie]=ne,{uri:xe,range:be}=ie;if(!(xe instanceof c.o)||!Array.isArray(Q)||Q.length!==4||!z.e.isIRange(be))throw(0,j.b1)();const[Ge,nt,_t,Ot]=Q,{colorProvider:rn}=Fe.get(g.p),gt=Fe.get(C.q).getModel(xe);if(!gt)throw(0,j.b1)();const Ue={range:be,color:{red:Ge,green:nt,blue:_t,alpha:Ot}},Ye=[],Re=rn.ordered(gt).reverse().map(Ve=>Promise.resolve(Ve.provideColorPresentations(gt,Ue,D.T.None)).then(at=>{Array.isArray(at)&&Ye.push(...at)}));return Promise.all(Re).then(()=>Ye)});var L=a(33108),N=function(Fe,ne,Q,ie){var xe=arguments.length,be=xe<3?ne:ie===null?ie=Object.getOwnPropertyDescriptor(ne,Q):ie,Ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")be=Reflect.decorate(Fe,ne,Q,ie);else for(var nt=Fe.length-1;nt>=0;nt--)(Ge=Fe[nt])&&(be=(xe<3?Ge(be):xe>3?Ge(ne,Q,be):Ge(ne,Q))||be);return xe>3&&be&&Object.defineProperty(ne,Q,be),be},b=function(Fe,ne){return function(Q,ie){ne(Q,ie,Fe)}},I=function(Fe,ne,Q,ie){function xe(be){return be instanceof Q?be:new Q(function(Ge){Ge(be)})}return new(Q||(Q=Promise))(function(be,Ge){function nt(rn){try{Ot(ie.next(rn))}catch(gt){Ge(gt)}}function _t(rn){try{Ot(ie.throw(rn))}catch(gt){Ge(gt)}}function Ot(rn){rn.done?be(rn.value):xe(rn.value).then(nt,_t)}Ot((ie=ie.apply(Fe,ne||[])).next())})};const k=Object.create({}),W=500;let q=class iS extends p.JT{constructor(ne,Q,ie,xe){super();this._editor=ne,this._configurationService=Q,this._languageFeaturesService=ie,this._localToDispose=this._register(new p.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new F.t7(this._editor),this._colorDecorationClassRefs=this._register(new p.SL),this._debounceInformation=xe.for(ie.colorProvider,"Document Colors",{min:iS.RECOMPUTE_TIME}),this._register(ne.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(ne.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(ie.colorProvider.onDidChange(()=>this.onModelChanged())),this._register(ne.onDidChangeConfiguration(()=>{let be=this._isEnabled;this._isEnabled=this.isEnabled(),be!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const ne=this._editor.getModel();if(!ne)return!1;const Q=ne.getLanguageId(),ie=this._configurationService.getValue(Q);if(ie&&typeof ie=="object"){const xe=ie.colorDecorators;if(xe&&xe.enable!==void 0&&!xe.enable)return xe.enable}return this._editor.getOption(17)}static get(ne){return ne.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const ne=this._editor.getModel();!ne||!this._languageFeaturesService.colorProvider.has(ne)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new O._F,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(ne)))})),this.beginCompute())}beginCompute(){this._computePromise=(0,O.PG)(ne=>I(this,void 0,void 0,function*(){const Q=this._editor.getModel();if(!Q)return Promise.resolve([]);const ie=new T.G(!1),xe=yield E(this._languageFeaturesService.colorProvider,Q,ne);return this._debounceInformation.update(Q,ie.elapsed()),xe})),this._computePromise.then(ne=>{this.updateDecorations(ne),this.updateColorDecorators(ne),this._computePromise=null},j.dL)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(ne){const Q=ne.map(ie=>({range:{startLineNumber:ie.colorInfo.range.startLineNumber,startColumn:ie.colorInfo.range.startColumn,endLineNumber:ie.colorInfo.range.endLineNumber,endColumn:ie.colorInfo.range.endColumn},options:x.qx.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,Q),this._colorDatas=new Map,this._decorationsIds.forEach((ie,xe)=>this._colorDatas.set(ie,ne[xe]))}updateColorDecorators(ne){this._colorDecorationClassRefs.clear();let Q=[];for(let ie=0;ie<ne.length&&Q.length<W;ie++){const{red:xe,green:be,blue:Ge,alpha:nt}=ne[ie].colorInfo.color,_t=new S.VS(Math.round(xe*255),Math.round(be*255),Math.round(Ge*255),nt);let Ot=`rgba(${_t.r}, ${_t.g}, ${_t.b}, ${_t.a})`;const rn=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:Ot}));Q.push({range:{startLineNumber:ne[ie].colorInfo.range.startLineNumber,startColumn:ne[ie].colorInfo.range.startColumn,endLineNumber:ne[ie].colorInfo.range.endLineNumber,endColumn:ne[ie].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:B.B4,inlineClassName:`${rn.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:k}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],Q))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(ne){const Q=this._editor.getModel();if(!Q)return null;const ie=Q.getDecorationsInRange(z.e.fromPositions(ne,ne)).filter(xe=>this._colorDatas.has(xe.id));return ie.length===0?null:this._colorDatas.get(ie[0].id)}isColorDecorationId(ne){return this._colorDecoratorIds.has(ne)}};q.ID="editor.contrib.colorDetector",q.RECOMPUTE_TIME=1e3,q=N([b(1,L.Ui),b(2,g.p),b(3,v.A)],q),(0,d._K)(q.ID,q);var re=a(4669);class de{constructor(ne,Q,ie){this.presentationIndex=ie,this._onColorFlushed=new re.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new re.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new re.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=ne,this._color=ne,this._colorPresentations=Q}get color(){return this._color}set color(ne){this._color.equals(ne)||(this._color=ne,this._onDidChangeColor.fire(ne))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(ne){this._colorPresentations=ne,this.presentationIndex>ne.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(ne,Q){for(let ie=0;ie<this.colorPresentations.length;ie++)if(Q.toLowerCase()===this.colorPresentations[ie].label){this.presentationIndex=ie,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}var pe=a(16268),ae=a(65321),ue=a(57974),te=a(93794),K=a(63580),U=a(73910),ee=a(97781);const X=ae.$;class le extends p.JT{constructor(ne,Q,ie){super();this.model=Q,this.domNode=X(".colorpicker-header"),ae.R3(ne,this.domNode),this.pickedColorNode=ae.R3(this.domNode,X(".picked-color"));const xe=(0,K.N)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",xe);const be=ae.R3(this.domNode,X(".original-color"));be.style.backgroundColor=S.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=ie.getColorTheme().getColor(U.yJx)||S.Il.white,this._register((0,ee.Ic)((Ge,nt)=>{this.backgroundColor=Ge.getColor(U.yJx)||S.Il.white})),this._register(ae.nm(this.pickedColorNode,ae.tw.CLICK,()=>this.model.selectNextColorPresentation())),this._register(ae.nm(be,ae.tw.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(Q.onDidChangeColor(this.onDidChangeColor,this)),this._register(Q.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=S.Il.Format.CSS.format(Q.color)||"",this.pickedColorNode.classList.toggle("light",Q.color.rgba.a<.5?this.backgroundColor.isLighter():Q.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(ne){this.pickedColorNode.style.backgroundColor=S.Il.Format.CSS.format(ne)||"",this.pickedColorNode.classList.toggle("light",ne.rgba.a<.5?this.backgroundColor.isLighter():ne.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(X(".codicon.codicon-color-mode"))}}class oe extends p.JT{constructor(ne,Q,ie){super();this.model=Q,this.pixelRatio=ie,this.domNode=X(".colorpicker-body"),ae.R3(ne,this.domNode),this.saturationBox=new Ce(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new ke(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new Te(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:ne,v:Q}){const ie=this.model.color.hsva;this.model.color=new S.Il(new S.tx(ie.h,ne,Q,ie.a))}onDidOpacityChange(ne){const Q=this.model.color.hsva;this.model.color=new S.Il(new S.tx(Q.h,Q.s,Q.v,ne))}onDidHueChange(ne){const Q=this.model.color.hsva,ie=(1-ne)*360;this.model.color=new S.Il(new S.tx(ie===360?0:ie,Q.s,Q.v,Q.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class Ce extends p.JT{constructor(ne,Q,ie){super();this.model=Q,this.pixelRatio=ie,this._onDidChange=new re.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new re.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=X(".saturation-wrap"),ae.R3(ne,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",ae.R3(this.domNode,this.canvas),this.selection=X(".saturation-selection"),ae.R3(this.domNode,this.selection),this.layout(),this._register(ae.u0(this.domNode,xe=>this.onMouseDown(xe))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(ne){this.monitor=this._register(new ue.Z);const Q=ae.i(this.domNode);ne.target!==this.selection&&this.onDidChangePosition(ne.offsetX,ne.offsetY),this.monitor.startMonitoring(ne.target,ne.buttons,ue.e,xe=>this.onDidChangePosition(xe.posx-Q.left,xe.posy-Q.top),()=>null);const ie=ae.q6(document,()=>{this._onColorFlushed.fire(),ie.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(ne,Q){const ie=Math.max(0,Math.min(1,ne/this.width)),xe=Math.max(0,Math.min(1,1-Q/this.height));this.paintSelection(ie,xe),this._onDidChange.fire({s:ie,v:xe})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const ne=this.model.color.hsva;this.paintSelection(ne.s,ne.v)}paint(){const ne=this.model.color.hsva,Q=new S.Il(new S.tx(ne.h,1,1,1)),ie=this.canvas.getContext("2d"),xe=ie.createLinearGradient(0,0,this.canvas.width,0);xe.addColorStop(0,"rgba(255, 255, 255, 1)"),xe.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),xe.addColorStop(1,"rgba(255, 255, 255, 0)");const be=ie.createLinearGradient(0,0,0,this.canvas.height);be.addColorStop(0,"rgba(0, 0, 0, 0)"),be.addColorStop(1,"rgba(0, 0, 0, 1)"),ie.rect(0,0,this.canvas.width,this.canvas.height),ie.fillStyle=S.Il.Format.CSS.format(Q),ie.fill(),ie.fillStyle=xe,ie.fill(),ie.fillStyle=be,ie.fill()}paintSelection(ne,Q){this.selection.style.left=`${ne*this.width}px`,this.selection.style.top=`${this.height-Q*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class ye extends p.JT{constructor(ne,Q){super();this.model=Q,this._onDidChange=new re.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new re.Q5,this.onColorFlushed=this._onColorFlushed.event,this.domNode=ae.R3(ne,X(".strip")),this.overlay=ae.R3(this.domNode,X(".overlay")),this.slider=ae.R3(this.domNode,X(".slider")),this.slider.style.top="0px",this._register(ae.u0(this.domNode,ie=>this.onMouseDown(ie))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const ne=this.getValue(this.model.color);this.updateSliderPosition(ne)}onMouseDown(ne){const Q=this._register(new ue.Z),ie=ae.i(this.domNode);this.domNode.classList.add("grabbing"),ne.target!==this.slider&&this.onDidChangeTop(ne.offsetY),Q.startMonitoring(ne.target,ne.buttons,ue.e,be=>this.onDidChangeTop(be.posy-ie.top),()=>null);const xe=ae.q6(document,()=>{this._onColorFlushed.fire(),xe.dispose(),Q.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(ne){const Q=Math.max(0,Math.min(1,1-ne/this.height));this.updateSliderPosition(Q),this._onDidChange.fire(Q)}updateSliderPosition(ne){this.slider.style.top=`${(1-ne)*this.height}px`}}class ke extends ye{constructor(ne,Q){super(ne,Q);this.domNode.classList.add("opacity-strip"),this._register(Q.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(ne){const{r:Q,g:ie,b:xe}=ne.rgba,be=new S.Il(new S.VS(Q,ie,xe,1)),Ge=new S.Il(new S.VS(Q,ie,xe,0));this.overlay.style.background=`linear-gradient(to bottom, ${be} 0%, ${Ge} 100%)`}getValue(ne){return ne.hsva.a}}class Te extends ye{constructor(ne,Q){super(ne,Q);this.domNode.classList.add("hue-strip")}getValue(ne){return 1-ne.hsva.h/360}}class ge extends te.${constructor(ne,Q,ie,xe){super();this.model=Q,this.pixelRatio=ie,this._register(pe.PixelRatio.onDidChange(()=>this.layout()));const be=X(".colorpicker-widget");ne.appendChild(be);const Ge=new le(be,this.model,xe);this.body=new oe(be,this.model,this.pixelRatio),this._register(Ge),this._register(this.body)}layout(){this.body.layout()}}var we=function(Fe,ne,Q,ie){var xe=arguments.length,be=xe<3?ne:ie===null?ie=Object.getOwnPropertyDescriptor(ne,Q):ie,Ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")be=Reflect.decorate(Fe,ne,Q,ie);else for(var nt=Fe.length-1;nt>=0;nt--)(Ge=Fe[nt])&&(be=(xe<3?Ge(be):xe>3?Ge(ne,Q,be):Ge(ne,Q))||be);return xe>3&&be&&Object.defineProperty(ne,Q,be),be},ze=function(Fe,ne){return function(Q,ie){ne(Q,ie,Fe)}},Qe=function(Fe,ne,Q,ie){function xe(be){return be instanceof Q?be:new Q(function(Ge){Ge(be)})}return new(Q||(Q=Promise))(function(be,Ge){function nt(rn){try{Ot(ie.next(rn))}catch(gt){Ge(gt)}}function _t(rn){try{Ot(ie.throw(rn))}catch(gt){Ge(gt)}}function Ot(rn){rn.done?be(rn.value):xe(rn.value).then(nt,_t)}Ot((ie=ie.apply(Fe,ne||[])).next())})};class Pe{constructor(ne,Q,ie,xe){this.owner=ne,this.range=Q,this.model=ie,this.provider=xe,this.forceShowAtRange=!0}isValidForHoverAnchor(ne){return ne.type===1&&this.range.startColumn<=ne.range.startColumn&&this.range.endColumn>=ne.range.endColumn}}let Oe=class{constructor(ne,Q){this._editor=ne,this._themeService=Q,this.hoverOrdinal=1}computeSync(ne,Q){return[]}computeAsync(ne,Q,ie){return O.Aq.fromPromise(this._computeAsync(ne,Q,ie))}_computeAsync(ne,Q,ie){return Qe(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const xe=q.get(this._editor);if(!xe)return[];for(const be of Q){if(!xe.isColorDecorationId(be.id))continue;const Ge=xe.getColorData(be.range.getStartPosition());if(Ge)return[yield this._createColorHover(this._editor.getModel(),Ge.colorInfo,Ge.provider)]}return[]})}_createColorHover(ne,Q,ie){return Qe(this,void 0,void 0,function*(){const xe=ne.getValueInRange(Q.range),{red:be,green:Ge,blue:nt,alpha:_t}=Q.color,Ot=new S.VS(Math.round(be*255),Math.round(Ge*255),Math.round(nt*255),_t),rn=new S.Il(Ot),gt=yield _(ne,Q,ie,D.T.None),Ue=new de(rn,[],0);return Ue.colorPresentations=gt||[],Ue.guessColorPresentation(rn,xe),new Pe(this,z.e.lift(Q.range),Ue,ie)})}renderHoverParts(ne,Q){if(Q.length===0||!this._editor.hasModel())return p.JT.None;const ie=new p.SL,xe=Q[0],be=this._editor.getModel(),Ge=xe.model,nt=ie.add(new ge(ne.fragment,Ge,this._editor.getOption(129),this._themeService));ne.setColorPicker(nt);let _t=new z.e(xe.range.startLineNumber,xe.range.startColumn,xe.range.endLineNumber,xe.range.endColumn);const Ot=()=>{let gt,Ue;if(Ge.presentation.textEdit){gt=[Ge.presentation.textEdit],Ue=new z.e(Ge.presentation.textEdit.range.startLineNumber,Ge.presentation.textEdit.range.startColumn,Ge.presentation.textEdit.range.endLineNumber,Ge.presentation.textEdit.range.endColumn);const Ye=this._editor.getModel()._setTrackedRange(null,Ue,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",gt),Ue=this._editor.getModel()._getTrackedRange(Ye)||Ue}else gt=[{range:_t,text:Ge.presentation.label,forceMoveMarkers:!1}],Ue=_t.setEndPosition(_t.endLineNumber,_t.startColumn+Ge.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",gt);Ge.presentation.additionalTextEdits&&(gt=[...Ge.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",gt),ne.hide()),this._editor.pushUndoStop(),_t=Ue},rn=gt=>_(be,{range:_t,color:{red:gt.rgba.r/255,green:gt.rgba.g/255,blue:gt.rgba.b/255,alpha:gt.rgba.a}},xe.provider,D.T.None).then(Ue=>{Ge.colorPresentations=Ue||[]});return ie.add(Ge.onColorFlushed(gt=>{rn(gt).then(Ot)})),ie.add(Ge.onDidChangeColor(rn)),ie}};Oe=we([ze(1,ee.XE)],Oe);var qe=a(9427),Je=a(66520);class Ne extends p.JT{constructor(ne){super();this._editor=ne,this._register(ne.onMouseDown(Q=>this.onMouseDown(Q)))}dispose(){super.dispose()}onMouseDown(ne){const Q=ne.target;if(Q.type!==6||!Q.detail.injectedText||Q.detail.injectedText.options.attachedData!==k||!Q.range)return;const ie=this._editor.getContribution(qe.ModesHoverController.ID);if(!!ie&&!ie.isColorPickerVisible()){const xe=new z.e(Q.range.startLineNumber,Q.range.startColumn+1,Q.range.endLineNumber,Q.range.endColumn+1);ie.showContentHover(xe,1,!1)}}}Ne.ID="editor.contrib.colorContribution",(0,d._K)(Ne.ID,Ne),Je.Ae.register(Oe)},23365:function(Tt,me,a){"use strict";a.r(me);var p=a(22258),d=a(16830),z=a(24314),O=a(29102),S=a(89381),j=a(69386),T=a(50187),B=a(3860);class F{constructor(N,b,I){this.languageConfigurationService=I,this._selection=N,this._insertSpace=b,this._usedEndToken=null}static _haystackHasNeedleAtOffset(N,b,I){if(I<0)return!1;const k=b.length,W=N.length;if(I+k>W)return!1;for(let q=0;q<k;q++){const re=N.charCodeAt(I+q),de=b.charCodeAt(q);if(re!==de&&!(re>=65&&re<=90&&re+32===de)&&!(de>=65&&de<=90&&de+32===re))return!1}return!0}_createOperationsForBlockComment(N,b,I,k,W,q){const re=N.startLineNumber,de=N.startColumn,pe=N.endLineNumber,ae=N.endColumn,ue=W.getLineContent(re),te=W.getLineContent(pe);let K=ue.lastIndexOf(b,de-1+b.length),U=te.indexOf(I,ae-1-I.length);if(K!==-1&&U!==-1)if(re===pe)ue.substring(K+b.length,U).indexOf(I)>=0&&(K=-1,U=-1);else{const X=ue.substring(K+b.length),le=te.substring(0,U);(X.indexOf(I)>=0||le.indexOf(I)>=0)&&(K=-1,U=-1)}let ee;K!==-1&&U!==-1?(k&&K+b.length<ue.length&&ue.charCodeAt(K+b.length)===32&&(b=b+" "),k&&U>0&&te.charCodeAt(U-1)===32&&(I=" "+I,U-=1),ee=F._createRemoveBlockCommentOperations(new z.e(re,K+b.length+1,pe,U+1),b,I)):(ee=F._createAddBlockCommentOperations(N,b,I,this._insertSpace),this._usedEndToken=ee.length===1?I:null);for(const X of ee)q.addTrackedEditOperation(X.range,X.text)}static _createRemoveBlockCommentOperations(N,b,I){let k=[];return z.e.isEmpty(N)?k.push(j.h.delete(new z.e(N.startLineNumber,N.startColumn-b.length,N.endLineNumber,N.endColumn+I.length))):(k.push(j.h.delete(new z.e(N.startLineNumber,N.startColumn-b.length,N.startLineNumber,N.startColumn))),k.push(j.h.delete(new z.e(N.endLineNumber,N.endColumn,N.endLineNumber,N.endColumn+I.length)))),k}static _createAddBlockCommentOperations(N,b,I,k){let W=[];return z.e.isEmpty(N)?W.push(j.h.replace(new z.e(N.startLineNumber,N.startColumn,N.endLineNumber,N.endColumn),b+"  "+I)):(W.push(j.h.insert(new T.L(N.startLineNumber,N.startColumn),b+(k?" ":""))),W.push(j.h.insert(new T.L(N.endLineNumber,N.endColumn),(k?" ":"")+I))),W}getEditOperations(N,b){const I=this._selection.startLineNumber,k=this._selection.startColumn;N.tokenizeIfCheap(I);const W=N.getLanguageIdAtPosition(I,k),q=this.languageConfigurationService.getLanguageConfiguration(W).comments;!q||!q.blockCommentStartToken||!q.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,q.blockCommentStartToken,q.blockCommentEndToken,this._insertSpace,N,b)}computeCursorState(N,b){const I=b.getInverseEditOperations();if(I.length===2){const k=I[0],W=I[1];return new B.Y(k.range.endLineNumber,k.range.endColumn,W.range.startLineNumber,W.range.startColumn)}else{const k=I[0].range,W=this._usedEndToken?-this._usedEndToken.length-1:0;return new B.Y(k.endLineNumber,k.endColumn+W,k.endLineNumber,k.endColumn+W)}}}var x=a(25924);class v{constructor(N,b,I,k,W,q,re){this.languageConfigurationService=N,this._selection=b,this._tabSize=I,this._type=k,this._insertSpace=W,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=q,this._ignoreFirstLine=re||!1}static _gatherPreflightCommentStrings(N,b,I,k){N.tokenizeIfCheap(b);const W=N.getLanguageIdAtPosition(b,1),q=k.getLanguageConfiguration(W).comments,re=q?q.lineCommentToken:null;if(!re)return null;let de=[];for(let pe=0,ae=I-b+1;pe<ae;pe++)de[pe]={ignore:!1,commentStr:re,commentStrOffset:0,commentStrLength:re.length};return de}static _analyzeLines(N,b,I,k,W,q,re,de){let pe=!0,ae;N===0?ae=!0:N===1?ae=!1:ae=!0;for(let ue=0,te=k.length;ue<te;ue++){const K=k[ue],U=W+ue;if(U===W&&re){K.ignore=!0;continue}const ee=I.getLineContent(U),X=x.LC(ee);if(X===-1){K.ignore=q,K.commentStrOffset=ee.length;continue}if(pe=!1,K.ignore=!1,K.commentStrOffset=X,ae&&!F._haystackHasNeedleAtOffset(ee,K.commentStr,X)&&(N===0?ae=!1:N===1||(K.ignore=!0)),ae&&b){const le=X+K.commentStrLength;le<ee.length&&ee.charCodeAt(le)===32&&(K.commentStrLength+=1)}}if(N===0&&pe){ae=!1;for(let ue=0,te=k.length;ue<te;ue++)k[ue].ignore=!1}return{supported:!0,shouldRemoveComments:ae,lines:k}}static _gatherPreflightData(N,b,I,k,W,q,re,de){const pe=v._gatherPreflightCommentStrings(I,k,W,de);return pe===null?{supported:!1}:v._analyzeLines(N,b,I,pe,k,q,re,de)}_executeLineComments(N,b,I,k){let W;I.shouldRemoveComments?W=v._createRemoveLineCommentsOperations(I.lines,k.startLineNumber):(v._normalizeInsertionPoint(N,I.lines,k.startLineNumber,this._tabSize),W=this._createAddLineCommentsOperations(I.lines,k.startLineNumber));const q=new T.L(k.positionLineNumber,k.positionColumn);for(let re=0,de=W.length;re<de;re++)b.addEditOperation(W[re].range,W[re].text),z.e.isEmpty(W[re].range)&&z.e.getStartPosition(W[re].range).equals(q)&&N.getLineContent(q.lineNumber).length+1===q.column&&(this._deltaColumn=(W[re].text||"").length);this._selectionId=b.trackSelection(k)}_attemptRemoveBlockComment(N,b,I,k){let W=b.startLineNumber,q=b.endLineNumber,re=k.length+Math.max(N.getLineFirstNonWhitespaceColumn(b.startLineNumber),b.startColumn),de=N.getLineContent(W).lastIndexOf(I,re-1),pe=N.getLineContent(q).indexOf(k,b.endColumn-1-I.length);return de!==-1&&pe===-1&&(pe=N.getLineContent(W).indexOf(k,de+I.length),q=W),de===-1&&pe!==-1&&(de=N.getLineContent(q).lastIndexOf(I,pe),W=q),b.isEmpty()&&(de===-1||pe===-1)&&(de=N.getLineContent(W).indexOf(I),de!==-1&&(pe=N.getLineContent(W).indexOf(k,de+I.length))),de!==-1&&N.getLineContent(W).charCodeAt(de+I.length)===32&&(I+=" "),pe!==-1&&N.getLineContent(q).charCodeAt(pe-1)===32&&(k=" "+k,pe-=1),de!==-1&&pe!==-1?F._createRemoveBlockCommentOperations(new z.e(W,de+I.length+1,q,pe+1),I,k):null}_executeBlockComment(N,b,I){N.tokenizeIfCheap(I.startLineNumber);let k=N.getLanguageIdAtPosition(I.startLineNumber,1),W=S.zu.getComments(k);if(!W||!W.blockCommentStartToken||!W.blockCommentEndToken)return;const q=W.blockCommentStartToken,re=W.blockCommentEndToken;let de=this._attemptRemoveBlockComment(N,I,q,re);if(!de){if(I.isEmpty()){const pe=N.getLineContent(I.startLineNumber);let ae=x.LC(pe);ae===-1&&(ae=pe.length),de=F._createAddBlockCommentOperations(new z.e(I.startLineNumber,ae+1,I.startLineNumber,pe.length+1),q,re,this._insertSpace)}else de=F._createAddBlockCommentOperations(new z.e(I.startLineNumber,N.getLineFirstNonWhitespaceColumn(I.startLineNumber),I.endLineNumber,N.getLineMaxColumn(I.endLineNumber)),q,re,this._insertSpace);de.length===1&&(this._deltaColumn=q.length+1)}this._selectionId=b.trackSelection(I);for(const pe of de)b.addEditOperation(pe.range,pe.text)}getEditOperations(N,b){let I=this._selection;if(this._moveEndPositionDown=!1,I.startLineNumber===I.endLineNumber&&this._ignoreFirstLine){b.addEditOperation(new z.e(I.startLineNumber,N.getLineMaxColumn(I.startLineNumber),I.startLineNumber+1,1),I.startLineNumber===N.getLineCount()?"":`
`),this._selectionId=b.trackSelection(I);return}I.startLineNumber<I.endLineNumber&&I.endColumn===1&&(this._moveEndPositionDown=!0,I=I.setEndPosition(I.endLineNumber-1,N.getLineMaxColumn(I.endLineNumber-1)));const k=v._gatherPreflightData(this._type,this._insertSpace,N,I.startLineNumber,I.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return k.supported?this._executeLineComments(N,b,k,I):this._executeBlockComment(N,b,I)}computeCursorState(N,b){let I=b.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(I=I.setEndPosition(I.endLineNumber+1,1)),new B.Y(I.selectionStartLineNumber,I.selectionStartColumn+this._deltaColumn,I.positionLineNumber,I.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(N,b){let I=[];for(let k=0,W=N.length;k<W;k++){const q=N[k];q.ignore||I.push(j.h.delete(new z.e(b+k,q.commentStrOffset+1,b+k,q.commentStrOffset+q.commentStrLength+1)))}return I}_createAddLineCommentsOperations(N,b){let I=[];const k=this._insertSpace?" ":"";for(let W=0,q=N.length;W<q;W++){const re=N[W];re.ignore||I.push(j.h.insert(new T.L(b+W,re.commentStrOffset+1),re.commentStr+k))}return I}static nextVisibleColumn(N,b,I,k){return I?N+(b-N%b):N+k}static _normalizeInsertionPoint(N,b,I,k){let W=1073741824,q,re;for(let de=0,pe=b.length;de<pe;de++){if(b[de].ignore)continue;const ae=N.getLineContent(I+de);let ue=0;for(let te=0,K=b[de].commentStrOffset;ue<W&&te<K;te++)ue=v.nextVisibleColumn(ue,k,ae.charCodeAt(te)===9,1);ue<W&&(W=ue)}W=Math.floor(W/k)*k;for(let de=0,pe=b.length;de<pe;de++){if(b[de].ignore)continue;const ae=N.getLineContent(I+de);let ue=0;for(q=0,re=b[de].commentStrOffset;ue<W&&q<re;q++)ue=v.nextVisibleColumn(ue,k,ae.charCodeAt(q)===9,1);ue>W?b[de].commentStrOffset=q-1:b[de].commentStrOffset=q}}}var g=a(63580),D=a(84144);class c extends d.R6{constructor(N,b){super(b);this._type=N}run(N,b){const I=N.get(S.c_);if(!b.hasModel())return;const k=b.getModel(),W=[],q=k.getOptions(),re=b.getOption(19),de=b.getSelections().map((ae,ue)=>({selection:ae,index:ue,ignoreFirstLine:!1}));de.sort((ae,ue)=>z.e.compareRangesUsingStarts(ae.selection,ue.selection));let pe=de[0];for(let ae=1;ae<de.length;ae++){const ue=de[ae];pe.selection.endLineNumber===ue.selection.startLineNumber&&(pe.index<ue.index?ue.ignoreFirstLine=!0:(pe.ignoreFirstLine=!0,pe=ue))}for(const ae of de)W.push(new v(I,ae.selection,q.tabSize,this._type,re.insertSpace,re.ignoreEmptyLines,ae.ignoreFirstLine));b.pushUndoStop(),b.executeCommands(this.id,W),b.pushUndoStop()}}class C extends c{constructor(){super(0,{id:"editor.action.commentLine",label:g.N("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:O.u.writable,kbOpts:{kbExpr:O.u.editorTextFocus,primary:2048|85,weight:100},menuOpts:{menuId:D.eH.MenubarEditMenu,group:"5_insert",title:g.N({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class M extends c{constructor(){super(1,{id:"editor.action.addCommentLine",label:g.N("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:O.u.writable,kbOpts:{kbExpr:O.u.editorTextFocus,primary:(0,p.gx)(2048|41,2048|33),weight:100}})}}class E extends c{constructor(){super(2,{id:"editor.action.removeCommentLine",label:g.N("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:O.u.writable,kbOpts:{kbExpr:O.u.editorTextFocus,primary:(0,p.gx)(2048|41,2048|51),weight:100}})}}class _ extends d.R6{constructor(){super({id:"editor.action.blockComment",label:g.N("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:O.u.writable,kbOpts:{kbExpr:O.u.editorTextFocus,primary:1024|512|31,linux:{primary:2048|1024|31},weight:100},menuOpts:{menuId:D.eH.MenubarEditMenu,group:"5_insert",title:g.N({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(N,b){const I=N.get(S.c_);if(!b.hasModel())return;const k=b.getOption(19),W=[],q=b.getSelections();for(const re of q)W.push(new F(re,k.insertSpace,I));b.pushUndoStop(),b.executeCommands(this.id,W),b.pushUndoStop()}}(0,d.Qr)(C),(0,d.Qr)(M),(0,d.Qr)(E),(0,d.Qr)(_)},93740:function(Tt,me,a){"use strict";a.r(me),a.d(me,{ContextMenuController:function(){return C}});var p=a(65321),d=a(76033),z=a(74741),O=a(9917),S=a(1432),j=a(16830),T=a(29102),B=a(63580),F=a(84144),x=a(16141),v=a(5606),g=a(91847),D=function(E,_,L,N){var b=arguments.length,I=b<3?_:N===null?N=Object.getOwnPropertyDescriptor(_,L):N,k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(E,_,L,N);else for(var W=E.length-1;W>=0;W--)(k=E[W])&&(I=(b<3?k(I):b>3?k(_,L,I):k(_,L))||I);return b>3&&I&&Object.defineProperty(_,L,I),I},c=function(E,_){return function(L,N){_(L,N,E)}};let C=class rS{constructor(_,L,N,b,I,k){this._contextMenuService=L,this._contextViewService=N,this._contextKeyService=b,this._keybindingService=I,this._menuService=k,this._toDispose=new O.SL,this._contextMenuIsBeingShownCount=0,this._editor=_,this._toDispose.add(this._editor.onContextMenu(W=>this._onContextMenu(W))),this._toDispose.add(this._editor.onMouseWheel(W=>{if(this._contextMenuIsBeingShownCount>0){const q=this._contextViewService.getContextViewElement(),re=W.srcElement;re.shadowRoot&&p.Ay(q)===re.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(W=>{W.keyCode===58&&(W.preventDefault(),W.stopPropagation(),this.showContextMenu())}))}static get(_){return _.getContribution(rS.ID)}_onContextMenu(_){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),_.target.position&&!this._editor.getSelection().containsPosition(_.target.position)&&this._editor.setPosition(_.target.position);return}if(_.target.type===12||_.target.type===6&&_.target.detail.injectedText||(_.event.preventDefault(),_.event.stopPropagation(),_.target.type!==6&&_.target.type!==7&&_.target.type!==1))return;if(this._editor.focus(),_.target.position){let N=!1;for(const b of this._editor.getSelections())if(b.containsPosition(_.target.position)){N=!0;break}N||this._editor.setPosition(_.target.position)}let L=null;_.target.type!==1&&(L={x:_.event.posx-1,width:2,y:_.event.posy-1,height:2}),this.showContextMenu(L)}showContextMenu(_){if(!this._editor.getOption(20)||!this._editor.hasModel())return;if(!this._contextMenuService){this._editor.focus();return}const L=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?F.eH.SimpleEditorContext:F.eH.EditorContext);L.length>0&&this._doShowContextMenu(L,_)}_getMenuActions(_,L){const N=[],b=this._menuService.createMenu(L,this._contextKeyService),I=b.getActions({arg:_.uri});b.dispose();for(let k of I){const[,W]=k;let q=0;for(const re of W)if(re instanceof F.NZ){const de=this._getMenuActions(_,re.item.submenu);de.length>0&&(N.push(new z.wY(re.id,re.label,de)),q++)}else N.push(re),q++;q&&N.push(new z.Z0)}return N.length&&N.pop(),N}_doShowContextMenu(_,L=null){if(!this._editor.hasModel())return;const N=this._editor.getOption(53);if(this._editor.updateOptions({hover:{enabled:!1}}),!L){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const I=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),k=p.i(this._editor.getDomNode()),W=k.left+I.left,q=k.top+I.top+I.height;L={x:W,y:q}}const b=this._editor.getOption(115)&&!S.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:b?this._editor.getDomNode():void 0,getAnchor:()=>L,getActions:()=>_,getActionViewItem:I=>{const k=this._keybindingFor(I);if(k)return new d.g(I,I,{label:!0,keybinding:k.getLabel(),isMenu:!0});const W=I;return typeof W.getActionViewItem=="function"?W.getActionViewItem():new d.g(I,I,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:I=>this._keybindingFor(I),onHide:I=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:N})}})}_keybindingFor(_){return this._keybindingService.lookupKeybinding(_.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};C.ID="editor.contrib.contextmenu",C=D([c(1,v.i),c(2,v.u),c(3,x.i6),c(4,g.d),c(5,F.co)],C);class M extends j.R6{constructor(){super({id:"editor.action.showContextMenu",label:B.N("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:T.u.textInputFocus,primary:1024|68,weight:100}})}run(_,L){var N;(N=C.get(L))===null||N===void 0||N.showContextMenu()}}(0,j._K)(C.ID,C),(0,j.Qr)(M)},41895:function(Tt,me,a){"use strict";a.r(me),a.d(me,{CursorUndoRedoController:function(){return T},CursorUndo:function(){return B},CursorRedo:function(){return F}});var p=a(9917),d=a(16830),z=a(29102),O=a(63580);class S{constructor(v){this.selections=v}equals(v){const g=this.selections.length,D=v.selections.length;if(g!==D)return!1;for(let c=0;c<g;c++)if(!this.selections[c].equalsSelection(v.selections[c]))return!1;return!0}}class j{constructor(v,g,D){this.cursorState=v,this.scrollTop=g,this.scrollLeft=D}}class T extends p.JT{constructor(v){super();this._editor=v,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(v.onDidChangeModel(g=>{this._undoStack=[],this._redoStack=[]})),this._register(v.onDidChangeModelContent(g=>{this._undoStack=[],this._redoStack=[]})),this._register(v.onDidChangeCursorSelection(g=>{if(this._isCursorUndoRedo||!g.oldSelections||g.oldModelVersionId!==g.modelVersionId)return;const D=new S(g.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(D)||(this._undoStack.push(new j(D,v.getScrollTop(),v.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(v){return v.getContribution(T.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new j(new S(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new j(new S(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(v){this._isCursorUndoRedo=!0,this._editor.setSelections(v.cursorState.selections),this._editor.setScrollPosition({scrollTop:v.scrollTop,scrollLeft:v.scrollLeft}),this._isCursorUndoRedo=!1}}T.ID="editor.contrib.cursorUndoRedoController";class B extends d.R6{constructor(){super({id:"cursorUndo",label:O.N("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:z.u.textInputFocus,primary:2048|51,weight:100}})}run(v,g,D){var c;(c=T.get(g))===null||c===void 0||c.cursorUndo()}}class F extends d.R6{constructor(){super({id:"cursorRedo",label:O.N("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(v,g,D){var c;(c=T.get(g))===null||c===void 0||c.cursorRedo()}}(0,d._K)(T.ID,T),(0,d.Qr)(B),(0,d.Qr)(F)},36022:function(Tt,me,a){"use strict";a.r(me),a.d(me,{DragAndDropController:function(){return x}});var p=a(9917),d=a(1432),z=a(16830),O=a(50187),S=a(24314),j=a(3860),T=a(45146);class B{constructor(g,D,c){this.selection=g,this.targetPosition=D,this.copy=c,this.targetSelection=null}getEditOperations(g,D){let c=g.getValueInRange(this.selection);if(this.copy||D.addEditOperation(this.selection,null),D.addEditOperation(new S.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),c),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new j.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new j.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new j.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new j.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new j.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(g,D){return this.targetSelection}}function F(v){return d.dz?v.altKey:v.ctrlKey}class x extends p.JT{constructor(g){super();this._editor=g,this._register(this._editor.onMouseDown(D=>this._onEditorMouseDown(D))),this._register(this._editor.onMouseUp(D=>this._onEditorMouseUp(D))),this._register(this._editor.onMouseDrag(D=>this._onEditorMouseDrag(D))),this._register(this._editor.onMouseDrop(D=>this._onEditorMouseDrop(D))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(D=>this.onEditorKeyDown(D))),this._register(this._editor.onKeyUp(D=>this.onEditorKeyUp(D))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(g){!this._editor.getOption(31)||this._editor.getOption(18)||(F(g)&&(this._modifierPressed=!0),this._mouseDown&&F(g)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(g){!this._editor.getOption(31)||this._editor.getOption(18)||(F(g)&&(this._modifierPressed=!1),this._mouseDown&&g.keyCode===x.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(g){this._mouseDown=!0}_onEditorMouseUp(g){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(g){let D=g.target;if(this._dragSelection===null){let C=(this._editor.getSelections()||[]).filter(M=>D.position&&M.containsPosition(D.position));if(C.length===1)this._dragSelection=C[0];else return}F(g.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),D.position&&(this._dragSelection.containsPosition(D.position)?this._removeDecoration():this.showAt(D.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(g){if(g.target&&(this._hitContent(g.target)||this._hitMargin(g.target))&&g.target.position){let D=new O.L(g.target.position.lineNumber,g.target.position.column);if(this._dragSelection===null){let c=null;if(g.event.shiftKey){let C=this._editor.getSelection();if(C){const{selectionStartLineNumber:M,selectionStartColumn:E}=C;c=[new j.Y(M,E,D.lineNumber,D.column)]}}else c=(this._editor.getSelections()||[]).map(C=>C.containsPosition(D)?new j.Y(D.lineNumber,D.column,D.lineNumber,D.column):C);this._editor.setSelections(c||[],"mouse",3)}else(!this._dragSelection.containsPosition(D)||(F(g.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(D)||this._dragSelection.getStartPosition().equals(D)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(x.ID,new B(this._dragSelection,D,F(g.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(g){let D=[{range:new S.e(g.lineNumber,g.column,g.lineNumber,g.column),options:x._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,D),this._editor.revealPosition(g,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(g){return g.type===6||g.type===7}_hitMargin(g){return g.type===2||g.type===3||g.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}x.ID="editor.contrib.dragAndDrop",x.TRIGGER_KEY_VALUE=d.dz?6:5,x._DECORATION_OPTIONS=T.qx.register({description:"dnd-target",className:"dnd-target"}),(0,z._K)(x.ID,x)},76917:function(Tt,me,a){"use strict";a.r(me);var p=a(71050),d=a(98401),z=a(70666),O=a(88216),S=a(30335),j=a(94565),T=function(B,F,x,v){function g(D){return D instanceof x?D:new x(function(c){c(D)})}return new(x||(x=Promise))(function(D,c){function C(_){try{E(v.next(_))}catch(L){c(L)}}function M(_){try{E(v.throw(_))}catch(L){c(L)}}function E(_){_.done?D(_.value):g(_.value).then(C,M)}E((v=v.apply(B,F||[])).next())})};j.P0.registerCommand("_executeDocumentSymbolProvider",function(B,...F){return T(this,void 0,void 0,function*(){const[x]=F;(0,d.p_)(z.o.isUri(x));const v=B.get(S.Je),D=yield B.get(O.S).createModelReference(x);try{return(yield v.getOrCreate(D.object.textEditorModel,p.T.None)).getTopLevelSymbols()}finally{D.dispose()}})})},30335:function(Tt,me,a){"use strict";a.d(me,{Je:function(){return b}});var p=a(9488),d=a(71050),z=a(17301),O=a(53725),S=a(43702),j=a(50187),T=a(24314),B=a(88191),F=a(72065),x=a(65026),v=a(73733),g=a(9917),D=a(71922),c=function(k,W,q,re){var de=arguments.length,pe=de<3?W:re===null?re=Object.getOwnPropertyDescriptor(W,q):re,ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")pe=Reflect.decorate(k,W,q,re);else for(var ue=k.length-1;ue>=0;ue--)(ae=k[ue])&&(pe=(de<3?ae(pe):de>3?ae(W,q,pe):ae(W,q))||pe);return de>3&&pe&&Object.defineProperty(W,q,pe),pe},C=function(k,W){return function(q,re){W(q,re,k)}},M=function(k,W,q,re){function de(pe){return pe instanceof q?pe:new q(function(ae){ae(pe)})}return new(q||(q=Promise))(function(pe,ae){function ue(U){try{K(re.next(U))}catch(ee){ae(ee)}}function te(U){try{K(re.throw(U))}catch(ee){ae(ee)}}function K(U){U.done?pe(U.value):de(U.value).then(ue,te)}K((re=re.apply(k,W||[])).next())})};class E{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(W,q){let re;typeof W=="string"?re=`${q.id}/${W}`:(re=`${q.id}/${W.name}`,q.children.get(re)!==void 0&&(re=`${q.id}/${W.name}_${W.range.startLineNumber}_${W.range.startColumn}`));let de=re;for(let pe=0;q.children.get(de)!==void 0;pe++)de=`${re}_${pe}`;return de}static empty(W){return W.children.size===0}}class _ extends E{constructor(W,q,re){super();this.id=W,this.parent=q,this.symbol=re,this.children=new Map}}class L extends E{constructor(W,q,re,de){super();this.id=W,this.parent=q,this.label=re,this.order=de,this.children=new Map}}class N extends E{constructor(W){super();this.uri=W,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(W,q,re){const de=new d.A(re),pe=new N(q.uri),ae=W.ordered(q),ue=ae.map((K,U)=>{var ee;let X=E.findId(`provider_${U}`,pe),le=new L(X,pe,(ee=K.displayName)!==null&&ee!==void 0?ee:"Unknown Outline Provider",U);return Promise.resolve(K.provideDocumentSymbols(q,de.token)).then(oe=>{for(const Ce of oe||[])N._makeOutlineElement(Ce,le);return le},oe=>((0,z.Cp)(oe),le)).then(oe=>{E.empty(oe)?oe.remove():pe._groups.set(X,oe)})}),te=W.onDidChange(()=>{const K=W.ordered(q);(0,p.fS)(K,ae)||de.cancel()});return Promise.all(ue).then(()=>de.token.isCancellationRequested&&!re.isCancellationRequested?N.create(W,q,re):pe._compact()).finally(()=>{te.dispose()})}static _makeOutlineElement(W,q){let re=E.findId(W,q),de=new _(re,q,W);if(W.children)for(const pe of W.children)N._makeOutlineElement(pe,de);q.children.set(de.id,de)}_compact(){let W=0;for(const[q,re]of this._groups)re.children.size===0?this._groups.delete(q):W+=1;if(W!==1)this.children=this._groups;else{let q=O.$.first(this._groups.values());for(let[,re]of q.children)re.parent=this,this.children.set(re.id,re)}return this}getTopLevelSymbols(){const W=[];for(const q of this.children.values())q instanceof _?W.push(q.symbol):W.push(...O.$.map(q.children.values(),re=>re.symbol));return W.sort((q,re)=>T.e.compareRangesUsingStarts(q.range,re.range))}asListOfDocumentSymbols(){const W=this.getTopLevelSymbols(),q=[];return N._flattenDocumentSymbols(q,W,""),q.sort((re,de)=>j.L.compare(T.e.getStartPosition(re.range),T.e.getStartPosition(de.range))||j.L.compare(T.e.getEndPosition(de.range),T.e.getEndPosition(re.range)))}static _flattenDocumentSymbols(W,q,re){for(const de of q)W.push({kind:de.kind,tags:de.tags,name:de.name,detail:de.detail,containerName:de.containerName||re,range:de.range,selectionRange:de.selectionRange,children:void 0}),de.children&&N._flattenDocumentSymbols(W,de.children,de.name)}}const b=(0,F.yh)("IOutlineModelService");let I=class{constructor(W,q,re){this._languageFeaturesService=W,this._disposables=new g.SL,this._cache=new S.z6(10,.7),this._debounceInformation=q.for(W.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(re.onModelRemoved(de=>{this._cache.delete(de.id)}))}dispose(){this._disposables.dispose()}getOrCreate(W,q){return M(this,void 0,void 0,function*(){const re=this._languageFeaturesService.documentSymbolProvider,de=re.ordered(W);let pe=this._cache.get(W.id);if(!pe||pe.versionId!==W.getVersionId()||!(0,p.fS)(pe.provider,de)){let ue=new d.A;pe={versionId:W.getVersionId(),provider:de,promiseCnt:0,source:ue,promise:N.create(re,W,ue.token),model:void 0},this._cache.set(W.id,pe);const te=Date.now();pe.promise.then(K=>{pe.model=K,this._debounceInformation.update(W,Date.now()-te)}).catch(K=>{this._cache.delete(W.id)})}if(pe.model)return pe.model;pe.promiseCnt+=1;const ae=q.onCancellationRequested(()=>{--pe.promiseCnt==0&&(pe.source.cancel(),this._cache.delete(W.id))});try{return yield pe.promise}finally{ae.dispose()}})}};I=c([C(0,D.p),C(1,B.A),C(2,v.q)],I),(0,x.z)(b,I,!0)},16467:function(Tt,me,a){"use strict";a.d(me,{yy:function(){return c},Dl:function(){return C},YQ:function(){return M}});var p=a(25924),d=a(24314),z=a(71050),O=a(9917),S=a(16830),j=a(16141),T=a(91741),B=a(72065),F=a(65026),x=a(63580);const v=(0,B.yh)("IEditorCancelService"),g=new j.uy("cancellableOperation",!1,(0,x.N)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,F.z)(v,class{constructor(){this._tokens=new WeakMap}add(E,_){let L=this._tokens.get(E);L||(L=E.invokeWithinContext(b=>{const I=g.bindTo(b.get(j.i6)),k=new T.S;return{key:I,tokens:k}}),this._tokens.set(E,L));let N;return L.key.set(!0),N=L.tokens.push(_),()=>{N&&(N(),L.key.set(!L.tokens.isEmpty()),N=void 0)}}cancel(E){const _=this._tokens.get(E);if(!_)return;const L=_.tokens.pop();L&&(L.cancel(),_.key.set(!_.tokens.isEmpty()))}},!0);class D extends z.A{constructor(_,L){super(L);this.editor=_,this._unregister=_.invokeWithinContext(N=>N.get(v).add(_,this))}dispose(){this._unregister(),super.dispose()}}(0,S.fK)(new class extends S._l{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:g})}runEditorCommand(E,_){E.get(v).cancel(_)}});class c{constructor(_,L){if(this.flags=L,(this.flags&1)!=0){const N=_.getModel();this.modelVersionId=N?p.WU("{0}#{1}",N.uri.toString(),N.getVersionId()):null}else this.modelVersionId=null;(this.flags&4)!=0?this.position=_.getPosition():this.position=null,(this.flags&2)!=0?this.selection=_.getSelection():this.selection=null,(this.flags&8)!=0?(this.scrollLeft=_.getScrollLeft(),this.scrollTop=_.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(_){if(!(_ instanceof c))return!1;const L=_;return!(this.modelVersionId!==L.modelVersionId||this.scrollLeft!==L.scrollLeft||this.scrollTop!==L.scrollTop||!this.position&&L.position||this.position&&!L.position||this.position&&L.position&&!this.position.equals(L.position)||!this.selection&&L.selection||this.selection&&!L.selection||this.selection&&L.selection&&!this.selection.equalsRange(L.selection))}validate(_){return this._equals(new c(_,this.flags))}}class C extends D{constructor(_,L,N,b){super(_,b);this._listener=new O.SL,L&4&&this._listener.add(_.onDidChangeCursorPosition(I=>{(!N||!d.e.containsPosition(N,I.position))&&this.cancel()})),L&2&&this._listener.add(_.onDidChangeCursorSelection(I=>{(!N||!d.e.containsRange(N,I.selection))&&this.cancel()})),L&8&&this._listener.add(_.onDidScrollChange(I=>this.cancel())),L&1&&(this._listener.add(_.onDidChangeModel(I=>this.cancel())),this._listener.add(_.onDidChangeModelContent(I=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class M extends z.A{constructor(_,L){super(L);this._listener=_.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}},31633:function(Tt,me,a){"use strict";a.r(me),a.d(me,{CommonFindController:function(){return On},FindController:function(){return Qn},MatchFindAction:function(){return Sr},NextMatchFindAction:function(){return Ro},NextSelectionMatchFindAction:function(){return dr},PreviousMatchFindAction:function(){return to},PreviousSelectionMatchFindAction:function(){return kn},SelectionMatchFindAction:function(){return no},StartFindAction:function(){return Yi},StartFindReplaceAction:function(){return bt},StartFindWithArgsAction:function(){return Dr},StartFindWithSelectionAction:function(){return Fr},getSelectionSearchString:function(){return oi}});var p=a(15393),d=a(9917),z=a(25924),O=a(16830),S=a(29102),j=a(9488),T=a(61329),B=a(50187),F=a(24314),x=a(3860),v=a(77277),g=a(84973),D=a(45146),c=a(73910),C=a(97781);class M{constructor(Ke){this._editor=Ke,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const Ke=this._findScopeDecorationIds.map(vt=>this._editor.getModel().getDecorationRange(vt)).filter(vt=>!!vt);if(Ke.length)return Ke}return null}getStartPosition(){return this._startPosition}setStartPosition(Ke){this._startPosition=Ke,this.setCurrentFindMatch(null)}_getDecorationIndex(Ke){const vt=this._decorations.indexOf(Ke);return vt>=0?vt+1:1}getCurrentMatchesPosition(Ke){let vt=this._editor.getModel().getDecorationsInRange(Ke);for(const Lt of vt){const tn=Lt.options;if(tn===M._FIND_MATCH_DECORATION||tn===M._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(Lt.id)}return 0}setCurrentFindMatch(Ke){let vt=null,Lt=0;if(Ke)for(let tn=0,dn=this._decorations.length;tn<dn;tn++){let hn=this._editor.getModel().getDecorationRange(this._decorations[tn]);if(Ke.equalsRange(hn)){vt=this._decorations[tn],Lt=tn+1;break}}return(this._highlightedDecorationId!==null||vt!==null)&&this._editor.changeDecorations(tn=>{if(this._highlightedDecorationId!==null&&(tn.changeDecorationOptions(this._highlightedDecorationId,M._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),vt!==null&&(this._highlightedDecorationId=vt,tn.changeDecorationOptions(this._highlightedDecorationId,M._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(tn.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),vt!==null){let dn=this._editor.getModel().getDecorationRange(vt);if(dn.startLineNumber!==dn.endLineNumber&&dn.endColumn===1){let hn=dn.endLineNumber-1,Wn=this._editor.getModel().getLineMaxColumn(hn);dn=new F.e(dn.startLineNumber,dn.startColumn,hn,Wn)}this._rangeHighlightDecorationId=tn.addDecoration(dn,M._RANGE_HIGHLIGHT_DECORATION)}}),Lt}set(Ke,vt){this._editor.changeDecorations(Lt=>{let tn=M._FIND_MATCH_DECORATION,dn=[];if(Ke.length>1e3){tn=M._FIND_MATCH_NO_OVERVIEW_DECORATION;const Wn=this._editor.getModel().getLineCount(),wi=this._editor.getLayoutInfo().height/Wn,Ci=Math.max(2,Math.ceil(3/wi));let Xi=Ke[0].range.startLineNumber,Nr=Ke[0].range.endLineNumber;for(let yr=1,Xr=Ke.length;yr<Xr;yr++){const Jr=Ke[yr].range;Nr+Ci>=Jr.startLineNumber?Jr.endLineNumber>Nr&&(Nr=Jr.endLineNumber):(dn.push({range:new F.e(Xi,1,Nr,1),options:M._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),Xi=Jr.startLineNumber,Nr=Jr.endLineNumber)}dn.push({range:new F.e(Xi,1,Nr,1),options:M._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let hn=new Array(Ke.length);for(let Wn=0,Gn=Ke.length;Wn<Gn;Wn++)hn[Wn]={range:Ke[Wn].range,options:tn};this._decorations=Lt.deltaDecorations(this._decorations,hn),this._overviewRulerApproximateDecorations=Lt.deltaDecorations(this._overviewRulerApproximateDecorations,dn),this._rangeHighlightDecorationId&&(Lt.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(Wn=>Lt.removeDecoration(Wn)),this._findScopeDecorationIds=[]),(vt==null?void 0:vt.length)&&(this._findScopeDecorationIds=vt.map(Wn=>Lt.addDecoration(Wn,M._FIND_SCOPE_DECORATION)))})}matchBeforePosition(Ke){if(this._decorations.length===0)return null;for(let vt=this._decorations.length-1;vt>=0;vt--){let Lt=this._decorations[vt],tn=this._editor.getModel().getDecorationRange(Lt);if(!(!tn||tn.endLineNumber>Ke.lineNumber)){if(tn.endLineNumber<Ke.lineNumber)return tn;if(!(tn.endColumn>Ke.column))return tn}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(Ke){if(this._decorations.length===0)return null;for(let vt=0,Lt=this._decorations.length;vt<Lt;vt++){let tn=this._decorations[vt],dn=this._editor.getModel().getDecorationRange(tn);if(!(!dn||dn.startLineNumber<Ke.lineNumber)){if(dn.startLineNumber>Ke.lineNumber)return dn;if(!(dn.startColumn<Ke.column))return dn}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let Ke=[];return Ke=Ke.concat(this._decorations),Ke=Ke.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&Ke.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&Ke.push(this._rangeHighlightDecorationId),Ke}}M._CURRENT_FIND_MATCH_DECORATION=D.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,C.EN)(c.Fm_),position:g.sh.Center},minimap:{color:(0,C.EN)(c.SUY),position:g.F5.Inline}}),M._FIND_MATCH_DECORATION=D.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,C.EN)(c.Fm_),position:g.sh.Center},minimap:{color:(0,C.EN)(c.SUY),position:g.F5.Inline}}),M._FIND_MATCH_NO_OVERVIEW_DECORATION=D.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),M._FIND_MATCH_ONLY_OVERVIEW_DECORATION=D.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,C.EN)(c.Fm_),position:g.sh.Center}}),M._RANGE_HIGHLIGHT_DECORATION=D.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),M._FIND_SCOPE_DECORATION=D.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});class E{constructor(Ke,vt,Lt){this._editorSelection=Ke,this._ranges=vt,this._replaceStrings=Lt,this._trackedEditorSelectionId=null}getEditOperations(Ke,vt){if(this._ranges.length>0){let Lt=[];for(let hn=0;hn<this._ranges.length;hn++)Lt.push({range:this._ranges[hn],text:this._replaceStrings[hn]});Lt.sort((hn,Wn)=>F.e.compareRangesUsingStarts(hn.range,Wn.range));let tn=[],dn=Lt[0];for(let hn=1;hn<Lt.length;hn++)dn.range.endLineNumber===Lt[hn].range.startLineNumber&&dn.range.endColumn===Lt[hn].range.startColumn?(dn.range=dn.range.plusRange(Lt[hn].range),dn.text=dn.text+Lt[hn].text):(tn.push(dn),dn=Lt[hn]);tn.push(dn);for(const hn of tn)vt.addEditOperation(hn.range,hn.text)}this._trackedEditorSelectionId=vt.trackSelection(this._editorSelection)}computeCursorState(Ke,vt){return vt.getTrackedSelection(this._trackedEditorSelectionId)}}function _(At,Ke){if(At&&At[0]!==""){const vt=L(At,Ke,"-"),Lt=L(At,Ke,"_");return vt&&!Lt?N(At,Ke,"-"):!vt&&Lt?N(At,Ke,"_"):At[0].toUpperCase()===At[0]?Ke.toUpperCase():At[0].toLowerCase()===At[0]?Ke.toLowerCase():z.Kw(At[0][0])&&Ke.length>0?Ke[0].toUpperCase()+Ke.substr(1):At[0][0].toUpperCase()!==At[0][0]&&Ke.length>0?Ke[0].toLowerCase()+Ke.substr(1):Ke}else return Ke}function L(At,Ke,vt){return At[0].indexOf(vt)!==-1&&Ke.indexOf(vt)!==-1&&At[0].split(vt).length===Ke.split(vt).length}function N(At,Ke,vt){const Lt=Ke.split(vt),tn=At[0].split(vt);let dn="";return Lt.forEach((hn,Wn)=>{dn+=_([tn[Wn]],hn)+vt}),dn.slice(0,-1)}class b{constructor(Ke){this.staticValue=Ke,this.kind=0}}class I{constructor(Ke){this.pieces=Ke,this.kind=1}}class k{constructor(Ke){!Ke||Ke.length===0?this._state=new b(""):Ke.length===1&&Ke[0].staticValue!==null?this._state=new b(Ke[0].staticValue):this._state=new I(Ke)}static fromStaticValue(Ke){return new k([W.staticValue(Ke)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(Ke,vt){if(this._state.kind===0)return vt?_(Ke,this._state.staticValue):this._state.staticValue;let Lt="";for(let tn=0,dn=this._state.pieces.length;tn<dn;tn++){let hn=this._state.pieces[tn];if(hn.staticValue!==null){Lt+=hn.staticValue;continue}let Wn=k._substitute(hn.matchIndex,Ke);if(hn.caseOps!==null&&hn.caseOps.length>0){let Gn=[],wi=hn.caseOps.length,Ci=0;for(let Xi=0,Nr=Wn.length;Xi<Nr;Xi++){if(Ci>=wi){Gn.push(Wn.slice(Xi));break}switch(hn.caseOps[Ci]){case"U":Gn.push(Wn[Xi].toUpperCase());break;case"u":Gn.push(Wn[Xi].toUpperCase()),Ci++;break;case"L":Gn.push(Wn[Xi].toLowerCase());break;case"l":Gn.push(Wn[Xi].toLowerCase()),Ci++;break;default:Gn.push(Wn[Xi])}}Wn=Gn.join("")}Lt+=Wn}return Lt}static _substitute(Ke,vt){if(vt===null)return"";if(Ke===0)return vt[0];let Lt="";for(;Ke>0;){if(Ke<vt.length)return(vt[Ke]||"")+Lt;Lt=String(Ke%10)+Lt,Ke=Math.floor(Ke/10)}return"$"+Lt}}class W{constructor(Ke,vt,Lt){this.staticValue=Ke,this.matchIndex=vt,!Lt||Lt.length===0?this.caseOps=null:this.caseOps=Lt.slice(0)}static staticValue(Ke){return new W(Ke,-1,null)}static caseOps(Ke,vt){return new W(null,Ke,vt)}}class q{constructor(Ke){this._source=Ke,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(Ke){this._emitStatic(this._source.substring(this._lastCharIndex,Ke)),this._lastCharIndex=Ke}emitStatic(Ke,vt){this._emitStatic(Ke),this._lastCharIndex=vt}_emitStatic(Ke){Ke.length!==0&&(this._currentStaticPiece+=Ke)}emitMatchIndex(Ke,vt,Lt){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=W.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=W.caseOps(Ke,Lt),this._lastCharIndex=vt}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=W.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new k(this._result)}}function re(At){if(!At||At.length===0)return new k(null);let Ke=[],vt=new q(At);for(let Lt=0,tn=At.length;Lt<tn;Lt++){let dn=At.charCodeAt(Lt);if(dn===92){if(Lt++,Lt>=tn)break;let hn=At.charCodeAt(Lt);switch(hn){case 92:vt.emitUnchanged(Lt-1),vt.emitStatic("\\",Lt+1);break;case 110:vt.emitUnchanged(Lt-1),vt.emitStatic(`
`,Lt+1);break;case 116:vt.emitUnchanged(Lt-1),vt.emitStatic("	",Lt+1);break;case 117:case 85:case 108:case 76:vt.emitUnchanged(Lt-1),vt.emitStatic("",Lt+1),Ke.push(String.fromCharCode(hn));break}continue}if(dn===36){if(Lt++,Lt>=tn)break;let hn=At.charCodeAt(Lt);if(hn===36){vt.emitUnchanged(Lt-1),vt.emitStatic("$",Lt+1);continue}if(hn===48||hn===38){vt.emitUnchanged(Lt-1),vt.emitMatchIndex(0,Lt+1,Ke),Ke.length=0;continue}if(49<=hn&&hn<=57){let Wn=hn-48;if(Lt+1<tn){let Gn=At.charCodeAt(Lt+1);if(48<=Gn&&Gn<=57){Lt++,Wn=Wn*10+(Gn-48),vt.emitUnchanged(Lt-2),vt.emitMatchIndex(Wn,Lt+1,Ke),Ke.length=0;continue}}vt.emitUnchanged(Lt-1),vt.emitMatchIndex(Wn,Lt+1,Ke),Ke.length=0;continue}}}return vt.finalize()}var de=a(16141);const pe=new de.uy("findWidgetVisible",!1),ae=pe.toNegated(),ue=new de.uy("findInputFocussed",!1),te=new de.uy("replaceInputFocussed",!1),K={primary:512|33,mac:{primary:2048|512|33}},U={primary:512|53,mac:{primary:2048|512|53}},ee={primary:512|48,mac:{primary:2048|512|48}},X={primary:512|42,mac:{primary:2048|512|42}},le={primary:512|46,mac:{primary:2048|512|46}},oe={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Ce=19999,ye=240;class ke{constructor(Ke,vt){this._toDispose=new d.SL,this._editor=Ke,this._state=vt,this._isDisposed=!1,this._startSearchingTimer=new p._F,this._decorations=new M(Ke),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new p.pY(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(Lt=>{(Lt.reason===3||Lt.reason===5||Lt.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(Lt=>{this._ignoreModelContentChanged||(Lt.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(Lt=>this._onStateChanged(Lt))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,(0,d.B9)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(Ke){this._isDisposed||!this._editor.hasModel()||(Ke.searchString||Ke.isReplaceRevealed||Ke.isRegex||Ke.wholeWord||Ke.matchCase||Ke.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{Ke.searchScope?this.research(Ke.moveCursor,this._state.searchScope):this.research(Ke.moveCursor)},ye)):Ke.searchScope?this.research(Ke.moveCursor,this._state.searchScope):this.research(Ke.moveCursor))}static _getSearchRange(Ke,vt){return vt||Ke.getFullModelRange()}research(Ke,vt){let Lt=null;typeof vt!="undefined"?vt!==null&&(Array.isArray(vt)?Lt=vt:Lt=[vt]):Lt=this._decorations.getFindScopes(),Lt!==null&&(Lt=Lt.map(Wn=>{if(Wn.startLineNumber!==Wn.endLineNumber){let Gn=Wn.endLineNumber;return Wn.endColumn===1&&(Gn=Gn-1),new F.e(Wn.startLineNumber,1,Gn,this._editor.getModel().getLineMaxColumn(Gn))}return Wn}));let tn=this._findMatches(Lt,!1,Ce);this._decorations.set(tn,Lt);const dn=this._editor.getSelection();let hn=this._decorations.getCurrentMatchesPosition(dn);if(hn===0&&tn.length>0){const Wn=(0,j.lG)(tn.map(Gn=>Gn.range),Gn=>F.e.compareRangesUsingStarts(Gn,dn)>=0);hn=Wn>0?Wn-1+1:hn}this._state.changeMatchInfo(hn,this._decorations.getCount(),void 0),Ke&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let Ke=this._decorations.getFindScope();return Ke&&this._editor.revealRangeInCenterIfOutsideViewport(Ke,0),!0}return!1}_setCurrentFindMatch(Ke){let vt=this._decorations.setCurrentFindMatch(Ke);this._state.changeMatchInfo(vt,this._decorations.getCount(),Ke),this._editor.setSelection(Ke),this._editor.revealRangeInCenterIfOutsideViewport(Ke,0)}_prevSearchPosition(Ke){let vt=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:Lt,column:tn}=Ke,dn=this._editor.getModel();return vt||tn===1?(Lt===1?Lt=dn.getLineCount():Lt--,tn=dn.getLineMaxColumn(Lt)):tn--,new B.L(Lt,tn)}_moveToPrevMatch(Ke,vt=!1){if(!this._state.canNavigateBack()){const Ci=this._decorations.matchAfterPosition(Ke);Ci&&this._setCurrentFindMatch(Ci);return}if(this._decorations.getCount()<Ce){let Ci=this._decorations.matchBeforePosition(Ke);Ci&&Ci.isEmpty()&&Ci.getStartPosition().equals(Ke)&&(Ke=this._prevSearchPosition(Ke),Ci=this._decorations.matchBeforePosition(Ke)),Ci&&this._setCurrentFindMatch(Ci);return}if(this._cannotFind())return;let Lt=this._decorations.getFindScope(),tn=ke._getSearchRange(this._editor.getModel(),Lt);tn.getEndPosition().isBefore(Ke)&&(Ke=tn.getEndPosition()),Ke.isBefore(tn.getStartPosition())&&(Ke=tn.getEndPosition());let{lineNumber:dn,column:hn}=Ke,Wn=this._editor.getModel(),Gn=new B.L(dn,hn),wi=Wn.findPreviousMatch(this._state.searchString,Gn,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,!1);if(wi&&wi.range.isEmpty()&&wi.range.getStartPosition().equals(Gn)&&(Gn=this._prevSearchPosition(Gn),wi=Wn.findPreviousMatch(this._state.searchString,Gn,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,!1)),!!wi){if(!vt&&!tn.containsRange(wi.range))return this._moveToPrevMatch(wi.range.getStartPosition(),!0);this._setCurrentFindMatch(wi.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(Ke){let vt=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:Lt,column:tn}=Ke,dn=this._editor.getModel();return vt||tn===dn.getLineMaxColumn(Lt)?(Lt===dn.getLineCount()?Lt=1:Lt++,tn=1):tn++,new B.L(Lt,tn)}_moveToNextMatch(Ke){if(!this._state.canNavigateForward()){const Lt=this._decorations.matchBeforePosition(Ke);Lt&&this._setCurrentFindMatch(Lt);return}if(this._decorations.getCount()<Ce){let Lt=this._decorations.matchAfterPosition(Ke);Lt&&Lt.isEmpty()&&Lt.getStartPosition().equals(Ke)&&(Ke=this._nextSearchPosition(Ke),Lt=this._decorations.matchAfterPosition(Ke)),Lt&&this._setCurrentFindMatch(Lt);return}let vt=this._getNextMatch(Ke,!1,!0);vt&&this._setCurrentFindMatch(vt.range)}_getNextMatch(Ke,vt,Lt,tn=!1){if(this._cannotFind())return null;let dn=this._decorations.getFindScope(),hn=ke._getSearchRange(this._editor.getModel(),dn);hn.getEndPosition().isBefore(Ke)&&(Ke=hn.getStartPosition()),Ke.isBefore(hn.getStartPosition())&&(Ke=hn.getStartPosition());let{lineNumber:Wn,column:Gn}=Ke,wi=this._editor.getModel(),Ci=new B.L(Wn,Gn),Xi=wi.findNextMatch(this._state.searchString,Ci,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,vt);return Lt&&Xi&&Xi.range.isEmpty()&&Xi.range.getStartPosition().equals(Ci)&&(Ci=this._nextSearchPosition(Ci),Xi=wi.findNextMatch(this._state.searchString,Ci,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,vt)),Xi?!tn&&!hn.containsRange(Xi.range)?this._getNextMatch(Xi.range.getEndPosition(),vt,Lt,!0):Xi:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?re(this._state.replaceString):k.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let Ke=this._getReplacePattern(),vt=this._editor.getSelection(),Lt=this._getNextMatch(vt.getStartPosition(),!0,!1);if(Lt)if(vt.equalsRange(Lt.range)){let tn=Ke.buildReplaceString(Lt.matches,this._state.preserveCase),dn=new T.T4(vt,tn);this._executeEditorCommand("replace",dn),this._decorations.setStartPosition(new B.L(vt.startLineNumber,vt.startColumn+tn.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(Lt.range)}_findMatches(Ke,vt,Lt){const tn=(Ke||[null]).map(dn=>ke._getSearchRange(this._editor.getModel(),dn));return this._editor.getModel().findMatches(this._state.searchString,tn,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,vt,Lt)}replaceAll(){if(!this._hasMatches())return;const Ke=this._decorations.getFindScopes();Ke===null&&this._state.matchesCount>=Ce?this._largeReplaceAll():this._regularReplaceAll(Ke),this.research(!1)}_largeReplaceAll(){const vt=new v.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null).parseSearchRequest();if(!vt)return;let Lt=vt.regex;if(!Lt.multiline){let Xi="mu";Lt.ignoreCase&&(Xi+="i"),Lt.global&&(Xi+="g"),Lt=new RegExp(Lt.source,Xi)}const tn=this._editor.getModel(),dn=tn.getValue(1),hn=tn.getFullModelRange(),Wn=this._getReplacePattern();let Gn;const wi=this._state.preserveCase;Wn.hasReplacementPatterns||wi?Gn=dn.replace(Lt,function(){return Wn.buildReplaceString(arguments,wi)}):Gn=dn.replace(Lt,Wn.buildReplaceString(null,wi));let Ci=new T.hP(hn,Gn,this._editor.getSelection());this._executeEditorCommand("replaceAll",Ci)}_regularReplaceAll(Ke){const vt=this._getReplacePattern();let Lt=this._findMatches(Ke,vt.hasReplacementPatterns||this._state.preserveCase,1073741824),tn=[];for(let hn=0,Wn=Lt.length;hn<Wn;hn++)tn[hn]=vt.buildReplaceString(Lt[hn].matches,this._state.preserveCase);let dn=new E(this._editor.getSelection(),Lt.map(hn=>hn.range),tn);this._executeEditorCommand("replaceAll",dn)}selectAllMatches(){if(!this._hasMatches())return;let Ke=this._decorations.getFindScopes(),Lt=this._findMatches(Ke,!1,1073741824).map(dn=>new x.Y(dn.range.startLineNumber,dn.range.startColumn,dn.range.endLineNumber,dn.range.endColumn)),tn=this._editor.getSelection();for(let dn=0,hn=Lt.length;dn<hn;dn++)if(Lt[dn].equalsRange(tn)){Lt=[tn].concat(Lt.slice(0,dn)).concat(Lt.slice(dn+1));break}this._editor.setSelections(Lt)}_executeEditorCommand(Ke,vt){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(Ke,vt),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}var Te=a(65321),ge=a(3331),we=a(93794);class ze extends we.${constructor(Ke,vt,Lt,tn){super();this._hideSoon=this._register(new p.pY(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=Ke,this._state=vt,this._keybindingService=Lt,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const dn=tn.getColorTheme().getColor(c.PRb),hn=tn.getColorTheme().getColor(c.Pvw),Wn=tn.getColorTheme().getColor(c.XEs);this.caseSensitive=this._register(new ge.vk({appendTitle:this._keybindingLabelFor(oe.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:dn,inputActiveOptionForeground:hn,inputActiveOptionBackground:Wn})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new ge.n3({appendTitle:this._keybindingLabelFor(oe.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:dn,inputActiveOptionForeground:hn,inputActiveOptionBackground:Wn})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new ge.am({appendTitle:this._keybindingLabelFor(oe.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:dn,inputActiveOptionForeground:hn,inputActiveOptionBackground:Wn})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(Gn=>{let wi=!1;Gn.isRegex&&(this.regex.checked=this._state.isRegex,wi=!0),Gn.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,wi=!0),Gn.matchCase&&(this.caseSensitive.checked=this._state.matchCase,wi=!0),!this._state.isRevealed&&wi&&this._revealTemporarily()})),this._register(Te.j_(this._domNode,Gn=>this._onMouseOut())),this._register(Te.nm(this._domNode,"mouseover",Gn=>this._onMouseOver())),this._applyTheme(tn.getColorTheme()),this._register(tn.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(Ke){let vt=this._keybindingService.lookupKeybinding(Ke);return vt?` (${vt.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return ze.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){!this._isVisible||(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(Ke){let vt={inputActiveOptionBorder:Ke.getColor(c.PRb),inputActiveOptionForeground:Ke.getColor(c.Pvw),inputActiveOptionBackground:Ke.getColor(c.XEs)};this.caseSensitive.style(vt),this.wholeWords.style(vt),this.regex.style(vt)}}ze.ID="editor.contrib.findOptionsWidget",(0,C.Ic)((At,Ke)=>{const vt=At.getColor(c.D0T);vt&&Ke.addRule(`.monaco-editor .findOptionsWidget { background-color: ${vt}; }`);const Lt=At.getColor(c.Hfx);Lt&&Ke.addRule(`.monaco-editor .findOptionsWidget { color: ${Lt}; }`);const tn=At.getColor(c.rh);tn&&Ke.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${tn}; }`);const dn=At.getColor(c.lRK);dn&&Ke.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${dn}; }`)});var Qe=a(4669);function Pe(At,Ke){return At===1?!0:At===2?!1:Ke}class Oe extends d.JT{constructor(){super();this._onFindReplaceStateChange=this._register(new Qe.Q5),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return Pe(this._isRegexOverride,this._isRegex)}get wholeWord(){return Pe(this._wholeWordOverride,this._wholeWord)}get matchCase(){return Pe(this._matchCaseOverride,this._matchCase)}get preserveCase(){return Pe(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(Ke,vt,Lt){let tn={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},dn=!1;vt===0&&(Ke=0),Ke>vt&&(Ke=vt),this._matchesPosition!==Ke&&(this._matchesPosition=Ke,tn.matchesPosition=!0,dn=!0),this._matchesCount!==vt&&(this._matchesCount=vt,tn.matchesCount=!0,dn=!0),typeof Lt!="undefined"&&(F.e.equalsRange(this._currentMatch,Lt)||(this._currentMatch=Lt,tn.currentMatch=!0,dn=!0)),dn&&this._onFindReplaceStateChange.fire(tn)}change(Ke,vt,Lt=!0){var tn;let dn={moveCursor:vt,updateHistory:Lt,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},hn=!1;const Wn=this.isRegex,Gn=this.wholeWord,wi=this.matchCase,Ci=this.preserveCase;typeof Ke.searchString!="undefined"&&this._searchString!==Ke.searchString&&(this._searchString=Ke.searchString,dn.searchString=!0,hn=!0),typeof Ke.replaceString!="undefined"&&this._replaceString!==Ke.replaceString&&(this._replaceString=Ke.replaceString,dn.replaceString=!0,hn=!0),typeof Ke.isRevealed!="undefined"&&this._isRevealed!==Ke.isRevealed&&(this._isRevealed=Ke.isRevealed,dn.isRevealed=!0,hn=!0),typeof Ke.isReplaceRevealed!="undefined"&&this._isReplaceRevealed!==Ke.isReplaceRevealed&&(this._isReplaceRevealed=Ke.isReplaceRevealed,dn.isReplaceRevealed=!0,hn=!0),typeof Ke.isRegex!="undefined"&&(this._isRegex=Ke.isRegex),typeof Ke.wholeWord!="undefined"&&(this._wholeWord=Ke.wholeWord),typeof Ke.matchCase!="undefined"&&(this._matchCase=Ke.matchCase),typeof Ke.preserveCase!="undefined"&&(this._preserveCase=Ke.preserveCase),typeof Ke.searchScope!="undefined"&&(((tn=Ke.searchScope)===null||tn===void 0?void 0:tn.every(Xi=>{var Nr;return(Nr=this._searchScope)===null||Nr===void 0?void 0:Nr.some(yr=>!F.e.equalsRange(yr,Xi))}))||(this._searchScope=Ke.searchScope,dn.searchScope=!0,hn=!0)),typeof Ke.loop!="undefined"&&this._loop!==Ke.loop&&(this._loop=Ke.loop,dn.loop=!0,hn=!0),typeof Ke.isSearching!="undefined"&&this._isSearching!==Ke.isSearching&&(this._isSearching=Ke.isSearching,dn.isSearching=!0,hn=!0),typeof Ke.filters!="undefined"&&(this._filters?this._filters.update(Ke.filters):this._filters=Ke.filters,dn.filters=!0,hn=!0),this._isRegexOverride=typeof Ke.isRegexOverride!="undefined"?Ke.isRegexOverride:0,this._wholeWordOverride=typeof Ke.wholeWordOverride!="undefined"?Ke.wholeWordOverride:0,this._matchCaseOverride=typeof Ke.matchCaseOverride!="undefined"?Ke.matchCaseOverride:0,this._preserveCaseOverride=typeof Ke.preserveCaseOverride!="undefined"?Ke.preserveCaseOverride:0,Wn!==this.isRegex&&(hn=!0,dn.isRegex=!0),Gn!==this.wholeWord&&(hn=!0,dn.wholeWord=!0),wi!==this.matchCase&&(hn=!0,dn.matchCase=!0),Ci!==this.preserveCase&&(hn=!0,dn.preserveCase=!0),hn&&this._onFindReplaceStateChange.fire(dn)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Ce}}var qe=a(85152),Je=a(16229),Ne=a(73098),Fe=a(73046),ne=a(17301),Q=a(1432),ie=a(63580),xe=a(10337);function be(At){var Ke,vt;return((Ke=At.lookupKeybinding("history.showPrevious"))===null||Ke===void 0?void 0:Ke.getElectronAccelerator())==="Up"&&((vt=At.lookupKeybinding("history.showNext"))===null||vt===void 0?void 0:vt.getElectronAccelerator())==="Down"}var Ge=a(59554),nt=function(At,Ke,vt,Lt){function tn(dn){return dn instanceof vt?dn:new vt(function(hn){hn(dn)})}return new(vt||(vt=Promise))(function(dn,hn){function Wn(Ci){try{wi(Lt.next(Ci))}catch(Xi){hn(Xi)}}function Gn(Ci){try{wi(Lt.throw(Ci))}catch(Xi){hn(Xi)}}function wi(Ci){Ci.done?dn(Ci.value):tn(Ci.value).then(Wn,Gn)}wi((Lt=Lt.apply(At,Ke||[])).next())})};const _t=(0,Ge.q5)("find-selection",Fe.lA.selection,ie.N("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Ot=(0,Ge.q5)("find-collapsed",Fe.lA.chevronRight,ie.N("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),rn=(0,Ge.q5)("find-expanded",Fe.lA.chevronDown,ie.N("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),gt=(0,Ge.q5)("find-replace",Fe.lA.replace,ie.N("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Ue=(0,Ge.q5)("find-replace-all",Fe.lA.replaceAll,ie.N("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Ye=(0,Ge.q5)("find-previous-match",Fe.lA.arrowUp,ie.N("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),dt=(0,Ge.q5)("find-next-match",Fe.lA.arrowDown,ie.N("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Re=ie.N("label.find","Find"),Ve=ie.N("placeholder.find","Find"),at=ie.N("label.previousMatchButton","Previous Match"),pt=ie.N("label.nextMatchButton","Next Match"),Be=ie.N("label.toggleSelectionFind","Find in Selection"),je=ie.N("label.closeButton","Close"),Et=ie.N("label.replace","Replace"),Dt=ie.N("placeholder.replace","Replace"),Xe=ie.N("label.replaceButton","Replace"),ft=ie.N("label.replaceAllButton","Replace All"),an=ie.N("label.toggleReplaceButton","Toggle Replace"),An=ie.N("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Ce),Fn=ie.N("label.matchesLocation","{0} of {1}"),Ht=ie.N("label.noResults","No results"),Kt=419,Vn=275-54;let kt=69;const Zt=33,wn="ctrlEnterReplaceAll.windows.donotask",Pi=Q.dz?256:2048;class Fi{constructor(Ke){this.afterLineNumber=Ke,this.heightInPx=Zt,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Ji(At,Ke,vt){const Lt=!!Ke.match(/\n/);if(vt&&Lt&&vt.selectionStart>0){At.stopPropagation();return}}function si(At,Ke,vt){const Lt=!!Ke.match(/\n/);if(vt&&Lt&&vt.selectionEnd<vt.value.length){At.stopPropagation();return}}class zt extends we.${constructor(Ke,vt,Lt,tn,dn,hn,Wn,Gn,wi){super();this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=Ke,this._controller=vt,this._state=Lt,this._contextViewProvider=tn,this._keybindingService=dn,this._contextKeyService=hn,this._storageService=Gn,this._notificationService=wi,this._ctrlEnterReplaceAllWarningPrompted=!!Gn.getBoolean(wn,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new p.vp(500),this._register((0,d.OF)(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(Ci=>this._onStateChanged(Ci))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(Ci=>{if(Ci.hasChanged(81)&&(this._codeEditor.getOption(81)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),Ci.hasChanged(131)&&this._tryUpdateWidgetWidth(),Ci.hasChanged(2)&&this.updateAccessibilitySupport(),Ci.hasChanged(35)){const Xi=this._codeEditor.getOption(35).addExtraSpaceOnTop;Xi&&!this._viewZone&&(this._viewZone=new Fi(0),this._showViewZone()),!Xi&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>nt(this,void 0,void 0,function*(){if(this._isVisible){let Ci=yield this._controller.getGlobalBufferTerm();Ci&&Ci!==this._state.searchString&&(this._state.change({searchString:Ci},!1),this._findInput.select())}}))),this._findInputFocused=ue.bindTo(hn),this._findFocusTracker=this._register(Te.go(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=te.bindTo(hn),this._replaceFocusTracker=this._register(Te.go(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new Fi(0)),this._applyTheme(Wn.getColorTheme()),this._register(Wn.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{!this._isVisible||(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(Ci=>{if(Ci.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return zt.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(Ke){if(Ke.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(Ke.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),Ke.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),Ke.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(81)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Te.w(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(Ke.isRevealed||Ke.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),Ke.isRegex&&this._findInput.setRegex(this._state.isRegex),Ke.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),Ke.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),Ke.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),Ke.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),Ke.searchString||Ke.matchesCount||Ke.matchesPosition){let vt=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",vt),this._updateMatchesCount(),this._updateButtons()}(Ke.searchString||Ke.currentMatch)&&this._layoutViewZone(),Ke.updateHistory&&this._delayedUpdateHistory(),Ke.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,ne.dL)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=kt+"px",this._state.matchesCount>=Ce?this._matchesCount.title=An:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let Ke;if(this._state.matchesCount>0){let vt=String(this._state.matchesCount);this._state.matchesCount>=Ce&&(vt+="+");let Lt=String(this._state.matchesPosition);Lt==="0"&&(Lt="?"),Ke=z.WU(Fn,Lt,vt)}else Ke=Ht;this._matchesCount.appendChild(document.createTextNode(Ke)),(0,qe.Z9)(this._getAriaLabel(Ke,this._state.currentMatch,this._state.searchString)),kt=Math.max(kt,this._matchesCount.clientWidth)}_getAriaLabel(Ke,vt,Lt){if(Ke===Ht)return Lt===""?ie.N("ariaSearchNoResultEmpty","{0} found",Ke):ie.N("ariaSearchNoResult","{0} found for '{1}'",Ke,Lt);if(vt){const tn=ie.N("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",Ke,Lt,vt.startLineNumber+":"+vt.startColumn),dn=this._codeEditor.getModel();return dn&&vt.startLineNumber<=dn.getLineCount()&&vt.startLineNumber>=1?`${dn.getLineContent(vt.startLineNumber)}, ${tn}`:tn}return ie.N("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",Ke,Lt)}_updateToggleSelectionFindButton(){let Ke=this._codeEditor.getSelection(),vt=Ke?Ke.startLineNumber!==Ke.endLineNumber||Ke.startColumn!==Ke.endColumn:!1,Lt=this._toggleSelectionFind.checked;this._isVisible&&(Lt||vt)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let Ke=this._state.searchString.length>0,vt=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&Ke&&vt&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&Ke&&vt&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&Ke),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&Ke),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let Lt=!this._codeEditor.getOption(81);this._toggleReplaceBtn.setEnabled(this._isVisible&&Lt)}_reveal(){if(this._revealTimeouts.forEach(Ke=>{clearTimeout(Ke)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const Ke=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const Lt=!!Ke&&Ke.startLineNumber!==Ke.endLineNumber;this._toggleSelectionFind.checked=Lt;break}default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let vt=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&Ke){const Lt=this._codeEditor.getDomNode();if(Lt){const tn=Te.i(Lt),dn=this._codeEditor.getScrolledVisiblePosition(Ke.getStartPosition()),hn=tn.left+(dn?dn.left:0),Wn=dn?dn.top:0;if(this._viewZone&&Wn<this._viewZone.heightInPx){Ke.endLineNumber>Ke.startLineNumber&&(vt=!1);const Gn=Te.xQ(this._domNode).left;hn>Gn&&(vt=!1);const wi=this._codeEditor.getScrolledVisiblePosition(Ke.getEndPosition());tn.left+(wi?wi.left:0)>Gn&&(vt=!1)}}}this._showViewZone(vt)}}_hide(Ke){this._revealTimeouts.forEach(vt=>{clearTimeout(vt)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),Ke&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(Ke){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const Lt=this._viewZone;this._viewZoneId!==void 0||!Lt||this._codeEditor.changeViewZones(tn=>{Lt.heightInPx=this._getHeight(),this._viewZoneId=tn.addZone(Lt),this._codeEditor.setScrollTop(Ke||this._codeEditor.getScrollTop()+Lt.heightInPx)})}_showViewZone(Ke=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new Fi(0));const Lt=this._viewZone;this._codeEditor.changeViewZones(tn=>{if(this._viewZoneId!==void 0){const dn=this._getHeight();if(dn===Lt.heightInPx)return;let hn=dn-Lt.heightInPx;Lt.heightInPx=dn,tn.layoutZone(this._viewZoneId),Ke&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+hn);return}else{let dn=this._getHeight();if(dn-=this._codeEditor.getOption(75).top,dn<=0)return;Lt.heightInPx=dn,this._viewZoneId=tn.addZone(Lt),Ke&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+dn)}})}_removeViewZone(){this._codeEditor.changeViewZones(Ke=>{this._viewZoneId!==void 0&&(Ke.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(Ke){let vt={inputActiveOptionBorder:Ke.getColor(c.PRb),inputActiveOptionBackground:Ke.getColor(c.XEs),inputActiveOptionForeground:Ke.getColor(c.Pvw),inputBackground:Ke.getColor(c.sEe),inputForeground:Ke.getColor(c.zJb),inputBorder:Ke.getColor(c.dt_),inputValidationInfoBackground:Ke.getColor(c._lC),inputValidationInfoForeground:Ke.getColor(c.YI3),inputValidationInfoBorder:Ke.getColor(c.EPQ),inputValidationWarningBackground:Ke.getColor(c.RV_),inputValidationWarningForeground:Ke.getColor(c.SUG),inputValidationWarningBorder:Ke.getColor(c.C3g),inputValidationErrorBackground:Ke.getColor(c.paE),inputValidationErrorForeground:Ke.getColor(c._t9),inputValidationErrorBorder:Ke.getColor(c.OZR)};this._findInput.style(vt),this._replaceInput.style(vt),this._toggleSelectionFind.style(vt)}_tryUpdateWidgetWidth(){if(!this._isVisible||!Te.Uw(this._domNode))return;const Ke=this._codeEditor.getLayoutInfo();if(Ke.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const Lt=Ke.width,tn=Ke.minimap.minimapWidth;let dn=!1,hn=!1,Wn=!1;if(this._resized&&Te.w(this._domNode)>Kt){this._domNode.style.maxWidth=`${Lt-28-tn-15}px`,this._replaceInput.width=Te.w(this._findInput.domNode);return}if(Kt+28+tn>=Lt&&(hn=!0),Kt+28+tn-kt>=Lt&&(Wn=!0),Kt+28+tn-kt>=Lt+50&&(dn=!0),this._domNode.classList.toggle("collapsed-find-widget",dn),this._domNode.classList.toggle("narrow-find-widget",Wn),this._domNode.classList.toggle("reduced-find-widget",hn),!Wn&&!dn&&(this._domNode.style.maxWidth=`${Lt-28-tn-15}px`),this._resized){this._findInput.inputBox.layout();let Gn=this._findInput.inputBox.element.clientWidth;Gn>0&&(this._replaceInput.width=Gn)}else this._isReplaceVisible&&(this._replaceInput.width=Te.w(this._findInput.domNode))}_getHeight(){let Ke=0;return Ke+=4,Ke+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(Ke+=4,Ke+=this._replaceInput.inputBox.height+2),Ke+=4,Ke}_tryUpdateHeight(){const Ke=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===Ke?!1:(this._cachedHeight=Ke,this._domNode.style.height=`${Ke}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(!!this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let Ke=this._codeEditor.getSelections();Ke.map(vt=>{vt.endColumn===1&&vt.endLineNumber>vt.startLineNumber&&(vt=vt.setEndPosition(vt.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(vt.endLineNumber-1)));const Lt=this._state.currentMatch;return vt.startLineNumber!==vt.endLineNumber&&!F.e.equalsRange(vt,Lt)?vt:null}).filter(vt=>!!vt),Ke.length&&this._state.change({searchScope:Ke},!0)}}_onFindInputMouseDown(Ke){Ke.middleButton&&Ke.stopPropagation()}_onFindInputKeyDown(Ke){if(Ke.equals(Pi|3))if(this._keybindingService.dispatchEvent(Ke,Ke.target)){Ke.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),Ke.preventDefault();return}if(Ke.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),Ke.preventDefault();return}if(Ke.equals(2048|18)){this._codeEditor.focus(),Ke.preventDefault();return}if(Ke.equals(16))return Ji(Ke,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(Ke.equals(18))return si(Ke,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(Ke){if(Ke.equals(Pi|3))if(this._keybindingService.dispatchEvent(Ke,Ke.target)){Ke.preventDefault();return}else{Q.ED&&Q.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(ie.N("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(wn,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),Ke.preventDefault();return}if(Ke.equals(2)){this._findInput.focusOnCaseSensitive(),Ke.preventDefault();return}if(Ke.equals(1024|2)){this._findInput.focus(),Ke.preventDefault();return}if(Ke.equals(2048|18)){this._codeEditor.focus(),Ke.preventDefault();return}if(Ke.equals(16))return Ji(Ke,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(Ke.equals(18))return si(Ke,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(Ke){return 0}_keybindingLabelFor(Ke){let vt=this._keybindingService.lookupKeybinding(Ke);return vt?` (${vt.getLabel()})`:""}_buildDomNode(){const Ke=!0,vt=!0;this._findInput=this._register(new xe.Yb(null,this._contextViewProvider,{width:Vn,label:Re,placeholder:Ve,appendCaseSensitiveLabel:this._keybindingLabelFor(oe.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(oe.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(oe.ToggleRegexCommand),validation:Gn=>{if(Gn.length===0||!this._findInput.getRegex())return null;try{return new RegExp(Gn,"gu"),null}catch(wi){return{content:wi.message}}},flexibleHeight:Ke,flexibleWidth:vt,flexibleMaxHeight:118,showHistoryHint:()=>be(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(Gn=>this._onFindInputKeyDown(Gn))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(Gn=>{Gn.equals(1024|2)&&this._isReplaceVisible&&(this._replaceInput.focus(),Gn.preventDefault())})),this._register(this._findInput.onRegexKeyDown(Gn=>{Gn.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),Gn.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(Gn=>{this._tryUpdateHeight()&&this._showViewZone()})),Q.IJ&&this._register(this._findInput.onMouseDown(Gn=>this._onFindInputMouseDown(Gn))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Vt({label:at+this._keybindingLabelFor(oe.PreviousMatchFindAction),icon:Ye,onTrigger:()=>{this._codeEditor.getAction(oe.PreviousMatchFindAction).run().then(void 0,ne.dL)}})),this._nextBtn=this._register(new Vt({label:pt+this._keybindingLabelFor(oe.NextMatchFindAction),icon:dt,onTrigger:()=>{this._codeEditor.getAction(oe.NextMatchFindAction).run().then(void 0,ne.dL)}}));let Lt=document.createElement("div");Lt.className="find-part",Lt.appendChild(this._findInput.domNode);const tn=document.createElement("div");tn.className="find-actions",Lt.appendChild(tn),tn.appendChild(this._matchesCount),tn.appendChild(this._prevBtn.domNode),tn.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Je.X({icon:_t,title:Be+this._keybindingLabelFor(oe.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let Gn=this._codeEditor.getSelections();Gn.map(wi=>(wi.endColumn===1&&wi.endLineNumber>wi.startLineNumber&&(wi=wi.setEndPosition(wi.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(wi.endLineNumber-1))),wi.isEmpty()?null:wi)).filter(wi=>!!wi),Gn.length&&this._state.change({searchScope:Gn},!0)}}else this._state.change({searchScope:null},!0)})),tn.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Vt({label:je+this._keybindingLabelFor(oe.CloseFindWidgetCommand),icon:Ge.s_,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:Gn=>{Gn.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),Gn.preventDefault())}})),tn.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new xe.Nq(null,void 0,{label:Et,placeholder:Dt,appendPreserveCaseLabel:this._keybindingLabelFor(oe.TogglePreserveCaseCommand),history:[],flexibleHeight:Ke,flexibleWidth:vt,flexibleMaxHeight:118,showHistoryHint:()=>be(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(Gn=>this._onReplaceInputKeyDown(Gn))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(Gn=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(Gn=>{Gn.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),Gn.preventDefault())})),this._replaceBtn=this._register(new Vt({label:Xe+this._keybindingLabelFor(oe.ReplaceOneAction),icon:gt,onTrigger:()=>{this._controller.replace()},onKeyDown:Gn=>{Gn.equals(1024|2)&&(this._closeBtn.focus(),Gn.preventDefault())}})),this._replaceAllBtn=this._register(new Vt({label:ft+this._keybindingLabelFor(oe.ReplaceAllAction),icon:Ue,onTrigger:()=>{this._controller.replaceAll()}}));let dn=document.createElement("div");dn.className="replace-part",dn.appendChild(this._replaceInput.domNode);const hn=document.createElement("div");hn.className="replace-actions",dn.appendChild(hn),hn.appendChild(this._replaceBtn.domNode),hn.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Vt({label:an,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Te.w(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${Kt}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(Lt),this._domNode.appendChild(dn),this._resizeSash=new Ne.g(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let Wn=Kt;this._register(this._resizeSash.onDidStart(()=>{Wn=Te.w(this._domNode)})),this._register(this._resizeSash.onDidChange(Gn=>{this._resized=!0;let wi=Wn+Gn.startX-Gn.currentX;if(wi<Kt)return;const Ci=parseFloat(Te.Dx(this._domNode).maxWidth)||0;wi>Ci||(this._domNode.style.width=`${wi}px`,this._isReplaceVisible&&(this._replaceInput.width=Te.w(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const Gn=Te.w(this._domNode);if(Gn<Kt)return;let wi=Kt;if(!this._resized||Gn===Kt){const Ci=this._codeEditor.getLayoutInfo();wi=Ci.width-28-Ci.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${wi}px`,this._isReplaceVisible&&(this._replaceInput.width=Te.w(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const Ke=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(Ke!==2)}}zt.ID="editor.contrib.findWidget";class Vt extends we.${constructor(Ke){super();this._opts=Ke;let vt="button";this._opts.className&&(vt=vt+" "+this._opts.className),this._opts.icon&&(vt=vt+" "+C.kS.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=vt,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,Lt=>{this._opts.onTrigger(),Lt.preventDefault()}),this.onkeydown(this._domNode,Lt=>{if(Lt.equals(10)||Lt.equals(3)){this._opts.onTrigger(),Lt.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(Lt)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(Ke){this._domNode.classList.toggle("disabled",!Ke),this._domNode.setAttribute("aria-disabled",String(!Ke)),this._domNode.tabIndex=Ke?0:-1}setExpanded(Ke){this._domNode.setAttribute("aria-expanded",String(!!Ke)),Ke?(this._domNode.classList.remove(...C.kS.asClassNameArray(Ot)),this._domNode.classList.add(...C.kS.asClassNameArray(rn))):(this._domNode.classList.remove(...C.kS.asClassNameArray(rn)),this._domNode.classList.add(...C.kS.asClassNameArray(Ot)))}}(0,C.Ic)((At,Ke)=>{const vt=(Xr,Jr)=>{Jr&&Ke.addRule(`.monaco-editor ${Xr} { background-color: ${Jr}; }`)};vt(".findMatch",At.getColor(c.MUv)),vt(".currentFindMatch",At.getColor(c.nyM)),vt(".findScope",At.getColor(c.jUe));const Lt=At.getColor(c.D0T);vt(".find-widget",Lt);const tn=At.getColor(c.rh);tn&&Ke.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${tn}; }`);const dn=At.getColor(c.EiJ);dn&&Ke.addRule(`.monaco-editor .findMatch { border: 1px ${At.type==="hc"?"dotted":"solid"} ${dn}; box-sizing: border-box; }`);const hn=At.getColor(c.pnM);hn&&Ke.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${hn}; padding: 1px; box-sizing: border-box; }`);const Wn=At.getColor(c.gkn);Wn&&Ke.addRule(`.monaco-editor .findScope { border: 1px ${At.type==="hc"?"dashed":"solid"} ${Wn}; }`);const Gn=At.getColor(c.lRK);Gn&&Ke.addRule(`.monaco-editor .find-widget { border: 1px solid ${Gn}; }`);const wi=At.getColor(c.Hfx);wi&&Ke.addRule(`.monaco-editor .find-widget { color: ${wi}; }`);const Ci=At.getColor(c.Ido);Ci&&Ke.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${Ci}; }`);const Xi=At.getColor(c.Ng6);if(Xi)Ke.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${Xi}; }`);else{const Xr=At.getColor(c.D1_);Xr&&Ke.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${Xr}; }`)}const Nr=At.getColor(c.lUq);Nr&&Ke.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${Nr} !important;
		}
	`);const yr=At.getColor(c.R80);yr&&Ke.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${yr}; }`)});var vn=a(84144),Sn=a(84972),Bn=a(5606),mn=a(91847),Jt=a(59422),En=a(26904),$t=function(At,Ke,vt,Lt){var tn=arguments.length,dn=tn<3?Ke:Lt===null?Lt=Object.getOwnPropertyDescriptor(Ke,vt):Lt,hn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")dn=Reflect.decorate(At,Ke,vt,Lt);else for(var Wn=At.length-1;Wn>=0;Wn--)(hn=At[Wn])&&(dn=(tn<3?hn(dn):tn>3?hn(Ke,vt,dn):hn(Ke,vt))||dn);return tn>3&&dn&&Object.defineProperty(Ke,vt,dn),dn},sn=function(At,Ke){return function(vt,Lt){Ke(vt,Lt,At)}},Tn=function(At,Ke,vt,Lt){function tn(dn){return dn instanceof vt?dn:new vt(function(hn){hn(dn)})}return new(vt||(vt=Promise))(function(dn,hn){function Wn(Ci){try{wi(Lt.next(Ci))}catch(Xi){hn(Xi)}}function Gn(Ci){try{wi(Lt.throw(Ci))}catch(Xi){hn(Xi)}}function wi(Ci){Ci.done?dn(Ci.value):tn(Ci.value).then(Wn,Gn)}wi((Lt=Lt.apply(At,Ke||[])).next())})};const ri=524288;function oi(At,Ke="single",vt=!1){if(!At.hasModel())return null;const Lt=At.getSelection();if(Ke==="single"&&Lt.startLineNumber===Lt.endLineNumber||Ke==="multiple"){if(Lt.isEmpty()){const tn=At.getConfiguredWordAtPosition(Lt.getStartPosition());if(tn&&vt===!1)return tn.word}else if(At.getModel().getValueLengthInRange(Lt)<ri)return At.getModel().getValueInRange(Lt)}return null}let On=class oS extends d.JT{constructor(Ke,vt,Lt,tn){super();this._editor=Ke,this._findWidgetVisible=pe.bindTo(vt),this._contextKeyService=vt,this._storageService=Lt,this._clipboardService=tn,this._updateHistoryDelayer=new p.vp(500),this._state=this._register(new Oe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(dn=>this._onStateChanged(dn))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let dn=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),dn&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(Ke){return Ke.getContribution(oS.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(Ke){this.saveQueryState(Ke),Ke.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),Ke.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(Ke){Ke.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),Ke.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),Ke.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),Ke.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!ue.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let Ke=this._editor.getSelections();Ke.map(vt=>(vt.endColumn===1&&vt.endLineNumber>vt.startLineNumber&&(vt=vt.setEndPosition(vt.endLineNumber-1,this._editor.getModel().getLineMaxColumn(vt.endLineNumber-1))),vt.isEmpty()?null:vt)).filter(vt=>!!vt),Ke.length&&this._state.change({searchScope:Ke},!0)}}setSearchString(Ke){this._state.isRegex&&(Ke=z.ec(Ke)),this._state.change({searchString:Ke},!1)}highlightFindOptions(Ke=!1){}_start(Ke,vt){return Tn(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let Lt=Object.assign(Object.assign({},vt),{isRevealed:!0});if(Ke.seedSearchStringFromSelection==="single"){let tn=oi(this._editor,Ke.seedSearchStringFromSelection,Ke.seedSearchStringFromNonEmptySelection);tn&&(this._state.isRegex?Lt.searchString=z.ec(tn):Lt.searchString=tn)}else if(Ke.seedSearchStringFromSelection==="multiple"&&!Ke.updateSearchScope){let tn=oi(this._editor,Ke.seedSearchStringFromSelection);tn&&(Lt.searchString=tn)}if(!Lt.searchString&&Ke.seedSearchStringFromGlobalClipboard){let tn=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;tn&&(Lt.searchString=tn)}if(Ke.forceRevealReplace||Lt.isReplaceRevealed?Lt.isReplaceRevealed=!0:this._findWidgetVisible.get()||(Lt.isReplaceRevealed=!1),Ke.updateSearchScope){let tn=this._editor.getSelections();tn.some(dn=>!dn.isEmpty())&&(Lt.searchScope=tn)}Lt.loop=Ke.loop,this._state.change(Lt,!1),this._model||(this._model=new ke(this._editor,this._state))})}start(Ke,vt){return this._start(Ke,vt)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return Tn(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(Ke){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(Ke)}};On.ID="editor.contrib.findController",On=$t([sn(1,de.i6),sn(2,En.Uy),sn(3,Sn.p)],On);let Qn=class extends On{constructor(Ke,vt,Lt,tn,dn,hn,Wn,Gn){super(Ke,Lt,Wn,Gn);this._contextViewService=vt,this._keybindingService=tn,this._themeService=dn,this._notificationService=hn,this._widget=null,this._findOptionsWidget=null}_start(Ke,vt){const Lt=Object.create(null,{_start:{get:()=>super._start}});return Tn(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const tn=this._editor.getSelection();let dn=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":dn=!0;break;case"never":dn=!1;break;case"multiline":{dn=!!tn&&tn.startLineNumber!==tn.endLineNumber;break}default:break}Ke.updateSearchScope=Ke.updateSearchScope||dn,yield Lt._start.call(this,Ke,vt),this._widget&&(Ke.shouldFocus===2?this._widget.focusReplaceInput():Ke.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(Ke=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!Ke?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new zt(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new ze(this._editor,this._state,this._keybindingService,this._themeService))}};Qn=$t([sn(1,Bn.u),sn(2,de.i6),sn(3,mn.d),sn(4,C.XE),sn(5,Jt.lT),sn(6,En.Uy),sn(7,Sn.p)],Qn);const Yi=(0,O.rn)(new O.jY({id:oe.StartFindAction,label:ie.N("startFindAction","Find"),alias:"Find",precondition:de.Ao.or(S.u.focus,de.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2048|36,weight:100},menuOpts:{menuId:vn.eH.MenubarEditMenu,group:"3_find",title:ie.N({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));Yi.addImplementation(0,(At,Ke,vt)=>{const Lt=On.get(Ke);return Lt?Lt.start({forceRevealReplace:!1,seedSearchStringFromSelection:Ke.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:Ke.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:Ke.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:Ke.getOption(35).loop}):!1});const Lr={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:ie.N("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:ie.N("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:ie.N("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:ie.N("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class Dr extends O.R6{constructor(){super({id:oe.StartFindWithArgs,label:ie.N("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Lr})}run(Ke,vt,Lt){return Tn(this,void 0,void 0,function*(){const tn=On.get(vt);if(tn){const dn=Lt?{searchString:Lt.searchString,replaceString:Lt.replaceString,isReplaceRevealed:Lt.replaceString!==void 0,isRegex:Lt.isRegex,wholeWord:Lt.matchWholeWord,matchCase:Lt.isCaseSensitive,preserveCase:Lt.preserveCase}:{};yield tn.start({forceRevealReplace:!1,seedSearchStringFromSelection:tn.getState().searchString.length===0&&vt.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:vt.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(Lt==null?void 0:Lt.findInSelection)||!1,loop:vt.getOption(35).loop},dn),tn.setGlobalBufferTerm(tn.getState().searchString)}})}}class Fr extends O.R6{constructor(){super({id:oe.StartFindWithSelection,label:ie.N("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2048|35},weight:100}})}run(Ke,vt){return Tn(this,void 0,void 0,function*(){const Lt=On.get(vt);Lt&&(yield Lt.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:vt.getOption(35).loop}),Lt.setGlobalBufferTerm(Lt.getState().searchString))})}}class Sr extends O.R6{run(Ke,vt){return Tn(this,void 0,void 0,function*(){const Lt=On.get(vt);Lt&&!this._run(Lt)&&(yield Lt.start({forceRevealReplace:!1,seedSearchStringFromSelection:Lt.getState().searchString.length===0&&vt.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:vt.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:vt.getOption(35).loop}),this._run(Lt))})}}class Ro extends Sr{constructor(){super({id:oe.NextMatchFindAction,label:ie.N("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:S.u.focus,primary:61,mac:{primary:2048|37,secondary:[61]},weight:100},{kbExpr:de.Ao.and(S.u.focus,ue),primary:3,weight:100}]})}_run(Ke){return Ke.moveToNextMatch()?(Ke.editor.pushUndoStop(),!0):!1}}class to extends Sr{constructor(){super({id:oe.PreviousMatchFindAction,label:ie.N("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:S.u.focus,primary:1024|61,mac:{primary:2048|1024|37,secondary:[1024|61]},weight:100},{kbExpr:de.Ao.and(S.u.focus,ue),primary:1024|3,weight:100}]})}_run(Ke){return Ke.moveToPrevMatch()}}class no extends O.R6{run(Ke,vt){return Tn(this,void 0,void 0,function*(){const Lt=On.get(vt);if(!Lt)return;const tn=vt.getOption(35).seedSearchStringFromSelection==="selection";let dn=null;vt.getOption(35).seedSearchStringFromSelection!=="never"&&(dn=oi(vt,"single",tn)),dn&&Lt.setSearchString(dn),this._run(Lt)||(yield Lt.start({forceRevealReplace:!1,seedSearchStringFromSelection:vt.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:tn,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:vt.getOption(35).loop}),this._run(Lt))})}}class dr extends no{constructor(){super({id:oe.NextSelectionMatchFindAction,label:ie.N("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:S.u.focus,primary:2048|61,weight:100}})}_run(Ke){return Ke.moveToNextMatch()}}class kn extends no{constructor(){super({id:oe.PreviousSelectionMatchFindAction,label:ie.N("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:S.u.focus,primary:2048|1024|61,weight:100}})}_run(Ke){return Ke.moveToPrevMatch()}}const bt=(0,O.rn)(new O.jY({id:oe.StartFindReplaceAction,label:ie.N("startReplace","Replace"),alias:"Replace",precondition:de.Ao.or(S.u.focus,de.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2048|38,mac:{primary:2048|512|36},weight:100},menuOpts:{menuId:vn.eH.MenubarEditMenu,group:"3_find",title:ie.N({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));bt.addImplementation(0,(At,Ke,vt)=>{if(!Ke.hasModel()||Ke.getOption(81))return!1;const Lt=On.get(Ke);if(!Lt)return!1;const tn=Ke.getSelection(),dn=Lt.isFindInputFocused(),hn=!tn.isEmpty()&&tn.startLineNumber===tn.endLineNumber&&Ke.getOption(35).seedSearchStringFromSelection!=="never"&&!dn,Wn=dn||hn?2:1;return Lt.start({forceRevealReplace:!0,seedSearchStringFromSelection:hn?"single":"none",seedSearchStringFromNonEmptySelection:Ke.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:Ke.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:Wn,shouldAnimate:!0,updateSearchScope:!1,loop:Ke.getOption(35).loop})}),(0,O._K)(On.ID,Qn),(0,O.Qr)(Dr),(0,O.Qr)(Fr),(0,O.Qr)(Ro),(0,O.Qr)(to),(0,O.Qr)(dr),(0,O.Qr)(kn);const Bt=O._l.bindToContribution(On.get);(0,O.fK)(new Bt({id:oe.CloseFindWidgetCommand,precondition:pe,handler:At=>At.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:de.Ao.and(S.u.focus,de.Ao.not("isComposing")),primary:9,secondary:[1024|9]}})),(0,O.fK)(new Bt({id:oe.ToggleCaseSensitiveCommand,precondition:void 0,handler:At=>At.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:S.u.focus,primary:K.primary,mac:K.mac,win:K.win,linux:K.linux}})),(0,O.fK)(new Bt({id:oe.ToggleWholeWordCommand,precondition:void 0,handler:At=>At.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:S.u.focus,primary:U.primary,mac:U.mac,win:U.win,linux:U.linux}})),(0,O.fK)(new Bt({id:oe.ToggleRegexCommand,precondition:void 0,handler:At=>At.toggleRegex(),kbOpts:{weight:100+5,kbExpr:S.u.focus,primary:ee.primary,mac:ee.mac,win:ee.win,linux:ee.linux}})),(0,O.fK)(new Bt({id:oe.ToggleSearchScopeCommand,precondition:void 0,handler:At=>At.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:S.u.focus,primary:X.primary,mac:X.mac,win:X.win,linux:X.linux}})),(0,O.fK)(new Bt({id:oe.TogglePreserveCaseCommand,precondition:void 0,handler:At=>At.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:S.u.focus,primary:le.primary,mac:le.mac,win:le.win,linux:le.linux}})),(0,O.fK)(new Bt({id:oe.ReplaceOneAction,precondition:pe,handler:At=>At.replace(),kbOpts:{weight:100+5,kbExpr:S.u.focus,primary:2048|1024|22}})),(0,O.fK)(new Bt({id:oe.ReplaceOneAction,precondition:pe,handler:At=>At.replace(),kbOpts:{weight:100+5,kbExpr:de.Ao.and(S.u.focus,te),primary:3}})),(0,O.fK)(new Bt({id:oe.ReplaceAllAction,precondition:pe,handler:At=>At.replaceAll(),kbOpts:{weight:100+5,kbExpr:S.u.focus,primary:2048|512|3}})),(0,O.fK)(new Bt({id:oe.ReplaceAllAction,precondition:pe,handler:At=>At.replaceAll(),kbOpts:{weight:100+5,kbExpr:de.Ao.and(S.u.focus,te),primary:void 0,mac:{primary:2048|3}}})),(0,O.fK)(new Bt({id:oe.SelectAllMatchesAction,precondition:pe,handler:At=>At.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:S.u.focus,primary:512|3}}))},30835:function(Tt,me,a){"use strict";a.r(me),a.d(me,{FoldingController:function(){return at},editorFoldForeground:function(){return Ji},foldBackgroundBackground:function(){return Fi}});var p=a(15393),d=a(17301),z=a(22258),O=a(9917),S=a(25924),j=a(98401),T=a(43407),B=a(16830),F=a(29102),x=a(96887),v=a(89381),g=a(4669);const D=65535,c=16777215,C=4278190080;class M{constructor(zt,Vt,vn){if(zt.length!==Vt.length||zt.length>D)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=zt,this._endIndexes=Vt,this._collapseStates=new Uint32Array(Math.ceil(zt.length/32)),this._types=vn,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let zt=[],Vt=(vn,Sn)=>{let Bn=zt[zt.length-1];return this.getStartLineNumber(Bn)<=vn&&this.getEndLineNumber(Bn)>=Sn};for(let vn=0,Sn=this._startIndexes.length;vn<Sn;vn++){let Bn=this._startIndexes[vn],mn=this._endIndexes[vn];if(Bn>c||mn>c)throw new Error("startLineNumber or endLineNumber must not exceed "+c);for(;zt.length>0&&!Vt(Bn,mn);)zt.pop();let Jt=zt.length>0?zt[zt.length-1]:-1;zt.push(vn),this._startIndexes[vn]=Bn+((Jt&255)<<24),this._endIndexes[vn]=mn+((Jt&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(zt){return this._startIndexes[zt]&c}getEndLineNumber(zt){return this._endIndexes[zt]&c}getType(zt){return this._types?this._types[zt]:void 0}hasTypes(){return!!this._types}isCollapsed(zt){let Vt=zt/32|0,vn=zt%32;return(this._collapseStates[Vt]&1<<vn)!=0}setCollapsed(zt,Vt){let vn=zt/32|0,Sn=zt%32,Bn=this._collapseStates[vn];Vt?this._collapseStates[vn]=Bn|1<<Sn:this._collapseStates[vn]=Bn&~(1<<Sn)}setCollapsedAllOfType(zt,Vt){let vn=!1;if(this._types)for(let Sn=0;Sn<this._types.length;Sn++)this._types[Sn]===zt&&(this.setCollapsed(Sn,Vt),vn=!0);return vn}toRegion(zt){return new E(this,zt)}getParentIndex(zt){this.ensureParentIndices();let Vt=((this._startIndexes[zt]&C)>>>24)+((this._endIndexes[zt]&C)>>>16);return Vt===D?-1:Vt}contains(zt,Vt){return this.getStartLineNumber(zt)<=Vt&&this.getEndLineNumber(zt)>=Vt}findIndex(zt){let Vt=0,vn=this._startIndexes.length;if(vn===0)return-1;for(;Vt<vn;){let Sn=Math.floor((Vt+vn)/2);zt<this.getStartLineNumber(Sn)?vn=Sn:Vt=Sn+1}return Vt-1}findRange(zt){let Vt=this.findIndex(zt);if(Vt>=0){if(this.getEndLineNumber(Vt)>=zt)return Vt;for(Vt=this.getParentIndex(Vt);Vt!==-1;){if(this.contains(Vt,zt))return Vt;Vt=this.getParentIndex(Vt)}}return-1}toString(){let zt=[];for(let Vt=0;Vt<this.length;Vt++)zt[Vt]=`[${this.isCollapsed(Vt)?"+":"-"}] ${this.getStartLineNumber(Vt)}/${this.getEndLineNumber(Vt)}`;return zt.join(", ")}}class E{constructor(zt,Vt){this.ranges=zt,this.index=Vt}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(zt){return zt.startLineNumber<=this.startLineNumber&&zt.endLineNumber>=this.endLineNumber}containsLine(zt){return this.startLineNumber<=zt&&zt<=this.endLineNumber}}class _{constructor(zt,Vt){this._updateEventEmitter=new g.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=zt,this._decorationProvider=Vt,this._regions=new M(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(zt){if(!zt.length)return;zt=zt.sort((vn,Sn)=>vn.regionIndex-Sn.regionIndex);const Vt={};this._decorationProvider.changeDecorations(vn=>{let Sn=0,Bn=-1,mn=-1;const Jt=En=>{for(;Sn<En;){const $t=this._regions.getEndLineNumber(Sn),sn=this._regions.isCollapsed(Sn);$t<=Bn&&vn.changeDecorationOptions(this._editorDecorationIds[Sn],this._decorationProvider.getDecorationOption(sn,$t<=mn)),sn&&$t>mn&&(mn=$t),Sn++}};for(let En of zt){let $t=En.regionIndex,sn=this._editorDecorationIds[$t];if(sn&&!Vt[sn]){Vt[sn]=!0,Jt($t);let Tn=!this._regions.isCollapsed($t);this._regions.setCollapsed($t,Tn),Bn=Math.max(Bn,this._regions.getEndLineNumber($t))}}Jt(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:zt})}update(zt,Vt=[]){let vn=[],Sn=(Tn,ri)=>{for(let oi of Vt)if(Tn<oi&&oi<=ri)return!0;return!1},Bn=-1,mn=(Tn,ri)=>{const oi=zt.getStartLineNumber(Tn),On=zt.getEndLineNumber(Tn);ri||(ri=zt.isCollapsed(Tn)),ri&&Sn(oi,On)&&(ri=!1),zt.setCollapsed(Tn,ri);const Qn=this._textModel.getLineMaxColumn(oi),Yi={startLineNumber:oi,startColumn:Math.max(Qn-1,1),endLineNumber:oi,endColumn:Qn};vn.push({range:Yi,options:this._decorationProvider.getDecorationOption(ri,On<=Bn)}),ri&&On>Bn&&(Bn=On)},Jt=0,En=()=>{for(;Jt<this._regions.length;){let Tn=this._regions.isCollapsed(Jt);if(Jt++,Tn)return Jt-1}return-1},$t=0,sn=En();for(;sn!==-1&&$t<zt.length;){let Tn=this._textModel.getDecorationRange(this._editorDecorationIds[sn]);if(Tn){let ri=Tn.startLineNumber;if(Tn.startColumn===Math.max(Tn.endColumn-1,1)&&this._textModel.getLineMaxColumn(ri)===Tn.endColumn)for(;$t<zt.length;){let oi=zt.getStartLineNumber($t);if(ri>=oi)mn($t,ri===oi),$t++;else break}}sn=En()}for(;$t<zt.length;)mn($t,!1),$t++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,vn),this._regions=zt,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let zt=[];for(let Vt=0;Vt<this._regions.length;Vt++)if(this._regions.isCollapsed(Vt)){let vn=this._textModel.getDecorationRange(this._editorDecorationIds[Vt]);if(vn){let Sn=vn.startLineNumber,Bn=vn.endLineNumber+this._regions.getEndLineNumber(Vt)-this._regions.getStartLineNumber(Vt);zt.push({startLineNumber:Sn,endLineNumber:Bn})}}if(zt.length>0)return zt}applyMemento(zt){if(!Array.isArray(zt))return;let Vt=[];for(let vn of zt){let Sn=this.getRegionAtLine(vn.startLineNumber);Sn&&!Sn.isCollapsed&&Vt.push(Sn)}this.toggleCollapseState(Vt)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(zt,Vt){let vn=[];if(this._regions){let Sn=this._regions.findRange(zt),Bn=1;for(;Sn>=0;){let mn=this._regions.toRegion(Sn);(!Vt||Vt(mn,Bn))&&vn.push(mn),Bn++,Sn=mn.parentIndex}}return vn}getRegionAtLine(zt){if(this._regions){let Vt=this._regions.findRange(zt);if(Vt>=0)return this._regions.toRegion(Vt)}return null}getRegionsInside(zt,Vt){let vn=[],Sn=zt?zt.regionIndex+1:0,Bn=zt?zt.endLineNumber:Number.MAX_VALUE;if(Vt&&Vt.length===2){const mn=[];for(let Jt=Sn,En=this._regions.length;Jt<En;Jt++){let $t=this._regions.toRegion(Jt);if(this._regions.getStartLineNumber(Jt)<Bn){for(;mn.length>0&&!$t.containedBy(mn[mn.length-1]);)mn.pop();mn.push($t),Vt($t,mn.length)&&vn.push($t)}else break}}else for(let mn=Sn,Jt=this._regions.length;mn<Jt;mn++){let En=this._regions.toRegion(mn);if(this._regions.getStartLineNumber(mn)<Bn)(!Vt||Vt(En))&&vn.push(En);else break}return vn}}function L(si,zt,Vt){let vn=[];for(let Sn of Vt){let Bn=si.getRegionAtLine(Sn);if(Bn){const mn=!Bn.isCollapsed;if(vn.push(Bn),zt>1){let Jt=si.getRegionsInside(Bn,(En,$t)=>En.isCollapsed!==mn&&$t<zt);vn.push(...Jt)}}}si.toggleCollapseState(vn)}function N(si,zt,Vt=Number.MAX_VALUE,vn){let Sn=[];if(vn&&vn.length>0)for(let Bn of vn){let mn=si.getRegionAtLine(Bn);if(mn&&(mn.isCollapsed!==zt&&Sn.push(mn),Vt>1)){let Jt=si.getRegionsInside(mn,(En,$t)=>En.isCollapsed!==zt&&$t<Vt);Sn.push(...Jt)}}else{let Bn=si.getRegionsInside(null,(mn,Jt)=>mn.isCollapsed!==zt&&Jt<Vt);Sn.push(...Bn)}si.toggleCollapseState(Sn)}function b(si,zt,Vt,vn){let Sn=[];for(let Bn of vn){let mn=si.getAllRegionsAtLine(Bn,(Jt,En)=>Jt.isCollapsed!==zt&&En<=Vt);Sn.push(...mn)}si.toggleCollapseState(Sn)}function I(si,zt,Vt){let vn=[];for(let Sn of Vt){let Bn=si.getAllRegionsAtLine(Sn,mn=>mn.isCollapsed!==zt);Bn.length>0&&vn.push(Bn[0])}si.toggleCollapseState(vn)}function k(si,zt,Vt,vn){let Sn=(mn,Jt)=>Jt===zt&&mn.isCollapsed!==Vt&&!vn.some(En=>mn.containsLine(En)),Bn=si.getRegionsInside(null,Sn);si.toggleCollapseState(Bn)}function W(si,zt,Vt){let vn=[];for(let mn of Vt){const Jt=si.getAllRegionsAtLine(mn,void 0);Jt.length>0&&vn.push(Jt[0])}let Sn=mn=>vn.every(Jt=>!Jt.containedBy(mn)&&!mn.containedBy(Jt))&&mn.isCollapsed!==zt,Bn=si.getRegionsInside(null,Sn);si.toggleCollapseState(Bn)}function q(si,zt,Vt){let vn=si.textModel,Sn=si.regions,Bn=[];for(let mn=Sn.length-1;mn>=0;mn--)if(Vt!==Sn.isCollapsed(mn)){let Jt=Sn.getStartLineNumber(mn);zt.test(vn.getLineContent(Jt))&&Bn.push(Sn.toRegion(mn))}si.toggleCollapseState(Bn)}function re(si,zt,Vt){let vn=si.regions,Sn=[];for(let Bn=vn.length-1;Bn>=0;Bn--)Vt!==vn.isCollapsed(Bn)&&zt===vn.getType(Bn)&&Sn.push(vn.toRegion(Bn));si.toggleCollapseState(Sn)}function de(si,zt){let Vt=null,vn=zt.getRegionAtLine(si);if(vn!==null&&(Vt=vn.startLineNumber,si===Vt)){let Sn=vn.parentIndex;Sn!==-1?Vt=zt.regions.getStartLineNumber(Sn):Vt=null}return Vt}function pe(si,zt){let Vt=zt.getRegionAtLine(si);if(Vt!==null&&Vt.startLineNumber===si){if(si!==Vt.startLineNumber)return Vt.startLineNumber;{let vn=Vt.parentIndex,Sn=0;for(vn!==-1&&(Sn=zt.regions.getStartLineNumber(Vt.parentIndex));Vt!==null;)if(Vt.regionIndex>0){if(Vt=zt.regions.toRegion(Vt.regionIndex-1),Vt.startLineNumber<=Sn)return null;if(Vt.parentIndex===vn)return Vt.startLineNumber}else return null}}else if(zt.regions.length>0)for(Vt=zt.regions.toRegion(zt.regions.length-1);Vt!==null;){if(Vt.startLineNumber<si)return Vt.startLineNumber;Vt.regionIndex>0?Vt=zt.regions.toRegion(Vt.regionIndex-1):Vt=null}return null}function ae(si,zt){let Vt=zt.getRegionAtLine(si);if(Vt!==null&&Vt.startLineNumber===si){let vn=Vt.parentIndex,Sn=0;if(vn!==-1)Sn=zt.regions.getEndLineNumber(Vt.parentIndex);else{if(zt.regions.length===0)return null;Sn=zt.regions.getEndLineNumber(zt.regions.length-1)}for(;Vt!==null;)if(Vt.regionIndex<zt.regions.length){if(Vt=zt.regions.toRegion(Vt.regionIndex+1),Vt.startLineNumber>=Sn)return null;if(Vt.parentIndex===vn)return Vt.startLineNumber}else return null}else if(zt.regions.length>0)for(Vt=zt.regions.toRegion(0);Vt!==null;){if(Vt.startLineNumber>si)return Vt.startLineNumber;Vt.regionIndex<zt.regions.length?Vt=zt.regions.toRegion(Vt.regionIndex+1):Vt=null}return null}var ue=a(9488),te=a(24314),K=a(23795);class U{constructor(zt){this._updateEventEmitter=new g.Q5,this._hasLineChanges=!1,this._foldingModel=zt,this._foldingModelListener=zt.onDidChange(Vt=>this.updateHiddenRanges()),this._hiddenRanges=[],zt.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(zt){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=zt.changes.some(Vt=>Vt.range.endLineNumber!==Vt.range.startLineNumber||(0,K.Q)(Vt.text)[0]!==0))}updateHiddenRanges(){let zt=!1,Vt=[],vn=0,Sn=0,Bn=Number.MAX_VALUE,mn=-1,Jt=this._foldingModel.regions;for(;vn<Jt.length;vn++){if(!Jt.isCollapsed(vn))continue;let En=Jt.getStartLineNumber(vn)+1,$t=Jt.getEndLineNumber(vn);Bn<=En&&$t<=mn||(!zt&&Sn<this._hiddenRanges.length&&this._hiddenRanges[Sn].startLineNumber===En&&this._hiddenRanges[Sn].endLineNumber===$t?(Vt.push(this._hiddenRanges[Sn]),Sn++):(zt=!0,Vt.push(new te.e(En,1,$t,1))),Bn=En,mn=$t)}(this._hasLineChanges||zt||Sn<this._hiddenRanges.length)&&this.applyHiddenRanges(Vt)}applyMemento(zt){if(!Array.isArray(zt)||zt.length===0)return!1;let Vt=[];for(let vn of zt){if(!vn.startLineNumber||!vn.endLineNumber)return!1;Vt.push(new te.e(vn.startLineNumber+1,1,vn.endLineNumber,1))}return this.applyHiddenRanges(Vt),!0}getMemento(){return this._hiddenRanges.map(zt=>({startLineNumber:zt.startLineNumber-1,endLineNumber:zt.endLineNumber}))}applyHiddenRanges(zt){this._hiddenRanges=zt,this._hasLineChanges=!1,this._updateEventEmitter.fire(zt)}hasRanges(){return this._hiddenRanges.length>0}isHidden(zt){return X(this._hiddenRanges,zt)!==null}adjustSelections(zt){let Vt=!1,vn=this._foldingModel.textModel,Sn=null,Bn=mn=>((!Sn||!ee(mn,Sn))&&(Sn=X(this._hiddenRanges,mn)),Sn?Sn.startLineNumber-1:null);for(let mn=0,Jt=zt.length;mn<Jt;mn++){let En=zt[mn],$t=Bn(En.startLineNumber);$t&&(En=En.setStartPosition($t,vn.getLineMaxColumn($t)),Vt=!0);let sn=Bn(En.endLineNumber);sn&&(En=En.setEndPosition(sn,vn.getLineMaxColumn(sn)),Vt=!0),zt[mn]=En}return Vt}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function ee(si,zt){return si>=zt.startLineNumber&&si<=zt.endLineNumber}function X(si,zt){let Vt=(0,ue.lG)(si,vn=>zt<vn.startLineNumber)-1;return Vt>=0&&si[Vt].endLineNumber>=zt?si[Vt]:null}var le=a(59616);const oe=5e3,Ce="indent";class ye{constructor(zt,Vt,vn){this.editorModel=zt,this.languageConfigurationService=Vt,this.maxFoldingRegions=vn,this.id=Ce}dispose(){}compute(zt,Vt){let vn=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,Sn=vn&&!!vn.offSide,Bn=vn&&vn.markers;return Promise.resolve(Te(this.editorModel,Sn,Bn,this.maxFoldingRegions,Vt))}}class ke{constructor(zt,Vt){this._notifyTooManyRegions=Vt,this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=zt}insertFirst(zt,Vt,vn){if(zt>c||Vt>c)return;let Sn=this._length;this._startIndexes[Sn]=zt,this._endIndexes[Sn]=Vt,this._length++,vn<1e3&&(this._indentOccurrences[vn]=(this._indentOccurrences[vn]||0)+1)}toIndentRanges(zt){if(this._length<=this._foldingRangesLimit){let Vt=new Uint32Array(this._length),vn=new Uint32Array(this._length);for(let Sn=this._length-1,Bn=0;Sn>=0;Sn--,Bn++)Vt[Bn]=this._startIndexes[Sn],vn[Bn]=this._endIndexes[Sn];return new M(Vt,vn)}else{this._notifyTooManyRegions&&this._notifyTooManyRegions(this._foldingRangesLimit);let Vt=0,vn=this._indentOccurrences.length;for(let Jt=0;Jt<this._indentOccurrences.length;Jt++){let En=this._indentOccurrences[Jt];if(En){if(En+Vt>this._foldingRangesLimit){vn=Jt;break}Vt+=En}}const Sn=zt.getOptions().tabSize;let Bn=new Uint32Array(this._foldingRangesLimit),mn=new Uint32Array(this._foldingRangesLimit);for(let Jt=this._length-1,En=0;Jt>=0;Jt--){let $t=this._startIndexes[Jt],sn=zt.getLineContent($t),Tn=(0,le.q)(sn,Sn);(Tn<vn||Tn===vn&&Vt++<this._foldingRangesLimit)&&(Bn[En]=$t,mn[En]=this._endIndexes[Jt],En++)}return new M(Bn,mn)}}}function Te(si,zt,Vt,vn,Sn){const Bn=si.getOptions().tabSize;vn=vn??oe;let mn=new ke(vn,Sn),Jt;Vt&&(Jt=new RegExp(`(${Vt.start.source})|(?:${Vt.end.source})`));let En=[],$t=si.getLineCount()+1;En.push({indent:-1,endAbove:$t,line:$t});for(let sn=si.getLineCount();sn>0;sn--){let Tn=si.getLineContent(sn),ri=(0,le.q)(Tn,Bn),oi=En[En.length-1];if(ri===-1){zt&&(oi.endAbove=sn);continue}let On;if(Jt&&(On=Tn.match(Jt)))if(On[1]){let Qn=En.length-1;for(;Qn>0&&En[Qn].indent!==-2;)Qn--;if(Qn>0){En.length=Qn+1,oi=En[Qn],mn.insertFirst(sn,oi.line,ri),oi.line=sn,oi.indent=ri,oi.endAbove=sn;continue}}else{En.push({indent:-2,endAbove:sn,line:sn});continue}if(oi.indent>ri){do En.pop(),oi=En[En.length-1];while(oi.indent>ri);let Qn=oi.endAbove-1;Qn-sn>=1&&mn.insertFirst(sn,Qn,ri)}oi.indent===ri?oi.endAbove=sn:En.push({indent:ri,endAbove:sn,line:sn})}return mn.toIndentRanges(si)}const ge={},we="syntax";class ze{constructor(zt,Vt,vn,Sn){this.editorModel=zt,this.providers=Vt,this.limit=Sn,this.id=we;for(const Bn of Vt)typeof Bn.onDidChange=="function"&&(this.disposables||(this.disposables=new O.SL),this.disposables.add(Bn.onDidChange(vn)))}compute(zt,Vt){return Qe(this.providers,this.editorModel,zt).then(vn=>vn?Oe(vn,this.limit,Vt):null)}dispose(){var zt;(zt=this.disposables)===null||zt===void 0||zt.dispose()}}function Qe(si,zt,Vt){let vn=null,Sn=si.map((Bn,mn)=>Promise.resolve(Bn.provideFoldingRanges(zt,ge,Vt)).then(Jt=>{if(!Vt.isCancellationRequested&&Array.isArray(Jt)){Array.isArray(vn)||(vn=[]);let En=zt.getLineCount();for(let $t of Jt)$t.start>0&&$t.end>$t.start&&$t.end<=En&&vn.push({start:$t.start,end:$t.end,rank:mn,kind:$t.kind})}},d.Cp));return Promise.all(Sn).then(Bn=>vn)}class Pe{constructor(zt,Vt){this._notifyTooManyRegions=Vt,this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=zt}add(zt,Vt,vn,Sn){if(zt>c||Vt>c)return;let Bn=this._length;this._startIndexes[Bn]=zt,this._endIndexes[Bn]=Vt,this._nestingLevels[Bn]=Sn,this._types[Bn]=vn,this._length++,Sn<30&&(this._nestingLevelCounts[Sn]=(this._nestingLevelCounts[Sn]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let zt=new Uint32Array(this._length),Vt=new Uint32Array(this._length);for(let vn=0;vn<this._length;vn++)zt[vn]=this._startIndexes[vn],Vt[vn]=this._endIndexes[vn];return new M(zt,Vt,this._types)}else{this._notifyTooManyRegions&&this._notifyTooManyRegions(this._foldingRangesLimit);let zt=0,Vt=this._nestingLevelCounts.length;for(let mn=0;mn<this._nestingLevelCounts.length;mn++){let Jt=this._nestingLevelCounts[mn];if(Jt){if(Jt+zt>this._foldingRangesLimit){Vt=mn;break}zt+=Jt}}let vn=new Uint32Array(this._foldingRangesLimit),Sn=new Uint32Array(this._foldingRangesLimit),Bn=[];for(let mn=0,Jt=0;mn<this._length;mn++){let En=this._nestingLevels[mn];(En<Vt||En===Vt&&zt++<this._foldingRangesLimit)&&(vn[Jt]=this._startIndexes[mn],Sn[Jt]=this._endIndexes[mn],Bn[Jt]=this._types[mn],Jt++)}return new M(vn,Sn,Bn)}}}function Oe(si,zt,Vt){let vn=si.sort((Jt,En)=>{let $t=Jt.start-En.start;return $t===0&&($t=Jt.rank-En.rank),$t}),Sn=new Pe(zt,Vt),Bn,mn=[];for(let Jt of vn)if(!Bn)Bn=Jt,Sn.add(Jt.start,Jt.end,Jt.kind&&Jt.kind.value,mn.length);else if(Jt.start>Bn.start)if(Jt.end<=Bn.end)mn.push(Bn),Bn=Jt,Sn.add(Jt.start,Jt.end,Jt.kind&&Jt.kind.value,mn.length);else{if(Jt.start>Bn.end){do Bn=mn.pop();while(Bn&&Jt.start>Bn.end);Bn&&mn.push(Bn),Bn=Jt}Sn.add(Jt.start,Jt.end,Jt.kind&&Jt.kind.value,mn.length)}return Sn.toIndentRanges()}const qe="init";class Je{constructor(zt,Vt,vn,Sn){if(this.editorModel=zt,this.id=qe,Vt.length){let Bn=mn=>({range:{startLineNumber:mn.startLineNumber,startColumn:0,endLineNumber:mn.endLineNumber,endColumn:zt.getLineLength(mn.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=zt.deltaDecorations([],Vt.map(Bn)),this.timeout=setTimeout(vn,Sn)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(zt){let Vt=[];if(this.decorationIds)for(let vn of this.decorationIds){let Sn=this.editorModel.getDecorationRange(vn);Sn&&Vt.push({start:Sn.startLineNumber,end:Sn.endLineNumber,rank:1})}return Promise.resolve(Oe(Vt,Number.MAX_VALUE))}}var Ne=a(63580),Fe=a(16141),ne=a(73910),Q=a(97781),ie=a(73046),xe=a(45146),be=a(59554);const Ge=(0,be.q5)("folding-expanded",ie.lA.chevronDown,(0,Ne.N)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),nt=(0,be.q5)("folding-collapsed",ie.lA.chevronRight,(0,Ne.N)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class _t{constructor(zt){this.editor=zt,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(zt,Vt){return Vt?_t.HIDDEN_RANGE_DECORATION:zt?this.showFoldingHighlights?_t.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:_t.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?_t.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:_t.EXPANDED_VISUAL_DECORATION}deltaDecorations(zt,Vt){return this.editor.deltaDecorations(zt,Vt)}changeDecorations(zt){return this.editor.changeDecorations(zt)}}_t.COLLAPSED_VISUAL_DECORATION=xe.qx.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Q.kS.asClassName(nt)}),_t.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=xe.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:Q.kS.asClassName(nt)}),_t.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=xe.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Q.kS.asClassName(Ge)}),_t.EXPANDED_VISUAL_DECORATION=xe.qx.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Q.kS.asClassName(Ge)}),_t.HIDDEN_RANGE_DECORATION=xe.qx.register({description:"folding-hidden-range-decoration",stickiness:1});var Ot=a(59422),rn=a(14603),gt=a(88191),Ue=a(84013),Ye=a(71922),dt=function(si,zt,Vt,vn){var Sn=arguments.length,Bn=Sn<3?zt:vn===null?vn=Object.getOwnPropertyDescriptor(zt,Vt):vn,mn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Bn=Reflect.decorate(si,zt,Vt,vn);else for(var Jt=si.length-1;Jt>=0;Jt--)(mn=si[Jt])&&(Bn=(Sn<3?mn(Bn):Sn>3?mn(zt,Vt,Bn):mn(zt,Vt))||Bn);return Sn>3&&Bn&&Object.defineProperty(zt,Vt,Bn),Bn},Re=function(si,zt){return function(Vt,vn){zt(Vt,vn,si)}};const Ve=new Fe.uy("foldingEnabled",!1);let at=class sS extends O.JT{constructor(zt,Vt,vn,Sn,Bn,mn){super();this.contextKeyService=Vt,this.languageConfigurationService=vn,this.languageFeaturesService=mn,this._tooManyRegionsNotified=!1,this.localToDispose=this._register(new O.SL),this.editor=zt;const Jt=this.editor.getOptions();this._isEnabled=Jt.get(37),this._useFoldingProviders=Jt.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=Jt.get(42),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=Jt.get(40),this._maxFoldingRegions=Jt.get(41),this.updateDebounceInfo=Bn.for(mn.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new _t(zt),this.foldingDecorationProvider.autoHideFoldingControls=Jt.get(99)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=Jt.get(39),this.foldingEnabled=Ve.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._notifyTooManyRegions=En=>{this._tooManyRegionsNotified||(Sn.notify({severity:rn.Z.Warning,sticky:!0,message:Ne.N("maximum fold ranges",`The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?["editor.foldingMaximumRegions"]) to enable more.`,En)}),this._tooManyRegionsNotified=!0)},this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(En=>{if(En.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),En.hasChanged(41)&&(this._maxFoldingRegions=this.editor.getOptions().get(41),this._tooManyRegionsNotified=!1,this.onModelChanged()),En.hasChanged(99)||En.hasChanged(39)){const $t=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=$t.get(99)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=$t.get(39),this.triggerFoldingModelChanged()}En.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),En.hasChanged(42)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(42)),En.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(zt){return zt.getContribution(sS.ID)}saveViewState(){let zt=this.editor.getModel();if(!zt||!this._isEnabled||zt.isTooLargeForTokenization())return{};if(this.foldingModel){let Vt=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),vn=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:Vt,lineCount:zt.getLineCount(),provider:vn,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(zt){let Vt=this.editor.getModel();if(!Vt||!this._isEnabled||Vt.isTooLargeForTokenization()||!this.hiddenRangeModel||!zt||zt.lineCount!==Vt.getLineCount()||(this._currentModelHasFoldedImports=!!zt.foldedImports,!zt.collapsedRegions))return;(zt.provider===we||zt.provider===qe)&&(this.foldingStateMemento=zt);const vn=zt.collapsedRegions;if(this.hiddenRangeModel.applyMemento(vn)){const Sn=this.getFoldingModel();Sn&&Sn.then(Bn=>{if(Bn){this._restoringViewState=!0;try{Bn.applyMemento(vn)}finally{this._restoringViewState=!1}}}).then(void 0,d.dL)}}onModelChanged(){this.localToDispose.clear();let zt=this.editor.getModel();!this._isEnabled||!zt||zt.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new _(zt,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new U(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(Vt=>this.onHiddenRangesChanges(Vt))),this.updateScheduler=new p.vp(this.updateDebounceInfo.get(zt)),this.cursorChangedScheduler=new p.pY(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(Vt=>this.onDidChangeModelContent(Vt))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(Vt=>this.onEditorMouseDown(Vt))),this.localToDispose.add(this.editor.onMouseUp(Vt=>this.onEditorMouseUp(Vt))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(zt){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new ye(zt,this.languageConfigurationService,this._maxFoldingRegions),this._useFoldingProviders&&this.foldingModel){let Vt=this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);if(Vt.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new Je(zt,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);Vt.length>0&&(this.rangeProvider=new ze(zt,Vt,()=>this.triggerFoldingModelChanged(),this._maxFoldingRegions))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(zt){var Vt;(Vt=this.hiddenRangeModel)===null||Vt===void 0||Vt.notifyChangeModelContent(zt),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const zt=this.foldingModel;if(!zt)return null;const Vt=new Ue.G(!0),vn=this.getRangeProvider(zt.textModel);let Sn=this.foldingRegionPromise=(0,p.PG)(Bn=>vn.compute(Bn,this._notifyTooManyRegions));return Sn.then(Bn=>{if(Bn&&Sn===this.foldingRegionPromise){let mn;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const sn=Bn.setCollapsedAllOfType(x.AD.Imports.value,!0);sn&&(mn=T.Z.capture(this.editor),this._currentModelHasFoldedImports=sn)}let Jt=this.editor.getSelections(),En=Jt?Jt.map(sn=>sn.startLineNumber):[];zt.update(Bn,En),mn&&mn.restore(this.editor);const $t=this.updateDebounceInfo.update(zt.textModel,Vt.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=$t)}return zt})}).then(void 0,zt=>((0,d.dL)(zt),null)))}onHiddenRangesChanges(zt){if(this.hiddenRangeModel&&zt.length&&!this._restoringViewState){let Vt=this.editor.getSelections();Vt&&this.hiddenRangeModel.adjustSelections(Vt)&&this.editor.setSelections(Vt)}this.editor.setHiddenAreas(zt)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const zt=this.getFoldingModel();!zt||zt.then(Vt=>{if(Vt){let vn=this.editor.getSelections();if(vn&&vn.length>0){let Sn=[];for(let Bn of vn){let mn=Bn.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(mn)&&Sn.push(...Vt.getAllRegionsAtLine(mn,Jt=>Jt.isCollapsed&&mn>Jt.startLineNumber))}Sn.length&&(Vt.toggleCollapseState(Sn),this.reveal(vn[0].getPosition()))}}}).then(void 0,d.dL)}onEditorMouseDown(zt){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!zt.target||!zt.target.range||!zt.event.leftButton&&!zt.event.middleButton)return;const Vt=zt.target.range;let vn=!1;switch(zt.target.type){case 4:{const Sn=zt.target.detail,Bn=zt.target.element.offsetLeft;if(Sn.offsetX-Bn<5)return;vn=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!zt.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let Sn=this.editor.getModel();if(Sn&&Vt.startColumn===Sn.getLineMaxColumn(Vt.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:Vt.startLineNumber,iconClicked:vn}}onEditorMouseUp(zt){const Vt=this.getFoldingModel();if(!Vt||!this.mouseDownInfo||!zt.target)return;let vn=this.mouseDownInfo.lineNumber,Sn=this.mouseDownInfo.iconClicked,Bn=zt.target.range;if(!(!Bn||Bn.startLineNumber!==vn)){if(Sn){if(zt.target.type!==4)return}else{let mn=this.editor.getModel();if(!mn||Bn.startColumn!==mn.getLineMaxColumn(vn))return}Vt.then(mn=>{if(mn){let Jt=mn.getRegionAtLine(vn);if(Jt&&Jt.startLineNumber===vn){let En=Jt.isCollapsed;if(Sn||En){let $t=zt.event.altKey,sn=[];if($t){let Tn=oi=>!oi.containedBy(Jt)&&!Jt.containedBy(oi),ri=mn.getRegionsInside(null,Tn);for(const oi of ri)oi.isCollapsed&&sn.push(oi);sn.length===0&&(sn=ri)}else{let Tn=zt.event.middleButton||zt.event.shiftKey;if(Tn)for(const ri of mn.getRegionsInside(Jt))ri.isCollapsed===En&&sn.push(ri);(En||!Tn||sn.length===0)&&sn.push(Jt)}mn.toggleCollapseState(sn),this.reveal({lineNumber:vn,column:1})}}}}).then(void 0,d.dL)}}reveal(zt){this.editor.revealPositionInCenterIfOutsideViewport(zt,0)}};at.ID="editor.contrib.folding",at=dt([Re(1,Fe.i6),Re(2,v.c_),Re(3,Ot.lT),Re(4,gt.A),Re(5,Ye.p)],at);class pt extends B.R6{runEditorCommand(zt,Vt,vn){const Sn=zt.get(v.c_),Bn=at.get(Vt);if(!Bn)return;const mn=Bn.getFoldingModel();if(mn)return this.reportTelemetry(zt,Vt),mn.then(Jt=>{if(Jt){this.invoke(Bn,Jt,Vt,vn,Sn);const En=Vt.getSelection();En&&Bn.reveal(En.getStartPosition())}})}getSelectedLines(zt){let Vt=zt.getSelections();return Vt?Vt.map(vn=>vn.startLineNumber):[]}getLineNumbers(zt,Vt){return zt&&zt.selectionLines?zt.selectionLines.map(vn=>vn+1):this.getSelectedLines(Vt)}run(zt,Vt){}}function Be(si){if(!j.o8(si)){if(!j.Kn(si))return!1;const zt=si;if(!j.o8(zt.levels)&&!j.hj(zt.levels)||!j.o8(zt.direction)&&!j.HD(zt.direction)||!j.o8(zt.selectionLines)&&(!j.kJ(zt.selectionLines)||!zt.selectionLines.every(j.hj)))return!1}return!0}class je extends pt{constructor(){super({id:"editor.unfold",label:Ne.N("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:2048|1024|89,mac:{primary:2048|512|89},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Be,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(zt,Vt,vn,Sn){let Bn=Sn&&Sn.levels||1,mn=this.getLineNumbers(Sn,vn);Sn&&Sn.direction==="up"?b(Vt,!1,Bn,mn):N(Vt,!1,Bn,mn)}}class Et extends pt{constructor(){super({id:"editor.unfoldRecursively",label:Ne.N("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|89),weight:100}})}invoke(zt,Vt,vn,Sn){N(Vt,!1,Number.MAX_VALUE,this.getSelectedLines(vn))}}class Dt extends pt{constructor(){super({id:"editor.fold",label:Ne.N("foldAction.label","Fold"),alias:"Fold",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:2048|1024|87,mac:{primary:2048|512|87},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Be,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(zt,Vt,vn,Sn){let Bn=this.getLineNumbers(Sn,vn);const mn=Sn&&Sn.levels,Jt=Sn&&Sn.direction;typeof mn!="number"&&typeof Jt!="string"?I(Vt,!0,Bn):Jt==="up"?b(Vt,!0,mn||1,Bn):N(Vt,!0,mn||1,Bn)}}class Xe extends pt{constructor(){super({id:"editor.toggleFold",label:Ne.N("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|42),weight:100}})}invoke(zt,Vt,vn){let Sn=this.getSelectedLines(vn);L(Vt,1,Sn)}}class ft extends pt{constructor(){super({id:"editor.foldRecursively",label:Ne.N("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|87),weight:100}})}invoke(zt,Vt,vn){let Sn=this.getSelectedLines(vn);N(Vt,!0,Number.MAX_VALUE,Sn)}}class an extends pt{constructor(){super({id:"editor.foldAllBlockComments",label:Ne.N("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|85),weight:100}})}invoke(zt,Vt,vn,Sn,Bn){if(Vt.regions.hasTypes())re(Vt,x.AD.Comment.value,!0);else{const mn=vn.getModel();if(!mn)return;const Jt=Bn.getLanguageConfiguration(mn.getLanguageId()).comments;if(Jt&&Jt.blockCommentStartToken){let En=new RegExp("^\\s*"+(0,S.ec)(Jt.blockCommentStartToken));q(Vt,En,!0)}}}}class An extends pt{constructor(){super({id:"editor.foldAllMarkerRegions",label:Ne.N("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|29),weight:100}})}invoke(zt,Vt,vn,Sn,Bn){if(Vt.regions.hasTypes())re(Vt,x.AD.Region.value,!0);else{const mn=vn.getModel();if(!mn)return;const Jt=Bn.getLanguageConfiguration(mn.getLanguageId()).foldingRules;if(Jt&&Jt.markers&&Jt.markers.start){let En=new RegExp(Jt.markers.start);q(Vt,En,!0)}}}}class Fn extends pt{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:Ne.N("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|30),weight:100}})}invoke(zt,Vt,vn,Sn,Bn){if(Vt.regions.hasTypes())re(Vt,x.AD.Region.value,!1);else{const mn=vn.getModel();if(!mn)return;const Jt=Bn.getLanguageConfiguration(mn.getLanguageId()).foldingRules;if(Jt&&Jt.markers&&Jt.markers.start){let En=new RegExp(Jt.markers.start);q(Vt,En,!1)}}}}class Ht extends pt{constructor(){super({id:"editor.foldAllExcept",label:Ne.N("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|83),weight:100}})}invoke(zt,Vt,vn){let Sn=this.getSelectedLines(vn);W(Vt,!0,Sn)}}class Kt extends pt{constructor(){super({id:"editor.unfoldAllExcept",label:Ne.N("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|81),weight:100}})}invoke(zt,Vt,vn){let Sn=this.getSelectedLines(vn);W(Vt,!1,Sn)}}class pn extends pt{constructor(){super({id:"editor.foldAll",label:Ne.N("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|21),weight:100}})}invoke(zt,Vt,vn){N(Vt,!0)}}class Vn extends pt{constructor(){super({id:"editor.unfoldAll",label:Ne.N("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|40),weight:100}})}invoke(zt,Vt,vn){N(Vt,!1)}}class kt extends pt{getFoldingLevel(){return parseInt(this.id.substr(kt.ID_PREFIX.length))}invoke(zt,Vt,vn){k(Vt,this.getFoldingLevel(),!0,this.getSelectedLines(vn))}}kt.ID_PREFIX="editor.foldLevel",kt.ID=si=>kt.ID_PREFIX+si;class Zt extends pt{constructor(){super({id:"editor.gotoParentFold",label:Ne.N("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,weight:100}})}invoke(zt,Vt,vn){let Sn=this.getSelectedLines(vn);if(Sn.length>0){let Bn=de(Sn[0],Vt);Bn!==null&&vn.setSelection({startLineNumber:Bn,startColumn:1,endLineNumber:Bn,endColumn:1})}}}class wn extends pt{constructor(){super({id:"editor.gotoPreviousFold",label:Ne.N("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,weight:100}})}invoke(zt,Vt,vn){let Sn=this.getSelectedLines(vn);if(Sn.length>0){let Bn=pe(Sn[0],Vt);Bn!==null&&vn.setSelection({startLineNumber:Bn,startColumn:1,endLineNumber:Bn,endColumn:1})}}}class Pi extends pt{constructor(){super({id:"editor.gotoNextFold",label:Ne.N("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,weight:100}})}invoke(zt,Vt,vn){let Sn=this.getSelectedLines(vn);if(Sn.length>0){let Bn=ae(Sn[0],Vt);Bn!==null&&vn.setSelection({startLineNumber:Bn,startColumn:1,endLineNumber:Bn,endColumn:1})}}}(0,B._K)(at.ID,at),(0,B.Qr)(je),(0,B.Qr)(Et),(0,B.Qr)(Dt),(0,B.Qr)(ft),(0,B.Qr)(pn),(0,B.Qr)(Vn),(0,B.Qr)(an),(0,B.Qr)(An),(0,B.Qr)(Fn),(0,B.Qr)(Ht),(0,B.Qr)(Kt),(0,B.Qr)(Xe),(0,B.Qr)(Zt),(0,B.Qr)(wn),(0,B.Qr)(Pi);for(let si=1;si<=7;si++)(0,B.QG)(new kt({id:kt.ID(si),label:Ne.N("foldLevelAction.label","Fold Level {0}",si),alias:`Fold Level ${si}`,precondition:Ve,kbOpts:{kbExpr:F.u.editorTextFocus,primary:(0,z.gx)(2048|41,2048|21+si),weight:100}}));const Fi=(0,ne.P6G)("editor.foldBackground",{light:(0,ne.ZnX)(ne.hEj,.3),dark:(0,ne.ZnX)(ne.hEj,.3),hc:null},Ne.N("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),Ji=(0,ne.P6G)("editorGutter.foldingControlForeground",{dark:ne.XZx,light:ne.XZx,hc:ne.XZx},Ne.N("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));(0,Q.Ic)((si,zt)=>{const Vt=si.getColor(Fi);Vt&&zt.addRule(`.monaco-editor .folded-background { background-color: ${Vt}; }`);const vn=si.getColor(Ji);vn&&zt.addRule(`
		.monaco-editor .cldr${Q.kS.asCSSSelector(Ge)},
		.monaco-editor .cldr${Q.kS.asCSSSelector(nt)} {
			color: ${vn} !important;
		}
		`)})},44125:function(Tt,me,a){"use strict";a.r(me);var p=a(16830),d=a(82334),z=a(63580);class O extends p.R6{constructor(){super({id:"editor.action.fontZoomIn",label:z.N("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(B,F){d.C.setZoomLevel(d.C.getZoomLevel()+1)}}class S extends p.R6{constructor(){super({id:"editor.action.fontZoomOut",label:z.N("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(B,F){d.C.setZoomLevel(d.C.getZoomLevel()-1)}}class j extends p.R6{constructor(){super({id:"editor.action.fontZoomReset",label:z.N("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(B,F){d.C.setZoomLevel(0)}}(0,p.Qr)(O),(0,p.Qr)(S),(0,p.Qr)(j)},58823:function(Tt,me,a){"use strict";a.d(me,{xC:function(){return q},Zg:function(){return k},x$:function(){return re},Qq:function(){return pe},Qs:function(){return K}});var p=a(85152),d=a(9488),z=a(71050),O=a(17301),S=a(53725),j=a(91741),T=a(98401),B=a(70666),F=a(16467),x=a(65520),v=a(50187),g=a(24314),D=a(3860),c=a(85215),C=a(88216),M=a(35120),E=a(63580),_=a(94565);class L{constructor(ee){this.value=ee,this._lower=ee.toLowerCase()}static toKey(ee){return typeof ee=="string"?ee.toLowerCase():ee._lower}}var N=a(72065),b=a(71922),I=function(U,ee,X,le){function oe(Ce){return Ce instanceof X?Ce:new X(function(ye){ye(Ce)})}return new(X||(X=Promise))(function(Ce,ye){function ke(we){try{ge(le.next(we))}catch(ze){ye(ze)}}function Te(we){try{ge(le.throw(we))}catch(ze){ye(ze)}}function ge(we){we.done?Ce(we.value):oe(we.value).then(ke,Te)}ge((le=le.apply(U,ee||[])).next())})};function k(U){if(U=U.filter(oe=>oe.range),!U.length)return;let{range:ee}=U[0];for(let oe=1;oe<U.length;oe++)ee=g.e.plusRange(ee,U[oe].range);const{startLineNumber:X,endLineNumber:le}=ee;X===le?U.length===1?(0,p.Z9)(E.N("hint11","Made 1 formatting edit on line {0}",X)):(0,p.Z9)(E.N("hintn1","Made {0} formatting edits on line {1}",U.length,X)):U.length===1?(0,p.Z9)(E.N("hint1n","Made 1 formatting edit between lines {0} and {1}",X,le)):(0,p.Z9)(E.N("hintnn","Made {0} formatting edits between lines {1} and {2}",U.length,X,le))}function W(U,ee,X){const le=[],oe=new Set,Ce=U.ordered(X);for(const ke of Ce)le.push(ke),ke.extensionId&&oe.add(L.toKey(ke.extensionId));const ye=ee.ordered(X);for(const ke of ye){if(ke.extensionId){if(oe.has(L.toKey(ke.extensionId)))continue;oe.add(L.toKey(ke.extensionId))}le.push({displayName:ke.displayName,extensionId:ke.extensionId,provideDocumentFormattingEdits(Te,ge,we){return ke.provideDocumentRangeFormattingEdits(Te,Te.getFullModelRange(),ge,we)}})}return le}class q{static setFormatterSelector(ee){return{dispose:q._selectors.unshift(ee)}}static select(ee,X,le){return I(this,void 0,void 0,function*(){if(ee.length===0)return;const oe=S.$.first(q._selectors);if(oe)return yield oe(ee,X,le)})}}q._selectors=new j.S;function re(U,ee,X,le,oe,Ce){return I(this,void 0,void 0,function*(){const ye=U.get(N.TG),{documentRangeFormattingEditProvider:ke}=U.get(b.p),Te=(0,x.CL)(ee)?ee.getModel():ee,ge=ke.ordered(Te),we=yield q.select(ge,Te,le);we&&(oe.report(we),yield ye.invokeFunction(de,we,ee,X,Ce))})}function de(U,ee,X,le,oe){return I(this,void 0,void 0,function*(){const Ce=U.get(c.p);let ye,ke;(0,x.CL)(X)?(ye=X.getModel(),ke=new F.Dl(X,1|4,void 0,oe)):(ye=X,ke=new F.YQ(X,oe));let Te=[],ge=0;for(let Oe of(0,d._2)(le).sort(g.e.compareRangesUsingStarts))ge>0&&g.e.areIntersectingOrTouching(Te[ge-1],Oe)?Te[ge-1]=g.e.fromPositions(Te[ge-1].getStartPosition(),Oe.getEndPosition()):ge=Te.push(Oe);const we=Oe=>I(this,void 0,void 0,function*(){return(yield ee.provideDocumentRangeFormattingEdits(ye,Oe,ye.getFormattingOptions(),ke.token))||[]}),ze=(Oe,qe)=>{if(!Oe.length||!qe.length)return!1;const Je=Oe.reduce((Ne,Fe)=>g.e.plusRange(Ne,Fe.range),Oe[0].range);if(!qe.some(Ne=>g.e.intersectRanges(Je,Ne.range)))return!1;for(let Ne of Oe)for(let Fe of qe)if(g.e.intersectRanges(Ne.range,Fe.range))return!0;return!1},Qe=[],Pe=[];try{for(let Oe of Te){if(ke.token.isCancellationRequested)return!0;Pe.push(yield we(Oe))}for(let Oe=0;Oe<Te.length;++Oe)for(let qe=Oe+1;qe<Te.length;++qe){if(ke.token.isCancellationRequested)return!0;if(ze(Pe[Oe],Pe[qe])){const Je=g.e.plusRange(Te[Oe],Te[qe]),Ne=yield we(Je);Te.splice(qe,1),Te.splice(Oe,1),Te.push(Je),Pe.splice(qe,1),Pe.splice(Oe,1),Pe.push(Ne),Oe=0,qe=0}}for(let Oe of Pe){if(ke.token.isCancellationRequested)return!0;const qe=yield Ce.computeMoreMinimalEdits(ye.uri,Oe);qe&&Qe.push(...qe)}}finally{ke.dispose()}if(Qe.length===0)return!1;if((0,x.CL)(X))M.V.execute(X,Qe,!0),k(Qe),X.revealPositionInCenterIfOutsideViewport(X.getPosition(),1);else{const[{range:Oe}]=Qe,qe=new D.Y(Oe.startLineNumber,Oe.startColumn,Oe.endLineNumber,Oe.endColumn);ye.pushEditOperations([qe],Qe.map(Je=>({text:Je.text,range:g.e.lift(Je.range),forceMoveMarkers:!0})),Je=>{for(const{range:Ne}of Je)if(g.e.areIntersectingOrTouching(Ne,qe))return[new D.Y(Ne.startLineNumber,Ne.startColumn,Ne.endLineNumber,Ne.endColumn)];return null})}return!0})}function pe(U,ee,X,le,oe){return I(this,void 0,void 0,function*(){const Ce=U.get(N.TG),ye=U.get(b.p),ke=(0,x.CL)(ee)?ee.getModel():ee,Te=W(ye.documentFormattingEditProvider,ye.documentRangeFormattingEditProvider,ke),ge=yield q.select(Te,ke,X);ge&&(le.report(ge),yield Ce.invokeFunction(ae,ge,ee,X,oe))})}function ae(U,ee,X,le,oe){return I(this,void 0,void 0,function*(){const Ce=U.get(c.p);let ye,ke;(0,x.CL)(X)?(ye=X.getModel(),ke=new F.Dl(X,1|4,void 0,oe)):(ye=X,ke=new F.YQ(X,oe));let Te;try{const ge=yield ee.provideDocumentFormattingEdits(ye,ye.getFormattingOptions(),ke.token);if(Te=yield Ce.computeMoreMinimalEdits(ye.uri,ge),ke.token.isCancellationRequested)return!0}finally{ke.dispose()}if(!Te||Te.length===0)return!1;if((0,x.CL)(X))M.V.execute(X,Te,le!==2),le!==2&&(k(Te),X.revealPositionInCenterIfOutsideViewport(X.getPosition(),1));else{const[{range:ge}]=Te,we=new D.Y(ge.startLineNumber,ge.startColumn,ge.endLineNumber,ge.endColumn);ye.pushEditOperations([we],Te.map(ze=>({text:ze.text,range:g.e.lift(ze.range),forceMoveMarkers:!0})),ze=>{for(const{range:Qe}of ze)if(g.e.areIntersectingOrTouching(Qe,we))return[new D.Y(Qe.startLineNumber,Qe.startColumn,Qe.endLineNumber,Qe.endColumn)];return null})}return!0})}function ue(U,ee,X,le,oe,Ce){return I(this,void 0,void 0,function*(){const ye=ee.documentRangeFormattingEditProvider.ordered(X);for(const ke of ye){let Te=yield Promise.resolve(ke.provideDocumentRangeFormattingEdits(X,le,oe,Ce)).catch(O.Cp);if((0,d.Of)(Te))return yield U.computeMoreMinimalEdits(X.uri,Te)}})}function te(U,ee,X,le,oe){return I(this,void 0,void 0,function*(){const Ce=W(ee.documentFormattingEditProvider,ee.documentRangeFormattingEditProvider,X);for(const ye of Ce){let ke=yield Promise.resolve(ye.provideDocumentFormattingEdits(X,le,oe)).catch(O.Cp);if((0,d.Of)(ke))return yield U.computeMoreMinimalEdits(X.uri,ke)}})}function K(U,ee,X,le,oe,Ce,ye){const ke=ee.onTypeFormattingEditProvider.ordered(X);return ke.length===0||ke[0].autoFormatTriggerCharacters.indexOf(oe)<0?Promise.resolve(void 0):Promise.resolve(ke[0].provideOnTypeFormattingEdits(X,le,oe,Ce,ye)).catch(O.Cp).then(Te=>U.computeMoreMinimalEdits(X.uri,Te))}_.P0.registerCommand("_executeFormatRangeProvider",function(U,...ee){return I(this,void 0,void 0,function*(){const[X,le,oe]=ee;(0,T.p_)(B.o.isUri(X)),(0,T.p_)(g.e.isIRange(le));const Ce=U.get(C.S),ye=U.get(c.p),ke=U.get(b.p),Te=yield Ce.createModelReference(X);try{return ue(ye,ke,Te.object.textEditorModel,g.e.lift(le),oe,z.T.None)}finally{Te.dispose()}})}),_.P0.registerCommand("_executeFormatDocumentProvider",function(U,...ee){return I(this,void 0,void 0,function*(){const[X,le]=ee;(0,T.p_)(B.o.isUri(X));const oe=U.get(C.S),Ce=U.get(c.p),ye=U.get(b.p),ke=yield oe.createModelReference(X);try{return te(Ce,ye,ke.object.textEditorModel,le,z.T.None)}finally{ke.dispose()}})}),_.P0.registerCommand("_executeFormatOnTypeProvider",function(U,...ee){return I(this,void 0,void 0,function*(){const[X,le,oe,Ce]=ee;(0,T.p_)(B.o.isUri(X)),(0,T.p_)(v.L.isIPosition(le)),(0,T.p_)(typeof oe=="string");const ye=U.get(C.S),ke=U.get(c.p),Te=U.get(b.p),ge=yield ye.createModelReference(X);try{return K(ke,Te,ge.object.textEditorModel,v.L.lift(le),oe,Ce,z.T.None)}finally{ge.dispose()}})})},61097:function(Tt,me,a){"use strict";a.r(me);var p=a(9488),d=a(71050),z=a(17301),O=a(22258),S=a(9917),j=a(16830),T=a(11640),B=a(44906),F=a(24314),x=a(29102),v=a(85215),g=a(71922),D=a(58823),c=a(35120),C=a(63580),M=a(94565),E=a(16141),_=a(72065),L=a(90535),N=function(de,pe,ae,ue){var te=arguments.length,K=te<3?pe:ue===null?ue=Object.getOwnPropertyDescriptor(pe,ae):ue,U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(de,pe,ae,ue);else for(var ee=de.length-1;ee>=0;ee--)(U=de[ee])&&(K=(te<3?U(K):te>3?U(pe,ae,K):U(pe,ae))||K);return te>3&&K&&Object.defineProperty(pe,ae,K),K},b=function(de,pe){return function(ae,ue){pe(ae,ue,de)}},I=function(de,pe,ae,ue){function te(K){return K instanceof ae?K:new ae(function(U){U(K)})}return new(ae||(ae=Promise))(function(K,U){function ee(oe){try{le(ue.next(oe))}catch(Ce){U(Ce)}}function X(oe){try{le(ue.throw(oe))}catch(Ce){U(Ce)}}function le(oe){oe.done?K(oe.value):te(oe.value).then(ee,X)}le((ue=ue.apply(de,pe||[])).next())})};let k=class{constructor(pe,ae,ue){this._editor=pe,this._languageFeaturesService=ae,this._workerService=ue,this._disposables=new S.SL,this._sessionDisposables=new S.SL,this._disposables.add(ae.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(pe.onDidChangeModel(()=>this._update())),this._disposables.add(pe.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(pe.onDidChangeConfiguration(te=>{te.hasChanged(49)&&this._update()}))}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(49)||!this._editor.hasModel())return;const pe=this._editor.getModel(),[ae]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(pe);if(!ae||!ae.autoFormatTriggerCharacters)return;let ue=new B.q;for(let te of ae.autoFormatTriggerCharacters)ue.add(te.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(te=>{let K=te.charCodeAt(te.length-1);ue.has(K)&&this._trigger(String.fromCharCode(K))}))}_trigger(pe){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const ae=this._editor.getModel(),ue=this._editor.getPosition(),te=new d.A,K=this._editor.onDidChangeModelContent(U=>{if(U.isFlush){te.cancel(),K.dispose();return}for(let ee=0,X=U.changes.length;ee<X;ee++)if(U.changes[ee].range.endLineNumber<=ue.lineNumber){te.cancel(),K.dispose();return}});(0,D.Qs)(this._workerService,this._languageFeaturesService,ae,ue,pe,ae.getFormattingOptions(),te.token).then(U=>{te.token.isCancellationRequested||(0,p.Of)(U)&&(c.V.execute(this._editor,U,!0),(0,D.Zg)(U))}).finally(()=>{K.dispose()})}};k.ID="editor.contrib.autoFormat",k=N([b(1,g.p),b(2,v.p)],k);let W=class{constructor(pe,ae,ue){this.editor=pe,this._languageFeaturesService=ae,this._instantiationService=ue,this._callOnDispose=new S.SL,this._callOnModel=new S.SL,this._callOnDispose.add(pe.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(pe.onDidChangeModel(()=>this._update())),this._callOnDispose.add(pe.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(ae.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),!!this.editor.getOption(48)&&(!this.editor.hasModel()||!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())||this._callOnModel.add(this.editor.onDidPaste(({range:pe})=>this._trigger(pe))))}_trigger(pe){!this.editor.hasModel()||this.editor.getSelections().length>1||this._instantiationService.invokeFunction(D.x$,this.editor,pe,2,L.Ex.None,d.T.None).catch(z.dL)}};W.ID="editor.contrib.formatOnPaste",W=N([b(1,g.p),b(2,_.TG)],W);class q extends j.R6{constructor(){super({id:"editor.action.formatDocument",label:C.N("formatDocument.label","Format Document"),alias:"Format Document",precondition:E.Ao.and(x.u.notInCompositeEditor,x.u.writable,x.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:x.u.editorTextFocus,primary:1024|512|36,linux:{primary:2048|1024|39},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(pe,ae){return I(this,void 0,void 0,function*(){if(ae.hasModel()){const ue=pe.get(_.TG);yield pe.get(L.ek).showWhile(ue.invokeFunction(D.Qq,ae,1,L.Ex.None,d.T.None),250)}})}}class re extends j.R6{constructor(){super({id:"editor.action.formatSelection",label:C.N("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:E.Ao.and(x.u.writable,x.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:x.u.editorTextFocus,primary:(0,O.gx)(2048|41,2048|36),weight:100},contextMenuOpts:{when:x.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(pe,ae){return I(this,void 0,void 0,function*(){if(!ae.hasModel())return;const ue=pe.get(_.TG),te=ae.getModel(),K=ae.getSelections().map(ee=>ee.isEmpty()?new F.e(ee.startLineNumber,1,ee.startLineNumber,te.getLineMaxColumn(ee.startLineNumber)):ee);yield pe.get(L.ek).showWhile(ue.invokeFunction(D.x$,ae,K,1,L.Ex.None,d.T.None),250)})}}(0,j._K)(k.ID,k),(0,j._K)(W.ID,W),(0,j.Qr)(q),(0,j.Qr)(re),M.P0.registerCommand("editor.action.format",de=>I(void 0,void 0,void 0,function*(){const pe=de.get(T.$).getFocusedCodeEditor();if(!pe||!pe.hasModel())return;const ae=de.get(M.Hy);pe.getSelection().isEmpty()?yield ae.executeCommand("editor.action.formatDocument"):yield ae.executeCommand("editor.action.formatSelection")}))},35120:function(Tt,me,a){"use strict";a.d(me,{V:function(){return z}});var p=a(69386),d=a(24314);class z{static _handleEolEdits(S,j){let T,B=[];for(let F of j)typeof F.eol=="number"&&(T=F.eol),F.range&&typeof F.text=="string"&&B.push(F);return typeof T=="number"&&S.hasModel()&&S.getModel().pushEOL(T),B}static _isFullModelReplaceEdit(S,j){if(!S.hasModel())return!1;const T=S.getModel(),B=T.validateRange(j.range);return T.getFullModelRange().equalsRange(B)}static execute(S,j,T){T&&S.pushUndoStop();const B=z._handleEolEdits(S,j);B.length===1&&z._isFullModelReplaceEdit(S,B[0])?S.executeEdits("formatEditsCommand",B.map(F=>p.h.replace(d.e.lift(F.range),F.text))):S.executeEdits("formatEditsCommand",B.map(F=>p.h.replaceMove(d.e.lift(F.range),F.text))),T&&S.pushUndoStop()}}},40874:function(Tt,me,a){"use strict";a.r(me),a.d(me,{MarkerController:function(){return Ge},NextMarkerAction:function(){return _t}});var p=a(73046),d=a(9917),z=a(16830),O=a(11640),S=a(50187),j=a(24314),T=a(29102),B=a(9488),F=a(4669),x=a(91741),v=a(25924),g=a(70666),D=a(65026),c=a(72065),C=a(98674),M=a(33108),E=function(dt,Re,Ve,at){var pt=arguments.length,Be=pt<3?Re:at===null?at=Object.getOwnPropertyDescriptor(Re,Ve):at,je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Be=Reflect.decorate(dt,Re,Ve,at);else for(var Et=dt.length-1;Et>=0;Et--)(je=dt[Et])&&(Be=(pt<3?je(Be):pt>3?je(Re,Ve,Be):je(Re,Ve))||Be);return pt>3&&Be&&Object.defineProperty(Re,Ve,Be),Be},_=function(dt,Re){return function(Ve,at){Re(Ve,at,dt)}};class L{constructor(Re,Ve,at){this.marker=Re,this.index=Ve,this.total=at}}let N=class{constructor(Re,Ve,at){this._markerService=Ve,this._configService=at,this._onDidChange=new F.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new d.SL,this._markers=[],this._nextIdx=-1,g.o.isUri(Re)?this._resourceFilter=Et=>Et.toString()===Re.toString():Re&&(this._resourceFilter=Re);const pt=this._configService.getValue("problems.sortOrder"),Be=(Et,Dt)=>{let Xe=(0,v.qu)(Et.resource.toString(),Dt.resource.toString());return Xe===0&&(pt==="position"?Xe=j.e.compareRangesUsingStarts(Et,Dt)||C.ZL.compare(Et.severity,Dt.severity):Xe=C.ZL.compare(Et.severity,Dt.severity)||j.e.compareRangesUsingStarts(Et,Dt)),Xe},je=()=>{this._markers=this._markerService.read({resource:g.o.isUri(Re)?Re:void 0,severities:C.ZL.Error|C.ZL.Warning|C.ZL.Info}),typeof Re=="function"&&(this._markers=this._markers.filter(Et=>this._resourceFilter(Et.resource))),this._markers.sort(Be)};je(),this._dispoables.add(Ve.onMarkerChanged(Et=>{(!this._resourceFilter||Et.some(Dt=>this._resourceFilter(Dt)))&&(je(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(Re){return!this._resourceFilter&&!Re?!0:!this._resourceFilter||!Re?!1:this._resourceFilter(Re)}get selected(){const Re=this._markers[this._nextIdx];return Re&&new L(Re,this._nextIdx+1,this._markers.length)}_initIdx(Re,Ve,at){let pt=!1,Be=this._markers.findIndex(je=>je.resource.toString()===Re.uri.toString());Be<0&&(Be=(0,B.ry)(this._markers,{resource:Re.uri},(je,Et)=>(0,v.qu)(je.resource.toString(),Et.resource.toString())),Be<0&&(Be=~Be));for(let je=Be;je<this._markers.length;je++){let Et=j.e.lift(this._markers[je]);if(Et.isEmpty()){const Dt=Re.getWordAtPosition(Et.getStartPosition());Dt&&(Et=new j.e(Et.startLineNumber,Dt.startColumn,Et.startLineNumber,Dt.endColumn))}if(Ve&&(Et.containsPosition(Ve)||Ve.isBeforeOrEqual(Et.getStartPosition()))){this._nextIdx=je,pt=!0;break}if(this._markers[je].resource.toString()!==Re.uri.toString())break}pt||(this._nextIdx=at?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(Re,Ve,at){if(this._markers.length===0)return!1;let pt=this._nextIdx;return this._nextIdx===-1?this._initIdx(Ve,at,Re):Re?this._nextIdx=(this._nextIdx+1)%this._markers.length:Re||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),pt!==this._nextIdx}find(Re,Ve){let at=this._markers.findIndex(pt=>pt.resource.toString()===Re.toString());if(!(at<0)){for(;at<this._markers.length;at++)if(j.e.containsPosition(this._markers[at],Ve))return new L(this._markers[at],at+1,this._markers.length)}}};N=E([_(1,C.lT),_(2,M.Ui)],N);const b=(0,c.yh)("IMarkerNavigationService");let I=class{constructor(Re,Ve){this._markerService=Re,this._configService=Ve,this._provider=new x.S}getMarkerList(Re){for(let Ve of this._provider){const at=Ve.getMarkerList(Re);if(at)return at}return new N(Re,this._markerService,this._configService)}};I=E([_(0,C.lT),_(1,M.Ui)],I),(0,D.z)(b,I,!0);var k=a(63580),W=a(84144),q=a(16141),re=a(59554),de=a(65321),pe=a(9802),ae=a(41264),ue=a(68843),te=a(95935),K=a(52049),U=a(58335),ee=a(44349),X=a(50988),le=a(14603),oe=a(73910),Ce=a(97781),ye;(function(dt){function Re(Ve){switch(Ve){case le.Z.Ignore:return"severity-ignore "+p.lA.info.classNames;case le.Z.Info:return p.lA.info.classNames;case le.Z.Warning:return p.lA.warning.classNames;case le.Z.Error:return p.lA.error.classNames;default:return""}}dt.className=Re})(ye||(ye={})),(0,Ce.Ic)((dt,Re)=>{const Ve=dt.getColor(oe.JpG);if(Ve){const Be=p.lA.error.cssSelector;Re.addRule(`
			.monaco-editor .zone-widget ${Be},
			.markers-panel .marker-icon${Be},
			.text-search-provider-messages .providerMessage ${Be},
			.extensions-viewlet > .extensions ${Be} {
				color: ${Ve};
			}
		`)}const at=dt.getColor(oe.BOY);if(at){const Be=p.lA.warning.cssSelector;Re.addRule(`
			.monaco-editor .zone-widget ${Be},
			.markers-panel .marker-icon${Be},
			.extensions-viewlet > .extensions ${Be},
			.extension-editor ${Be},
			.text-search-provider-messages .providerMessage ${Be},
			.preferences-editor ${Be} {
				color: ${at};
			}
		`)}const pt=dt.getColor(oe.OLZ);if(pt){const Be=p.lA.info.cssSelector;Re.addRule(`
			.monaco-editor .zone-widget ${Be},
			.markers-panel .marker-icon${Be},
			.extensions-viewlet > .extensions ${Be},
			.text-search-provider-messages .providerMessage ${Be},
			.extension-editor ${Be} {
				color: ${pt};
			}
		`)}});var ke=function(dt,Re,Ve,at){var pt=arguments.length,Be=pt<3?Re:at===null?at=Object.getOwnPropertyDescriptor(Re,Ve):at,je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Be=Reflect.decorate(dt,Re,Ve,at);else for(var Et=dt.length-1;Et>=0;Et--)(je=dt[Et])&&(Be=(pt<3?je(Be):pt>3?je(Re,Ve,Be):je(Re,Ve))||Be);return pt>3&&Be&&Object.defineProperty(Re,Ve,Be),Be},Te=function(dt,Re){return function(Ve,at){Re(Ve,at,dt)}};class ge{constructor(Re,Ve,at,pt,Be){this._openerService=pt,this._labelService=Be,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new d.SL,this._editor=Ve;const je=document.createElement("div");je.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),je.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),je.appendChild(this._relatedBlock),this._disposables.add(de.mu(this._relatedBlock,"click",Et=>{Et.preventDefault();const Dt=this._relatedDiagnostics.get(Et.target);Dt&&at(Dt)})),this._scrollable=new pe.NB(je,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),Re.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(Et=>{je.style.left=`-${Et.scrollLeft}px`,je.style.top=`-${Et.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){(0,d.B9)(this._disposables)}update(Re){const{source:Ve,message:at,relatedInformation:pt,code:Be}=Re;let je=((Ve==null?void 0:Ve.length)||0)+"()".length;Be&&(typeof Be=="string"?je+=Be.length:je+=Be.value.length);const Et=(0,v.uq)(at);this._lines=Et.length,this._longestLineLength=0;for(const An of Et)this._longestLineLength=Math.max(An.length+je,this._longestLineLength);de.PO(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(Re)),this._editor.applyFontInfo(this._messageBlock);let Dt=this._messageBlock;for(const An of Et)Dt=document.createElement("div"),Dt.innerText=An,An===""&&(Dt.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(Dt);if(Ve||Be){const An=document.createElement("span");if(An.classList.add("details"),Dt.appendChild(An),Ve){const Fn=document.createElement("span");Fn.innerText=Ve,Fn.classList.add("source"),An.appendChild(Fn)}if(Be)if(typeof Be=="string"){const Fn=document.createElement("span");Fn.innerText=`(${Be})`,Fn.classList.add("code"),An.appendChild(Fn)}else{this._codeLink=de.$("a.code-link"),this._codeLink.setAttribute("href",`${Be.target.toString()}`),this._codeLink.onclick=Ht=>{this._openerService.open(Be.target,{allowCommands:!0}),Ht.preventDefault(),Ht.stopPropagation()};const Fn=de.R3(this._codeLink,de.$("span"));Fn.innerText=Be.value,An.appendChild(this._codeLink)}}if(de.PO(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,B.Of)(pt)){const An=this._relatedBlock.appendChild(document.createElement("div"));An.style.paddingTop=`${Math.floor(this._editor.getOption(59)*.66)}px`,this._lines+=1;for(const Fn of pt){let Ht=document.createElement("div"),Kt=document.createElement("a");Kt.classList.add("filename"),Kt.innerText=`${(0,ue.p)(Fn.resource)}(${Fn.startLineNumber}, ${Fn.startColumn}): `,Kt.title=this._labelService.getUriLabel(Fn.resource),this._relatedDiagnostics.set(Kt,Fn);let pn=document.createElement("span");pn.innerText=Fn.message,Ht.appendChild(Kt),Ht.appendChild(pn),this._lines+=1,An.appendChild(Ht)}}const Xe=this._editor.getOption(44),ft=Math.ceil(Xe.typicalFullwidthCharacterWidth*this._longestLineLength*.75),an=Xe.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:ft,scrollHeight:an})}layout(Re,Ve){this._scrollable.getDomNode().style.height=`${Re}px`,this._scrollable.getDomNode().style.width=`${Ve}px`,this._scrollable.setScrollDimensions({width:Ve,height:Re})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(Re){let Ve="";switch(Re.severity){case C.ZL.Error:Ve=k.N("Error","Error");break;case C.ZL.Warning:Ve=k.N("Warning","Warning");break;case C.ZL.Info:Ve=k.N("Info","Info");break;case C.ZL.Hint:Ve=k.N("Hint","Hint");break}let at=k.N("marker aria","{0} at {1}. ",Ve,Re.startLineNumber+":"+Re.startColumn);const pt=this._editor.getModel();return pt&&Re.startLineNumber<=pt.getLineCount()&&Re.startLineNumber>=1&&(at=`${pt.getLineContent(Re.startLineNumber)}, ${at}`),at}}let we=class aS extends K.vk{constructor(Re,Ve,at,pt,Be,je,Et){super(Re,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},Be);this._themeService=Ve,this._openerService=at,this._menuService=pt,this._contextKeyService=je,this._labelService=Et,this._callOnDispose=new d.SL,this._onDidSelectRelatedInformation=new F.Q5,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=C.ZL.Warning,this._backgroundColor=ae.Il.white,this._applyTheme(Ve.getColorTheme()),this._callOnDispose.add(Ve.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(Re){this._backgroundColor=Re.getColor(Q);let Ve=Oe,at=qe;this._severity===C.ZL.Warning?(Ve=Je,at=Ne):this._severity===C.ZL.Info&&(Ve=Fe,at=ne);const pt=Re.getColor(Ve),Be=Re.getColor(at);this.style({arrowColor:pt,frameColor:pt,headerBackgroundColor:Be,primaryHeadingColor:Re.getColor(K.IH),secondaryHeadingColor:Re.getColor(K.R7)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(Re){super._fillHead(Re),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(pt=>this.editor.focus()));const Ve=[],at=this._menuService.createMenu(aS.TitleMenu,this._contextKeyService);(0,U.vr)(at,void 0,Ve),this._actionbarWidget.push(Ve,{label:!1,icon:!0,index:0}),at.dispose()}_fillTitleIcon(Re){this._icon=de.R3(Re,de.$(""))}_fillBody(Re){this._parentContainer=Re,Re.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),Re.appendChild(this._container),this._message=new ge(this._container,this.editor,Ve=>this._onDidSelectRelatedInformation.fire(Ve),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(Re,Ve,at){this._container.classList.remove("stale"),this._message.update(Re),this._severity=Re.severity,this._applyTheme(this._themeService.getColorTheme());let pt=j.e.lift(Re);const Be=this.editor.getPosition();let je=Be&&pt.containsPosition(Be)?Be:pt.getStartPosition();super.show(je,this.computeRequiredHeight());const Et=this.editor.getModel();if(Et){const Dt=at>1?k.N("problems","{0} of {1} problems",Ve,at):k.N("change","{0} of {1} problem",Ve,at);this.setTitle((0,te.EZ)(Et.uri),Dt)}this._icon.className=`codicon ${ye.className(C.ZL.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(je,0),this.editor.focus()}updateMarker(Re){this._container.classList.remove("stale"),this._message.update(Re)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(Re,Ve){super._doLayoutBody(Re,Ve),this._heightInPixel=Re,this._message.layout(Re,Ve),this._container.style.height=`${Re}px`}_onWidth(Re){this._message.layout(this._heightInPixel,Re)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};we.TitleMenu=new W.eH("gotoErrorTitleMenu"),we=ke([Te(1,Ce.XE),Te(2,X.v4),Te(3,W.co),Te(4,c.TG),Te(5,q.i6),Te(6,ee.e)],we);let ze=(0,oe.kwl)(oe.lXJ,oe.b6y),Qe=(0,oe.kwl)(oe.uoC,oe.pW3),Pe=(0,oe.kwl)(oe.c63,oe.T83);const Oe=(0,oe.P6G)("editorMarkerNavigationError.background",{dark:ze,light:ze,hc:oe.lRK},k.N("editorMarkerNavigationError","Editor marker navigation widget error color.")),qe=(0,oe.P6G)("editorMarkerNavigationError.headerBackground",{dark:(0,oe.ZnX)(Oe,.1),light:(0,oe.ZnX)(Oe,.1),hc:null},k.N("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Je=(0,oe.P6G)("editorMarkerNavigationWarning.background",{dark:Qe,light:Qe,hc:oe.lRK},k.N("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Ne=(0,oe.P6G)("editorMarkerNavigationWarning.headerBackground",{dark:(0,oe.ZnX)(Je,.1),light:(0,oe.ZnX)(Je,.1),hc:"#0C141F"},k.N("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),Fe=(0,oe.P6G)("editorMarkerNavigationInfo.background",{dark:Pe,light:Pe,hc:oe.lRK},k.N("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),ne=(0,oe.P6G)("editorMarkerNavigationInfo.headerBackground",{dark:(0,oe.ZnX)(Fe,.1),light:(0,oe.ZnX)(Fe,.1),hc:null},k.N("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),Q=(0,oe.P6G)("editorMarkerNavigation.background",{dark:oe.cvW,light:oe.cvW,hc:oe.cvW},k.N("editorMarkerNavigationBackground","Editor marker navigation widget background."));var ie=function(dt,Re,Ve,at){var pt=arguments.length,Be=pt<3?Re:at===null?at=Object.getOwnPropertyDescriptor(Re,Ve):at,je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Be=Reflect.decorate(dt,Re,Ve,at);else for(var Et=dt.length-1;Et>=0;Et--)(je=dt[Et])&&(Be=(pt<3?je(Be):pt>3?je(Re,Ve,Be):je(Re,Ve))||Be);return pt>3&&Be&&Object.defineProperty(Re,Ve,Be),Be},xe=function(dt,Re){return function(Ve,at){Re(Ve,at,dt)}},be=function(dt,Re,Ve,at){function pt(Be){return Be instanceof Ve?Be:new Ve(function(je){je(Be)})}return new(Ve||(Ve=Promise))(function(Be,je){function Et(ft){try{Xe(at.next(ft))}catch(an){je(an)}}function Dt(ft){try{Xe(at.throw(ft))}catch(an){je(an)}}function Xe(ft){ft.done?Be(ft.value):pt(ft.value).then(Et,Dt)}Xe((at=at.apply(dt,Re||[])).next())})};let Ge=class pp{constructor(Re,Ve,at,pt,Be){this._markerNavigationService=Ve,this._contextKeyService=at,this._editorService=pt,this._instantiationService=Be,this._sessionDispoables=new d.SL,this._editor=Re,this._widgetVisible=Ue.bindTo(this._contextKeyService)}static get(Re){return Re.getContribution(pp.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(Re){if(this._model&&this._model.matches(Re))return this._model;let Ve=!1;return this._model&&(Ve=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(Re),Ve&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(we,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(at=>{var pt,Be,je;(!((pt=this._model)===null||pt===void 0?void 0:pt.selected)||!j.e.containsPosition((Be=this._model)===null||Be===void 0?void 0:Be.selected.marker,at.position))&&((je=this._model)===null||je===void 0||je.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const at=this._model.find(this._editor.getModel().uri,this._widget.position);at?this._widget.updateMarker(at.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(at=>{this._editorService.openCodeEditor({resource:at.resource,options:{pinned:!0,revealIfOpened:!0,selection:j.e.lift(at).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(Re=!0){this._cleanUp(),Re&&this._editor.focus()}showAtMarker(Re){if(this._editor.hasModel()){const Ve=this._getOrCreateModel(this._editor.getModel().uri);Ve.resetIndex(),Ve.move(!0,this._editor.getModel(),new S.L(Re.startLineNumber,Re.startColumn)),Ve.selected&&this._widget.showAtMarker(Ve.selected.marker,Ve.selected.index,Ve.selected.total)}}nagivate(Re,Ve){var at,pt;return be(this,void 0,void 0,function*(){if(this._editor.hasModel()){const Be=this._getOrCreateModel(Ve?void 0:this._editor.getModel().uri);if(Be.move(Re,this._editor.getModel(),this._editor.getPosition()),!Be.selected)return;if(Be.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const je=yield this._editorService.openCodeEditor({resource:Be.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:Be.selected.marker}},this._editor);je&&((at=pp.get(je))===null||at===void 0||at.close(),(pt=pp.get(je))===null||pt===void 0||pt.nagivate(Re,Ve))}else this._widget.showAtMarker(Be.selected.marker,Be.selected.index,Be.selected.total)}})}};Ge.ID="editor.contrib.markerController",Ge=ie([xe(1,b),xe(2,q.i6),xe(3,O.$),xe(4,c.TG)],Ge);class nt extends z.R6{constructor(Re,Ve,at){super(at);this._next=Re,this._multiFile=Ve}run(Re,Ve){var at;return be(this,void 0,void 0,function*(){Ve.hasModel()&&((at=Ge.get(Ve))===null||at===void 0||at.nagivate(this._next,this._multiFile))})}}class _t extends nt{constructor(){super(!0,!1,{id:_t.ID,label:_t.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:T.u.focus,primary:512|66,weight:100},menuOpts:{menuId:we.TitleMenu,title:_t.LABEL,icon:(0,re.q5)("marker-navigation-next",p.lA.arrowDown,k.N("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}_t.ID="editor.action.marker.next",_t.LABEL=k.N("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class Ot extends nt{constructor(){super(!1,!1,{id:Ot.ID,label:Ot.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:T.u.focus,primary:1024|512|66,weight:100},menuOpts:{menuId:we.TitleMenu,title:Ot.LABEL,icon:(0,re.q5)("marker-navigation-previous",p.lA.arrowUp,k.N("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}Ot.ID="editor.action.marker.prev",Ot.LABEL=k.N("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class rn extends nt{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:k.N("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:T.u.focus,primary:66,weight:100},menuOpts:{menuId:W.eH.MenubarGoMenu,title:k.N({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class gt extends nt{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:k.N("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:T.u.focus,primary:1024|66,weight:100},menuOpts:{menuId:W.eH.MenubarGoMenu,title:k.N({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}(0,z._K)(Ge.ID,Ge),(0,z.Qr)(_t),(0,z.Qr)(Ot),(0,z.Qr)(rn),(0,z.Qr)(gt);const Ue=new q.uy("markersNavigationVisible",!1),Ye=z._l.bindToContribution(Ge.get);(0,z.fK)(new Ye({id:"closeMarkersNavigation",precondition:Ue,handler:dt=>dt.close(),kbOpts:{weight:100+50,kbExpr:T.u.focus,primary:9,secondary:[1024|9]}}))},60628:function(Tt,me,a){"use strict";a.r(me),a.d(me,{DefinitionAction:function(){return xe},SymbolNavigationAction:function(){return ie},SymbolNavigationAnchor:function(){return Q}});var p=a(16268),d=a(85152),z=a(15393),O=a(22258),S=a(1432),j=a(98401),T=a(70666),B=a(16467),F=a(65520),x=a(16830),v=a(11640),g=a(84527),D=a(50187),c=a(24314),C=a(29102),M=a(96887),E=a(27376),_=a(1293),L=a(4669),N=a(9917),b=a(95935),I=a(63580),k=a(16141),W=a(65026),q=a(72065),re=a(91847),de=a(49989),pe=a(59422),ae=function(gt,Ue,Ye,dt){var Re=arguments.length,Ve=Re<3?Ue:dt===null?dt=Object.getOwnPropertyDescriptor(Ue,Ye):dt,at;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ve=Reflect.decorate(gt,Ue,Ye,dt);else for(var pt=gt.length-1;pt>=0;pt--)(at=gt[pt])&&(Ve=(Re<3?at(Ve):Re>3?at(Ue,Ye,Ve):at(Ue,Ye))||Ve);return Re>3&&Ve&&Object.defineProperty(Ue,Ye,Ve),Ve},ue=function(gt,Ue){return function(Ye,dt){Ue(Ye,dt,gt)}};const te=new k.uy("hasSymbols",!1,(0,I.N)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),K=(0,q.yh)("ISymbolNavigationService");let U=class{constructor(Ue,Ye,dt,Re){this._editorService=Ye,this._notificationService=dt,this._keybindingService=Re,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=te.bindTo(Ue)}reset(){var Ue,Ye;this._ctxHasSymbols.reset(),(Ue=this._currentState)===null||Ue===void 0||Ue.dispose(),(Ye=this._currentMessage)===null||Ye===void 0||Ye.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(Ue){const Ye=Ue.parent.parent;if(Ye.references.length<=1){this.reset();return}this._currentModel=Ye,this._currentIdx=Ye.references.indexOf(Ue),this._ctxHasSymbols.set(!0),this._showMessage();const dt=new ee(this._editorService),Re=dt.onDidChange(Ve=>{if(this._ignoreEditorChange)return;const at=this._editorService.getActiveCodeEditor();if(!at)return;const pt=at.getModel(),Be=at.getPosition();if(!pt||!Be)return;let je=!1,Et=!1;for(const Dt of Ye.references)if((0,b.Xy)(Dt.uri,pt.uri))je=!0,Et=Et||c.e.containsPosition(Dt.range,Be);else if(je)break;(!je||!Et)&&this.reset()});this._currentState=(0,N.F8)(dt,Re)}revealNext(Ue){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const Ye=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:Ye.uri,options:{selection:c.e.collapseToStart(Ye.range),selectionRevealType:3}},Ue).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var Ue;(Ue=this._currentMessage)===null||Ue===void 0||Ue.dispose();const Ye=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),dt=Ye?(0,I.N)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,Ye.getLabel()):(0,I.N)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(dt)}};U=ae([ue(0,k.i6),ue(1,v.$),ue(2,pe.lT),ue(3,re.d)],U),(0,W.z)(K,U,!0),(0,x.fK)(new class extends x._l{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:te,kbOpts:{weight:100,primary:70}})}runEditorCommand(gt,Ue){return gt.get(K).revealNext(Ue)}}),de.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:te,primary:9,handler(gt){gt.get(K).reset()}});let ee=class{constructor(Ue){this._listener=new Map,this._disposables=new N.SL,this._onDidChange=new L.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(Ue.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(Ue.onCodeEditorAdd(this._onDidAddEditor,this)),Ue.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,N.B9)(this._listener.values())}_onDidAddEditor(Ue){this._listener.set(Ue,(0,N.F8)(Ue.onDidChangeCursorPosition(Ye=>this._onDidChange.fire({editor:Ue})),Ue.onDidChangeModelContent(Ye=>this._onDidChange.fire({editor:Ue}))))}_onDidRemoveEditor(Ue){var Ye;(Ye=this._listener.get(Ue))===null||Ye===void 0||Ye.dispose(),this._listener.delete(Ue)}};ee=ae([ue(0,v.$)],ee);var X=a(27753),le=a(52049),oe=a(84144),Ce=a(94565),ye=a(90535),ke=a(40184),Te=a(71922),ge=function(gt,Ue,Ye,dt){function Re(Ve){return Ve instanceof Ye?Ve:new Ye(function(at){at(Ve)})}return new(Ye||(Ye=Promise))(function(Ve,at){function pt(Et){try{je(dt.next(Et))}catch(Dt){at(Dt)}}function Be(Et){try{je(dt.throw(Et))}catch(Dt){at(Dt)}}function je(Et){Et.done?Ve(Et.value):Re(Et.value).then(pt,Be)}je((dt=dt.apply(gt,Ue||[])).next())})},we,ze,Qe,Pe,Oe,qe,Je,Ne;oe.BH.appendMenuItem(oe.eH.EditorContext,{submenu:oe.eH.EditorContextPeek,title:I.N("peek.submenu","Peek"),group:"navigation",order:100});const Fe=new Set;function ne(gt){const Ue=new gt;return(0,x.QG)(Ue),Fe.add(Ue.id),Ue}class Q{constructor(Ue,Ye){this.model=Ue,this.position=Ye}static is(Ue){return!Ue||typeof Ue!="object"?!1:!!(Ue instanceof Q||D.L.isIPosition(Ue.position)&&Ue.model)}}class ie extends x.R6{constructor(Ue,Ye){super(Ye);this.configuration=Ue}run(Ue,Ye,dt){if(!Ye.hasModel())return Promise.resolve(void 0);const Re=Ue.get(pe.lT),Ve=Ue.get(v.$),at=Ue.get(ye.ek),pt=Ue.get(K),Be=Ue.get(Te.p),je=Ye.getModel(),Et=Ye.getPosition(),Dt=Q.is(dt)?dt:new Q(je,Et),Xe=new B.Dl(Ye,1|4),ft=(0,z.eP)(this._getLocationModel(Be,Dt.model,Dt.position,Xe.token),Xe.token).then(an=>ge(this,void 0,void 0,function*(){var An;if(!an||Xe.token.isCancellationRequested)return;(0,d.Z9)(an.ariaMessage);let Fn;if(an.referenceAt(je.uri,Et)){const Kt=this._getAlternativeCommand(Ye);Kt!==this.id&&Fe.has(Kt)&&(Fn=Ye.getAction(Kt))}const Ht=an.references.length;if(Ht===0){if(!this.configuration.muteMessage){const Kt=je.getWordAtPosition(Et);(An=X.O.get(Ye))===null||An===void 0||An.showMessage(this._getNoResultFoundMessage(Kt),Et)}}else if(Ht===1&&Fn)Fn.run();else return this._onResult(Ve,pt,Ye,an)}),an=>{Re.error(an)}).finally(()=>{Xe.dispose()});return at.showWhile(ft,250),ft}_onResult(Ue,Ye,dt,Re){return ge(this,void 0,void 0,function*(){const Ve=this._getGoToPreference(dt);if(!(dt instanceof g.H)&&(this.configuration.openInPeek||Ve==="peek"&&Re.references.length>1))this._openInPeek(dt,Re);else{const at=Re.firstReference(),pt=Re.references.length>1&&Ve==="gotoAndPeek",Be=yield this._openReference(dt,Ue,at,this.configuration.openToSide,!pt);pt&&Be?this._openInPeek(Be,Re):Re.dispose(),Ve==="goto"&&Ye.put(at)}})}_openReference(Ue,Ye,dt,Re,Ve){return ge(this,void 0,void 0,function*(){let at;if((0,M.vx)(dt)&&(at=dt.targetSelectionRange),at||(at=dt.range),!at)return;const pt=yield Ye.openCodeEditor({resource:dt.uri,options:{selection:c.e.collapseToStart(at),selectionRevealType:3,selectionSource:"code.jump"}},Ue,Re);if(!!pt){if(Ve){const Be=pt.getModel(),je=pt.deltaDecorations([],[{range:at,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{pt.getModel()===Be&&pt.deltaDecorations(je,[])},350)}return pt}})}_openInPeek(Ue,Ye){const dt=E.J.get(Ue);dt&&Ue.hasModel()?dt.toggleWidget(Ue.getSelection(),(0,z.PG)(Re=>Promise.resolve(Ye)),this.configuration.openInPeek):Ye.dispose()}}class xe extends ie{_getLocationModel(Ue,Ye,dt,Re){return ge(this,void 0,void 0,function*(){return new _.oQ(yield(0,ke.nD)(Ue.definitionProvider,Ye,dt,Re),I.N("def.title","Definitions"))})}_getNoResultFoundMessage(Ue){return Ue&&Ue.word?I.N("noResultWord","No definition found for '{0}'",Ue.word):I.N("generic.noResults","No definition found")}_getAlternativeCommand(Ue){return Ue.getOption(51).alternativeDefinitionCommand}_getGoToPreference(Ue){return Ue.getOption(51).multipleDefinitions}}const be=S.$L&&!p.isStandalone?2048|70:70;ne((we=class p0 extends xe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:p0.id,label:I.N("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:k.Ao.and(C.u.hasDefinitionProvider,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:be,weight:100},contextMenuOpts:{group:"navigation",order:1.1}});Ce.P0.registerCommandAlias("editor.action.goToDeclaration",p0.id)}},we.id="editor.action.revealDefinition",we)),ne((ze=class v0 extends xe{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:v0.id,label:I.N("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:k.Ao.and(C.u.hasDefinitionProvider,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:(0,O.gx)(2048|41,be),weight:100}});Ce.P0.registerCommandAlias("editor.action.openDeclarationToTheSide",v0.id)}},ze.id="editor.action.revealDefinitionAside",ze)),ne((Qe=class _0 extends xe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:_0.id,label:I.N("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:k.Ao.and(C.u.hasDefinitionProvider,le.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:512|70,linux:{primary:2048|1024|68},weight:100},contextMenuOpts:{menuId:oe.eH.EditorContextPeek,group:"peek",order:2}});Ce.P0.registerCommandAlias("editor.action.previewDeclaration",_0.id)}},Qe.id="editor.action.peekDefinition",Qe));class Ge extends ie{_getLocationModel(Ue,Ye,dt,Re){return ge(this,void 0,void 0,function*(){return new _.oQ(yield(0,ke.zq)(Ue.declarationProvider,Ye,dt,Re),I.N("decl.title","Declarations"))})}_getNoResultFoundMessage(Ue){return Ue&&Ue.word?I.N("decl.noResultWord","No declaration found for '{0}'",Ue.word):I.N("decl.generic.noResults","No declaration found")}_getAlternativeCommand(Ue){return Ue.getOption(51).alternativeDeclarationCommand}_getGoToPreference(Ue){return Ue.getOption(51).multipleDeclarations}}ne((Pe=class lS extends Ge{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:lS.id,label:I.N("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:k.Ao.and(C.u.hasDeclarationProvider,C.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(Ue){return Ue&&Ue.word?I.N("decl.noResultWord","No declaration found for '{0}'",Ue.word):I.N("decl.generic.noResults","No declaration found")}},Pe.id="editor.action.revealDeclaration",Pe)),ne(class extends Ge{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:I.N("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:k.Ao.and(C.u.hasDeclarationProvider,le.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:oe.eH.EditorContextPeek,group:"peek",order:3}})}});class nt extends ie{_getLocationModel(Ue,Ye,dt,Re){return ge(this,void 0,void 0,function*(){return new _.oQ(yield(0,ke.L3)(Ue.typeDefinitionProvider,Ye,dt,Re),I.N("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(Ue){return Ue&&Ue.word?I.N("goToTypeDefinition.noResultWord","No type definition found for '{0}'",Ue.word):I.N("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(Ue){return Ue.getOption(51).alternativeTypeDefinitionCommand}_getGoToPreference(Ue){return Ue.getOption(51).multipleTypeDefinitions}}ne((Oe=class cS extends nt{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:cS.ID,label:I.N("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:k.Ao.and(C.u.hasTypeDefinitionProvider,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},Oe.ID="editor.action.goToTypeDefinition",Oe)),ne((qe=class uS extends nt{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:uS.ID,label:I.N("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:k.Ao.and(C.u.hasTypeDefinitionProvider,le.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:oe.eH.EditorContextPeek,group:"peek",order:4}})}},qe.ID="editor.action.peekTypeDefinition",qe));class _t extends ie{_getLocationModel(Ue,Ye,dt,Re){return ge(this,void 0,void 0,function*(){return new _.oQ(yield(0,ke.f4)(Ue.implementationProvider,Ye,dt,Re),I.N("impl.title","Implementations"))})}_getNoResultFoundMessage(Ue){return Ue&&Ue.word?I.N("goToImplementation.noResultWord","No implementation found for '{0}'",Ue.word):I.N("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(Ue){return Ue.getOption(51).alternativeImplementationCommand}_getGoToPreference(Ue){return Ue.getOption(51).multipleImplementations}}ne((Je=class dS extends _t{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:dS.ID,label:I.N("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:k.Ao.and(C.u.hasImplementationProvider,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:2048|70,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},Je.ID="editor.action.goToImplementation",Je)),ne((Ne=class hS extends _t{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:hS.ID,label:I.N("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:k.Ao.and(C.u.hasImplementationProvider,le.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:2048|1024|70,weight:100},contextMenuOpts:{menuId:oe.eH.EditorContextPeek,group:"peek",order:5}})}},Ne.ID="editor.action.peekImplementation",Ne));class Ot extends ie{_getNoResultFoundMessage(Ue){return Ue?I.N("references.no","No references found for '{0}'",Ue.word):I.N("references.noGeneric","No references found")}_getAlternativeCommand(Ue){return Ue.getOption(51).alternativeReferenceCommand}_getGoToPreference(Ue){return Ue.getOption(51).multipleReferences}}ne(class extends Ot{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:I.N("goToReferences.label","Go to References"),alias:"Go to References",precondition:k.Ao.and(C.u.hasReferenceProvider,le.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:C.u.editorTextFocus,primary:1024|70,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(Ue,Ye,dt,Re){return ge(this,void 0,void 0,function*(){return new _.oQ(yield(0,ke.aA)(Ue.referenceProvider,Ye,dt,!0,Re),I.N("ref.title","References"))})}}),ne(class extends Ot{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:I.N("references.action.label","Peek References"),alias:"Peek References",precondition:k.Ao.and(C.u.hasReferenceProvider,le.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:oe.eH.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(Ue,Ye,dt,Re){return ge(this,void 0,void 0,function*(){return new _.oQ(yield(0,ke.aA)(Ue.referenceProvider,Ye,dt,!1,Re),I.N("ref.title","References"))})}});class rn extends ie{constructor(Ue,Ye,dt){super(Ue,{id:"editor.action.goToLocation",label:I.N("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:k.Ao.and(le.Jy.notInPeekEditor,C.u.isInWalkThroughSnippet.toNegated())});this._references=Ye,this._gotoMultipleBehaviour=dt}_getLocationModel(Ue,Ye,dt,Re){return ge(this,void 0,void 0,function*(){return new _.oQ(this._references,I.N("generic.title","Locations"))})}_getNoResultFoundMessage(Ue){return Ue&&I.N("generic.noResult","No results for '{0}'",Ue.word)||""}_getGoToPreference(Ue){var Ye;return(Ye=this._gotoMultipleBehaviour)!==null&&Ye!==void 0?Ye:Ue.getOption(51).multipleReferences}_getAlternativeCommand(){return""}}Ce.P0.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:T.o},{name:"position",description:"The position at which to start",constraint:D.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(gt,Ue,Ye,dt,Re,Ve,at)=>ge(void 0,void 0,void 0,function*(){(0,j.p_)(T.o.isUri(Ue)),(0,j.p_)(D.L.isIPosition(Ye)),(0,j.p_)(Array.isArray(dt)),(0,j.p_)(typeof Re=="undefined"||typeof Re=="string"),(0,j.p_)(typeof at=="undefined"||typeof at=="boolean");const pt=gt.get(v.$),Be=yield pt.openCodeEditor({resource:Ue},pt.getFocusedCodeEditor());if((0,F.CL)(Be))return Be.setPosition(Ye),Be.revealPositionInCenterIfOutsideViewport(Ye,0),Be.invokeWithinContext(je=>{const Et=new class extends rn{_getNoResultFoundMessage(Dt){return Ve||super._getNoResultFoundMessage(Dt)}}({muteMessage:!Boolean(Ve),openInPeek:Boolean(at),openToSide:!1},dt,Re);je.get(q.TG).invokeFunction(Et.run.bind(Et),Be)})})}),Ce.P0.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:T.o},{name:"position",description:"The position at which to start",constraint:D.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(gt,Ue,Ye,dt,Re)=>ge(void 0,void 0,void 0,function*(){gt.get(Ce.Hy).executeCommand("editor.action.goToLocations",Ue,Ye,dt,Re,void 0,!0)})}),Ce.P0.registerCommand({id:"editor.action.findReferences",handler:(gt,Ue,Ye)=>{(0,j.p_)(T.o.isUri(Ue)),(0,j.p_)(D.L.isIPosition(Ye));const dt=gt.get(Te.p),Re=gt.get(v.$);return Re.openCodeEditor({resource:Ue},Re.getFocusedCodeEditor()).then(Ve=>{if(!(0,F.CL)(Ve)||!Ve.hasModel())return;const at=E.J.get(Ve);if(!at)return;const pt=(0,z.PG)(je=>(0,ke.aA)(dt.referenceProvider,Ve.getModel(),D.L.lift(Ye),!1,je).then(Et=>new _.oQ(Et,I.N("ref.title","References")))),Be=new c.e(Ye.lineNumber,Ye.column,Ye.lineNumber,Ye.column);return Promise.resolve(at.toggleWidget(Be,pt,!1))})}}),Ce.P0.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),oe.BH.appendMenuItems([{id:oe.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:I.N({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:oe.eH.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:I.N({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:oe.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:I.N({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:oe.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:I.N({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:oe.eH.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:I.N({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}])},40184:function(Tt,me,a){"use strict";a.d(me,{nD:function(){return B},zq:function(){return F},f4:function(){return x},L3:function(){return v},aA:function(){return g}});var p=a(71050),d=a(17301),z=a(16830),O=a(1293),S=a(71922),j=function(c,C,M,E){function _(L){return L instanceof M?L:new M(function(N){N(L)})}return new(M||(M=Promise))(function(L,N){function b(W){try{k(E.next(W))}catch(q){N(q)}}function I(W){try{k(E.throw(W))}catch(q){N(q)}}function k(W){W.done?L(W.value):_(W.value).then(b,I)}k((E=E.apply(c,C||[])).next())})};function T(c,C,M,E){const L=M.ordered(c).map(N=>Promise.resolve(E(N,c,C)).then(void 0,b=>{(0,d.Cp)(b)}));return Promise.all(L).then(N=>{const b=[];for(let I of N)Array.isArray(I)?b.push(...I):I&&b.push(I);return b})}function B(c,C,M,E){return T(C,M,c,(_,L,N)=>_.provideDefinition(L,N,E))}function F(c,C,M,E){return T(C,M,c,(_,L,N)=>_.provideDeclaration(L,N,E))}function x(c,C,M,E){return T(C,M,c,(_,L,N)=>_.provideImplementation(L,N,E))}function v(c,C,M,E){return T(C,M,c,(_,L,N)=>_.provideTypeDefinition(L,N,E))}function g(c,C,M,E,_){return T(C,M,c,(L,N,b)=>j(this,void 0,void 0,function*(){const I=yield L.provideReferences(N,b,{includeDeclaration:!0},_);if(!E||!I||I.length!==2)return I;const k=yield L.provideReferences(N,b,{includeDeclaration:!1},_);return k&&k.length===1?k:I}))}function D(c){return j(this,void 0,void 0,function*(){const C=yield c(),M=new O.oQ(C,""),E=M.references.map(_=>_.link);return M.dispose(),E})}(0,z.sb)("_executeDefinitionProvider",(c,C,M)=>{const E=c.get(S.p),_=B(E.definitionProvider,C,M,p.T.None);return D(()=>_)}),(0,z.sb)("_executeTypeDefinitionProvider",(c,C,M)=>{const E=c.get(S.p),_=v(E.typeDefinitionProvider,C,M,p.T.None);return D(()=>_)}),(0,z.sb)("_executeDeclarationProvider",(c,C,M)=>{const E=c.get(S.p),_=F(E.declarationProvider,C,M,p.T.None);return D(()=>_)}),(0,z.sb)("_executeReferenceProvider",(c,C,M)=>{const E=c.get(S.p),_=g(E.referenceProvider,C,M,!1,p.T.None);return D(()=>_)}),(0,z.sb)("_executeImplementationProvider",(c,C,M)=>{const E=c.get(S.p),_=x(E.implementationProvider,C,M,p.T.None);return D(()=>_)})},82005:function(Tt,me,a){"use strict";a.d(me,{yN:function(){return F}});var p=a(4669),d=a(9917),z=a(1432);function O(x,v){return!!x[v]}class S{constructor(v,g){this.target=v.target,this.hasTriggerModifier=O(v.event,g.triggerModifier),this.hasSideBySideModifier=O(v.event,g.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=v.event.detail<=1}}class j{constructor(v,g){this.keyCodeIsTriggerKey=v.keyCode===g.triggerKey,this.keyCodeIsSideBySideKey=v.keyCode===g.triggerSideBySideKey,this.hasTriggerModifier=O(v,g.triggerModifier)}}class T{constructor(v,g,D,c){this.triggerKey=v,this.triggerModifier=g,this.triggerSideBySideKey=D,this.triggerSideBySideModifier=c}equals(v){return this.triggerKey===v.triggerKey&&this.triggerModifier===v.triggerModifier&&this.triggerSideBySideKey===v.triggerSideBySideKey&&this.triggerSideBySideModifier===v.triggerSideBySideModifier}}function B(x){return x==="altKey"?z.dz?new T(57,"metaKey",6,"altKey"):new T(5,"ctrlKey",6,"altKey"):z.dz?new T(6,"altKey",57,"metaKey"):new T(6,"altKey",5,"ctrlKey")}class F extends d.JT{constructor(v){super();this._onMouseMoveOrRelevantKeyDown=this._register(new p.Q5),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new p.Q5),this.onExecute=this._onExecute.event,this._onCancel=this._register(new p.Q5),this.onCancel=this._onCancel.event,this._editor=v,this._opts=B(this._editor.getOption(70)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(g=>{if(g.hasChanged(70)){const D=B(this._editor.getOption(70));if(this._opts.equals(D))return;this._opts=D,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(g=>this._onEditorMouseMove(new S(g,this._opts)))),this._register(this._editor.onMouseDown(g=>this._onEditorMouseDown(new S(g,this._opts)))),this._register(this._editor.onMouseUp(g=>this._onEditorMouseUp(new S(g,this._opts)))),this._register(this._editor.onKeyDown(g=>this._onEditorKeyDown(new j(g,this._opts)))),this._register(this._editor.onKeyUp(g=>this._onEditorKeyUp(new j(g,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(g=>this._onDidChangeCursorSelection(g))),this._register(this._editor.onDidChangeModel(g=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(g=>{(g.scrollTopChanged||g.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(v){v.selection&&v.selection.startColumn!==v.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(v){this._lastMouseMoveEvent=v,this._onMouseMoveOrRelevantKeyDown.fire([v,null])}_onEditorMouseDown(v){this._hasTriggerKeyOnMouseDown=v.hasTriggerModifier,this._lineNumberOnMouseDown=v.target.position?v.target.position.lineNumber:0}_onEditorMouseUp(v){const g=v.target.position?v.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===g&&this._onExecute.fire(v)}_onEditorKeyDown(v){this._lastMouseMoveEvent&&(v.keyCodeIsTriggerKey||v.keyCodeIsSideBySideKey&&v.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,v]):v.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(v){v.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},22470:function(Tt,me,a){"use strict";a.r(me),a.d(me,{GotoDefinitionAtPositionEditorContribution:function(){return k}});var p=a(15393),d=a(17301),z=a(59365),O=a(9917),S=a(98401),j=a(16467),T=a(16830),B=a(50187),F=a(24314),x=a(72042),v=a(88216),g=a(82005),D=a(52049),c=a(63580),C=a(16141),M=a(73910),E=a(97781),_=a(60628),L=a(40184),N=a(71922),b=function(W,q,re,de){var pe=arguments.length,ae=pe<3?q:de===null?de=Object.getOwnPropertyDescriptor(q,re):de,ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(W,q,re,de);else for(var te=W.length-1;te>=0;te--)(ue=W[te])&&(ae=(pe<3?ue(ae):pe>3?ue(q,re,ae):ue(q,re))||ae);return pe>3&&ae&&Object.defineProperty(q,re,ae),ae},I=function(W,q){return function(re,de){q(re,de,W)}};let k=class Qg{constructor(q,re,de,pe){this.textModelResolverService=re,this.languageService=de,this.languageFeaturesService=pe,this.toUnhook=new O.SL,this.toUnhookForKeyboard=new O.SL,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=q;let ae=new g.yN(q);this.toUnhook.add(ae),this.toUnhook.add(ae.onMouseMoveOrRelevantKeyDown(([ue,te])=>{this.startFindDefinitionFromMouse(ue,(0,S.f6)(te))})),this.toUnhook.add(ae.onExecute(ue=>{this.isEnabled(ue)&&this.gotoDefinition(ue.target.position,ue.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},te=>{this.removeLinkDecorations(),(0,d.dL)(te)})})),this.toUnhook.add(ae.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(q){return q.getContribution(Qg.ID)}startFindDefinitionFromCursor(q){return this.startFindDefinition(q).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(re=>{re&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(q,re){if(q.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(q,re)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const de=q.target.position;this.startFindDefinition(de)}startFindDefinition(q){var re;this.toUnhookForKeyboard.clear();const de=q?(re=this.editor.getModel())===null||re===void 0?void 0:re.getWordAtPosition(q):null;if(!de)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===de.startColumn&&this.currentWordAtPosition.endColumn===de.endColumn&&this.currentWordAtPosition.word===de.word)return Promise.resolve(0);this.currentWordAtPosition=de;let pe=new j.yy(this.editor,4|1|2|8);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,p.PG)(ae=>this.findDefinition(q,ae)),this.previousPromise.then(ae=>{if(!ae||!ae.length||!pe.validate(this.editor)){this.removeLinkDecorations();return}if(ae.length>1)this.addDecoration(new F.e(q.lineNumber,de.startColumn,q.lineNumber,de.endColumn),new z.W5().appendText(c.N("multipleResults","Click to show {0} definitions.",ae.length)));else{let ue=ae[0];if(!ue.uri)return;this.textModelResolverService.createModelReference(ue.uri).then(te=>{if(!te.object||!te.object.textEditorModel){te.dispose();return}const{object:{textEditorModel:K}}=te,{startLineNumber:U}=ue.range;if(U<1||U>K.getLineCount()){te.dispose();return}const ee=this.getPreviewValue(K,U,ue);let X;ue.originSelectionRange?X=F.e.lift(ue.originSelectionRange):X=new F.e(q.lineNumber,de.startColumn,q.lineNumber,de.endColumn);const le=this.languageService.guessLanguageIdByFilepathOrFirstLine(K.uri);this.addDecoration(X,new z.W5().appendCodeblock(le||"",ee)),te.dispose()})}}).then(void 0,d.dL)}getPreviewValue(q,re,de){let pe=de.targetSelectionRange?de.range:this.getPreviewRangeBasedOnBrackets(q,re);return pe.endLineNumber-pe.startLineNumber>=Qg.MAX_SOURCE_PREVIEW_LINES&&(pe=this.getPreviewRangeBasedOnIndentation(q,re)),this.stripIndentationFromPreviewRange(q,re,pe)}stripIndentationFromPreviewRange(q,re,de){let ae=q.getLineFirstNonWhitespaceColumn(re);for(let te=re+1;te<de.endLineNumber;te++){const K=q.getLineFirstNonWhitespaceColumn(te);ae=Math.min(ae,K)}return q.getValueInRange(de).replace(new RegExp(`^\\s{${ae-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(q,re){const de=q.getLineFirstNonWhitespaceColumn(re),pe=Math.min(q.getLineCount(),re+Qg.MAX_SOURCE_PREVIEW_LINES);let ae=re+1;for(;ae<pe;ae++){let ue=q.getLineFirstNonWhitespaceColumn(ae);if(de===ue)break}return new F.e(re,1,ae+1,1)}getPreviewRangeBasedOnBrackets(q,re){const de=Math.min(q.getLineCount(),re+Qg.MAX_SOURCE_PREVIEW_LINES),pe=[];let ae=!0,ue=q.bracketPairs.findNextBracket(new B.L(re,1));for(;ue!==null;){if(pe.length===0)pe.push(ue);else{const ee=pe[pe.length-1];if(ee.open[0]===ue.open[0]&&ee.isOpen&&!ue.isOpen?pe.pop():pe.push(ue),pe.length===0)if(ae)ae=!1;else return new F.e(re,1,ue.range.endLineNumber+1,1)}const te=q.getLineMaxColumn(re);let K=ue.range.endLineNumber,U=ue.range.endColumn;if(te===ue.range.endColumn&&(K++,U=1),K>de)return new F.e(re,1,de+1,1);ue=q.bracketPairs.findNextBracket(new B.L(K,U))}return new F.e(re,1,de+1,1)}addDecoration(q,re){const de={range:q,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:re}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[de])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(q,re){return this.editor.hasModel()&&q.isNoneOrSingleMouseDown&&q.target.type===6&&(q.hasTriggerModifier||(re?re.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(q,re){const de=this.editor.getModel();return de?(0,L.nD)(this.languageFeaturesService.definitionProvider,de,q,re):Promise.resolve(null)}gotoDefinition(q,re){return this.editor.setPosition(q),this.editor.invokeWithinContext(de=>{const pe=!re&&this.editor.getOption(78)&&!this.isInPeekEditor(de);return new _.DefinitionAction({openToSide:re,openInPeek:pe,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(de,this.editor)})}isInPeekEditor(q){const re=q.get(C.i6);return D.Jy.inPeekEditor.getValue(re)}dispose(){this.toUnhook.dispose()}};k.ID="editor.contrib.gotodefinitionatposition",k.MAX_SOURCE_PREVIEW_LINES=8,k=b([I(1,v.S),I(2,x.O),I(3,N.p)],k),(0,T._K)(k.ID,k),(0,E.Ic)((W,q)=>{const re=W.getColor(M._Yy);re&&q.addRule(`.monaco-editor .goto-definition-link { color: ${re} !important; }`)})},27376:function(Tt,me,a){"use strict";a.d(me,{J:function(){return Ue}});var p=a(15393),d=a(17301),z=a(22258),O=a(9917),S=a(11640),j=a(50187),T=a(24314),B=a(52049),F=a(63580),x=a(94565),v=a(33108),g=a(16141),D=a(72065),c=a(49989),C=a(586),M=a(59422),E=a(26904),_=a(1293),L=a(65321),N=a(23937),b=a(41264),I=a(4669),k=a(66663),W=a(95935),q=a(84527),re=a(45146),de=a(89381),pe=a(68801),ae=a(72042),ue=a(88216),te=a(67488),K=a(34650),U=a(48801),ee=a(75392),X=a(68843),le=a(91847),oe=a(44349),Ce=a(88810),ye=a(97781),ke=function(dt,Re,Ve,at){var pt=arguments.length,Be=pt<3?Re:at===null?at=Object.getOwnPropertyDescriptor(Re,Ve):at,je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Be=Reflect.decorate(dt,Re,Ve,at);else for(var Et=dt.length-1;Et>=0;Et--)(je=dt[Et])&&(Be=(pt<3?je(Be):pt>3?je(Re,Ve,Be):je(Re,Ve))||Be);return pt>3&&Be&&Object.defineProperty(Re,Ve,Be),Be},Te=function(dt,Re){return function(Ve,at){Re(Ve,at,dt)}};let ge=class{constructor(Re){this._resolverService=Re}hasChildren(Re){return Re instanceof _.oQ||Re instanceof _.F2}getChildren(Re){if(Re instanceof _.oQ)return Re.groups;if(Re instanceof _.F2)return Re.resolve(this._resolverService).then(Ve=>Ve.children);throw new Error("bad tree")}};ge=ke([Te(0,ue.S)],ge);class we{getHeight(){return 23}getTemplateId(Re){return Re instanceof _.F2?Oe.id:Je.id}}let ze=class{constructor(Re){this._keybindingService=Re}getKeyboardNavigationLabel(Re){var Ve;if(Re instanceof _.WX){const at=(Ve=Re.parent.getPreview(Re))===null||Ve===void 0?void 0:Ve.preview(Re.range);if(at)return at.value}return(0,W.EZ)(Re.uri)}};ze=ke([Te(0,le.d)],ze);class Qe{getId(Re){return Re instanceof _.WX?Re.id:Re.uri}}let Pe=class extends O.JT{constructor(Re,Ve,at){super();this._uriLabel=Ve;const pt=document.createElement("div");pt.classList.add("reference-file"),this.file=this._register(new U.g(pt,{supportHighlights:!0})),this.badge=new te.Z(L.R3(pt,L.$(".count"))),this._register((0,Ce.WZ)(this.badge,at)),Re.appendChild(pt)}set(Re,Ve){let at=(0,W.XX)(Re.uri);this.file.setLabel((0,X.p)(Re.uri),this._uriLabel.getUriLabel(at,{relative:!0}),{title:this._uriLabel.getUriLabel(Re.uri),matches:Ve});const pt=Re.children.length;this.badge.setCount(pt),pt>1?this.badge.setTitleFormat((0,F.N)("referencesCount","{0} references",pt)):this.badge.setTitleFormat((0,F.N)("referenceCount","{0} reference",pt))}};Pe=ke([Te(1,oe.e),Te(2,ye.XE)],Pe);let Oe=class fS{constructor(Re){this._instantiationService=Re,this.templateId=fS.id}renderTemplate(Re){return this._instantiationService.createInstance(Pe,Re)}renderElement(Re,Ve,at){at.set(Re.element,(0,ee.mB)(Re.filterData))}disposeTemplate(Re){Re.dispose()}};Oe.id="FileReferencesRenderer",Oe=ke([Te(0,D.TG)],Oe);class qe{constructor(Re){this.label=new K.q(Re)}set(Re,Ve){var at;const pt=(at=Re.parent.getPreview(Re))===null||at===void 0?void 0:at.preview(Re.range);if(!pt||!pt.value)this.label.set(`${(0,W.EZ)(Re.uri)}:${Re.range.startLineNumber+1}:${Re.range.startColumn+1}`);else{const{value:Be,highlight:je}=pt;Ve&&!ee.CL.isDefault(Ve)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(Be,(0,ee.mB)(Ve))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(Be,[je]))}}}class Je{constructor(){this.templateId=Je.id}renderTemplate(Re){return new qe(Re)}renderElement(Re,Ve,at){at.set(Re.element,Re.filterData)}disposeTemplate(){}}Je.id="OneReferenceRenderer";class Ne{getWidgetAriaLabel(){return(0,F.N)("treeAriaLabel","References")}getAriaLabel(Re){return Re.ariaMessage}}var Fe=a(64862),ne=function(dt,Re,Ve,at){var pt=arguments.length,Be=pt<3?Re:at===null?at=Object.getOwnPropertyDescriptor(Re,Ve):at,je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Be=Reflect.decorate(dt,Re,Ve,at);else for(var Et=dt.length-1;Et>=0;Et--)(je=dt[Et])&&(Be=(pt<3?je(Be):pt>3?je(Re,Ve,Be):je(Re,Ve))||Be);return pt>3&&Be&&Object.defineProperty(Re,Ve,Be),Be},Q=function(dt,Re){return function(Ve,at){Re(Ve,at,dt)}},ie=function(dt,Re,Ve,at){function pt(Be){return Be instanceof Ve?Be:new Ve(function(je){je(Be)})}return new(Ve||(Ve=Promise))(function(Be,je){function Et(ft){try{Xe(at.next(ft))}catch(an){je(an)}}function Dt(ft){try{Xe(at.throw(ft))}catch(an){je(an)}}function Xe(ft){ft.done?Be(ft.value):pt(ft.value).then(Et,Dt)}Xe((at=at.apply(dt,Re||[])).next())})};class xe{constructor(Re,Ve){this._editor=Re,this._model=Ve,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new O.SL,this._callOnModelChange=new O.SL,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const Re=this._editor.getModel();if(!!Re){for(let Ve of this._model.references)if(Ve.uri.toString()===Re.uri.toString()){this._addDecorations(Ve.parent);return}}}_addDecorations(Re){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const Ve=[],at=[];for(let Be=0,je=Re.children.length;Be<je;Be++){let Et=Re.children[Be];this._decorationIgnoreSet.has(Et.id)||Et.uri.toString()===this._editor.getModel().uri.toString()&&(Ve.push({range:Et.range,options:xe.DecorationOptions}),at.push(Be))}const pt=this._editor.deltaDecorations([],Ve);for(let Be=0;Be<pt.length;Be++)this._decorations.set(pt[Be],Re.children[at[Be]])}_onDecorationChanged(){const Re=[],Ve=this._editor.getModel();if(!!Ve){for(let[at,pt]of this._decorations){const Be=Ve.getDecorationRange(at);if(!Be)continue;let je=!1;if(!T.e.equalsRange(Be,pt.range)){if(T.e.spansMultipleLines(Be))je=!0;else{const Et=pt.range.endColumn-pt.range.startColumn,Dt=Be.endColumn-Be.startColumn;Et!==Dt&&(je=!0)}je?(this._decorationIgnoreSet.add(pt.id),Re.push(at)):pt.range=Be}}for(let at=0,pt=Re.length;at<pt;at++)this._decorations.delete(Re[at]);this._editor.deltaDecorations(Re,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}xe.DecorationOptions=re.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class be{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(Re){let Ve,at;try{const pt=JSON.parse(Re);Ve=pt.ratio,at=pt.heightInLines}catch(pt){}return{ratio:Ve||.7,heightInLines:at||18}}}class Ge extends C.ls{}let nt=class extends B.vk{constructor(Re,Ve,at,pt,Be,je,Et,Dt,Xe,ft,an,An){super(Re,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},je);this._defaultTreeKeyboardSupport=Ve,this.layoutData=at,this._textModelResolverService=Be,this._instantiationService=je,this._peekViewService=Et,this._uriLabel=Dt,this._undoRedoService=Xe,this._keybindingService=ft,this._languageService=an,this._languageConfigurationService=An,this._disposeOnNewModel=new O.SL,this._callOnDispose=new O.SL,this._onDidSelectReference=new I.Q5,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new L.Ro(0,0),this._applyTheme(pt.getColorTheme()),this._callOnDispose.add(pt.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(Re,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,O.B9)(this._preview),(0,O.B9)(this._previewNotAvailableMessage),(0,O.B9)(this._tree),(0,O.B9)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(Re){const Ve=Re.getColor(B.SC)||b.Il.transparent;this.style({arrowColor:Ve,frameColor:Ve,headerBackgroundColor:Re.getColor(B.KY)||b.Il.transparent,primaryHeadingColor:Re.getColor(B.IH),secondaryHeadingColor:Re.getColor(B.R7)})}show(Re){this.editor.revealRangeInCenterIfOutsideViewport(Re,0),super.show(Re,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(Re){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:Re.ctrlKey||Re.metaKey||Re.altKey?"side":"open",source:"title"})}_fillBody(Re){this.setCssClass("reference-zone-widget"),this._messageContainer=L.R3(Re,L.$("div.messages")),L.Cp(this._messageContainer),this._splitView=new N.z(Re,{orientation:1}),this._previewContainer=L.R3(Re,L.$("div.preview.inline"));let Ve={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(q.H,this._previewContainer,Ve,this.editor),L.Cp(this._previewContainer),this._previewNotAvailableMessage=new re.yO(F.N("missingPreviewMessage","no preview available"),pe.bd,re.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=L.R3(Re,L.$("div.ref-tree.inline"));const at={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Ne,keyboardNavigationLabelProvider:this._instantiationService.createInstance(ze),identityProvider:new Qe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:B.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(L.mu(this._treeContainer,"keydown",Be=>{Be.equals(9)&&(this._keybindingService.dispatchEvent(Be,Be.target),Be.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(Ge,"ReferencesWidget",this._treeContainer,new we,[this._instantiationService.createInstance(Oe),this._instantiationService.createInstance(Je)],this._instantiationService.createInstance(ge),at),this._splitView.addView({onDidChange:I.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:Be=>{this._preview.layout({height:this._dim.height,width:Be})}},N.M.Distribute),this._splitView.addView({onDidChange:I.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:Be=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${Be}px`,this._tree.layout(this._dim.height,Be)}},N.M.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let pt=(Be,je)=>{Be instanceof _.WX&&(je==="show"&&this._revealReference(Be,!1),this._onDidSelectReference.fire({element:Be,kind:je,source:"tree"}))};this._tree.onDidOpen(Be=>{Be.sideBySide?pt(Be.element,"side"):Be.editorOptions.pinned?pt(Be.element,"goto"):pt(Be.element,"show")}),L.Cp(this._treeContainer)}_onWidth(Re){this._dim&&this._doLayoutBody(this._dim.height,Re)}_doLayoutBody(Re,Ve){super._doLayoutBody(Re,Ve),this._dim=new L.Ro(Ve,Re),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(Ve),this._splitView.resizeView(0,Ve*this.layoutData.ratio)}setSelection(Re){return this._revealReference(Re,!0).then(()=>{!this._model||(this._tree.setSelection([Re]),this._tree.setFocus([Re]))})}setModel(Re){return this._disposeOnNewModel.clear(),this._model=Re,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=F.N("noResults","No results"),L.$Z(this._messageContainer),Promise.resolve(void 0)):(L.Cp(this._messageContainer),this._decorationsManager=new xe(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(Re=>this._tree.rerender(Re))),this._disposeOnNewModel.add(this._preview.onMouseDown(Re=>{const{event:Ve,target:at}=Re;if(Ve.detail!==2)return;const pt=this._getFocusedReference();!pt||this._onDidSelectReference.fire({element:{uri:pt.uri,range:at.range},kind:Ve.ctrlKey||Ve.metaKey||Ve.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),L.$Z(this._treeContainer),L.$Z(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[Re]=this._tree.getFocus();if(Re instanceof _.WX)return Re;if(Re instanceof _.F2&&Re.children.length>0)return Re.children[0]}revealReference(Re){return ie(this,void 0,void 0,function*(){yield this._revealReference(Re,!1),this._onDidSelectReference.fire({element:Re,kind:"goto",source:"tree"})})}_revealReference(Re,Ve){return ie(this,void 0,void 0,function*(){if(this._revealedReference===Re)return;this._revealedReference=Re,Re.uri.scheme!==k.lg.inMemory?this.setTitle((0,W.Hx)(Re.uri),this._uriLabel.getUriLabel((0,W.XX)(Re.uri))):this.setTitle(F.N("peekView.alternateTitle","References"));const at=this._textModelResolverService.createModelReference(Re.uri);this._tree.getInput()===Re.parent?this._tree.reveal(Re):(Ve&&this._tree.reveal(Re.parent),yield this._tree.expand(Re.parent),this._tree.reveal(Re));const pt=yield at;if(!this._model){pt.dispose();return}(0,O.B9)(this._previewModelReference);const Be=pt.object;if(Be){const je=this._preview.getModel()===Be.textEditorModel?0:1,Et=T.e.lift(Re.range).collapseToStart();this._previewModelReference=pt,this._preview.setModel(Be.textEditorModel),this._preview.setSelection(Et),this._preview.revealRangeInCenter(Et,je)}else this._preview.setModel(this._previewNotAvailableMessage),pt.dispose()})}};nt=ne([Q(3,ye.XE),Q(4,ue.S),Q(5,D.TG),Q(6,B.Fw),Q(7,oe.e),Q(8,Fe.tJ),Q(9,le.d),Q(10,ae.O),Q(11,de.c_)],nt);var _t=function(dt,Re,Ve,at){var pt=arguments.length,Be=pt<3?Re:at===null?at=Object.getOwnPropertyDescriptor(Re,Ve):at,je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Be=Reflect.decorate(dt,Re,Ve,at);else for(var Et=dt.length-1;Et>=0;Et--)(je=dt[Et])&&(Be=(pt<3?je(Be):pt>3?je(Re,Ve,Be):je(Re,Ve))||Be);return pt>3&&Be&&Object.defineProperty(Re,Ve,Be),Be},Ot=function(dt,Re){return function(Ve,at){Re(Ve,at,dt)}},rn=function(dt,Re,Ve,at){function pt(Be){return Be instanceof Ve?Be:new Ve(function(je){je(Be)})}return new(Ve||(Ve=Promise))(function(Be,je){function Et(ft){try{Xe(at.next(ft))}catch(an){je(an)}}function Dt(ft){try{Xe(at.throw(ft))}catch(an){je(an)}}function Xe(ft){ft.done?Be(ft.value):pt(ft.value).then(Et,Dt)}Xe((at=at.apply(dt,Re||[])).next())})};const gt=new g.uy("referenceSearchVisible",!1,F.N("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let Ue=class C0{constructor(Re,Ve,at,pt,Be,je,Et,Dt){this._defaultTreeKeyboardSupport=Re,this._editor=Ve,this._editorService=pt,this._notificationService=Be,this._instantiationService=je,this._storageService=Et,this._configurationService=Dt,this._disposables=new O.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=gt.bindTo(at)}static get(Re){return Re.getContribution(C0.ID)}dispose(){var Re,Ve;this._referenceSearchVisible.reset(),this._disposables.dispose(),(Re=this._widget)===null||Re===void 0||Re.dispose(),(Ve=this._model)===null||Ve===void 0||Ve.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(Re,Ve,at){let pt;if(this._widget&&(pt=this._widget.position),this.closeWidget(),!!pt&&Re.containsPosition(pt))return;this._peekMode=at,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const Be="peekViewLayout",je=be.fromJSON(this._storageService.get(Be,0,"{}"));this._widget=this._instantiationService.createInstance(nt,this._editor,this._defaultTreeKeyboardSupport,je),this._widget.setTitle(F.N("labelLoading","Loading...")),this._widget.show(Re),this._disposables.add(this._widget.onDidClose(()=>{Ve.cancel(),this._widget&&(this._storageService.store(Be,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(Dt=>{let{element:Xe,kind:ft}=Dt;if(!!Xe)switch(ft){case"open":(Dt.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(Xe,!1,!1);break;case"side":this.openReference(Xe,!0,!1);break;case"goto":at?this._gotoReference(Xe):this.openReference(Xe,!1,!0);break}}));const Et=++this._requestIdPool;Ve.then(Dt=>{var Xe;if(Et!==this._requestIdPool||!this._widget){Dt.dispose();return}return(Xe=this._model)===null||Xe===void 0||Xe.dispose(),this._model=Dt,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(F.N("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let ft=this._editor.getModel().uri,an=new j.L(Re.startLineNumber,Re.startColumn),An=this._model.nearestReference(ft,an);if(An)return this._widget.setSelection(An).then(()=>{this._widget&&this._editor.getOption(77)==="editor"&&this._widget.focusOnPreviewEditor()})}})},Dt=>{this._notificationService.error(Dt)})}changeFocusBetweenPreviewAndReferences(){!this._widget||(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(Re){return rn(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const Ve=this._widget.position;if(!Ve)return;const at=this._model.nearestReference(this._editor.getModel().uri,Ve);if(!at)return;const pt=this._model.nextOrPreviousReference(at,Re),Be=this._editor.hasTextFocus(),je=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(pt),yield this._gotoReference(pt),Be?this._editor.focus():this._widget&&je&&this._widget.focusOnPreviewEditor()})}revealReference(Re){return rn(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(Re))})}closeWidget(Re=!0){var Ve,at;(Ve=this._widget)===null||Ve===void 0||Ve.dispose(),(at=this._model)===null||at===void 0||at.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,Re&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(Re){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const Ve=T.e.lift(Re.range).collapseToStart();return this._editorService.openCodeEditor({resource:Re.uri,options:{selection:Ve,selectionSource:"code.jump"}},this._editor).then(at=>{var pt;if(this._ignoreModelChangeEvent=!1,!at||!this._widget){this.closeWidget();return}if(this._editor===at)this._widget.show(Ve),this._widget.focusOnReferenceTree();else{const Be=C0.get(at),je=this._model.clone();this.closeWidget(),at.focus(),Be==null||Be.toggleWidget(Ve,(0,p.PG)(Et=>Promise.resolve(je)),(pt=this._peekMode)!==null&&pt!==void 0?pt:!1)}},at=>{this._ignoreModelChangeEvent=!1,(0,d.dL)(at)})}openReference(Re,Ve,at){Ve||this.closeWidget();const{uri:pt,range:Be}=Re;this._editorService.openCodeEditor({resource:pt,options:{selection:Be,selectionSource:"code.jump",pinned:at}},this._editor,Ve)}};Ue.ID="editor.contrib.referencesController",Ue=_t([Ot(2,g.i6),Ot(3,S.$),Ot(4,M.lT),Ot(5,D.TG),Ot(6,E.Uy),Ot(7,v.Ui)],Ue);function Ye(dt,Re){const Ve=(0,B.rc)(dt);if(!Ve)return;const at=Ue.get(Ve);at&&Re(at)}c.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,z.gx)(2048|41,60),when:g.Ao.or(gt,B.Jy.inPeekEditor),handler(dt){Ye(dt,Re=>{Re.changeFocusBetweenPreviewAndReferences()})}}),c.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:g.Ao.or(gt,B.Jy.inPeekEditor),handler(dt){Ye(dt,Re=>{Re.goToNextOrPreviousReference(!0)})}}),c.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1024|62,secondary:[1024|70],when:g.Ao.or(gt,B.Jy.inPeekEditor),handler(dt){Ye(dt,Re=>{Re.goToNextOrPreviousReference(!1)})}}),x.P0.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),x.P0.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),x.P0.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),x.P0.registerCommand("closeReferenceSearch",dt=>Ye(dt,Re=>Re.closeWidget())),c.W.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1024|9],when:g.Ao.and(B.Jy.inPeekEditor,g.Ao.not("config.editor.stablePeek"))}),c.W.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1024|9],when:g.Ao.and(gt,g.Ao.not("config.editor.stablePeek"))}),c.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2048|18]},when:g.Ao.and(gt,C.CQ,C.PS.negate(),C.uJ.negate()),handler(dt){var Re;const at=(Re=dt.get(C.Lw).lastFocusedList)===null||Re===void 0?void 0:Re.getFocus();Array.isArray(at)&&at[0]instanceof _.WX&&Ye(dt,pt=>pt.revealReference(at[0]))}}),c.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2048|3,mac:{primary:256|3},when:g.Ao.and(gt,C.CQ,C.PS.negate(),C.uJ.negate()),handler(dt){var Re;const at=(Re=dt.get(C.Lw).lastFocusedList)===null||Re===void 0?void 0:Re.getFocus();Array.isArray(at)&&at[0]instanceof _.WX&&Ye(dt,pt=>pt.openReference(at[0],!0,!0))}}),x.P0.registerCommand("openReference",dt=>{var Re;const at=(Re=dt.get(C.Lw).lastFocusedList)===null||Re===void 0?void 0:Re.getFocus();Array.isArray(at)&&at[0]instanceof _.WX&&Ye(dt,pt=>pt.openReference(at[0],!1,!0))})},1293:function(Tt,me,a){"use strict";a.d(me,{WX:function(){return v},F2:function(){return D},oQ:function(){return c}});var p=a(17301),d=a(4669),z=a(44742),O=a(9917),S=a(43702),j=a(95935),T=a(25924),B=a(24314),F=a(63580),x=function(C,M,E,_){function L(N){return N instanceof E?N:new E(function(b){b(N)})}return new(E||(E=Promise))(function(N,b){function I(q){try{W(_.next(q))}catch(re){b(re)}}function k(q){try{W(_.throw(q))}catch(re){b(re)}}function W(q){q.done?N(q.value):L(q.value).then(I,k)}W((_=_.apply(C,M||[])).next())})};class v{constructor(M,E,_,L){this.isProviderFirst=M,this.parent=E,this.link=_,this._rangeCallback=L,this.id=z.a.nextId()}get uri(){return this.link.uri}get range(){var M,E;return(E=(M=this._range)!==null&&M!==void 0?M:this.link.targetSelectionRange)!==null&&E!==void 0?E:this.link.range}set range(M){this._range=M,this._rangeCallback(this)}get ariaMessage(){var M;const E=(M=this.parent.getPreview(this))===null||M===void 0?void 0:M.preview(this.range);return E?(0,F.N)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,j.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,E.value):(0,F.N)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,j.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class g{constructor(M){this._modelReference=M}dispose(){this._modelReference.dispose()}preview(M,E=8){const _=this._modelReference.object.textEditorModel;if(!_)return;const{startLineNumber:L,startColumn:N,endLineNumber:b,endColumn:I}=M,k=_.getWordUntilPosition({lineNumber:L,column:N-E}),W=new B.e(L,k.startColumn,L,N),q=new B.e(b,I,b,1073741824),re=_.getValueInRange(W).replace(/^\s+/,""),de=_.getValueInRange(M),pe=_.getValueInRange(q).replace(/\s+$/,"");return{value:re+de+pe,highlight:{start:re.length,end:re.length+de.length}}}}class D{constructor(M,E){this.parent=M,this.uri=E,this.children=[],this._previews=new S.Y9}dispose(){(0,O.B9)(this._previews.values()),this._previews.clear()}getPreview(M){return this._previews.get(M.uri)}get ariaMessage(){const M=this.children.length;return M===1?(0,F.N)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,j.EZ)(this.uri),this.uri.fsPath):(0,F.N)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",M,(0,j.EZ)(this.uri),this.uri.fsPath)}resolve(M){return x(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let E of this.children)if(!this._previews.has(E.uri))try{const _=yield M.createModelReference(E.uri);this._previews.set(E.uri,new g(_))}catch(_){(0,p.dL)(_)}return this})}}class c{constructor(M,E){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new d.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=M,this._title=E;const[_]=M;M.sort(c._compareReferences);let L;for(let N of M)if((!L||!j.SF.isEqual(L.uri,N.uri,!0))&&(L=new D(this,N.uri),this.groups.push(L)),L.children.length===0||c._compareReferences(N,L.children[L.children.length-1])!==0){const b=new v(_===N,L,N,I=>this._onDidChangeReferenceRange.fire(I));this.references.push(b),L.children.push(b)}}dispose(){(0,O.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new c(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?(0,F.N)("aria.result.0","No results found"):this.references.length===1?(0,F.N)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?(0,F.N)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,F.N)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(M,E){let{parent:_}=M,L=_.children.indexOf(M),N=_.children.length,b=_.parent.groups.length;return b===1||E&&L+1<N||!E&&L>0?(E?L=(L+1)%N:L=(L+N-1)%N,_.children[L]):(L=_.parent.groups.indexOf(_),E?(L=(L+1)%b,_.parent.groups[L].children[0]):(L=(L+b-1)%b,_.parent.groups[L].children[_.parent.groups[L].children.length-1]))}nearestReference(M,E){const _=this.references.map((L,N)=>({idx:N,prefixLen:T.Mh(L.uri.toString(),M.toString()),offsetDist:Math.abs(L.range.startLineNumber-E.lineNumber)*100+Math.abs(L.range.startColumn-E.column)})).sort((L,N)=>L.prefixLen>N.prefixLen?-1:L.prefixLen<N.prefixLen?1:L.offsetDist<N.offsetDist?-1:L.offsetDist>N.offsetDist?1:0)[0];if(_)return this.references[_.idx]}referenceAt(M,E){for(const _ of this.references)if(_.uri.toString()===M.toString()&&B.e.containsPosition(_.range,E))return _}firstReference(){for(const M of this.references)if(M.isProviderFirst)return M;return this.references[0]}static _compareReferences(M,E){return j.SF.compare(M.uri,E.uri)||B.e.compareRangesUsingStarts(M.range,E.range)}}},41095:function(Tt,me,a){"use strict";a.d(me,{R8:function(){return F}});var p=a(15393),d=a(71050),z=a(17301),O=a(16830),S=a(71922),j=function(g,D,c,C){function M(E){return E instanceof c?E:new c(function(_){_(E)})}return new(c||(c=Promise))(function(E,_){function L(I){try{b(C.next(I))}catch(k){_(k)}}function N(I){try{b(C.throw(I))}catch(k){_(k)}}function b(I){I.done?E(I.value):M(I.value).then(L,N)}b((C=C.apply(g,D||[])).next())})};class T{constructor(D,c,C){this.provider=D,this.hover=c,this.ordinal=C}}function B(g,D,c,C,M){return j(this,void 0,void 0,function*(){try{const E=yield Promise.resolve(g.provideHover(c,C,M));if(E&&v(E))return new T(g,E,D)}catch(E){(0,z.Cp)(E)}})}function F(g,D,c,C){const E=g.ordered(D).map((_,L)=>B(_,L,D,c,C));return p.Aq.fromPromises(E).coalesce()}function x(g,D,c,C){return F(g,D,c,C).map(M=>M.hover).toPromise()}(0,O.sb)("_executeHoverProvider",(g,D,c)=>{const C=g.get(S.p);return x(C.hoverProvider,D,c,d.T.None)});function v(g){const D=typeof g.range!="undefined",c=typeof g.contents!="undefined"&&g.contents&&g.contents.length>0;return D&&c}},9427:function(Tt,me,a){"use strict";a.r(me),a.d(me,{ModesHoverController:function(){return Re}});var p=a(22258),d=a(9917),z=a(16830),O=a(24314),S=a(29102),j=a(72042),T=a(22470),B=a(65321),F=a(59069),x=a(9802);const v=B.$;class g extends d.JT{constructor(){super();this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new x.s$(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class D extends d.JT{constructor(Be,je,Et){super();this.actionContainer=B.R3(Be,v("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=B.R3(this.actionContainer,v("a.action")),this.action.setAttribute("role","button"),je.iconClass&&B.R3(this.action,v(`span.icon.${je.iconClass}`));const Dt=B.R3(this.action,v("span"));Dt.textContent=Et?`${je.label} (${Et})`:je.label,this._register(B.nm(this.actionContainer,B.tw.CLICK,Xe=>{Xe.stopPropagation(),Xe.preventDefault(),je.run(this.actionContainer)})),this._register(B.nm(this.actionContainer,B.tw.KEY_UP,Xe=>{new F.y(Xe).equals(3)&&(Xe.stopPropagation(),Xe.preventDefault(),je.run(this.actionContainer))})),this.setEnabled(!0)}static render(Be,je,Et){return new D(Be,je,Et)}setEnabled(Be){Be?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}var c=a(9488),C=a(50187),M=a(45146),E=a(96887),_=a(15393),L=a(17301),N=a(4669),b=function(pt,Be,je,Et){function Dt(Xe){return Xe instanceof je?Xe:new je(function(ft){ft(Xe)})}return new(je||(je=Promise))(function(Xe,ft){function an(Ht){try{Fn(Et.next(Ht))}catch(Kt){ft(Kt)}}function An(Ht){try{Fn(Et.throw(Ht))}catch(Kt){ft(Kt)}}function Fn(Ht){Ht.done?Xe(Ht.value):Dt(Ht.value).then(an,An)}Fn((Et=Et.apply(pt,Be||[])).next())})},I=function(pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be=pt[Symbol.asyncIterator],je;return Be?Be.call(pt):(pt=typeof __values=="function"?__values(pt):pt[Symbol.iterator](),je={},Et("next"),Et("throw"),Et("return"),je[Symbol.asyncIterator]=function(){return this},je);function Et(Xe){je[Xe]=pt[Xe]&&function(ft){return new Promise(function(an,An){ft=pt[Xe](ft),Dt(an,An,ft.done,ft.value)})}}function Dt(Xe,ft,an,An){Promise.resolve(An).then(function(Fn){Xe({value:Fn,done:an})},ft)}};class k{constructor(Be,je,Et){this.value=Be,this.isComplete=je,this.hasLoadingMessage=Et}}class W extends d.JT{constructor(Be,je){super();this._editor=Be,this._computer=je,this._onResult=this._register(new N.Q5),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new _.pY(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new _.pY(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new _.pY(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(53).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(Be,je=!0){this._state=Be,je&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,_.zS)(Be=>this._computer.computeAsync(Be)),(()=>b(this,void 0,void 0,function*(){var Be,je;try{try{for(var Et=I(this._asyncIterable),Dt;Dt=yield Et.next(),!Dt.done;){const Xe=Dt.value;Xe&&(this._result.push(Xe),this._fireResult())}}catch(Xe){Be={error:Xe}}finally{try{Dt&&!Dt.done&&(je=Et.return)&&(yield je.call(Et))}finally{if(Be)throw Be.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(Xe){(0,L.dL)(Xe)}}))()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const Be=this._state===0,je=this._state===4;this._onResult.fire(new k(this._result.slice(0),Be,je))}start(Be){if(Be===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}var q=a(66520),re=a(16141),de=a(72065),pe=a(91847),ae=a(55621),ue=function(pt,Be,je,Et){var Dt=arguments.length,Xe=Dt<3?Be:Et===null?Et=Object.getOwnPropertyDescriptor(Be,je):Et,ft;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Xe=Reflect.decorate(pt,Be,je,Et);else for(var an=pt.length-1;an>=0;an--)(ft=pt[an])&&(Xe=(Dt<3?ft(Xe):Dt>3?ft(Be,je,Xe):ft(Be,je))||Xe);return Dt>3&&Xe&&Object.defineProperty(Be,je,Xe),Xe},te=function(pt,Be){return function(je,Et){Be(je,Et,pt)}};const K=B.$;let U=class gS extends d.JT{constructor(Be,je,Et){super();this._editor=Be,this._instantiationService=je,this._keybindingService=Et,this._widget=this._register(this._instantiationService.createInstance(le,this._editor)),this._decorationsChangerListener=this._register(new ee(this._editor)),this._messages=[],this._messagesAreComplete=!1,this._participants=[];for(const Dt of q.Ae.getAll())this._participants.push(this._instantiationService.createInstance(Dt,this._editor));this._participants.sort((Dt,Xe)=>Dt.hoverOrdinal-Xe.hoverOrdinal),this._computer=new Ce(this._editor,this._participants),this._hoverOperation=this._register(new W(this._editor,this._computer)),this._register(this._hoverOperation.onResult(Dt=>{this._withResult(Dt.value,Dt.isComplete,Dt.hasLoadingMessage)})),this._register(this._decorationsChangerListener.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(B.mu(this._widget.getDomNode(),"keydown",Dt=>{Dt.equals(9)&&this.hide()})),this._register(E.RW.onDidChange(()=>{this._widget.position&&this._computer.anchor&&this._messages.length>0&&(this._widget.clear(),this._renderMessages(this._computer.anchor,this._messages))}))}_onModelDecorationsChanged(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}maybeShowAt(Be){const je=[];for(const Dt of this._participants)if(Dt.suggestHoverAnchor){const Xe=Dt.suggestHoverAnchor(Be);Xe&&je.push(Xe)}const Et=Be.target;if(Et.type===6&&je.push(new q.Qj(0,Et.range)),Et.type===7){const Dt=this._editor.getOption(44).typicalHalfwidthCharacterWidth/2;!Et.detail.isAfterLines&&typeof Et.detail.horizontalDistanceToText=="number"&&Et.detail.horizontalDistanceToText<Dt&&je.push(new q.Qj(0,Et.range))}return je.length===0?!1:(je.sort((Dt,Xe)=>Xe.priority-Dt.priority),this._startShowingAt(je[0],0,!1),!0)}startShowingAtRange(Be,je,Et){this._startShowingAt(new q.Qj(0,Be),je,Et)}_startShowingAt(Be,je,Et){if(!(this._computer.anchor&&this._computer.anchor.equals(Be))){if(this._hoverOperation.cancel(),this._widget.position)if(!this._computer.anchor||!Be.canAdoptVisibleHover(this._computer.anchor,this._widget.position))this.hide();else{const Dt=this._messages.filter(Xe=>Xe.isValidForHoverAnchor(Be));if(Dt.length===0)this.hide();else{if(Dt.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(Be,Dt)}}this._computer.anchor=Be,this._computer.shouldFocus=Et,this._hoverOperation.start(je)}}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}isColorPickerVisible(){return this._widget.isColorPickerVisible}_addLoadingMessage(Be){if(this._computer.anchor){for(const je of this._participants)if(je.createLoadingMessage){const Et=je.createLoadingMessage(this._computer.anchor);if(Et)return Be.slice(0).concat([Et])}}return Be}_withResult(Be,je,Et){this._messages=Et?this._addLoadingMessage(Be):Be,this._messagesAreComplete=je,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):je&&this.hide()}_renderMessages(Be,je){let Et=1073741824,Dt=je[0].range,Xe=null;for(const Kt of je)Et=Math.min(Et,Kt.range.startColumn),Dt=O.e.plusRange(Dt,Kt.range),Kt.forceShowAtRange&&(Xe=Kt.range);const ft=new d.SL,an=ft.add(new oe(this._keybindingService)),An=document.createDocumentFragment();let Fn=null;const Ht={fragment:An,statusBar:an,setColorPicker:Kt=>Fn=Kt,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const Kt of this._participants){const pn=je.filter(Vn=>Vn.owner===Kt);pn.length>0&&ft.add(Kt.renderHoverParts(Ht,pn))}if(an.hasContent&&An.appendChild(an.hoverElement),An.hasChildNodes()){if(Dt){const Kt=this._decorationsChangerListener.deltaDecorations([],[{range:Dt,options:gS._DECORATION_OPTIONS}]);ft.add((0,d.OF)(()=>{this._decorationsChangerListener.deltaDecorations(Kt,[])}))}this._widget.showAt(An,new X(Fn,Xe?Xe.getStartPosition():new C.L(Be.range.startLineNumber,Et),Xe||Dt,this._editor.getOption(53).above,this._computer.shouldFocus,ft))}else ft.dispose()}};U._DECORATION_OPTIONS=M.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),U=ue([te(1,de.TG),te(2,pe.d)],U);class ee extends d.JT{constructor(Be){super();this._editor=Be,this._onDidChangeModelDecorations=this._register(new N.Q5),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._isChangingDecorations=!1,this._register(this._editor.onDidChangeModelDecorations(je=>{this._isChangingDecorations||this._onDidChangeModelDecorations.fire(je)}))}deltaDecorations(Be,je){try{return this._isChangingDecorations=!0,this._editor.deltaDecorations(Be,je)}finally{this._isChangingDecorations=!1}}}class X{constructor(Be,je,Et,Dt,Xe,ft){this.colorPicker=Be,this.showAtPosition=je,this.showAtRange=Et,this.preferAbove=Dt,this.stoleFocus=Xe,this.disposables=ft}}let le=class mS extends d.JT{constructor(Be,je){super();this._editor=Be,this._contextKeyService=je,this.allowEditorOverflow=!0,this._hoverVisibleKey=S.u.hoverVisible.bindTo(this._contextKeyService),this._hover=this._register(new g),this._visibleData=null,this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(Et=>{Et.hasChanged(44)&&this._updateFont()})),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this)}get position(){var Be,je;return(je=(Be=this._visibleData)===null||Be===void 0?void 0:Be.showAtPosition)!==null&&je!==void 0?je:null}get isColorPickerVisible(){var Be;return Boolean((Be=this._visibleData)===null||Be===void 0?void 0:Be.colorPicker)}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return mS.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let Be=this._visibleData.preferAbove;return!Be&&this._contextKeyService.getContextKeyValue(ae._y.Visible.key)&&(Be=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:Be?[1,2]:[2,1]}}_setVisibleData(Be){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=Be,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const Be=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:je,lineHeight:Et}=this._editor.getOption(44);this._hover.contentsDomNode.style.fontSize=`${je}px`,this._hover.contentsDomNode.style.lineHeight=`${Et/je}`,this._hover.contentsDomNode.style.maxHeight=`${Be}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(je=>this._editor.applyFontInfo(je))}showAt(Be,je){this._setVisibleData(je),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(Be),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this._editor.layoutContentWidget(this),this.onContentsChanged(),this._editor.render(),this._editor.layoutContentWidget(this),this.onContentsChanged(),je.stoleFocus&&this._hover.containerDomNode.focus(),je.colorPicker&&je.colorPicker.layout()}hide(){if(this._visibleData){const Be=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),Be&&this._editor.focus()}}onContentsChanged(){this._hover.onContentsChanged();const Be=this._hover.scrollbar.getScrollDimensions();if(Be.scrollWidth>Be.width){const Et=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==Et&&(this._hover.contentsDomNode.style.paddingBottom=Et,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}};le.ID="editor.contrib.contentHoverWidget",le=ue([te(1,re.i6)],le);let oe=class extends d.JT{constructor(Be){super();this._keybindingService=Be,this._hasContent=!1,this.hoverElement=K("div.hover-row.status-bar"),this.actionsElement=B.R3(this.hoverElement,K("div.actions"))}get hasContent(){return this._hasContent}addAction(Be){const je=this._keybindingService.lookupKeybinding(Be.commandId),Et=je?je.getLabel():null;return this._hasContent=!0,this._register(D.render(this.actionsElement,Be,Et))}append(Be){const je=B.R3(this.actionsElement,Be);return this._hasContent=!0,je}};oe=ue([te(0,pe.d)],oe);class Ce{constructor(Be,je){this._editor=Be,this._participants=je,this._anchor=null,this._shouldFocus=!1}get anchor(){return this._anchor}set anchor(Be){this._anchor=Be}get shouldFocus(){return this._shouldFocus}set shouldFocus(Be){this._shouldFocus=Be}static _getLineDecorations(Be,je){if(je.type!==1)return[];const Et=Be.getModel(),Dt=je.range.startLineNumber,Xe=Et.getLineMaxColumn(Dt);return Be.getLineDecorations(Dt).filter(ft=>{if(ft.options.isWholeLine)return!0;const an=ft.range.startLineNumber===Dt?ft.range.startColumn:1,An=ft.range.endLineNumber===Dt?ft.range.endColumn:Xe;if(ft.options.showIfCollapsed){if(an>je.range.startColumn+1||je.range.endColumn-1>An)return!1}else if(an>je.range.startColumn||je.range.endColumn>An)return!1;return!0})}computeAsync(Be){const je=this._anchor;if(!this._editor.hasModel()||!je)return _.Aq.EMPTY;const Et=Ce._getLineDecorations(this._editor,je);return _.Aq.merge(this._participants.map(Dt=>Dt.computeAsync?Dt.computeAsync(je,Et,Be):_.Aq.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const Be=Ce._getLineDecorations(this._editor,this._anchor);let je=[];for(const Et of this._participants)je=je.concat(Et.computeSync(this._anchor,Be));return(0,c.kX)(je)}}var ye=a(59365),ke=a(498),Te=a(50988);const ge=B.$;class we extends d.JT{constructor(Be,je,Et=Te.SW){super();this._renderDisposeables=this._register(new d.SL),this._editor=Be,this._isVisible=!1,this._messages=[],this._hover=this._register(new g),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new ke.$({editor:this._editor},je,Et)),this._computer=new ze(this._editor),this._hoverOperation=this._register(new W(this._editor,this._computer)),this._register(this._hoverOperation.onResult(Dt=>{this._withResult(Dt.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(Dt=>{Dt.hasChanged(44)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return we.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(je=>this._editor.applyFontInfo(je))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(Be){this._computer.lineNumber!==Be&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=Be,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),!!this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(Be){this._messages=Be,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(Be,je){this._renderDisposeables.clear();const Et=document.createDocumentFragment();for(const Dt of je){const Xe=ge("div.hover-row.markdown-hover"),ft=B.R3(Xe,ge("div.hover-contents")),an=this._renderDisposeables.add(this._markdownRenderer.render(Dt.value));ft.appendChild(an.element),Et.appendChild(Xe)}this._updateContents(Et),this._showAt(Be)}_updateContents(Be){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(Be),this._updateFont()}_showAt(Be){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const je=this._editor.getLayoutInfo(),Et=this._editor.getTopForLineNumber(Be),Dt=this._editor.getScrollTop(),Xe=this._editor.getOption(59),ft=this._hover.containerDomNode.clientHeight,an=Et-Dt-(ft-Xe)/2;this._hover.containerDomNode.style.left=`${je.glyphMarginLeft+je.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(an),0)}px`}}we.ID="editor.contrib.modesGlyphHoverWidget";class ze{constructor(Be){this._editor=Be,this._lineNumber=-1}get lineNumber(){return this._lineNumber}set lineNumber(Be){this._lineNumber=Be}computeSync(){const Be=Dt=>({value:Dt}),je=this._editor.getLineDecorations(this._lineNumber),Et=[];if(!je)return Et;for(const Dt of je){if(!Dt.options.glyphMarginClassName)continue;const Xe=Dt.options.glyphMarginHoverMessage;!Xe||(0,ye.CP)(Xe)||Et.push(...(0,c._2)(Xe).map(Be))}return Et}}var Qe=a(63580),Pe=a(73910),Oe=a(97781),qe=a(22374),Je=a(95935),Ne=a(36357),Fe=a(75396),ne=a(86454),Q=a(76014),ie=a(40874),xe=a(98674),be=a(90535),Ge=a(71922),nt=function(pt,Be,je,Et){var Dt=arguments.length,Xe=Dt<3?Be:Et===null?Et=Object.getOwnPropertyDescriptor(Be,je):Et,ft;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Xe=Reflect.decorate(pt,Be,je,Et);else for(var an=pt.length-1;an>=0;an--)(ft=pt[an])&&(Xe=(Dt<3?ft(Xe):Dt>3?ft(Be,je,Xe):ft(Be,je))||Xe);return Dt>3&&Xe&&Object.defineProperty(Be,je,Xe),Xe},_t=function(pt,Be){return function(je,Et){Be(je,Et,pt)}};const Ot=B.$;class rn{constructor(Be,je,Et){this.owner=Be,this.range=je,this.marker=Et}isValidForHoverAnchor(Be){return Be.type===1&&this.range.startColumn<=Be.range.startColumn&&this.range.endColumn>=Be.range.endColumn}}const gt={type:1,filter:{include:Q.yN.QuickFix}};let Ue=class{constructor(Be,je,Et,Dt){this._editor=Be,this._markerDecorationsService=je,this._openerService=Et,this._languageFeaturesService=Dt,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}computeSync(Be,je){if(!this._editor.hasModel()||Be.type!==1)return[];const Et=this._editor.getModel(),Dt=Be.range.startLineNumber,Xe=Et.getLineMaxColumn(Dt),ft=[];for(const an of je){const An=an.range.startLineNumber===Dt?an.range.startColumn:1,Fn=an.range.endLineNumber===Dt?an.range.endColumn:Xe,Ht=this._markerDecorationsService.getMarker(Et.uri,an);if(!Ht)continue;const Kt=new O.e(Be.range.startLineNumber,An,Be.range.startLineNumber,Fn);ft.push(new rn(this,Kt,Ht))}return ft}renderHoverParts(Be,je){if(!je.length)return d.JT.None;const Et=new d.SL;je.forEach(Xe=>Be.fragment.appendChild(this.renderMarkerHover(Xe,Et)));const Dt=je.length===1?je[0]:je.sort((Xe,ft)=>xe.ZL.compare(Xe.marker.severity,ft.marker.severity))[0];return this.renderMarkerStatusbar(Be,Dt,Et),Et}renderMarkerHover(Be,je){const Et=Ot("div.hover-row"),Dt=B.R3(Et,Ot("div.marker.hover-contents")),{source:Xe,message:ft,code:an,relatedInformation:An}=Be.marker;this._editor.applyFontInfo(Dt);const Fn=B.R3(Dt,Ot("span"));if(Fn.style.whiteSpace="pre-wrap",Fn.innerText=ft,Xe||an)if(an&&typeof an!="string"){const Ht=Ot("span");if(Xe){const kt=B.R3(Ht,Ot("span"));kt.innerText=Xe}const Kt=B.R3(Ht,Ot("a.code-link"));Kt.setAttribute("href",an.target.toString()),je.add(B.nm(Kt,"click",kt=>{this._openerService.open(an.target,{allowCommands:!0}),kt.preventDefault(),kt.stopPropagation()}));const pn=B.R3(Kt,Ot("span"));pn.innerText=an.value;const Vn=B.R3(Dt,Ht);Vn.style.opacity="0.6",Vn.style.paddingLeft="6px"}else{const Ht=B.R3(Dt,Ot("span"));Ht.style.opacity="0.6",Ht.style.paddingLeft="6px",Ht.innerText=Xe&&an?`${Xe}(${an})`:Xe||`(${an})`}if((0,c.Of)(An))for(const{message:Ht,resource:Kt,startLineNumber:pn,startColumn:Vn}of An){const kt=B.R3(Dt,Ot("div"));kt.style.marginTop="8px";const Zt=B.R3(kt,Ot("a"));Zt.innerText=`${(0,Je.EZ)(Kt)}(${pn}, ${Vn}): `,Zt.style.cursor="pointer",je.add(B.nm(Zt,"click",Pi=>{Pi.stopPropagation(),Pi.preventDefault(),this._openerService&&this._openerService.open(Kt,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:pn,startColumn:Vn}}}).catch(L.dL)}));const wn=B.R3(kt,Ot("span"));wn.innerText=Ht,this._editor.applyFontInfo(wn)}return Et}renderMarkerStatusbar(Be,je,Et){if((je.marker.severity===xe.ZL.Error||je.marker.severity===xe.ZL.Warning||je.marker.severity===xe.ZL.Info)&&Be.statusBar.addAction({label:Qe.N("view problem","View Problem"),commandId:ie.NextMarkerAction.ID,run:()=>{var Dt;Be.hide(),(Dt=ie.MarkerController.get(this._editor))===null||Dt===void 0||Dt.showAtMarker(je.marker),this._editor.focus()}}),!this._editor.getOption(81)){const Dt=Be.statusBar.append(Ot("div"));this.recentMarkerCodeActionsInfo&&(xe.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===xe.H0.makeKey(je.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(Dt.textContent=Qe.N("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const Xe=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?d.JT.None:Et.add((0,_.Vg)(()=>Dt.textContent=Qe.N("checkingForQuickFixes","Checking for quick fixes..."),200));Dt.textContent||(Dt.textContent=String.fromCharCode(160));const ft=this.getCodeActions(je.marker);Et.add((0,d.OF)(()=>ft.cancel())),ft.then(an=>{if(Xe.dispose(),this.recentMarkerCodeActionsInfo={marker:je.marker,hasCodeActions:an.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){an.dispose(),Dt.textContent=Qe.N("noQuickFixes","No quick fixes available");return}Dt.style.display="none";let An=!1;Et.add((0,d.OF)(()=>{An||an.dispose()})),Be.statusBar.addAction({label:Qe.N("quick fixes","Quick Fix..."),commandId:ne.E7.Id,run:Fn=>{An=!0;const Ht=ne.pY.get(this._editor),Kt=B.i(Fn);Be.hide(),Ht==null||Ht.showCodeActions(gt,an,{x:Kt.left+6,y:Kt.top+Kt.height+6})}})},L.dL)}}getCodeActions(Be){return(0,_.PG)(je=>(0,Fe.aI)(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new O.e(Be.startLineNumber,Be.startColumn,Be.endLineNumber,Be.endColumn),gt,be.Ex.None,je))}};Ue=nt([_t(1,Ne.i),_t(2,Te.v4),_t(3,Ge.p)],Ue),(0,Oe.Ic)((pt,Be)=>{const je=pt.getColor(Pe.url);je&&Be.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${je}; }`);const Et=pt.getColor(Pe.sgC);Et&&Be.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${Et}; }`)});var Ye=function(pt,Be,je,Et){var Dt=arguments.length,Xe=Dt<3?Be:Et===null?Et=Object.getOwnPropertyDescriptor(Be,je):Et,ft;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Xe=Reflect.decorate(pt,Be,je,Et);else for(var an=pt.length-1;an>=0;an--)(ft=pt[an])&&(Xe=(Dt<3?ft(Xe):Dt>3?ft(Be,je,Xe):ft(Be,je))||Xe);return Dt>3&&Xe&&Object.defineProperty(Be,je,Xe),Xe},dt=function(pt,Be){return function(je,Et){Be(je,Et,pt)}};let Re=class pS{constructor(Be,je,Et,Dt,Xe){this._editor=Be,this._instantiationService=je,this._openerService=Et,this._languageService=Dt,this._toUnhook=new d.SL,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(ft=>{ft.hasChanged(53)&&(this._unhookEvents(),this._hookEvents())})}static get(Be){return Be.getContribution(pS.ID)}_hookEvents(){const Be=()=>this._hideWidgets(),je=this._editor.getOption(53);this._isHoverEnabled=je.enabled,this._isHoverSticky=je.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(Et=>this._onEditorMouseDown(Et))),this._toUnhook.add(this._editor.onMouseUp(Et=>this._onEditorMouseUp(Et))),this._toUnhook.add(this._editor.onMouseMove(Et=>this._onEditorMouseMove(Et))),this._toUnhook.add(this._editor.onKeyDown(Et=>this._onKeyDown(Et)))):(this._toUnhook.add(this._editor.onMouseMove(Et=>this._onEditorMouseMove(Et))),this._toUnhook.add(this._editor.onKeyDown(Et=>this._onKeyDown(Et)))),this._toUnhook.add(this._editor.onMouseLeave(Be)),this._toUnhook.add(this._editor.onDidChangeModel(Be)),this._toUnhook.add(this._editor.onDidScrollChange(Et=>this._onEditorScrollChanged(Et)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(Be){(Be.scrollTopChanged||Be.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(Be){this._isMouseDown=!0;const je=Be.target;if(je.type===9&&je.detail===le.ID){this._hoverClicked=!0;return}je.type===12&&je.detail===we.ID||(je.type!==12&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(Be){this._isMouseDown=!1}_onEditorMouseMove(Be){var je,Et,Dt,Xe,ft;const an=Be.target;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&an.type===9&&an.detail===le.ID||this._isHoverSticky&&!((Et=(je=Be.event.browserEvent.view)===null||je===void 0?void 0:je.getSelection())===null||Et===void 0?void 0:Et.isCollapsed)||!this._isHoverSticky&&an.type===9&&an.detail===le.ID&&((Dt=this._contentWidget)===null||Dt===void 0?void 0:Dt.isColorPickerVisible())||this._isHoverSticky&&an.type===12&&an.detail===we.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(Be)){(Xe=this._glyphWidget)===null||Xe===void 0||Xe.hide();return}if(an.type===2&&an.position){(ft=this._contentWidget)===null||ft===void 0||ft.hide(),this._glyphWidget||(this._glyphWidget=new we(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(an.position.lineNumber);return}this._hideWidgets()}_onKeyDown(Be){Be.keyCode!==5&&Be.keyCode!==6&&Be.keyCode!==57&&Be.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var Be,je,Et;this._isMouseDown&&this._hoverClicked&&((Be=this._contentWidget)===null||Be===void 0?void 0:Be.isColorPickerVisible())||(this._hoverClicked=!1,(je=this._glyphWidget)===null||je===void 0||je.hide(),(Et=this._contentWidget)===null||Et===void 0||Et.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(U,this._editor)),this._contentWidget}isColorPickerVisible(){var Be;return((Be=this._contentWidget)===null||Be===void 0?void 0:Be.isColorPickerVisible())||!1}showContentHover(Be,je,Et){this._getOrCreateContentWidget().startShowingAtRange(Be,je,Et)}dispose(){var Be,je;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(Be=this._glyphWidget)===null||Be===void 0||Be.dispose(),(je=this._contentWidget)===null||je===void 0||je.dispose()}};Re.ID="editor.contrib.hover",Re=Ye([dt(1,de.TG),dt(2,Te.v4),dt(3,j.O),dt(4,re.i6)],Re);class Ve extends z.R6{constructor(){super({id:"editor.action.showHover",label:Qe.N({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:S.u.editorTextFocus,primary:(0,p.gx)(2048|41,2048|39),weight:100}})}run(Be,je){if(!je.hasModel())return;let Et=Re.get(je);if(!Et)return;const Dt=je.getPosition(),Xe=new O.e(Dt.lineNumber,Dt.column,Dt.lineNumber,Dt.column),ft=je.getOption(2)===2;Et.showContentHover(Xe,1,ft)}}class at extends z.R6{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:Qe.N({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(Be,je){const Et=Re.get(je);if(!Et)return;const Dt=je.getPosition();if(!Dt)return;const Xe=new O.e(Dt.lineNumber,Dt.column,Dt.lineNumber,Dt.column),ft=T.GotoDefinitionAtPositionEditorContribution.get(je);if(!ft)return;ft.startFindDefinitionFromCursor(Dt).then(()=>{Et.showContentHover(Xe,1,!0)})}}(0,z._K)(Re.ID,Re),(0,z.Qr)(Ve),(0,z.Qr)(at),q.Ae.register(qe.D5),q.Ae.register(Ue),(0,Oe.Ic)((pt,Be)=>{const je=pt.getColor(Pe.ptc);je&&Be.addRule(`.monaco-editor .hoverHighlight { background-color: ${je}; }`);const Et=pt.getColor(Pe.yJx);Et&&Be.addRule(`.monaco-editor .monaco-hover { background-color: ${Et}; }`);const Dt=pt.getColor(Pe.CNo);Dt&&(Be.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${Dt}; }`),Be.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${Dt.transparent(.5)}; }`),Be.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${Dt.transparent(.5)}; }`),Be.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${Dt.transparent(.5)}; }`));const Xe=pt.getColor(Pe.url);Xe&&Be.addRule(`.monaco-editor .monaco-hover a { color: ${Xe}; }`);const ft=pt.getColor(Pe.sgC);ft&&Be.addRule(`.monaco-editor .monaco-hover a:hover { color: ${ft}; }`);const an=pt.getColor(Pe.Sbf);an&&Be.addRule(`.monaco-editor .monaco-hover { color: ${an}; }`);const An=pt.getColor(Pe.LoV);An&&Be.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${An}; }`);const Fn=pt.getColor(Pe.SwI);Fn&&Be.addRule(`.monaco-editor .monaco-hover code { background-color: ${Fn}; }`)})},66520:function(Tt,me,a){"use strict";a.d(me,{Qj:function(){return p},YM:function(){return d},Ae:function(){return z}});class p{constructor(S,j){this.priority=S,this.range=j,this.type=1}equals(S){return S.type===1&&this.range.equalsRange(S.range)}canAdoptVisibleHover(S,j){return S.type===1&&j.lineNumber===this.range.startLineNumber}}class d{constructor(S,j,T){this.priority=S,this.owner=j,this.range=T,this.type=2}equals(S){return S.type===2&&this.owner===S.owner}canAdoptVisibleHover(S,j){return S.type===2&&this.owner===S.owner}}const z=new class{constructor(){this._participants=[]}register(S){this._participants.push(S)}getAll(){return this._participants}}},22374:function(Tt,me,a){"use strict";a.d(me,{hU:function(){return _},D5:function(){return L},c:function(){return N}});var p=a(65321),d=a(9488),z=a(15393),O=a(59365),S=a(9917),j=a(498),T=a(50187),B=a(24314),F=a(72042),x=a(41095),v=a(63580),g=a(33108),D=a(50988),c=a(71922),C=function(b,I,k,W){var q=arguments.length,re=q<3?I:W===null?W=Object.getOwnPropertyDescriptor(I,k):W,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(b,I,k,W);else for(var pe=b.length-1;pe>=0;pe--)(de=b[pe])&&(re=(q<3?de(re):q>3?de(I,k,re):de(I,k))||re);return q>3&&re&&Object.defineProperty(I,k,re),re},M=function(b,I){return function(k,W){I(k,W,b)}};const E=p.$;class _{constructor(I,k,W,q){this.owner=I,this.range=k,this.contents=W,this.ordinal=q}isValidForHoverAnchor(I){return I.type===1&&this.range.startColumn<=I.range.startColumn&&this.range.endColumn>=I.range.endColumn}}let L=class{constructor(I,k,W,q,re){this._editor=I,this._languageService=k,this._openerService=W,this._configurationService=q,this._languageFeaturesService=re,this.hoverOrdinal=2}createLoadingMessage(I){return new _(this,I.range,[new O.W5().appendText(v.N("modesContentHover.loading","Loading..."))],2e3)}computeSync(I,k){if(!this._editor.hasModel()||I.type!==1)return[];const W=this._editor.getModel(),q=I.range.startLineNumber,re=W.getLineMaxColumn(q),de=[];let pe=1e3;const ae=W.getLineLength(q),ue=W.getLanguageIdAtPosition(I.range.startLineNumber,I.range.startColumn),te=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:ue});typeof te=="number"&&ae>=te&&de.push(new _(this,I.range,[{value:v.N("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],pe++));for(const K of k){const U=K.range.startLineNumber===q?K.range.startColumn:1,ee=K.range.endLineNumber===q?K.range.endColumn:re,X=K.options.hoverMessage;if(!X||(0,O.CP)(X))continue;const le=new B.e(I.range.startLineNumber,U,I.range.startLineNumber,ee);de.push(new _(this,le,(0,d._2)(X),pe++))}return de}computeAsync(I,k,W){if(!this._editor.hasModel()||I.type!==1)return z.Aq.EMPTY;const q=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(q))return z.Aq.EMPTY;const re=new T.L(I.range.startLineNumber,I.range.startColumn);return(0,x.R8)(this._languageFeaturesService.hoverProvider,q,re,W).filter(de=>!(0,O.CP)(de.hover.contents)).map(de=>{const pe=de.hover.range?B.e.lift(de.hover.range):I.range;return new _(this,pe,de.hover.contents,de.ordinal)})}renderHoverParts(I,k){return N(I,k,this._editor,this._languageService,this._openerService)}};L=C([M(1,F.O),M(2,D.v4),M(3,g.Ui),M(4,c.p)],L);function N(b,I,k,W,q){I.sort((de,pe)=>de.ordinal-pe.ordinal);const re=new S.SL;for(const de of I)for(const pe of de.contents){if((0,O.CP)(pe))continue;const ae=E("div.hover-row.markdown-hover"),ue=p.R3(ae,E("div.hover-contents")),te=re.add(new j.$({editor:k},W,q));re.add(te.onDidRenderAsync(()=>{ue.className="hover-contents code-hover-contents",b.onContentsChanged()}));const K=re.add(te.render(pe));ue.appendChild(K.element),b.fragment.appendChild(ae)}return re}},56353:function(Tt,me,a){"use strict";a.r(me);var p=a(15393),d=a(17301),z=a(16467),O=a(16830),S=a(24314),j=a(3860),T=a(29102),B=a(45146),F=a(85215),x=a(8625),v=a(63580),g=a(97781);class D{constructor(N,b,I){this._editRange=N,this._originalSelection=b,this._text=I}getEditOperations(N,b){b.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(N,b){const k=b.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new j.Y(k.endLineNumber,Math.min(this._originalSelection.positionColumn,k.endColumn),k.endLineNumber,Math.min(this._originalSelection.positionColumn,k.endColumn)):new j.Y(k.endLineNumber,k.endColumn-this._text.length,k.endLineNumber,k.endColumn)}}var c=function(L,N,b,I){var k=arguments.length,W=k<3?N:I===null?I=Object.getOwnPropertyDescriptor(N,b):I,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(L,N,b,I);else for(var re=L.length-1;re>=0;re--)(q=L[re])&&(W=(k<3?q(W):k>3?q(N,b,W):q(N,b))||W);return k>3&&W&&Object.defineProperty(N,b,W),W},C=function(L,N){return function(b,I){N(b,I,L)}};let M=class b0{constructor(N,b){this.decorationIds=[],this.editor=N,this.editorWorkerService=b}static get(N){return N.getContribution(b0.ID)}dispose(){}run(N,b){this.currentRequest&&this.currentRequest.cancel();const I=this.editor.getSelection(),k=this.editor.getModel();if(!k||!I)return;let W=I;if(W.startLineNumber!==W.endLineNumber)return;const q=new z.yy(this.editor,1|4),re=k.uri;return this.editorWorkerService.canNavigateValueSet(re)?(this.currentRequest=(0,p.PG)(de=>this.editorWorkerService.navigateValueSet(re,W,b)),this.currentRequest.then(de=>{if(!de||!de.range||!de.value||!q.validate(this.editor))return;let pe=S.e.lift(de.range),ae=de.range,ue=de.value.length-(W.endColumn-W.startColumn);ae={startLineNumber:ae.startLineNumber,startColumn:ae.startColumn,endLineNumber:ae.endLineNumber,endColumn:ae.startColumn+de.value.length},ue>1&&(W=new j.Y(W.startLineNumber,W.startColumn,W.endLineNumber,W.endColumn+ue-1));const te=new D(pe,W,de.value);this.editor.pushUndoStop(),this.editor.executeCommand(N,te),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:ae,options:b0.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=(0,p.Vs)(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(d.dL)}).catch(d.dL)):Promise.resolve(void 0)}};M.ID="editor.contrib.inPlaceReplaceController",M.DECORATION=B.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),M=c([C(1,F.p)],M);class E extends O.R6{constructor(){super({id:"editor.action.inPlaceReplace.up",label:v.N("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:T.u.writable,kbOpts:{kbExpr:T.u.editorTextFocus,primary:2048|1024|82,weight:100}})}run(N,b){const I=M.get(b);return I?I.run(this.id,!0):Promise.resolve(void 0)}}class _ extends O.R6{constructor(){super({id:"editor.action.inPlaceReplace.down",label:v.N("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:T.u.writable,kbOpts:{kbExpr:T.u.editorTextFocus,primary:2048|1024|84,weight:100}})}run(N,b){const I=M.get(b);return I?I.run(this.id,!1):Promise.resolve(void 0)}}(0,O._K)(M.ID,M),(0,O.Qr)(E),(0,O.Qr)(_),(0,g.Ic)((L,N)=>{const b=L.getColor(x.Dl);b&&N.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${b}; }`)})},18279:function(Tt,me,a){"use strict";a.d(me,{Y:function(){return p},J:function(){return d}});function p(z,O){let S=0;for(let j=0;j<z.length;j++)z.charAt(j)==="	"?S+=O:S++;return S}function d(z,O,S){z=z<0?0:z;let j="";if(!S){let T=Math.floor(z/O);z=z%O;for(let B=0;B<T;B++)j+="	"}for(let T=0;T<z;T++)j+=" ";return j}},84602:function(Tt,me,a){"use strict";a.r(me),a.d(me,{getReindentEditOperations:function(){return C},IndentationToSpacesAction:function(){return M},IndentationToTabsAction:function(){return E},ChangeIndentationSizeAction:function(){return _},IndentUsingTabs:function(){return L},IndentUsingSpaces:function(){return N},DetectIndentation:function(){return b},ReindentLinesAction:function(){return I},ReindentSelectedLinesAction:function(){return k},AutoIndentOnPasteCommand:function(){return W},AutoIndentOnPaste:function(){return q},IndentationToSpacesCommand:function(){return de},IndentationToTabsCommand:function(){return pe}});var p=a(9917),d=a(25924),z=a(16830),O=a(10291),S=a(69386),j=a(24314),T=a(3860),B=a(29102),F=a(89381),x=a(73733),v=a(18279),g=a(63580),D=a(41157),c=a(83158);function C(ae,ue,te,K,U){if(ae.getLineCount()===1&&ae.getLineMaxColumn(1)===1)return[];const ee=ue.getLanguageConfiguration(ae.getLanguageId()).indentationRules;if(!ee)return[];for(K=Math.min(K,ae.getLineCount());te<=K&&ee.unIndentedLinePattern;){let Qe=ae.getLineContent(te);if(!ee.unIndentedLinePattern.test(Qe))break;te++}if(te>K-1)return[];const{tabSize:X,indentSize:le,insertSpaces:oe}=ae.getOptions(),Ce=(Qe,Pe)=>(Pe=Pe||1,O.U.shiftIndent(Qe,Qe.length+Pe,X,le,oe)),ye=(Qe,Pe)=>(Pe=Pe||1,O.U.unshiftIndent(Qe,Qe.length+Pe,X,le,oe));let ke=[],Te,ge=ae.getLineContent(te),we=ge;if(U!=null){Te=U;let Qe=d.V8(ge);we=Te+ge.substring(Qe.length),ee.decreaseIndentPattern&&ee.decreaseIndentPattern.test(we)&&(Te=ye(Te),we=Te+ge.substring(Qe.length)),ge!==we&&ke.push(S.h.replaceMove(new T.Y(te,1,te,Qe.length+1),(0,c.x)(Te,le,oe)))}else Te=d.V8(ge);let ze=Te;ee.increaseIndentPattern&&ee.increaseIndentPattern.test(we)?(ze=Ce(ze),Te=Ce(Te)):ee.indentNextLinePattern&&ee.indentNextLinePattern.test(we)&&(ze=Ce(ze)),te++;for(let Qe=te;Qe<=K;Qe++){let Pe=ae.getLineContent(Qe),Oe=d.V8(Pe),qe=ze+Pe.substring(Oe.length);ee.decreaseIndentPattern&&ee.decreaseIndentPattern.test(qe)&&(ze=ye(ze),Te=ye(Te)),Oe!==ze&&ke.push(S.h.replaceMove(new T.Y(Qe,1,Qe,Oe.length+1),(0,c.x)(ze,le,oe))),!(ee.unIndentedLinePattern&&ee.unIndentedLinePattern.test(Pe))&&(ee.increaseIndentPattern&&ee.increaseIndentPattern.test(qe)?(Te=Ce(Te),ze=Te):ee.indentNextLinePattern&&ee.indentNextLinePattern.test(qe)?ze=Ce(ze):ze=Te)}return ke}class M extends z.R6{constructor(){super({id:M.ID,label:g.N("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:B.u.writable})}run(ue,te){let K=te.getModel();if(!K)return;let U=K.getOptions(),ee=te.getSelection();if(!ee)return;const X=new de(ee,U.tabSize);te.pushUndoStop(),te.executeCommands(this.id,[X]),te.pushUndoStop(),K.updateOptions({insertSpaces:!0})}}M.ID="editor.action.indentationToSpaces";class E extends z.R6{constructor(){super({id:E.ID,label:g.N("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:B.u.writable})}run(ue,te){let K=te.getModel();if(!K)return;let U=K.getOptions(),ee=te.getSelection();if(!ee)return;const X=new pe(ee,U.tabSize);te.pushUndoStop(),te.executeCommands(this.id,[X]),te.pushUndoStop(),K.updateOptions({insertSpaces:!1})}}E.ID="editor.action.indentationToTabs";class _ extends z.R6{constructor(ue,te){super(te);this.insertSpaces=ue}run(ue,te){const K=ue.get(D.eJ),U=ue.get(x.q);let ee=te.getModel();if(!ee)return;const X=U.getCreationOptions(ee.getLanguageId(),ee.uri,ee.isForSimpleWidget),le=[1,2,3,4,5,6,7,8].map(Ce=>({id:Ce.toString(),label:Ce.toString(),description:Ce===X.tabSize?g.N("configuredTabSize","Configured Tab Size"):void 0})),oe=Math.min(ee.getOptions().tabSize-1,7);setTimeout(()=>{K.pick(le,{placeHolder:g.N({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:le[oe]}).then(Ce=>{Ce&&ee&&!ee.isDisposed()&&ee.updateOptions({tabSize:parseInt(Ce.label,10),insertSpaces:this.insertSpaces})})},50)}}class L extends _{constructor(){super(!1,{id:L.ID,label:g.N("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}L.ID="editor.action.indentUsingTabs";class N extends _{constructor(){super(!0,{id:N.ID,label:g.N("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}N.ID="editor.action.indentUsingSpaces";class b extends z.R6{constructor(){super({id:b.ID,label:g.N("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(ue,te){const K=ue.get(x.q);let U=te.getModel();if(!U)return;const ee=K.getCreationOptions(U.getLanguageId(),U.uri,U.isForSimpleWidget);U.detectIndentation(ee.insertSpaces,ee.tabSize)}}b.ID="editor.action.detectIndentation";class I extends z.R6{constructor(){super({id:"editor.action.reindentlines",label:g.N("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:B.u.writable})}run(ue,te){const K=ue.get(F.c_);let U=te.getModel();if(!U)return;let ee=C(U,K,1,U.getLineCount());ee.length>0&&(te.pushUndoStop(),te.executeEdits(this.id,ee),te.pushUndoStop())}}class k extends z.R6{constructor(){super({id:"editor.action.reindentselectedlines",label:g.N("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:B.u.writable})}run(ue,te){const K=ue.get(F.c_);let U=te.getModel();if(!U)return;let ee=te.getSelections();if(ee===null)return;let X=[];for(let le of ee){let oe=le.startLineNumber,Ce=le.endLineNumber;if(oe!==Ce&&le.endColumn===1&&Ce--,oe===1){if(oe===Ce)continue}else oe--;let ye=C(U,K,oe,Ce);X.push(...ye)}X.length>0&&(te.pushUndoStop(),te.executeEdits(this.id,X),te.pushUndoStop())}}class W{constructor(ue,te){this._initialSelection=te,this._edits=[],this._selectionId=null;for(let K of ue)K.range&&typeof K.text=="string"&&this._edits.push(K)}getEditOperations(ue,te){for(let U of this._edits)te.addEditOperation(j.e.lift(U.range),U.text);let K=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(K=!0,this._selectionId=te.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(K=!0,this._selectionId=te.trackSelection(this._initialSelection,!1))),K||(this._selectionId=te.trackSelection(this._initialSelection))}computeCursorState(ue,te){return te.getTrackedSelection(this._selectionId)}}class q{constructor(ue){this.callOnDispose=new p.SL,this.callOnModel=new p.SL,this.editor=ue,this.callOnDispose.add(ue.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(ue.onDidChangeModel(()=>this.update())),this.callOnDispose.add(ue.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(48))&&(!this.editor.hasModel()||this.callOnModel.add(this.editor.onDidPaste(({range:ue})=>{this.trigger(ue)})))}trigger(ue){let te=this.editor.getSelections();if(te===null||te.length>1)return;const K=this.editor.getModel();if(!K||!K.isCheapToTokenize(ue.getStartPosition().lineNumber))return;const U=this.editor.getOption(9),{tabSize:ee,indentSize:X,insertSpaces:le}=K.getOptions();let oe=[],Ce={shiftIndent:ge=>O.U.shiftIndent(ge,ge.length+1,ee,X,le),unshiftIndent:ge=>O.U.unshiftIndent(ge,ge.length+1,ee,X,le)},ye=ue.startLineNumber;for(;ye<=ue.endLineNumber;){if(this.shouldIgnoreLine(K,ye)){ye++;continue}break}if(ye>ue.endLineNumber)return;let ke=K.getLineContent(ye);if(!/\S/.test(ke.substring(0,ue.startColumn-1))){const ge=F.zu.getGoodIndentForLine(U,K,K.getLanguageId(),ye,Ce);if(ge!==null){let we=d.V8(ke),ze=v.Y(ge,ee),Qe=v.Y(we,ee);if(ze!==Qe){let Pe=v.J(ze,ee,le);oe.push({range:new j.e(ye,1,ye,we.length+1),text:Pe}),ke=Pe+ke.substr(we.length)}else{let Pe=F.zu.getIndentMetadata(K,ye);if(Pe===0||Pe===8)return}}}const Te=ye;for(;ye<ue.endLineNumber;){if(!/\S/.test(K.getLineContent(ye+1))){ye++;continue}break}if(ye!==ue.endLineNumber){let ge={getLineTokens:ze=>K.getLineTokens(ze),getLanguageId:()=>K.getLanguageId(),getLanguageIdAtPosition:(ze,Qe)=>K.getLanguageIdAtPosition(ze,Qe),getLineContent:ze=>ze===Te?ke:K.getLineContent(ze)},we=F.zu.getGoodIndentForLine(U,ge,K.getLanguageId(),ye+1,Ce);if(we!==null){let ze=v.Y(we,ee),Qe=v.Y(d.V8(K.getLineContent(ye+1)),ee);if(ze!==Qe){let Pe=ze-Qe;for(let Oe=ye+1;Oe<=ue.endLineNumber;Oe++){let qe=K.getLineContent(Oe),Je=d.V8(qe),Fe=v.Y(Je,ee)+Pe,ne=v.J(Fe,ee,le);ne!==Je&&oe.push({range:new j.e(Oe,1,Oe,Je.length+1),text:ne})}}}}if(oe.length>0){this.editor.pushUndoStop();let ge=new W(oe,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",ge),this.editor.pushUndoStop()}}shouldIgnoreLine(ue,te){ue.forceTokenization(te);let K=ue.getLineFirstNonWhitespaceColumn(te);if(K===0)return!0;let U=ue.getLineTokens(te);if(U.getCount()>0){let ee=U.findTokenIndexAtOffset(K);if(ee>=0&&U.getStandardTokenType(ee)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}q.ID="editor.contrib.autoIndentOnPaste";function re(ae,ue,te,K){if(ae.getLineCount()===1&&ae.getLineMaxColumn(1)===1)return;let U="";for(let X=0;X<te;X++)U+=" ";let ee=new RegExp(U,"gi");for(let X=1,le=ae.getLineCount();X<=le;X++){let oe=ae.getLineFirstNonWhitespaceColumn(X);if(oe===0&&(oe=ae.getLineMaxColumn(X)),oe===1)continue;const Ce=new j.e(X,1,X,oe),ye=ae.getValueInRange(Ce),ke=K?ye.replace(/\t/ig,U):ye.replace(ee,"	");ue.addEditOperation(Ce,ke)}}class de{constructor(ue,te){this.selection=ue,this.tabSize=te,this.selectionId=null}getEditOperations(ue,te){this.selectionId=te.trackSelection(this.selection),re(ue,te,this.tabSize,!0)}computeCursorState(ue,te){return te.getTrackedSelection(this.selectionId)}}class pe{constructor(ue,te){this.selection=ue,this.tabSize=te,this.selectionId=null}getEditOperations(ue,te){this.selectionId=te.trackSelection(this.selection),re(ue,te,this.tabSize,!1)}computeCursorState(ue,te){return te.getTrackedSelection(this.selectionId)}}(0,z._K)(q.ID,q),(0,z.Qr)(M),(0,z.Qr)(E),(0,z.Qr)(L),(0,z.Qr)(N),(0,z.Qr)(b),(0,z.Qr)(I),(0,z.Qr)(k)},8782:function(Tt,me,a){"use strict";a.r(me);var p=a(16830),d=a(66520),z=a(15393),O=a(71050),S=a(17301),j=a(9917),T=a(43702),B=a(98401),F=a(70666),x=a(29994),v=a(64141),g=a(24314),D=a(96887),c=a(84973),C=a(45146),M=a(88191),E=a(71922),_=a(88216),L=a(82005),N=a(50187),b=a(66663),I=function(Re,Ve,at,pt){function Be(je){return je instanceof at?je:new at(function(Et){Et(je)})}return new(at||(at=Promise))(function(je,Et){function Dt(an){try{ft(pt.next(an))}catch(An){Et(An)}}function Xe(an){try{ft(pt.throw(an))}catch(An){Et(An)}}function ft(an){an.done?je(an.value):Be(an.value).then(Dt,Xe)}ft((pt=pt.apply(Re,Ve||[])).next())})};class k{constructor(Ve,at){this.range=Ve,this.direction=at}}class W{constructor(Ve,at,pt){this.hint=Ve,this.anchor=at,this.provider=pt,this._isResolved=!1}with(Ve){const at=new W(this.hint,Ve.anchor,this.provider);return at._isResolved=this._isResolved,at._currentResolve=this._currentResolve,at}resolve(Ve){return I(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,Ve.isCancellationRequested?void 0:this.resolve(Ve);this._isResolved||(this._currentResolve=this._doResolve(Ve).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(Ve){var at,pt;return I(this,void 0,void 0,function*(){try{const Be=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,Ve));this.hint.tooltip=(at=Be==null?void 0:Be.tooltip)!==null&&at!==void 0?at:this.hint.tooltip,this.hint.label=(pt=Be==null?void 0:Be.label)!==null&&pt!==void 0?pt:this.hint.label,this._isResolved=!0}catch(Be){(0,S.Cp)(Be),this._isResolved=!1}})}}class q{constructor(Ve,at,pt){this._disposables=new j.SL,this.ranges=Ve,this.provider=new Set;const Be=[];for(const[je,Et]of at){this._disposables.add(je),this.provider.add(Et);for(const Dt of je.hints){let Xe=pt.validatePosition(Dt.position),ft="before";const an=q._getRangeAtPosition(pt,Xe);let An;an.getStartPosition().isBefore(Xe)?(An=g.e.fromPositions(an.getStartPosition(),Xe),ft="after"):(An=g.e.fromPositions(Xe,an.getEndPosition()),ft="before"),Be.push(new W(Dt,new k(An,ft),Et))}}this.items=Be.sort((je,Et)=>N.L.compare(je.hint.position,Et.hint.position))}static create(Ve,at,pt,Be){return I(this,void 0,void 0,function*(){const je=[],Et=Ve.ordered(at).reverse().map(Dt=>pt.map(Xe=>I(this,void 0,void 0,function*(){try{const ft=yield Dt.provideInlayHints(at,Xe,Be);(ft==null?void 0:ft.hints.length)&&je.push([ft,Dt])}catch(ft){(0,S.Cp)(ft)}})));if(yield Promise.all(Et.flat()),Be.isCancellationRequested||at.isDisposed())throw new S.FU;return new q(pt,je,at)})}dispose(){this._disposables.dispose()}static _getRangeAtPosition(Ve,at){const pt=at.lineNumber,Be=Ve.getWordAtPosition(at);if(Be)return new g.e(pt,Be.startColumn,pt,Be.endColumn);Ve.tokenizeIfCheap(pt);const je=Ve.getLineTokens(pt),Et=at.column-1,Dt=je.findTokenIndexAtOffset(Et);let Xe=je.getStartOffset(Dt),ft=je.getEndOffset(Dt);return ft-Xe==1&&(Xe===Et&&Dt>1?(Xe=je.getStartOffset(Dt-1),ft=je.getEndOffset(Dt-1)):ft===Et&&Dt<je.getCount()-1&&(Xe=je.getStartOffset(Dt+1),ft=je.getEndOffset(Dt+1))),new g.e(pt,Xe+1,pt,ft+1)}}function re(Re){return F.o.from({scheme:b.lg.command,path:Re.id,query:Re.arguments&&encodeURIComponent(JSON.stringify(Re.arguments))}).toString()}var de=a(65321),pe=a(74741),ae=a(60628),ue=a(52049),te=a(84144),K=a(94565),U=a(16141),ee=a(5606),X=a(72065),le=a(59422),oe=function(Re,Ve,at,pt){function Be(je){return je instanceof at?je:new at(function(Et){Et(je)})}return new(at||(at=Promise))(function(je,Et){function Dt(an){try{ft(pt.next(an))}catch(An){Et(An)}}function Xe(an){try{ft(pt.throw(an))}catch(An){Et(An)}}function ft(an){an.done?je(an.value):Be(an.value).then(Dt,Xe)}ft((pt=pt.apply(Re,Ve||[])).next())})};function Ce(Re,Ve,at,pt){var Be;return oe(this,void 0,void 0,function*(){const je=Re.get(_.S),Et=Re.get(ee.i),Dt=Re.get(K.Hy),Xe=Re.get(X.TG),ft=Re.get(le.lT);if(yield pt.item.resolve(O.T.None),!pt.part.location)return;const an=pt.part.location,An=[],Fn=new Set(te.BH.getMenuItems(te.eH.EditorContext).map(Kt=>(0,te.vr)(Kt)?Kt.command.id:""));for(const Kt of p.Uc.getEditorActions())Kt instanceof ae.SymbolNavigationAction&&Fn.has(Kt.id)&&An.push(new pe.aU(Kt.id,Kt.label,void 0,!0,()=>oe(this,void 0,void 0,function*(){const pn=yield je.createModelReference(an.uri);try{yield Xe.invokeFunction(Kt.run.bind(Kt),Ve,new ae.SymbolNavigationAnchor(pn.object.textEditorModel,g.e.getStartPosition(an.range)))}finally{pn.dispose()}})));if(pt.part.command){const{command:Kt}=pt.part;An.push(new pe.Z0),An.push(new pe.aU(Kt.id,Kt.title,void 0,!0,()=>oe(this,void 0,void 0,function*(){var pn;try{yield Dt.executeCommand(Kt.id,...(pn=Kt.arguments)!==null&&pn!==void 0?pn:[])}catch(Vn){ft.notify({severity:le.zb.Error,source:pt.item.provider.displayName,message:Vn})}})))}const Ht=Ve.getOption(115);Et.showContextMenu({domForShadowRoot:Ht&&(Be=Ve.getDomNode())!==null&&Be!==void 0?Be:void 0,getAnchor:()=>{const Kt=de.i(at);return{x:Kt.left,y:Kt.top+Kt.height+8}},getActions:()=>An,onHide:()=>{Ve.focus()},autoSelectFirstItem:!0})})}function ye(Re,Ve,at,pt){return oe(this,void 0,void 0,function*(){const je=yield Re.get(_.S).createModelReference(pt.uri);yield at.invokeWithinContext(Et=>oe(this,void 0,void 0,function*(){const Dt=Ve.hasSideBySideModifier,Xe=Et.get(U.i6),ft=ue.Jy.inPeekEditor.getValue(Xe),an=!Dt&&at.getOption(78)&&!ft;return new ae.DefinitionAction({openToSide:Dt,openInPeek:an,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(Et,at,{model:je.object.textEditorModel,position:g.e.getStartPosition(pt.range)})})),je.dispose()})}var ke=a(65026),Te=a(73910),ge=a(97781),we=function(Re,Ve,at,pt){var Be=arguments.length,je=Be<3?Ve:pt===null?pt=Object.getOwnPropertyDescriptor(Ve,at):pt,Et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")je=Reflect.decorate(Re,Ve,at,pt);else for(var Dt=Re.length-1;Dt>=0;Dt--)(Et=Re[Dt])&&(je=(Be<3?Et(je):Be>3?Et(Ve,at,je):Et(Ve,at))||je);return Be>3&&je&&Object.defineProperty(Ve,at,je),je},ze=function(Re,Ve){return function(at,pt){Ve(at,pt,Re)}},Qe=function(Re,Ve,at,pt){function Be(je){return je instanceof at?je:new at(function(Et){Et(je)})}return new(at||(at=Promise))(function(je,Et){function Dt(an){try{ft(pt.next(an))}catch(An){Et(An)}}function Xe(an){try{ft(pt.throw(an))}catch(An){Et(An)}}function ft(an){an.done?je(an.value):Be(an.value).then(Dt,Xe)}ft((pt=pt.apply(Re,Ve||[])).next())})};class Pe{constructor(){this._entries=new T.z6(50)}get(Ve){const at=Pe._key(Ve);return this._entries.get(at)}set(Ve,at){const pt=Pe._key(Ve);this._entries.set(pt,at)}static _key(Ve){return`${Ve.uri.toString()}/${Ve.getVersionId()}`}}const Oe=(0,X.yh)("IInlayHintsCache");(0,ke.z)(Oe,Pe,!0);class qe{constructor(Ve,at){this.item=Ve,this.index=at}get part(){const Ve=this.item.hint.label;return typeof Ve=="string"?{label:Ve}:Ve[this.index]}}class Je{constructor(Ve,at){this.part=Ve,this.hasTriggerModifier=at}}let Ne=class y0{constructor(Ve,at,pt,Be,je,Et,Dt){this._editor=Ve,this._languageFeaturesService=at,this._inlayHintsCache=Be,this._commandService=je,this._notificationService=Et,this._instaService=Dt,this._disposables=new j.SL,this._sessionDisposables=new j.SL,this._decorationsMetadata=new Map,this._ruleFactory=new x.t7(this._editor),this._debounceInfo=pt.for(at.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(at.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(Ve.onDidChangeModel(()=>this._update())),this._disposables.add(Ve.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(Ve.onDidChangeConfiguration(Xe=>{Xe.hasChanged(127)&&this._update()})),this._update()}static get(Ve){var at;return(at=Ve.getContribution(y0.ID))!==null&&at!==void 0?at:void 0}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(127).enabled)return;const Ve=this._editor.getModel();if(!Ve||!this._languageFeaturesService.inlayHintsProvider.has(Ve))return;const at=this._inlayHintsCache.get(Ve);at&&this._updateHintsDecorators([Ve.getFullModelRange()],at),this._sessionDisposables.add((0,j.OF)(()=>{Ve.isDisposed()||this._cacheHintsForFastRestore(Ve)}));let pt,Be=new Set;const je=new z.pY(()=>Qe(this,void 0,void 0,function*(){const Et=Date.now();pt==null||pt.dispose(!0),pt=new O.A;const Dt=Ve.onWillDispose(()=>pt==null?void 0:pt.cancel());try{const Xe=pt.token,ft=yield q.create(this._languageFeaturesService.inlayHintsProvider,Ve,this._getHintsRanges(),Xe);if(je.delay=this._debounceInfo.update(Ve,Date.now()-Et),Xe.isCancellationRequested){ft.dispose();return}for(const an of ft.provider)typeof an.onDidChangeInlayHints=="function"&&!Be.has(an)&&(Be.add(an),this._sessionDisposables.add(an.onDidChangeInlayHints(()=>{je.isScheduled()||je.schedule()})));this._sessionDisposables.add(ft),this._updateHintsDecorators(ft.ranges,ft.items),this._cacheHintsForFastRestore(Ve)}catch(Xe){(0,S.dL)(Xe)}finally{pt.dispose(),Dt.dispose()}}),this._debounceInfo.get(Ve));this._sessionDisposables.add(je),this._sessionDisposables.add((0,j.OF)(()=>pt==null?void 0:pt.dispose(!0))),je.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(Et=>{(Et.scrollTopChanged||!je.isScheduled())&&je.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(Et=>{const Dt=Math.max(je.delay,1250);je.schedule(Dt)})),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installDblClickGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const Ve=new j.SL,at=Ve.add(new L.yN(this._editor)),pt=new j.SL;return Ve.add(pt),Ve.add(at.onMouseMoveOrRelevantKeyDown(Be=>{const[je]=Be,Et=this._getInlayHintLabelPart(je),Dt=this._editor.getModel();if(!Et||!Dt){pt.clear();return}const Xe=new O.A;pt.add((0,j.OF)(()=>Xe.dispose(!0))),Et.item.resolve(Xe.token),this._activeInlayHintPart=Et.part.command||Et.part.location?new Je(Et,je.hasTriggerModifier):void 0;const ft=Et.item.hint.position.lineNumber,an=new g.e(ft,1,ft,Dt.getLineMaxColumn(ft)),An=new Set;for(const Fn of this._decorationsMetadata.values())an.containsRange(Fn.item.anchor.range)&&An.add(Fn.item);this._updateHintsDecorators([an],Array.from(An)),pt.add((0,j.OF)(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([an],Array.from(An))}))})),Ve.add(at.onCancel(()=>pt.clear())),Ve.add(at.onExecute(Be=>Qe(this,void 0,void 0,function*(){const je=this._getInlayHintLabelPart(Be);if(je){const Et=je.part;Et.location?this._instaService.invokeFunction(ye,Be,this._editor,Et.location):D.mY.is(Et.command)&&(yield this._invokeCommand(Et.command,je.item))}}))),Ve}_installDblClickGesture(){return this._editor.onMouseUp(Ve=>Qe(this,void 0,void 0,function*(){if(Ve.event.detail!==2)return;const at=this._getInlayHintLabelPart(Ve);!at||(Ve.event.preventDefault(),yield at.item.resolve(O.T.None),at.item.hint.command&&(yield this._invokeCommand(at.item.hint.command,at.item)))}))}_installContextMenu(){return this._editor.onContextMenu(Ve=>Qe(this,void 0,void 0,function*(){if(!(Ve.event.target instanceof HTMLElement))return;const at=this._getInlayHintLabelPart(Ve);at&&(yield this._instaService.invokeFunction(Ce,this._editor,Ve.event.target,at))}))}_getInlayHintLabelPart(Ve){var at;if(Ve.target.type!==6)return;const pt=(at=Ve.target.detail.injectedText)===null||at===void 0?void 0:at.options;if(pt instanceof C.HS&&(pt==null?void 0:pt.attachedData)instanceof qe)return pt.attachedData}_invokeCommand(Ve,at){var pt;return Qe(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(Ve.id,...(pt=Ve.arguments)!==null&&pt!==void 0?pt:[])}catch(Be){this._notificationService.notify({severity:le.zb.Error,source:at.provider.displayName,message:Be})}})}_cacheHintsForFastRestore(Ve){const at=new Map;for(const[pt,Be]of this._decorationsMetadata){if(at.has(Be.item))continue;let je=Be.item;const Et=Ve.getDecorationRange(pt);if(Et){const Dt=new k(Et,Be.item.anchor.direction);je=Be.item.with({anchor:Dt})}at.set(Be.item,je)}this._inlayHintsCache.set(Ve,Array.from(at.values()))}_getHintsRanges(){const Ve=30,at=this._editor.getModel(),pt=this._editor.getVisibleRangesPlusViewportAboveBelow(),Be=[];for(const je of pt.sort(g.e.compareRangesUsingStarts)){const Et=at.validateRange(new g.e(je.startLineNumber-Ve,je.startColumn,je.endLineNumber+Ve,je.endColumn));Be.length===0||!g.e.areIntersectingOrTouching(Be[Be.length-1],Et)?Be.push(Et):Be[Be.length-1]=g.e.plusRange(Be[Be.length-1],Et)}return Be}_updateHintsDecorators(Ve,at){var pt,Be;const je=[],Et=(Ht,Kt,pn,Vn,kt)=>{je.push({item:Ht,classNameRef:Kt,decoration:{range:Ht.anchor.range,options:{description:"InlayHint",showIfCollapsed:Ht.anchor.range.isEmpty(),collapseOnReplaceEdit:!Ht.anchor.range.isEmpty(),stickiness:0,[Ht.anchor.direction]:{content:pn,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:Kt.className,cursorStops:Vn,attachedData:kt}}}})},Dt=(Ht,Kt)=>{const pn=this._ruleFactory.createClassNameRef({width:`${Xe/3|0}px`,display:"inline-block"});Et(Ht,pn,"\u200A",Kt?c.RM.Right:c.RM.None)},{fontSize:Xe,fontFamily:ft}=this._getLayoutInfo(),an="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(an,ft);for(const Ht of at){Ht.hint.paddingLeft&&Dt(Ht,!1);const Kt=typeof Ht.hint.label=="string"?[{label:Ht.hint.label}]:Ht.hint.label;for(let pn=0;pn<Kt.length;pn++){const Vn=Kt[pn],kt=pn===0,Zt=pn===Kt.length-1,wn={fontSize:`${Xe}px`,fontFamily:`var(${an}), ${v.hL.fontFamily}`,verticalAlign:"middle"};Ht.hint.command&&(wn.cursor="pointer"),this._fillInColors(wn,Ht.hint),(Vn.command||Vn.location)&&((pt=this._activeInlayHintPart)===null||pt===void 0?void 0:pt.part.item)===Ht&&this._activeInlayHintPart.part.index===pn&&(wn.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(wn.color=(0,ge.EN)(Te._Yy),wn.cursor="pointer")),kt&&Zt?(wn.padding=`1px ${Math.max(1,Xe/4)|0}px`,wn.borderRadius=`${Xe/4|0}px`):kt?(wn.padding=`1px 0 1px ${Math.max(1,Xe/4)|0}px`,wn.borderRadius=`${Xe/4|0}px 0 0 ${Xe/4|0}px`):Zt?(wn.padding=`1px ${Math.max(1,Xe/4)|0}px 1px 0`,wn.borderRadius=`0 ${Xe/4|0}px ${Xe/4|0}px 0`):wn.padding="1px 0 1px 0",Et(Ht,this._ruleFactory.createClassNameRef(wn),Fe(Vn.label),Zt&&!Ht.hint.paddingRight?c.RM.Right:c.RM.None,new qe(Ht,pn))}if(Ht.hint.paddingRight&&Dt(Ht,!0),je.length>y0._MAX_DECORATORS)break}const An=[];for(const Ht of Ve)for(const{id:Kt}of(Be=this._editor.getDecorationsInRange(Ht))!==null&&Be!==void 0?Be:[]){const pn=this._decorationsMetadata.get(Kt);pn&&(An.push(Kt),pn.classNameRef.dispose(),this._decorationsMetadata.delete(Kt))}const Fn=this._editor.deltaDecorations(An,je.map(Ht=>Ht.decoration));for(let Ht=0;Ht<Fn.length;Ht++){const Kt=je[Ht];this._decorationsMetadata.set(Fn[Ht],{item:Kt.item,classNameRef:Kt.classNameRef})}}_fillInColors(Ve,at){at.kind===D.gl.Parameter?(Ve.backgroundColor=(0,ge.EN)(Te.phM),Ve.color=(0,ge.EN)(Te.HCL)):at.kind===D.gl.Type?(Ve.backgroundColor=(0,ge.EN)(Te.bKB),Ve.color=(0,ge.EN)(Te.hX8)):(Ve.backgroundColor=(0,ge.EN)(Te.PpC),Ve.color=(0,ge.EN)(Te.VVv))}_getLayoutInfo(){const Ve=this._editor.getOption(127),at=this._editor.getOption(46);let pt=Ve.fontSize;(!pt||pt<5||pt>at)&&(pt=at*.9|0);const Be=Ve.fontFamily||this._editor.getOption(43);return{fontSize:pt,fontFamily:Be}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()),[]);for(let Ve of this._decorationsMetadata.values())Ve.classNameRef.dispose();this._decorationsMetadata.clear()}};Ne.ID="editor.contrib.InlayHints",Ne._MAX_DECORATORS=1500,Ne=we([ze(1,E.p),ze(2,M.A),ze(3,Oe),ze(4,K.Hy),ze(5,le.lT),ze(6,X.TG)],Ne);function Fe(Re){const Ve="\xA0";return Re.replace(/[ \t]/g,Ve)}K.P0.registerCommand("_executeInlayHintProvider",(Re,...Ve)=>Qe(void 0,void 0,void 0,function*(){const[at,pt]=Ve;(0,B.p_)(F.o.isUri(at)),(0,B.p_)(g.e.isIRange(pt));const{inlayHintsProvider:Be}=Re.get(E.p),je=yield Re.get(_.S).createModelReference(at);try{const Et=yield q.create(Be,je.object.textEditorModel,[g.e.lift(pt)],O.T.None),Dt=Et.items.map(Xe=>Xe.hint);return setTimeout(()=>Et.dispose(),0),Dt}finally{je.dispose()}}));var ne=a(59365),Q=a(72042),ie=a(41095),xe=a(22374),be=a(33108),Ge=a(50988),nt=a(63580),_t=a(1432),Ot=function(Re,Ve,at,pt){var Be=arguments.length,je=Be<3?Ve:pt===null?pt=Object.getOwnPropertyDescriptor(Ve,at):pt,Et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")je=Reflect.decorate(Re,Ve,at,pt);else for(var Dt=Re.length-1;Dt>=0;Dt--)(Et=Re[Dt])&&(je=(Be<3?Et(je):Be>3?Et(Ve,at,je):Et(Ve,at))||je);return Be>3&&je&&Object.defineProperty(Ve,at,je),je},rn=function(Re,Ve){return function(at,pt){Ve(at,pt,Re)}},gt=function(Re,Ve,at,pt){function Be(je){return je instanceof at?je:new at(function(Et){Et(je)})}return new(at||(at=Promise))(function(je,Et){function Dt(an){try{ft(pt.next(an))}catch(An){Et(An)}}function Xe(an){try{ft(pt.throw(an))}catch(An){Et(An)}}function ft(an){an.done?je(an.value):Be(an.value).then(Dt,Xe)}ft((pt=pt.apply(Re,Ve||[])).next())})},Ue=function(Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve=Re[Symbol.asyncIterator],at;return Ve?Ve.call(Re):(Re=typeof __values=="function"?__values(Re):Re[Symbol.iterator](),at={},pt("next"),pt("throw"),pt("return"),at[Symbol.asyncIterator]=function(){return this},at);function pt(je){at[je]=Re[je]&&function(Et){return new Promise(function(Dt,Xe){Et=Re[je](Et),Be(Dt,Xe,Et.done,Et.value)})}}function Be(je,Et,Dt,Xe){Promise.resolve(Xe).then(function(ft){je({value:ft,done:Dt})},Et)}};class Ye extends d.YM{constructor(Ve,at){super(10,at,Ve.item.anchor.range);this.part=Ve}}let dt=class extends xe.D5{constructor(Ve,at,pt,Be,je,Et){super(Ve,at,pt,Be,Et);this._resolverService=je,this.hoverOrdinal=6}suggestHoverAnchor(Ve){var at;if(!Ne.get(this._editor)||Ve.target.type!==6)return null;const Be=(at=Ve.target.detail.injectedText)===null||at===void 0?void 0:at.options;return Be instanceof C.HS&&Be.attachedData instanceof qe?new Ye(Be.attachedData,this):null}computeSync(){return[]}computeAsync(Ve,at,pt){return Ve instanceof Ye?new z.Aq(Be=>gt(this,void 0,void 0,function*(){var je,Et;const{part:Dt}=Ve;if(yield Dt.item.resolve(pt),pt.isCancellationRequested)return;let Xe;typeof Dt.item.hint.tooltip=="string"?Xe=new ne.W5().appendText(Dt.item.hint.tooltip):Dt.item.hint.tooltip&&(Xe=Dt.item.hint.tooltip),Xe&&Be.emitOne(new xe.hU(this,Ve.range,[Xe],0));let ft;if(typeof Dt.part.tooltip=="string"?ft=new ne.W5().appendText(Dt.part.tooltip):Dt.part.tooltip&&(ft=Dt.part.tooltip),ft&&Be.emitOne(new xe.hU(this,Ve.range,[ft],1)),Dt.part.location||Dt.part.command){let Ht;const pn=this._editor.getOption(70)==="altKey"?_t.dz?(0,nt.N)("links.navigate.kb.meta.mac","cmd + click"):(0,nt.N)("links.navigate.kb.meta","ctrl + click"):_t.dz?(0,nt.N)("links.navigate.kb.alt.mac","option + click"):(0,nt.N)("links.navigate.kb.alt","alt + click");Dt.part.location&&Dt.part.command?Ht=new ne.W5().appendText((0,nt.N)("hint.defAndCommand","Go to Definition ({0}), right click for more",pn)):Dt.part.location?Ht=new ne.W5().appendText((0,nt.N)("hint.def","Go to Definition ({0})",pn)):Dt.part.command&&(Ht=new ne.W5(`[${(0,nt.N)("hint.cmd","Execute Command")}](${re(Dt.part.command)} "${Dt.part.command.title}") (${pn})`,{isTrusted:!0})),Ht&&Be.emitOne(new xe.hU(this,Ve.range,[Ht],1e4))}const an=yield this._resolveInlayHintLabelPartHover(Dt,pt);try{for(var An=Ue(an),Fn;Fn=yield An.next(),!Fn.done;){let Ht=Fn.value;Be.emitOne(Ht)}}catch(Ht){je={error:Ht}}finally{try{Fn&&!Fn.done&&(Et=An.return)&&(yield Et.call(An))}finally{if(je)throw je.error}}})):z.Aq.EMPTY}_resolveInlayHintLabelPartHover(Ve,at){return gt(this,void 0,void 0,function*(){if(!Ve.part.location)return z.Aq.EMPTY;const{uri:pt,range:Be}=Ve.part.location,je=yield this._resolverService.createModelReference(pt);try{const Et=je.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(Et)?(0,ie.R8)(this._languageFeaturesService.hoverProvider,Et,new N.L(Be.startLineNumber,Be.startColumn),at).filter(Dt=>!(0,ne.CP)(Dt.hover.contents)).map(Dt=>new xe.hU(this,Ve.item.anchor.range,Dt.hover.contents,2+Dt.ordinal)):z.Aq.EMPTY}finally{je.dispose()}})}};dt=Ot([rn(1,Q.O),rn(2,Ge.v4),rn(3,be.Ui),rn(4,_.S),rn(5,E.p)],dt),(0,p._K)(Ne.ID,Ne),d.Ae.register(dt)},83764:function(Tt,me,a){"use strict";a.r(me);var p=a(16830),d=a(66520),z=a(4669),O=a(9917),S=a(25924),j=a(7988),T=a(29102);const B="editor.action.inlineSuggest.commit";var F=a(50187),x=a(96887),v=a(15393),g=a(71050),D=a(17301),c=a(69317),C=a(69386),M=a(24314);class E{constructor(bt,Bt,At=0){this.lineNumber=bt,this.parts=Bt,this.additionalReservedLineCount=At}renderForScreenReader(bt){if(this.parts.length===0)return"";const Bt=this.parts[this.parts.length-1],At=bt.substr(0,Bt.column-1);return L(At,this.parts.map(vt=>({range:{startLineNumber:1,endLineNumber:1,startColumn:vt.column,endColumn:vt.column},text:vt.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class _{constructor(bt){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let Bt=0;Bt<bt.length;Bt++)bt.charAt(Bt)===`
`&&this.lineStartOffsetByLineIdx.push(Bt+1)}getOffset(bt){return this.lineStartOffsetByLineIdx[bt.lineNumber-1]+bt.column-1}}function L(kn,bt){const Bt=new _(kn),At=bt.map(Ke=>{const vt=M.e.lift(Ke.range);return{startOffset:Bt.getOffset(vt.getStartPosition()),endOffset:Bt.getOffset(vt.getEndPosition()),text:Ke.text}});At.sort((Ke,vt)=>vt.startOffset-Ke.startOffset);for(const Ke of At)kn=kn.substring(0,Ke.startOffset)+Ke.text+kn.substring(Ke.endOffset);return kn}class N{constructor(bt,Bt,At){this.column=bt,this.lines=Bt,this.preview=At}}class b extends O.JT{constructor(bt){super();this.editor=bt,this._expanded=void 0,this.onDidChangeEmitter=new z.Q5,this.onDidChange=this.onDidChangeEmitter.event,this._register(bt.onDidChangeConfiguration(Bt=>{Bt.hasChanged(106)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(bt){this._expanded=!0,this.onDidChangeEmitter.fire()}}var I=a(94565),k=a(2484);function W(kn,bt){return kn===bt?!0:!kn||!bt?!1:kn.range.equalsRange(bt.range)&&kn.text===bt.text&&kn.command===bt.command}function q(kn,bt,Bt,At,Ke=0){if(kn.range.startLineNumber!==kn.range.endLineNumber)return;const vt=bt.getLineContent(kn.range.startLineNumber),Lt=S.V8(vt).length;if(kn.range.startColumn-1<=Lt){const Ci=S.V8(kn.text).length,Xi=vt.substring(kn.range.startColumn-1,Lt),Nr=M.e.fromPositions(kn.range.getStartPosition().delta(0,Xi.length),kn.range.getEndPosition()),yr=kn.text.startsWith(Xi)?kn.text.substring(Xi.length):kn.text.substring(Ci);kn={range:Nr,text:yr,command:kn.command}}const dn=bt.getValueInRange(kn.range),hn=de(dn,kn.text);if(!hn)return;const Wn=kn.range.startLineNumber,Gn=new Array;if(Bt==="prefix"){const Ci=hn.filter(Xi=>Xi.originalLength===0);if(Ci.length>1||Ci.length===1&&Ci[0].originalStart!==dn.length)return}const wi=kn.text.length-Ke;for(const Ci of hn){const Xi=kn.range.startColumn+Ci.originalStart+Ci.originalLength;if(Bt==="subwordSmart"&&At&&At.lineNumber===kn.range.startLineNumber&&Xi<At.column||Ci.originalLength>0)return;if(Ci.modifiedLength===0)continue;const Nr=Ci.modifiedStart+Ci.modifiedLength,yr=Math.max(Ci.modifiedStart,Math.min(Nr,wi)),Xr=kn.text.substring(Ci.modifiedStart,yr),Jr=kn.text.substring(yr,Math.max(Ci.modifiedStart,Nr));if(Xr.length>0){const $o=S.uq(Xr);Gn.push(new N(Xi,$o,!1))}if(Jr.length>0){const $o=S.uq(Jr);Gn.push(new N(Xi,$o,!0))}}return new E(Wn,Gn,0)}let re;function de(kn,bt){if((re==null?void 0:re.originalValue)===kn&&(re==null?void 0:re.newValue)===bt)return re==null?void 0:re.changes;{const Bt=pe(kn,bt);return re={originalValue:kn,newValue:bt,changes:Bt},Bt}}function pe(kn,bt){if(kn.length>5e3||bt.length>5e3)return;function Bt(dn){let hn=0;for(let Wn=0,Gn=dn.length;Wn<Gn;Wn++){const wi=dn.charCodeAt(Wn);wi>hn&&(hn=wi)}return hn}const At=Math.max(Bt(kn),Bt(bt));function Ke(dn){if(dn<0)throw new Error("unexpected");return At+dn+1}function vt(dn){let hn=0,Wn=0;const Gn=new Int32Array(dn.length);for(let wi=0,Ci=dn.length;wi<Ci;wi++){const Xi=Wn*100+hn;dn[wi]==="("?(Gn[wi]=Ke(2*Xi),hn++):dn[wi]===")"?(Gn[wi]=Ke(2*Xi+1),hn===1&&Wn++,hn=Math.max(hn-1,0)):Gn[wi]=dn.charCodeAt(wi)}return Gn}const Lt=vt(kn),tn=vt(bt);return new k.Hs({getElements:()=>Lt},{getElements:()=>tn}).ComputeDiff(!1).changes}var ae=a(89381),ue=a(35382),te=a(45035),K=a(13883),U=a(61761),ee=a(6735);function X(kn,bt){const Bt=new U.FE,At=new ue.Z(Bt,hn=>bt.getLanguageConfiguration(hn)),Ke=new ee.xH(new le([kn]),At),vt=(0,K.w)(Ke,[],void 0,!0);let Lt="";const tn=kn.getLineContent();function dn(hn,Wn){if(hn.kind===2)dn(hn.openingBracket,Wn),Wn=(0,te.Ii)(Wn,hn.openingBracket.length),hn.child&&(dn(hn.child,Wn),Wn=(0,te.Ii)(Wn,hn.child.length)),hn.closingBracket?(dn(hn.closingBracket,Wn),Wn=(0,te.Ii)(Wn,hn.closingBracket.length)):Lt+=At.getSingleLanguageBracketTokens(hn.openingBracket.languageId).findClosingTokenText(hn.openingBracket.bracketIds);else if(hn.kind!==3){if(hn.kind===0||hn.kind===1)Lt+=tn.substring((0,te.F_)(Wn),(0,te.F_)((0,te.Ii)(Wn,hn.length)));else if(hn.kind===4)for(const Gn of hn.children)dn(Gn,Wn),Wn=(0,te.Ii)(Wn,Gn.length)}}return dn(vt,te.xl),Lt}class le{constructor(bt){this.lines=bt}getLineCount(){return this.lines.length}getLineLength(bt){return this.lines[bt-1].getLineContent().length}getLineTokens(bt){return this.lines[bt-1]}}var oe=a(71922),Ce=a(88191),ye=function(kn,bt,Bt,At){var Ke=arguments.length,vt=Ke<3?bt:At===null?At=Object.getOwnPropertyDescriptor(bt,Bt):At,Lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(kn,bt,Bt,At);else for(var tn=kn.length-1;tn>=0;tn--)(Lt=kn[tn])&&(vt=(Ke<3?Lt(vt):Ke>3?Lt(bt,Bt,vt):Lt(bt,Bt))||vt);return Ke>3&&vt&&Object.defineProperty(bt,Bt,vt),vt},ke=function(kn,bt){return function(Bt,At){bt(Bt,At,kn)}},Te=function(kn,bt,Bt,At){function Ke(vt){return vt instanceof Bt?vt:new Bt(function(Lt){Lt(vt)})}return new(Bt||(Bt=Promise))(function(vt,Lt){function tn(Wn){try{hn(At.next(Wn))}catch(Gn){Lt(Gn)}}function dn(Wn){try{hn(At.throw(Wn))}catch(Gn){Lt(Gn)}}function hn(Wn){Wn.done?vt(Wn.value):Ke(Wn.value).then(tn,dn)}hn((At=At.apply(kn,bt||[])).next())})};let ge=class extends O.JT{constructor(bt,Bt,At,Ke,vt,Lt){super();this.editor=bt,this.cache=Bt,this.commandService=At,this.languageConfigurationService=Ke,this.languageFeaturesService=vt,this.debounceService=Lt,this.onDidChangeEmitter=new z.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new O.XK),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:200}),this._register(At.onDidExecuteCommand(tn=>{new Set([c.CoreEditingCommands.Tab.id,c.CoreEditingCommands.DeleteLeft.id,c.CoreEditingCommands.DeleteRight.id,B,"acceptSelectedSuggestion"]).has(tn.commandId)&&bt.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(tn=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(tn=>{this.session&&!this.session.isValid&&this.hide()})),this._register((0,O.OF)(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var bt;return(bt=this.session)===null||bt===void 0?void 0:bt.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(bt){var Bt;(Bt=this.session)===null||Bt===void 0||Bt.setExpanded(bt)}setActive(bt){var Bt;this.active=bt,bt&&((Bt=this.session)===null||Bt===void 0||Bt.scheduleAutomaticUpdate())}startSessionIfTriggered(){!this.editor.getOption(55).enabled||this.session&&this.session.isValid||this.trigger(x.bw.Automatic)}trigger(bt){if(this.completionSession.value){bt===x.bw.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new we(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,bt,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var bt;(bt=this.session)===null||bt===void 0||bt.commitCurrentCompletion()}showNext(){var bt;(bt=this.session)===null||bt===void 0||bt.showNextInlineCompletion()}showPrevious(){var bt;(bt=this.session)===null||bt===void 0||bt.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var bt;return Te(this,void 0,void 0,function*(){const Bt=yield(bt=this.session)===null||bt===void 0?void 0:bt.hasMultipleInlineCompletions();return Bt!==void 0?Bt:!1})}};ge=ye([ke(2,I.Hy),ke(3,ae.c_),ke(4,oe.p),ke(5,Ce.A)],ge);class we extends b{constructor(bt,Bt,At,Ke,vt,Lt,tn,dn,hn){super(bt);this.triggerPosition=Bt,this.shouldUpdate=At,this.commandService=Ke,this.cache=vt,this.initialTriggerKind=Lt,this.languageConfigurationService=tn,this.registry=dn,this.debounce=hn,this.minReservedLineCount=0,this.updateOperation=this._register(new O.XK),this.updateSoon=this._register(new v.pY(()=>{let Gn=this.initialTriggerKind;return this.initialTriggerKind=x.bw.Automatic,this.update(Gn)},50)),this.currentlySelectedCompletionId=void 0;let Wn;this._register(this.onDidChange(()=>{const Gn=this.currentCompletion;if(Gn&&Gn.sourceInlineCompletion!==Wn){Wn=Gn.sourceInlineCompletion;const wi=Gn.sourceProvider;wi.handleItemDidShow&&wi.handleItemDidShow(Gn.sourceInlineCompletions,Wn)}})),this._register((0,O.OF)(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(Gn=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(Gn=>{this.scheduleAutomaticUpdate()})),this._register(this.registry.onDidChange(()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const bt=this.cache.value.completions.findIndex(Bt=>Bt.semanticId===this.currentlySelectedCompletionId);return bt===-1?(this.currentlySelectedCompletionId=void 0,0):bt}get currentCachedCompletion(){if(!!this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var bt;return Te(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const Bt=((bt=this.cache.value)===null||bt===void 0?void 0:bt.completions)||[];if(Bt.length>0){const At=(this.fixAndGetIndexOfCurrentSelection()+1)%Bt.length;this.currentlySelectedCompletionId=Bt[At].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var bt;return Te(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const Bt=((bt=this.cache.value)===null||bt===void 0?void 0:bt.completions)||[];if(Bt.length>0){const At=(this.fixAndGetIndexOfCurrentSelection()+Bt.length-1)%Bt.length;this.currentlySelectedCompletionId=Bt[At].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var bt;return Te(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===x.bw.Explicit?yield this.updateOperation.value.promise:yield this.update(x.bw.Explicit):((bt=this.cache.value)===null||bt===void 0?void 0:bt.triggerKind)!==x.bw.Explicit&&(yield this.update(x.bw.Explicit))})}hasMultipleInlineCompletions(){var bt;return Te(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((bt=this.cache.value)===null||bt===void 0?void 0:bt.completions.length)||0)>1})}get ghostText(){const bt=this.currentCompletion,Bt=this.editor.getOptions().get(55).mode;return bt?q(bt,this.editor.getModel(),Bt,this.editor.getPosition()):void 0}get currentCompletion(){const bt=this.currentCachedCompletion;if(!!bt)return bt.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(bt){return Te(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const Bt=this.editor.getPosition(),At=new Date,Ke=(0,v.PG)(Lt=>Te(this,void 0,void 0,function*(){let tn;try{tn=yield qe(this.registry,Bt,this.editor.getModel(),{triggerKind:bt,selectedSuggestionInfo:void 0},Lt,this.languageConfigurationService);const dn=new Date;this.debounce.update(this.editor.getModel(),dn.getTime()-At.getTime())}catch(dn){(0,D.dL)(dn);return}Lt.isCancellationRequested||(this.cache.setValue(this.editor,tn,bt),this.onDidChangeEmitter.fire())})),vt=new ze(Ke,bt);this.updateOperation.value=vt,yield Ke,this.updateOperation.value===vt&&this.updateOperation.clear()})}takeOwnership(bt){this._register(bt)}commitCurrentCompletion(){if(!this.ghostText)return;const bt=this.currentCompletion;bt&&this.commit(bt)}commit(bt){const Bt=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[C.h.replaceMove(bt.range,bt.text)]),bt.command?this.commandService.executeCommand(bt.command.id,...bt.command.arguments||[]).finally(()=>{Bt==null||Bt.dispose()}).then(void 0,D.Cp):Bt==null||Bt.dispose(),this.onDidChangeEmitter.fire()}}class ze{constructor(bt,Bt){this.promise=bt,this.triggerKind=Bt}dispose(){this.promise.cancel()}}class Qe extends O.JT{constructor(bt,Bt,At,Ke){super();this.triggerKind=Ke;const vt=bt.deltaDecorations([],Bt.items.map(Lt=>({range:Lt.range,options:{description:"inline-completion-tracking-range"}})));this._register((0,O.OF)(()=>{bt.deltaDecorations(vt,[])})),this.completions=Bt.items.map((Lt,tn)=>new Pe(Lt,vt[tn])),this._register(bt.onDidChangeModelContent(()=>{let Lt=!1;const tn=bt.getModel();for(const dn of this.completions){const hn=tn.getDecorationRange(dn.decorationId);if(!hn){(0,D.dL)(new Error("Decoration has no range"));continue}dn.synchronizedRange.equalsRange(hn)||(Lt=!0,dn.synchronizedRange=hn)}Lt&&At()})),this._register(Bt)}}class Pe{constructor(bt,Bt){this.inlineCompletion=bt,this.decorationId=Bt,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=bt.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function Oe(kn,bt){const Bt=bt.getWordAtPosition(kn),At=bt.getLineMaxColumn(kn.lineNumber);return Bt?new M.e(kn.lineNumber,Bt.startColumn,kn.lineNumber,At):M.e.fromPositions(kn,kn.with(void 0,At))}function qe(kn,bt,Bt,At,Ke=g.T.None,vt){return Te(this,void 0,void 0,function*(){const Lt=Oe(bt,Bt),tn=kn.all(Bt),dn=yield Promise.all(tn.map(Wn=>Te(this,void 0,void 0,function*(){const Gn=yield Promise.resolve(Wn.provideInlineCompletions(Bt,bt,At,Ke)).catch(D.Cp);return{completions:Gn,provider:Wn,dispose:()=>{Gn&&Wn.freeInlineCompletions(Gn)}}}))),hn=new Map;for(const Wn of dn){const Gn=Wn.completions;if(Gn)for(const wi of Gn.items){const Ci=wi.range?M.e.lift(wi.range):Lt;if(Ci.startLineNumber!==Ci.endLineNumber)continue;const Xi=vt&&wi.completeBracketPairs?Je(wi.text,Ci.getStartPosition(),Bt,vt):wi.text,Nr={text:Xi,range:Ci,command:wi.command,sourceProvider:Wn.provider,sourceInlineCompletions:Gn,sourceInlineCompletion:wi};hn.set(JSON.stringify({text:Xi,range:wi.range}),Nr)}}return{items:[...hn.values()],dispose:()=>{for(const Wn of dn)Wn.dispose()}}})}function Je(kn,bt,Bt,At){const vt=Bt.getLineContent(bt.lineNumber).substring(0,bt.column-1)+kn,Lt=Bt.tokenizeLineWithEdit(bt,vt.length-(bt.column-1),kn),tn=Lt==null?void 0:Lt.sliceAndInflate(bt.column-1,vt.length,0);return tn?(console.log(tn),X(tn,At)):kn}function Ne(kn,bt){if(!bt)return bt;const Bt=kn.getValueInRange(bt.range),At=(0,S.Mh)(Bt,bt.text),Ke=kn.getOffsetAt(bt.range.getStartPosition())+At,vt=kn.getPositionAt(Ke),Lt=Bt.substr(At),tn=(0,S.P1)(Lt,bt.text),dn=kn.getPositionAt(Math.max(Ke,kn.getOffsetAt(bt.range.getEndPosition())-tn));return{range:M.e.fromPositions(vt,dn),text:bt.text.substr(At,bt.text.length-At-tn)}}var Fe=a(9488),ne=a(35084),Q=a(6769),ie=a(18786);class xe extends O.JT{constructor(bt,Bt){super();this.editor=bt,this.suggestControllerPreselector=Bt,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new z.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new v.pY(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(bt.onKeyDown(Ke=>{Ke.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(bt.onKeyUp(Ke=>{Ke.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const At=ie.SuggestController.get(this.editor);if(At){this._register(At.registerSelector({priority:100,select:(Lt,tn,dn)=>{const hn=this.editor.getModel(),Wn=Ne(hn,this.suggestControllerPreselector());if(!Wn)return-1;const Gn=F.L.lift(tn),wi=dn.map((Xi,Nr)=>{const yr=nt(At,Gn,Xi,this.isShiftKeyPressed),Xr=Ne(hn,yr==null?void 0:yr.normalizedInlineCompletion);if(!Xr)return;const Jr=be(Wn.range,Xr.range)&&Wn.text.startsWith(Xr.text);return{index:Nr,valid:Jr,prefixLength:Xr.text.length,suggestItem:Xi}}).filter(Xi=>Xi&&Xi.valid),Ci=(0,Fe.Dc)(wi,(0,Fe.tT)(Xi=>Xi.prefixLength,Fe.fv));return Ci?Ci.index:-1}}));let Ke=!1;const vt=()=>{Ke||(Ke=!0,this._register(At.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(At.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(At.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(z.ju.once(At.model.onDidTrigger)(Lt=>{vt()}))}this.update(this._isActive)}get state(){if(!!this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(bt){const Bt=this.getSuggestItemInfo();let At=!1;Ge(this._currentSuggestItemInfo,Bt)||(this._currentSuggestItemInfo=Bt,At=!0),this._isActive!==bt&&(this._isActive=bt,At=!0),At&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const bt=ie.SuggestController.get(this.editor);if(!bt||!this.isSuggestWidgetVisible)return;const Bt=bt.widget.value.getFocusedItem();if(!!Bt)return nt(bt,this.editor.getPosition(),Bt.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const bt=ie.SuggestController.get(this.editor);bt&&bt.stopForceRenderingAbove()}forceRenderingAbove(){const bt=ie.SuggestController.get(this.editor);bt&&bt.forceRenderingAbove()}}function be(kn,bt){return bt.startLineNumber===kn.startLineNumber&&bt.startColumn===kn.startColumn&&(bt.endLineNumber<kn.endLineNumber||bt.endLineNumber===kn.endLineNumber&&bt.endColumn<=kn.endColumn)}function Ge(kn,bt){return kn===bt?!0:!kn||!bt?!1:kn.completionItemKind===bt.completionItemKind&&kn.isSnippetText===bt.isSnippetText&&W(kn.normalizedInlineCompletion,bt.normalizedInlineCompletion)}function nt(kn,bt,Bt,At){if(Array.isArray(Bt.completion.additionalTextEdits)&&Bt.completion.additionalTextEdits.length>0)return{completionItemKind:Bt.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:M.e.fromPositions(bt,bt),text:""}};let{insertText:Ke}=Bt.completion,vt=!1;if(Bt.completion.insertTextRules&4){const tn=new ne.Yj().parse(Ke),dn=kn.editor.getModel();if(tn.children.length>100)return;Q.l.adjustWhitespace(dn,bt,tn,!0,!0),Ke=tn.toString(),vt=!0}const Lt=kn.getOverwriteInfo(Bt,At);return{isSnippetText:vt,completionItemKind:Bt.completion.kind,normalizedInlineCompletion:{text:Ke,range:M.e.fromPositions(bt.delta(0,-Lt.overwriteBefore),bt.delta(0,Math.max(Lt.overwriteAfter,0)))}}}var _t=function(kn,bt,Bt,At){var Ke=arguments.length,vt=Ke<3?bt:At===null?At=Object.getOwnPropertyDescriptor(bt,Bt):At,Lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(kn,bt,Bt,At);else for(var tn=kn.length-1;tn>=0;tn--)(Lt=kn[tn])&&(vt=(Ke<3?Lt(vt):Ke>3?Lt(bt,Bt,vt):Lt(bt,Bt))||vt);return Ke>3&&vt&&Object.defineProperty(bt,Bt,vt),vt},Ot=function(kn,bt){return function(Bt,At){bt(Bt,At,kn)}},rn=function(kn,bt,Bt,At){function Ke(vt){return vt instanceof Bt?vt:new Bt(function(Lt){Lt(vt)})}return new(Bt||(Bt=Promise))(function(vt,Lt){function tn(Wn){try{hn(At.next(Wn))}catch(Gn){Lt(Gn)}}function dn(Wn){try{hn(At.throw(Wn))}catch(Gn){Lt(Gn)}}function hn(Wn){Wn.done?vt(Wn.value):Ke(Wn.value).then(tn,dn)}hn((At=At.apply(kn,bt||[])).next())})};let gt=class extends b{constructor(bt,Bt,At){super(bt);this.cache=Bt,this.languageFeaturesService=At,this.suggestionInlineCompletionSource=this._register(new xe(this.editor,()=>{var Ke,vt;return(vt=(Ke=this.cache.value)===null||Ke===void 0?void 0:Ke.completions[0])===null||vt===void 0?void 0:vt.toLiveInlineCompletion()})),this.updateOperation=this._register(new O.XK),this.updateCacheSoon=this._register(new v.pY(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const vt=this.ghostText;vt&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,Ue(vt.parts.map(Lt=>Lt.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(Ke=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register((0,O.OF)(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(106).preview}updateCache(){return rn(this,void 0,void 0,function*(){const bt=this.suggestionInlineCompletionSource.state;if(!bt||!bt.selectedItem)return;const Bt={text:bt.selectedItem.normalizedInlineCompletion.text,range:bt.selectedItem.normalizedInlineCompletion.range,isSnippetText:bt.selectedItem.isSnippetText,completionKind:bt.selectedItem.completionItemKind},At=this.editor.getPosition(),Ke=(0,v.PG)(Lt=>rn(this,void 0,void 0,function*(){let tn;try{tn=yield qe(this.languageFeaturesService.inlineCompletionsProvider,At,this.editor.getModel(),{triggerKind:x.bw.Automatic,selectedSuggestionInfo:Bt},Lt)}catch(dn){(0,D.dL)(dn);return}Lt.isCancellationRequested||(this.cache.setValue(this.editor,tn,x.bw.Automatic),this.onDidChangeEmitter.fire())})),vt=new ze(Ke,x.bw.Automatic);this.updateOperation.value=vt,yield Ke,this.updateOperation.value===vt&&this.updateOperation.clear()})}get ghostText(){var bt,Bt,At;const Ke=this.isSuggestionPreviewEnabled(),vt=Ne(this.editor.getModel(),(Bt=(bt=this.cache.value)===null||bt===void 0?void 0:bt.completions[0])===null||Bt===void 0?void 0:Bt.toLiveInlineCompletion()),Lt=this.suggestionInlineCompletionSource.state,tn=Ne(this.editor.getModel(),(At=Lt==null?void 0:Lt.selectedItem)===null||At===void 0?void 0:At.normalizedInlineCompletion),dn=vt&&tn&&vt.text.startsWith(tn.text)&&vt.range.equalsRange(tn.range);if(!Ke&&!dn)return;const hn=dn?vt:tn||vt,Wn=dn?hn.text.length-tn.text.length:0;return this.toGhostText(hn,Wn)}toGhostText(bt,Bt){const At=this.editor.getOptions().get(106).previewMode;return bt?q(bt,this.editor.getModel(),At,this.editor.getPosition(),Bt)||new E(bt.range.endLineNumber,[],this.minReservedLineCount):void 0}};gt=_t([Ot(2,oe.p)],gt);function Ue(kn){return kn.reduce((bt,Bt)=>bt+Bt,0)}function Ye(kn,bt){return{object:kn,dispose:()=>bt==null?void 0:bt.dispose()}}var dt=a(72065),Re=function(kn,bt,Bt,At){var Ke=arguments.length,vt=Ke<3?bt:At===null?At=Object.getOwnPropertyDescriptor(bt,Bt):At,Lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(kn,bt,Bt,At);else for(var tn=kn.length-1;tn>=0;tn--)(Lt=kn[tn])&&(vt=(Ke<3?Lt(vt):Ke>3?Lt(bt,Bt,vt):Lt(bt,Bt))||vt);return Ke>3&&vt&&Object.defineProperty(bt,Bt,vt),vt},Ve=function(kn,bt){return function(Bt,At){bt(Bt,At,kn)}},at=function(kn,bt,Bt,At){function Ke(vt){return vt instanceof Bt?vt:new Bt(function(Lt){Lt(vt)})}return new(Bt||(Bt=Promise))(function(vt,Lt){function tn(Wn){try{hn(At.next(Wn))}catch(Gn){Lt(Gn)}}function dn(Wn){try{hn(At.throw(Wn))}catch(Gn){Lt(Gn)}}function hn(Wn){Wn.done?vt(Wn.value):Ke(Wn.value).then(tn,dn)}hn((At=At.apply(kn,bt||[])).next())})};class pt extends O.JT{constructor(){super(...arguments);this.onDidChangeEmitter=new z.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new O.XK)}get targetModel(){var bt;return(bt=this.currentModelRef.value)===null||bt===void 0?void 0:bt.object}setTargetModel(bt){var Bt;((Bt=this.currentModelRef.value)===null||Bt===void 0?void 0:Bt.object)!==bt&&(this.currentModelRef.clear(),this.currentModelRef.value=bt?Ye(bt,bt.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var bt,Bt;return this.hasCachedGhostText||(this.cachedGhostText=(Bt=(bt=this.currentModelRef.value)===null||bt===void 0?void 0:bt.object)===null||Bt===void 0?void 0:Bt.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(bt){var Bt;(Bt=this.targetModel)===null||Bt===void 0||Bt.setExpanded(bt)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let Be=class extends pt{constructor(bt,Bt){super();this.editor=bt,this.instantiationService=Bt,this.sharedCache=this._register(new je),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(gt,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance(ge,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(bt){var Bt;const At=(Bt=this.activeInlineCompletionsModel)===null||Bt===void 0?void 0:Bt.ghostText;return At?At.parts.some(Ke=>bt.containsPosition(new F.L(At.lineNumber,Ke.column))):!1}triggerInlineCompletion(){var bt;(bt=this.activeInlineCompletionsModel)===null||bt===void 0||bt.trigger(x.bw.Explicit)}commitInlineCompletion(){var bt;(bt=this.activeInlineCompletionsModel)===null||bt===void 0||bt.commitCurrentSuggestion()}hideInlineCompletion(){var bt;(bt=this.activeInlineCompletionsModel)===null||bt===void 0||bt.hide()}showNextInlineCompletion(){var bt;(bt=this.activeInlineCompletionsModel)===null||bt===void 0||bt.showNext()}showPreviousInlineCompletion(){var bt;(bt=this.activeInlineCompletionsModel)===null||bt===void 0||bt.showPrevious()}hasMultipleInlineCompletions(){var bt;return at(this,void 0,void 0,function*(){const Bt=yield(bt=this.activeInlineCompletionsModel)===null||bt===void 0?void 0:bt.hasMultipleInlineCompletions();return Bt!==void 0?Bt:!1})}};Be=Re([Ve(1,dt.TG)],Be);class je extends O.JT{constructor(){super(...arguments);this.onDidChangeEmitter=new z.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new O.XK)}get value(){return this.cache.value}setValue(bt,Bt,At){this.cache.value=new Qe(bt,Bt,()=>this.onDidChangeEmitter.fire(),At)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var Et=a(65321),Dt=a(52136),Xe=a(64141),ft=a(77378),an=a(50072),An=a(72042),Fn=a(8625),Ht=a(92550),Kt=a(77736),pn=a(97781),Vn=function(kn,bt,Bt,At){var Ke=arguments.length,vt=Ke<3?bt:At===null?At=Object.getOwnPropertyDescriptor(bt,Bt):At,Lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(kn,bt,Bt,At);else for(var tn=kn.length-1;tn>=0;tn--)(Lt=kn[tn])&&(vt=(Ke<3?Lt(vt):Ke>3?Lt(bt,Bt,vt):Lt(bt,Bt))||vt);return Ke>3&&vt&&Object.defineProperty(bt,Bt,vt),vt},kt=function(kn,bt){return function(Bt,At){bt(Bt,At,kn)}},Zt;const wn=(Zt=window.trustedTypes)===null||Zt===void 0?void 0:Zt.createPolicy("editorGhostText",{createHTML:kn=>kn});let Pi=class extends O.JT{constructor(bt,Bt,At,Ke){super();this.editor=bt,this.model=Bt,this.instantiationService=At,this.languageService=Ke,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(Fi,this.editor)),this.additionalLinesWidget=this._register(new Ji(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(vt=>{(vt.hasChanged(29)||vt.hasChanged(105)||vt.hasChanged(88)||vt.hasChanged(83)||vt.hasChanged(45)||vt.hasChanged(44)||vt.hasChanged(59))&&this.update()})),this._register((0,O.OF)(()=>{var vt;this.disposed=!0,this.update(),(vt=this.viewMoreContentWidget)===null||vt===void 0||vt.dispose(),this.viewMoreContentWidget=void 0})),this._register(Bt.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(bt){return this.additionalLinesWidget.viewZoneId===bt}update(){var bt;const Bt=this.model.ghostText;if(!this.editor.hasModel()||!Bt||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const At=new Array,Ke=new Array;function vt(hn,Wn){if(Ke.length>0){const Gn=Ke[Ke.length-1];Wn&&Gn.decorations.push(new Ht.Kp(Gn.content.length+1,Gn.content.length+1+hn[0].length,Wn,0)),Gn.content+=hn[0],hn=hn.slice(1)}for(const Gn of hn)Ke.push({content:Gn,decorations:Wn?[new Ht.Kp(1,Gn.length+1,Wn,0)]:[]})}const Lt=this.editor.getModel().getLineContent(Bt.lineNumber);this.editor.getModel().getLineTokens(Bt.lineNumber);let tn,dn=0;for(const hn of Bt.parts){let Wn=hn.lines;tn===void 0?(At.push({column:hn.column,text:Wn[0],preview:hn.preview}),Wn=Wn.slice(1)):vt([Lt.substring(dn,hn.column-1)],void 0),Wn.length>0&&(vt(Wn,"ghost-text"),tn===void 0&&hn.column<=Lt.length&&(tn=hn.column)),dn=hn.column-1}tn!==void 0&&vt([Lt.substring(dn)],void 0),this.partsWidget.setParts(Bt.lineNumber,At,tn!==void 0?{column:tn,length:Lt.length+1-tn}:void 0),this.additionalLinesWidget.updateLines(Bt.lineNumber,Ke,Bt.additionalReservedLineCount),Bt.parts.some(hn=>hn.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new F.L(Bt.lineNumber,this.editor.getModel().getLineMaxColumn(Bt.lineNumber)),"",0):((bt=this.viewMoreContentWidget)===null||bt===void 0||bt.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(bt,Bt,At){const Ke=this.editor.getOption(44),vt=document.createElement("div");vt.className="suggest-preview-additional-widget",(0,Dt.N)(vt,Ke);const Lt=document.createElement("span");Lt.className="content-spacer",Lt.append(Bt),vt.append(Lt);const tn=document.createElement("span");tn.className="content-newline suggest-preview-text",tn.append("\u23CE  "),vt.append(tn);const dn=new O.SL,hn=document.createElement("div");return hn.className="button suggest-preview-text",hn.append(`+${At} lines\u2026`),dn.add(Et.mu(hn,"mousedown",Wn=>{var Gn;(Gn=this.model)===null||Gn===void 0||Gn.setExpanded(!0),Wn.preventDefault(),this.editor.focus()})),vt.append(hn),new zt(this.editor,bt,vt,dn)}};Pi=Vn([kt(2,dt.TG),kt(3,An.O)],Pi);class Fi{constructor(bt){this.editor=bt,this.decorationIds=[],this.disposableStore=new O.SL}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(bt,Bt,At){if(this.disposableStore.clear(),!this.editor.getModel())return;const vt=new Array;At&&vt.push({range:M.e.fromPositions(new F.L(bt,At.column),new F.L(bt,At.column+At.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,Bt.map(Lt=>({range:M.e.fromPositions(new F.L(bt,Lt.column)),options:{description:"ghost-text",after:{content:Lt.text,inlineClassName:Lt.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}})).concat(vt))}}class Ji{constructor(bt,Bt){this.editor=bt,this.languageIdCodec=Bt,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(bt=>{this._viewZoneId&&(bt.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(bt,Bt,At){const Ke=this.editor.getModel();if(!Ke)return;const{tabSize:vt}=Ke.getOptions();this.editor.changeViewZones(Lt=>{this._viewZoneId&&(Lt.removeZone(this._viewZoneId),this._viewZoneId=void 0);const tn=Math.max(Bt.length,At);if(tn>0){const dn=document.createElement("div");si(dn,vt,Bt,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=Lt.addZone({afterLineNumber:bt,heightInLines:tn,domNode:dn,afterColumnAffinity:1})}})}}function si(kn,bt,Bt,At,Ke){const vt=At.get(29),Lt=At.get(105),tn="none",dn=At.get(83),hn=At.get(45),Wn=At.get(44),Gn=At.get(59),wi=(0,an.l$)(1e4);wi.appendASCIIString('<div class="suggest-preview-text">');for(let Nr=0,yr=Bt.length;Nr<yr;Nr++){const Xr=Bt[Nr],Jr=Xr.content;wi.appendASCIIString('<div class="view-line'),wi.appendASCIIString('" style="top:'),wi.appendASCIIString(String(Nr*Gn)),wi.appendASCIIString('px;width:1000000px;">');const $o=S.$i(Jr),ms=S.Ut(Jr),cs=ft.A.createEmpty(Jr,Ke);(0,Kt.d1)(new Kt.IJ(Wn.isMonospace&&!vt,Wn.canUseHalfwidthRightwardsArrow,Jr,!1,$o,ms,0,cs,Xr.decorations,bt,0,Wn.spaceWidth,Wn.middotWidth,Wn.wsmiddotWidth,Lt,tn,dn,hn!==Xe.n0.OFF,null),wi),wi.appendASCIIString("</div>")}wi.appendASCIIString("</div>"),(0,Dt.N)(kn,Wn);const Ci=wi.build(),Xi=wn?wn.createHTML(Ci):Ci;kn.innerHTML=Xi}class zt extends O.JT{constructor(bt,Bt,At,Ke){super();this.editor=bt,this.position=Bt,this.domNode=At,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(Ke),this._register((0,O.OF)(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}(0,pn.Ic)((kn,bt)=>{const Bt=kn.getColor(Fn.N5);Bt&&(bt.addRule(`.monaco-editor .ghost-text-decoration { color: ${Bt.toString()} !important; }`),bt.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${Bt.toString()} !important; }`),bt.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${Bt.toString()} !important; }`));const At=kn.getColor(Fn.IO);At&&(bt.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${At.toString()}; }`),bt.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${At.toString()}; }`),bt.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${At.toString()}; }`));const Ke=kn.getColor(Fn.x3);Ke&&(bt.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${Ke}; }`),bt.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${Ke}; }`),bt.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${Ke}; }`))});var Vt=a(63580),vn=a(16141),Sn=a(49989),Bn=function(kn,bt,Bt,At){var Ke=arguments.length,vt=Ke<3?bt:At===null?At=Object.getOwnPropertyDescriptor(bt,Bt):At,Lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(kn,bt,Bt,At);else for(var tn=kn.length-1;tn>=0;tn--)(Lt=kn[tn])&&(vt=(Ke<3?Lt(vt):Ke>3?Lt(bt,Bt,vt):Lt(bt,Bt))||vt);return Ke>3&&vt&&Object.defineProperty(bt,Bt,vt),vt},mn=function(kn,bt){return function(Bt,At){bt(Bt,At,kn)}},Jt=function(kn,bt,Bt,At){function Ke(vt){return vt instanceof Bt?vt:new Bt(function(Lt){Lt(vt)})}return new(Bt||(Bt=Promise))(function(vt,Lt){function tn(Wn){try{hn(At.next(Wn))}catch(Gn){Lt(Gn)}}function dn(Wn){try{hn(At.throw(Wn))}catch(Gn){Lt(Gn)}}function hn(Wn){Wn.done?vt(Wn.value):Ke(Wn.value).then(tn,dn)}hn((At=At.apply(kn,bt||[])).next())})};let En=class vS extends O.JT{constructor(bt,Bt){super();this.editor=bt,this.instantiationService=Bt,this.triggeredExplicitly=!1,this.activeController=this._register(new O.XK),this.activeModelDidChangeEmitter=this._register(new z.Q5),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(At=>{At.hasChanged(106)&&this.updateModelController(),At.hasChanged(55)&&this.updateModelController()})),this.updateModelController()}static get(bt){return bt.getContribution(vS.ID)}get activeModel(){var bt;return(bt=this.activeController.value)===null||bt===void 0?void 0:bt.model}updateModelController(){const bt=this.editor.getOption(106),Bt=this.editor.getOption(55);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(bt.preview||Bt.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(sn,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}shouldShowHoverAt(bt){var Bt;return((Bt=this.activeModel)===null||Bt===void 0?void 0:Bt.shouldShowHoverAt(bt))||!1}shouldShowHoverAtViewZone(bt){var Bt,At;return((At=(Bt=this.activeController.value)===null||Bt===void 0?void 0:Bt.widget)===null||At===void 0?void 0:At.shouldShowHoverAtViewZone(bt))||!1}trigger(){var bt;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(bt=this.activeModel)===null||bt===void 0||bt.triggerInlineCompletion()}commit(){var bt;(bt=this.activeModel)===null||bt===void 0||bt.commitInlineCompletion()}hide(){var bt;(bt=this.activeModel)===null||bt===void 0||bt.hideInlineCompletion()}showNextInlineCompletion(){var bt;(bt=this.activeModel)===null||bt===void 0||bt.showNextInlineCompletion()}showPreviousInlineCompletion(){var bt;(bt=this.activeModel)===null||bt===void 0||bt.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var bt;return Jt(this,void 0,void 0,function*(){const Bt=yield(bt=this.activeModel)===null||bt===void 0?void 0:bt.hasMultipleInlineCompletions();return Bt!==void 0?Bt:!1})}};En.inlineSuggestionVisible=new vn.uy("inlineSuggestionVisible",!1,Vt.N("inlineSuggestionVisible","Whether an inline suggestion is visible")),En.inlineSuggestionHasIndentation=new vn.uy("inlineSuggestionHasIndentation",!1,Vt.N("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),En.inlineSuggestionHasIndentationLessThanTabSize=new vn.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,Vt.N("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),En.ID="editor.contrib.ghostTextController",En=Bn([mn(1,dt.TG)],En);class $t{constructor(bt){this.contextKeyService=bt,this.inlineCompletionVisible=En.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=En.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=En.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let sn=class extends O.JT{constructor(bt,Bt,At){super();this.editor=bt,this.instantiationService=Bt,this.contextKeyService=At,this.contextKeys=new $t(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(Be,this.editor)),this.widget=this._register(this.instantiationService.createInstance(Pi,this.editor,this.model)),this._register((0,O.OF)(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var bt;this.contextKeys.inlineCompletionVisible.set(((bt=this.model.activeInlineCompletionsModel)===null||bt===void 0?void 0:bt.ghostText)!==void 0);let Bt=!1,At=!0;const Ke=this.model.inlineCompletionsModel.ghostText;if(!!this.model.activeInlineCompletionsModel&&Ke&&Ke.parts.length>0){const{column:vt,lines:Lt}=Ke.parts[0],tn=Lt[0],dn=this.editor.getModel().getLineIndentColumn(Ke.lineNumber);if(vt<=dn){let Wn=(0,S.LC)(tn);Wn===-1&&(Wn=tn.length-1),Bt=Wn>0;const Gn=this.editor.getModel().getOptions().tabSize;At=j.i.visibleColumnFromColumn(tn,Wn+1,Gn)<Gn}}this.contextKeys.inlineCompletionSuggestsIndentation.set(Bt),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(At)}};sn=Bn([mn(1,dt.TG),mn(2,vn.i6)],sn);const Tn=p._l.bindToContribution(En.get),ri=new Tn({id:B,precondition:En.inlineSuggestionVisible,handler(kn){kn.commit(),kn.editor.focus()}});(0,p.fK)(ri),Sn.W.registerKeybindingRule({primary:2,weight:200,id:ri.id,when:vn.Ao.and(ri.precondition,T.u.tabMovesFocus.toNegated(),En.inlineSuggestionHasIndentationLessThanTabSize)}),(0,p.fK)(new Tn({id:"editor.action.inlineSuggest.hide",precondition:En.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(kn){kn.hide()}}));class oi extends p.R6{constructor(){super({id:oi.ID,label:Vt.N("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:vn.Ao.and(T.u.writable,En.inlineSuggestionVisible),kbOpts:{weight:100,primary:512|89}})}run(bt,Bt){return Jt(this,void 0,void 0,function*(){const At=En.get(Bt);At&&(At.showNextInlineCompletion(),Bt.focus())})}}oi.ID="editor.action.inlineSuggest.showNext";class On extends p.R6{constructor(){super({id:On.ID,label:Vt.N("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:vn.Ao.and(T.u.writable,En.inlineSuggestionVisible),kbOpts:{weight:100,primary:512|87}})}run(bt,Bt){return Jt(this,void 0,void 0,function*(){const At=En.get(Bt);At&&(At.showPreviousInlineCompletion(),Bt.focus())})}}On.ID="editor.action.inlineSuggest.showPrevious";class Qn extends p.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:Vt.N("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:T.u.writable})}run(bt,Bt){return Jt(this,void 0,void 0,function*(){const At=En.get(Bt);At&&At.trigger()})}}var Yi=a(59365),Lr=a(498),Dr=a(31106),Fr=a(84144),Sr=a(50988),Ro=function(kn,bt,Bt,At){var Ke=arguments.length,vt=Ke<3?bt:At===null?At=Object.getOwnPropertyDescriptor(bt,Bt):At,Lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(kn,bt,Bt,At);else for(var tn=kn.length-1;tn>=0;tn--)(Lt=kn[tn])&&(vt=(Ke<3?Lt(vt):Ke>3?Lt(bt,Bt,vt):Lt(bt,Bt))||vt);return Ke>3&&vt&&Object.defineProperty(bt,Bt,vt),vt},to=function(kn,bt){return function(Bt,At){bt(Bt,At,kn)}};class no{constructor(bt,Bt,At){this.owner=bt,this.range=Bt,this.controller=At}isValidForHoverAnchor(bt){return bt.type===1&&this.range.startColumn<=bt.range.startColumn&&this.range.endColumn>=bt.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let dr=class{constructor(bt,Bt,At,Ke,vt,Lt,tn){this._editor=bt,this._commandService=Bt,this._menuService=At,this._contextKeyService=Ke,this._languageService=vt,this._openerService=Lt,this.accessibilityService=tn,this.hoverOrdinal=3}suggestHoverAnchor(bt){const Bt=En.get(this._editor);if(!Bt)return null;const At=bt.target;if(At.type===8){const Ke=At.detail;if(Bt.shouldShowHoverAtViewZone(Ke.viewZoneId))return new d.YM(1e3,this,M.e.fromPositions(Ke.positionBefore||Ke.position,Ke.positionBefore||Ke.position))}return At.type===7&&Bt.shouldShowHoverAt(At.range)?new d.YM(1e3,this,At.range):At.type===6&&At.detail.mightBeForeignElement&&Bt.shouldShowHoverAt(At.range)?new d.YM(1e3,this,At.range):null}computeSync(bt,Bt){const At=En.get(this._editor);return At&&At.shouldShowHoverAt(bt.range)?[new no(this,bt.range,At)]:[]}renderHoverParts(bt,Bt){const At=new O.SL,Ke=Bt[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(bt,Ke,At);const vt=At.add(this._menuService.createMenu(Fr.eH.InlineCompletionsActions,this._contextKeyService)),Lt=bt.statusBar.addAction({label:Vt.N("showNextInlineSuggestion","Next"),commandId:oi.ID,run:()=>this._commandService.executeCommand(oi.ID)}),tn=bt.statusBar.addAction({label:Vt.N("showPreviousInlineSuggestion","Previous"),commandId:On.ID,run:()=>this._commandService.executeCommand(On.ID)});bt.statusBar.addAction({label:Vt.N("acceptInlineSuggestion","Accept"),commandId:ri.id,run:()=>this._commandService.executeCommand(ri.id)});const dn=[Lt,tn];for(const hn of dn)hn.setEnabled(!1);Ke.hasMultipleSuggestions().then(hn=>{for(const Wn of dn)Wn.setEnabled(hn)});for(const[hn,Wn]of vt.getActions())for(const Gn of Wn)Gn instanceof Fr.U8&&bt.statusBar.addAction({label:Gn.label,commandId:Gn.item.id,run:()=>this._commandService.executeCommand(Gn.item.id)});return At}renderScreenReaderText(bt,Bt,At){var Ke,vt;const Lt=Et.$,tn=Lt("div.hover-row.markdown-hover"),dn=Et.R3(tn,Lt("div.hover-contents")),hn=At.add(new Lr.$({editor:this._editor},this._languageService,this._openerService)),Wn=wi=>{At.add(hn.onDidRenderAsync(()=>{dn.className="hover-contents code-hover-contents",bt.onContentsChanged()}));const Ci=Vt.N("inlineSuggestionFollows","Suggestion:"),Xi=At.add(hn.render(new Yi.W5().appendText(Ci).appendCodeblock("text",wi)));dn.replaceChildren(Xi.element)},Gn=(vt=(Ke=Bt.controller.activeModel)===null||Ke===void 0?void 0:Ke.inlineCompletionsModel)===null||vt===void 0?void 0:vt.ghostText;if(Gn){const wi=this._editor.getModel().getLineContent(Gn.lineNumber);Wn(Gn.renderForScreenReader(wi))}bt.fragment.appendChild(tn)}};dr=Ro([to(1,I.Hy),to(2,Fr.co),to(3,vn.i6),to(4,An.O),to(5,Sr.v4),to(6,Dr.F)],dr),(0,p._K)(En.ID,En),(0,p.Qr)(Qn),(0,p.Qr)(oi),(0,p.Qr)(On),d.Ae.register(dr)},97615:function(Tt,me,a){"use strict";a.r(me),a.d(me,{ExpandLineSelectionAction:function(){return S}});var p=a(16830),d=a(28108),z=a(29102),O=a(63580);class S extends p.R6{constructor(){super({id:"expandLineSelection",label:O.N("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:z.u.textInputFocus,primary:2048|42}})}run(T,B,F){if(F=F||{},!B.hasModel())return;const x=B._getViewModel();x.model.pushStackElement(),x.setCursorStates(F.source,3,d.P.expandLineSelection(x,x.getCursorStates())),x.revealPrimaryCursor(F.source,!0)}}(0,p.Qr)(S)},65766:function(Tt,me,a){"use strict";a.r(me),a.d(me,{AbstractCaseAction:function(){return Oe},AbstractDeleteAllToBoundaryAction:function(){return ge},AbstractSortLinesAction:function(){return K},DeleteAllLeftAction:function(){return we},DeleteAllRightAction:function(){return ze},DeleteDuplicateLinesAction:function(){return X},DeleteLinesAction:function(){return oe},DuplicateSelectionAction:function(){return pe},IndentLinesAction:function(){return Ce},InsertLineAfterAction:function(){return Te},InsertLineBeforeAction:function(){return ke},JoinLinesAction:function(){return Qe},LowerCaseAction:function(){return Je},SnakeCaseAction:function(){return ne},SortLinesAscendingAction:function(){return U},SortLinesDescendingAction:function(){return ee},TitleCaseAction:function(){return Fe},TransposeAction:function(){return Pe},TrimTrailingWhitespaceAction:function(){return le},UpperCaseAction:function(){return qe}});var p=a(22258),d=a(69317),z=a(16830),O=a(61329),S=a(25924),j=a(69386),T=a(24314);class B{constructor(ie,xe){this._selection=ie,this._cursors=xe,this._selectionId=null}getEditOperations(ie,xe){const be=F(ie,this._cursors);for(let Ge=0,nt=be.length;Ge<nt;Ge++){const _t=be[Ge];xe.addEditOperation(_t.range,_t.text)}this._selectionId=xe.trackSelection(this._selection)}computeCursorState(ie,xe){return xe.getTrackedSelection(this._selectionId)}}function F(Q,ie){ie.sort((_t,Ot)=>_t.lineNumber===Ot.lineNumber?_t.column-Ot.column:_t.lineNumber-Ot.lineNumber);for(let _t=ie.length-2;_t>=0;_t--)ie[_t].lineNumber===ie[_t+1].lineNumber&&ie.splice(_t,1);const xe=[];let be=0,Ge=0;const nt=ie.length;for(let _t=1,Ot=Q.getLineCount();_t<=Ot;_t++){const rn=Q.getLineContent(_t),gt=rn.length+1;let Ue=0;if(Ge<nt&&ie[Ge].lineNumber===_t&&(Ue=ie[Ge].column,Ge++,Ue===gt)||rn.length===0)continue;const Ye=S.ow(rn);let dt=0;if(Ye===-1)dt=1;else if(Ye!==rn.length-1)dt=Ye+2;else continue;dt=Math.max(Ue,dt),xe[be++]=j.h.delete(new T.e(_t,dt,_t,gt))}return xe}var x=a(51336),v=a(50187),g=a(3860),D=a(29102);class c{constructor(ie,xe,be){this._selection=ie,this._isCopyingDown=xe,this._noop=be||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(ie,xe){let be=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,be.startLineNumber<be.endLineNumber&&be.endColumn===1&&(this._endLineNumberDelta=1,be=be.setEndPosition(be.endLineNumber-1,ie.getLineMaxColumn(be.endLineNumber-1)));let Ge=[];for(let _t=be.startLineNumber;_t<=be.endLineNumber;_t++)Ge.push(ie.getLineContent(_t));const nt=Ge.join(`
`);nt===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?xe.addEditOperation(new T.e(be.endLineNumber,ie.getLineMaxColumn(be.endLineNumber),be.endLineNumber+1,1),be.endLineNumber===ie.getLineCount()?"":`
`):this._isCopyingDown?xe.addEditOperation(new T.e(be.startLineNumber,1,be.startLineNumber,1),nt+`
`):xe.addEditOperation(new T.e(be.endLineNumber,ie.getLineMaxColumn(be.endLineNumber),be.endLineNumber,ie.getLineMaxColumn(be.endLineNumber)),`
`+nt),this._selectionId=xe.trackSelection(be),this._selectionDirection=this._selection.getDirection()}computeCursorState(ie,xe){let be=xe.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let Ge=be.startLineNumber,nt=be.startColumn,_t=be.endLineNumber,Ot=be.endColumn;this._startLineNumberDelta!==0&&(Ge=Ge+this._startLineNumberDelta,nt=1),this._endLineNumberDelta!==0&&(_t=_t+this._endLineNumberDelta,Ot=1),be=g.Y.createWithDirection(Ge,nt,_t,Ot,this._selectionDirection)}return be}}var C=a(10291),M=a(49119),E=a(89381),_=a(18279);class L{constructor(ie,xe,be){this._selection=ie,this._isMovingDown=xe,this._autoIndent=be,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(ie,xe){let be=ie.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===be){this._selectionId=xe.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=xe.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let Ge=this._selection;Ge.startLineNumber<Ge.endLineNumber&&Ge.endColumn===1&&(this._moveEndPositionDown=!0,Ge=Ge.setEndPosition(Ge.endLineNumber-1,ie.getLineMaxColumn(Ge.endLineNumber-1)));const{tabSize:nt,indentSize:_t,insertSpaces:Ot}=ie.getOptions();let rn=this.buildIndentConverter(nt,_t,Ot),gt={getLineTokens:Ue=>ie.getLineTokens(Ue),getLanguageId:()=>ie.getLanguageId(),getLanguageIdAtPosition:(Ue,Ye)=>ie.getLanguageIdAtPosition(Ue,Ye),getLineContent:null};if(Ge.startLineNumber===Ge.endLineNumber&&ie.getLineMaxColumn(Ge.startLineNumber)===1){let Ue=Ge.startLineNumber,Ye=this._isMovingDown?Ue+1:Ue-1;ie.getLineMaxColumn(Ye)===1?xe.addEditOperation(new T.e(1,1,1,1),null):(xe.addEditOperation(new T.e(Ue,1,Ue,1),ie.getLineContent(Ye)),xe.addEditOperation(new T.e(Ye,1,Ye,ie.getLineMaxColumn(Ye)),null)),Ge=new g.Y(Ye,1,Ye,1)}else{let Ue,Ye;if(this._isMovingDown){Ue=Ge.endLineNumber+1,Ye=ie.getLineContent(Ue),xe.addEditOperation(new T.e(Ue-1,ie.getLineMaxColumn(Ue-1),Ue,ie.getLineMaxColumn(Ue)),null);let dt=Ye;if(this.shouldAutoIndent(ie,Ge)){let Re=this.matchEnterRule(ie,rn,nt,Ue,Ge.startLineNumber-1);if(Re!==null){let at=S.V8(ie.getLineContent(Ue)),pt=Re+_.Y(at,nt);dt=_.J(pt,nt,Ot)+this.trimLeft(Ye)}else{gt.getLineContent=pt=>pt===Ge.startLineNumber?ie.getLineContent(Ue):ie.getLineContent(pt);let at=E.zu.getGoodIndentForLine(this._autoIndent,gt,ie.getLanguageIdAtPosition(Ue,1),Ge.startLineNumber,rn);if(at!==null){let pt=S.V8(ie.getLineContent(Ue)),Be=_.Y(at,nt),je=_.Y(pt,nt);Be!==je&&(dt=_.J(Be,nt,Ot)+this.trimLeft(Ye))}}xe.addEditOperation(new T.e(Ge.startLineNumber,1,Ge.startLineNumber,1),dt+`
`);let Ve=this.matchEnterRuleMovingDown(ie,rn,nt,Ge.startLineNumber,Ue,dt);if(Ve!==null)Ve!==0&&this.getIndentEditsOfMovingBlock(ie,xe,Ge,nt,Ot,Ve);else{gt.getLineContent=pt=>pt===Ge.startLineNumber?dt:pt>=Ge.startLineNumber+1&&pt<=Ge.endLineNumber+1?ie.getLineContent(pt-1):ie.getLineContent(pt);let at=E.zu.getGoodIndentForLine(this._autoIndent,gt,ie.getLanguageIdAtPosition(Ue,1),Ge.startLineNumber+1,rn);if(at!==null){const pt=S.V8(ie.getLineContent(Ge.startLineNumber)),Be=_.Y(at,nt),je=_.Y(pt,nt);if(Be!==je){const Et=Be-je;this.getIndentEditsOfMovingBlock(ie,xe,Ge,nt,Ot,Et)}}}}else xe.addEditOperation(new T.e(Ge.startLineNumber,1,Ge.startLineNumber,1),dt+`
`)}else if(Ue=Ge.startLineNumber-1,Ye=ie.getLineContent(Ue),xe.addEditOperation(new T.e(Ue,1,Ue+1,1),null),xe.addEditOperation(new T.e(Ge.endLineNumber,ie.getLineMaxColumn(Ge.endLineNumber),Ge.endLineNumber,ie.getLineMaxColumn(Ge.endLineNumber)),`
`+Ye),this.shouldAutoIndent(ie,Ge)){gt.getLineContent=Re=>Re===Ue?ie.getLineContent(Ge.startLineNumber):ie.getLineContent(Re);let dt=this.matchEnterRule(ie,rn,nt,Ge.startLineNumber,Ge.startLineNumber-2);if(dt!==null)dt!==0&&this.getIndentEditsOfMovingBlock(ie,xe,Ge,nt,Ot,dt);else{let Re=E.zu.getGoodIndentForLine(this._autoIndent,gt,ie.getLanguageIdAtPosition(Ge.startLineNumber,1),Ue,rn);if(Re!==null){let Ve=S.V8(ie.getLineContent(Ge.startLineNumber)),at=_.Y(Re,nt),pt=_.Y(Ve,nt);if(at!==pt){let Be=at-pt;this.getIndentEditsOfMovingBlock(ie,xe,Ge,nt,Ot,Be)}}}}}this._selectionId=xe.trackSelection(Ge)}buildIndentConverter(ie,xe,be){return{shiftIndent:Ge=>C.U.shiftIndent(Ge,Ge.length+1,ie,xe,be),unshiftIndent:Ge=>C.U.unshiftIndent(Ge,Ge.length+1,ie,xe,be)}}parseEnterResult(ie,xe,be,Ge,nt){if(nt){let _t=nt.indentation;nt.indentAction===M.wU.None||nt.indentAction===M.wU.Indent?_t=nt.indentation+nt.appendText:nt.indentAction===M.wU.IndentOutdent?_t=nt.indentation:nt.indentAction===M.wU.Outdent&&(_t=xe.unshiftIndent(nt.indentation)+nt.appendText);let Ot=ie.getLineContent(Ge);if(this.trimLeft(Ot).indexOf(this.trimLeft(_t))>=0){let rn=S.V8(ie.getLineContent(Ge)),gt=S.V8(_t),Ue=E.zu.getIndentMetadata(ie,Ge);Ue!==null&&Ue&2&&(gt=xe.unshiftIndent(gt));let Ye=_.Y(gt,be),dt=_.Y(rn,be);return Ye-dt}}return null}matchEnterRuleMovingDown(ie,xe,be,Ge,nt,_t){if(S.ow(_t)>=0){let Ot=ie.getLineMaxColumn(nt),rn=E.zu.getEnterAction(this._autoIndent,ie,new T.e(nt,Ot,nt,Ot));return this.parseEnterResult(ie,xe,be,Ge,rn)}else{let Ot=Ge-1;for(;Ot>=1;){let Ue=ie.getLineContent(Ot);if(S.ow(Ue)>=0)break;Ot--}if(Ot<1||Ge>ie.getLineCount())return null;let rn=ie.getLineMaxColumn(Ot),gt=E.zu.getEnterAction(this._autoIndent,ie,new T.e(Ot,rn,Ot,rn));return this.parseEnterResult(ie,xe,be,Ge,gt)}}matchEnterRule(ie,xe,be,Ge,nt,_t){let Ot=nt;for(;Ot>=1;){let Ue;if(Ot===nt&&_t!==void 0?Ue=_t:Ue=ie.getLineContent(Ot),S.ow(Ue)>=0)break;Ot--}if(Ot<1||Ge>ie.getLineCount())return null;let rn=ie.getLineMaxColumn(Ot),gt=E.zu.getEnterAction(this._autoIndent,ie,new T.e(Ot,rn,Ot,rn));return this.parseEnterResult(ie,xe,be,Ge,gt)}trimLeft(ie){return ie.replace(/^\s+/,"")}shouldAutoIndent(ie,xe){if(this._autoIndent<4||!ie.isCheapToTokenize(xe.startLineNumber))return!1;let be=ie.getLanguageIdAtPosition(xe.startLineNumber,1),Ge=ie.getLanguageIdAtPosition(xe.endLineNumber,1);return!(be!==Ge||E.zu.getIndentRulesSupport(be)===null)}getIndentEditsOfMovingBlock(ie,xe,be,Ge,nt,_t){for(let Ot=be.startLineNumber;Ot<=be.endLineNumber;Ot++){let rn=ie.getLineContent(Ot),gt=S.V8(rn),Ye=_.Y(gt,Ge)+_t,dt=_.J(Ye,Ge,nt);dt!==gt&&(xe.addEditOperation(new T.e(Ot,1,Ot,gt.length+1),dt),Ot===be.endLineNumber&&be.endColumn<=gt.length+1&&dt===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(ie,xe){let be=xe.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(be=be.setEndPosition(be.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&be.startLineNumber<be.endLineNumber&&(be=be.setEndPosition(be.endLineNumber,2)),be}}class N{constructor(ie,xe){this.selection=ie,this.descending=xe,this.selectionId=null}static getCollator(){return N._COLLATOR||(N._COLLATOR=new Intl.Collator),N._COLLATOR}getEditOperations(ie,xe){let be=I(ie,this.selection,this.descending);be&&xe.addEditOperation(be.range,be.text),this.selectionId=xe.trackSelection(this.selection)}computeCursorState(ie,xe){return xe.getTrackedSelection(this.selectionId)}static canRun(ie,xe,be){if(ie===null)return!1;let Ge=b(ie,xe,be);if(!Ge)return!1;for(let nt=0,_t=Ge.before.length;nt<_t;nt++)if(Ge.before[nt]!==Ge.after[nt])return!0;return!1}}N._COLLATOR=null;function b(Q,ie,xe){let be=ie.startLineNumber,Ge=ie.endLineNumber;if(ie.endColumn===1&&Ge--,be>=Ge)return null;let nt=[];for(let Ot=be;Ot<=Ge;Ot++)nt.push(Q.getLineContent(Ot));let _t=nt.slice(0);return _t.sort(N.getCollator().compare),xe===!0&&(_t=_t.reverse()),{startLineNumber:be,endLineNumber:Ge,before:nt,after:_t}}function I(Q,ie,xe){let be=b(Q,ie,xe);return be?j.h.replace(new T.e(be.startLineNumber,1,be.endLineNumber,Q.getLineMaxColumn(be.endLineNumber)),be.after.join(`
`)):null}var k=a(63580),W=a(84144);class q extends z.R6{constructor(ie,xe){super(xe);this.down=ie}run(ie,xe){if(!xe.hasModel())return;const be=xe.getSelections().map((_t,Ot)=>({selection:_t,index:Ot,ignore:!1}));be.sort((_t,Ot)=>T.e.compareRangesUsingStarts(_t.selection,Ot.selection));let Ge=be[0];for(let _t=1;_t<be.length;_t++){const Ot=be[_t];Ge.selection.endLineNumber===Ot.selection.startLineNumber&&(Ge.index<Ot.index?Ot.ignore=!0:(Ge.ignore=!0,Ge=Ot))}const nt=[];for(const _t of be)nt.push(new c(_t.selection,this.down,_t.ignore));xe.pushUndoStop(),xe.executeCommands(this.id,nt),xe.pushUndoStop()}}class re extends q{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:k.N("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:512|1024|16,linux:{primary:2048|512|1024|16},weight:100},menuOpts:{menuId:W.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class de extends q{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:k.N("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:512|1024|18,linux:{primary:2048|512|1024|18},weight:100},menuOpts:{menuId:W.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class pe extends z.R6{constructor(){super({id:"editor.action.duplicateSelection",label:k.N("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:D.u.writable,menuOpts:{menuId:W.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(ie,xe,be){if(!xe.hasModel())return;const Ge=[],nt=xe.getSelections(),_t=xe.getModel();for(const Ot of nt)if(Ot.isEmpty())Ge.push(new c(Ot,!0));else{const rn=new g.Y(Ot.endLineNumber,Ot.endColumn,Ot.endLineNumber,Ot.endColumn);Ge.push(new O.OY(rn,_t.getValueInRange(Ot)))}xe.pushUndoStop(),xe.executeCommands(this.id,Ge),xe.pushUndoStop()}}class ae extends z.R6{constructor(ie,xe){super(xe);this.down=ie}run(ie,xe){let be=[],Ge=xe.getSelections()||[];const nt=xe.getOption(9);for(const _t of Ge)be.push(new L(_t,this.down,nt));xe.pushUndoStop(),xe.executeCommands(this.id,be),xe.pushUndoStop()}}class ue extends ae{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:k.N("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:512|16,linux:{primary:512|16},weight:100},menuOpts:{menuId:W.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class te extends ae{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:k.N("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:512|18,linux:{primary:512|18},weight:100},menuOpts:{menuId:W.eH.MenubarSelectionMenu,group:"2_line",title:k.N({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class K extends z.R6{constructor(ie,xe){super(xe);this.descending=ie}run(ie,xe){const be=xe.getSelections()||[];for(const nt of be)if(!N.canRun(xe.getModel(),nt,this.descending))return;let Ge=[];for(let nt=0,_t=be.length;nt<_t;nt++)Ge[nt]=new N(be[nt],this.descending);xe.pushUndoStop(),xe.executeCommands(this.id,Ge),xe.pushUndoStop()}}class U extends K{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:k.N("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:D.u.writable})}}class ee extends K{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:k.N("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:D.u.writable})}}class X extends z.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:k.N("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:D.u.writable})}run(ie,xe){if(!xe.hasModel())return;let be=xe.getModel();if(be.getLineCount()===1&&be.getLineMaxColumn(1)===1)return;let Ge=[],nt=[],_t=0;for(let Ot of xe.getSelections()){let rn=new Set,gt=[];for(let Re=Ot.startLineNumber;Re<=Ot.endLineNumber;Re++){let Ve=be.getLineContent(Re);rn.has(Ve)||(gt.push(Ve),rn.add(Ve))}let Ue=new g.Y(Ot.startLineNumber,1,Ot.endLineNumber,be.getLineMaxColumn(Ot.endLineNumber)),Ye=Ot.startLineNumber-_t,dt=new g.Y(Ye,1,Ye+gt.length-1,gt[gt.length-1].length);Ge.push(j.h.replace(Ue,gt.join(`
`))),nt.push(dt),_t+=Ot.endLineNumber-Ot.startLineNumber+1-gt.length}xe.pushUndoStop(),xe.executeEdits(this.id,Ge,nt),xe.pushUndoStop()}}class le extends z.R6{constructor(){super({id:le.ID,label:k.N("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:(0,p.gx)(2048|41,2048|54),weight:100}})}run(ie,xe,be){let Ge=[];be.reason==="auto-save"&&(Ge=(xe.getSelections()||[]).map(Ot=>new v.L(Ot.positionLineNumber,Ot.positionColumn)));let nt=xe.getSelection();if(nt===null)return;let _t=new B(nt,Ge);xe.pushUndoStop(),xe.executeCommands(this.id,[_t]),xe.pushUndoStop()}}le.ID="editor.action.trimTrailingWhitespace";class oe extends z.R6{constructor(){super({id:"editor.action.deleteLines",label:k.N("lines.delete","Delete Line"),alias:"Delete Line",precondition:D.u.writable,kbOpts:{kbExpr:D.u.textInputFocus,primary:2048|1024|41,weight:100}})}run(ie,xe){if(!xe.hasModel())return;let be=this._getLinesToRemove(xe),Ge=xe.getModel();if(Ge.getLineCount()===1&&Ge.getLineMaxColumn(1)===1)return;let nt=0,_t=[],Ot=[];for(let rn=0,gt=be.length;rn<gt;rn++){const Ue=be[rn];let Ye=Ue.startLineNumber,dt=Ue.endLineNumber,Re=1,Ve=Ge.getLineMaxColumn(dt);dt<Ge.getLineCount()?(dt+=1,Ve=1):Ye>1&&(Ye-=1,Re=Ge.getLineMaxColumn(Ye)),_t.push(j.h.replace(new g.Y(Ye,Re,dt,Ve),"")),Ot.push(new g.Y(Ye-nt,Ue.positionColumn,Ye-nt,Ue.positionColumn)),nt+=Ue.endLineNumber-Ue.startLineNumber+1}xe.pushUndoStop(),xe.executeEdits(this.id,_t,Ot),xe.pushUndoStop()}_getLinesToRemove(ie){let xe=ie.getSelections().map(nt=>{let _t=nt.endLineNumber;return nt.startLineNumber<nt.endLineNumber&&nt.endColumn===1&&(_t-=1),{startLineNumber:nt.startLineNumber,selectionStartColumn:nt.selectionStartColumn,endLineNumber:_t,positionColumn:nt.positionColumn}});xe.sort((nt,_t)=>nt.startLineNumber===_t.startLineNumber?nt.endLineNumber-_t.endLineNumber:nt.startLineNumber-_t.startLineNumber);let be=[],Ge=xe[0];for(let nt=1;nt<xe.length;nt++)Ge.endLineNumber+1>=xe[nt].startLineNumber?Ge.endLineNumber=xe[nt].endLineNumber:(be.push(Ge),Ge=xe[nt]);return be.push(Ge),be}}class Ce extends z.R6{constructor(){super({id:"editor.action.indentLines",label:k.N("lines.indent","Indent Line"),alias:"Indent Line",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:2048|89,weight:100}})}run(ie,xe){const be=xe._getViewModel();!be||(xe.pushUndoStop(),xe.executeCommands(this.id,x.u.indent(be.cursorConfig,xe.getModel(),xe.getSelections())),xe.pushUndoStop())}}class ye extends z.R6{constructor(){super({id:"editor.action.outdentLines",label:k.N("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:2048|87,weight:100}})}run(ie,xe){d.CoreEditingCommands.Outdent.runEditorCommand(ie,xe,null)}}class ke extends z.R6{constructor(){super({id:"editor.action.insertLineBefore",label:k.N("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:2048|1024|3,weight:100}})}run(ie,xe){const be=xe._getViewModel();!be||(xe.pushUndoStop(),xe.executeCommands(this.id,x.u.lineInsertBefore(be.cursorConfig,xe.getModel(),xe.getSelections())))}}class Te extends z.R6{constructor(){super({id:"editor.action.insertLineAfter",label:k.N("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:2048|3,weight:100}})}run(ie,xe){const be=xe._getViewModel();!be||(xe.pushUndoStop(),xe.executeCommands(this.id,x.u.lineInsertAfter(be.cursorConfig,xe.getModel(),xe.getSelections())))}}class ge extends z.R6{run(ie,xe){if(!xe.hasModel())return;const be=xe.getSelection();let Ge=this._getRangesToDelete(xe),nt=[];for(let rn=0,gt=Ge.length-1;rn<gt;rn++){let Ue=Ge[rn],Ye=Ge[rn+1];T.e.intersectRanges(Ue,Ye)===null?nt.push(Ue):Ge[rn+1]=T.e.plusRange(Ue,Ye)}nt.push(Ge[Ge.length-1]);let _t=this._getEndCursorState(be,nt),Ot=nt.map(rn=>j.h.replace(rn,""));xe.pushUndoStop(),xe.executeEdits(this.id,Ot,_t),xe.pushUndoStop()}}class we extends ge{constructor(){super({id:"deleteAllLeft",label:k.N("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:D.u.writable,kbOpts:{kbExpr:D.u.textInputFocus,primary:0,mac:{primary:2048|1},weight:100}})}_getEndCursorState(ie,xe){let be=null,Ge=[],nt=0;return xe.forEach(_t=>{let Ot;if(_t.endColumn===1&&nt>0){let rn=_t.startLineNumber-nt;Ot=new g.Y(rn,_t.startColumn,rn,_t.startColumn)}else Ot=new g.Y(_t.startLineNumber,_t.startColumn,_t.startLineNumber,_t.startColumn);nt+=_t.endLineNumber-_t.startLineNumber,_t.intersectRanges(ie)?be=Ot:Ge.push(Ot)}),be&&Ge.unshift(be),Ge}_getRangesToDelete(ie){let xe=ie.getSelections();if(xe===null)return[];let be=xe,Ge=ie.getModel();return Ge===null?[]:(be.sort(T.e.compareRangesUsingStarts),be=be.map(nt=>{if(nt.isEmpty())if(nt.startColumn===1){let _t=Math.max(1,nt.startLineNumber-1),Ot=nt.startLineNumber===1?1:Ge.getLineContent(_t).length+1;return new T.e(_t,Ot,nt.startLineNumber,1)}else return new T.e(nt.startLineNumber,1,nt.startLineNumber,nt.startColumn);else return new T.e(nt.startLineNumber,1,nt.endLineNumber,nt.endColumn)}),be)}}class ze extends ge{constructor(){super({id:"deleteAllRight",label:k.N("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:D.u.writable,kbOpts:{kbExpr:D.u.textInputFocus,primary:0,mac:{primary:256|41,secondary:[2048|20]},weight:100}})}_getEndCursorState(ie,xe){let be=null,Ge=[];for(let nt=0,_t=xe.length,Ot=0;nt<_t;nt++){let rn=xe[nt],gt=new g.Y(rn.startLineNumber-Ot,rn.startColumn,rn.startLineNumber-Ot,rn.startColumn);rn.intersectRanges(ie)?be=gt:Ge.push(gt)}return be&&Ge.unshift(be),Ge}_getRangesToDelete(ie){let xe=ie.getModel();if(xe===null)return[];let be=ie.getSelections();if(be===null)return[];let Ge=be.map(nt=>{if(nt.isEmpty()){const _t=xe.getLineMaxColumn(nt.startLineNumber);return nt.startColumn===_t?new T.e(nt.startLineNumber,nt.startColumn,nt.startLineNumber+1,1):new T.e(nt.startLineNumber,nt.startColumn,nt.startLineNumber,_t)}return nt});return Ge.sort(T.e.compareRangesUsingStarts),Ge}}class Qe extends z.R6{constructor(){super({id:"editor.action.joinLines",label:k.N("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:D.u.writable,kbOpts:{kbExpr:D.u.editorTextFocus,primary:0,mac:{primary:256|40},weight:100}})}run(ie,xe){let be=xe.getSelections();if(be===null)return;let Ge=xe.getSelection();if(Ge===null)return;be.sort(T.e.compareRangesUsingStarts);let nt=[],_t=be.reduce((dt,Re)=>dt.isEmpty()?dt.endLineNumber===Re.startLineNumber?(Ge.equalsSelection(dt)&&(Ge=Re),Re):Re.startLineNumber>dt.endLineNumber+1?(nt.push(dt),Re):new g.Y(dt.startLineNumber,dt.startColumn,Re.endLineNumber,Re.endColumn):Re.startLineNumber>dt.endLineNumber?(nt.push(dt),Re):new g.Y(dt.startLineNumber,dt.startColumn,Re.endLineNumber,Re.endColumn));nt.push(_t);let Ot=xe.getModel();if(Ot===null)return;let rn=[],gt=[],Ue=Ge,Ye=0;for(let dt=0,Re=nt.length;dt<Re;dt++){let Ve=nt[dt],at=Ve.startLineNumber,pt=1,Be=0,je,Et,Dt=Ot.getLineContent(Ve.endLineNumber).length-Ve.endColumn;if(Ve.isEmpty()||Ve.startLineNumber===Ve.endLineNumber){let an=Ve.getStartPosition();an.lineNumber<Ot.getLineCount()?(je=at+1,Et=Ot.getLineMaxColumn(je)):(je=an.lineNumber,Et=Ot.getLineMaxColumn(an.lineNumber))}else je=Ve.endLineNumber,Et=Ot.getLineMaxColumn(je);let Xe=Ot.getLineContent(at);for(let an=at+1;an<=je;an++){let An=Ot.getLineContent(an),Fn=Ot.getLineFirstNonWhitespaceColumn(an);if(Fn>=1){let Ht=!0;Xe===""&&(Ht=!1),Ht&&(Xe.charAt(Xe.length-1)===" "||Xe.charAt(Xe.length-1)==="	")&&(Ht=!1,Xe=Xe.replace(/[\s\uFEFF\xA0]+$/g," "));let Kt=An.substr(Fn-1);Xe+=(Ht?" ":"")+Kt,Ht?Be=Kt.length+1:Be=Kt.length}else Be=0}let ft=new T.e(at,pt,je,Et);if(!ft.isEmpty()){let an;Ve.isEmpty()?(rn.push(j.h.replace(ft,Xe)),an=new g.Y(ft.startLineNumber-Ye,Xe.length-Be+1,at-Ye,Xe.length-Be+1)):Ve.startLineNumber===Ve.endLineNumber?(rn.push(j.h.replace(ft,Xe)),an=new g.Y(Ve.startLineNumber-Ye,Ve.startColumn,Ve.endLineNumber-Ye,Ve.endColumn)):(rn.push(j.h.replace(ft,Xe)),an=new g.Y(Ve.startLineNumber-Ye,Ve.startColumn,Ve.startLineNumber-Ye,Xe.length-Dt)),T.e.intersectRanges(ft,Ge)!==null?Ue=an:gt.push(an)}Ye+=ft.endLineNumber-ft.startLineNumber}gt.unshift(Ue),xe.pushUndoStop(),xe.executeEdits(this.id,rn,gt),xe.pushUndoStop()}}class Pe extends z.R6{constructor(){super({id:"editor.action.transpose",label:k.N("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:D.u.writable})}run(ie,xe){let be=xe.getSelections();if(be===null)return;let Ge=xe.getModel();if(Ge===null)return;let nt=[];for(let _t=0,Ot=be.length;_t<Ot;_t++){let rn=be[_t];if(!rn.isEmpty())continue;let gt=rn.getStartPosition(),Ue=Ge.getLineMaxColumn(gt.lineNumber);if(gt.column>=Ue){if(gt.lineNumber===Ge.getLineCount())continue;let Ye=new T.e(gt.lineNumber,Math.max(1,gt.column-1),gt.lineNumber+1,1),dt=Ge.getValueInRange(Ye).split("").reverse().join("");nt.push(new O.T4(new g.Y(gt.lineNumber,Math.max(1,gt.column-1),gt.lineNumber+1,1),dt))}else{let Ye=new T.e(gt.lineNumber,Math.max(1,gt.column-1),gt.lineNumber,gt.column+1),dt=Ge.getValueInRange(Ye).split("").reverse().join("");nt.push(new O.hP(Ye,dt,new g.Y(gt.lineNumber,gt.column+1,gt.lineNumber,gt.column+1)))}}xe.pushUndoStop(),xe.executeCommands(this.id,nt),xe.pushUndoStop()}}class Oe extends z.R6{run(ie,xe){const be=xe.getSelections();if(be===null)return;const Ge=xe.getModel();if(Ge===null)return;const nt=xe.getOption(117),_t=[];for(const Ot of be)if(Ot.isEmpty()){const rn=Ot.getStartPosition(),gt=xe.getConfiguredWordAtPosition(rn);if(!gt)continue;const Ue=new T.e(rn.lineNumber,gt.startColumn,rn.lineNumber,gt.endColumn),Ye=Ge.getValueInRange(Ue);_t.push(j.h.replace(Ue,this._modifyText(Ye,nt)))}else{const rn=Ge.getValueInRange(Ot);_t.push(j.h.replace(Ot,this._modifyText(rn,nt)))}xe.pushUndoStop(),xe.executeEdits(this.id,_t),xe.pushUndoStop()}}class qe extends Oe{constructor(){super({id:"editor.action.transformToUppercase",label:k.N("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:D.u.writable})}_modifyText(ie,xe){return ie.toLocaleUpperCase()}}class Je extends Oe{constructor(){super({id:"editor.action.transformToLowercase",label:k.N("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:D.u.writable})}_modifyText(ie,xe){return ie.toLocaleLowerCase()}}class Ne{constructor(ie,xe){this._pattern=ie,this._flags=xe,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(ie){}}return this._actual}isSupported(){return this.get()!==null}}class Fe extends Oe{constructor(){super({id:"editor.action.transformToTitlecase",label:k.N("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:D.u.writable})}_modifyText(ie,xe){const be=Fe.titleBoundary.get();return be?ie.toLocaleLowerCase().replace(be,Ge=>Ge.toLocaleUpperCase()):ie}}Fe.titleBoundary=new Ne("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class ne extends Oe{constructor(){super({id:"editor.action.transformToSnakecase",label:k.N("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:D.u.writable})}_modifyText(ie,xe){const be=ne.caseBoundary.get(),Ge=ne.singleLetters.get();return!be||!Ge?ie:ie.replace(be,"$1_$2").replace(Ge,"$1_$2$3").toLocaleLowerCase()}}ne.caseBoundary=new Ne("(\\p{Ll})(\\p{Lu})","gmu"),ne.singleLetters=new Ne("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu"),(0,z.Qr)(re),(0,z.Qr)(de),(0,z.Qr)(pe),(0,z.Qr)(ue),(0,z.Qr)(te),(0,z.Qr)(U),(0,z.Qr)(ee),(0,z.Qr)(X),(0,z.Qr)(le),(0,z.Qr)(oe),(0,z.Qr)(Ce),(0,z.Qr)(ye),(0,z.Qr)(ke),(0,z.Qr)(Te),(0,z.Qr)(we),(0,z.Qr)(ze),(0,z.Qr)(Qe),(0,z.Qr)(Pe),(0,z.Qr)(qe),(0,z.Qr)(Je),ne.caseBoundary.isSupported()&&ne.singleLetters.isSupported()&&(0,z.Qr)(ne),Fe.titleBoundary.isSupported()&&(0,z.Qr)(Fe)},76:function(Tt,me,a){"use strict";a.r(me),a.d(me,{CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE:function(){return de},LinkedEditingContribution:function(){return ae},LinkedEditingAction:function(){return ue},editorLinkedEditingBackground:function(){return U}});var p=a(9488),d=a(15393),z=a(71050),O=a(41264),S=a(17301),j=a(4669),T=a(9917),B=a(25924),F=a(70666),x=a(16830),v=a(11640),g=a(50187),D=a(24314),c=a(29102),C=a(45146),M=a(89381),E=a(63580),_=a(16141),L=a(73910),N=a(97781),b=a(71922),I=a(88191),k=a(84013),W=function(ee,X,le,oe){var Ce=arguments.length,ye=Ce<3?X:oe===null?oe=Object.getOwnPropertyDescriptor(X,le):oe,ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ye=Reflect.decorate(ee,X,le,oe);else for(var Te=ee.length-1;Te>=0;Te--)(ke=ee[Te])&&(ye=(Ce<3?ke(ye):Ce>3?ke(X,le,ye):ke(X,le))||ye);return Ce>3&&ye&&Object.defineProperty(X,le,ye),ye},q=function(ee,X){return function(le,oe){X(le,oe,ee)}},re=function(ee,X,le,oe){function Ce(ye){return ye instanceof le?ye:new le(function(ke){ke(ye)})}return new(le||(le=Promise))(function(ye,ke){function Te(ze){try{we(oe.next(ze))}catch(Qe){ke(Qe)}}function ge(ze){try{we(oe.throw(ze))}catch(Qe){ke(Qe)}}function we(ze){ze.done?ye(ze.value):Ce(ze.value).then(Te,ge)}we((oe=oe.apply(ee,X||[])).next())})};const de=new _.uy("LinkedEditingInputVisible",!1),pe="linked-editing-decoration";let ae=class w0 extends T.JT{constructor(X,le,oe,Ce,ye){super();this.languageConfigurationService=Ce,this._localToDispose=this._register(new T.SL),this._editor=X,this._providers=oe.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=de.bindTo(le),this._debounceInformation=ye.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new T.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(ke=>{(ke.hasChanged(62)||ke.hasChanged(82))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(X){return X.getContribution(w0.ID)}reinitialize(X){const le=this._editor.getModel(),oe=le!==null&&(this._editor.getOption(62)||this._editor.getOption(82))&&this._providers.has(le);if(oe===this._enabled&&!X||(this._enabled=oe,this.clearRanges(),this._localToDispose.clear(),!oe||le===null))return;this._localToDispose.add(j.ju.runAndSubscribe(le.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(le.getLanguageId()).getWordDefinition()}));const Ce=new d.vp(this._debounceInformation.get(le)),ye=()=>{var ge;this._rangeUpdateTriggerPromise=Ce.trigger(()=>this.updateRanges(),(ge=this._debounceDuration)!==null&&ge!==void 0?ge:this._debounceInformation.get(le))},ke=new d.vp(0),Te=ge=>{this._rangeSyncTriggerPromise=ke.trigger(()=>this._syncRanges(ge))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{ye()})),this._localToDispose.add(this._editor.onDidChangeModelContent(ge=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const we=le.getDecorationRange(this._currentDecorations[0]);if(we&&ge.changes.every(ze=>we.intersectRanges(ze.range))){Te(this._currentDecorations);return}}ye()})),this._localToDispose.add({dispose:()=>{Ce.dispose(),ke.dispose()}}),this.updateRanges()}_syncRanges(X){if(!this._editor.hasModel()||X!==this._currentDecorations||X.length===0)return;const le=this._editor.getModel(),oe=le.getDecorationRange(X[0]);if(!oe||oe.startLineNumber!==oe.endLineNumber)return this.clearRanges();const Ce=le.getValueInRange(oe);if(this._currentWordPattern){const ke=Ce.match(this._currentWordPattern);if((ke?ke[0].length:0)!==Ce.length)return this.clearRanges()}let ye=[];for(let ke=1,Te=X.length;ke<Te;ke++){const ge=le.getDecorationRange(X[ke]);if(!!ge)if(ge.startLineNumber!==ge.endLineNumber)ye.push({range:ge,text:Ce});else{let we=le.getValueInRange(ge),ze=Ce,Qe=ge.startColumn,Pe=ge.endColumn;const Oe=B.Mh(we,ze);Qe+=Oe,we=we.substr(Oe),ze=ze.substr(Oe);const qe=B.P1(we,ze);Pe-=qe,we=we.substr(0,we.length-qe),ze=ze.substr(0,ze.length-qe),(Qe!==Pe||ze.length!==0)&&ye.push({range:new D.e(ge.startLineNumber,Qe,ge.endLineNumber,Pe),text:ze})}}if(ye.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const ke=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",ye),this._editor._getViewModel().setPrevEditOperationType(ke)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(X=!1){return re(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const le=this._editor.getPosition();if(!this._enabled&&!X||this._editor.getSelections().length>1){this.clearRanges();return}const oe=this._editor.getModel(),Ce=oe.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===Ce){if(le.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const ke=oe.getDecorationRange(this._currentDecorations[0]);if(ke&&ke.containsPosition(le))return}}this._currentRequestPosition=le,this._currentRequestModelVersion=Ce;const ye=(0,d.PG)(ke=>re(this,void 0,void 0,function*(){try{const Te=new k.G(!1),ge=yield K(this._providers,oe,le,ke);if(this._debounceInformation.update(oe,Te.elapsed()),ye!==this._currentRequest||(this._currentRequest=null,Ce!==oe.getVersionId()))return;let we=[];(ge==null?void 0:ge.ranges)&&(we=ge.ranges),this._currentWordPattern=(ge==null?void 0:ge.wordPattern)||this._languageWordPattern;let ze=!1;for(let Pe=0,Oe=we.length;Pe<Oe;Pe++)if(D.e.containsPosition(we[Pe],le)){if(ze=!0,Pe!==0){const qe=we[Pe];we.splice(Pe,1),we.unshift(qe)}break}if(!ze){this.clearRanges();return}const Qe=we.map(Pe=>({range:Pe,options:w0.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,Qe)}catch(Te){(0,S.n2)(Te)||(0,S.dL)(Te),(this._currentRequest===ye||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=ye,ye})}};ae.ID="editor.contrib.linkedEditing",ae.DECORATION=C.qx.register({description:"linked-editing",stickiness:0,className:pe}),ae=W([q(1,_.i6),q(2,b.p),q(3,M.c_),q(4,I.A)],ae);class ue extends x.R6{constructor(){super({id:"editor.action.linkedEditing",label:E.N("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:_.Ao.and(c.u.writable,c.u.hasRenameProvider),kbOpts:{kbExpr:c.u.editorTextFocus,primary:2048|1024|60,weight:100}})}runCommand(X,le){const oe=X.get(v.$),[Ce,ye]=Array.isArray(le)&&le||[void 0,void 0];return F.o.isUri(Ce)&&g.L.isIPosition(ye)?oe.openCodeEditor({resource:Ce},oe.getActiveCodeEditor()).then(ke=>{!ke||(ke.setPosition(ye),ke.invokeWithinContext(Te=>(this.reportTelemetry(Te,ke),this.run(Te,ke))))},S.dL):super.runCommand(X,le)}run(X,le){const oe=ae.get(le);return oe?Promise.resolve(oe.updateRanges(!0)):Promise.resolve()}}const te=x._l.bindToContribution(ae.get);(0,x.fK)(new te({id:"cancelLinkedEditingInput",precondition:de,handler:ee=>ee.clearRanges(),kbOpts:{kbExpr:c.u.editorTextFocus,weight:100+99,primary:9,secondary:[1024|9]}}));function K(ee,X,le,oe){const Ce=ee.ordered(X);return(0,d.Ps)(Ce.map(ye=>()=>re(this,void 0,void 0,function*(){try{return yield ye.provideLinkedEditingRanges(X,le,oe)}catch(ke){(0,S.Cp)(ke);return}})),ye=>!!ye&&p.Of(ye==null?void 0:ye.ranges))}const U=(0,L.P6G)("editor.linkedEditingBackground",{dark:O.Il.fromHex("#f00").transparent(.3),light:O.Il.fromHex("#f00").transparent(.3),hc:O.Il.fromHex("#f00").transparent(.3)},E.N("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,N.Ic)((ee,X)=>{const le=ee.getColor(U);le&&X.addRule(`.monaco-editor .${pe} { background: ${le}; border-left-color: ${le}; }`)}),(0,x.sb)("_executeLinkedEditingProvider",(ee,X,le)=>{const{linkedEditingRangeProvider:oe}=ee.get(b.p);return K(oe,X,le,z.T.None)}),(0,x._K)(ae.ID,ae),(0,x.Qr)(ue)},57253:function(Tt,me,a){"use strict";a.r(me),a.d(me,{LinkDetector:function(){return U}});var p=a(15393),d=a(71050),z=a(17301),O=a(59365),S=a(9917),j=a(66663),T=a(1432),B=a(95935),F=a(84013),x=a(70666),v=a(16830),g=a(45146),D=a(88191),c=a(71922),C=a(82005),M=a(9488),E=a(98401),_=a(24314),L=a(73733),N=a(94565),b=function(Ce,ye,ke,Te){function ge(we){return we instanceof ke?we:new ke(function(ze){ze(we)})}return new(ke||(ke=Promise))(function(we,ze){function Qe(qe){try{Oe(Te.next(qe))}catch(Je){ze(Je)}}function Pe(qe){try{Oe(Te.throw(qe))}catch(Je){ze(Je)}}function Oe(qe){qe.done?we(qe.value):ge(qe.value).then(Qe,Pe)}Oe((Te=Te.apply(Ce,ye||[])).next())})};class I{constructor(ye,ke){this._link=ye,this._provider=ke}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(ye){return b(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,ye)).then(ke=>(this._link=ke||this._link,this._link.url?this.resolve(ye):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}class k{constructor(ye){this._disposables=new S.SL;let ke=[];for(const[Te,ge]of ye){const we=Te.links.map(ze=>new I(ze,ge));ke=k._union(ke,we),(0,S.Wf)(Te)&&this._disposables.add(Te)}this.links=ke}dispose(){this._disposables.dispose(),this.links.length=0}static _union(ye,ke){let Te=[],ge,we,ze,Qe;for(ge=0,ze=0,we=ye.length,Qe=ke.length;ge<we&&ze<Qe;){const Pe=ye[ge],Oe=ke[ze];if(_.e.areIntersectingOrTouching(Pe.range,Oe.range)){ge++;continue}_.e.compareRangesUsingStarts(Pe.range,Oe.range)<0?(Te.push(Pe),ge++):(Te.push(Oe),ze++)}for(;ge<we;ge++)Te.push(ye[ge]);for(;ze<Qe;ze++)Te.push(ke[ze]);return Te}}function W(Ce,ye,ke){const Te=[],ge=Ce.ordered(ye).reverse().map((we,ze)=>Promise.resolve(we.provideLinks(ye,ke)).then(Qe=>{Qe&&(Te[ze]=[Qe,we])},z.Cp));return Promise.all(ge).then(()=>{const we=new k((0,M.kX)(Te));return ke.isCancellationRequested?(we.dispose(),new k([])):we})}N.P0.registerCommand("_executeLinkProvider",(Ce,...ye)=>b(void 0,void 0,void 0,function*(){let[ke,Te]=ye;(0,E.p_)(ke instanceof x.o),typeof Te!="number"&&(Te=0);const{linkProvider:ge}=Ce.get(c.p),we=Ce.get(L.q).getModel(ke);if(!we)return[];const ze=yield W(ge,we,d.T.None);if(!ze)return[];for(let Pe=0;Pe<Math.min(Te,ze.links.length);Pe++)yield ze.links[Pe].resolve(d.T.None);const Qe=ze.links.slice(0);return ze.dispose(),Qe}));var q=a(63580),re=a(59422),de=a(50988),pe=a(73910),ae=a(97781),ue=function(Ce,ye,ke,Te){var ge=arguments.length,we=ge<3?ye:Te===null?Te=Object.getOwnPropertyDescriptor(ye,ke):Te,ze;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")we=Reflect.decorate(Ce,ye,ke,Te);else for(var Qe=Ce.length-1;Qe>=0;Qe--)(ze=Ce[Qe])&&(we=(ge<3?ze(we):ge>3?ze(ye,ke,we):ze(ye,ke))||we);return ge>3&&we&&Object.defineProperty(ye,ke,we),we},te=function(Ce,ye){return function(ke,Te){ye(ke,Te,Ce)}},K=function(Ce,ye,ke,Te){function ge(we){return we instanceof ke?we:new ke(function(ze){ze(we)})}return new(ke||(ke=Promise))(function(we,ze){function Qe(qe){try{Oe(Te.next(qe))}catch(Je){ze(Je)}}function Pe(qe){try{Oe(Te.throw(qe))}catch(Je){ze(Je)}}function Oe(qe){qe.done?we(qe.value):ge(qe.value).then(Qe,Pe)}Oe((Te=Te.apply(Ce,ye||[])).next())})};let U=class _S extends S.JT{constructor(ye,ke,Te,ge,we){super();this.editor=ye,this.openerService=ke,this.notificationService=Te,this.languageFeaturesService=ge,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=we.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new p.pY(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const ze=this._register(new C.yN(ye));this._register(ze.onMouseMoveOrRelevantKeyDown(([Qe,Pe])=>{this._onEditorMouseMove(Qe,Pe)})),this._register(ze.onExecute(Qe=>{this.onEditorMouseUp(Qe)})),this._register(ze.onCancel(Qe=>{this.cleanUpActiveLinkDecoration()})),this._register(ye.onDidChangeConfiguration(Qe=>{!Qe.hasChanged(63)||(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(ye.onDidChangeModelContent(Qe=>{!this.editor.hasModel()||this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(ye.onDidChangeModel(Qe=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(ye.onDidChangeModelLanguage(Qe=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(Qe=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}static get(ye){return ye.getContribution(_S.ID)}computeLinksNow(){return K(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(63))return;const ye=this.editor.getModel();if(!!this.providers.has(ye)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,p.PG)(ke=>W(this.providers,ye,ke));try{const ke=new F.G(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(ye,ke.elapsed()),ye.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(ke){(0,z.dL)(ke)}finally{this.computePromise=null}}})}updateDecorations(ye){const ke=this.editor.getOption(70)==="altKey",Te=[],ge=Object.keys(this.currentOccurrences);for(const Qe of ge){const Pe=this.currentOccurrences[Qe];Te.push(Pe.decorationId)}const we=[];if(ye)for(const Qe of ye)we.push(X.decoration(Qe,ke));const ze=this.editor.deltaDecorations(Te,we);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let Qe=0,Pe=ze.length;Qe<Pe;Qe++){const Oe=new X(ye[Qe],ze[Qe]);this.currentOccurrences[Oe.decorationId]=Oe}}_onEditorMouseMove(ye,ke){const Te=this.editor.getOption(70)==="altKey";if(this.isEnabled(ye,ke)){this.cleanUpActiveLinkDecoration();const ge=this.getLinkOccurrence(ye.target.position);ge&&this.editor.changeDecorations(we=>{ge.activate(we,Te),this.activeLinkDecorationId=ge.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const ye=this.editor.getOption(70)==="altKey";if(this.activeLinkDecorationId){const ke=this.currentOccurrences[this.activeLinkDecorationId];ke&&this.editor.changeDecorations(Te=>{ke.deactivate(Te,ye)}),this.activeLinkDecorationId=null}}onEditorMouseUp(ye){if(!this.isEnabled(ye))return;const ke=this.getLinkOccurrence(ye.target.position);!ke||this.openLinkOccurrence(ke,ye.hasSideBySideModifier,!0)}openLinkOccurrence(ye,ke,Te=!1){if(!this.openerService)return;const{link:ge}=ye;ge.resolve(d.T.None).then(we=>{if(typeof we=="string"&&this.editor.hasModel()){const ze=this.editor.getModel().uri;if(ze.scheme===j.lg.file&&we.startsWith(`${j.lg.file}:`)){const Qe=x.o.parse(we);if(Qe.scheme===j.lg.file){const Pe=B.z_(Qe);let Oe=null;Pe.startsWith("/./")?Oe=`.${Pe.substr(1)}`:Pe.startsWith("//./")&&(Oe=`.${Pe.substr(2)}`),Oe&&(we=B.Vo(ze,Oe))}}}return this.openerService.open(we,{openToSide:ke,fromUserGesture:Te,allowContributedOpeners:!0,allowCommands:!0})},we=>{const ze=we instanceof Error?we.message:we;ze==="invalid"?this.notificationService.warn(q.N("invalid.url","Failed to open this link because it is not well-formed: {0}",ge.url.toString())):ze==="missing"?this.notificationService.warn(q.N("missing.url","Failed to open this link because its target is missing.")):(0,z.dL)(we)})}getLinkOccurrence(ye){if(!this.editor.hasModel()||!ye)return null;const ke=this.editor.getModel().getDecorationsInRange({startLineNumber:ye.lineNumber,startColumn:ye.column,endLineNumber:ye.lineNumber,endColumn:ye.column},0,!0);for(const Te of ke){const ge=this.currentOccurrences[Te.id];if(ge)return ge}return null}isEnabled(ye,ke){return Boolean(ye.target.type===6&&(ye.hasTriggerModifier||ke&&ke.keyCodeIsTriggerKey))}stop(){var ye;this.computeLinks.cancel(),this.activeLinksList&&((ye=this.activeLinksList)===null||ye===void 0||ye.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};U.ID="editor.linkDetector",U=ue([te(1,de.v4),te(2,re.lT),te(3,c.p),te(4,D.A)],U);const ee={general:g.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:g.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class X{constructor(ye,ke){this.link=ye,this.decorationId=ke}static decoration(ye,ke){return{range:ye.range,options:X._getOptions(ye,ke,!1)}}static _getOptions(ye,ke,Te){const ge=Object.assign({},Te?ee.active:ee.general);return ge.hoverMessage=le(ye,ke),ge}activate(ye,ke){ye.changeDecorationOptions(this.decorationId,X._getOptions(this.link,ke,!0))}deactivate(ye,ke){ye.changeDecorationOptions(this.decorationId,X._getOptions(this.link,ke,!1))}}function le(Ce,ye){const ke=Ce.url&&/^command:/i.test(Ce.url.toString()),Te=Ce.tooltip?Ce.tooltip:ke?q.N("links.navigate.executeCmd","Execute command"):q.N("links.navigate.follow","Follow link"),ge=ye?T.dz?q.N("links.navigate.kb.meta.mac","cmd + click"):q.N("links.navigate.kb.meta","ctrl + click"):T.dz?q.N("links.navigate.kb.alt.mac","option + click"):q.N("links.navigate.kb.alt","alt + click");if(Ce.url){let we="";if(/^command:/i.test(Ce.url.toString())){const Qe=Ce.url.toString().match(/^command:([^?#]+)/);if(Qe){const Pe=Qe[1];we=` "${q.N("tooltip.explanation","Execute command {0}",Pe)}"`}}return new O.W5("",!0).appendMarkdown(`[${Te}](${Ce.url.toString(!0).replace(/ /g,"%20")}${we}) (${ge})`)}else return new O.W5().appendText(`${Te} (${ge})`)}class oe extends v.R6{constructor(){super({id:"editor.action.openLink",label:q.N("label","Open Link"),alias:"Open Link",precondition:void 0})}run(ye,ke){const Te=U.get(ke);if(!Te||!ke.hasModel())return;const ge=ke.getSelections();for(const we of ge){const ze=Te.getLinkOccurrence(we.getEndPosition());ze&&Te.openLinkOccurrence(ze,!1)}}}(0,v._K)(U.ID,U),(0,v.Qr)(oe),(0,ae.Ic)((Ce,ye)=>{const ke=Ce.getColor(pe._Yy);ke&&ye.addRule(`.monaco-editor .detected-link-active { color: ${ke} !important; }`)})},498:function(Tt,me,a){"use strict";a.d(me,{$:function(){return En}});var p=a(65321);/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function d($t){if(Array.isArray($t)){for(var sn=0,Tn=Array($t.length);sn<$t.length;sn++)Tn[sn]=$t[sn];return Tn}else return Array.from($t)}var z=Object.hasOwnProperty,O=Object.setPrototypeOf,S=Object.isFrozen,j=Object.getPrototypeOf,T=Object.getOwnPropertyDescriptor,B=Object.freeze,F=Object.seal,x=Object.create,v=typeof Reflect!="undefined"&&Reflect,g=v.apply,D=v.construct;g||(g=function(sn,Tn,ri){return sn.apply(Tn,ri)}),B||(B=function(sn){return sn}),F||(F=function(sn){return sn}),D||(D=function(sn,Tn){return new(Function.prototype.bind.apply(sn,[null].concat(d(Tn))))});var c=W(Array.prototype.forEach),C=W(Array.prototype.pop),M=W(Array.prototype.push),E=W(String.prototype.toLowerCase),_=W(String.prototype.match),L=W(String.prototype.replace),N=W(String.prototype.indexOf),b=W(String.prototype.trim),I=W(RegExp.prototype.test),k=q(TypeError);function W($t){return function(sn){for(var Tn=arguments.length,ri=Array(Tn>1?Tn-1:0),oi=1;oi<Tn;oi++)ri[oi-1]=arguments[oi];return g($t,sn,ri)}}function q($t){return function(){for(var sn=arguments.length,Tn=Array(sn),ri=0;ri<sn;ri++)Tn[ri]=arguments[ri];return D($t,Tn)}}function re($t,sn){O&&O($t,null);for(var Tn=sn.length;Tn--;){var ri=sn[Tn];if(typeof ri=="string"){var oi=E(ri);oi!==ri&&(S(sn)||(sn[Tn]=oi),ri=oi)}$t[ri]=!0}return $t}function de($t){var sn=x(null),Tn=void 0;for(Tn in $t)g(z,$t,[Tn])&&(sn[Tn]=$t[Tn]);return sn}function pe($t,sn){for(;$t!==null;){var Tn=T($t,sn);if(Tn){if(Tn.get)return W(Tn.get);if(typeof Tn.value=="function")return W(Tn.value)}$t=j($t)}function ri(oi){return console.warn("fallback value for",oi),null}return ri}var ae=B(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ue=B(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),te=B(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),K=B(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U=B(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ee=B(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),X=B(["#text"]),le=B(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),oe=B(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ce=B(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ye=B(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ke=F(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Te=F(/<%[\s\S]*|[\s\S]*%>/gm),ge=F(/^data-[\-\w.\u00B7-\uFFFF]/),we=F(/^aria-[\-\w]+$/),ze=F(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qe=F(/^(?:\w+script|data):/i),Pe=F(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t};function qe($t){if(Array.isArray($t)){for(var sn=0,Tn=Array($t.length);sn<$t.length;sn++)Tn[sn]=$t[sn];return Tn}else return Array.from($t)}var Je=function(){return typeof window=="undefined"?null:window},Ne=function(sn,Tn){if((typeof sn=="undefined"?"undefined":Oe(sn))!=="object"||typeof sn.createPolicy!="function")return null;var ri=null,oi="data-tt-policy-suffix";Tn.currentScript&&Tn.currentScript.hasAttribute(oi)&&(ri=Tn.currentScript.getAttribute(oi));var On="dompurify"+(ri?"#"+ri:"");try{return sn.createPolicy(On,{createHTML:function(Yi){return Yi}})}catch(Qn){return console.warn("TrustedTypes policy "+On+" could not be created."),null}};function Fe(){var $t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Je(),sn=function(Jn){return Fe(Jn)};if(sn.version="2.3.1",sn.removed=[],!$t||!$t.document||$t.document.nodeType!==9)return sn.isSupported=!1,sn;var Tn=$t.document,ri=$t.document,oi=$t.DocumentFragment,On=$t.HTMLTemplateElement,Qn=$t.Node,Yi=$t.Element,Lr=$t.NodeFilter,Dr=$t.NamedNodeMap,Fr=Dr===void 0?$t.NamedNodeMap||$t.MozNamedAttrMap:Dr,Sr=$t.Text,Ro=$t.Comment,to=$t.DOMParser,no=$t.trustedTypes,dr=Yi.prototype,kn=pe(dr,"cloneNode"),bt=pe(dr,"nextSibling"),Bt=pe(dr,"childNodes"),At=pe(dr,"parentNode");if(typeof On=="function"){var Ke=ri.createElement("template");Ke.content&&Ke.content.ownerDocument&&(ri=Ke.content.ownerDocument)}var vt=Ne(no,Tn),Lt=vt&&Ae?vt.createHTML(""):"",tn=ri,dn=tn.implementation,hn=tn.createNodeIterator,Wn=tn.createDocumentFragment,Gn=tn.getElementsByTagName,wi=Tn.importNode,Ci={};try{Ci=de(ri).documentMode?ri.documentMode:{}}catch(xr){}var Xi={};sn.isSupported=typeof At=="function"&&dn&&typeof dn.createHTMLDocument!="undefined"&&Ci!==9;var Nr=ke,yr=Te,Xr=ge,Jr=we,$o=Qe,ms=Pe,cs=ze,nr=null,tr=re({},[].concat(qe(ae),qe(ue),qe(te),qe(U),qe(X))),Br=null,Mr=re({},[].concat(qe(le),qe(oe),qe(Ce),qe(ye))),so=null,jr=null,No=!0,ko=!0,li=!1,tt=!1,St=!1,Pt=!1,Yt=!1,en=!1,Ct=!1,J=!0,Ae=!1,ot=!0,Ee=!0,m=!1,V={},G=null,ce=re({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ve=null,De=re({},["audio","video","img","source","image","track"]),ct=null,lt=re({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nt="http://www.w3.org/1998/Math/MathML",It="http://www.w3.org/2000/svg",Ft="http://www.w3.org/1999/xhtml",jt=Ft,bn=!1,Zn=null,Xn=ri.createElement("form"),gi=function(Jn){Zn&&Zn===Jn||((!Jn||(typeof Jn=="undefined"?"undefined":Oe(Jn))!=="object")&&(Jn={}),Jn=de(Jn),nr="ALLOWED_TAGS"in Jn?re({},Jn.ALLOWED_TAGS):tr,Br="ALLOWED_ATTR"in Jn?re({},Jn.ALLOWED_ATTR):Mr,ct="ADD_URI_SAFE_ATTR"in Jn?re(de(lt),Jn.ADD_URI_SAFE_ATTR):lt,ve="ADD_DATA_URI_TAGS"in Jn?re(de(De),Jn.ADD_DATA_URI_TAGS):De,G="FORBID_CONTENTS"in Jn?re({},Jn.FORBID_CONTENTS):ce,so="FORBID_TAGS"in Jn?re({},Jn.FORBID_TAGS):{},jr="FORBID_ATTR"in Jn?re({},Jn.FORBID_ATTR):{},V="USE_PROFILES"in Jn?Jn.USE_PROFILES:!1,No=Jn.ALLOW_ARIA_ATTR!==!1,ko=Jn.ALLOW_DATA_ATTR!==!1,li=Jn.ALLOW_UNKNOWN_PROTOCOLS||!1,tt=Jn.SAFE_FOR_TEMPLATES||!1,St=Jn.WHOLE_DOCUMENT||!1,en=Jn.RETURN_DOM||!1,Ct=Jn.RETURN_DOM_FRAGMENT||!1,J=Jn.RETURN_DOM_IMPORT!==!1,Ae=Jn.RETURN_TRUSTED_TYPE||!1,Yt=Jn.FORCE_BODY||!1,ot=Jn.SANITIZE_DOM!==!1,Ee=Jn.KEEP_CONTENT!==!1,m=Jn.IN_PLACE||!1,cs=Jn.ALLOWED_URI_REGEXP||cs,jt=Jn.NAMESPACE||Ft,tt&&(ko=!1),Ct&&(en=!0),V&&(nr=re({},[].concat(qe(X))),Br=[],V.html===!0&&(re(nr,ae),re(Br,le)),V.svg===!0&&(re(nr,ue),re(Br,oe),re(Br,ye)),V.svgFilters===!0&&(re(nr,te),re(Br,oe),re(Br,ye)),V.mathMl===!0&&(re(nr,U),re(Br,Ce),re(Br,ye))),Jn.ADD_TAGS&&(nr===tr&&(nr=de(nr)),re(nr,Jn.ADD_TAGS)),Jn.ADD_ATTR&&(Br===Mr&&(Br=de(Br)),re(Br,Jn.ADD_ATTR)),Jn.ADD_URI_SAFE_ATTR&&re(ct,Jn.ADD_URI_SAFE_ATTR),Jn.FORBID_CONTENTS&&(G===ce&&(G=de(G)),re(G,Jn.FORBID_CONTENTS)),Ee&&(nr["#text"]=!0),St&&re(nr,["html","head","body"]),nr.table&&(re(nr,["tbody"]),delete so.tbody),B&&B(Jn),Zn=Jn)},ji=re({},["mi","mo","mn","ms","mtext"]),vr=re({},["foreignobject","desc","title","annotation-xml"]),Un=re({},ue);re(Un,te),re(Un,K);var fn=re({},U);re(fn,ee);var Vo=function(Jn){var hr=At(Jn);(!hr||!hr.tagName)&&(hr={namespaceURI:Ft,tagName:"template"});var Pr=E(Jn.tagName),Po=E(hr.tagName);if(Jn.namespaceURI===It)return hr.namespaceURI===Ft?Pr==="svg":hr.namespaceURI===Nt?Pr==="svg"&&(Po==="annotation-xml"||ji[Po]):Boolean(Un[Pr]);if(Jn.namespaceURI===Nt)return hr.namespaceURI===Ft?Pr==="math":hr.namespaceURI===It?Pr==="math"&&vr[Po]:Boolean(fn[Pr]);if(Jn.namespaceURI===Ft){if(hr.namespaceURI===It&&!vr[Po]||hr.namespaceURI===Nt&&!ji[Po])return!1;var Cs=re({},["title","style","font","a","script"]);return!fn[Pr]&&(Cs[Pr]||!Un[Pr])}return!1},jo=function(Jn){M(sn.removed,{element:Jn});try{Jn.parentNode.removeChild(Jn)}catch(hr){try{Jn.outerHTML=Lt}catch(Pr){Jn.remove()}}},Uo=function(Jn,hr){try{M(sn.removed,{attribute:hr.getAttributeNode(Jn),from:hr})}catch(Pr){M(sn.removed,{attribute:null,from:hr})}if(hr.removeAttribute(Jn),Jn==="is"&&!Br[Jn])if(en||Ct)try{jo(hr)}catch(Pr){}else try{hr.setAttribute(Jn,"")}catch(Pr){}},qs=function(Jn){var hr=void 0,Pr=void 0;if(Yt)Jn="<remove></remove>"+Jn;else{var Po=_(Jn,/^[\r\n\t ]+/);Pr=Po&&Po[0]}var Cs=vt?vt.createHTML(Jn):Jn;if(jt===Ft)try{hr=new to().parseFromString(Cs,"text/html")}catch(as){}if(!hr||!hr.documentElement){hr=dn.createDocument(jt,"template",null);try{hr.documentElement.innerHTML=bn?"":Cs}catch(as){}}var Ns=hr.body||hr.documentElement;return Jn&&Pr&&Ns.insertBefore(ri.createTextNode(Pr),Ns.childNodes[0]||null),jt===Ft?Gn.call(hr,St?"html":"body")[0]:St?hr.documentElement:Ns},ss=function(Jn){return hn.call(Jn.ownerDocument||Jn,Jn,Lr.SHOW_ELEMENT|Lr.SHOW_COMMENT|Lr.SHOW_TEXT,null,!1)},va=function(Jn){return Jn instanceof Sr||Jn instanceof Ro?!1:typeof Jn.nodeName!="string"||typeof Jn.textContent!="string"||typeof Jn.removeChild!="function"||!(Jn.attributes instanceof Fr)||typeof Jn.removeAttribute!="function"||typeof Jn.setAttribute!="function"||typeof Jn.namespaceURI!="string"||typeof Jn.insertBefore!="function"},ps=function(Jn){return(typeof Qn=="undefined"?"undefined":Oe(Qn))==="object"?Jn instanceof Qn:Jn&&(typeof Jn=="undefined"?"undefined":Oe(Jn))==="object"&&typeof Jn.nodeType=="number"&&typeof Jn.nodeName=="string"},wo=function(Jn,hr,Pr){!Xi[Jn]||c(Xi[Jn],function(Po){Po.call(sn,hr,Pr,Zn)})},Ss=function(Jn){var hr=void 0;if(wo("beforeSanitizeElements",Jn,null),va(Jn)||_(Jn.nodeName,/[\u0080-\uFFFF]/))return jo(Jn),!0;var Pr=E(Jn.nodeName);if(wo("uponSanitizeElement",Jn,{tagName:Pr,allowedTags:nr}),!ps(Jn.firstElementChild)&&(!ps(Jn.content)||!ps(Jn.content.firstElementChild))&&I(/<[/\w]/g,Jn.innerHTML)&&I(/<[/\w]/g,Jn.textContent)||Pr==="select"&&I(/<template/i,Jn.innerHTML))return jo(Jn),!0;if(!nr[Pr]||so[Pr]){if(Ee&&!G[Pr]){var Po=At(Jn)||Jn.parentNode,Cs=Bt(Jn)||Jn.childNodes;if(Cs&&Po)for(var Ns=Cs.length,as=Ns-1;as>=0;--as)Po.insertBefore(kn(Cs[as],!0),bt(Jn))}return jo(Jn),!0}return Jn instanceof Yi&&!Vo(Jn)||(Pr==="noscript"||Pr==="noembed")&&I(/<\/no(script|embed)/i,Jn.innerHTML)?(jo(Jn),!0):(tt&&Jn.nodeType===3&&(hr=Jn.textContent,hr=L(hr,Nr," "),hr=L(hr,yr," "),Jn.textContent!==hr&&(M(sn.removed,{element:Jn.cloneNode()}),Jn.textContent=hr)),wo("afterSanitizeElements",Jn,null),!1)},ts=function(Jn,hr,Pr){if(ot&&(hr==="id"||hr==="name")&&(Pr in ri||Pr in Xn))return!1;if(!(ko&&!jr[hr]&&I(Xr,hr))){if(!(No&&I(Jr,hr))){if(!Br[hr]||jr[hr])return!1;if(!ct[hr]){if(!I(cs,L(Pr,ms,""))){if(!((hr==="src"||hr==="xlink:href"||hr==="href")&&Jn!=="script"&&N(Pr,"data:")===0&&ve[Jn])){if(!(li&&!I($o,L(Pr,ms,"")))){if(Pr)return!1}}}}}}return!0},gr=function(Jn){var hr=void 0,Pr=void 0,Po=void 0,Cs=void 0;wo("beforeSanitizeAttributes",Jn,null);var Ns=Jn.attributes;if(!!Ns){var as={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Br};for(Cs=Ns.length;Cs--;){hr=Ns[Cs];var is=hr,Xs=is.name,hl=is.namespaceURI;if(Pr=b(hr.value),Po=E(Xs),as.attrName=Po,as.attrValue=Pr,as.keepAttr=!0,as.forceKeepAttr=void 0,wo("uponSanitizeAttribute",Jn,as),Pr=as.attrValue,!as.forceKeepAttr&&(Uo(Xs,Jn),!!as.keepAttr)){if(I(/\/>/i,Pr)){Uo(Xs,Jn);continue}tt&&(Pr=L(Pr,Nr," "),Pr=L(Pr,yr," "));var za=Jn.nodeName.toLowerCase();if(!!ts(za,Po,Pr))try{hl?Jn.setAttributeNS(hl,Xs,Pr):Jn.setAttribute(Xs,Pr),C(sn.removed)}catch(fc){}}}wo("afterSanitizeAttributes",Jn,null)}},ns=function xr(Jn){var hr=void 0,Pr=ss(Jn);for(wo("beforeSanitizeShadowDOM",Jn,null);hr=Pr.nextNode();)wo("uponSanitizeShadowNode",hr,null),!Ss(hr)&&(hr.content instanceof oi&&xr(hr.content),gr(hr));wo("afterSanitizeShadowDOM",Jn,null)};return sn.sanitize=function(xr,Jn){var hr=void 0,Pr=void 0,Po=void 0,Cs=void 0,Ns=void 0;if(bn=!xr,bn&&(xr="<!-->"),typeof xr!="string"&&!ps(xr)){if(typeof xr.toString!="function")throw k("toString is not a function");if(xr=xr.toString(),typeof xr!="string")throw k("dirty is not a string, aborting")}if(!sn.isSupported){if(Oe($t.toStaticHTML)==="object"||typeof $t.toStaticHTML=="function"){if(typeof xr=="string")return $t.toStaticHTML(xr);if(ps(xr))return $t.toStaticHTML(xr.outerHTML)}return xr}if(Pt||gi(Jn),sn.removed=[],typeof xr=="string"&&(m=!1),!m)if(xr instanceof Qn)hr=qs("<!---->"),Pr=hr.ownerDocument.importNode(xr,!0),Pr.nodeType===1&&Pr.nodeName==="BODY"||Pr.nodeName==="HTML"?hr=Pr:hr.appendChild(Pr);else{if(!en&&!tt&&!St&&xr.indexOf("<")===-1)return vt&&Ae?vt.createHTML(xr):xr;if(hr=qs(xr),!hr)return en?null:Lt}hr&&Yt&&jo(hr.firstChild);for(var as=ss(m?xr:hr);Po=as.nextNode();)Po.nodeType===3&&Po===Cs||Ss(Po)||(Po.content instanceof oi&&ns(Po.content),gr(Po),Cs=Po);if(Cs=null,m)return xr;if(en){if(Ct)for(Ns=Wn.call(hr.ownerDocument);hr.firstChild;)Ns.appendChild(hr.firstChild);else Ns=hr;return J&&(Ns=wi.call(Tn,Ns,!0)),Ns}var is=St?hr.outerHTML:hr.innerHTML;return tt&&(is=L(is,Nr," "),is=L(is,yr," ")),vt&&Ae?vt.createHTML(is):is},sn.setConfig=function(xr){gi(xr),Pt=!0},sn.clearConfig=function(){Zn=null,Pt=!1},sn.isValidAttribute=function(xr,Jn,hr){Zn||gi({});var Pr=E(xr),Po=E(Jn);return ts(Pr,Po,hr)},sn.addHook=function(xr,Jn){typeof Jn=="function"&&(Xi[xr]=Xi[xr]||[],M(Xi[xr],Jn))},sn.removeHook=function(xr){Xi[xr]&&C(Xi[xr])},sn.removeHooks=function(xr){Xi[xr]&&(Xi[xr]=[])},sn.removeAllHooks=function(){Xi={}},sn}var ne=Fe(),Q=null;const ie=ne.version,xe=ne.isSupported,be=ne.sanitize,Ge=ne.setConfig,nt=ne.clearConfig,_t=ne.isValidAttribute,Ot=ne.addHook,rn=ne.removeHook,gt=ne.removeHooks,Ue=ne.removeAllHooks;var Ye=a(4850),dt=a(48764),Re=a(23938),Ve=a(56811),at=a(15393),pt=a(71050),Be=a(17301),je=a(4669),Et=a(59365),Dt=a(21212),Xe=a(44742),ft=a(9917);let an={};(function(){function $t(sn,Tn){Tn(an)}$t.amd=!0,function(sn,Tn){typeof exports=="object"?Tn(exports):typeof $t=="function"&&$t.amd?$t(["exports"],Tn):(sn=typeof globalThis!="undefined"?globalThis:sn||self,Tn(sn.marked={}))}(this,function(sn){"use strict";function Tn(Ee,m){for(var V=0;V<m.length;V++){var G=m[V];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(Ee,G.key,G)}}function ri(Ee,m,V){return m&&Tn(Ee.prototype,m),V&&Tn(Ee,V),Object.defineProperty(Ee,"prototype",{writable:!1}),Ee}function oi(Ee,m){if(!!Ee){if(typeof Ee=="string")return On(Ee,m);var V=Object.prototype.toString.call(Ee).slice(8,-1);if(V==="Object"&&Ee.constructor&&(V=Ee.constructor.name),V==="Map"||V==="Set")return Array.from(Ee);if(V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return On(Ee,m)}}function On(Ee,m){(m==null||m>Ee.length)&&(m=Ee.length);for(var V=0,G=new Array(m);V<m;V++)G[V]=Ee[V];return G}function Qn(Ee,m){var V=typeof Symbol!="undefined"&&Ee[Symbol.iterator]||Ee["@@iterator"];if(V)return(V=V.call(Ee)).next.bind(V);if(Array.isArray(Ee)||(V=oi(Ee))||m&&Ee&&typeof Ee.length=="number"){V&&(Ee=V);var G=0;return function(){return G>=Ee.length?{done:!0}:{done:!1,value:Ee[G++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yi(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}sn.defaults=Yi();function Lr(Ee){sn.defaults=Ee}var Dr=/[&<>"']/,Fr=/[&<>"']/g,Sr=/[<>"']|&(?!#?\w+;)/,Ro=/[<>"']|&(?!#?\w+;)/g,to={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},no=function(m){return to[m]};function dr(Ee,m){if(m){if(Dr.test(Ee))return Ee.replace(Fr,no)}else if(Sr.test(Ee))return Ee.replace(Ro,no);return Ee}var kn=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function bt(Ee){return Ee.replace(kn,function(m,V){return V=V.toLowerCase(),V==="colon"?":":V.charAt(0)==="#"?V.charAt(1)==="x"?String.fromCharCode(parseInt(V.substring(2),16)):String.fromCharCode(+V.substring(1)):""})}var Bt=/(^|[^\[])\^/g;function At(Ee,m){Ee=Ee.source||Ee,m=m||"";var V={replace:function(ce,ve){return ve=ve.source||ve,ve=ve.replace(Bt,"$1"),Ee=Ee.replace(ce,ve),V},getRegex:function(){return new RegExp(Ee,m)}};return V}var Ke=/[^\w:]/g,vt=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Lt(Ee,m,V){if(Ee){var G;try{G=decodeURIComponent(bt(V)).replace(Ke,"").toLowerCase()}catch(ce){return null}if(G.indexOf("javascript:")===0||G.indexOf("vbscript:")===0||G.indexOf("data:")===0)return null}m&&!vt.test(V)&&(V=Gn(m,V));try{V=encodeURI(V).replace(/%25/g,"%")}catch(ce){return null}return V}var tn={},dn=/^[^:]+:\/*[^/]*$/,hn=/^([^:]+:)[\s\S]*$/,Wn=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Gn(Ee,m){tn[" "+Ee]||(dn.test(Ee)?tn[" "+Ee]=Ee+"/":tn[" "+Ee]=Nr(Ee,"/",!0)),Ee=tn[" "+Ee];var V=Ee.indexOf(":")===-1;return m.substring(0,2)==="//"?V?m:Ee.replace(hn,"$1")+m:m.charAt(0)==="/"?V?m:Ee.replace(Wn,"$1")+m:Ee+m}var wi={exec:function(){}};function Ci(Ee){for(var m=1,V,G;m<arguments.length;m++){V=arguments[m];for(G in V)Object.prototype.hasOwnProperty.call(V,G)&&(Ee[G]=V[G])}return Ee}function Xi(Ee,m){var V=Ee.replace(/\|/g,function(ve,De,ct){for(var lt=!1,Nt=De;--Nt>=0&&ct[Nt]==="\\";)lt=!lt;return lt?"|":" |"}),G=V.split(/ \|/),ce=0;if(G[0].trim()||G.shift(),G[G.length-1].trim()||G.pop(),G.length>m)G.splice(m);else for(;G.length<m;)G.push("");for(;ce<G.length;ce++)G[ce]=G[ce].trim().replace(/\\\|/g,"|");return G}function Nr(Ee,m,V){var G=Ee.length;if(G===0)return"";for(var ce=0;ce<G;){var ve=Ee.charAt(G-ce-1);if(ve===m&&!V)ce++;else if(ve!==m&&V)ce++;else break}return Ee.substr(0,G-ce)}function yr(Ee,m){if(Ee.indexOf(m[1])===-1)return-1;for(var V=Ee.length,G=0,ce=0;ce<V;ce++)if(Ee[ce]==="\\")ce++;else if(Ee[ce]===m[0])G++;else if(Ee[ce]===m[1]&&(G--,G<0))return ce;return-1}function Xr(Ee){Ee&&Ee.sanitize&&!Ee.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Jr(Ee,m){if(m<1)return"";for(var V="";m>1;)m&1&&(V+=Ee),m>>=1,Ee+=Ee;return V+Ee}function $o(Ee,m,V,G){var ce=m.href,ve=m.title?dr(m.title):null,De=Ee[1].replace(/\\([\[\]])/g,"$1");if(Ee[0].charAt(0)!=="!"){G.state.inLink=!0;var ct={type:"link",raw:V,href:ce,title:ve,text:De,tokens:G.inlineTokens(De,[])};return G.state.inLink=!1,ct}else return{type:"image",raw:V,href:ce,title:ve,text:dr(De)}}function ms(Ee,m){var V=Ee.match(/^(\s+)(?:```)/);if(V===null)return m;var G=V[1];return m.split(`
`).map(function(ce){var ve=ce.match(/^\s+/);if(ve===null)return ce;var De=ve[0];return De.length>=G.length?ce.slice(G.length):ce}).join(`
`)}var cs=function(){function Ee(V){this.options=V||sn.defaults}var m=Ee.prototype;return m.space=function(G){var ce=this.rules.block.newline.exec(G);if(ce&&ce[0].length>0)return{type:"space",raw:ce[0]}},m.code=function(G){var ce=this.rules.block.code.exec(G);if(ce){var ve=ce[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ce[0],codeBlockStyle:"indented",text:this.options.pedantic?ve:Nr(ve,`
`)}}},m.fences=function(G){var ce=this.rules.block.fences.exec(G);if(ce){var ve=ce[0],De=ms(ve,ce[3]||"");return{type:"code",raw:ve,lang:ce[2]?ce[2].trim():ce[2],text:De}}},m.heading=function(G){var ce=this.rules.block.heading.exec(G);if(ce){var ve=ce[2].trim();if(/#$/.test(ve)){var De=Nr(ve,"#");(this.options.pedantic||!De||/ $/.test(De))&&(ve=De.trim())}var ct={type:"heading",raw:ce[0],depth:ce[1].length,text:ve,tokens:[]};return this.lexer.inline(ct.text,ct.tokens),ct}},m.hr=function(G){var ce=this.rules.block.hr.exec(G);if(ce)return{type:"hr",raw:ce[0]}},m.blockquote=function(G){var ce=this.rules.block.blockquote.exec(G);if(ce){var ve=ce[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:ce[0],tokens:this.lexer.blockTokens(ve,[]),text:ve}}},m.list=function(G){var ce=this.rules.block.list.exec(G);if(ce){var ve,De,ct,lt,Nt,It,Ft,jt,bn,Zn,Xn,gi,ji=ce[1].trim(),vr=ji.length>1,Un={type:"list",raw:"",ordered:vr,start:vr?+ji.slice(0,-1):"",loose:!1,items:[]};ji=vr?"\\d{1,9}\\"+ji.slice(-1):"\\"+ji,this.options.pedantic&&(ji=vr?ji:"[*+-]");for(var fn=new RegExp("^( {0,3}"+ji+")((?: [^\\n]*)?(?:\\n|$))");G&&(gi=!1,!(!(ce=fn.exec(G))||this.rules.block.hr.test(G)));){if(ve=ce[0],G=G.substring(ve.length),jt=ce[2].split(`
`,1)[0],bn=G.split(`
`,1)[0],this.options.pedantic?(lt=2,Xn=jt.trimLeft()):(lt=ce[2].search(/[^ ]/),lt=lt>4?1:lt,Xn=jt.slice(lt),lt+=ce[1].length),It=!1,!jt&&/^ *$/.test(bn)&&(ve+=bn+`
`,G=G.substring(bn.length+1),gi=!0),!gi)for(var Vo=new RegExp("^ {0,"+Math.min(3,lt-1)+"}(?:[*+-]|\\d{1,9}[.)])");G&&(Zn=G.split(`
`,1)[0],jt=Zn,this.options.pedantic&&(jt=jt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Vo.test(jt));){if(jt.search(/[^ ]/)>=lt||!jt.trim())Xn+=`
`+jt.slice(lt);else if(!It)Xn+=`
`+jt;else break;!It&&!jt.trim()&&(It=!0),ve+=Zn+`
`,G=G.substring(Zn.length+1)}Un.loose||(Ft?Un.loose=!0:/\n *\n *$/.test(ve)&&(Ft=!0)),this.options.gfm&&(De=/^\[[ xX]\] /.exec(Xn),De&&(ct=De[0]!=="[ ] ",Xn=Xn.replace(/^\[[ xX]\] +/,""))),Un.items.push({type:"list_item",raw:ve,task:!!De,checked:ct,loose:!1,text:Xn}),Un.raw+=ve}Un.items[Un.items.length-1].raw=ve.trimRight(),Un.items[Un.items.length-1].text=Xn.trimRight(),Un.raw=Un.raw.trimRight();var jo=Un.items.length;for(Nt=0;Nt<jo;Nt++){this.lexer.state.top=!1,Un.items[Nt].tokens=this.lexer.blockTokens(Un.items[Nt].text,[]);var Uo=Un.items[Nt].tokens.filter(function(ss){return ss.type==="space"}),qs=Uo.every(function(ss){for(var va=ss.raw.split(""),ps=0,wo=Qn(va),Ss;!(Ss=wo()).done;){var ts=Ss.value;if(ts===`
`&&(ps+=1),ps>1)return!0}return!1});!Un.loose&&Uo.length&&qs&&(Un.loose=!0,Un.items[Nt].loose=!0)}return Un}},m.html=function(G){var ce=this.rules.block.html.exec(G);if(ce){var ve={type:"html",raw:ce[0],pre:!this.options.sanitizer&&(ce[1]==="pre"||ce[1]==="script"||ce[1]==="style"),text:ce[0]};return this.options.sanitize&&(ve.type="paragraph",ve.text=this.options.sanitizer?this.options.sanitizer(ce[0]):dr(ce[0]),ve.tokens=[],this.lexer.inline(ve.text,ve.tokens)),ve}},m.def=function(G){var ce=this.rules.block.def.exec(G);if(ce){ce[3]&&(ce[3]=ce[3].substring(1,ce[3].length-1));var ve=ce[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:ve,raw:ce[0],href:ce[2],title:ce[3]}}},m.table=function(G){var ce=this.rules.block.table.exec(G);if(ce){var ve={type:"table",header:Xi(ce[1]).map(function(Ft){return{text:Ft}}),align:ce[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:ce[3]?ce[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(ve.header.length===ve.align.length){ve.raw=ce[0];var De=ve.align.length,ct,lt,Nt,It;for(ct=0;ct<De;ct++)/^ *-+: *$/.test(ve.align[ct])?ve.align[ct]="right":/^ *:-+: *$/.test(ve.align[ct])?ve.align[ct]="center":/^ *:-+ *$/.test(ve.align[ct])?ve.align[ct]="left":ve.align[ct]=null;for(De=ve.rows.length,ct=0;ct<De;ct++)ve.rows[ct]=Xi(ve.rows[ct],ve.header.length).map(function(Ft){return{text:Ft}});for(De=ve.header.length,lt=0;lt<De;lt++)ve.header[lt].tokens=[],this.lexer.inlineTokens(ve.header[lt].text,ve.header[lt].tokens);for(De=ve.rows.length,lt=0;lt<De;lt++)for(It=ve.rows[lt],Nt=0;Nt<It.length;Nt++)It[Nt].tokens=[],this.lexer.inlineTokens(It[Nt].text,It[Nt].tokens);return ve}}},m.lheading=function(G){var ce=this.rules.block.lheading.exec(G);if(ce){var ve={type:"heading",raw:ce[0],depth:ce[2].charAt(0)==="="?1:2,text:ce[1],tokens:[]};return this.lexer.inline(ve.text,ve.tokens),ve}},m.paragraph=function(G){var ce=this.rules.block.paragraph.exec(G);if(ce){var ve={type:"paragraph",raw:ce[0],text:ce[1].charAt(ce[1].length-1)===`
`?ce[1].slice(0,-1):ce[1],tokens:[]};return this.lexer.inline(ve.text,ve.tokens),ve}},m.text=function(G){var ce=this.rules.block.text.exec(G);if(ce){var ve={type:"text",raw:ce[0],text:ce[0],tokens:[]};return this.lexer.inline(ve.text,ve.tokens),ve}},m.escape=function(G){var ce=this.rules.inline.escape.exec(G);if(ce)return{type:"escape",raw:ce[0],text:dr(ce[1])}},m.tag=function(G){var ce=this.rules.inline.tag.exec(G);if(ce)return!this.lexer.state.inLink&&/^<a /i.test(ce[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(ce[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(ce[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ce[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:ce[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ce[0]):dr(ce[0]):ce[0]}},m.link=function(G){var ce=this.rules.inline.link.exec(G);if(ce){var ve=ce[2].trim();if(!this.options.pedantic&&/^</.test(ve)){if(!/>$/.test(ve))return;var De=Nr(ve.slice(0,-1),"\\");if((ve.length-De.length)%2==0)return}else{var ct=yr(ce[2],"()");if(ct>-1){var lt=ce[0].indexOf("!")===0?5:4,Nt=lt+ce[1].length+ct;ce[2]=ce[2].substring(0,ct),ce[0]=ce[0].substring(0,Nt).trim(),ce[3]=""}}var It=ce[2],Ft="";if(this.options.pedantic){var jt=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(It);jt&&(It=jt[1],Ft=jt[3])}else Ft=ce[3]?ce[3].slice(1,-1):"";return It=It.trim(),/^</.test(It)&&(this.options.pedantic&&!/>$/.test(ve)?It=It.slice(1):It=It.slice(1,-1)),$o(ce,{href:It&&It.replace(this.rules.inline._escapes,"$1"),title:Ft&&Ft.replace(this.rules.inline._escapes,"$1")},ce[0],this.lexer)}},m.reflink=function(G,ce){var ve;if((ve=this.rules.inline.reflink.exec(G))||(ve=this.rules.inline.nolink.exec(G))){var De=(ve[2]||ve[1]).replace(/\s+/g," ");if(De=ce[De.toLowerCase()],!De||!De.href){var ct=ve[0].charAt(0);return{type:"text",raw:ct,text:ct}}return $o(ve,De,ve[0],this.lexer)}},m.emStrong=function(G,ce,ve){ve===void 0&&(ve="");var De=this.rules.inline.emStrong.lDelim.exec(G);if(!!De&&!(De[3]&&ve.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var ct=De[1]||De[2]||"";if(!ct||ct&&(ve===""||this.rules.inline.punctuation.exec(ve))){var lt=De[0].length-1,Nt,It,Ft=lt,jt=0,bn=De[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(bn.lastIndex=0,ce=ce.slice(-1*G.length+lt);(De=bn.exec(ce))!=null;)if(Nt=De[1]||De[2]||De[3]||De[4]||De[5]||De[6],!!Nt){if(It=Nt.length,De[3]||De[4]){Ft+=It;continue}else if((De[5]||De[6])&&lt%3&&!((lt+It)%3)){jt+=It;continue}if(Ft-=It,!(Ft>0)){if(It=Math.min(It,It+Ft+jt),Math.min(lt,It)%2){var Zn=G.slice(1,lt+De.index+It);return{type:"em",raw:G.slice(0,lt+De.index+It+1),text:Zn,tokens:this.lexer.inlineTokens(Zn,[])}}var Xn=G.slice(2,lt+De.index+It-1);return{type:"strong",raw:G.slice(0,lt+De.index+It+1),text:Xn,tokens:this.lexer.inlineTokens(Xn,[])}}}}}},m.codespan=function(G){var ce=this.rules.inline.code.exec(G);if(ce){var ve=ce[2].replace(/\n/g," "),De=/[^ ]/.test(ve),ct=/^ /.test(ve)&&/ $/.test(ve);return De&&ct&&(ve=ve.substring(1,ve.length-1)),ve=dr(ve,!0),{type:"codespan",raw:ce[0],text:ve}}},m.br=function(G){var ce=this.rules.inline.br.exec(G);if(ce)return{type:"br",raw:ce[0]}},m.del=function(G){var ce=this.rules.inline.del.exec(G);if(ce)return{type:"del",raw:ce[0],text:ce[2],tokens:this.lexer.inlineTokens(ce[2],[])}},m.autolink=function(G,ce){var ve=this.rules.inline.autolink.exec(G);if(ve){var De,ct;return ve[2]==="@"?(De=dr(this.options.mangle?ce(ve[1]):ve[1]),ct="mailto:"+De):(De=dr(ve[1]),ct=De),{type:"link",raw:ve[0],text:De,href:ct,tokens:[{type:"text",raw:De,text:De}]}}},m.url=function(G,ce){var ve;if(ve=this.rules.inline.url.exec(G)){var De,ct;if(ve[2]==="@")De=dr(this.options.mangle?ce(ve[0]):ve[0]),ct="mailto:"+De;else{var lt;do lt=ve[0],ve[0]=this.rules.inline._backpedal.exec(ve[0])[0];while(lt!==ve[0]);De=dr(ve[0]),ve[1]==="www."?ct="http://"+De:ct=De}return{type:"link",raw:ve[0],text:De,href:ct,tokens:[{type:"text",raw:De,text:De}]}}},m.inlineText=function(G,ce){var ve=this.rules.inline.text.exec(G);if(ve){var De;return this.lexer.state.inRawBlock?De=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ve[0]):dr(ve[0]):ve[0]:De=dr(this.options.smartypants?ce(ve[0]):ve[0]),{type:"text",raw:ve[0],text:De}}},Ee}(),nr={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:wi,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};nr._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,nr._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,nr.def=At(nr.def).replace("label",nr._label).replace("title",nr._title).getRegex(),nr.bullet=/(?:[*+-]|\d{1,9}[.)])/,nr.listItemStart=At(/^( *)(bull) */).replace("bull",nr.bullet).getRegex(),nr.list=At(nr.list).replace(/bull/g,nr.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+nr.def.source+")").getRegex(),nr._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",nr._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,nr.html=At(nr.html,"i").replace("comment",nr._comment).replace("tag",nr._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),nr.paragraph=At(nr._paragraph).replace("hr",nr.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nr._tag).getRegex(),nr.blockquote=At(nr.blockquote).replace("paragraph",nr.paragraph).getRegex(),nr.normal=Ci({},nr),nr.gfm=Ci({},nr.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),nr.gfm.table=At(nr.gfm.table).replace("hr",nr.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nr._tag).getRegex(),nr.gfm.paragraph=At(nr._paragraph).replace("hr",nr.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",nr.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nr._tag).getRegex(),nr.pedantic=Ci({},nr.normal,{html:At(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",nr._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wi,paragraph:At(nr.normal._paragraph).replace("hr",nr.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",nr.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var tr={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:wi,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:wi,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};tr._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",tr.punctuation=At(tr.punctuation).replace(/punctuation/g,tr._punctuation).getRegex(),tr.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,tr.escapedEmSt=/\\\*|\\_/g,tr._comment=At(nr._comment).replace("(?:-->|$)","-->").getRegex(),tr.emStrong.lDelim=At(tr.emStrong.lDelim).replace(/punct/g,tr._punctuation).getRegex(),tr.emStrong.rDelimAst=At(tr.emStrong.rDelimAst,"g").replace(/punct/g,tr._punctuation).getRegex(),tr.emStrong.rDelimUnd=At(tr.emStrong.rDelimUnd,"g").replace(/punct/g,tr._punctuation).getRegex(),tr._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,tr._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,tr._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,tr.autolink=At(tr.autolink).replace("scheme",tr._scheme).replace("email",tr._email).getRegex(),tr._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,tr.tag=At(tr.tag).replace("comment",tr._comment).replace("attribute",tr._attribute).getRegex(),tr._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,tr._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,tr._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,tr.link=At(tr.link).replace("label",tr._label).replace("href",tr._href).replace("title",tr._title).getRegex(),tr.reflink=At(tr.reflink).replace("label",tr._label).replace("ref",nr._label).getRegex(),tr.nolink=At(tr.nolink).replace("ref",nr._label).getRegex(),tr.reflinkSearch=At(tr.reflinkSearch,"g").replace("reflink",tr.reflink).replace("nolink",tr.nolink).getRegex(),tr.normal=Ci({},tr),tr.pedantic=Ci({},tr.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:At(/^!?\[(label)\]\((.*?)\)/).replace("label",tr._label).getRegex(),reflink:At(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tr._label).getRegex()}),tr.gfm=Ci({},tr.normal,{escape:At(tr.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),tr.gfm.url=At(tr.gfm.url,"i").replace("email",tr.gfm._extended_email).getRegex(),tr.breaks=Ci({},tr.gfm,{br:At(tr.br).replace("{2,}","*").getRegex(),text:At(tr.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Br(Ee){return Ee.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Mr(Ee){var m="",V,G,ce=Ee.length;for(V=0;V<ce;V++)G=Ee.charCodeAt(V),Math.random()>.5&&(G="x"+G.toString(16)),m+="&#"+G+";";return m}var so=function(){function Ee(V){this.tokens=[],this.tokens.links=Object.create(null),this.options=V||sn.defaults,this.options.tokenizer=this.options.tokenizer||new cs,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var G={block:nr.normal,inline:tr.normal};this.options.pedantic?(G.block=nr.pedantic,G.inline=tr.pedantic):this.options.gfm&&(G.block=nr.gfm,this.options.breaks?G.inline=tr.breaks:G.inline=tr.gfm),this.tokenizer.rules=G}Ee.lex=function(G,ce){var ve=new Ee(ce);return ve.lex(G)},Ee.lexInline=function(G,ce){var ve=new Ee(ce);return ve.inlineTokens(G)};var m=Ee.prototype;return m.lex=function(G){G=G.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(G,this.tokens);for(var ce;ce=this.inlineQueue.shift();)this.inlineTokens(ce.src,ce.tokens);return this.tokens},m.blockTokens=function(G,ce){var ve=this;ce===void 0&&(ce=[]),this.options.pedantic&&(G=G.replace(/^ +$/gm,""));for(var De,ct,lt,Nt;G;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Ft){return(De=Ft.call({lexer:ve},G,ce))?(G=G.substring(De.raw.length),ce.push(De),!0):!1}))){if(De=this.tokenizer.space(G)){G=G.substring(De.raw.length),De.raw.length===1&&ce.length>0?ce[ce.length-1].raw+=`
`:ce.push(De);continue}if(De=this.tokenizer.code(G)){G=G.substring(De.raw.length),ct=ce[ce.length-1],ct&&(ct.type==="paragraph"||ct.type==="text")?(ct.raw+=`
`+De.raw,ct.text+=`
`+De.text,this.inlineQueue[this.inlineQueue.length-1].src=ct.text):ce.push(De);continue}if(De=this.tokenizer.fences(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.heading(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.hr(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.blockquote(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.list(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.html(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.def(G)){G=G.substring(De.raw.length),ct=ce[ce.length-1],ct&&(ct.type==="paragraph"||ct.type==="text")?(ct.raw+=`
`+De.raw,ct.text+=`
`+De.raw,this.inlineQueue[this.inlineQueue.length-1].src=ct.text):this.tokens.links[De.tag]||(this.tokens.links[De.tag]={href:De.href,title:De.title});continue}if(De=this.tokenizer.table(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.lheading(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(lt=G,this.options.extensions&&this.options.extensions.startBlock&&function(){var Ft=Infinity,jt=G.slice(1),bn=void 0;ve.options.extensions.startBlock.forEach(function(Zn){bn=Zn.call({lexer:this},jt),typeof bn=="number"&&bn>=0&&(Ft=Math.min(Ft,bn))}),Ft<Infinity&&Ft>=0&&(lt=G.substring(0,Ft+1))}(),this.state.top&&(De=this.tokenizer.paragraph(lt))){ct=ce[ce.length-1],Nt&&ct.type==="paragraph"?(ct.raw+=`
`+De.raw,ct.text+=`
`+De.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ct.text):ce.push(De),Nt=lt.length!==G.length,G=G.substring(De.raw.length);continue}if(De=this.tokenizer.text(G)){G=G.substring(De.raw.length),ct=ce[ce.length-1],ct&&ct.type==="text"?(ct.raw+=`
`+De.raw,ct.text+=`
`+De.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ct.text):ce.push(De);continue}if(G){var It="Infinite loop on byte: "+G.charCodeAt(0);if(this.options.silent){console.error(It);break}else throw new Error(It)}}return this.state.top=!0,ce},m.inline=function(G,ce){this.inlineQueue.push({src:G,tokens:ce})},m.inlineTokens=function(G,ce){var ve=this;ce===void 0&&(ce=[]);var De,ct,lt,Nt=G,It,Ft,jt;if(this.tokens.links){var bn=Object.keys(this.tokens.links);if(bn.length>0)for(;(It=this.tokenizer.rules.inline.reflinkSearch.exec(Nt))!=null;)bn.includes(It[0].slice(It[0].lastIndexOf("[")+1,-1))&&(Nt=Nt.slice(0,It.index)+"["+Jr("a",It[0].length-2)+"]"+Nt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(It=this.tokenizer.rules.inline.blockSkip.exec(Nt))!=null;)Nt=Nt.slice(0,It.index)+"["+Jr("a",It[0].length-2)+"]"+Nt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(It=this.tokenizer.rules.inline.escapedEmSt.exec(Nt))!=null;)Nt=Nt.slice(0,It.index)+"++"+Nt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;G;)if(Ft||(jt=""),Ft=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Xn){return(De=Xn.call({lexer:ve},G,ce))?(G=G.substring(De.raw.length),ce.push(De),!0):!1}))){if(De=this.tokenizer.escape(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.tag(G)){G=G.substring(De.raw.length),ct=ce[ce.length-1],ct&&De.type==="text"&&ct.type==="text"?(ct.raw+=De.raw,ct.text+=De.text):ce.push(De);continue}if(De=this.tokenizer.link(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.reflink(G,this.tokens.links)){G=G.substring(De.raw.length),ct=ce[ce.length-1],ct&&De.type==="text"&&ct.type==="text"?(ct.raw+=De.raw,ct.text+=De.text):ce.push(De);continue}if(De=this.tokenizer.emStrong(G,Nt,jt)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.codespan(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.br(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.del(G)){G=G.substring(De.raw.length),ce.push(De);continue}if(De=this.tokenizer.autolink(G,Mr)){G=G.substring(De.raw.length),ce.push(De);continue}if(!this.state.inLink&&(De=this.tokenizer.url(G,Mr))){G=G.substring(De.raw.length),ce.push(De);continue}if(lt=G,this.options.extensions&&this.options.extensions.startInline&&function(){var Xn=Infinity,gi=G.slice(1),ji=void 0;ve.options.extensions.startInline.forEach(function(vr){ji=vr.call({lexer:this},gi),typeof ji=="number"&&ji>=0&&(Xn=Math.min(Xn,ji))}),Xn<Infinity&&Xn>=0&&(lt=G.substring(0,Xn+1))}(),De=this.tokenizer.inlineText(lt,Br)){G=G.substring(De.raw.length),De.raw.slice(-1)!=="_"&&(jt=De.raw.slice(-1)),Ft=!0,ct=ce[ce.length-1],ct&&ct.type==="text"?(ct.raw+=De.raw,ct.text+=De.text):ce.push(De);continue}if(G){var Zn="Infinite loop on byte: "+G.charCodeAt(0);if(this.options.silent){console.error(Zn);break}else throw new Error(Zn)}}return ce},ri(Ee,null,[{key:"rules",get:function(){return{block:nr,inline:tr}}}]),Ee}(),jr=function(){function Ee(V){this.options=V||sn.defaults}var m=Ee.prototype;return m.code=function(G,ce,ve){var De=(ce||"").match(/\S*/)[0];if(this.options.highlight){var ct=this.options.highlight(G,De);ct!=null&&ct!==G&&(ve=!0,G=ct)}return G=G.replace(/\n$/,"")+`
`,De?'<pre><code class="'+this.options.langPrefix+dr(De,!0)+'">'+(ve?G:dr(G,!0))+`</code></pre>
`:"<pre><code>"+(ve?G:dr(G,!0))+`</code></pre>
`},m.blockquote=function(G){return`<blockquote>
`+G+`</blockquote>
`},m.html=function(G){return G},m.heading=function(G,ce,ve,De){return this.options.headerIds?"<h"+ce+' id="'+this.options.headerPrefix+De.slug(ve)+'">'+G+"</h"+ce+`>
`:"<h"+ce+">"+G+"</h"+ce+`>
`},m.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},m.list=function(G,ce,ve){var De=ce?"ol":"ul",ct=ce&&ve!==1?' start="'+ve+'"':"";return"<"+De+ct+`>
`+G+"</"+De+`>
`},m.listitem=function(G){return"<li>"+G+`</li>
`},m.checkbox=function(G){return"<input "+(G?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},m.paragraph=function(G){return"<p>"+G+`</p>
`},m.table=function(G,ce){return ce&&(ce="<tbody>"+ce+"</tbody>"),`<table>
<thead>
`+G+`</thead>
`+ce+`</table>
`},m.tablerow=function(G){return`<tr>
`+G+`</tr>
`},m.tablecell=function(G,ce){var ve=ce.header?"th":"td",De=ce.align?"<"+ve+' align="'+ce.align+'">':"<"+ve+">";return De+G+"</"+ve+`>
`},m.strong=function(G){return"<strong>"+G+"</strong>"},m.em=function(G){return"<em>"+G+"</em>"},m.codespan=function(G){return"<code>"+G+"</code>"},m.br=function(){return this.options.xhtml?"<br/>":"<br>"},m.del=function(G){return"<del>"+G+"</del>"},m.link=function(G,ce,ve){if(G=Lt(this.options.sanitize,this.options.baseUrl,G),G===null)return ve;var De='<a href="'+dr(G)+'"';return ce&&(De+=' title="'+ce+'"'),De+=">"+ve+"</a>",De},m.image=function(G,ce,ve){if(G=Lt(this.options.sanitize,this.options.baseUrl,G),G===null)return ve;var De='<img src="'+G+'" alt="'+ve+'"';return ce&&(De+=' title="'+ce+'"'),De+=this.options.xhtml?"/>":">",De},m.text=function(G){return G},Ee}(),No=function(){function Ee(){}var m=Ee.prototype;return m.strong=function(G){return G},m.em=function(G){return G},m.codespan=function(G){return G},m.del=function(G){return G},m.html=function(G){return G},m.text=function(G){return G},m.link=function(G,ce,ve){return""+ve},m.image=function(G,ce,ve){return""+ve},m.br=function(){return""},Ee}(),ko=function(){function Ee(){this.seen={}}var m=Ee.prototype;return m.serialize=function(G){return G.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},m.getNextSafeSlug=function(G,ce){var ve=G,De=0;if(this.seen.hasOwnProperty(ve)){De=this.seen[G];do De++,ve=G+"-"+De;while(this.seen.hasOwnProperty(ve))}return ce||(this.seen[G]=De,this.seen[ve]=0),ve},m.slug=function(G,ce){ce===void 0&&(ce={});var ve=this.serialize(G);return this.getNextSafeSlug(ve,ce.dryrun)},Ee}(),li=function(){function Ee(V){this.options=V||sn.defaults,this.options.renderer=this.options.renderer||new jr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new No,this.slugger=new ko}Ee.parse=function(G,ce){var ve=new Ee(ce);return ve.parse(G)},Ee.parseInline=function(G,ce){var ve=new Ee(ce);return ve.parseInline(G)};var m=Ee.prototype;return m.parse=function(G,ce){ce===void 0&&(ce=!0);var ve="",De,ct,lt,Nt,It,Ft,jt,bn,Zn,Xn,gi,ji,vr,Un,fn,Vo,jo,Uo,qs,ss=G.length;for(De=0;De<ss;De++){if(Xn=G[De],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Xn.type]&&(qs=this.options.extensions.renderers[Xn.type].call({parser:this},Xn),qs!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Xn.type))){ve+=qs||"";continue}switch(Xn.type){case"space":continue;case"hr":{ve+=this.renderer.hr();continue}case"heading":{ve+=this.renderer.heading(this.parseInline(Xn.tokens),Xn.depth,bt(this.parseInline(Xn.tokens,this.textRenderer)),this.slugger);continue}case"code":{ve+=this.renderer.code(Xn.text,Xn.lang,Xn.escaped);continue}case"table":{for(bn="",jt="",Nt=Xn.header.length,ct=0;ct<Nt;ct++)jt+=this.renderer.tablecell(this.parseInline(Xn.header[ct].tokens),{header:!0,align:Xn.align[ct]});for(bn+=this.renderer.tablerow(jt),Zn="",Nt=Xn.rows.length,ct=0;ct<Nt;ct++){for(Ft=Xn.rows[ct],jt="",It=Ft.length,lt=0;lt<It;lt++)jt+=this.renderer.tablecell(this.parseInline(Ft[lt].tokens),{header:!1,align:Xn.align[lt]});Zn+=this.renderer.tablerow(jt)}ve+=this.renderer.table(bn,Zn);continue}case"blockquote":{Zn=this.parse(Xn.tokens),ve+=this.renderer.blockquote(Zn);continue}case"list":{for(gi=Xn.ordered,ji=Xn.start,vr=Xn.loose,Nt=Xn.items.length,Zn="",ct=0;ct<Nt;ct++)fn=Xn.items[ct],Vo=fn.checked,jo=fn.task,Un="",fn.task&&(Uo=this.renderer.checkbox(Vo),vr?fn.tokens.length>0&&fn.tokens[0].type==="paragraph"?(fn.tokens[0].text=Uo+" "+fn.tokens[0].text,fn.tokens[0].tokens&&fn.tokens[0].tokens.length>0&&fn.tokens[0].tokens[0].type==="text"&&(fn.tokens[0].tokens[0].text=Uo+" "+fn.tokens[0].tokens[0].text)):fn.tokens.unshift({type:"text",text:Uo}):Un+=Uo),Un+=this.parse(fn.tokens,vr),Zn+=this.renderer.listitem(Un,jo,Vo);ve+=this.renderer.list(Zn,gi,ji);continue}case"html":{ve+=this.renderer.html(Xn.text);continue}case"paragraph":{ve+=this.renderer.paragraph(this.parseInline(Xn.tokens));continue}case"text":{for(Zn=Xn.tokens?this.parseInline(Xn.tokens):Xn.text;De+1<ss&&G[De+1].type==="text";)Xn=G[++De],Zn+=`
`+(Xn.tokens?this.parseInline(Xn.tokens):Xn.text);ve+=ce?this.renderer.paragraph(Zn):Zn;continue}default:{var va='Token with "'+Xn.type+'" type was not found.';if(this.options.silent){console.error(va);return}else throw new Error(va)}}}return ve},m.parseInline=function(G,ce){ce=ce||this.renderer;var ve="",De,ct,lt,Nt=G.length;for(De=0;De<Nt;De++){if(ct=G[De],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ct.type]&&(lt=this.options.extensions.renderers[ct.type].call({parser:this},ct),lt!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ct.type))){ve+=lt||"";continue}switch(ct.type){case"escape":{ve+=ce.text(ct.text);break}case"html":{ve+=ce.html(ct.text);break}case"link":{ve+=ce.link(ct.href,ct.title,this.parseInline(ct.tokens,ce));break}case"image":{ve+=ce.image(ct.href,ct.title,ct.text);break}case"strong":{ve+=ce.strong(this.parseInline(ct.tokens,ce));break}case"em":{ve+=ce.em(this.parseInline(ct.tokens,ce));break}case"codespan":{ve+=ce.codespan(ct.text);break}case"br":{ve+=ce.br();break}case"del":{ve+=ce.del(this.parseInline(ct.tokens,ce));break}case"text":{ve+=ce.text(ct.text);break}default:{var It='Token with "'+ct.type+'" type was not found.';if(this.options.silent){console.error(It);return}else throw new Error(It)}}}return ve},Ee}();function tt(Ee,m,V){if(typeof Ee=="undefined"||Ee===null)throw new Error("marked(): input parameter is undefined or null");if(typeof Ee!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ee)+", string expected");if(typeof m=="function"&&(V=m,m=null),m=Ci({},tt.defaults,m||{}),Xr(m),V){var G=m.highlight,ce;try{ce=so.lex(Ee,m)}catch(lt){return V(lt)}var ve=function(Nt){var It;if(!Nt)try{m.walkTokens&&tt.walkTokens(ce,m.walkTokens),It=li.parse(ce,m)}catch(Ft){Nt=Ft}return m.highlight=G,Nt?V(Nt):V(null,It)};if(!G||G.length<3||(delete m.highlight,!ce.length))return ve();var De=0;tt.walkTokens(ce,function(lt){lt.type==="code"&&(De++,setTimeout(function(){G(lt.text,lt.lang,function(Nt,It){if(Nt)return ve(Nt);It!=null&&It!==lt.text&&(lt.text=It,lt.escaped=!0),De--,De===0&&ve()})},0))}),De===0&&ve();return}try{var ct=so.lex(Ee,m);return m.walkTokens&&tt.walkTokens(ct,m.walkTokens),li.parse(ct,m)}catch(lt){if(lt.message+=`
Please report this to https://github.com/markedjs/marked.`,m.silent)return"<p>An error occurred:</p><pre>"+dr(lt.message+"",!0)+"</pre>";throw lt}}tt.options=tt.setOptions=function(Ee){return Ci(tt.defaults,Ee),Lr(tt.defaults),tt},tt.getDefaults=Yi,tt.defaults=sn.defaults,tt.use=function(){for(var Ee=arguments.length,m=new Array(Ee),V=0;V<Ee;V++)m[V]=arguments[V];var G=Ci.apply(void 0,[{}].concat(m)),ce=tt.defaults.extensions||{renderers:{},childTokens:{}},ve;m.forEach(function(De){if(De.extensions&&(ve=!0,De.extensions.forEach(function(lt){if(!lt.name)throw new Error("extension name required");if(lt.renderer){var Nt=ce.renderers?ce.renderers[lt.name]:null;Nt?ce.renderers[lt.name]=function(){for(var It=arguments.length,Ft=new Array(It),jt=0;jt<It;jt++)Ft[jt]=arguments[jt];var bn=lt.renderer.apply(this,Ft);return bn===!1&&(bn=Nt.apply(this,Ft)),bn}:ce.renderers[lt.name]=lt.renderer}if(lt.tokenizer){if(!lt.level||lt.level!=="block"&&lt.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");ce[lt.level]?ce[lt.level].unshift(lt.tokenizer):ce[lt.level]=[lt.tokenizer],lt.start&&(lt.level==="block"?ce.startBlock?ce.startBlock.push(lt.start):ce.startBlock=[lt.start]:lt.level==="inline"&&(ce.startInline?ce.startInline.push(lt.start):ce.startInline=[lt.start]))}lt.childTokens&&(ce.childTokens[lt.name]=lt.childTokens)})),De.renderer&&function(){var lt=tt.defaults.renderer||new jr,Nt=function(jt){var bn=lt[jt];lt[jt]=function(){for(var Zn=arguments.length,Xn=new Array(Zn),gi=0;gi<Zn;gi++)Xn[gi]=arguments[gi];var ji=De.renderer[jt].apply(lt,Xn);return ji===!1&&(ji=bn.apply(lt,Xn)),ji}};for(var It in De.renderer)Nt(It);G.renderer=lt}(),De.tokenizer&&function(){var lt=tt.defaults.tokenizer||new cs,Nt=function(jt){var bn=lt[jt];lt[jt]=function(){for(var Zn=arguments.length,Xn=new Array(Zn),gi=0;gi<Zn;gi++)Xn[gi]=arguments[gi];var ji=De.tokenizer[jt].apply(lt,Xn);return ji===!1&&(ji=bn.apply(lt,Xn)),ji}};for(var It in De.tokenizer)Nt(It);G.tokenizer=lt}(),De.walkTokens){var ct=tt.defaults.walkTokens;G.walkTokens=function(lt){De.walkTokens.call(this,lt),ct&&ct.call(this,lt)}}ve&&(G.extensions=ce),tt.setOptions(G)})},tt.walkTokens=function(Ee,m){for(var V=function(){var De=ce.value;switch(m.call(tt,De),De.type){case"table":{for(var ct=Qn(De.header),lt;!(lt=ct()).done;){var Nt=lt.value;tt.walkTokens(Nt.tokens,m)}for(var It=Qn(De.rows),Ft;!(Ft=It()).done;)for(var jt=Ft.value,bn=Qn(jt),Zn;!(Zn=bn()).done;){var Xn=Zn.value;tt.walkTokens(Xn.tokens,m)}break}case"list":{tt.walkTokens(De.items,m);break}default:tt.defaults.extensions&&tt.defaults.extensions.childTokens&&tt.defaults.extensions.childTokens[De.type]?tt.defaults.extensions.childTokens[De.type].forEach(function(gi){tt.walkTokens(De[gi],m)}):De.tokens&&tt.walkTokens(De.tokens,m)}},G=Qn(Ee),ce;!(ce=G()).done;)V()},tt.parseInline=function(Ee,m){if(typeof Ee=="undefined"||Ee===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Ee!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ee)+", string expected");m=Ci({},tt.defaults,m||{}),Xr(m);try{var V=so.lexInline(Ee,m);return m.walkTokens&&tt.walkTokens(V,m.walkTokens),li.parseInline(V,m)}catch(G){if(G.message+=`
Please report this to https://github.com/markedjs/marked.`,m.silent)return"<p>An error occurred:</p><pre>"+dr(G.message+"",!0)+"</pre>";throw G}},tt.Parser=li,tt.parser=li.parse,tt.Renderer=jr,tt.TextRenderer=No,tt.Lexer=so,tt.lexer=so.lex,tt.Tokenizer=cs,tt.Slugger=ko,tt.parse=tt;var St=tt.options,Pt=tt.setOptions,Yt=tt.use,en=tt.walkTokens,Ct=tt.parseInline,J=tt,Ae=li.parse,ot=so.lex;sn.Lexer=so,sn.Parser=li,sn.Renderer=jr,sn.Slugger=ko,sn.TextRenderer=No,sn.Tokenizer=cs,sn.getDefaults=Yi,sn.lexer=ot,sn.marked=tt,sn.options=St,sn.parse=J,sn.parseInline=Ct,sn.parser=Ae,sn.setOptions=Pt,sn.use=Yt,sn.walkTokens=en,Object.defineProperty(sn,"__esModule",{value:!0})})})();var An=an||exports,Fn=a(23897),Ht=a(66663),Kt=a(36248),pn=a(95935),Vn=a(25924),kt=a(70666);function Zt($t,sn={},Tn={}){var ri;const oi=new ft.SL;let On=!1;const Qn=oi.add(new pt.A),Yi=(0,dt.az)(sn),Lr=function(bt){let Bt;try{Bt=(0,Fn.Q)(decodeURIComponent(bt))}catch(At){}return Bt?(Bt=(0,Kt.rs)(Bt,At=>{if($t.uris&&$t.uris[At])return kt.o.revive($t.uris[At])}),encodeURIComponent(JSON.stringify(Bt))):bt},Dr=function(bt,Bt){const At=$t.uris&&$t.uris[bt];let Ke=kt.o.revive(At);return Bt?bt.startsWith(Ht.lg.data+":")?bt:(Ke||(Ke=kt.o.parse(bt)),Ht.Gi.asBrowserUri(Ke).toString(!0)):!Ke||kt.o.parse(bt).toString()===Ke.toString()?bt:(Ke.query&&(Ke=Ke.with({query:Lr(Ke.query)})),Ke.toString())};let Fr;const Sr=new Promise(bt=>Fr=bt),Ro=new An.Renderer;if(Ro.image=(bt,Bt,At)=>{let Ke=[],vt=[];return bt&&({href:bt,dimensions:Ke}=(0,Et.v1)(bt),vt.push(`src="${bt}"`)),At&&vt.push(`alt="${At}"`),Bt&&vt.push(`title="${Bt}"`),Ke.length&&(vt=vt.concat(Ke)),"<img "+vt.join(" ")+">"},Ro.link=(bt,Bt,At)=>typeof bt!="string"?"":(bt===At&&(At=(0,Et.oR)(At)),bt=Dr(bt,!1),$t.baseUri&&(bt=wn(kt.o.from($t.baseUri),bt)),Bt=typeof Bt=="string"?(0,Et.oR)(Bt):"",bt=(0,Et.oR)(bt),!bt||/^data:|javascript:/i.test(bt)||/^command:/i.test(bt)&&!$t.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(bt)?At:(bt=bt.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a data-href="${bt}" title="${Bt||bt}">${At}</a>`)),Ro.paragraph=bt=>`<p>${bt}</p>`,sn.codeBlockRenderer&&(Ro.code=(bt,Bt)=>{const At=sn.codeBlockRenderer(Bt??"",bt),Ke=Xe.a.nextId();return(0,at.eP)(Promise.all([At,Sr]),Qn.token).then(vt=>{var Lt;if(!On&&vt){const tn=Yi.querySelector(`div[data-code="${Ke}"]`);tn&&p.mc(tn,vt[0]),(Lt=sn.asyncRenderCallback)===null||Lt===void 0||Lt.call(sn)}}).catch(()=>{}),`<div class="code" data-code="${Ke}">${(0,Vn.YU)(bt)}</div>`}),sn.actionHandler){const bt=sn.actionHandler.disposables.add(new Ye.Y(Yi,"click")),Bt=sn.actionHandler.disposables.add(new Ye.Y(Yi,"auxclick"));sn.actionHandler.disposables.add(je.ju.any(bt.event,Bt.event)(At=>{const Ke=new Re.n(At);if(!Ke.leftButton&&!Ke.middleButton)return;let vt=Ke.target;if(!(vt.tagName!=="A"&&(vt=vt.parentElement,!vt||vt.tagName!=="A")))try{let Lt=vt.dataset.href;Lt&&($t.baseUri&&(Lt=wn(kt.o.from($t.baseUri),Lt)),sn.actionHandler.callback(Lt,Ke))}catch(Lt){(0,Be.dL)(Lt)}finally{Ke.preventDefault()}}))}$t.supportHtml||(Tn.sanitizer=bt=>($t.isTrusted?bt.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?bt:"",Tn.sanitize=!0,Tn.silent=!0),Tn.renderer=Ro;let to=(ri=$t.value)!==null&&ri!==void 0?ri:"";to.length>1e5&&(to=`${to.substr(0,1e5)}\u2026`),$t.supportThemeIcons&&(to=(0,Dt.f$)(to));let no=An.parse(to,Tn);$t.supportThemeIcons&&(no=(0,Ve.T)(no).map(Bt=>typeof Bt=="string"?Bt:Bt.outerHTML).join(""));const kn=new DOMParser().parseFromString(Pi($t,no),"text/html");if(kn.body.querySelectorAll("img").forEach(bt=>{const Bt=bt.getAttribute("src");if(Bt){let At=Bt;try{$t.baseUri&&(At=wn(kt.o.from($t.baseUri),At))}catch(Ke){}bt.src=Dr(At,!0)}}),Yi.innerHTML=Pi($t,kn.body.innerHTML),Fr(),sn.asyncRenderCallback)for(const bt of Yi.getElementsByTagName("img")){const Bt=oi.add(p.nm(bt,"load",()=>{Bt.dispose(),sn.asyncRenderCallback()}))}return{element:Yi,dispose:()=>{On=!0,Qn.cancel(),oi.dispose()}}}function wn($t,sn){return/^\w[\w\d+.-]*:/.test(sn)?sn:$t.path.endsWith("/")?(0,pn.i3)($t,sn).toString():(0,pn.i3)((0,pn.XX)($t),sn).toString()}function Pi($t,sn){const{config:Tn,allowedSchemes:ri}=Fi($t);Ot("uponSanitizeAttribute",(On,Qn)=>{if(Qn.attrName==="style"||Qn.attrName==="class"){if(On.tagName==="SPAN"){if(Qn.attrName==="style"){Qn.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(Qn.attrValue);return}else if(Qn.attrName==="class"){Qn.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(Qn.attrValue);return}}Qn.keepAttr=!1;return}});const oi=document.createElement("a");Ot("afterSanitizeAttributes",On=>{for(const Qn of["href","src"])On.hasAttribute(Qn)&&(oi.href=On.getAttribute(Qn),ri.includes(oi.protocol.replace(/:$/,""))||On.removeAttribute(Qn))});try{return be(sn,Object.assign(Object.assign({},Tn),{RETURN_TRUSTED_TYPE:!0}))}finally{rn("uponSanitizeAttribute"),rn("afterSanitizeAttributes")}}function Fi($t){const sn=[Ht.lg.http,Ht.lg.https,Ht.lg.mailto,Ht.lg.data,Ht.lg.file,Ht.lg.vscodeFileResource,Ht.lg.vscodeRemote,Ht.lg.vscodeRemoteResource];return $t.isTrusted&&sn.push(Ht.lg.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:sn}}var Ji=a(50988),si=a(72042),zt=a(82963),Vt=a(52136),vn=a(68801),Sn=function($t,sn,Tn,ri){var oi=arguments.length,On=oi<3?sn:ri===null?ri=Object.getOwnPropertyDescriptor(sn,Tn):ri,Qn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")On=Reflect.decorate($t,sn,Tn,ri);else for(var Yi=$t.length-1;Yi>=0;Yi--)(Qn=$t[Yi])&&(On=(oi<3?Qn(On):oi>3?Qn(sn,Tn,On):Qn(sn,Tn))||On);return oi>3&&On&&Object.defineProperty(sn,Tn,On),On},Bn=function($t,sn){return function(Tn,ri){sn(Tn,ri,$t)}},mn=function($t,sn,Tn,ri){function oi(On){return On instanceof Tn?On:new Tn(function(Qn){Qn(On)})}return new(Tn||(Tn=Promise))(function(On,Qn){function Yi(Fr){try{Dr(ri.next(Fr))}catch(Sr){Qn(Sr)}}function Lr(Fr){try{Dr(ri.throw(Fr))}catch(Sr){Qn(Sr)}}function Dr(Fr){Fr.done?On(Fr.value):oi(Fr.value).then(Yi,Lr)}Dr((ri=ri.apply($t,sn||[])).next())})},Jt;let En=class CS{constructor(sn,Tn,ri){this._options=sn,this._languageService=Tn,this._openerService=ri,this._onDidRenderAsync=new je.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(sn,Tn,ri){if(!sn)return{element:document.createElement("span"),dispose:()=>{}};const oi=new ft.SL;return{element:oi.add(Zt(sn,Object.assign(Object.assign({},this._getRenderOptions(sn,oi)),Tn),ri)).element,dispose:()=>oi.dispose()}}_getRenderOptions(sn,Tn){return{codeBlockRenderer:(ri,oi)=>mn(this,void 0,void 0,function*(){var On,Qn,Yi;let Lr;ri?Lr=this._languageService.getLanguageIdByLanguageName(ri):this._options.editor&&(Lr=(On=this._options.editor.getModel())===null||On===void 0?void 0:On.getLanguageId()),Lr||(Lr=vn.bd);const Dr=yield(0,zt.C2)(this._languageService,oi,Lr),Fr=document.createElement("span");if(Fr.innerHTML=(Yi=(Qn=CS._ttpTokenizer)===null||Qn===void 0?void 0:Qn.createHTML(Dr))!==null&&Yi!==void 0?Yi:Dr,this._options.editor){const Sr=this._options.editor.getOption(44);(0,Vt.N)(Fr,Sr)}else this._options.codeBlockFontFamily&&(Fr.style.fontFamily=this._options.codeBlockFontFamily);return Fr}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:ri=>this._openerService.open(ri,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:sn.isTrusted}).catch(Be.dL),disposables:Tn}}}};En._ttpTokenizer=(Jt=window.trustedTypes)===null||Jt===void 0?void 0:Jt.createPolicy("tokenizeToString",{createHTML($t){return $t}}),En=Sn([Bn(1,si.O),Bn(2,Ji.v4)],En)},27753:function(Tt,me,a){"use strict";a.d(me,{O:function(){return x}});var p=a(85152),d=a(15393),z=a(9917),O=a(16830),S=a(24314),j=a(63580),T=a(16141),B=function(D,c,C,M){var E=arguments.length,_=E<3?c:M===null?M=Object.getOwnPropertyDescriptor(c,C):M,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(D,c,C,M);else for(var N=D.length-1;N>=0;N--)(L=D[N])&&(_=(E<3?L(_):E>3?L(c,C,_):L(c,C))||_);return E>3&&_&&Object.defineProperty(c,C,_),_},F=function(D,c){return function(C,M){c(C,M,D)}};let x=class S0{constructor(c,C){this._messageWidget=new z.XK,this._messageListeners=new z.SL,this._editor=c,this._visible=S0.MESSAGE_VISIBLE.bindTo(C),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(c){return c.getContribution(S0.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(c,C){(0,p.Z9)(c),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new g(this._editor,C,c),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new d._F(()=>this.closeMessage(),3e3));let M;this._messageListeners.add(this._editor.onMouseMove(E=>{!E.target.position||(M?M.containsPosition(E.target.position)||this.closeMessage():M=new S.e(C.lineNumber-3,1,E.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(g.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(j.N("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};x.ID="editor.contrib.messageController",x.MESSAGE_VISIBLE=new T.uy("messageVisible",!1,j.N("messageVisible","Whether the editor is currently showing an inline message")),x=B([F(1,T.i6)],x);const v=O._l.bindToContribution(x.get);(0,O.fK)(new v({id:"leaveEditorMessage",precondition:x.MESSAGE_VISIBLE,handler:D=>D.closeMessage(),kbOpts:{weight:100+30,primary:9}}));class g{constructor(c,{lineNumber:C,column:M},E){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=c,this._editor.revealLinesInCenterIfOutsideViewport(C,C,0),this._position={lineNumber:C,column:M-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const _=document.createElement("div");_.classList.add("anchor","top"),this._domNode.appendChild(_);const L=document.createElement("div");L.classList.add("message"),L.textContent=E,this._domNode.appendChild(L);const N=document.createElement("div");N.classList.add("anchor","below"),this._domNode.appendChild(N),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(c){let C;const M=()=>{c.dispose(),clearTimeout(C),c.getDomNode().removeEventListener("animationend",M)};return C=setTimeout(M,110),c.getDomNode().addEventListener("animationend",M),c.getDomNode().classList.add("fadeOut"),{dispose:M}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(c){this._domNode.classList.toggle("below",c===2)}}(0,O._K)(x.ID,x)},77061:function(Tt,me,a){"use strict";a.r(me),a.d(me,{InsertCursorAbove:function(){return I},InsertCursorBelow:function(){return k},MultiCursorSessionResult:function(){return de},MultiCursorSession:function(){return pe},MultiCursorSelectionController:function(){return ae},MultiCursorSelectionControllerAction:function(){return ue},AddSelectionToNextFindMatchAction:function(){return te},AddSelectionToPreviousFindMatchAction:function(){return K},MoveSelectionToNextFindMatchAction:function(){return U},MoveSelectionToPreviousFindMatchAction:function(){return ee},SelectHighlightsAction:function(){return X},CompatChangeAll:function(){return le},SelectionHighlighter:function(){return Ce}});var p=a(85152),d=a(15393),z=a(22258),O=a(9917),S=a(16830),j=a(28108),T=a(24314),B=a(3860),F=a(29102),x=a(84973),v=a(45146),g=a(31633),D=a(63580),c=a(84144),C=a(16141),M=a(73910),E=a(97781),_=a(71922),L=function(Te,ge,we,ze){var Qe=arguments.length,Pe=Qe<3?ge:ze===null?ze=Object.getOwnPropertyDescriptor(ge,we):ze,Oe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Pe=Reflect.decorate(Te,ge,we,ze);else for(var qe=Te.length-1;qe>=0;qe--)(Oe=Te[qe])&&(Pe=(Qe<3?Oe(Pe):Qe>3?Oe(ge,we,Pe):Oe(ge,we))||Pe);return Qe>3&&Pe&&Object.defineProperty(ge,we,Pe),Pe},N=function(Te,ge){return function(we,ze){ge(we,ze,Te)}};function b(Te,ge){const we=ge.filter(ze=>!Te.find(Qe=>Qe.equals(ze)));if(we.length>=1){const ze=we.map(Pe=>`line ${Pe.viewState.position.lineNumber} column ${Pe.viewState.position.column}`).join(", "),Qe=we.length===1?D.N("cursorAdded","Cursor added: {0}",ze):D.N("cursorsAdded","Cursors added: {0}",ze);(0,p.i7)(Qe)}}class I extends S.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:D.N("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:F.u.editorTextFocus,primary:2048|512|16,linux:{primary:1024|512|16,secondary:[2048|1024|16]},weight:100},menuOpts:{menuId:c.eH.MenubarSelectionMenu,group:"3_multi",title:D.N({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(ge,we,ze){if(!we.hasModel())return;let Qe=!0;ze&&ze.logicalLine===!1&&(Qe=!1);const Pe=we._getViewModel();if(Pe.cursorConfig.readOnly)return;Pe.model.pushStackElement();const Oe=Pe.getCursorStates();Pe.setCursorStates(ze.source,3,j.P.addCursorUp(Pe,Oe,Qe)),Pe.revealTopMostCursor(ze.source),b(Oe,Pe.getCursorStates())}}class k extends S.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:D.N("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:F.u.editorTextFocus,primary:2048|512|18,linux:{primary:1024|512|18,secondary:[2048|1024|18]},weight:100},menuOpts:{menuId:c.eH.MenubarSelectionMenu,group:"3_multi",title:D.N({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(ge,we,ze){if(!we.hasModel())return;let Qe=!0;ze&&ze.logicalLine===!1&&(Qe=!1);const Pe=we._getViewModel();if(Pe.cursorConfig.readOnly)return;Pe.model.pushStackElement();const Oe=Pe.getCursorStates();Pe.setCursorStates(ze.source,3,j.P.addCursorDown(Pe,Oe,Qe)),Pe.revealBottomMostCursor(ze.source),b(Oe,Pe.getCursorStates())}}class W extends S.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:D.N("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:F.u.editorTextFocus,primary:1024|512|39,weight:100},menuOpts:{menuId:c.eH.MenubarSelectionMenu,group:"3_multi",title:D.N({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(ge,we,ze){if(!ge.isEmpty()){for(let Qe=ge.startLineNumber;Qe<ge.endLineNumber;Qe++){let Pe=we.getLineMaxColumn(Qe);ze.push(new B.Y(Qe,Pe,Qe,Pe))}ge.endColumn>1&&ze.push(new B.Y(ge.endLineNumber,ge.endColumn,ge.endLineNumber,ge.endColumn))}}run(ge,we){if(!we.hasModel())return;const ze=we.getModel(),Qe=we.getSelections(),Pe=we._getViewModel(),Oe=Pe.getCursorStates();let qe=[];Qe.forEach(Je=>this.getCursorsForSelection(Je,ze,qe)),qe.length>0&&we.setSelections(qe),b(Oe,Pe.getCursorStates())}}class q extends S.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:D.N("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(ge,we){if(!we.hasModel())return;const ze=we.getSelections(),Qe=we.getModel().getLineCount();let Pe=[];for(let Je=ze[0].startLineNumber;Je<=Qe;Je++)Pe.push(new B.Y(Je,ze[0].startColumn,Je,ze[0].endColumn));const Oe=we._getViewModel(),qe=Oe.getCursorStates();Pe.length>0&&we.setSelections(Pe),b(qe,Oe.getCursorStates())}}class re extends S.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:D.N("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(ge,we){if(!we.hasModel())return;const ze=we.getSelections();let Qe=[];for(let qe=ze[0].startLineNumber;qe>=1;qe--)Qe.push(new B.Y(qe,ze[0].startColumn,qe,ze[0].endColumn));const Pe=we._getViewModel(),Oe=Pe.getCursorStates();Qe.length>0&&we.setSelections(Qe),b(Oe,Pe.getCursorStates())}}class de{constructor(ge,we,ze){this.selections=ge,this.revealRange=we,this.revealScrollType=ze}}class pe{constructor(ge,we,ze,Qe,Pe,Oe,qe){this._editor=ge,this.findController=we,this.isDisconnectedFromFindController=ze,this.searchText=Qe,this.wholeWord=Pe,this.matchCase=Oe,this.currentMatch=qe}static create(ge,we){if(!ge.hasModel())return null;const ze=we.getState();if(!ge.hasTextFocus()&&ze.isRevealed&&ze.searchString.length>0)return new pe(ge,we,!1,ze.searchString,ze.wholeWord,ze.matchCase,null);let Qe=!1,Pe,Oe;const qe=ge.getSelections();qe.length===1&&qe[0].isEmpty()?(Qe=!0,Pe=!0,Oe=!0):(Pe=ze.wholeWord,Oe=ze.matchCase);const Je=ge.getSelection();let Ne,Fe=null;if(Je.isEmpty()){const ne=ge.getConfiguredWordAtPosition(Je.getStartPosition());if(!ne)return null;Ne=ne.word,Fe=new B.Y(Je.startLineNumber,ne.startColumn,Je.startLineNumber,ne.endColumn)}else Ne=ge.getModel().getValueInRange(Je).replace(/\r\n/g,`
`);return new pe(ge,we,Qe,Ne,Pe,Oe,Fe)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const ge=this._getNextMatch();if(!ge)return null;const we=this._editor.getSelections();return new de(we.concat(ge),ge,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const ge=this._getNextMatch();if(!ge)return null;const we=this._editor.getSelections();return new de(we.slice(0,we.length-1).concat(ge),ge,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const Qe=this.currentMatch;return this.currentMatch=null,Qe}this.findController.highlightFindOptions();const ge=this._editor.getSelections(),we=ge[ge.length-1],ze=this._editor.getModel().findNextMatch(this.searchText,we.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1);return ze?new B.Y(ze.range.startLineNumber,ze.range.startColumn,ze.range.endLineNumber,ze.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const ge=this._getPreviousMatch();if(!ge)return null;const we=this._editor.getSelections();return new de(we.concat(ge),ge,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const ge=this._getPreviousMatch();if(!ge)return null;const we=this._editor.getSelections();return new de(we.slice(0,we.length-1).concat(ge),ge,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const Qe=this.currentMatch;return this.currentMatch=null,Qe}this.findController.highlightFindOptions();const ge=this._editor.getSelections(),we=ge[ge.length-1],ze=this._editor.getModel().findPreviousMatch(this.searchText,we.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1);return ze?new B.Y(ze.range.startLineNumber,ze.range.startColumn,ze.range.endLineNumber,ze.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1,1073741824)):[]}}class ae extends O.JT{constructor(ge){super();this._sessionDispose=this._register(new O.SL),this._editor=ge,this._ignoreSelectionChange=!1,this._session=null}static get(ge){return ge.getContribution(ae.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(ge){if(!this._session){const we=pe.create(this._editor,ge);if(!we)return;this._session=we;const ze={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(ze.wholeWordOverride=1,ze.matchCaseOverride=1,ze.isRegexOverride=2),ge.getState().change(ze,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(Qe=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(ge.getState().onFindReplaceStateChange(Qe=>{(Qe.matchCase||Qe.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const ge={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(ge,!1)}this._session=null}_setSelections(ge){this._ignoreSelectionChange=!0,this._editor.setSelections(ge),this._ignoreSelectionChange=!1}_expandEmptyToWord(ge,we){if(!we.isEmpty())return we;const ze=this._editor.getConfiguredWordAtPosition(we.getStartPosition());return ze?new B.Y(we.startLineNumber,ze.startColumn,we.startLineNumber,ze.endColumn):we}_applySessionResult(ge){!ge||(this._setSelections(ge.selections),ge.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(ge.revealRange,ge.revealScrollType))}getSession(ge){return this._session}addSelectionToNextFindMatch(ge){if(!!this._editor.hasModel()){if(!this._session){const we=this._editor.getSelections();if(we.length>1){const Qe=ge.getState().matchCase;if(!ye(this._editor.getModel(),we,Qe)){const Oe=this._editor.getModel();let qe=[];for(let Je=0,Ne=we.length;Je<Ne;Je++)qe[Je]=this._expandEmptyToWord(Oe,we[Je]);this._editor.setSelections(qe);return}}}this._beginSessionIfNeeded(ge),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(ge){this._beginSessionIfNeeded(ge),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(ge){this._beginSessionIfNeeded(ge),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(ge){this._beginSessionIfNeeded(ge),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(ge){if(!this._editor.hasModel())return;let we=null;const ze=ge.getState();if(ze.isRevealed&&ze.searchString.length>0&&ze.isRegex)we=this._editor.getModel().findMatches(ze.searchString,!0,ze.isRegex,ze.matchCase,ze.wholeWord?this._editor.getOption(117):null,!1,1073741824);else{if(this._beginSessionIfNeeded(ge),!this._session)return;we=this._session.selectAll()}if(ze.searchScope){const Qe=ze.searchScope;let Pe=[];we.forEach(Oe=>{Qe.forEach(qe=>{Oe.range.endLineNumber<=qe.endLineNumber&&Oe.range.startLineNumber>=qe.startLineNumber&&Pe.push(Oe)})}),we=Pe}if(we.length>0){const Qe=this._editor.getSelection();for(let Pe=0,Oe=we.length;Pe<Oe;Pe++){const qe=we[Pe];if(qe.range.intersectRanges(Qe)){we[Pe]=we[0],we[0]=qe;break}}this._setSelections(we.map(Pe=>new B.Y(Pe.range.startLineNumber,Pe.range.startColumn,Pe.range.endLineNumber,Pe.range.endColumn)))}}}ae.ID="editor.contrib.multiCursorController";class ue extends S.R6{run(ge,we){const ze=ae.get(we);if(!ze)return;const Qe=g.CommonFindController.get(we);if(!Qe)return;const Pe=we._getViewModel();if(Pe){const Oe=Pe.getCursorStates();this._run(ze,Qe),b(Oe,Pe.getCursorStates())}}}class te extends ue{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:D.N("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:F.u.focus,primary:2048|34,weight:100},menuOpts:{menuId:c.eH.MenubarSelectionMenu,group:"3_multi",title:D.N({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(ge,we){ge.addSelectionToNextFindMatch(we)}}class K extends ue{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:D.N("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:c.eH.MenubarSelectionMenu,group:"3_multi",title:D.N({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(ge,we){ge.addSelectionToPreviousFindMatch(we)}}class U extends ue{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:D.N("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:F.u.focus,primary:(0,z.gx)(2048|41,2048|34),weight:100}})}_run(ge,we){ge.moveSelectionToNextFindMatch(we)}}class ee extends ue{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:D.N("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(ge,we){ge.moveSelectionToPreviousFindMatch(we)}}class X extends ue{constructor(){super({id:"editor.action.selectHighlights",label:D.N("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:F.u.focus,primary:2048|1024|42,weight:100},menuOpts:{menuId:c.eH.MenubarSelectionMenu,group:"3_multi",title:D.N({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(ge,we){ge.selectAll(we)}}class le extends ue{constructor(){super({id:"editor.action.changeAll",label:D.N("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:C.Ao.and(F.u.writable,F.u.editorTextFocus),kbOpts:{kbExpr:F.u.editorTextFocus,primary:2048|60,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(ge,we){ge.selectAll(we)}}class oe{constructor(ge,we,ze,Qe,Pe){this._model=ge,this._searchText=we,this._matchCase=ze,this._wordSeparators=Qe,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,Pe&&this._model===Pe._model&&this._searchText===Pe._searchText&&this._matchCase===Pe._matchCase&&this._wordSeparators===Pe._wordSeparators&&this._modelVersionId===Pe._modelVersionId&&(this._cachedFindMatches=Pe._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(ge=>ge.range),this._cachedFindMatches.sort(T.e.compareRangesUsingStarts)),this._cachedFindMatches}}let Ce=class vp extends O.JT{constructor(ge,we){super();this._languageFeaturesService=we,this.editor=ge,this._isEnabled=ge.getOption(97),this.decorations=[],this.updateSoon=this._register(new d.pY(()=>this._update(),300)),this.state=null,this._register(ge.onDidChangeConfiguration(Qe=>{this._isEnabled=ge.getOption(97)})),this._register(ge.onDidChangeCursorSelection(Qe=>{!this._isEnabled||(Qe.selection.isEmpty()?Qe.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(ge.onDidChangeModel(Qe=>{this._setState(null)})),this._register(ge.onDidChangeModelContent(Qe=>{this._isEnabled&&this.updateSoon.schedule()}));const ze=g.CommonFindController.get(ge);ze&&this._register(ze.getState().onFindReplaceStateChange(Qe=>{this._update()}))}_update(){this._setState(vp._createState(this.state,this._isEnabled,this.editor))}static _createState(ge,we,ze){if(!we||!ze.hasModel())return null;const Qe=ze.getSelection();if(Qe.startLineNumber!==Qe.endLineNumber)return null;const Pe=ae.get(ze);if(!Pe)return null;const Oe=g.CommonFindController.get(ze);if(!Oe)return null;let qe=Pe.getSession(Oe);if(!qe){const Fe=ze.getSelections();if(Fe.length>1){const Q=Oe.getState().matchCase;if(!ye(ze.getModel(),Fe,Q))return null}qe=pe.create(ze,Oe)}if(!qe||qe.currentMatch||/^[ \t]+$/.test(qe.searchText)||qe.searchText.length>200)return null;const Je=Oe.getState(),Ne=Je.matchCase;if(Je.isRevealed){let Fe=Je.searchString;Ne||(Fe=Fe.toLowerCase());let ne=qe.searchText;if(Ne||(ne=ne.toLowerCase()),Fe===ne&&qe.matchCase===Je.matchCase&&qe.wholeWord===Je.wholeWord&&!Je.isRegex)return null}return new oe(ze.getModel(),qe.searchText,qe.matchCase,qe.wholeWord?ze.getOption(117):null,ge)}_setState(ge){if(this.state=ge,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const we=this.editor.getModel();if(we.isTooLargeForTokenization())return;const ze=this.state.findMatches(),Qe=this.editor.getSelections();Qe.sort(T.e.compareRangesUsingStarts);const Pe=[];for(let Je=0,Ne=0,Fe=ze.length,ne=Qe.length;Je<Fe;){const Q=ze[Je];if(Ne>=ne)Pe.push(Q),Je++;else{const ie=T.e.compareRangesUsingStarts(Q,Qe[Ne]);ie<0?((Qe[Ne].isEmpty()||!T.e.areIntersecting(Q,Qe[Ne]))&&Pe.push(Q),Je++):(ie>0||Je++,Ne++)}}const Oe=this._languageFeaturesService.documentHighlightProvider.has(we)&&this.editor.getOption(72),qe=Pe.map(Je=>({range:Je,options:Oe?vp._SELECTION_HIGHLIGHT:vp._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,qe)}dispose(){this._setState(null),super.dispose()}};Ce.ID="editor.contrib.selectionHighlighter",Ce._SELECTION_HIGHLIGHT_OVERVIEW=v.qx.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:(0,E.EN)(M.IYc),position:x.F5.Inline},overviewRuler:{color:(0,E.EN)(M.SPM),position:x.sh.Center}}),Ce._SELECTION_HIGHLIGHT=v.qx.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),Ce=L([N(1,_.p)],Ce);function ye(Te,ge,we){const ze=ke(Te,ge[0],!we);for(let Qe=1,Pe=ge.length;Qe<Pe;Qe++){const Oe=ge[Qe];if(Oe.isEmpty())return!1;const qe=ke(Te,Oe,!we);if(ze!==qe)return!1}return!0}function ke(Te,ge,we){const ze=Te.getValueInRange(ge);return we?ze.toLowerCase():ze}(0,S._K)(ae.ID,ae),(0,S._K)(Ce.ID,Ce),(0,S.Qr)(I),(0,S.Qr)(k),(0,S.Qr)(W),(0,S.Qr)(te),(0,S.Qr)(K),(0,S.Qr)(U),(0,S.Qr)(ee),(0,S.Qr)(X),(0,S.Qr)(le),(0,S.Qr)(q),(0,S.Qr)(re)},95313:function(Tt,me,a){"use strict";a.r(me),a.d(me,{TriggerParameterHintsAction:function(){return qe}});var p=a(9917),d=a(16830),z=a(29102),O=a(96887),S=a(71050),j=a(17301),T=a(98401),B=a(70666),F=a(50187),x=a(88216),v=a(94565),g=a(16141),D=a(71922),c=function(Fe,ne,Q,ie){function xe(be){return be instanceof Q?be:new Q(function(Ge){Ge(be)})}return new(Q||(Q=Promise))(function(be,Ge){function nt(rn){try{Ot(ie.next(rn))}catch(gt){Ge(gt)}}function _t(rn){try{Ot(ie.throw(rn))}catch(gt){Ge(gt)}}function Ot(rn){rn.done?be(rn.value):xe(rn.value).then(nt,_t)}Ot((ie=ie.apply(Fe,ne||[])).next())})};const C={Visible:new g.uy("parameterHintsVisible",!1),MultipleSignatures:new g.uy("parameterHintsMultipleSignatures",!1)};function M(Fe,ne,Q,ie,xe){return c(this,void 0,void 0,function*(){const be=Fe.ordered(ne);for(const Ge of be)try{const nt=yield Ge.provideSignatureHelp(ne,Q,xe,ie);if(nt)return nt}catch(nt){(0,j.Cp)(nt)}})}v.P0.registerCommand("_executeSignatureHelpProvider",(Fe,...ne)=>c(void 0,void 0,void 0,function*(){const[Q,ie,xe]=ne;(0,T.p_)(B.o.isUri(Q)),(0,T.p_)(F.L.isIPosition(ie)),(0,T.p_)(typeof xe=="string"||!xe);const be=Fe.get(D.p),Ge=yield Fe.get(x.S).createModelReference(Q);try{const nt=yield M(be.signatureHelpProvider,Ge.object.textEditorModel,F.L.lift(ie),{triggerKind:O.WW.Invoke,isRetrigger:!1,triggerCharacter:xe},S.T.None);return nt?(setTimeout(()=>nt.dispose(),0),nt.value):void 0}finally{Ge.dispose()}}));var E=a(63580),_=a(72065),L=a(65321),N=a(85152),b=a(9802),I=a(73046),k=a(4669),W=a(25924),q=a(498),re=a(72042),de=a(15393),pe=a(44906),ae=function(Fe,ne,Q,ie){function xe(be){return be instanceof Q?be:new Q(function(Ge){Ge(be)})}return new(Q||(Q=Promise))(function(be,Ge){function nt(rn){try{Ot(ie.next(rn))}catch(gt){Ge(gt)}}function _t(rn){try{Ot(ie.throw(rn))}catch(gt){Ge(gt)}}function Ot(rn){rn.done?be(rn.value):xe(rn.value).then(nt,_t)}Ot((ie=ie.apply(Fe,ne||[])).next())})},ue;(function(Fe){Fe.Default={type:0};class ne{constructor(xe,be){this.request=xe,this.previouslyActiveHints=be,this.type=2}}Fe.Pending=ne;class Q{constructor(xe){this.hints=xe,this.type=1}}Fe.Active=Q})(ue||(ue={}));class te extends p.JT{constructor(ne,Q,ie=te.DEFAULT_DELAY){super();this._onChangedHints=this._register(new k.Q5),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=ue.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new p.XK),this.triggerChars=new pe.q,this.retriggerChars=new pe.q,this.triggerId=0,this.editor=ne,this.providers=Q,this.throttledDelayer=new de.vp(ie),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(xe=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(xe=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(xe=>this.onCursorChange(xe))),this._register(this.editor.onDidChangeModelContent(xe=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(xe=>this.onDidType(xe))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(ne){this._state.type===2&&this._state.request.cancel(),this._state=ne}cancel(ne=!1){this.state=ue.Default,this.throttledDelayer.cancel(),ne||this._onChangedHints.fire(void 0)}trigger(ne,Q){const ie=this.editor.getModel();if(!ie||!this.providers.has(ie))return;const xe=++this.triggerId;this._pendingTriggers.push(ne),this.throttledDelayer.trigger(()=>this.doTrigger(xe),Q).catch(j.dL)}next(){if(this.state.type!==1)return;const ne=this.state.hints.signatures.length,Q=this.state.hints.activeSignature,ie=Q%ne==ne-1,xe=this.editor.getOption(76).cycle;if((ne<2||ie)&&!xe){this.cancel();return}this.updateActiveSignature(ie&&xe?0:Q+1)}previous(){if(this.state.type!==1)return;const ne=this.state.hints.signatures.length,Q=this.state.hints.activeSignature,ie=Q===0,xe=this.editor.getOption(76).cycle;if((ne<2||ie)&&!xe){this.cancel();return}this.updateActiveSignature(ie&&xe?ne-1:Q-1)}updateActiveSignature(ne){this.state.type===1&&(this.state=new ue.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:ne})),this._onChangedHints.fire(this.state.hints))}doTrigger(ne){return ae(this,void 0,void 0,function*(){const Q=this.state.type===1||this.state.type===2,ie=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const xe=this._pendingTriggers.reduce(K);this._pendingTriggers=[];const be={triggerKind:xe.triggerKind,triggerCharacter:xe.triggerCharacter,isRetrigger:Q,activeSignatureHelp:ie};if(!this.editor.hasModel())return!1;const Ge=this.editor.getModel(),nt=this.editor.getPosition();this.state=new ue.Pending((0,de.PG)(_t=>M(this.providers,Ge,nt,be,_t)),ie);try{const _t=yield this.state.request;return ne!==this.triggerId?(_t==null||_t.dispose(),!1):!_t||!_t.value.signatures||_t.value.signatures.length===0?(_t==null||_t.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new ue.Active(_t.value),this._lastSignatureHelpResult.value=_t,this._onChangedHints.fire(this.state.hints),!0)}catch(_t){return ne===this.triggerId&&(this.state=ue.Default),(0,j.dL)(_t),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new pe.q,this.retriggerChars=new pe.q;const ne=this.editor.getModel();if(!!ne)for(const Q of this.providers.ordered(ne)){for(const ie of Q.signatureHelpTriggerCharacters||[])this.triggerChars.add(ie.charCodeAt(0)),this.retriggerChars.add(ie.charCodeAt(0));for(const ie of Q.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(ie.charCodeAt(0))}}onDidType(ne){if(!this.triggerOnType)return;const Q=ne.length-1,ie=ne.charCodeAt(Q);(this.triggerChars.has(ie)||this.isTriggered&&this.retriggerChars.has(ie))&&this.trigger({triggerKind:O.WW.TriggerCharacter,triggerCharacter:ne.charAt(Q)})}onCursorChange(ne){ne.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:O.WW.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:O.WW.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(76).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}te.DEFAULT_DELAY=120;function K(Fe,ne){switch(ne.triggerKind){case O.WW.Invoke:return ne;case O.WW.ContentChange:return Fe;case O.WW.TriggerCharacter:default:return ne}}var U=a(50988),ee=a(73910),X=a(59554),le=a(92321),oe=a(97781),Ce=function(Fe,ne,Q,ie){var xe=arguments.length,be=xe<3?ne:ie===null?ie=Object.getOwnPropertyDescriptor(ne,Q):ie,Ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")be=Reflect.decorate(Fe,ne,Q,ie);else for(var nt=Fe.length-1;nt>=0;nt--)(Ge=Fe[nt])&&(be=(xe<3?Ge(be):xe>3?Ge(ne,Q,be):Ge(ne,Q))||be);return xe>3&&be&&Object.defineProperty(ne,Q,be),be},ye=function(Fe,ne){return function(Q,ie){ne(Q,ie,Fe)}};const ke=L.$,Te=(0,X.q5)("parameter-hints-next",I.lA.chevronDown,E.N("parameterHintsNextIcon","Icon for show next parameter hint.")),ge=(0,X.q5)("parameter-hints-previous",I.lA.chevronUp,E.N("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let we=class bS extends p.JT{constructor(ne,Q,ie,xe,be){super();this.editor=ne,this.renderDisposeables=this._register(new p.SL),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new q.$({editor:ne},xe,ie)),this.model=this._register(new te(ne,be.signatureHelpProvider)),this.keyVisible=C.Visible.bindTo(Q),this.keyMultipleSignatures=C.MultipleSignatures.bindTo(Q),this._register(this.model.onChangedHints(Ge=>{Ge?(this.show(),this.render(Ge)):this.hide()}))}createParameterHintDOMNodes(){const ne=ke(".editor-widget.parameter-hints-widget"),Q=L.R3(ne,ke(".phwrapper"));Q.tabIndex=-1;const ie=L.R3(Q,ke(".controls")),xe=L.R3(ie,ke(".button"+oe.kS.asCSSSelector(ge))),be=L.R3(ie,ke(".overloads")),Ge=L.R3(ie,ke(".button"+oe.kS.asCSSSelector(Te)));this._register(L.nm(xe,"click",Ue=>{L.zB.stop(Ue),this.previous()})),this._register(L.nm(Ge,"click",Ue=>{L.zB.stop(Ue),this.next()}));const nt=ke(".body"),_t=new b.s$(nt,{});this._register(_t),Q.appendChild(_t.getDomNode());const Ot=L.R3(nt,ke(".signature")),rn=L.R3(nt,ke(".docs"));ne.style.userSelect="text",this.domNodes={element:ne,signature:Ot,overloads:be,docs:rn,scrollbar:_t},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(Ue=>{this.visible&&this.editor.layoutContentWidget(this)}));const gt=()=>{if(!this.domNodes)return;const Ue=this.editor.getOption(44);this.domNodes.element.style.fontSize=`${Ue.fontSize}px`,this.domNodes.element.style.lineHeight=`${Ue.lineHeight/Ue.fontSize}`};gt(),this._register(k.ju.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(Ue=>Ue.hasChanged(44)).on(gt,null)),this._register(this.editor.onDidLayoutChange(Ue=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes&&this.domNodes.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),!!this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(ne){var Q;if(this.renderDisposeables.clear(),!this.domNodes)return;const ie=ne.signatures.length>1;this.domNodes.element.classList.toggle("multiple",ie),this.keyMultipleSignatures.set(ie),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const xe=ne.signatures[ne.activeSignature];if(!xe)return;const be=L.R3(this.domNodes.signature,ke(".code")),Ge=this.editor.getOption(44);be.style.fontSize=`${Ge.fontSize}px`,be.style.fontFamily=Ge.fontFamily;const nt=xe.parameters.length>0,_t=(Q=xe.activeParameter)!==null&&Q!==void 0?Q:ne.activeParameter;if(nt)this.renderParameters(be,xe,_t);else{const gt=L.R3(be,ke("span"));gt.textContent=xe.label}const Ot=xe.parameters[_t];if(Ot==null?void 0:Ot.documentation){const gt=ke("span.documentation");if(typeof Ot.documentation=="string")gt.textContent=Ot.documentation;else{const Ue=this.renderMarkdownDocs(Ot.documentation);gt.appendChild(Ue.element)}L.R3(this.domNodes.docs,ke("p",{},gt))}if(xe.documentation!==void 0)if(typeof xe.documentation=="string")L.R3(this.domNodes.docs,ke("p",{},xe.documentation));else{const gt=this.renderMarkdownDocs(xe.documentation);L.R3(this.domNodes.docs,gt.element)}const rn=this.hasDocs(xe,Ot);if(this.domNodes.signature.classList.toggle("has-docs",rn),this.domNodes.docs.classList.toggle("empty",!rn),this.domNodes.overloads.textContent=String(ne.activeSignature+1).padStart(ne.signatures.length.toString().length,"0")+"/"+ne.signatures.length,Ot){let gt="";const Ue=xe.parameters[_t];Array.isArray(Ue.label)?gt=xe.label.substring(Ue.label[0],Ue.label[1]):gt=Ue.label,Ue.documentation&&(gt+=typeof Ue.documentation=="string"?`, ${Ue.documentation}`:`, ${Ue.documentation.value}`),xe.documentation&&(gt+=typeof xe.documentation=="string"?`, ${xe.documentation}`:`, ${xe.documentation.value}`),this.announcedLabel!==gt&&(N.Z9(E.N("hint","{0}, hint",gt)),this.announcedLabel=gt)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(ne){const Q=this.renderDisposeables.add(this.markdownRenderer.render(ne,{asyncRenderCallback:()=>{var ie;(ie=this.domNodes)===null||ie===void 0||ie.scrollbar.scanDomNode()}}));return Q.element.classList.add("markdown-docs"),Q}hasDocs(ne,Q){return!!(Q&&typeof Q.documentation=="string"&&(0,T.cW)(Q.documentation).length>0||Q&&typeof Q.documentation=="object"&&(0,T.cW)(Q.documentation).value.length>0||ne.documentation&&typeof ne.documentation=="string"&&(0,T.cW)(ne.documentation).length>0||ne.documentation&&typeof ne.documentation=="object"&&(0,T.cW)(ne.documentation.value).length>0)}renderParameters(ne,Q,ie){const[xe,be]=this.getParameterLabelOffsets(Q,ie),Ge=document.createElement("span");Ge.textContent=Q.label.substring(0,xe);const nt=document.createElement("span");nt.textContent=Q.label.substring(xe,be),nt.className="parameter active";const _t=document.createElement("span");_t.textContent=Q.label.substring(be),L.R3(ne,Ge,nt,_t)}getParameterLabelOffsets(ne,Q){const ie=ne.parameters[Q];if(ie){if(Array.isArray(ie.label))return ie.label;if(ie.label.length){const xe=new RegExp(`(\\W|^)${(0,W.ec)(ie.label)}(?=\\W|$)`,"g");xe.test(ne.label);const be=xe.lastIndex-ie.label.length;return be>=0?[be,xe.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return bS.ID}trigger(ne){this.model.trigger(ne,0)}updateMaxHeight(){if(!this.domNodes)return;const Q=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=Q;const ie=this.domNodes.element.getElementsByClassName("phwrapper");ie.length&&(ie[0].style.maxHeight=Q)}};we.ID="editor.widget.parameterHintsWidget",we=Ce([ye(1,g.i6),ye(2,U.v4),ye(3,re.O),ye(4,D.p)],we);const ze=(0,ee.P6G)("editorHoverWidget.highlightForeground",{dark:ee.Gwp,light:ee.Gwp,hc:ee.Gwp},E.N("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));(0,oe.Ic)((Fe,ne)=>{const Q=Fe.getColor(ee.CNo);if(Q){const Ot=Fe.type===le.e.HIGH_CONTRAST?2:1;ne.addRule(`.monaco-editor .parameter-hints-widget { border: ${Ot}px solid ${Q}; }`),ne.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${Q.transparent(.5)}; }`),ne.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${Q.transparent(.5)}; }`)}const ie=Fe.getColor(ee.yJx);ie&&ne.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${ie}; }`);const xe=Fe.getColor(ee.url);xe&&ne.addRule(`.monaco-editor .parameter-hints-widget a { color: ${xe}; }`);const be=Fe.getColor(ee.sgC);be&&ne.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${be}; }`);const Ge=Fe.getColor(ee.Sbf);Ge&&ne.addRule(`.monaco-editor .parameter-hints-widget { color: ${Ge}; }`);const nt=Fe.getColor(ee.SwI);nt&&ne.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${nt}; }`);const _t=Fe.getColor(ze);_t&&ne.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${_t}}`)});var Qe=function(Fe,ne,Q,ie){var xe=arguments.length,be=xe<3?ne:ie===null?ie=Object.getOwnPropertyDescriptor(ne,Q):ie,Ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")be=Reflect.decorate(Fe,ne,Q,ie);else for(var nt=Fe.length-1;nt>=0;nt--)(Ge=Fe[nt])&&(be=(xe<3?Ge(be):xe>3?Ge(ne,Q,be):Ge(ne,Q))||be);return xe>3&&be&&Object.defineProperty(ne,Q,be),be},Pe=function(Fe,ne){return function(Q,ie){ne(Q,ie,Fe)}};let Oe=class yS extends p.JT{constructor(ne,Q){super();this.editor=ne,this.widget=this._register(Q.createInstance(we,this.editor))}static get(ne){return ne.getContribution(yS.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(ne){this.widget.trigger(ne)}};Oe.ID="editor.controller.parameterHints",Oe=Qe([Pe(1,_.TG)],Oe);class qe extends d.R6{constructor(){super({id:"editor.action.triggerParameterHints",label:E.N("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:z.u.hasSignatureHelpProvider,kbOpts:{kbExpr:z.u.editorTextFocus,primary:2048|1024|10,weight:100}})}run(ne,Q){const ie=Oe.get(Q);ie&&ie.trigger({triggerKind:O.WW.Invoke})}}(0,d._K)(Oe.ID,Oe),(0,d.Qr)(qe);const Je=100+75,Ne=d._l.bindToContribution(Oe.get);(0,d.fK)(new Ne({id:"closeParameterHints",precondition:C.Visible,handler:Fe=>Fe.cancel(),kbOpts:{weight:Je,kbExpr:z.u.focus,primary:9,secondary:[1024|9]}})),(0,d.fK)(new Ne({id:"showPrevParameterHint",precondition:g.Ao.and(C.Visible,C.MultipleSignatures),handler:Fe=>Fe.previous(),kbOpts:{weight:Je,kbExpr:z.u.focus,primary:16,secondary:[512|16],mac:{primary:16,secondary:[512|16,256|46]}}})),(0,d.fK)(new Ne({id:"showNextParameterHint",precondition:g.Ao.and(C.Visible,C.MultipleSignatures),handler:Fe=>Fe.next(),kbOpts:{weight:Je,kbExpr:z.u.focus,primary:18,secondary:[512|18],mac:{primary:18,secondary:[512|18,256|44]}}}))},52049:function(Tt,me,a){"use strict";a.d(me,{Fw:function(){return te},Jy:function(){return K},vk:function(){return le},rc:function(){return ee},SC:function(){return ke},M8:function(){return Te},KY:function(){return oe},IH:function(){return Ce},R7:function(){return ye}});var p=a(65321),d=a(90317),z=a(74741),O=a(73046),S=a(41264),j=a(4669),T=a(36248),B=a(16830),F=a(11640),x=a(84527),v=a(73098),g=a(44742),D=a(9917),c=a(24314),C=a(45146);const M=new S.Il(new S.VS(0,122,204)),E={showArrow:!0,showFrame:!0,className:"",frameColor:M,arrowColor:M,keepEditorSelection:!1},_="vs.editor.contrib.zoneWidget";class L{constructor(ne,Q,ie,xe,be,Ge){this.id="",this.domNode=ne,this.afterLineNumber=Q,this.afterColumn=ie,this.heightInLines=xe,this._onDomNodeTop=be,this._onComputedHeight=Ge}onDomNodeTop(ne){this._onDomNodeTop(ne)}onComputedHeight(ne){this._onComputedHeight(ne)}}class N{constructor(ne,Q){this._id=ne,this._domNode=Q}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class b{constructor(ne){this._editor=ne,this._ruleName=b._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),p.uN(this._ruleName)}set color(ne){this._color!==ne&&(this._color=ne,this._updateStyle())}set height(ne){this._height!==ne&&(this._height=ne,this._updateStyle())}_updateStyle(){p.uN(this._ruleName),p.fk(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(ne){ne.column===1&&(ne={lineNumber:ne.lineNumber,column:2}),this._decorations=this._editor.deltaDecorations(this._decorations,[{range:c.e.fromPositions(ne),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}b._IdGenerator=new g.R(".arrow-decoration-");class I{constructor(ne,Q={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new D.SL,this.container=null,this._isShowing=!1,this.editor=ne,this.options=T.I8(Q),T.jB(this.options,E,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(ie=>{const xe=this._getWidth(ie);this.domNode.style.width=xe+"px",this.domNode.style.left=this._getLeft(ie)+"px",this._onWidth(xe)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(ne=>{this._viewZone&&ne.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new b(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(ne){ne.frameColor&&(this.options.frameColor=ne.frameColor),ne.arrowColor&&(this.options.arrowColor=ne.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let ne=this.options.frameColor.toString();this.container.style.borderTopColor=ne,this.container.style.borderBottomColor=ne}if(this._arrow&&this.options.arrowColor){let ne=this.options.arrowColor.toString();this._arrow.color=ne}}_getWidth(ne){return ne.width-ne.minimap.minimapWidth-ne.verticalScrollbarWidth}_getLeft(ne){return ne.minimap.minimapWidth>0&&ne.minimap.minimapLeft===0?ne.minimap.minimapWidth:0}_onViewZoneTop(ne){this.domNode.style.top=ne+"px"}_onViewZoneHeight(ne){if(this.domNode.style.height=`${ne}px`,this.container){let Q=ne-this._decoratingElementsHeight();this.container.style.height=`${Q}px`;const ie=this.editor.getLayoutInfo();this._doLayout(Q,this._getWidth(ie))}this._resizeSash&&this._resizeSash.layout()}get position(){const[ne]=this._positionMarkerId;if(!ne)return;const Q=this.editor.getModel();if(!Q)return;const ie=Q.getDecorationRange(ne);if(!!ie)return ie.getStartPosition()}show(ne,Q){const ie=c.e.isIRange(ne)?c.e.lift(ne):c.e.fromPositions(ne);this._isShowing=!0,this._showImpl(ie,Q),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:ie,options:C.qx.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(ne=>{this._viewZone&&ne.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let ne=this.editor.getOption(59),Q=0;if(this.options.showArrow){let ie=Math.round(ne/3);Q+=2*ie}if(this.options.showFrame){let ie=Math.round(ne/9);Q+=2*ie}return Q}_showImpl(ne,Q){const ie=ne.getStartPosition(),xe=this.editor.getLayoutInfo(),be=this._getWidth(xe);this.domNode.style.width=`${be}px`,this.domNode.style.left=this._getLeft(xe)+"px";const Ge=document.createElement("div");Ge.style.overflow="hidden";const nt=this.editor.getOption(59),_t=Math.max(12,this.editor.getLayoutInfo().height/nt*.8);Q=Math.min(Q,_t);let Ot=0,rn=0;if(this._arrow&&this.options.showArrow&&(Ot=Math.round(nt/3),this._arrow.height=Ot,this._arrow.show(ie)),this.options.showFrame&&(rn=Math.round(nt/9)),this.editor.changeViewZones(Ye=>{this._viewZone&&Ye.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new L(Ge,ie.lineNumber,ie.column,Q,dt=>this._onViewZoneTop(dt),dt=>this._onViewZoneHeight(dt)),this._viewZone.id=Ye.addZone(this._viewZone),this._overlayWidget=new N(_+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const Ye=this.options.frameWidth?this.options.frameWidth:rn;this.container.style.borderTopWidth=Ye+"px",this.container.style.borderBottomWidth=Ye+"px"}let gt=Q*nt-this._decoratingElementsHeight();this.container&&(this.container.style.top=Ot+"px",this.container.style.height=gt+"px",this.container.style.overflow="hidden"),this._doLayout(gt,be),this.options.keepEditorSelection||this.editor.setSelection(ne);const Ue=this.editor.getModel();if(Ue){const Ye=ne.endLineNumber+1;Ye<=Ue.getLineCount()?this.revealLine(Ye,!1):this.revealLine(Ue.getLineCount(),!0)}}revealLine(ne,Q){Q?this.editor.revealLineInCenter(ne,0):this.editor.revealLine(ne,0)}setCssClass(ne,Q){!this.container||(Q&&this.container.classList.remove(Q),this.container.classList.add(ne))}_onWidth(ne){}_doLayout(ne,Q){}_relayout(ne){this._viewZone&&this._viewZone.heightInLines!==ne&&this.editor.changeViewZones(Q=>{this._viewZone&&(this._viewZone.heightInLines=ne,Q.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new v.g(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let ne;this._disposables.add(this._resizeSash.onDidStart(Q=>{this._viewZone&&(ne={startY:Q.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{ne=void 0})),this._disposables.add(this._resizeSash.onDidChange(Q=>{if(ne){let ie=(Q.currentY-ne.startY)/this.editor.getOption(59),xe=ie<0?Math.ceil(ie):Math.floor(ie),be=ne.heightInLines+xe;be>5&&be<35&&this._relayout(be)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const ne=this.editor.getLayoutInfo();return ne.width-ne.minimap.minimapWidth}}var k=a(63580),W=a(58335),q=a(16141),re=a(65026),de=a(72065),pe=a(73910),ae=function(Fe,ne,Q,ie){var xe=arguments.length,be=xe<3?ne:ie===null?ie=Object.getOwnPropertyDescriptor(ne,Q):ie,Ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")be=Reflect.decorate(Fe,ne,Q,ie);else for(var nt=Fe.length-1;nt>=0;nt--)(Ge=Fe[nt])&&(be=(xe<3?Ge(be):xe>3?Ge(ne,Q,be):Ge(ne,Q))||be);return xe>3&&be&&Object.defineProperty(ne,Q,be),be},ue=function(Fe,ne){return function(Q,ie){ne(Q,ie,Fe)}};const te=(0,de.yh)("IPeekViewService");(0,re.z)(te,class{constructor(){this._widgets=new Map}addExclusiveWidget(Fe,ne){const Q=this._widgets.get(Fe);Q&&(Q.listener.dispose(),Q.widget.dispose());const ie=()=>{const xe=this._widgets.get(Fe);xe&&xe.widget===ne&&(xe.listener.dispose(),this._widgets.delete(Fe))};this._widgets.set(Fe,{widget:ne,listener:ne.onDidClose(ie)})}});var K;(function(Fe){Fe.inPeekEditor=new q.uy("inReferenceSearchEditor",!0,k.N("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),Fe.notInPeekEditor=Fe.inPeekEditor.toNegated()})(K||(K={}));let U=class{constructor(ne,Q){ne instanceof x.H&&K.inPeekEditor.bindTo(Q)}dispose(){}};U.ID="editor.contrib.referenceController",U=ae([ue(1,q.i6)],U),(0,B._K)(U.ID,U);function ee(Fe){let ne=Fe.get(F.$).getFocusedCodeEditor();return ne instanceof x.H?ne.getParentEditor():ne}const X={headerBackgroundColor:S.Il.white,primaryHeadingColor:S.Il.fromHex("#333333"),secondaryHeadingColor:S.Il.fromHex("#6c6c6cb3")};let le=class extends I{constructor(ne,Q,ie){super(ne,Q);this.instantiationService=ie,this._onDidClose=new j.Q5,this.onDidClose=this._onDidClose.event,T.jB(this.options,X,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(ne){let Q=this.options;ne.headerBackgroundColor&&(Q.headerBackgroundColor=ne.headerBackgroundColor),ne.primaryHeadingColor&&(Q.primaryHeadingColor=ne.primaryHeadingColor),ne.secondaryHeadingColor&&(Q.secondaryHeadingColor=ne.secondaryHeadingColor),super.style(ne)}_applyStyles(){super._applyStyles();let ne=this.options;this._headElement&&ne.headerBackgroundColor&&(this._headElement.style.backgroundColor=ne.headerBackgroundColor.toString()),this._primaryHeading&&ne.primaryHeadingColor&&(this._primaryHeading.style.color=ne.primaryHeadingColor.toString()),this._secondaryHeading&&ne.secondaryHeadingColor&&(this._secondaryHeading.style.color=ne.secondaryHeadingColor.toString()),this._bodyElement&&ne.frameColor&&(this._bodyElement.style.borderColor=ne.frameColor.toString())}_fillContainer(ne){this.setCssClass("peekview-widget"),this._headElement=p.$(".head"),this._bodyElement=p.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),ne.appendChild(this._headElement),ne.appendChild(this._bodyElement)}_fillHead(ne,Q){const ie=p.$(".peekview-title");this.options.supportOnTitleClick&&(ie.classList.add("clickable"),p.mu(ie,"click",Ge=>this._onTitleClick(Ge))),p.R3(this._headElement,ie),this._fillTitleIcon(ie),this._primaryHeading=p.$("span.filename"),this._secondaryHeading=p.$("span.dirname"),this._metaHeading=p.$("span.meta"),p.R3(ie,this._primaryHeading,this._secondaryHeading,this._metaHeading);const xe=p.$(".peekview-actions");p.R3(this._headElement,xe);const be=this._getActionBarOptions();this._actionbarWidget=new d.o(xe,be),this._disposables.add(this._actionbarWidget),Q||this._actionbarWidget.push(new z.aU("peekview.close",k.N("label.close","Close"),O.lA.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(ne){}_getActionBarOptions(){return{actionViewItemProvider:W.Id.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(ne){}setTitle(ne,Q){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=ne,this._primaryHeading.setAttribute("title",ne),Q?this._secondaryHeading.innerText=Q:p.PO(this._secondaryHeading))}setMetaTitle(ne){this._metaHeading&&(ne?(this._metaHeading.innerText=ne,p.$Z(this._metaHeading)):p.Cp(this._metaHeading))}_doLayout(ne,Q){if(!this._isShowing&&ne<0){this.dispose();return}const ie=Math.ceil(this.editor.getOption(59)*1.2),xe=Math.round(ne-(ie+2));this._doLayoutHead(ie,Q),this._doLayoutBody(xe,Q)}_doLayoutHead(ne,Q){this._headElement&&(this._headElement.style.height=`${ne}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(ne,Q){this._bodyElement&&(this._bodyElement.style.height=`${ne}px`)}};le=ae([ue(2,de.TG)],le);const oe=(0,pe.P6G)("peekViewTitle.background",{dark:(0,pe.ZnX)(pe.c63,.1),light:(0,pe.ZnX)(pe.c63,.1),hc:null},k.N("peekViewTitleBackground","Background color of the peek view title area.")),Ce=(0,pe.P6G)("peekViewTitleLabel.foreground",{dark:S.Il.white,light:S.Il.black,hc:S.Il.white},k.N("peekViewTitleForeground","Color of the peek view title.")),ye=(0,pe.P6G)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},k.N("peekViewTitleInfoForeground","Color of the peek view title info.")),ke=(0,pe.P6G)("peekView.border",{dark:pe.c63,light:pe.c63,hc:pe.lRK},k.N("peekViewBorder","Color of the peek view borders and arrow.")),Te=(0,pe.P6G)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:S.Il.black},k.N("peekViewResultsBackground","Background color of the peek view result list.")),ge=(0,pe.P6G)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:S.Il.white},k.N("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),we=(0,pe.P6G)("peekViewResult.fileForeground",{dark:S.Il.white,light:"#1E1E1E",hc:S.Il.white},k.N("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),ze=(0,pe.P6G)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},k.N("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),Qe=(0,pe.P6G)("peekViewResult.selectionForeground",{dark:S.Il.white,light:"#6C6C6C",hc:S.Il.white},k.N("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),Pe=(0,pe.P6G)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:S.Il.black},k.N("peekViewEditorBackground","Background color of the peek view editor.")),Oe=(0,pe.P6G)("peekViewEditorGutter.background",{dark:Pe,light:Pe,hc:Pe},k.N("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),qe=(0,pe.P6G)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},k.N("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),Je=(0,pe.P6G)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},k.N("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),Ne=(0,pe.P6G)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:pe.xL1},k.N("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."))},83943:function(Tt,me,a){"use strict";a.d(me,{X:function(){return B}});var p=a(88289),d=a(9917),z=a(98401),O=a(65520),S=a(84973),j=a(8625),T=a(97781);class B{constructor(x){this.options=x,this.rangeHighlightDecorationId=void 0}provide(x,v){var g;const D=new d.SL;x.canAcceptInBackground=!!((g=this.options)===null||g===void 0?void 0:g.canAcceptInBackground),x.matchOnLabel=x.matchOnDescription=x.matchOnDetail=x.sortByLabel=!1;const c=D.add(new d.XK);return c.value=this.doProvide(x,v),D.add(this.onDidActiveTextEditorControlChange(()=>{c.value=void 0,c.value=this.doProvide(x,v)})),D}doProvide(x,v){const g=new d.SL,D=this.activeTextEditorControl;if(D&&this.canProvideWithTextEditor(D)){const c={editor:D},C=(0,O.Pi)(D);if(C){let M=(0,z.f6)(D.saveViewState());g.add(C.onDidChangeCursorPosition(()=>{M=(0,z.f6)(D.saveViewState())})),c.restoreViewState=()=>{M&&D===this.activeTextEditorControl&&D.restoreViewState(M)},g.add((0,p.I)(v.onCancellationRequested)(()=>{var E;return(E=c.restoreViewState)===null||E===void 0?void 0:E.call(c)}))}g.add((0,d.OF)(()=>this.clearDecorations(D))),g.add(this.provideWithTextEditor(c,x,v))}else g.add(this.provideWithoutTextEditor(x,v));return g}canProvideWithTextEditor(x){return!0}gotoLocation({editor:x},v){x.setSelection(v.range),x.revealRangeInCenter(v.range,0),v.preserveFocus||x.focus()}getModel(x){var v;return(0,O.QI)(x)?(v=x.getModel())===null||v===void 0?void 0:v.modified:x.getModel()}addDecorations(x,v){x.changeDecorations(g=>{const D=[];this.rangeHighlightDecorationId&&(D.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),D.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const c=[{range:v,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:v,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,T.EN)(j.m9),position:S.sh.Full}}}],[C,M]=g.deltaDecorations(D,c);this.rangeHighlightDecorationId={rangeHighlightId:C,overviewRulerDecorationId:M}})}clearDecorations(x){const v=this.rangeHighlightDecorationId;v&&(x.changeDecorations(g=>{g.deltaDecorations([v.overviewRulerDecorationId,v.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}},32894:function(Tt,me,a){"use strict";a.r(me),a.d(me,{RenameAction:function(){return ye},rename:function(){return oe}});var p=a(85152),d=a(15393),z=a(71050),O=a(17301),S=a(9917),j=a(98401),T=a(70666),B=a(16467),F=a(16830),x=a(66007),v=a(11640),g=a(50187),D=a(24314),c=a(29102),C=a(71765),M=a(27753),E=a(63580),_=a(23193),L=a(16141),N=a(72065),b=a(43557),I=a(59422),k=a(90535),W=a(89872),q=a(91847),re=a(73910),de=a(97781),pe=function(Te,ge,we,ze){var Qe=arguments.length,Pe=Qe<3?ge:ze===null?ze=Object.getOwnPropertyDescriptor(ge,we):ze,Oe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Pe=Reflect.decorate(Te,ge,we,ze);else for(var qe=Te.length-1;qe>=0;qe--)(Oe=Te[qe])&&(Pe=(Qe<3?Oe(Pe):Qe>3?Oe(ge,we,Pe):Oe(ge,we))||Pe);return Qe>3&&Pe&&Object.defineProperty(ge,we,Pe),Pe},ae=function(Te,ge){return function(we,ze){ge(we,ze,Te)}};const ue=new L.uy("renameInputVisible",!1,(0,E.N)("renameInputVisible","Whether the rename input widget is visible"));let te=class{constructor(ge,we,ze,Qe,Pe){this._editor=ge,this._acceptKeybindings=we,this._themeService=ze,this._keybindingService=Qe,this._disposables=new S.SL,this.allowEditorOverflow=!0,this._visibleContextKey=ue.bindTo(Pe),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(Oe=>{Oe.hasChanged(44)&&this._updateFont()})),this._disposables.add(ze.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,E.N)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const ge=()=>{var we,ze;const[Qe,Pe]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(Qe),this._label.innerText=(0,E.N)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(we=this._keybindingService.lookupKeybinding(Qe))===null||we===void 0?void 0:we.getLabel(),(ze=this._keybindingService.lookupKeybinding(Pe))===null||ze===void 0?void 0:ze.getLabel())};ge(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(ge)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(ge){var we,ze,Qe,Pe;if(!this._input||!this._domNode)return;const Oe=ge.getColor(re.rh);this._domNode.style.backgroundColor=String((we=ge.getColor(re.D0T))!==null&&we!==void 0?we:""),this._domNode.style.boxShadow=Oe?` 0 0 8px 2px ${Oe}`:"",this._domNode.style.color=String((ze=ge.getColor(re.zJb))!==null&&ze!==void 0?ze:""),this._input.style.backgroundColor=String((Qe=ge.getColor(re.sEe))!==null&&Qe!==void 0?Qe:"");const qe=ge.getColor(re.dt_);this._input.style.borderWidth=qe?"1px":"0px",this._input.style.borderStyle=qe?"solid":"none",this._input.style.borderColor=(Pe=qe==null?void 0:qe.toString())!==null&&Pe!==void 0?Pe:"none"}_updateFont(){if(!this._input||!this._label)return;const ge=this._editor.getOption(44);this._input.style.fontFamily=ge.fontFamily,this._input.style.fontWeight=ge.fontWeight,this._input.style.fontSize=`${ge.fontSize}px`,this._label.style.fontSize=`${ge.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(ge){ge||this.cancelInput(!0)}acceptInput(ge){this._currentAcceptInput&&this._currentAcceptInput(ge)}cancelInput(ge){this._currentCancelInput&&this._currentCancelInput(ge)}getInput(ge,we,ze,Qe,Pe,Oe){this._domNode.classList.toggle("preview",Pe),this._position=new g.L(ge.startLineNumber,ge.startColumn),this._input.value=we,this._input.setAttribute("selectionStart",ze.toString()),this._input.setAttribute("selectionEnd",Qe.toString()),this._input.size=Math.max((ge.endColumn-ge.startColumn)*1.1,20);const qe=new S.SL;return new Promise(Je=>{this._currentCancelInput=Ne=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,Je(Ne),!0),this._currentAcceptInput=Ne=>{if(this._input.value.trim().length===0||this._input.value===we){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,Je({newName:this._input.value,wantsPreview:Pe&&Ne})},qe.add(Oe.onCancellationRequested(()=>this.cancelInput(!0))),qe.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{qe.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};te=pe([ae(2,de.XE),ae(3,q.d),ae(4,L.i6)],te);var K=a(71922),U=function(Te,ge,we,ze){var Qe=arguments.length,Pe=Qe<3?ge:ze===null?ze=Object.getOwnPropertyDescriptor(ge,we):ze,Oe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Pe=Reflect.decorate(Te,ge,we,ze);else for(var qe=Te.length-1;qe>=0;qe--)(Oe=Te[qe])&&(Pe=(Qe<3?Oe(Pe):Qe>3?Oe(ge,we,Pe):Oe(ge,we))||Pe);return Qe>3&&Pe&&Object.defineProperty(ge,we,Pe),Pe},ee=function(Te,ge){return function(we,ze){ge(we,ze,Te)}},X=function(Te,ge,we,ze){function Qe(Pe){return Pe instanceof we?Pe:new we(function(Oe){Oe(Pe)})}return new(we||(we=Promise))(function(Pe,Oe){function qe(Fe){try{Ne(ze.next(Fe))}catch(ne){Oe(ne)}}function Je(Fe){try{Ne(ze.throw(Fe))}catch(ne){Oe(ne)}}function Ne(Fe){Fe.done?Pe(Fe.value):Qe(Fe.value).then(qe,Je)}Ne((ze=ze.apply(Te,ge||[])).next())})};class le{constructor(ge,we,ze){this.model=ge,this.position=we,this._providerRenameIdx=0,this._providers=ze.ordered(ge)}hasProvider(){return this._providers.length>0}resolveRenameLocation(ge){return X(this,void 0,void 0,function*(){const we=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const Qe=this._providers[this._providerRenameIdx];if(!Qe.resolveRenameLocation)break;let Pe=yield Qe.resolveRenameLocation(this.model,this.position,ge);if(!!Pe){if(Pe.rejectReason){we.push(Pe.rejectReason);continue}return Pe}}const ze=this.model.getWordAtPosition(this.position);return ze?{range:new D.e(this.position.lineNumber,ze.startColumn,this.position.lineNumber,ze.endColumn),text:ze.word,rejectReason:we.length>0?we.join(`
`):void 0}:{range:D.e.fromPositions(this.position),text:"",rejectReason:we.length>0?we.join(`
`):void 0}})}provideRenameEdits(ge,we){return X(this,void 0,void 0,function*(){return this._provideRenameEdits(ge,this._providerRenameIdx,[],we)})}_provideRenameEdits(ge,we,ze,Qe){return X(this,void 0,void 0,function*(){const Pe=this._providers[we];if(!Pe)return{edits:[],rejectReason:ze.join(`
`)};const Oe=yield Pe.provideRenameEdits(this.model,this.position,ge,Qe);if(Oe){if(Oe.rejectReason)return this._provideRenameEdits(ge,we+1,ze.concat(Oe.rejectReason),Qe)}else return this._provideRenameEdits(ge,we+1,ze.concat(E.N("no result","No result.")),Qe);return Oe})}}function oe(Te,ge,we,ze){return X(this,void 0,void 0,function*(){const Qe=new le(ge,we,Te),Pe=yield Qe.resolveRenameLocation(z.T.None);return(Pe==null?void 0:Pe.rejectReason)?{edits:[],rejectReason:Pe.rejectReason}:Qe.provideRenameEdits(ze,z.T.None)})}let Ce=class wS{constructor(ge,we,ze,Qe,Pe,Oe,qe,Je){this.editor=ge,this._instaService=we,this._notificationService=ze,this._bulkEditService=Qe,this._progressService=Pe,this._logService=Oe,this._configService=qe,this._languageFeaturesService=Je,this._dispoableStore=new S.SL,this._cts=new z.A,this._renameInputField=this._dispoableStore.add(new d.Ue(()=>this._dispoableStore.add(this._instaService.createInstance(te,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(ge){return ge.getContribution(wS.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){var ge,we;return X(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const ze=this.editor.getPosition(),Qe=new le(this.editor.getModel(),ze,this._languageFeaturesService.renameProvider);if(!Qe.hasProvider())return;this._cts=new B.Dl(this.editor,4|1);let Pe;try{const Q=Qe.resolveRenameLocation(this._cts.token);this._progressService.showWhile(Q,250),Pe=yield Q}catch(Q){(ge=M.O.get(this.editor))===null||ge===void 0||ge.showMessage(Q||E.N("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),ze);return}if(!Pe)return;if(Pe.rejectReason){(we=M.O.get(this.editor))===null||we===void 0||we.showMessage(Pe.rejectReason,ze);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new B.Dl(this.editor,4|1,Pe.range);let Oe=this.editor.getSelection(),qe=0,Je=Pe.text.length;!D.e.isEmpty(Oe)&&!D.e.spansMultipleLines(Oe)&&D.e.containsRange(Pe.range,Oe)&&(qe=Math.max(0,Oe.startColumn-Pe.range.startColumn),Je=Math.min(Pe.range.endColumn,Oe.endColumn)-Pe.range.startColumn);const Ne=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),Fe=yield this._renameInputField.value.getInput(Pe.range,Pe.text,qe,Je,Ne,this._cts.token);if(typeof Fe=="boolean"){Fe&&this.editor.focus();return}this.editor.focus();const ne=(0,d.eP)(Qe.provideRenameEdits(Fe.newName,this._cts.token),this._cts.token).then(Q=>X(this,void 0,void 0,function*(){if(!(!Q||!this.editor.hasModel())){if(Q.rejectReason){this._notificationService.info(Q.rejectReason);return}this.editor.setSelection(D.e.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(x.fo.convert(Q),{editor:this.editor,showPreview:Fe.wantsPreview,label:E.N("label","Renaming '{0}'",Pe==null?void 0:Pe.text),quotableLabel:E.N("quotableLabel","Renaming {0}",Pe==null?void 0:Pe.text)}).then(ie=>{ie.ariaSummary&&(0,p.Z9)(E.N("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",Pe.text,Fe.newName,ie.ariaSummary))}).catch(ie=>{this._notificationService.error(E.N("rename.failedApply","Rename failed to apply edits")),this._logService.error(ie)})}}),Q=>{this._notificationService.error(E.N("rename.failed","Rename failed to compute edits")),this._logService.error(Q)});return this._progressService.showWhile(ne,250),ne})}acceptRenameInput(ge){this._renameInputField.value.acceptInput(ge)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};Ce.ID="editor.contrib.renameController",Ce=U([ee(1,N.TG),ee(2,I.lT),ee(3,x.vu),ee(4,k.ek),ee(5,b.VZ),ee(6,C.V),ee(7,K.p)],Ce);class ye extends F.R6{constructor(){super({id:"editor.action.rename",label:E.N("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:L.Ao.and(c.u.writable,c.u.hasRenameProvider),kbOpts:{kbExpr:c.u.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(ge,we){const ze=ge.get(v.$),[Qe,Pe]=Array.isArray(we)&&we||[void 0,void 0];return T.o.isUri(Qe)&&g.L.isIPosition(Pe)?ze.openCodeEditor({resource:Qe},ze.getActiveCodeEditor()).then(Oe=>{!Oe||(Oe.setPosition(Pe),Oe.invokeWithinContext(qe=>(this.reportTelemetry(qe,Oe),this.run(qe,Oe))))},O.dL):super.runCommand(ge,we)}run(ge,we){const ze=Ce.get(we);return ze?ze.run():Promise.resolve()}}(0,F._K)(Ce.ID,Ce),(0,F.Qr)(ye);const ke=F._l.bindToContribution(Ce.get);(0,F.fK)(new ke({id:"acceptRenameInput",precondition:ue,handler:Te=>Te.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:c.u.focus,primary:3}})),(0,F.fK)(new ke({id:"acceptRenameInputWithPreview",precondition:L.Ao.and(ue,L.Ao.has("config.editor.rename.enablePreview")),handler:Te=>Te.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:c.u.focus,primary:1024+3}})),(0,F.fK)(new ke({id:"cancelRenameInput",precondition:ue,handler:Te=>Te.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:c.u.focus,primary:9,secondary:[1024|9]}})),(0,F.sb)("_executeDocumentRenameProvider",function(Te,ge,we,...ze){const[Qe]=ze;(0,j.p_)(typeof Qe=="string");const{renameProvider:Pe}=Te.get(K.p);return oe(Pe,ge,we,Qe)}),(0,F.sb)("_executePrepareRename",function(Te,ge,we){return X(this,void 0,void 0,function*(){const{renameProvider:ze}=Te.get(K.p),Pe=yield new le(ge,we,ze).resolveRenameLocation(z.T.None);if(Pe==null?void 0:Pe.rejectReason)throw new Error(Pe.rejectReason);return Pe})}),W.B.as(_.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:E.N("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})},79694:function(Tt,me,a){"use strict";a.d(me,{x:function(){return S}});var p=a(91741),d=a(50187),z=a(24314),O=function(j,T,B,F){function x(v){return v instanceof B?v:new B(function(g){g(v)})}return new(B||(B=Promise))(function(v,g){function D(M){try{C(F.next(M))}catch(E){g(E)}}function c(M){try{C(F.throw(M))}catch(E){g(E)}}function C(M){M.done?v(M.value):x(M.value).then(D,c)}C((F=F.apply(j,T||[])).next())})};class S{provideSelectionRanges(T,B){return O(this,void 0,void 0,function*(){const F=[];for(const x of B){const v=[];F.push(v);const g=new Map;yield new Promise(D=>S._bracketsRightYield(D,0,T,x,g)),yield new Promise(D=>S._bracketsLeftYield(D,0,T,x,g,v))}return F})}static _bracketsRightYield(T,B,F,x,v){const g=new Map,D=Date.now();for(;;){if(B>=S._maxRounds){T();break}if(!x){T();break}let c=F.bracketPairs.findNextBracket(x);if(!c){T();break}if(Date.now()-D>S._maxDuration){setTimeout(()=>S._bracketsRightYield(T,B+1,F,x,v));break}const M=c.close[0];if(c.isOpen){let E=g.has(M)?g.get(M):0;g.set(M,E+1)}else{let E=g.has(M)?g.get(M):0;if(E-=1,g.set(M,Math.max(0,E)),E<0){let _=v.get(M);_||(_=new p.S,v.set(M,_)),_.push(c.range)}}x=c.range.getEndPosition()}}static _bracketsLeftYield(T,B,F,x,v,g){const D=new Map,c=Date.now();for(;;){if(B>=S._maxRounds&&v.size===0){T();break}if(!x){T();break}let C=F.bracketPairs.findPrevBracket(x);if(!C){T();break}if(Date.now()-c>S._maxDuration){setTimeout(()=>S._bracketsLeftYield(T,B+1,F,x,v,g));break}const E=C.close[0];if(C.isOpen){let _=D.has(E)?D.get(E):0;if(_-=1,D.set(E,Math.max(0,_)),_<0){let L=v.get(E);if(L){let N=L.shift();L.size===0&&v.delete(E);const b=z.e.fromPositions(C.range.getEndPosition(),N.getStartPosition()),I=z.e.fromPositions(C.range.getStartPosition(),N.getEndPosition());g.push({range:b}),g.push({range:I}),S._addBracketLeading(F,I,g)}}}else{let _=D.has(E)?D.get(E):0;D.set(E,_+1)}x=C.range.getStartPosition()}}static _addBracketLeading(T,B,F){if(B.startLineNumber===B.endLineNumber)return;const x=B.startLineNumber,v=T.getLineFirstNonWhitespaceColumn(x);v!==0&&v!==B.startColumn&&(F.push({range:z.e.fromPositions(new d.L(x,v),B.getEndPosition())}),F.push({range:z.e.fromPositions(new d.L(x,1),B.getEndPosition())}));const g=x-1;if(g>0){const D=T.getLineFirstNonWhitespaceColumn(g);D===B.startColumn&&D!==T.getLineLastNonWhitespaceColumn(g)&&(F.push({range:z.e.fromPositions(new d.L(g,D),B.getEndPosition())}),F.push({range:z.e.fromPositions(new d.L(g,1),B.getEndPosition())}))}}}S._maxDuration=30,S._maxRounds=2},102:function(Tt,me,a){"use strict";a.r(me),a.d(me,{provideSelectionRanges:function(){return de}});var p=a(9488),d=a(71050),z=a(17301),O=a(16830),S=a(50187),j=a(24314),T=a(3860),B=a(29102),F=a(79694),x=a(25924);class v{provideSelectionRanges(ae,ue){const te=[];for(const K of ue){const U=[];te.push(U),this._addInWordRanges(U,ae,K),this._addWordRanges(U,ae,K),this._addWhitespaceLine(U,ae,K),U.push({range:ae.getFullModelRange()})}return te}_addInWordRanges(ae,ue,te){const K=ue.getWordAtPosition(te);if(!K)return;let{word:U,startColumn:ee}=K,X=te.column-ee,le=X,oe=X,Ce=0;for(;le>=0;le--){let ye=U.charCodeAt(le);if(le!==X&&(ye===95||ye===45))break;if((0,x.mK)(ye)&&(0,x.df)(Ce))break;Ce=ye}for(le+=1;oe<U.length;oe++){let ye=U.charCodeAt(oe);if((0,x.df)(ye)&&(0,x.mK)(Ce))break;if(ye===95||ye===45)break;Ce=ye}le<oe&&ae.push({range:new j.e(te.lineNumber,ee+le,te.lineNumber,ee+oe)})}_addWordRanges(ae,ue,te){const K=ue.getWordAtPosition(te);K&&ae.push({range:new j.e(te.lineNumber,K.startColumn,te.lineNumber,K.endColumn)})}_addWhitespaceLine(ae,ue,te){ue.getLineLength(te.lineNumber)>0&&ue.getLineFirstNonWhitespaceColumn(te.lineNumber)===0&&ue.getLineLastNonWhitespaceColumn(te.lineNumber)===0&&ae.push({range:new j.e(te.lineNumber,1,te.lineNumber,ue.getLineMaxColumn(te.lineNumber))})}}var g=a(63580),D=a(84144),c=a(94565),C=a(71922),M=a(88216),E=a(98401),_=a(70666),L=function(pe,ae,ue,te){var K=arguments.length,U=K<3?ae:te===null?te=Object.getOwnPropertyDescriptor(ae,ue):te,ee;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(pe,ae,ue,te);else for(var X=pe.length-1;X>=0;X--)(ee=pe[X])&&(U=(K<3?ee(U):K>3?ee(ae,ue,U):ee(ae,ue))||U);return K>3&&U&&Object.defineProperty(ae,ue,U),U},N=function(pe,ae){return function(ue,te){ae(ue,te,pe)}},b=function(pe,ae,ue,te){function K(U){return U instanceof ue?U:new ue(function(ee){ee(U)})}return new(ue||(ue=Promise))(function(U,ee){function X(Ce){try{oe(te.next(Ce))}catch(ye){ee(ye)}}function le(Ce){try{oe(te.throw(Ce))}catch(ye){ee(ye)}}function oe(Ce){Ce.done?U(Ce.value):K(Ce.value).then(X,le)}oe((te=te.apply(pe,ae||[])).next())})};class I{constructor(ae,ue){this.index=ae,this.ranges=ue}mov(ae){let ue=this.index+(ae?1:-1);if(ue<0||ue>=this.ranges.length)return this;const te=new I(ue,this.ranges);return te.ranges[ue].equalsRange(this.ranges[this.index])?te.mov(ae):te}}let k=class SS{constructor(ae,ue){this._editor=ae,this._languageFeaturesService=ue,this._ignoreSelection=!1}static get(ae){return ae.getContribution(SS.ID)}dispose(){var ae;(ae=this._selectionListener)===null||ae===void 0||ae.dispose()}run(ae){return b(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const ue=this._editor.getSelections(),te=this._editor.getModel();if(this._state||(yield de(this._languageFeaturesService.selectionRangeProvider,te,ue.map(U=>U.getPosition()),this._editor.getOption(102),d.T.None).then(U=>{var ee;if(!(!p.Of(U)||U.length!==ue.length)&&!(!this._editor.hasModel()||!p.fS(this._editor.getSelections(),ue,(X,le)=>X.equalsSelection(le)))){for(let X=0;X<U.length;X++)U[X]=U[X].filter(le=>le.containsPosition(ue[X].getStartPosition())&&le.containsPosition(ue[X].getEndPosition())),U[X].unshift(ue[X]);this._state=U.map(X=>new I(0,X)),(ee=this._selectionListener)===null||ee===void 0||ee.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var X;this._ignoreSelection||((X=this._selectionListener)===null||X===void 0||X.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(U=>U.mov(ae));const K=this._state.map(U=>T.Y.fromPositions(U.ranges[U.index].getStartPosition(),U.ranges[U.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(K)}finally{this._ignoreSelection=!1}})}};k.ID="editor.contrib.smartSelectController",k=L([N(1,C.p)],k);class W extends O.R6{constructor(ae,ue){super(ue);this._forward=ae}run(ae,ue){return b(this,void 0,void 0,function*(){let te=k.get(ue);te&&(yield te.run(this._forward))})}}class q extends W{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:g.N("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:B.u.editorTextFocus,primary:1024|512|17,mac:{primary:2048|256|1024|17,secondary:[256|1024|17]},weight:100},menuOpts:{menuId:D.eH.MenubarSelectionMenu,group:"1_basic",title:g.N({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}c.P0.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class re extends W{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:g.N("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:B.u.editorTextFocus,primary:1024|512|15,mac:{primary:2048|256|1024|15,secondary:[256|1024|15]},weight:100},menuOpts:{menuId:D.eH.MenubarSelectionMenu,group:"1_basic",title:g.N({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}(0,O._K)(k.ID,k),(0,O.Qr)(q),(0,O.Qr)(re);function de(pe,ae,ue,te,K){return b(this,void 0,void 0,function*(){const U=pe.all(ae).concat(new v);U.length===1&&U.unshift(new F.x);let ee=[],X=[];for(const le of U)ee.push(Promise.resolve(le.provideSelectionRanges(ae,ue,K)).then(oe=>{if(p.Of(oe)&&oe.length===ue.length)for(let Ce=0;Ce<ue.length;Ce++){X[Ce]||(X[Ce]=[]);for(const ye of oe[Ce])j.e.isIRange(ye.range)&&j.e.containsPosition(ye.range,ue[Ce])&&X[Ce].push(j.e.lift(ye.range))}},z.Cp));return yield Promise.all(ee),X.map(le=>{if(le.length===0)return[];le.sort((ke,Te)=>S.L.isBefore(ke.getStartPosition(),Te.getStartPosition())?1:S.L.isBefore(Te.getStartPosition(),ke.getStartPosition())||S.L.isBefore(ke.getEndPosition(),Te.getEndPosition())?-1:S.L.isBefore(Te.getEndPosition(),ke.getEndPosition())?1:0);let oe=[],Ce;for(const ke of le)(!Ce||j.e.containsRange(ke,Ce)&&!j.e.equalsRange(ke,Ce))&&(oe.push(ke),Ce=ke);if(!te.selectLeadingAndTrailingWhitespace)return oe;let ye=[oe[0]];for(let ke=1;ke<oe.length;ke++){const Te=oe[ke-1],ge=oe[ke];if(ge.startLineNumber!==Te.startLineNumber||ge.endLineNumber!==Te.endLineNumber){const we=new j.e(Te.startLineNumber,ae.getLineFirstNonWhitespaceColumn(Te.startLineNumber),Te.endLineNumber,ae.getLineLastNonWhitespaceColumn(Te.endLineNumber));we.containsRange(Te)&&!we.equalsRange(Te)&&ge.containsRange(we)&&!ge.equalsRange(we)&&ye.push(we);const ze=new j.e(Te.startLineNumber,1,Te.endLineNumber,ae.getLineMaxColumn(Te.endLineNumber));ze.containsRange(Te)&&!ze.equalsRange(we)&&ge.containsRange(ze)&&!ge.equalsRange(ze)&&ye.push(ze)}ye.push(ge)}return ye})})}c.P0.registerCommand("_executeSelectionRangeProvider",function(pe,...ae){return b(this,void 0,void 0,function*(){const[ue,te]=ae;(0,E.p_)(_.o.isUri(ue));const K=pe.get(C.p).selectionRangeProvider,U=yield pe.get(M.S).createModelReference(ue);try{return de(K,U.object.textEditorModel,te,{selectLeadingAndTrailingWhitespace:!0},d.T.None)}finally{U.dispose()}})})},98762:function(Tt,me,a){"use strict";a.r(me),a.d(me,{SnippetController2:function(){return C}});var p=a(9917),d=a(16830),z=a(24314),O=a(3860),S=a(29102),j=a(55621),T=a(63580),B=a(16141),F=a(72065),x=a(43557),v=a(6769),g=function(E,_,L,N){var b=arguments.length,I=b<3?_:N===null?N=Object.getOwnPropertyDescriptor(_,L):N,k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(E,_,L,N);else for(var W=E.length-1;W>=0;W--)(k=E[W])&&(I=(b<3?k(I):b>3?k(_,L,I):k(_,L))||I);return b>3&&I&&Object.defineProperty(_,L,I),I},D=function(E,_){return function(L,N){_(L,N,E)}};const c={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let C=class Jg{constructor(_,L,N,b){this._editor=_,this._instantiationService=L,this._logService=N,this._snippetListener=new p.SL,this._modelVersionId=-1,this._inSnippet=Jg.InSnippetMode.bindTo(b),this._hasNextTabstop=Jg.HasNextTabstop.bindTo(b),this._hasPrevTabstop=Jg.HasPrevTabstop.bindTo(b)}static get(_){return _.getContribution(Jg.ID)}dispose(){var _;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(_=this._session)===null||_===void 0||_.dispose(),this._snippetListener.dispose()}insert(_,L){try{this._doInsert(_,typeof L=="undefined"?c:Object.assign(Object.assign({},c),L))}catch(N){this.cancel(),this._logService.error(N),this._logService.error("snippet_error"),this._logService.error("insert_template=",_),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(_,L){!this._editor.hasModel()||(this._snippetListener.clear(),L.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(_,L):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new v.l(this._editor,_,L),this._session.insert()),L.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(N=>N.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:_}=this._session;if(!_){this._currentChoice=void 0;return}if(this._currentChoice!==_){this._currentChoice=_,this._editor.setSelections(this._editor.getSelections().map(N=>O.Y.fromPositions(N.getStartPosition())));const[L]=_.options;this._instantiationService.invokeFunction(j.i5,this._editor,_.options.map((N,b)=>({kind:13,label:N.value,insertText:N.value,sortText:"a".repeat(b+1),range:z.e.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,L.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(_=!1){var L;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(L=this._session)===null||L===void 0||L.dispose(),this._session=void 0,this._modelVersionId=-1,_&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};C.ID="snippetController2",C.InSnippetMode=new B.uy("inSnippetMode",!1,(0,T.N)("inSnippetMode","Whether the editor in current in snippet mode")),C.HasNextTabstop=new B.uy("hasNextTabstop",!1,(0,T.N)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),C.HasPrevTabstop=new B.uy("hasPrevTabstop",!1,(0,T.N)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),C=g([D(1,F.TG),D(2,x.VZ),D(3,B.i6)],C),(0,d._K)(C.ID,C);const M=d._l.bindToContribution(C.get);(0,d.fK)(new M({id:"jumpToNextSnippetPlaceholder",precondition:B.Ao.and(C.InSnippetMode,C.HasNextTabstop),handler:E=>E.next(),kbOpts:{weight:100+30,kbExpr:S.u.editorTextFocus,primary:2}})),(0,d.fK)(new M({id:"jumpToPrevSnippetPlaceholder",precondition:B.Ao.and(C.InSnippetMode,C.HasPrevTabstop),handler:E=>E.prev(),kbOpts:{weight:100+30,kbExpr:S.u.editorTextFocus,primary:1024|2}})),(0,d.fK)(new M({id:"leaveSnippet",precondition:C.InSnippetMode,handler:E=>E.cancel(!0),kbOpts:{weight:100+30,kbExpr:S.u.editorTextFocus,primary:9,secondary:[1024|9]}})),(0,d.fK)(new M({id:"acceptSnippet",precondition:C.InSnippetMode,handler:E=>E.finish()}))},35084:function(Tt,me,a){"use strict";a.d(me,{xv:function(){return z},Vm:function(){return S},Lv:function(){return j},Yj:function(){return g}});class p{constructor(){this.value="",this.pos=0}static isDigitCharacter(c){return c>=48&&c<=57}static isVariableCharacter(c){return c===95||c>=97&&c<=122||c>=65&&c<=90}text(c){this.value=c,this.pos=0}tokenText(c){return this.value.substr(c.pos,c.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let c=this.pos,C=0,M=this.value.charCodeAt(c),E;if(E=p._table[M],typeof E=="number")return this.pos+=1,{type:E,pos:c,len:1};if(p.isDigitCharacter(M)){E=8;do C+=1,M=this.value.charCodeAt(c+C);while(p.isDigitCharacter(M));return this.pos+=C,{type:E,pos:c,len:C}}if(p.isVariableCharacter(M)){E=9;do M=this.value.charCodeAt(c+ ++C);while(p.isVariableCharacter(M)||p.isDigitCharacter(M));return this.pos+=C,{type:E,pos:c,len:C}}E=10;do C+=1,M=this.value.charCodeAt(c+C);while(!isNaN(M)&&typeof p._table[M]=="undefined"&&!p.isDigitCharacter(M)&&!p.isVariableCharacter(M));return this.pos+=C,{type:E,pos:c,len:C}}}p._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class d{constructor(){this._children=[]}appendChild(c){return c instanceof z&&this._children[this._children.length-1]instanceof z?this._children[this._children.length-1].value+=c.value:(c.parent=this,this._children.push(c)),this}replace(c,C){const{parent:M}=c,E=M.children.indexOf(c),_=M.children.slice(0);_.splice(E,1,...C),M._children=_,function L(N,b){for(const I of N)I.parent=b,L(I.children,I)}(C,M)}get children(){return this._children}get snippet(){let c=this;for(;;){if(!c)return;if(c instanceof v)return c;c=c.parent}}toString(){return this.children.reduce((c,C)=>c+C.toString(),"")}len(){return 0}}class z extends d{constructor(c){super();this.value=c}toString(){return this.value}len(){return this.value.length}clone(){return new z(this.value)}}class O extends d{}class S extends O{constructor(c){super();this.index=c}static compareByIndex(c,C){return c.index===C.index?0:c.isFinalTabstop?1:C.isFinalTabstop||c.index<C.index?-1:c.index>C.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof j?this._children[0]:void 0}clone(){let c=new S(this.index);return this.transform&&(c.transform=this.transform.clone()),c._children=this.children.map(C=>C.clone()),c}}class j extends d{constructor(){super(...arguments);this.options=[]}appendChild(c){return c instanceof z&&(c.parent=this,this.options.push(c)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let c=new j;return this.options.forEach(c.appendChild,c),c}}class T extends d{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(c){const C=this;let M=!1,E=c.replace(this.regexp,function(){return M=!0,C._replace(Array.prototype.slice.call(arguments,0,-2))});return!M&&this._children.some(_=>_ instanceof B&&Boolean(_.elseValue))&&(E=this._replace([])),E}_replace(c){let C="";for(const M of this._children)if(M instanceof B){let E=c[M.index]||"";E=M.resolve(E),C+=E}else C+=M.toString();return C}toString(){return""}clone(){let c=new T;return c.regexp=new RegExp(this.regexp.source,""+(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),c._children=this.children.map(C=>C.clone()),c}}class B extends d{constructor(c,C,M,E){super();this.index=c,this.shorthandName=C,this.ifValue=M,this.elseValue=E}resolve(c){return this.shorthandName==="upcase"?c?c.toLocaleUpperCase():"":this.shorthandName==="downcase"?c?c.toLocaleLowerCase():"":this.shorthandName==="capitalize"?c?c[0].toLocaleUpperCase()+c.substr(1):"":this.shorthandName==="pascalcase"?c?this._toPascalCase(c):"":this.shorthandName==="camelcase"?c?this._toCamelCase(c):"":Boolean(c)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(c)&&typeof this.elseValue=="string"?this.elseValue:c||""}_toPascalCase(c){const C=c.match(/[a-z0-9]+/gi);return C?C.map(M=>M.charAt(0).toUpperCase()+M.substr(1).toLowerCase()).join(""):c}_toCamelCase(c){const C=c.match(/[a-z0-9]+/gi);return C?C.map((M,E)=>E===0?M.toLowerCase():M.charAt(0).toUpperCase()+M.substr(1).toLowerCase()).join(""):c}clone(){return new B(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class F extends O{constructor(c){super();this.name=c}resolve(c){let C=c.resolve(this);return this.transform&&(C=this.transform.resolve(C||"")),C!==void 0?(this._children=[new z(C)],!0):!1}clone(){const c=new F(this.name);return this.transform&&(c.transform=this.transform.clone()),c._children=this.children.map(C=>C.clone()),c}}function x(D,c){const C=[...D];for(;C.length>0;){const M=C.shift();if(!c(M))break;C.unshift(...M.children)}}class v extends d{get placeholderInfo(){if(!this._placeholders){let c=[],C;this.walk(function(M){return M instanceof S&&(c.push(M),C=!C||C.index<M.index?M:C),!0}),this._placeholders={all:c,last:C}}return this._placeholders}get placeholders(){const{all:c}=this.placeholderInfo;return c}offset(c){let C=0,M=!1;return this.walk(E=>E===c?(M=!0,!1):(C+=E.len(),!0)),M?C:-1}fullLen(c){let C=0;return x([c],M=>(C+=M.len(),!0)),C}enclosingPlaceholders(c){let C=[],{parent:M}=c;for(;M;)M instanceof S&&C.push(M),M=M.parent;return C}resolveVariables(c){return this.walk(C=>(C instanceof F&&C.resolve(c)&&(this._placeholders=void 0),!0)),this}appendChild(c){return this._placeholders=void 0,super.appendChild(c)}replace(c,C){return this._placeholders=void 0,super.replace(c,C)}clone(){let c=new v;return this._children=this.children.map(C=>C.clone()),c}walk(c){x(this.children,c)}}class g{constructor(){this._scanner=new p,this._token={type:14,pos:0,len:0}}static escape(c){return c.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(c){return/\${?CLIPBOARD/.test(c)}parse(c,C,M){this._scanner.text(c),this._token=this._scanner.next();const E=new v;for(;this._parse(E););const _=new Map,L=[];let N=0;E.walk(b=>(b instanceof S&&(N+=1,b.isFinalTabstop?_.set(0,void 0):!_.has(b.index)&&b.children.length>0?_.set(b.index,b.children):L.push(b)),!0));for(const b of L){const I=_.get(b.index);if(I){const k=new S(b.index);k.transform=b.transform;for(const W of I)k.appendChild(W.clone());E.replace(b,[k])}}return M||(M=N>0&&C),!_.has(0)&&M&&E.appendChild(new S(0)),E}_accept(c,C){if(c===void 0||this._token.type===c){let M=C?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),M}return!1}_backTo(c){return this._scanner.pos=c.pos+c.len,this._token=c,!1}_until(c){const C=this._token;for(;this._token.type!==c;){if(this._token.type===14)return!1;if(this._token.type===5){const E=this._scanner.next();if(E.type!==0&&E.type!==4&&E.type!==5)return!1}this._token=this._scanner.next()}const M=this._scanner.value.substring(C.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),M}_parse(c){return this._parseEscaped(c)||this._parseTabstopOrVariableName(c)||this._parseComplexPlaceholder(c)||this._parseComplexVariable(c)||this._parseAnything(c)}_parseEscaped(c){let C;return(C=this._accept(5,!0))?(C=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||C,c.appendChild(new z(C)),!0):!1}_parseTabstopOrVariableName(c){let C;const M=this._token;return this._accept(0)&&(C=this._accept(9,!0)||this._accept(8,!0))?(c.appendChild(/^\d+$/.test(C)?new S(Number(C)):new F(C)),!0):this._backTo(M)}_parseComplexPlaceholder(c){let C;const M=this._token;if(!(this._accept(0)&&this._accept(3)&&(C=this._accept(8,!0))))return this._backTo(M);const _=new S(Number(C));if(this._accept(1))for(;;){if(this._accept(4))return c.appendChild(_),!0;if(!this._parse(_))return c.appendChild(new z("${"+C+":")),_.children.forEach(c.appendChild,c),!0}else if(_.index>0&&this._accept(7)){const L=new j;for(;;){if(this._parseChoiceElement(L)){if(this._accept(2))continue;if(this._accept(7)&&(_.appendChild(L),this._accept(4)))return c.appendChild(_),!0}return this._backTo(M),!1}}else return this._accept(6)?this._parseTransform(_)?(c.appendChild(_),!0):(this._backTo(M),!1):this._accept(4)?(c.appendChild(_),!0):this._backTo(M)}_parseChoiceElement(c){const C=this._token,M=[];for(;!(this._token.type===2||this._token.type===7);){let E;if((E=this._accept(5,!0))?E=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||E:E=this._accept(void 0,!0),!E)return this._backTo(C),!1;M.push(E)}return M.length===0?(this._backTo(C),!1):(c.appendChild(new z(M.join(""))),!0)}_parseComplexVariable(c){let C;const M=this._token;if(!(this._accept(0)&&this._accept(3)&&(C=this._accept(9,!0))))return this._backTo(M);const _=new F(C);if(this._accept(1))for(;;){if(this._accept(4))return c.appendChild(_),!0;if(!this._parse(_))return c.appendChild(new z("${"+C+":")),_.children.forEach(c.appendChild,c),!0}else return this._accept(6)?this._parseTransform(_)?(c.appendChild(_),!0):(this._backTo(M),!1):this._accept(4)?(c.appendChild(_),!0):this._backTo(M)}_parseTransform(c){let C=new T,M="",E="";for(;!this._accept(6);){let _;if(_=this._accept(5,!0)){_=this._accept(6,!0)||_,M+=_;continue}if(this._token.type!==14){M+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let _;if(_=this._accept(5,!0)){_=this._accept(5,!0)||this._accept(6,!0)||_,C.appendChild(new z(_));continue}if(!(this._parseFormatString(C)||this._parseAnything(C)))return!1}for(;!this._accept(4);){if(this._token.type!==14){E+=this._accept(void 0,!0);continue}return!1}try{C.regexp=new RegExp(M,E)}catch(_){return!1}return c.transform=C,!0}_parseFormatString(c){const C=this._token;if(!this._accept(0))return!1;let M=!1;this._accept(3)&&(M=!0);let E=this._accept(8,!0);if(E)if(M){if(this._accept(4))return c.appendChild(new B(Number(E))),!0;if(!this._accept(1))return this._backTo(C),!1}else return c.appendChild(new B(Number(E))),!0;else return this._backTo(C),!1;if(this._accept(6)){let _=this._accept(9,!0);return!_||!this._accept(4)?(this._backTo(C),!1):(c.appendChild(new B(Number(E),_)),!0)}else if(this._accept(11)){let _=this._until(4);if(_)return c.appendChild(new B(Number(E),void 0,_,void 0)),!0}else if(this._accept(12)){let _=this._until(4);if(_)return c.appendChild(new B(Number(E),void 0,void 0,_)),!0}else if(this._accept(13)){let _=this._until(1);if(_){let L=this._until(4);if(L)return c.appendChild(new B(Number(E),void 0,_,L)),!0}}else{let _=this._until(4);if(_)return c.appendChild(new B(Number(E),void 0,void 0,_)),!0}return this._backTo(C),!1}_parseAnything(c){return this._token.type!==14?(c.appendChild(new z(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}},6769:function(Tt,me,a){"use strict";a.d(me,{l:function(){return te}});var p=a(9488),d=a(9917),z=a(25924),O=a(69386),S=a(24314),j=a(3860),T=a(45146),B=a(44349),F=a(40382),x=a(35084),v=a(68843),g=a(88721),D=a(95935);const c=new Uint8Array(16),C=[];for(let K=0;K<256;K++)C.push(K.toString(16).padStart(2,"0"));let M;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?M=crypto.getRandomValues.bind(crypto):M=function(K){for(let U=0;U<K.length;U++)K[U]=Math.floor(Math.random()*256);return K};function E(){M(c),c[6]=c[6]&15|64,c[8]=c[8]&63|128;let K=0,U="";return U+=C[c[K++]],U+=C[c[K++]],U+=C[c[K++]],U+=C[c[K++]],U+="-",U+=C[c[K++]],U+=C[c[K++]],U+="-",U+=C[c[K++]],U+=C[c[K++]],U+="-",U+=C[c[K++]],U+=C[c[K++]],U+="-",U+=C[c[K++]],U+=C[c[K++]],U+=C[c[K++]],U+=C[c[K++]],U+=C[c[K++]],U+=C[c[K++]],U}var _=a(89381),L=a(63580);const N=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class b{constructor(U){this._delegates=U}resolve(U){for(const ee of this._delegates){let X=ee.resolve(U);if(X!==void 0)return X}}}class I{constructor(U,ee,X,le){this._model=U,this._selection=ee,this._selectionIdx=X,this._overtypingCapturer=le}resolve(U){const{name:ee}=U;if(ee==="SELECTION"||ee==="TM_SELECTED_TEXT"){let X=this._model.getValueInRange(this._selection)||void 0,le=this._selection.startLineNumber!==this._selection.endLineNumber;if(!X&&this._overtypingCapturer){const oe=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);oe&&(X=oe.value,le=oe.multiline)}if(X&&le&&U.snippet){const oe=this._model.getLineContent(this._selection.startLineNumber),Ce=(0,z.V8)(oe,0,this._selection.startColumn-1);let ye=Ce;U.snippet.walk(Te=>Te===U?!1:(Te instanceof x.xv&&(ye=(0,z.V8)((0,z.uq)(Te.value).pop())),!0));const ke=(0,z.Mh)(ye,Ce);X=X.replace(/(\r\n|\r|\n)(.*)/g,(Te,ge,we)=>`${ge}${ye.substr(ke)}${we}`)}return X}else{if(ee==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(ee==="TM_CURRENT_WORD"){const X=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return X&&X.word||void 0}else{if(ee==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(ee==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class k{constructor(U,ee){this._labelService=U,this._model=ee}resolve(U){const{name:ee}=U;if(ee==="TM_FILENAME")return g.EZ(this._model.uri.fsPath);if(ee==="TM_FILENAME_BASE"){const X=g.EZ(this._model.uri.fsPath),le=X.lastIndexOf(".");return le<=0?X:X.slice(0,le)}else{if(ee==="TM_DIRECTORY")return g.XX(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel((0,D.XX)(this._model.uri));if(ee==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(ee==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class W{constructor(U,ee,X,le){this._readClipboardText=U,this._selectionIdx=ee,this._selectionCount=X,this._spread=le}resolve(U){if(U.name!=="CLIPBOARD")return;const ee=this._readClipboardText();if(!!ee){if(this._spread){const X=ee.split(/\r\n|\n|\r/).filter(le=>!(0,z.m5)(le));if(X.length===this._selectionCount)return X[this._selectionIdx]}return ee}}}class q{constructor(U,ee){this._model=U,this._selection=ee}resolve(U){const{name:ee}=U,X=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),le=_.zu.getComments(X);if(!!le){if(ee==="LINE_COMMENT")return le.lineCommentToken||void 0;if(ee==="BLOCK_COMMENT_START")return le.blockCommentStartToken||void 0;if(ee==="BLOCK_COMMENT_END")return le.blockCommentEndToken||void 0}}}class re{constructor(){this._date=new Date}resolve(U){const{name:ee}=U;if(ee==="CURRENT_YEAR")return String(this._date.getFullYear());if(ee==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(ee==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(ee==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(ee==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(ee==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(ee==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(ee==="CURRENT_DAY_NAME")return re.dayNames[this._date.getDay()];if(ee==="CURRENT_DAY_NAME_SHORT")return re.dayNamesShort[this._date.getDay()];if(ee==="CURRENT_MONTH_NAME")return re.monthNames[this._date.getMonth()];if(ee==="CURRENT_MONTH_NAME_SHORT")return re.monthNamesShort[this._date.getMonth()];if(ee==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}re.dayNames=[L.N("Sunday","Sunday"),L.N("Monday","Monday"),L.N("Tuesday","Tuesday"),L.N("Wednesday","Wednesday"),L.N("Thursday","Thursday"),L.N("Friday","Friday"),L.N("Saturday","Saturday")],re.dayNamesShort=[L.N("SundayShort","Sun"),L.N("MondayShort","Mon"),L.N("TuesdayShort","Tue"),L.N("WednesdayShort","Wed"),L.N("ThursdayShort","Thu"),L.N("FridayShort","Fri"),L.N("SaturdayShort","Sat")],re.monthNames=[L.N("January","January"),L.N("February","February"),L.N("March","March"),L.N("April","April"),L.N("May","May"),L.N("June","June"),L.N("July","July"),L.N("August","August"),L.N("September","September"),L.N("October","October"),L.N("November","November"),L.N("December","December")],re.monthNamesShort=[L.N("JanuaryShort","Jan"),L.N("FebruaryShort","Feb"),L.N("MarchShort","Mar"),L.N("AprilShort","Apr"),L.N("MayShort","May"),L.N("JuneShort","Jun"),L.N("JulyShort","Jul"),L.N("AugustShort","Aug"),L.N("SeptemberShort","Sep"),L.N("OctoberShort","Oct"),L.N("NovemberShort","Nov"),L.N("DecemberShort","Dec")];class de{constructor(U){this._workspaceService=U}resolve(U){if(!this._workspaceService)return;const ee=(0,F.uT)(this._workspaceService.getWorkspace());if(!!ee){if(U.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(ee);if(U.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(ee)}}_resolveWorkspaceName(U){if((0,F.eb)(U))return g.EZ(U.uri.path);let ee=g.EZ(U.configPath.path);return ee.endsWith(F.A6)&&(ee=ee.substr(0,ee.length-F.A6.length-1)),ee}_resoveWorkspacePath(U){if((0,F.eb)(U))return(0,v.D)(U.uri.fsPath);let ee=g.EZ(U.configPath.path),X=U.configPath.fsPath;return X.endsWith(ee)&&(X=X.substr(0,X.length-ee.length-1)),X?(0,v.D)(X):"/"}}class pe{resolve(U){const{name:ee}=U;if(ee==="RANDOM")return Math.random().toString().slice(-6);if(ee==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(ee==="UUID")return E()}}class ae{constructor(U,ee,X,le){this._editor=U,this._snippet=ee,this._offset=X,this._snippetLineLeadingWhitespace=le,this._nestingLevel=1,this._placeholderGroups=(0,p.vM)(ee.placeholders,x.Vm.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const U=this._editor.getModel();this._editor.changeDecorations(ee=>{for(const X of this._snippet.placeholders){const le=this._snippet.offset(X),oe=this._snippet.fullLen(X),Ce=S.e.fromPositions(U.getPositionAt(this._offset+le),U.getPositionAt(this._offset+le+oe)),ye=X.isFinalTabstop?ae._decor.inactiveFinal:ae._decor.inactive,ke=ee.addDecoration(Ce,ye);this._placeholderDecorations.set(X,ke)}})}move(U){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let le=[];for(const oe of this._placeholderGroups[this._placeholderGroupsIdx])if(oe.transform){const Ce=this._placeholderDecorations.get(oe),ye=this._editor.getModel().getDecorationRange(Ce),ke=this._editor.getModel().getValueInRange(ye),Te=oe.transform.resolve(ke).split(/\r\n|\r|\n/);for(let ge=1;ge<Te.length;ge++)Te[ge]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+Te[ge]);le.push(O.h.replace(ye,Te.join(this._editor.getModel().getEOL())))}le.length>0&&this._editor.executeEdits("snippet.placeholderTransform",le)}let ee=!1;U===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,ee=!0):U===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,ee=!0);const X=this._editor.getModel().changeDecorations(le=>{const oe=new Set,Ce=[];for(const ye of this._placeholderGroups[this._placeholderGroupsIdx]){const ke=this._placeholderDecorations.get(ye),Te=this._editor.getModel().getDecorationRange(ke);Ce.push(new j.Y(Te.startLineNumber,Te.startColumn,Te.endLineNumber,Te.endColumn)),ee=ee&&this._hasPlaceholderBeenCollapsed(ye),le.changeDecorationOptions(ke,ye.isFinalTabstop?ae._decor.activeFinal:ae._decor.active),oe.add(ye);for(const ge of this._snippet.enclosingPlaceholders(ye)){const we=this._placeholderDecorations.get(ge);le.changeDecorationOptions(we,ge.isFinalTabstop?ae._decor.activeFinal:ae._decor.active),oe.add(ge)}}for(const[ye,ke]of this._placeholderDecorations)oe.has(ye)||le.changeDecorationOptions(ke,ye.isFinalTabstop?ae._decor.inactiveFinal:ae._decor.inactive);return Ce});return ee?this.move(U):X??[]}_hasPlaceholderBeenCollapsed(U){let ee=U;for(;ee;){if(ee instanceof x.Vm){const X=this._placeholderDecorations.get(ee);if(this._editor.getModel().getDecorationRange(X).isEmpty()&&ee.toString().length>0)return!0}ee=ee.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const U=new Map;for(const ee of this._placeholderGroups){let X;for(const le of ee){if(le.isFinalTabstop)break;X||(X=[],U.set(le.index,X));const oe=this._placeholderDecorations.get(le),Ce=this._editor.getModel().getDecorationRange(oe);if(!Ce){U.delete(le.index);break}X.push(Ce)}}return U}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(U){const ee=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(X=>{for(const le of this._placeholderGroups[this._placeholderGroupsIdx]){const oe=U.shift();console.assert(!oe._placeholderDecorations);const Ce=oe._snippet.placeholderInfo.last.index;for(const ke of oe._snippet.placeholderInfo.all)ke.isFinalTabstop?ke.index=le.index+(Ce+1)/this._nestingLevel:ke.index=le.index+ke.index/this._nestingLevel;this._snippet.replace(le,oe._snippet.children);const ye=this._placeholderDecorations.get(le);X.removeDecoration(ye),this._placeholderDecorations.delete(le);for(const ke of oe._snippet.placeholders){const Te=oe._snippet.offset(ke),ge=oe._snippet.fullLen(ke),we=S.e.fromPositions(ee.getPositionAt(oe._offset+Te),ee.getPositionAt(oe._offset+Te+ge)),ze=X.addDecoration(we,ae._decor.inactive);this._placeholderDecorations.set(ke,ze)}}this._placeholderGroups=(0,p.vM)(this._snippet.placeholders,x.Vm.compareByIndex)})}}ae._decor={active:T.qx.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:T.qx.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:T.qx.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:T.qx.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const ue={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class te{constructor(U,ee,X=ue){this._templateMerges=[],this._snippets=[],this._editor=U,this._template=ee,this._options=X}static adjustWhitespace(U,ee,X,le,oe){const Ce=U.getLineContent(ee.lineNumber),ye=(0,z.V8)(Ce,0,ee.column-1);let ke;return X.walk(Te=>{if(!(Te instanceof x.xv)||Te.parent instanceof x.Lv)return!0;const ge=Te.value.split(/\r\n|\r|\n/);if(le){const ze=X.offset(Te);if(ze===0)ge[0]=U.normalizeIndentation(ge[0]);else{ke=ke??X.toString();let Qe=ke.charCodeAt(ze-1);(Qe===10||Qe===13)&&(ge[0]=U.normalizeIndentation(ye+ge[0]))}for(let Qe=1;Qe<ge.length;Qe++)ge[Qe]=U.normalizeIndentation(ye+ge[Qe])}const we=ge.join(U.getEOL());return we!==Te.value&&(Te.parent.replace(Te,[new x.xv(we)]),ke=void 0),!0}),ye}static adjustSelection(U,ee,X,le){if(X!==0||le!==0){const{positionLineNumber:oe,positionColumn:Ce}=ee,ye=Ce-X,ke=Ce+le,Te=U.validateRange({startLineNumber:oe,startColumn:ye,endLineNumber:oe,endColumn:ke});ee=j.Y.createWithDirection(Te.startLineNumber,Te.startColumn,Te.endLineNumber,Te.endColumn,ee.getDirection())}return ee}static createEditsAndSnippets(U,ee,X,le,oe,Ce,ye,ke){const Te=[],ge=[];if(!U.hasModel())return{edits:Te,snippets:ge};const we=U.getModel(),ze=U.invokeWithinContext(ne=>ne.get(F.ec)),Qe=U.invokeWithinContext(ne=>new k(ne.get(B.e),we)),Pe=()=>ye;let Oe=0,qe=we.getValueInRange(te.adjustSelection(we,U.getSelection(),X,0)),Je=we.getValueInRange(te.adjustSelection(we,U.getSelection(),0,le)),Ne=we.getLineFirstNonWhitespaceColumn(U.getSelection().positionLineNumber);const Fe=U.getSelections().map((ne,Q)=>({selection:ne,idx:Q})).sort((ne,Q)=>S.e.compareRangesUsingStarts(ne.selection,Q.selection));for(const{selection:ne,idx:Q}of Fe){let ie=te.adjustSelection(we,ne,X,0),xe=te.adjustSelection(we,ne,0,le);qe!==we.getValueInRange(ie)&&(ie=ne),Je!==we.getValueInRange(xe)&&(xe=ne);const be=ne.setStartPosition(ie.startLineNumber,ie.startColumn).setEndPosition(xe.endLineNumber,xe.endColumn),Ge=new x.Yj().parse(ee,!0,oe),nt=be.getStartPosition(),_t=te.adjustWhitespace(we,nt,Ge,Ce||Q>0&&Ne!==we.getLineFirstNonWhitespaceColumn(ne.positionLineNumber),!0);Ge.resolveVariables(new b([Qe,new W(Pe,Q,Fe.length,U.getOption(71)==="spread"),new I(we,ne,Q,ke),new q(we,ne),new re,new de(ze),new pe]));const Ot=we.getOffsetAt(nt)+Oe;Oe+=Ge.toString().length-we.getValueLengthInRange(be),Te[Q]=O.h.replace(be,Ge.toString()),Te[Q].identifier={major:Q,minor:0},ge[Q]=new ae(U,Ge,Ot,_t)}return{edits:Te,snippets:ge}}dispose(){(0,d.B9)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:U,snippets:ee}=te.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=ee,this._editor.executeEdits("snippet",U,X=>this._snippets[0].hasPlaceholder?this._move(!0):X.filter(le=>!!le.identifier).map(le=>j.Y.fromPositions(le.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(U,ee=ue){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,U]);const{edits:X,snippets:le}=te.createEditsAndSnippets(this._editor,U,ee.overwriteBefore,ee.overwriteAfter,!0,ee.adjustWhitespace,ee.clipboardText,ee.overtypingCapturer);this._editor.executeEdits("snippet",X,oe=>{for(const Ce of this._snippets)Ce.merge(le);return console.assert(le.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):oe.filter(Ce=>!!Ce.identifier).map(Ce=>j.Y.fromPositions(Ce.range.getEndPosition()))})}next(){const U=this._move(!0);this._editor.setSelections(U),this._editor.revealPositionInCenterIfOutsideViewport(U[0].getPosition())}prev(){const U=this._move(!1);this._editor.setSelections(U),this._editor.revealPositionInCenterIfOutsideViewport(U[0].getPosition())}_move(U){const ee=[];for(const X of this._snippets){const le=X.move(U);ee.push(...le)}return ee}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const U=this._editor.getSelections();if(U.length<this._snippets.length)return!1;let ee=new Map;for(const X of this._snippets){const le=X.computePossibleSelections();if(ee.size===0)for(const[oe,Ce]of le){Ce.sort(S.e.compareRangesUsingStarts);for(const ye of U)if(Ce[0].containsRange(ye)){ee.set(oe,[]);break}}if(ee.size===0)return!1;ee.forEach((oe,Ce)=>{oe.push(...le.get(Ce))})}U.sort(S.e.compareRangesUsingStarts);for(let[X,le]of ee){if(le.length!==U.length){ee.delete(X);continue}le.sort(S.e.compareRangesUsingStarts);for(let oe=0;oe<le.length;oe++)if(!le[oe].containsRange(U[oe])){ee.delete(X);continue}}return ee.size>0}}},55621:function(Tt,me,a){"use strict";a.d(me,{_y:function(){return L},GI:function(){return N},A9:function(){return I},ZJ:function(){return W},kL:function(){return re},wg:function(){return te},i5:function(){return ee}});var p=a(71050),d=a(17301),z=a(75392),O=a(9917),S=a(84013),j=a(98401),T=a(70666),B=a(50187),F=a(24314),x=a(88216),v=a(35084),g=a(63580),D=a(84144),c=a(94565),C=a(16141),M=a(71922),E=a(10337),_=function(X,le,oe,Ce){function ye(ke){return ke instanceof oe?ke:new oe(function(Te){Te(ke)})}return new(oe||(oe=Promise))(function(ke,Te){function ge(Qe){try{ze(Ce.next(Qe))}catch(Pe){Te(Pe)}}function we(Qe){try{ze(Ce.throw(Qe))}catch(Pe){Te(Pe)}}function ze(Qe){Qe.done?ke(Qe.value):ye(Qe.value).then(ge,we)}ze((Ce=Ce.apply(X,le||[])).next())})};const L={Visible:E.iX,DetailsVisible:new C.uy("suggestWidgetDetailsVisible",!1,(0,g.N)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new C.uy("suggestWidgetMultipleSuggestions",!1,(0,g.N)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new C.uy("suggestionMakesTextEdit",!0,(0,g.N)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new C.uy("acceptSuggestionOnEnter",!0,(0,g.N)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new C.uy("suggestionHasInsertAndReplaceRange",!1,(0,g.N)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new C.uy("suggestionInsertMode",void 0,{type:"string",description:(0,g.N)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new C.uy("suggestionCanResolve",!1,(0,g.N)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},N=new D.eH("suggestWidgetStatusBar");class b{constructor(le,oe,Ce,ye){this.position=le,this.completion=oe,this.container=Ce,this.provider=ye,this.isInvalid=!1,this.score=z.CL.Default,this.distance=0,this.textLabel=typeof oe.label=="string"?oe.label:oe.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=oe.sortText&&oe.sortText.toLowerCase(),this.filterTextLow=oe.filterText&&oe.filterText.toLowerCase(),F.e.isIRange(oe.range)?(this.editStart=new B.L(oe.range.startLineNumber,oe.range.startColumn),this.editInsertEnd=new B.L(oe.range.endLineNumber,oe.range.endColumn),this.editReplaceEnd=new B.L(oe.range.endLineNumber,oe.range.endColumn),this.isInvalid=this.isInvalid||F.e.spansMultipleLines(oe.range)||oe.range.startLineNumber!==le.lineNumber):(this.editStart=new B.L(oe.range.insert.startLineNumber,oe.range.insert.startColumn),this.editInsertEnd=new B.L(oe.range.insert.endLineNumber,oe.range.insert.endColumn),this.editReplaceEnd=new B.L(oe.range.replace.endLineNumber,oe.range.replace.endColumn),this.isInvalid=this.isInvalid||F.e.spansMultipleLines(oe.range.insert)||F.e.spansMultipleLines(oe.range.replace)||oe.range.insert.startLineNumber!==le.lineNumber||oe.range.replace.startLineNumber!==le.lineNumber||oe.range.insert.startColumn!==oe.range.replace.startColumn),typeof ye.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(le){return _(this,void 0,void 0,function*(){if(!this._resolveCache){const oe=le.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,le)).then(Ce=>{Object.assign(this.completion,Ce),this._isResolved=!0,oe.dispose()},Ce=>{(0,d.n2)(Ce)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class I{constructor(le=2,oe=new Set,Ce=new Set,ye=!0){this.snippetSortOrder=le,this.kindFilter=oe,this.providerFilter=Ce,this.showDeprecated=ye}}I.default=new I;let k;function W(){return k}class q{constructor(le,oe,Ce,ye){this.items=le,this.needsClipboard=oe,this.durations=Ce,this.disposable=ye}}function re(X,le,oe,Ce=I.default,ye={triggerKind:0},ke=p.T.None){return _(this,void 0,void 0,function*(){const Te=new S.G(!0);oe=oe.clone();const ge=le.getWordAtPosition(oe),we=ge?new F.e(oe.lineNumber,ge.startColumn,oe.lineNumber,ge.endColumn):F.e.fromPositions(oe),ze={replace:we,insert:we.setEndPosition(oe.lineNumber,oe.column)},Qe=[],Pe=new O.SL,Oe=[];let qe=!1;const Je=(Fe,ne,Q)=>{var ie,xe,be;let Ge=!1;if(!ne)return Ge;for(let nt of ne.suggestions)if(!Ce.kindFilter.has(nt.kind)){if(!Ce.showDeprecated&&((ie=nt==null?void 0:nt.tags)===null||ie===void 0?void 0:ie.includes(1)))continue;nt.range||(nt.range=ze),nt.sortText||(nt.sortText=typeof nt.label=="string"?nt.label:nt.label.label),!qe&&nt.insertTextRules&&nt.insertTextRules&4&&(qe=v.Yj.guessNeedsClipboard(nt.insertText)),Qe.push(new b(oe,nt,ne,Fe)),Ge=!0}return(0,O.Wf)(ne)&&Pe.add(ne),Oe.push({providerName:(xe=Fe._debugDisplayName)!==null&&xe!==void 0?xe:"unknown_provider",elapsedProvider:(be=ne.duration)!==null&&be!==void 0?be:-1,elapsedOverall:Q.elapsed()}),Ge},Ne=(()=>_(this,void 0,void 0,function*(){if(!k||Ce.kindFilter.has(27)||Ce.providerFilter.size>0&&!Ce.providerFilter.has(k))return;const Fe=new S.G(!0),ne=yield k.provideCompletionItems(le,oe,ye,ke);Je(k,ne,Fe)}))();for(let Fe of X.orderedGroups(le)){let ne=!1;if(yield Promise.all(Fe.map(Q=>_(this,void 0,void 0,function*(){if(!(Ce.providerFilter.size>0&&!Ce.providerFilter.has(Q)))try{const ie=new S.G(!0),xe=yield Q.provideCompletionItems(le,oe,ye,ke);ne=Je(Q,xe,ie)||ne}catch(ie){(0,d.Cp)(ie)}}))),ne||ke.isCancellationRequested)break}return yield Ne,ke.isCancellationRequested?(Pe.dispose(),Promise.reject((0,d.F0)())):new q(Qe.sort(te(Ce.snippetSortOrder)),qe,{entries:Oe,elapsed:Te.elapsed()},Pe)})}function de(X,le){if(X.sortTextLow&&le.sortTextLow){if(X.sortTextLow<le.sortTextLow)return-1;if(X.sortTextLow>le.sortTextLow)return 1}return X.completion.label<le.completion.label?-1:X.completion.label>le.completion.label?1:X.completion.kind-le.completion.kind}function pe(X,le){if(X.completion.kind!==le.completion.kind){if(X.completion.kind===27)return-1;if(le.completion.kind===27)return 1}return de(X,le)}function ae(X,le){if(X.completion.kind!==le.completion.kind){if(X.completion.kind===27)return 1;if(le.completion.kind===27)return-1}return de(X,le)}const ue=new Map;ue.set(0,pe),ue.set(2,ae),ue.set(1,de);function te(X){return ue.get(X)}c.P0.registerCommand("_executeCompletionItemProvider",(X,...le)=>_(void 0,void 0,void 0,function*(){const[oe,Ce,ye,ke]=le;(0,j.p_)(T.o.isUri(oe)),(0,j.p_)(B.L.isIPosition(Ce)),(0,j.p_)(typeof ye=="string"||!ye),(0,j.p_)(typeof ke=="number"||!ke);const{completionProvider:Te}=X.get(M.p),ge=yield X.get(x.S).createModelReference(oe);try{const we={incomplete:!1,suggestions:[]},ze=[],Qe=yield re(Te,ge.object.textEditorModel,B.L.lift(Ce),void 0,{triggerCharacter:ye,triggerKind:ye?1:0});for(const Pe of Qe.items)ze.length<(ke??0)&&ze.push(Pe.resolve(p.T.None)),we.incomplete=we.incomplete||Pe.container.incomplete,we.suggestions.push(Pe.completion);try{return yield Promise.all(ze),we}finally{setTimeout(()=>Qe.disposable.dispose(),100)}}finally{ge.dispose()}}));let K,U=[];function ee(X,le,oe){const{completionProvider:Ce}=X.get(M.p);K||(K=new class{provideCompletionItems(){let ke={suggestions:U.slice(0)};return U.length=0,ke}},Ce.register("*",K)),setTimeout(()=>{var ye;U.push(...oe),(ye=le.getContribution("editor.contrib.suggestController"))===null||ye===void 0||ye.triggerSuggest(new Set().add(K))},0)}},18786:function(Tt,me,a){"use strict";a.r(me),a.d(me,{SuggestController:function(){return Mr},TriggerSuggestAction:function(){return jr}});var p=a(85152),d=a(9488),z=a(15393),O=a(71050),S=a(17301),j=a(4669),T=a(8313),B=a(9917),F=a(1432),x=a(84013),v=a(98401),g=a(43407),D=a(16830),c=a(69386),C=a(50187),M=a(24314),E=a(29102),_=a(98762),L=a(35084),N=a(43702),b=a(96887),I=a(33108),k=a(65026),W=a(72065),q=a(26904),re=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},de=function(li,tt){return function(St,Pt){tt(St,Pt,li)}};class pe{constructor(tt){this.name=tt}select(tt,St,Pt){if(Pt.length===0)return 0;let Yt=Pt[0].score[0];for(let en=0;en<Pt.length;en++){const{score:Ct,completion:J}=Pt[en];if(Ct[0]!==Yt)break;if(J.preselect)return en}return 0}}class ae extends pe{constructor(){super("first")}memorize(tt,St,Pt){}toJSON(){}fromJSON(){}}class ue extends pe{constructor(){super("recentlyUsed");this._cache=new N.z6(300,.66),this._seq=0}memorize(tt,St,Pt){const Yt=`${tt.getLanguageId()}/${Pt.textLabel}`;this._cache.set(Yt,{touch:this._seq++,type:Pt.completion.kind,insertText:Pt.completion.insertText})}select(tt,St,Pt){if(Pt.length===0)return 0;const Yt=tt.getLineContent(St.lineNumber).substr(St.column-10,St.column-1);if(/\s$/.test(Yt))return super.select(tt,St,Pt);let en=Pt[0].score[0],Ct=-1,J=-1,Ae=-1;for(let ot=0;ot<Pt.length&&Pt[ot].score[0]===en;ot++){const Ee=`${tt.getLanguageId()}/${Pt[ot].textLabel}`,m=this._cache.peek(Ee);if(m&&m.touch>Ae&&m.type===Pt[ot].completion.kind&&m.insertText===Pt[ot].completion.insertText&&(Ae=m.touch,J=ot),Pt[ot].completion.preselect&&Ct===-1)return Ct=ot}return J!==-1?J:Ct!==-1?Ct:0}toJSON(){return this._cache.toJSON()}fromJSON(tt){this._cache.clear();let St=0;for(const[Pt,Yt]of tt)Yt.touch=St,Yt.type=typeof Yt.type=="number"?Yt.type:b.gX.fromString(Yt.type),this._cache.set(Pt,Yt);this._seq=this._cache.size}}class te extends pe{constructor(){super("recentlyUsedByPrefix");this._trie=N.Id.forStrings(),this._seq=0}memorize(tt,St,Pt){const{word:Yt}=tt.getWordUntilPosition(St),en=`${tt.getLanguageId()}/${Yt}`;this._trie.set(en,{type:Pt.completion.kind,insertText:Pt.completion.insertText,touch:this._seq++})}select(tt,St,Pt){let{word:Yt}=tt.getWordUntilPosition(St);if(!Yt)return super.select(tt,St,Pt);let en=`${tt.getLanguageId()}/${Yt}`,Ct=this._trie.get(en);if(Ct||(Ct=this._trie.findSubstr(en)),Ct)for(let J=0;J<Pt.length;J++){let{kind:Ae,insertText:ot}=Pt[J].completion;if(Ae===Ct.type&&ot===Ct.insertText)return J}return super.select(tt,St,Pt)}toJSON(){let tt=[];return this._trie.forEach((St,Pt)=>tt.push([Pt,St])),tt.sort((St,Pt)=>-(St[1].touch-Pt[1].touch)).forEach((St,Pt)=>St[1].touch=Pt),tt.slice(0,200)}fromJSON(tt){if(this._trie.clear(),tt.length>0){this._seq=tt[0][1].touch+1;for(const[St,Pt]of tt)Pt.type=typeof Pt.type=="number"?Pt.type:b.gX.fromString(Pt.type),this._trie.set(St,Pt)}}}let K=class _p{constructor(tt,St){this._storageService=tt,this._configService=St,this._disposables=new B.SL,this._persistSoon=new z.pY(()=>this._saveState(),500),this._disposables.add(tt.onWillSaveState(Pt=>{Pt.reason===q.fk.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(tt,St,Pt){this._withStrategy(tt,St).memorize(tt,St,Pt),this._persistSoon.schedule()}select(tt,St,Pt){return this._withStrategy(tt,St).select(tt,St,Pt)}_withStrategy(tt,St){var Pt;const Yt=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:tt.getLanguageIdAtPosition(St.lineNumber,St.column),resource:tt.uri});if(((Pt=this._strategy)===null||Pt===void 0?void 0:Pt.name)!==Yt){this._saveState();const en=_p._strategyCtors.get(Yt)||ae;this._strategy=new en;try{const J=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,Ae=this._storageService.get(`${_p._storagePrefix}/${Yt}`,J);Ae&&this._strategy.fromJSON(JSON.parse(Ae))}catch(Ct){}}return this._strategy}_saveState(){if(this._strategy){const St=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,Pt=JSON.stringify(this._strategy);this._storageService.store(`${_p._storagePrefix}/${this._strategy.name}`,Pt,St,1)}}};K._strategyCtors=new Map([["recentlyUsedByPrefix",te],["recentlyUsed",ue],["first",ae]]),K._storagePrefix="suggest/memories",K=re([de(0,q.Uy),de(1,I.Ui)],K);const U=(0,W.yh)("ISuggestMemories");(0,k.z)(U,K,!0);var ee=a(16141),X=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},le=function(li,tt){return function(St,Pt){tt(St,Pt,li)}};let oe=class ES{constructor(tt,St){this._editor=tt,this._enabled=!1,this._ckAtEnd=ES.AtEnd.bindTo(St),this._configListener=this._editor.onDidChangeConfiguration(Pt=>Pt.hasChanged(111)&&this._update()),this._update()}dispose(){var tt;this._configListener.dispose(),(tt=this._selectionListener)===null||tt===void 0||tt.dispose(),this._ckAtEnd.reset()}_update(){const tt=this._editor.getOption(111)==="on";if(this._enabled!==tt)if(this._enabled=tt,this._enabled){const St=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const Pt=this._editor.getModel(),Yt=this._editor.getSelection(),en=Pt.getWordAtPosition(Yt.getStartPosition());if(!en){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(en.endColumn===Yt.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(St),St()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};oe.AtEnd=new ee.uy("atEndOfWord",!1),oe=X([le(1,ee.i6)],oe);var Ce=a(63580),ye=a(84144),ke=a(94565),Te=a(49989),ge=a(43557),we=a(55621),ze=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},Qe=function(li,tt){return function(St,Pt){tt(St,Pt,li)}};let Pe=class Cp{constructor(tt,St){this._editor=tt,this._index=0,this._ckOtherSuggestions=Cp.OtherSuggestions.bindTo(St)}dispose(){this.reset()}reset(){var tt;this._ckOtherSuggestions.reset(),(tt=this._listener)===null||tt===void 0||tt.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:tt,index:St},Pt){if(tt.items.length===0){this.reset();return}if(Cp._moveIndex(!0,tt,St)===St){this.reset();return}this._acceptNext=Pt,this._model=tt,this._index=St,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(tt,St,Pt){let Yt=Pt;for(;Yt=(Yt+St.items.length+(tt?1:-1))%St.items.length,!(Yt===Pt||!St.items[Yt].completion.additionalTextEdits););return Yt}next(){this._move(!0)}prev(){this._move(!1)}_move(tt){if(!!this._model)try{this._ignore=!0,this._index=Cp._moveIndex(tt,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Pe.OtherSuggestions=new ee.uy("hasOtherSuggestions",!1),Pe=ze([Qe(1,ee.i6)],Pe);var Oe=a(44906);class qe{constructor(tt,St,Pt){this._disposables=new B.SL,this._disposables.add(St.onDidShow(()=>this._onItem(St.getFocusedItem()))),this._disposables.add(St.onDidFocus(this._onItem,this)),this._disposables.add(St.onDidHide(this.reset,this)),this._disposables.add(tt.onWillType(Yt=>{if(this._active&&!St.isFrozen()){const en=Yt.charCodeAt(Yt.length-1);this._active.acceptCharacters.has(en)&&tt.getOption(0)&&Pt(this._active.item)}}))}_onItem(tt){if(!tt||!(0,d.Of)(tt.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===tt.item)return;const St=new Oe.q;for(const Pt of tt.item.completion.commitCharacters)Pt.length>0&&St.add(Pt.charCodeAt(0));this._active={acceptCharacters:St,item:tt}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var Je=a(25924),Ne=a(3860),Fe=a(85215),ne=a(79694),Q=function(li,tt,St,Pt){function Yt(en){return en instanceof St?en:new St(function(Ct){Ct(en)})}return new(St||(St=Promise))(function(en,Ct){function J(Ee){try{ot(Pt.next(Ee))}catch(m){Ct(m)}}function Ae(Ee){try{ot(Pt.throw(Ee))}catch(m){Ct(m)}}function ot(Ee){Ee.done?en(Ee.value):Yt(Ee.value).then(J,Ae)}ot((Pt=Pt.apply(li,tt||[])).next())})};class ie{static create(tt,St){return Q(this,void 0,void 0,function*(){if(!St.getOption(106).localityBonus||!St.hasModel())return ie.None;const Pt=St.getModel(),Yt=St.getPosition();if(!tt.canComputeWordRanges(Pt.uri))return ie.None;const[en]=yield new ne.x().provideSelectionRanges(Pt,[Yt]);if(en.length===0)return ie.None;const Ct=yield tt.computeWordRanges(Pt.uri,en[0].range);if(!Ct)return ie.None;const J=Pt.getWordUntilPosition(Yt);return delete Ct[J.word],new class extends ie{distance(Ae,ot){if(!Yt.equals(St.getPosition()))return 0;if(ot.kind===17)return 2<<20;let Ee=typeof ot.label=="string"?ot.label:ot.label.label,m=Ct[Ee];if((0,d.XY)(m))return 2<<20;let V=(0,d.ry)(m,M.e.fromPositions(Ae),M.e.compareRangesUsingStarts),G=V>=0?m[V]:m[Math.max(0,~V-1)],ce=en.length;for(const ve of en){if(!M.e.containsRange(ve.range,G))break;ce-=1}return ce}}})}}ie.None=new class extends ie{distance(){return 0}};var xe=a(84972),be=a(10829),Ge=a(75392);class nt{constructor(tt,St){this.leadingLineContent=tt,this.characterCountDelta=St}}class _t{constructor(tt,St,Pt,Yt,en,Ct,J){this.clipboardText=J,this._snippetCompareFn=_t._compareCompletionItems,this._items=tt,this._column=St,this._wordDistance=Yt,this._options=en,this._refilterKind=1,this._lineContext=Pt,Ct==="top"?this._snippetCompareFn=_t._compareCompletionItemsSnippetsUp:Ct==="bottom"&&(this._snippetCompareFn=_t._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(tt){(this._lineContext.leadingLineContent!==tt.leadingLineContent||this._lineContext.characterCountDelta!==tt.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<tt.characterCountDelta&&this._filteredItems?2:1,this._lineContext=tt)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const tt=new Set;for(let[St,Pt]of this._providerInfo)Pt&&tt.add(St);return tt}adopt(tt){let St=[];for(let Pt=0;Pt<this._items.length;)tt.has(this._items[Pt].provider)?Pt++:(St.push(this._items[Pt]),this._items[Pt]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,St}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const tt=[],{leadingLineContent:St,characterCountDelta:Pt}=this._lineContext;let Yt="",en="";const Ct=this._refilterKind===1?this._items:this._filteredItems,J=[],Ae=!this._options.filterGraceful||Ct.length>2e3?Ge.EW:Ge.l7;for(let ot=0;ot<Ct.length;ot++){const Ee=Ct[ot];if(Ee.isInvalid)continue;this._providerInfo.set(Ee.provider,Boolean(Ee.container.incomplete));const m=Ee.position.column-Ee.editStart.column,V=m+Pt-(Ee.position.column-this._column);if(Yt.length!==V&&(Yt=V===0?"":St.slice(-V),en=Yt.toLowerCase()),Ee.word=Yt,V===0)Ee.score=Ge.CL.Default;else{let G=0;for(;G<m;){const ce=Yt.charCodeAt(G);if(ce===32||ce===9)G+=1;else break}if(G>=V)Ee.score=Ge.CL.Default;else if(typeof Ee.completion.filterText=="string"){let ce=Ae(Yt,en,G,Ee.completion.filterText,Ee.filterTextLow,0,!1);if(!ce)continue;(0,Je.zY)(Ee.completion.filterText,Ee.textLabel)===0?Ee.score=ce:(Ee.score=(0,Ge.jB)(Yt,en,G,Ee.textLabel,Ee.labelLow,0),Ee.score[0]=ce[0])}else{let ce=Ae(Yt,en,G,Ee.textLabel,Ee.labelLow,0,!1);if(!ce)continue;Ee.score=ce}}Ee.idx=ot,Ee.distance=this._wordDistance.distance(Ee.position,Ee.completion),J.push(Ee),tt.push(Ee.textLabel.length)}this._filteredItems=J.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:tt.length?(0,d.HW)(tt.length-.85,tt,(ot,Ee)=>ot-Ee):0}}static _compareCompletionItems(tt,St){return tt.score[0]>St.score[0]?-1:tt.score[0]<St.score[0]?1:tt.distance<St.distance?-1:tt.distance>St.distance?1:tt.idx<St.idx?-1:tt.idx>St.idx?1:0}static _compareCompletionItemsSnippetsDown(tt,St){if(tt.completion.kind!==St.completion.kind){if(tt.completion.kind===27)return 1;if(St.completion.kind===27)return-1}return _t._compareCompletionItems(tt,St)}static _compareCompletionItemsSnippetsUp(tt,St){if(tt.completion.kind!==St.completion.kind){if(tt.completion.kind===27)return-1;if(St.completion.kind===27)return 1}return _t._compareCompletionItems(tt,St)}}var Ot=a(71922),rn=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},gt=function(li,tt){return function(St,Pt){tt(St,Pt,li)}},Ue=function(li,tt,St,Pt){function Yt(en){return en instanceof St?en:new St(function(Ct){Ct(en)})}return new(St||(St=Promise))(function(en,Ct){function J(Ee){try{ot(Pt.next(Ee))}catch(m){Ct(m)}}function Ae(Ee){try{ot(Pt.throw(Ee))}catch(m){Ct(m)}}function ot(Ee){Ee.done?en(Ee.value):Yt(Ee.value).then(J,Ae)}ot((Pt=Pt.apply(li,tt||[])).next())})};class Ye{constructor(tt,St,Pt,Yt){this.leadingLineContent=tt.getLineContent(St.lineNumber).substr(0,St.column-1),this.leadingWord=tt.getWordUntilPosition(St),this.lineNumber=St.lineNumber,this.column=St.column,this.auto=Pt,this.shy=Yt}static shouldAutoTrigger(tt){if(!tt.hasModel())return!1;const St=tt.getModel(),Pt=tt.getPosition();St.tokenizeIfCheap(Pt.lineNumber);const Yt=St.getWordAtPosition(Pt);return!(!Yt||Yt.endColumn!==Pt.column||!isNaN(Number(Yt.word)))}}function dt(li){return li.getOption(106).preview}function Re(li,tt,St){if(!Boolean(tt.getContextKeyValue("inlineSuggestionVisible")))return!0;const Pt=St.getValue("editor.inlineSuggest.allowQuickSuggestions");return Pt!==void 0?Boolean(Pt):!1}function Ve(li,tt,St){if(!Boolean(tt.getContextKeyValue("inlineSuggestionVisible")))return!0;const Pt=St.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return Pt!==void 0?Boolean(Pt):!1}let at=class LS{constructor(tt,St,Pt,Yt,en,Ct,J,Ae){this._editor=tt,this._editorWorkerService=St,this._clipboardService=Pt,this._telemetryService=Yt,this._logService=en,this._contextKeyService=Ct,this._configurationService=J,this._languageFeaturesService=Ae,this._toDispose=new B.SL,this._quickSuggestDelay=10,this._triggerCharacterListener=new B.SL,this._triggerQuickSuggest=new z._F,this._state=0,this._completionDisposables=new B.SL,this._onDidCancel=new j.Q5,this._onDidTrigger=new j.Q5,this._onDidSuggest=new j.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Ne.Y(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let ot=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{ot=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{ot=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(Ee=>{ot||this._onCursorChange(Ee)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{ot||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){(0,B.B9)(this._triggerCharacterListener),(0,B.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(80),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(81)||!this._editor.hasModel()||!this._editor.getOption(109))return;const tt=new Map;for(const Pt of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const Yt of Pt.triggerCharacters||[]){let en=tt.get(Yt);en||(en=new Set,en.add((0,we.ZJ)()),tt.set(Yt,en)),en.add(Pt)}const St=Pt=>{if(!Ve(this._editor,this._contextKeyService,this._configurationService)||Ye.shouldAutoTrigger(this._editor))return;if(!Pt){const Ct=this._editor.getPosition();Pt=this._editor.getModel().getLineContent(Ct.lineNumber).substr(0,Ct.column-1)}let Yt="";(0,Je.YK)(Pt.charCodeAt(Pt.length-1))?(0,Je.ZG)(Pt.charCodeAt(Pt.length-2))&&(Yt=Pt.substr(Pt.length-2)):Yt=Pt.charAt(Pt.length-1);const en=tt.get(Yt);if(en){const Ct=this._completionModel?{items:this._completionModel.adopt(en),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:Yt},Boolean(this._completionModel),en,Ct)}};this._triggerCharacterListener.add(this._editor.onDidType(St)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>St()))}get state(){return this._state}cancel(tt=!1){var St;this._state!==0&&(this._triggerQuickSuggest.cancel(),(St=this._requestToken)===null||St===void 0||St.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:tt}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(tt){if(!this._editor.hasModel())return;const St=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!tt.selection.isEmpty()||tt.reason!==0&&tt.reason!==3||tt.source!=="keyboard"&&tt.source!=="deleteLeft"){this.cancel();return}this._state===0&&tt.reason===0?(St.containsRange(this._currentSelection)||St.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&tt.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var tt;this._editor.getOption(79)!==!1&&(this._editor.getOption(106).snippetsPreventQuickSuggestions&&((tt=_.SnippetController2.get(this._editor))===null||tt===void 0?void 0:tt.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!Ye.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const St=this._editor.getModel(),Pt=this._editor.getPosition(),Yt=this._editor.getOption(79);if(Yt!==!1){if(Yt!==!0){St.tokenizeIfCheap(Pt.lineNumber);const en=St.getLineTokens(Pt.lineNumber),Ct=en.getStandardTokenType(en.findTokenIndexAtOffset(Math.max(Pt.column-1-1,0)));if(!(Yt.other&&Ct===0||Yt.comments&&Ct===1||Yt.strings&&Ct===2))return}!Re(this._editor,this._contextKeyService,this._configurationService)||!this._languageFeaturesService.completionProvider.has(St)||this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const tt=this._editor.getModel(),St=this._editor.getPosition(),Pt=new Ye(tt,St,this._state===2,!1);this._onNewContext(Pt)})}trigger(tt,St=!1,Pt,Yt){var en;if(!this._editor.hasModel())return;const Ct=this._editor.getModel(),J=tt.auto,Ae=new Ye(Ct,this._editor.getPosition(),J,tt.shy);this.cancel(St),this._state=J?2:1,this._onDidTrigger.fire({auto:J,shy:tt.shy,position:this._editor.getPosition()}),this._context=Ae;let ot={triggerKind:(en=tt.triggerKind)!==null&&en!==void 0?en:0};tt.triggerCharacter&&(ot={triggerKind:1,triggerCharacter:tt.triggerCharacter}),this._requestToken=new O.A;const Ee=this._editor.getOption(101);let m=1;switch(Ee){case"top":m=0;break;case"bottom":m=2;break}const{itemKind:V,showDeprecated:G}=LS._createSuggestFilter(this._editor),ce=ie.create(this._editorWorkerService,this._editor),ve=(0,we.kL)(this._languageFeaturesService.completionProvider,Ct,this._editor.getPosition(),new we.A9(m,V,Pt,G),ot,this._requestToken.token);Promise.all([ve,ce]).then(([De,ct])=>Ue(this,void 0,void 0,function*(){var lt;if((lt=this._requestToken)===null||lt===void 0||lt.dispose(),!this._editor.hasModel())return;let Nt=Yt==null?void 0:Yt.clipboardText;if(!Nt&&De.needsClipboard&&(Nt=yield this._clipboardService.readText()),this._state===0)return;const It=this._editor.getModel();let Ft=De.items;if(Yt){const bn=(0,we.wg)(m);Ft=Ft.concat(Yt.items).sort(bn)}const jt=new Ye(It,this._editor.getPosition(),J,tt.shy);this._completionModel=new _t(Ft,this._context.column,{leadingLineContent:jt.leadingLineContent,characterCountDelta:jt.column-this._context.column},ct,this._editor.getOption(106),this._editor.getOption(101),Nt),this._completionDisposables.add(De.disposable),this._onNewContext(jt),this._reportDurationsTelemetry(De.durations)})).catch(S.dL)}_reportDurationsTelemetry(tt){this._telemetryGate++%230==0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(tt)}),this._logService.debug("suggest.durations.json",tt)})}static _createSuggestFilter(tt){const St=new Set;tt.getOption(101)==="none"&&St.add(27);const Yt=tt.getOption(106);return Yt.showMethods||St.add(0),Yt.showFunctions||St.add(1),Yt.showConstructors||St.add(2),Yt.showFields||St.add(3),Yt.showVariables||St.add(4),Yt.showClasses||St.add(5),Yt.showStructs||St.add(6),Yt.showInterfaces||St.add(7),Yt.showModules||St.add(8),Yt.showProperties||St.add(9),Yt.showEvents||St.add(10),Yt.showOperators||St.add(11),Yt.showUnits||St.add(12),Yt.showValues||St.add(13),Yt.showConstants||St.add(14),Yt.showEnums||St.add(15),Yt.showEnumMembers||St.add(16),Yt.showKeywords||St.add(17),Yt.showWords||St.add(18),Yt.showColors||St.add(19),Yt.showFiles||St.add(20),Yt.showReferences||St.add(21),Yt.showColors||St.add(22),Yt.showFolders||St.add(23),Yt.showTypeParameters||St.add(24),Yt.showSnippets||St.add(27),Yt.showUsers||St.add(25),Yt.showIssues||St.add(26),{itemKind:St,showDeprecated:Yt.showDeprecated}}_onNewContext(tt){if(!!this._context){if(tt.lineNumber!==this._context.lineNumber){this.cancel();return}if((0,Je.V8)(tt.leadingLineContent)!==(0,Je.V8)(this._context.leadingLineContent)){this.cancel();return}if(tt.column<this._context.column){tt.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(!!this._completionModel){if(tt.leadingWord.word.length!==0&&tt.leadingWord.startColumn>this._context.leadingWord.startColumn){const St=new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));for(let Yt of this._completionModel.allProvider)St.delete(Yt);const Pt=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,St,{items:Pt,clipboardText:this._completionModel.clipboardText});return}if(tt.column>this._context.column&&this._completionModel.incomplete.size>0&&tt.leadingWord.word.length!==0){const{incomplete:St}=this._completionModel,Pt=this._completionModel.adopt(St);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,St,{items:Pt,clipboardText:this._completionModel.clipboardText})}else{let St=this._completionModel.lineContext,Pt=!1;if(this._completionModel.lineContext={leadingLineContent:tt.leadingLineContent,characterCountDelta:tt.column-this._context.column},this._completionModel.items.length===0){if(Ye.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<tt.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=St,Pt=this._completionModel.items.length>0,Pt&&tt.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:Pt})}}}}};at=rn([gt(1,Fe.p),gt(2,xe.p),gt(3,be.b),gt(4,ge.VZ),gt(5,ee.i6),gt(6,I.Ui),gt(7,Ot.p)],at);class pt{constructor(tt,St){this._disposables=new B.SL,this._lastOvertyped=[],this._empty=!0,this._disposables.add(tt.onWillType(()=>{if(!this._empty||!tt.hasModel())return;const Pt=tt.getSelections(),Yt=Pt.length;let en=!1;for(let J=0;J<Yt;J++)if(!Pt[J].isEmpty()){en=!0;break}if(!en)return;this._lastOvertyped=[];const Ct=tt.getModel();for(let J=0;J<Yt;J++){const Ae=Pt[J];if(Ct.getValueLengthInRange(Ae)>pt._maxSelectionLength)return;this._lastOvertyped[J]={value:Ct.getValueInRange(Ae),multiline:Ae.startLineNumber!==Ae.endLineNumber}}this._empty=!1})),this._disposables.add(St.onDidCancel(Pt=>{!this._empty&&!Pt.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(tt){if(!this._empty&&tt>=0&&tt<this._lastOvertyped.length)return this._lastOvertyped[tt]}dispose(){this._disposables.dispose()}}pt._maxSelectionLength=51200;var Be=a(65321),je=a(28609),Et=a(43799),Dt=a(59870),Xe=a(84527),ft=a(90317),an=a(58335),An=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},Fn=function(li,tt){return function(St,Pt){tt(St,Pt,li)}};class Ht extends an.Mm{updateLabel(){const tt=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!tt)return super.updateLabel();this.label&&(this.label.textContent=(0,Ce.N)("ddd","{0} ({1})",this._action.label,Ht.symbolPrintEnter(tt)))}static symbolPrintEnter(tt){var St;return(St=tt.getLabel())===null||St===void 0?void 0:St.replace(/\benter\b/gi,"\u23CE")}}let Kt=class{constructor(tt,St,Pt,Yt){this._menuService=Pt,this._contextKeyService=Yt,this._menuDisposables=new B.SL,this.element=Be.R3(tt,Be.$(".suggest-status-bar"));const en=Ct=>Ct instanceof ye.U8?St.createInstance(Ht,Ct,void 0):void 0;this._leftActions=new ft.o(this.element,{actionViewItemProvider:en}),this._rightActions=new ft.o(this.element,{actionViewItemProvider:en}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const tt=this._menuService.createMenu(we.GI,this._contextKeyService),St=()=>{const Pt=[],Yt=[];for(let[en,Ct]of tt.getActions())en==="left"?Pt.push(...Ct):Yt.push(...Ct);this._leftActions.clear(),this._leftActions.push(Pt),this._rightActions.clear(),this._rightActions.push(Yt)};this._menuDisposables.add(tt.onDidChange(()=>St())),this._menuDisposables.add(tt)}hide(){this._menuDisposables.clear()}};Kt=An([Fn(1,W.TG),Fn(2,ye.co),Fn(3,ee.i6)],Kt);var pn=a(71713),Vn=a(73910),kt=a(88810),Zt=a(97781),wn=a(73098);class Pi{constructor(){this._onDidWillResize=new j.Q5,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new j.Q5,this.onDidResize=this._onDidResize.event,this._sashListener=new B.SL,this._size=new Be.Ro(0,0),this._minSize=new Be.Ro(0,0),this._maxSize=new Be.Ro(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new wn.g(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new wn.g(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new wn.g(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:wn.l.North}),this._southSash=new wn.g(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:wn.l.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let tt,St=0,Pt=0;this._sashListener.add(j.ju.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{tt===void 0&&(this._onDidWillResize.fire(),tt=this._size,St=0,Pt=0)})),this._sashListener.add(j.ju.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{tt!==void 0&&(tt=void 0,St=0,Pt=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(Yt=>{tt&&(Pt=Yt.currentX-Yt.startX,this.layout(tt.height+St,tt.width+Pt),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(Yt=>{tt&&(Pt=-(Yt.currentX-Yt.startX),this.layout(tt.height+St,tt.width+Pt),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(Yt=>{tt&&(St=-(Yt.currentY-Yt.startY),this.layout(tt.height+St,tt.width+Pt),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(Yt=>{tt&&(St=Yt.currentY-Yt.startY,this.layout(tt.height+St,tt.width+Pt),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(j.ju.any(this._eastSash.onDidReset,this._westSash.onDidReset)(Yt=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(j.ju.any(this._northSash.onDidReset,this._southSash.onDidReset)(Yt=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(tt,St,Pt,Yt){this._northSash.state=tt?3:0,this._eastSash.state=St?3:0,this._southSash.state=Pt?3:0,this._westSash.state=Yt?3:0}layout(tt=this.size.height,St=this.size.width){const{height:Pt,width:Yt}=this._minSize,{height:en,width:Ct}=this._maxSize;tt=Math.max(Pt,Math.min(en,tt)),St=Math.max(Yt,Math.min(Ct,St));const J=new Be.Ro(St,tt);Be.Ro.equals(J,this._size)||(this.domNode.style.height=tt+"px",this.domNode.style.width=St+"px",this._size=J,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(tt){this._maxSize=tt}get maxSize(){return this._maxSize}set minSize(tt){this._minSize=tt}get minSize(){return this._minSize}set preferredSize(tt){this._preferredSize=tt}get preferredSize(){return this._preferredSize}}var Fi=a(16268),Ji=a(9802),si=a(73046),zt=a(59365),Vt=a(498),vn=a(64141),Sn=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},Bn=function(li,tt){return function(St,Pt){tt(St,Pt,li)}};function mn(li){return!!li&&Boolean(li.completion.documentation||li.completion.detail&&li.completion.detail!==li.completion.label)}let Jt=class{constructor(tt,St){this._editor=tt,this._onDidClose=new j.Q5,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new j.Q5,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new B.SL,this._renderDisposeable=new B.SL,this._borderWidth=1,this._size=new Be.Ro(330,0),this.domNode=Be.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=St.createInstance(Vt.$,{editor:tt}),this._body=Be.$(".body"),this._scrollbar=new Ji.s$(this._body,{}),Be.R3(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Be.R3(this._body,Be.$(".header")),this._close=Be.R3(this._header,Be.$("span"+si.lA.close.cssSelector)),this._close.title=Ce.N("details.close","Close"),this._type=Be.R3(this._header,Be.$("p.type")),this._docs=Be.R3(this._body,Be.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(Pt=>{Pt.hasChanged(44)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const tt=this._editor.getOptions(),St=tt.get(44),Pt=St.getMassagedFontFamily(Fi.isSafari?vn.hL.fontFamily:null),Yt=tt.get(107)||St.fontSize,en=tt.get(108)||St.lineHeight,Ct=St.fontWeight,J=`${Yt}px`,Ae=`${en}px`;this.domNode.style.fontSize=J,this.domNode.style.lineHeight=`${en/Yt}`,this.domNode.style.fontWeight=Ct,this.domNode.style.fontFeatureSettings=St.fontFeatureSettings,this._type.style.fontFamily=Pt,this._close.style.height=Ae,this._close.style.width=Ae}getLayoutInfo(){const tt=this._editor.getOption(108)||this._editor.getOption(44).lineHeight,St=this._borderWidth,Pt=St*2;return{lineHeight:tt,borderWidth:St,borderHeight:Pt,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=Ce.N("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(tt,St){var Pt,Yt;this._renderDisposeable.clear();let{detail:en,documentation:Ct}=tt.completion;if(St){let J="";J+=`score: ${tt.score[0]}
`,J+=`prefix: ${(Pt=tt.word)!==null&&Pt!==void 0?Pt:"(no prefix)"}
`,J+=`word: ${tt.completion.filterText?tt.completion.filterText+" (filterText)":tt.textLabel}
`,J+=`distance: ${tt.distance} (localityBonus-setting)
`,J+=`index: ${tt.idx}, based on ${tt.completion.sortText&&`sortText: "${tt.completion.sortText}"`||"label"}
`,J+=`commit_chars: ${(Yt=tt.completion.commitCharacters)===null||Yt===void 0?void 0:Yt.join("")}
`,Ct=new zt.W5().appendCodeblock("empty",J),en=`Provider: ${tt.provider._debugDisplayName}`}if(!St&&!mn(tt)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),en){const J=en.length>1e5?`${en.substr(0,1e5)}\u2026`:en;this._type.textContent=J,this._type.title=J,Be.$Z(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(J))}else Be.PO(this._type),this._type.title="",Be.Cp(this._type),this.domNode.classList.add("no-type");if(Be.PO(this._docs),typeof Ct=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=Ct;else if(Ct){this._docs.classList.add("markdown-docs"),Be.PO(this._docs);const J=this._markdownRenderer.render(Ct);this._docs.appendChild(J.element),this._renderDisposeable.add(J),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=J=>{J.preventDefault(),J.stopPropagation()},this._close.onclick=J=>{J.preventDefault(),J.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(tt,St){const Pt=new Be.Ro(tt,St);Be.Ro.equals(Pt,this._size)||(this._size=Pt,Be.dp(this.domNode,tt,St)),this._scrollbar.scanDomNode()}scrollDown(tt=8){this._body.scrollTop+=tt}scrollUp(tt=8){this._body.scrollTop-=tt}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(tt){this._borderWidth=tt}get borderWidth(){return this._borderWidth}};Jt=Sn([Bn(1,W.TG)],Jt);class En{constructor(tt,St){this.widget=tt,this._editor=St,this._disposables=new B.SL,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new Pi,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(tt.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let Pt,Yt,en=0,Ct=0;this._disposables.add(this._resizable.onDidWillResize(()=>{Pt=this._topLeft,Yt=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(J=>{if(Pt&&Yt){this.widget.layout(J.dimension.width,J.dimension.height);let Ae=!1;J.west&&(Ct=Yt.width-J.dimension.width,Ae=!0),J.north&&(en=Yt.height-J.dimension.height,Ae=!0),Ae&&this._applyTopLeft({top:Pt.top+en,left:Pt.left+Ct})}J.done&&(Pt=void 0,Yt=void 0,en=0,Ct=0,this._userSize=J.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var J;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(J=this._userSize)!==null&&J!==void 0?J:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(tt=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),tt&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(tt,St){var Pt;const Yt=tt.getBoundingClientRect();this._anchorBox=Yt,this._preferAlignAtTop=St,this._placeAtAnchor(this._anchorBox,(Pt=this._userSize)!==null&&Pt!==void 0?Pt:this.widget.size,St)}_placeAtAnchor(tt,St,Pt){var Yt;const en=Be.D6(document.body),Ct=this.widget.getLayoutInfo(),J=new Be.Ro(220,2*Ct.lineHeight),Ae=tt.top,ot=function(){const Nt=en.width-(tt.left+tt.width+Ct.borderWidth+Ct.horizontalPadding),It=-Ct.borderWidth+tt.left+tt.width,Ft=new Be.Ro(Nt,en.height-tt.top-Ct.borderHeight-Ct.verticalPadding),jt=Ft.with(void 0,tt.top+tt.height-Ct.borderHeight-Ct.verticalPadding);return{top:Ae,left:It,fit:Nt-St.width,maxSizeTop:Ft,maxSizeBottom:jt,minSize:J.with(Math.min(Nt,J.width))}}(),Ee=function(){const Nt=tt.left-Ct.borderWidth-Ct.horizontalPadding,It=Math.max(Ct.horizontalPadding,tt.left-St.width-Ct.borderWidth),Ft=new Be.Ro(Nt,en.height-tt.top-Ct.borderHeight-Ct.verticalPadding),jt=Ft.with(void 0,tt.top+tt.height-Ct.borderHeight-Ct.verticalPadding);return{top:Ae,left:It,fit:Nt-St.width,maxSizeTop:Ft,maxSizeBottom:jt,minSize:J.with(Math.min(Nt,J.width))}}(),m=function(){const Nt=tt.left,It=-Ct.borderWidth+tt.top+tt.height,Ft=new Be.Ro(tt.width-Ct.borderHeight,en.height-tt.top-tt.height-Ct.verticalPadding);return{top:It,left:Nt,fit:Ft.height-St.height,maxSizeBottom:Ft,maxSizeTop:Ft,minSize:J.with(Ft.width)}}(),V=[ot,Ee,m],G=(Yt=V.find(Nt=>Nt.fit>=0))!==null&&Yt!==void 0?Yt:V.sort((Nt,It)=>It.fit-Nt.fit)[0],ce=tt.top+tt.height-Ct.borderHeight;let ve,De=St.height;const ct=Math.max(G.maxSizeTop.height,G.maxSizeBottom.height);De>ct&&(De=ct);let lt;Pt?De<=G.maxSizeTop.height?(ve=!0,lt=G.maxSizeTop):(ve=!1,lt=G.maxSizeBottom):De<=G.maxSizeBottom.height?(ve=!1,lt=G.maxSizeBottom):(ve=!0,lt=G.maxSizeTop),this._applyTopLeft({left:G.left,top:ve?G.top:ce-De}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!ve,G===ot,ve,G!==ot),this._resizable.minSize=G.minSize,this._resizable.maxSize=lt,this._resizable.layout(De,Math.min(lt.width,St.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(tt){this._topLeft=tt,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var $t=a(48801),sn=a(70666),Tn=a(66663),ri=a(95935),oi=a(68801),On;(function(li){li[li.FILE=0]="FILE",li[li.FOLDER=1]="FOLDER",li[li.ROOT_FOLDER=2]="ROOT_FOLDER"})(On||(On={}));const Qn=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function Yi(li,tt,St,Pt){const Yt=Pt===On.ROOT_FOLDER?["rootfolder-icon"]:Pt===On.FOLDER?["folder-icon"]:["file-icon"];if(St){let en;if(St.scheme===Tn.lg.data)en=ri.Vb.parseMetaData(St).get(ri.Vb.META_DATA_LABEL);else{const Ct=St.path.match(Qn);Ct?(en=Dr(Ct[2].toLowerCase()),Ct[1]&&Yt.push(`${Dr(Ct[1].toLowerCase())}-name-dir-icon`)):en=Dr(St.authority.toLowerCase())}if(Pt===On.FOLDER)Yt.push(`${en}-name-folder-icon`);else{if(en){if(Yt.push(`${en}-name-file-icon`),Yt.push("name-file-icon"),en.length<=255){const J=en.split(".");for(let Ae=1;Ae<J.length;Ae++)Yt.push(`${J.slice(Ae).join(".")}-ext-file-icon`)}Yt.push("ext-file-icon")}const Ct=Lr(li,tt,St);Ct&&Yt.push(`${Dr(Ct)}-lang-file-icon`)}}return Yt}function Lr(li,tt,St){if(!St)return null;let Pt=null;if(St.scheme===Tn.lg.data){const en=ri.Vb.parseMetaData(St).get(ri.Vb.META_DATA_MIME);en&&(Pt=tt.getLanguageIdByMimeType(en))}else{const Yt=li.getModel(St);Yt&&(Pt=Yt.getLanguageId())}return Pt&&Pt!==oi.bd?Pt:tt.guessLanguageIdByFilepathOrFirstLine(St)}function Dr(li){return li.replace(/[\11\12\14\15\40]/g,"/")}var Fr=a(73733),Sr=a(72042),Ro=a(59554),to=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},no=function(li,tt){return function(St,Pt){tt(St,Pt,li)}},dr;function kn(li){return`suggest-aria-id:${li}`}const bt=(0,Ro.q5)("suggest-more-info",si.lA.chevronRight,Ce.N("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),Bt=new(dr=class bp{extract(tt,St){if(tt.textLabel.match(bp._regexStrict))return St[0]=tt.textLabel,!0;if(tt.completion.detail&&tt.completion.detail.match(bp._regexStrict))return St[0]=tt.completion.detail,!0;if(typeof tt.completion.documentation=="string"){const Pt=bp._regexRelaxed.exec(tt.completion.documentation);if(Pt&&(Pt.index===0||Pt.index+Pt[0].length===tt.completion.documentation.length))return St[0]=Pt[0],!0}return!1}},dr._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,dr._regexStrict=new RegExp(`^${dr._regexRelaxed.source}$`,"i"),dr);let At=class{constructor(tt,St,Pt,Yt){this._editor=tt,this._modelService=St,this._languageService=Pt,this._themeService=Yt,this._onDidToggleDetails=new j.Q5,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(tt){const St=Object.create(null);St.disposables=new B.SL,St.root=tt,St.root.classList.add("show-file-icons"),St.icon=(0,Be.R3)(tt,(0,Be.$)(".icon")),St.colorspan=(0,Be.R3)(St.icon,(0,Be.$)("span.colorspan"));const Pt=(0,Be.R3)(tt,(0,Be.$)(".contents")),Yt=(0,Be.R3)(Pt,(0,Be.$)(".main"));St.iconContainer=(0,Be.R3)(Yt,(0,Be.$)(".icon-label.codicon")),St.left=(0,Be.R3)(Yt,(0,Be.$)("span.left")),St.right=(0,Be.R3)(Yt,(0,Be.$)("span.right")),St.iconLabel=new $t.g(St.left,{supportHighlights:!0,supportIcons:!0}),St.disposables.add(St.iconLabel),St.parametersLabel=(0,Be.R3)(St.left,(0,Be.$)("span.signature-label")),St.qualifierLabel=(0,Be.R3)(St.left,(0,Be.$)("span.qualifier-label")),St.detailsLabel=(0,Be.R3)(St.right,(0,Be.$)("span.details-label")),St.readMore=(0,Be.R3)(St.right,(0,Be.$)("span.readMore"+Zt.kS.asCSSSelector(bt))),St.readMore.title=Ce.N("readMore","Read More");const en=()=>{const Ct=this._editor.getOptions(),J=Ct.get(44),Ae=J.getMassagedFontFamily(Fi.isSafari?vn.hL.fontFamily:null),ot=J.fontFeatureSettings,Ee=Ct.get(107)||J.fontSize,m=Ct.get(108)||J.lineHeight,V=J.fontWeight,G=`${Ee}px`,ce=`${m}px`;St.root.style.fontSize=G,St.root.style.fontWeight=V,Yt.style.fontFamily=Ae,Yt.style.fontFeatureSettings=ot,Yt.style.lineHeight=ce,St.icon.style.height=ce,St.icon.style.width=ce,St.readMore.style.height=ce,St.readMore.style.width=ce};return en(),St.disposables.add(this._editor.onDidChangeConfiguration(Ct=>{(Ct.hasChanged(44)||Ct.hasChanged(107)||Ct.hasChanged(108))&&en()})),St}renderElement(tt,St,Pt){const{completion:Yt}=tt;Pt.root.id=kn(St),Pt.colorspan.style.backgroundColor="";const en={labelEscapeNewLines:!0,matches:(0,Ge.mB)(tt.score)};let Ct=[];if(Yt.kind===19&&Bt.extract(tt,Ct))Pt.icon.className="icon customcolor",Pt.iconContainer.className="icon hide",Pt.colorspan.style.backgroundColor=Ct[0];else if(Yt.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){Pt.icon.className="icon hide",Pt.iconContainer.className="icon hide";const J=Yi(this._modelService,this._languageService,sn.o.from({scheme:"fake",path:tt.textLabel}),On.FILE),Ae=Yi(this._modelService,this._languageService,sn.o.from({scheme:"fake",path:Yt.detail}),On.FILE);en.extraClasses=J.length>Ae.length?J:Ae}else Yt.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(Pt.icon.className="icon hide",Pt.iconContainer.className="icon hide",en.extraClasses=(0,d.xH)([Yi(this._modelService,this._languageService,sn.o.from({scheme:"fake",path:tt.textLabel}),On.FOLDER),Yi(this._modelService,this._languageService,sn.o.from({scheme:"fake",path:Yt.detail}),On.FOLDER)])):(Pt.icon.className="icon hide",Pt.iconContainer.className="",Pt.iconContainer.classList.add("suggest-icon",...si.dT.asClassNameArray(b.gX.toIcon(Yt.kind))));Yt.tags&&Yt.tags.indexOf(1)>=0&&(en.extraClasses=(en.extraClasses||[]).concat(["deprecated"]),en.matches=[]),Pt.iconLabel.setLabel(tt.textLabel,void 0,en),typeof Yt.label=="string"?(Pt.parametersLabel.textContent="",Pt.detailsLabel.textContent=Ke(Yt.detail||""),Pt.root.classList.add("string-label")):(Pt.parametersLabel.textContent=Ke(Yt.label.detail||""),Pt.detailsLabel.textContent=Ke(Yt.label.description||""),Pt.root.classList.remove("string-label")),this._editor.getOption(106).showInlineDetails?(0,Be.$Z)(Pt.detailsLabel):(0,Be.Cp)(Pt.detailsLabel),mn(tt)?(Pt.right.classList.add("can-expand-details"),(0,Be.$Z)(Pt.readMore),Pt.readMore.onmousedown=J=>{J.stopPropagation(),J.preventDefault()},Pt.readMore.onclick=J=>{J.stopPropagation(),J.preventDefault(),this._onDidToggleDetails.fire()}):(Pt.right.classList.remove("can-expand-details"),(0,Be.Cp)(Pt.readMore),Pt.readMore.onmousedown=null,Pt.readMore.onclick=null)}disposeTemplate(tt){tt.disposables.dispose()}};At=to([no(1,Fr.q),no(2,Sr.O),no(3,Zt.XE)],At);function Ke(li){return li.replace(/\r\n|\r|\n/g,"")}var vt=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},Lt=function(li,tt){return function(St,Pt){tt(St,Pt,li)}},tn=function(li,tt,St,Pt){function Yt(en){return en instanceof St?en:new St(function(Ct){Ct(en)})}return new(St||(St=Promise))(function(en,Ct){function J(Ee){try{ot(Pt.next(Ee))}catch(m){Ct(m)}}function Ae(Ee){try{ot(Pt.throw(Ee))}catch(m){Ct(m)}}function ot(Ee){Ee.done?en(Ee.value):Yt(Ee.value).then(J,Ae)}ot((Pt=Pt.apply(li,tt||[])).next())})};const dn=(0,Vn.P6G)("editorSuggestWidget.background",{dark:Vn.D0T,light:Vn.D0T,hc:Vn.D0T},Ce.N("editorSuggestWidgetBackground","Background color of the suggest widget.")),hn=(0,Vn.P6G)("editorSuggestWidget.border",{dark:Vn.D1_,light:Vn.D1_,hc:Vn.D1_},Ce.N("editorSuggestWidgetBorder","Border color of the suggest widget.")),Wn=(0,Vn.P6G)("editorSuggestWidget.foreground",{dark:Vn.NOs,light:Vn.NOs,hc:Vn.NOs},Ce.N("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),Gn=(0,Vn.P6G)("editorSuggestWidget.selectedForeground",{dark:Vn.NPS,light:Vn.NPS,hc:Vn.NPS},Ce.N("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),wi=(0,Vn.P6G)("editorSuggestWidget.selectedIconForeground",{dark:Vn.cbQ,light:Vn.cbQ,hc:Vn.cbQ},Ce.N("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),Ci=(0,Vn.P6G)("editorSuggestWidget.selectedBackground",{dark:Vn.Vqd,light:Vn.Vqd,hc:Vn.Vqd},Ce.N("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),Xi=(0,Vn.P6G)("editorSuggestWidget.highlightForeground",{dark:Vn.Gwp,light:Vn.Gwp,hc:Vn.Gwp},Ce.N("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),Nr=(0,Vn.P6G)("editorSuggestWidget.focusHighlightForeground",{dark:Vn.PX0,light:Vn.PX0,hc:Vn.PX0},Ce.N("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),yr=(0,Vn.P6G)("editorSuggestWidgetStatus.foreground",{dark:(0,Vn.ZnX)(Wn,.5),light:(0,Vn.ZnX)(Wn,.5),hc:(0,Vn.ZnX)(Wn,.5)},Ce.N("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class Xr{constructor(tt,St){this._service=tt,this._key=`suggestWidget.size/${St.getEditorType()}/${St instanceof Xe.H}`}restore(){var tt;const St=(tt=this._service.get(this._key,0))!==null&&tt!==void 0?tt:"";try{const Pt=JSON.parse(St);if(Be.Ro.is(Pt))return Be.Ro.lift(Pt)}catch(Pt){}}store(tt){this._service.store(this._key,JSON.stringify(tt),0,1)}reset(){this._service.remove(this._key,0)}}let Jr=class E0{constructor(tt,St,Pt,Yt,en){this.editor=tt,this._storageService=St,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new z._F,this._disposables=new B.SL,this._onDidSelect=new j.Q5,this._onDidFocus=new j.Q5,this._onDidHide=new j.Q5,this._onDidShow=new j.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new j.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Pi,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new $o(this,tt),this._persistedSize=new Xr(St,tt);class Ct{constructor(G,ce,ve=!1,De=!1){this.persistedSize=G,this.currentSize=ce,this.persistHeight=ve,this.persistWidth=De}}let J;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),J=new Ct(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(V=>{var G,ce,ve,De;if(this._resize(V.dimension.width,V.dimension.height),J&&(J.persistHeight=J.persistHeight||!!V.north||!!V.south,J.persistWidth=J.persistWidth||!!V.east||!!V.west),!!V.done){if(J){const{itemHeight:ct,defaultSize:lt}=this.getLayoutInfo(),Nt=Math.round(ct/2);let{width:It,height:Ft}=this.element.size;(!J.persistHeight||Math.abs(J.currentSize.height-Ft)<=Nt)&&(Ft=(ce=(G=J.persistedSize)===null||G===void 0?void 0:G.height)!==null&&ce!==void 0?ce:lt.height),(!J.persistWidth||Math.abs(J.currentSize.width-It)<=Nt)&&(It=(De=(ve=J.persistedSize)===null||ve===void 0?void 0:ve.width)!==null&&De!==void 0?De:lt.width),this._persistedSize.store(new Be.Ro(It,Ft))}this._contentWidget.unlockPreference(),J=void 0}})),this._messageElement=Be.R3(this.element.domNode,Be.$(".message")),this._listElement=Be.R3(this.element.domNode,Be.$(".tree"));const Ae=en.createInstance(Jt,this.editor);Ae.onDidClose(this.toggleDetails,this,this._disposables),this._details=new En(Ae,this.editor);const ot=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(106).showIcons);ot();const Ee=en.createInstance(At,this.editor);this._disposables.add(Ee),this._disposables.add(Ee.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Et.aV("SuggestWidget",this._listElement,{getHeight:V=>this.getLayoutInfo().itemHeight,getTemplateId:V=>"suggestion"},[Ee],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>Ce.N("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:V=>{let G=V.textLabel;if(typeof V.completion.label!="string"){const{detail:ct,description:lt}=V.completion.label;ct&&lt?G=Ce.N("label.full","{0}{1}, {2}",G,ct,lt):ct?G=Ce.N("label.detail","{0}{1}",G,ct):lt&&(G=Ce.N("label.desc","{0}, {1}",G,lt))}if(!V.isResolved||!this._isDetailsVisible())return G;const{documentation:ce,detail:ve}=V.completion,De=Je.WU("{0}{1}",ve||"",ce?typeof ce=="string"?ce:ce.value:"");return Ce.N("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",G,De)}}}),this._status=en.createInstance(Kt,this.element.domNode);const m=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(106).showStatusBar);m(),this._disposables.add((0,kt.Jl)(this._list,Yt,{listInactiveFocusBackground:Ci,listInactiveFocusOutline:Vn.xL1})),this._disposables.add(Yt.onDidColorThemeChange(V=>this._onThemeChange(V))),this._onThemeChange(Yt.getColorTheme()),this._disposables.add(this._list.onMouseDown(V=>this._onListMouseDownOrTap(V))),this._disposables.add(this._list.onTap(V=>this._onListMouseDownOrTap(V))),this._disposables.add(this._list.onDidChangeSelection(V=>this._onListSelection(V))),this._disposables.add(this._list.onDidChangeFocus(V=>this._onListFocus(V))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(V=>{V.hasChanged(106)&&(m(),ot())})),this._ctxSuggestWidgetVisible=we._y.Visible.bindTo(Pt),this._ctxSuggestWidgetDetailsVisible=we._y.DetailsVisible.bindTo(Pt),this._ctxSuggestWidgetMultipleSuggestions=we._y.MultipleSuggestions.bindTo(Pt),this._disposables.add(Be.mu(this._details.widget.domNode,"keydown",V=>{this._onDetailsKeydown.fire(V)})),this._disposables.add(this.editor.onMouseDown(V=>this._onEditorMouseDown(V)))}dispose(){var tt;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(tt=this._loadingTimeout)===null||tt===void 0||tt.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(tt){this._details.widget.domNode.contains(tt.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(tt.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(tt){typeof tt.element=="undefined"||typeof tt.index=="undefined"||(tt.browserEvent.preventDefault(),tt.browserEvent.stopPropagation(),this._select(tt.element,tt.index))}_onListSelection(tt){tt.elements.length&&this._select(tt.elements[0],tt.indexes[0])}_select(tt,St){const Pt=this._completionModel;Pt&&(this._onDidSelect.fire({item:tt,index:St,model:Pt}),this.editor.focus())}_onThemeChange(tt){this._details.widget.borderWidth=tt.type==="hc"?2:1}_onListFocus(tt){var St;if(this._ignoreFocusEvents)return;if(!tt.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const Pt=tt.elements[0],Yt=tt.indexes[0];Pt!==this._focusedItem&&((St=this._currentSuggestionDetails)===null||St===void 0||St.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=Pt,this._list.reveal(Yt),this._currentSuggestionDetails=(0,z.PG)(en=>tn(this,void 0,void 0,function*(){const Ct=(0,z.Vg)(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),J=en.onCancellationRequested(()=>Ct.dispose()),Ae=yield Pt.resolve(en);return Ct.dispose(),J.dispose(),Ae})),this._currentSuggestionDetails.then(()=>{Yt>=this._list.length||Pt!==this._list.element(Yt)||(this._ignoreFocusEvents=!0,this._list.splice(Yt,1,[Pt]),this._list.setFocus([Yt]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:kn(Yt)}))}).catch(S.dL)),this._onDidFocus.fire({item:Pt,index:Yt,model:this._completionModel})}_setState(tt){if(this._state!==tt)switch(this._state=tt,this.element.domNode.classList.toggle("frozen",tt===4),this.element.domNode.classList.remove("message"),tt){case 0:Be.Cp(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=E0.LOADING_MESSAGE,Be.Cp(this._listElement,this._status.element),Be.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=E0.NO_SUGGESTIONS_MESSAGE,Be.Cp(this._listElement,this._status.element),Be.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Be.Cp(this._messageElement),Be.$Z(this._listElement,this._status.element),this._show();break;case 4:Be.Cp(this._messageElement),Be.$Z(this._listElement,this._status.element),this._show();break;case 5:Be.Cp(this._messageElement),Be.$Z(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(tt,St){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!tt,this._isAuto||(this._loadingTimeout=(0,z.Vg)(()=>this._setState(1),St)))}showSuggestions(tt,St,Pt,Yt){var en,Ct;if(this._contentWidget.setPosition(this.editor.getPosition()),(en=this._loadingTimeout)===null||en===void 0||en.dispose(),(Ct=this._currentSuggestionDetails)===null||Ct===void 0||Ct.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==tt&&(this._completionModel=tt),Pt&&this._state!==2&&this._state!==0){this._setState(4);return}const J=this._completionModel.items.length,Ae=J===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(J>1),Ae){this._setState(Yt?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(Pt?4:3),this._list.reveal(St,0),this._list.setFocus([St]),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(mn(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(tt){this._details.show(),tt?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var tt;(tt=this._loadingTimeout)===null||tt===void 0||tt.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const St=this._persistedSize.restore(),Pt=Math.ceil(this.getLayoutInfo().itemHeight*4.3);St&&St.height<Pt&&this._persistedSize.store(St.with(void 0,Pt))}isFrozen(){return this._state===4}_afterRender(tt){if(tt===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(tt){var St,Pt,Yt;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const en=Be.D6(document.body),Ct=this.getLayoutInfo();tt||(tt=Ct.defaultSize);let J=tt.height,Ae=tt.width;if(this._status.element.style.lineHeight=`${Ct.itemHeight}px`,this._state===2||this._state===1)J=Ct.itemHeight+Ct.borderHeight,Ae=Ct.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Be.Ro(Ae,J),this._contentWidget.setPreference(2);else{const ot=en.width-Ct.borderHeight-2*Ct.horizontalPadding;Ae>ot&&(Ae=ot);const Ee=this._completionModel?this._completionModel.stats.pLabelLen*Ct.typicalHalfwidthCharacterWidth:Ae,m=Ct.statusBarHeight+this._list.contentHeight+Ct.borderHeight,V=Ct.itemHeight+Ct.statusBarHeight,G=Be.i(this.editor.getDomNode()),ce=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),ve=G.top+ce.top+ce.height,De=Math.min(en.height-ve-Ct.verticalPadding,m),ct=G.top+ce.top-Ct.verticalPadding,lt=Math.min(ct,m);let Nt=Math.min(Math.max(lt,De)+Ct.borderHeight,m);J===((St=this._cappedHeight)===null||St===void 0?void 0:St.capped)&&(J=this._cappedHeight.wanted),J<V&&(J=V),J>Nt&&(J=Nt);const It=150;J>De||this._forceRenderingAbove&&ct>It?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),Nt=lt):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),Nt=De),this.element.preferredSize=new Be.Ro(Ee,Ct.defaultSize.height),this.element.maxSize=new Be.Ro(ot,Nt),this.element.minSize=new Be.Ro(220,V),this._cappedHeight=J===m?{wanted:(Yt=(Pt=this._cappedHeight)===null||Pt===void 0?void 0:Pt.wanted)!==null&&Yt!==void 0?Yt:tt.height,capped:J}:void 0}this._resize(Ae,J)}_resize(tt,St){const{width:Pt,height:Yt}=this.element.maxSize;tt=Math.min(Pt,tt),St=Math.min(Yt,St);const{statusBarHeight:en}=this.getLayoutInfo();this._list.layout(St-en,tt),this._listElement.style.height=`${St-en}px`,this.element.layout(St,tt),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var tt;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((tt=this._contentWidget.getPosition())===null||tt===void 0?void 0:tt.preference[0])===2)}getLayoutInfo(){const tt=this.editor.getOption(44),St=(0,Dt.uZ)(this.editor.getOption(108)||tt.lineHeight,8,1e3),Pt=!this.editor.getOption(106).showStatusBar||this._state===2||this._state===1?0:St,Yt=this._details.widget.borderWidth,en=2*Yt;return{itemHeight:St,statusBarHeight:Pt,borderWidth:Yt,borderHeight:en,typicalHalfwidthCharacterWidth:tt.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Be.Ro(430,Pt+12*St+en)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(tt){this._storageService.store("expandSuggestionDocs",tt,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};Jr.LOADING_MESSAGE=Ce.N("suggestWidget.loading","Loading..."),Jr.NO_SUGGESTIONS_MESSAGE=Ce.N("suggestWidget.noSuggestions","No suggestions."),Jr=vt([Lt(1,q.Uy),Lt(2,ee.i6),Lt(3,Zt.XE),Lt(4,W.TG)],Jr);class $o{constructor(tt,St){this._widget=tt,this._editor=St,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:tt,width:St}=this._widget.element.size,{borderWidth:Pt,horizontalPadding:Yt}=this._widget.getLayoutInfo();return new Be.Ro(St+2*Pt+Yt,tt+2*Pt)}afterRender(tt){this._widget._afterRender(tt)}setPreference(tt){this._preferenceLocked||(this._preference=tt)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(tt){this._position=tt}}var ms=a(89954),cs=function(li,tt,St,Pt){var Yt=arguments.length,en=Yt<3?tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(tt,St):Pt,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")en=Reflect.decorate(li,tt,St,Pt);else for(var J=li.length-1;J>=0;J--)(Ct=li[J])&&(en=(Yt<3?Ct(en):Yt>3?Ct(tt,St,en):Ct(tt,St))||en);return Yt>3&&en&&Object.defineProperty(tt,St,en),en},nr=function(li,tt){return function(St,Pt){tt(St,Pt,li)}};let tr=!1;class Br{constructor(tt,St){if(this._model=tt,this._position=St,tt.getLineMaxColumn(St.lineNumber)!==St.column){const Yt=tt.getOffsetAt(St),en=tt.getPositionAt(Yt+1);this._marker=tt.deltaDecorations([],[{range:M.e.fromPositions(St,en),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(tt){if(this._model.isDisposed()||this._position.lineNumber!==tt.lineNumber)return 0;if(this._marker){const St=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(St.getStartPosition())-this._model.getOffsetAt(tt)}else return this._model.getLineMaxColumn(tt.lineNumber)-tt.column}}let Mr=class DS{constructor(tt,St,Pt,Yt,en,Ct,J){this._memoryService=St,this._commandService=Pt,this._contextKeyService=Yt,this._instantiationService=en,this._logService=Ct,this._telemetryService=J,this._lineSuffix=new B.XK,this._toDispose=new B.SL,this._selectors=new so(m=>m.priority),this._telemetryGate=0,this.editor=tt,this.model=en.createInstance(at,this.editor);const Ae=we._y.InsertMode.bindTo(Yt);Ae.set(tt.getOption(106).insertMode),this.model.onDidTrigger(()=>Ae.set(tt.getOption(106).insertMode)),this.widget=this._toDispose.add(new z.Ue(()=>{const m=this._instantiationService.createInstance(Jr,this.editor);this._toDispose.add(m),this._toDispose.add(m.onDidSelect(De=>this._insertSuggestion(De,0),this));const V=new qe(this.editor,m,De=>this._insertSuggestion(De,2));this._toDispose.add(V),this._toDispose.add(this.model.onDidSuggest(De=>{De.completionModel.items.length===0&&V.reset()}));const G=we._y.MakesTextEdit.bindTo(this._contextKeyService),ce=we._y.HasInsertAndReplaceRange.bindTo(this._contextKeyService),ve=we._y.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,B.OF)(()=>{G.reset(),ce.reset(),ve.reset()})),this._toDispose.add(m.onDidFocus(({item:De})=>{const ct=this.editor.getPosition(),lt=De.editStart.column,Nt=ct.column;let It=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!De.completion.additionalTextEdits&&!(De.completion.insertTextRules&4)&&Nt-lt===De.completion.insertText.length&&(It=this.editor.getModel().getValueInRange({startLineNumber:ct.lineNumber,startColumn:lt,endLineNumber:ct.lineNumber,endColumn:Nt})!==De.completion.insertText),G.set(It),ce.set(!C.L.equals(De.editInsertEnd,De.editReplaceEnd)),ve.set(Boolean(De.provider.resolveCompletionItem)||Boolean(De.completion.documentation)||De.completion.detail!==De.completion.label)})),this._toDispose.add(m.onDetailsKeyDown(De=>{if(De.toKeybinding().equals(new T.QC(!0,!1,!1,!1,33))||F.dz&&De.toKeybinding().equals(new T.QC(!1,!1,!1,!0,33))){De.stopPropagation();return}De.toKeybinding().isModifierKey()||this.editor.focus()})),m})),this._overtypingCapturer=this._toDispose.add(new z.Ue(()=>this._toDispose.add(new pt(this.editor,this.model)))),this._alternatives=this._toDispose.add(new z.Ue(()=>this._toDispose.add(new Pe(this.editor,this._contextKeyService)))),this._toDispose.add(en.createInstance(oe,tt)),this._toDispose.add(this.model.onDidTrigger(m=>{this.widget.value.showTriggered(m.auto,m.shy?250:50),this._lineSuffix.value=new Br(this.editor.getModel(),m.position)})),this._toDispose.add(this.model.onDidSuggest(m=>{if(!m.shy){let V=-1;for(const G of this._selectors.itemsOrderedByPriorityDesc)if(V=G.select(this.editor.getModel(),this.editor.getPosition(),m.completionModel.items),V!==-1)break;V===-1&&(V=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),m.completionModel.items)),this.widget.value.showSuggestions(m.completionModel,V,m.isFrozen,m.auto)}})),this._toDispose.add(this.model.onDidCancel(m=>{m.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{tr||(this.model.cancel(),this.model.clear())}));let ot=we._y.AcceptSuggestionsOnEnter.bindTo(Yt),Ee=()=>{const m=this.editor.getOption(1);ot.set(m==="on"||m==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>Ee())),Ee()}static get(tt){return tt.getContribution(DS.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(tt,St){if(!tt||!tt.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const Pt=_.SnippetController2.get(this.editor);if(!Pt)return;const Yt=this.editor.getModel(),en=Yt.getAlternativeVersionId(),{item:Ct}=tt,J=[],Ae=new O.A;St&1||this.editor.pushUndoStop();const ot=this.getOverwriteInfo(Ct,Boolean(St&8));if(this._memoryService.memorize(Yt,this.editor.getPosition(),Ct),Array.isArray(Ct.completion.additionalTextEdits)){const m=g.Z.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",Ct.completion.additionalTextEdits.map(V=>c.h.replace(M.e.lift(V.range),V.text))),m.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!Ct.isResolved){const m=new x.G(!0);let V;const G=Yt.onDidChangeContent(ct=>{if(ct.isFlush){Ae.cancel(),G.dispose();return}for(let lt of ct.changes){const Nt=M.e.getEndPosition(lt.range);(!V||C.L.isBefore(Nt,V))&&(V=Nt)}});let ce=St;St|=2;let ve=!1,De=this.editor.onWillType(()=>{De.dispose(),ve=!0,ce&2||this.editor.pushUndoStop()});J.push(Ct.resolve(Ae.token).then(()=>{if(!Ct.completion.additionalTextEdits||Ae.token.isCancellationRequested||V&&Ct.completion.additionalTextEdits.some(lt=>C.L.isBefore(V,M.e.getStartPosition(lt.range))))return!1;ve&&this.editor.pushUndoStop();const ct=g.Z.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",Ct.completion.additionalTextEdits.map(lt=>c.h.replace(M.e.lift(lt.range),lt.text))),ct.restoreRelativeVerticalPositionOfCursor(this.editor),(ve||!(ce&2))&&this.editor.pushUndoStop(),!0}).then(ct=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",m.elapsed(),ct),G.dispose(),De.dispose()}))}let{insertText:Ee}=Ct.completion;Ct.completion.insertTextRules&4||(Ee=L.Yj.escape(Ee)),Pt.insert(Ee,{overwriteBefore:ot.overwriteBefore,overwriteAfter:ot.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(Ct.completion.insertTextRules&1),clipboardText:tt.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),St&2||this.editor.pushUndoStop(),Ct.completion.command?Ct.completion.command.id===jr.id?this.model.trigger({auto:!0,shy:!1},!0):(J.push(this._commandService.executeCommand(Ct.completion.command.id,...Ct.completion.command.arguments?[...Ct.completion.command.arguments]:[]).catch(S.dL)),this.model.cancel()):this.model.cancel(),St&4&&this._alternatives.value.set(tt,m=>{for(Ae.cancel();Yt.canUndo();){en!==Yt.getAlternativeVersionId()&&Yt.undo(),this._insertSuggestion(m,1|2|(St&8?8:0));break}}),this._alertCompletionItem(Ct),Promise.all(J).finally(()=>{this._reportSuggestionAcceptedTelemetry(Yt,tt),this.model.clear(),Ae.dispose()})}_reportSuggestionAcceptedTelemetry(tt,St){var Pt;if(this._telemetryGate++%100!=0)return;const Yt=((Pt=St.item.provider._debugDisplayName)!==null&&Pt!==void 0?Pt:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:Yt,basenameHash:(0,ms.vp)((0,ri.EZ)(tt.uri)).toString(16),languageId:tt.getLanguageId(),fileExtension:(0,ri.DZ)(tt.uri)})}getOverwriteInfo(tt,St){(0,v.p_)(this.editor.hasModel());let Pt=this.editor.getOption(106).insertMode==="replace";St&&(Pt=!Pt);const Yt=tt.position.column-tt.editStart.column,en=(Pt?tt.editReplaceEnd.column:tt.editInsertEnd.column)-tt.position.column,Ct=this.editor.getPosition().column-tt.position.column,J=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:Yt+Ct,overwriteAfter:en+J}}_alertCompletionItem(tt){if((0,d.Of)(tt.completion.additionalTextEdits)){let St=Ce.N("aria.alert.snippet","Accepting '{0}' made {1} additional edits",tt.textLabel,tt.completion.additionalTextEdits.length);(0,p.Z9)(St)}}triggerSuggest(tt,St){this.editor.hasModel()&&(this.model.trigger({auto:St??!1,shy:!1},!1,tt),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(tt){if(!this.editor.hasModel())return;const St=this.editor.getPosition(),Pt=()=>{St.equals(this.editor.getPosition())&&this._commandService.executeCommand(tt.fallback)},Yt=en=>{if(en.completion.insertTextRules&4||en.completion.additionalTextEdits)return!0;const Ct=this.editor.getPosition(),J=en.editStart.column,Ae=Ct.column;return Ae-J!==en.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:Ct.lineNumber,startColumn:J,endLineNumber:Ct.lineNumber,endColumn:Ae})!==en.completion.insertText};j.ju.once(this.model.onDidTrigger)(en=>{let Ct=[];j.ju.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{(0,B.B9)(Ct),Pt()},void 0,Ct),this.model.onDidSuggest(({completionModel:J})=>{if((0,B.B9)(Ct),J.items.length===0){Pt();return}const Ae=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),J.items),ot=J.items[Ae];if(!Yt(ot)){Pt();return}this.editor.pushUndoStop(),this._insertSuggestion({index:Ae,item:ot,model:J},4|1|2)},void 0,Ct)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(St,0),this.editor.focus()}acceptSelectedSuggestion(tt,St){const Pt=this.widget.value.getFocusedItem();let Yt=0;tt&&(Yt|=4),St&&(Yt|=8),this._insertSuggestion(Pt,Yt)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){!this.widget.isInitialized||this.widget.value.stopForceRenderingAbove()}registerSelector(tt){return this._selectors.register(tt)}};Mr.ID="editor.contrib.suggestController",Mr=cs([nr(1,U),nr(2,ke.Hy),nr(3,ee.i6),nr(4,W.TG),nr(5,ge.VZ),nr(6,be.b)],Mr);class so{constructor(tt){this.prioritySelector=tt,this._items=new Array}register(tt){if(this._items.indexOf(tt)!==-1)throw new Error("Value is already registered");return this._items.push(tt),this._items.sort((St,Pt)=>this.prioritySelector(Pt)-this.prioritySelector(St)),{dispose:()=>{const St=this._items.indexOf(tt);St>=0&&this._items.splice(St,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class jr extends D.R6{constructor(){super({id:jr.id,label:Ce.N("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:ee.Ao.and(E.u.writable,E.u.hasCompletionItemProvider),kbOpts:{kbExpr:E.u.textInputFocus,primary:2048|10,secondary:[2048|39],mac:{primary:256|10,secondary:[512|9,2048|39]},weight:100}})}run(tt,St,Pt){const Yt=Mr.get(St);if(!Yt)return;let en;Pt&&typeof Pt=="object"&&Pt.auto===!0&&(en=!0),Yt.triggerSuggest(void 0,en)}}jr.id="editor.action.triggerSuggest",(0,D._K)(Mr.ID,Mr),(0,D.Qr)(jr);const No=100+90,ko=D._l.bindToContribution(Mr.get);(0,D.fK)(new ko({id:"acceptSelectedSuggestion",precondition:we._y.Visible,handler(li){li.acceptSelectedSuggestion(!0,!1)}})),Te.W.registerKeybindingRule({id:"acceptSelectedSuggestion",when:ee.Ao.and(we._y.Visible,E.u.textInputFocus),primary:2,weight:No}),Te.W.registerKeybindingRule({id:"acceptSelectedSuggestion",when:ee.Ao.and(we._y.Visible,E.u.textInputFocus,we._y.AcceptSuggestionsOnEnter,we._y.MakesTextEdit),primary:3,weight:No}),ye.BH.appendMenuItem(we.GI,{command:{id:"acceptSelectedSuggestion",title:Ce.N("accept.insert","Insert")},group:"left",order:1,when:we._y.HasInsertAndReplaceRange.toNegated()}),ye.BH.appendMenuItem(we.GI,{command:{id:"acceptSelectedSuggestion",title:Ce.N("accept.insert","Insert")},group:"left",order:1,when:ee.Ao.and(we._y.HasInsertAndReplaceRange,we._y.InsertMode.isEqualTo("insert"))}),ye.BH.appendMenuItem(we.GI,{command:{id:"acceptSelectedSuggestion",title:Ce.N("accept.replace","Replace")},group:"left",order:1,when:ee.Ao.and(we._y.HasInsertAndReplaceRange,we._y.InsertMode.isEqualTo("replace"))}),(0,D.fK)(new ko({id:"acceptAlternativeSelectedSuggestion",precondition:ee.Ao.and(we._y.Visible,E.u.textInputFocus),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:1024|3,secondary:[1024|2]},handler(li){li.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:we.GI,group:"left",order:2,when:ee.Ao.and(we._y.HasInsertAndReplaceRange,we._y.InsertMode.isEqualTo("insert")),title:Ce.N("accept.replace","Replace")},{menuId:we.GI,group:"left",order:2,when:ee.Ao.and(we._y.HasInsertAndReplaceRange,we._y.InsertMode.isEqualTo("replace")),title:Ce.N("accept.insert","Insert")}]})),ke.P0.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,D.fK)(new ko({id:"hideSuggestWidget",precondition:we._y.Visible,handler:li=>li.cancelSuggestWidget(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:9,secondary:[1024|9]}})),(0,D.fK)(new ko({id:"selectNextSuggestion",precondition:ee.Ao.and(we._y.Visible,we._y.MultipleSuggestions),handler:li=>li.selectNextSuggestion(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:18,secondary:[2048|18],mac:{primary:18,secondary:[2048|18,256|44]}}})),(0,D.fK)(new ko({id:"selectNextPageSuggestion",precondition:ee.Ao.and(we._y.Visible,we._y.MultipleSuggestions),handler:li=>li.selectNextPageSuggestion(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:12,secondary:[2048|12]}})),(0,D.fK)(new ko({id:"selectLastSuggestion",precondition:ee.Ao.and(we._y.Visible,we._y.MultipleSuggestions),handler:li=>li.selectLastSuggestion()})),(0,D.fK)(new ko({id:"selectPrevSuggestion",precondition:ee.Ao.and(we._y.Visible,we._y.MultipleSuggestions),handler:li=>li.selectPrevSuggestion(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:16,secondary:[2048|16],mac:{primary:16,secondary:[2048|16,256|46]}}})),(0,D.fK)(new ko({id:"selectPrevPageSuggestion",precondition:ee.Ao.and(we._y.Visible,we._y.MultipleSuggestions),handler:li=>li.selectPrevPageSuggestion(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:11,secondary:[2048|11]}})),(0,D.fK)(new ko({id:"selectFirstSuggestion",precondition:ee.Ao.and(we._y.Visible,we._y.MultipleSuggestions),handler:li=>li.selectFirstSuggestion()})),(0,D.fK)(new ko({id:"toggleSuggestionDetails",precondition:we._y.Visible,handler:li=>li.toggleSuggestionDetails(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:2048|10,secondary:[2048|39],mac:{primary:256|10,secondary:[2048|39]}},menuOpts:[{menuId:we.GI,group:"right",order:1,when:ee.Ao.and(we._y.DetailsVisible,we._y.CanResolve),title:Ce.N("detail.more","show less")},{menuId:we.GI,group:"right",order:1,when:ee.Ao.and(we._y.DetailsVisible.toNegated(),we._y.CanResolve),title:Ce.N("detail.less","show more")}]})),(0,D.fK)(new ko({id:"toggleExplainMode",precondition:we._y.Visible,handler:li=>li.toggleExplainMode(),kbOpts:{weight:100,primary:2048|85}})),(0,D.fK)(new ko({id:"toggleSuggestionFocus",precondition:we._y.Visible,handler:li=>li.toggleSuggestionFocus(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:2048|512|10,mac:{primary:256|512|10}}})),(0,D.fK)(new ko({id:"insertBestCompletion",precondition:ee.Ao.and(E.u.textInputFocus,ee.Ao.equals("config.editor.tabCompletion","on"),oe.AtEnd,we._y.Visible.toNegated(),Pe.OtherSuggestions.toNegated(),_.SnippetController2.InSnippetMode.toNegated()),handler:(li,tt)=>{li.triggerSuggestAndAcceptBest((0,v.Kn)(tt)?Object.assign({fallback:"tab"},tt):{fallback:"tab"})},kbOpts:{weight:No,primary:2}})),(0,D.fK)(new ko({id:"insertNextSuggestion",precondition:ee.Ao.and(E.u.textInputFocus,ee.Ao.equals("config.editor.tabCompletion","on"),Pe.OtherSuggestions,we._y.Visible.toNegated(),_.SnippetController2.InSnippetMode.toNegated()),handler:li=>li.acceptNextSuggestion(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:2}})),(0,D.fK)(new ko({id:"insertPrevSuggestion",precondition:ee.Ao.and(E.u.textInputFocus,ee.Ao.equals("config.editor.tabCompletion","on"),Pe.OtherSuggestions,we._y.Visible.toNegated(),_.SnippetController2.InSnippetMode.toNegated()),handler:li=>li.acceptPrevSuggestion(),kbOpts:{weight:No,kbExpr:E.u.textInputFocus,primary:1024|2}})),(0,D.Qr)(class extends D.R6{constructor(){super({id:"editor.action.resetSuggestSize",label:Ce.N("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(li,tt){var St;(St=Mr.get(tt))===null||St===void 0||St.resetWidgetSize()}})},71713:function(Tt,me,a){"use strict";var p=a(73046),d=a(63580),z=a(73910),O=a(97781);const S=(0,z.P6G)("symbolIcon.arrayForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),j=(0,z.P6G)("symbolIcon.booleanForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),T=(0,z.P6G)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,d.N)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),B=(0,z.P6G)("symbolIcon.colorForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),F=(0,z.P6G)("symbolIcon.constantForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),x=(0,z.P6G)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,d.N)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),v=(0,z.P6G)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,d.N)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),g=(0,z.P6G)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,d.N)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),D=(0,z.P6G)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,d.N)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),c=(0,z.P6G)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,d.N)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),C=(0,z.P6G)("symbolIcon.fileForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),M=(0,z.P6G)("symbolIcon.folderForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),E=(0,z.P6G)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,d.N)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_=(0,z.P6G)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,d.N)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),L=(0,z.P6G)("symbolIcon.keyForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),N=(0,z.P6G)("symbolIcon.keywordForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),b=(0,z.P6G)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,d.N)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),I=(0,z.P6G)("symbolIcon.moduleForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),k=(0,z.P6G)("symbolIcon.namespaceForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),W=(0,z.P6G)("symbolIcon.nullForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),q=(0,z.P6G)("symbolIcon.numberForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),re=(0,z.P6G)("symbolIcon.objectForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),de=(0,z.P6G)("symbolIcon.operatorForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),pe=(0,z.P6G)("symbolIcon.packageForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ae=(0,z.P6G)("symbolIcon.propertyForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ue=(0,z.P6G)("symbolIcon.referenceForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),te=(0,z.P6G)("symbolIcon.snippetForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),K=(0,z.P6G)("symbolIcon.stringForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),U=(0,z.P6G)("symbolIcon.structForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ee=(0,z.P6G)("symbolIcon.textForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),X=(0,z.P6G)("symbolIcon.typeParameterForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),le=(0,z.P6G)("symbolIcon.unitForeground",{dark:z.dRz,light:z.dRz,hc:z.dRz},(0,d.N)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),oe=(0,z.P6G)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,d.N)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));(0,O.Ic)((Ce,ye)=>{const ke=Ce.getColor(S);ke&&ye.addRule(`${p.lA.symbolArray.cssSelector} { color: ${ke}; }`);const Te=Ce.getColor(j);Te&&ye.addRule(`${p.lA.symbolBoolean.cssSelector} { color: ${Te}; }`);const ge=Ce.getColor(T);ge&&ye.addRule(`${p.lA.symbolClass.cssSelector} { color: ${ge}; }`);const we=Ce.getColor(b);we&&ye.addRule(`${p.lA.symbolMethod.cssSelector} { color: ${we}; }`);const ze=Ce.getColor(B);ze&&ye.addRule(`${p.lA.symbolColor.cssSelector} { color: ${ze}; }`);const Qe=Ce.getColor(F);Qe&&ye.addRule(`${p.lA.symbolConstant.cssSelector} { color: ${Qe}; }`);const Pe=Ce.getColor(x);Pe&&ye.addRule(`${p.lA.symbolConstructor.cssSelector} { color: ${Pe}; }`);const Oe=Ce.getColor(v);Oe&&ye.addRule(`
			${p.lA.symbolValue.cssSelector},${p.lA.symbolEnum.cssSelector} { color: ${Oe}; }`);const qe=Ce.getColor(g);qe&&ye.addRule(`${p.lA.symbolEnumMember.cssSelector} { color: ${qe}; }`);const Je=Ce.getColor(D);Je&&ye.addRule(`${p.lA.symbolEvent.cssSelector} { color: ${Je}; }`);const Ne=Ce.getColor(c);Ne&&ye.addRule(`${p.lA.symbolField.cssSelector} { color: ${Ne}; }`);const Fe=Ce.getColor(C);Fe&&ye.addRule(`${p.lA.symbolFile.cssSelector} { color: ${Fe}; }`);const ne=Ce.getColor(M);ne&&ye.addRule(`${p.lA.symbolFolder.cssSelector} { color: ${ne}; }`);const Q=Ce.getColor(E);Q&&ye.addRule(`${p.lA.symbolFunction.cssSelector} { color: ${Q}; }`);const ie=Ce.getColor(_);ie&&ye.addRule(`${p.lA.symbolInterface.cssSelector} { color: ${ie}; }`);const xe=Ce.getColor(L);xe&&ye.addRule(`${p.lA.symbolKey.cssSelector} { color: ${xe}; }`);const be=Ce.getColor(N);be&&ye.addRule(`${p.lA.symbolKeyword.cssSelector} { color: ${be}; }`);const Ge=Ce.getColor(I);Ge&&ye.addRule(`${p.lA.symbolModule.cssSelector} { color: ${Ge}; }`);const nt=Ce.getColor(k);nt&&ye.addRule(`${p.lA.symbolNamespace.cssSelector} { color: ${nt}; }`);const _t=Ce.getColor(W);_t&&ye.addRule(`${p.lA.symbolNull.cssSelector} { color: ${_t}; }`);const Ot=Ce.getColor(q);Ot&&ye.addRule(`${p.lA.symbolNumber.cssSelector} { color: ${Ot}; }`);const rn=Ce.getColor(re);rn&&ye.addRule(`${p.lA.symbolObject.cssSelector} { color: ${rn}; }`);const gt=Ce.getColor(de);gt&&ye.addRule(`${p.lA.symbolOperator.cssSelector} { color: ${gt}; }`);const Ue=Ce.getColor(pe);Ue&&ye.addRule(`${p.lA.symbolPackage.cssSelector} { color: ${Ue}; }`);const Ye=Ce.getColor(ae);Ye&&ye.addRule(`${p.lA.symbolProperty.cssSelector} { color: ${Ye}; }`);const dt=Ce.getColor(ue);dt&&ye.addRule(`${p.lA.symbolReference.cssSelector} { color: ${dt}; }`);const Re=Ce.getColor(te);Re&&ye.addRule(`${p.lA.symbolSnippet.cssSelector} { color: ${Re}; }`);const Ve=Ce.getColor(K);Ve&&ye.addRule(`${p.lA.symbolString.cssSelector} { color: ${Ve}; }`);const at=Ce.getColor(U);at&&ye.addRule(`${p.lA.symbolStruct.cssSelector} { color: ${at}; }`);const pt=Ce.getColor(ee);pt&&ye.addRule(`${p.lA.symbolText.cssSelector} { color: ${pt}; }`);const Be=Ce.getColor(X);Be&&ye.addRule(`${p.lA.symbolTypeParameter.cssSelector} { color: ${Be}; }`);const je=Ce.getColor(le);je&&ye.addRule(`${p.lA.symbolUnit.cssSelector} { color: ${je}; }`);const Et=Ce.getColor(oe);Et&&ye.addRule(`${p.lA.symbolVariable.cssSelector} { color: ${Et}; }`)})},64662:function(Tt,me,a){"use strict";a.r(me),a.d(me,{ToggleTabFocusModeAction:function(){return S}});var p=a(85152),d=a(37940),z=a(16830),O=a(63580);class S extends z.R6{constructor(){super({id:S.ID,label:O.N({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2048|43,mac:{primary:256|1024|43},weight:100}})}run(T,B){const x=!d.n.getTabFocusMode();d.n.setTabFocusMode(x),x?(0,p.Z9)(O.N("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,p.Z9)(O.N("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}S.ID="editor.action.toggleTabFocusMode",(0,z.Qr)(S)},52614:function(Tt,me,a){"use strict";a.r(me);var p=a(84013),d=a(16830),z=a(63580);class O extends d.R6{constructor(){super({id:"editor.action.forceRetokenize",label:z.N("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(j,T){if(!T.hasModel())return;const B=T.getModel();B.resetTokenization();const F=new p.G(!0);B.forceTokenization(B.getLineCount()),F.stop(),console.log(`tokenization took ${F.elapsed()}`)}}(0,d.Qr)(O)},52954:function(Tt,me,a){"use strict";a.r(me),a.d(me,{DisableHighlightingInCommentsAction:function(){return ie},DisableHighlightingInStringsAction:function(){return xe},DisableHighlightingOfAmbiguousCharactersAction:function(){return be},DisableHighlightingOfInvisibleCharactersAction:function(){return Ge},DisableHighlightingOfNonBasicAsciiCharactersAction:function(){return nt},ShowExcludeOptions:function(){return _t},UnicodeHighlighter:function(){return ze},UnicodeHighlighterHoverParticipant:function(){return qe},warningIcon:function(){return we}});var p=a(15393),d=a(73046),z=a(9917),O=a(1432),S=a(25924),j=a(16830),T=a(64141),B=a(45146),F=a(31446),x=a(85215),v=a(72042),g=a(30168),D=a(66520),c=a(22374),C=a(65321),M=a(90317),E=a(74741),_=a(498),L=a(72065),N=a(4850),b=a(59069),I=a(10553),k=a(4669),W=a(50988),q=a(73910),re=a(97781),de=function(Ue,Ye,dt,Re){var Ve=arguments.length,at=Ve<3?Ye:Re===null?Re=Object.getOwnPropertyDescriptor(Ye,dt):Re,pt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")at=Reflect.decorate(Ue,Ye,dt,Re);else for(var Be=Ue.length-1;Be>=0;Be--)(pt=Ue[Be])&&(at=(Ve<3?pt(at):Ve>3?pt(Ye,dt,at):pt(Ye,dt))||at);return Ve>3&&at&&Object.defineProperty(Ye,dt,at),at},pe=function(Ue,Ye){return function(dt,Re){Ye(dt,Re,Ue)}};let ae=class extends z.JT{constructor(Ye,dt,Re={},Ve){var at;super();this._link=dt,this._enabled=!0,this.el=(0,C.R3)(Ye,(0,C.$)("a.monaco-link",{tabIndex:(at=dt.tabIndex)!==null&&at!==void 0?at:0,href:dt.href,title:dt.title},dt.label)),this.el.setAttribute("role","button");const pt=this._register(new N.Y(this.el,"click")),Be=this._register(new N.Y(this.el,"keypress")),je=k.ju.chain(Be.event).map(Xe=>new b.y(Xe)).filter(Xe=>Xe.keyCode===3).event,Et=this._register(new N.Y(this.el,I.t.Tap)).event;this._register(I.o.addTarget(this.el));const Dt=k.ju.any(pt.event,je,Et);this._register(Dt(Xe=>{!this.enabled||(C.zB.stop(Xe,!0),(Re==null?void 0:Re.opener)?Re.opener(this._link.href):Ve.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(Ye){Ye?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=Ye}};ae=de([pe(3,W.v4)],ae),(0,re.Ic)((Ue,Ye)=>{const dt=Ue.getColor(q.url);dt&&Ye.addRule(`.monaco-link { color: ${dt}; }`);const Re=Ue.getColor(q.sgC);Re&&Ye.addRule(`.monaco-link:hover { color: ${Re}; }`)});var ue=a(59554),te=function(Ue,Ye,dt,Re){var Ve=arguments.length,at=Ve<3?Ye:Re===null?Re=Object.getOwnPropertyDescriptor(Ye,dt):Re,pt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")at=Reflect.decorate(Ue,Ye,dt,Re);else for(var Be=Ue.length-1;Be>=0;Be--)(pt=Ue[Be])&&(at=(Ve<3?pt(at):Ve>3?pt(Ye,dt,at):pt(Ye,dt))||at);return Ve>3&&at&&Object.defineProperty(Ye,dt,at),at},K=function(Ue,Ye){return function(dt,Re){Ye(dt,Re,Ue)}};const U=26;let ee=class extends z.JT{constructor(Ye,dt){super();this._editor=Ye,this.instantiationService=dt,this.banner=this._register(this.instantiationService.createInstance(X))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(Ye){this.banner.show(Object.assign(Object.assign({},Ye),{onClose:()=>{this.hide(),Ye.onClose&&Ye.onClose()}})),this._editor.setBanner(this.banner.element,U)}};ee=te([K(1,L.TG)],ee);let X=class extends z.JT{constructor(Ye){super();this.instantiationService=Ye,this.markdownRenderer=this.instantiationService.createInstance(_.$,{}),this.element=(0,C.$)("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(Ye){if(Ye.ariaLabel)return Ye.ariaLabel;if(typeof Ye.message=="string")return Ye.message}getBannerMessage(Ye){if(typeof Ye=="string"){const dt=(0,C.$)("span");return dt.innerText=Ye,dt}return this.markdownRenderer.render(Ye).element}clear(){(0,C.PO)(this.element)}show(Ye){(0,C.PO)(this.element);const dt=this.getAriaLabel(Ye);dt&&this.element.setAttribute("aria-label",dt);const Re=(0,C.R3)(this.element,(0,C.$)("div.icon-container"));Re.setAttribute("aria-hidden","true"),Ye.icon&&Re.appendChild((0,C.$)(`div${re.kS.asCSSSelector(Ye.icon)}`));const Ve=(0,C.R3)(this.element,(0,C.$)("div.message-container"));if(Ve.setAttribute("aria-hidden","true"),Ve.appendChild(this.getBannerMessage(Ye.message)),this.messageActionsContainer=(0,C.R3)(this.element,(0,C.$)("div.message-actions-container")),Ye.actions)for(const pt of Ye.actions)this._register(this.instantiationService.createInstance(ae,this.messageActionsContainer,Object.assign(Object.assign({},pt),{tabIndex:-1}),{}));const at=(0,C.R3)(this.element,(0,C.$)("div.action-container"));this.actionBar=this._register(new M.o(at)),this.actionBar.push(this._register(new E.aU("banner.close","Close Banner",re.kS.asClassName(ue.s_),!0,()=>{typeof Ye.onClose=="function"&&Ye.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};X=te([K(0,L.TG)],X);var le=a(63580),oe=a(33108),Ce=a(41157),ye=a(33425),ke=function(Ue,Ye,dt,Re){var Ve=arguments.length,at=Ve<3?Ye:Re===null?Re=Object.getOwnPropertyDescriptor(Ye,dt):Re,pt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")at=Reflect.decorate(Ue,Ye,dt,Re);else for(var Be=Ue.length-1;Be>=0;Be--)(pt=Ue[Be])&&(at=(Ve<3?pt(at):Ve>3?pt(Ye,dt,at):pt(Ye,dt))||at);return Ve>3&&at&&Object.defineProperty(Ye,dt,at),at},Te=function(Ue,Ye){return function(dt,Re){Ye(dt,Re,Ue)}},ge=function(Ue,Ye,dt,Re){function Ve(at){return at instanceof dt?at:new dt(function(pt){pt(at)})}return new(dt||(dt=Promise))(function(at,pt){function Be(Dt){try{Et(Re.next(Dt))}catch(Xe){pt(Xe)}}function je(Dt){try{Et(Re.throw(Dt))}catch(Xe){pt(Xe)}}function Et(Dt){Dt.done?at(Dt.value):Ve(Dt.value).then(Be,je)}Et((Re=Re.apply(Ue,Ye||[])).next())})};const we=(0,ue.q5)("extensions-warning-message",d.lA.warning,le.N("warningIcon","Icon shown with a warning message in the extensions editor."));let ze=class extends z.JT{constructor(Ye,dt,Re,Ve){super();this._editor=Ye,this._editorWorkerService=dt,this._workspaceTrustService=Re,this._highlighter=null,this._bannerClosed=!1,this._updateState=at=>{if(at&&at.hasMore){if(this._bannerClosed)return;const pt=Math.max(at.ambiguousCharacterCount,at.nonBasicAsciiCharacterCount,at.invisibleCharacterCount);let Be;if(at.nonBasicAsciiCharacterCount>=pt)Be={message:le.N("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new nt};else if(at.ambiguousCharacterCount>=pt)Be={message:le.N("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new be};else if(at.invisibleCharacterCount>=pt)Be={message:le.N("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new Ge};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:Be.message,icon:we,actions:[{label:Be.command.shortLabel,href:`command:${Be.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(Ve.createInstance(ee,Ye)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=Ye.getOption(113),this._register(Re.onDidChangeTrust(at=>{this._updateHighlighter()})),this._register(Ye.onDidChangeConfiguration(at=>{at.hasChanged(113)&&(this._options=Ye.getOption(113),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const Ye=Qe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([Ye.nonBasicASCII,Ye.ambiguousCharacters,Ye.invisibleCharacters].every(Re=>Re===!1))return;const dt={nonBasicASCII:Ye.nonBasicASCII,ambiguousCharacters:Ye.ambiguousCharacters,invisibleCharacters:Ye.invisibleCharacters,includeComments:Ye.includeComments,includeStrings:Ye.includeStrings,allowedCodePoints:Object.keys(Ye.allowedCharacters).map(Re=>Re.codePointAt(0)),allowedLocales:Object.keys(Ye.allowedLocales).map(Re=>Re==="_os"?new Intl.NumberFormat().resolvedOptions().locale:Re==="_vscode"?O.dK:Re)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new Pe(this._editor,dt,this._updateState,this._editorWorkerService):this._highlighter=new Oe(this._editor,dt,this._updateState)}getDecorationInfo(Ye){return this._highlighter?this._highlighter.getDecorationInfo(Ye):null}};ze.ID="editor.contrib.unicodeHighlighter",ze=ke([Te(1,x.p),Te(2,ye.Y),Te(3,L.TG)],ze);function Qe(Ue,Ye){return{nonBasicASCII:Ye.nonBasicASCII===T.Av?!Ue:Ye.nonBasicASCII,ambiguousCharacters:Ye.ambiguousCharacters,invisibleCharacters:Ye.invisibleCharacters,includeComments:Ye.includeComments===T.Av?!Ue:Ye.includeComments,includeStrings:Ye.includeStrings===T.Av?!Ue:Ye.includeStrings,allowedCharacters:Ye.allowedCharacters,allowedLocales:Ye.allowedLocales}}let Pe=class extends z.JT{constructor(Ye,dt,Re,Ve){super();this._editor=Ye,this._options=dt,this._updateState=Re,this._editorWorkerService=Ve,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new p.pY(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const Ye=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(dt=>{if(this._model.isDisposed()||this._model.getVersionId()!==Ye)return;this._updateState(dt);const Re=[];if(!dt.hasMore)for(const Ve of dt.ranges)Re.push({range:Ve,options:Q.instance.getDecorationFromOptions(this._options)});this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),Re))})}getDecorationInfo(Ye){if(!this._decorationIds.has(Ye))return null;const dt=this._editor.getModel(),Re=dt.getDecorationRange(Ye),Ve={range:Re,options:Q.instance.getDecorationFromOptions(this._options),id:Ye,ownerId:0};if(!(0,g.Fd)(dt,Ve))return null;const at=dt.getValueInRange(Re);return{reason:ne(at,this._options),inComment:(0,g.$t)(dt,Ve),inString:(0,g.zg)(dt,Ve)}}};Pe=ke([Te(3,x.p)],Pe);class Oe extends z.JT{constructor(Ye,dt,Re){super();this._editor=Ye,this._options=dt,this._updateState=Re,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new p.pY(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const Ye=this._editor.getVisibleRanges(),dt=[],Re={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const Ve of Ye){const at=F.a.computeUnicodeHighlights(this._model,this._options,Ve);for(const pt of at.ranges)Re.ranges.push(pt);Re.ambiguousCharacterCount+=Re.ambiguousCharacterCount,Re.invisibleCharacterCount+=Re.invisibleCharacterCount,Re.nonBasicAsciiCharacterCount+=Re.nonBasicAsciiCharacterCount,Re.hasMore=Re.hasMore||at.hasMore}if(!Re.hasMore)for(const Ve of Re.ranges)dt.push({range:Ve,options:Q.instance.getDecorationFromOptions(this._options)});this._updateState(Re),this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),dt))}getDecorationInfo(Ye){if(!this._decorationIds.has(Ye))return null;const dt=this._editor.getModel(),Re=dt.getDecorationRange(Ye),Ve=dt.getValueInRange(Re),at={range:Re,options:Q.instance.getDecorationFromOptions(this._options),id:Ye,ownerId:0};return(0,g.Fd)(dt,at)?{reason:ne(Ve,this._options),inComment:(0,g.$t)(dt,at),inString:(0,g.zg)(dt,at)}:null}}let qe=class{constructor(Ye,dt,Re){this._editor=Ye,this._languageService=dt,this._openerService=Re,this.hoverOrdinal=4}computeSync(Ye,dt){if(!this._editor.hasModel()||Ye.type!==1)return[];const Re=this._editor.getModel(),Ve=this._editor.getContribution(ze.ID);if(!Ve)return[];const at=[];let pt=300;for(const Be of dt){const je=Ve.getDecorationInfo(Be.id);if(!je)continue;const Dt=Re.getValueInRange(Be.range).codePointAt(0),Xe=Ne(Dt);let ft;switch(je.reason.kind){case 0:ft=le.N("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",Xe,Ne(je.reason.confusableWith.codePointAt(0)));break;case 1:ft=le.N("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",Xe);break;case 2:ft=le.N("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",Xe);break}const an={codePoint:Dt,reason:je.reason,inComment:je.inComment,inString:je.inString},An=le.N("unicodeHighlight.adjustSettings","Adjust settings"),Fn=[{value:`${ft} [${An}](command:${_t.ID}?${encodeURIComponent(JSON.stringify(an))})`,isTrusted:!0}];at.push(new c.hU(this,Be.range,Fn,pt++))}return at}renderHoverParts(Ye,dt){return(0,c.c)(Ye,dt,this._editor,this._languageService,this._openerService)}};qe=ke([Te(1,v.O),Te(2,W.v4)],qe);function Je(Ue){return`U+${Ue.toString(16).padStart(4,"0")}`}function Ne(Ue){let Ye=`\`${Je(Ue)}\``;return S.vU.isInvisibleCharacter(Ue)||(Ye+=` "${`${Fe(Ue)}`}"`),Ye}function Fe(Ue){return Ue===96?"`` ` ``":"`"+String.fromCodePoint(Ue)+"`"}function ne(Ue,Ye){return F.a.computeUnicodeHighlightReason(Ue,Ye)}class Q{constructor(){this.map=new Map}getDecorationFromOptions(Ye){return this.getDecoration(!Ye.includeComments,!Ye.includeStrings)}getDecoration(Ye,dt){const Re=`${Ye}${dt}`;let Ve=this.map.get(Re);return Ve||(Ve=B.qx.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:Ye,hideInStringTokens:dt}),this.map.set(Re,Ve)),Ve}}Q.instance=new Q;class ie extends j.R6{constructor(){super({id:be.ID,label:le.N("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0});this.shortLabel=le.N("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(Ye,dt,Re){return ge(this,void 0,void 0,function*(){let Ve=Ye==null?void 0:Ye.get(oe.Ui);Ve&&this.runAction(Ve)})}runAction(Ye){return ge(this,void 0,void 0,function*(){yield Ye.updateValue(T.qt.includeComments,!1,1)})}}class xe extends j.R6{constructor(){super({id:be.ID,label:le.N("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0});this.shortLabel=le.N("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(Ye,dt,Re){return ge(this,void 0,void 0,function*(){let Ve=Ye==null?void 0:Ye.get(oe.Ui);Ve&&this.runAction(Ve)})}runAction(Ye){return ge(this,void 0,void 0,function*(){yield Ye.updateValue(T.qt.includeStrings,!1,1)})}}class be extends j.R6{constructor(){super({id:be.ID,label:le.N("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0});this.shortLabel=le.N("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(Ye,dt,Re){return ge(this,void 0,void 0,function*(){let Ve=Ye==null?void 0:Ye.get(oe.Ui);Ve&&this.runAction(Ve)})}runAction(Ye){return ge(this,void 0,void 0,function*(){yield Ye.updateValue(T.qt.ambiguousCharacters,!1,1)})}}be.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class Ge extends j.R6{constructor(){super({id:Ge.ID,label:le.N("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0});this.shortLabel=le.N("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(Ye,dt,Re){return ge(this,void 0,void 0,function*(){let Ve=Ye==null?void 0:Ye.get(oe.Ui);Ve&&this.runAction(Ve)})}runAction(Ye){return ge(this,void 0,void 0,function*(){yield Ye.updateValue(T.qt.invisibleCharacters,!1,1)})}}Ge.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class nt extends j.R6{constructor(){super({id:nt.ID,label:le.N("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0});this.shortLabel=le.N("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(Ye,dt,Re){return ge(this,void 0,void 0,function*(){let Ve=Ye==null?void 0:Ye.get(oe.Ui);Ve&&this.runAction(Ve)})}runAction(Ye){return ge(this,void 0,void 0,function*(){yield Ye.updateValue(T.qt.nonBasicASCII,!1,1)})}}nt.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class _t extends j.R6{constructor(){super({id:_t.ID,label:le.N("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(Ye,dt,Re){return ge(this,void 0,void 0,function*(){const{codePoint:Ve,reason:at,inString:pt,inComment:Be}=Re,je=String.fromCodePoint(Ve),Et=Ye.get(Ce.eJ),Dt=Ye.get(oe.Ui);function Xe(An){return S.vU.isInvisibleCharacter(An)?le.N("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",Je(An)):le.N("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${Je(An)} "${je}"`)}const ft=[];if(at.kind===0)for(const An of at.notAmbiguousInLocales)ft.push({label:le.N("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',An),run:()=>ge(this,void 0,void 0,function*(){rn(Dt,[An])})});if(ft.push({label:Xe(Ve),run:()=>Ot(Dt,[Ve])}),Be){const An=new ie;ft.push({label:An.label,run:()=>ge(this,void 0,void 0,function*(){return An.runAction(Dt)})})}else if(pt){const An=new xe;ft.push({label:An.label,run:()=>ge(this,void 0,void 0,function*(){return An.runAction(Dt)})})}if(at.kind===0){const An=new be;ft.push({label:An.label,run:()=>ge(this,void 0,void 0,function*(){return An.runAction(Dt)})})}else if(at.kind===1){const An=new Ge;ft.push({label:An.label,run:()=>ge(this,void 0,void 0,function*(){return An.runAction(Dt)})})}else if(at.kind===2){const An=new nt;ft.push({label:An.label,run:()=>ge(this,void 0,void 0,function*(){return An.runAction(Dt)})})}else gt(at);const an=yield Et.pick(ft,{title:le.N("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});an&&(yield an.run())})}}_t.ID="editor.action.unicodeHighlight.showExcludeOptions";function Ot(Ue,Ye){return ge(this,void 0,void 0,function*(){const dt=Ue.getValue(T.qt.allowedCharacters);let Re;typeof dt=="object"&&dt?Re=dt:Re={};for(const Ve of Ye)Re[String.fromCodePoint(Ve)]=!0;yield Ue.updateValue(T.qt.allowedCharacters,Re,1)})}function rn(Ue,Ye){var dt;return ge(this,void 0,void 0,function*(){const Re=(dt=Ue.inspect(T.qt.allowedLocales).user)===null||dt===void 0?void 0:dt.value;let Ve;typeof Re=="object"&&Re?Ve=Object.assign({},Re):Ve={};for(const at of Ye)Ve[at]=!0;yield Ue.updateValue(T.qt.allowedLocales,Ve,1)})}function gt(Ue){throw new Error(`Unexpected value: ${Ue}`)}(0,j.Qr)(be),(0,j.Qr)(Ge),(0,j.Qr)(nt),(0,j.Qr)(_t),(0,j._K)(ze.ID,ze),D.Ae.register(qe)},79607:function(Tt,me,a){"use strict";a.r(me),a.d(me,{UnusualLineTerminatorsDetector:function(){return D}});var p=a(9917),d=a(95935),z=a(16830),O=a(11640),S=a(63580),j=a(28820),T=function(c,C,M,E){var _=arguments.length,L=_<3?C:E===null?E=Object.getOwnPropertyDescriptor(C,M):E,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,C,M,E);else for(var b=c.length-1;b>=0;b--)(N=c[b])&&(L=(_<3?N(L):_>3?N(C,M,L):N(C,M))||L);return _>3&&L&&Object.defineProperty(C,M,L),L},B=function(c,C){return function(M,E){C(M,E,c)}},F=function(c,C,M,E){function _(L){return L instanceof M?L:new M(function(N){N(L)})}return new(M||(M=Promise))(function(L,N){function b(W){try{k(E.next(W))}catch(q){N(q)}}function I(W){try{k(E.throw(W))}catch(q){N(q)}}function k(W){W.done?L(W.value):_(W.value).then(b,I)}k((E=E.apply(c,C||[])).next())})};const x="ignoreUnusualLineTerminators";function v(c,C,M){c.setModelProperty(C.uri,x,M)}function g(c,C){return c.getModelProperty(C.uri,x)}let D=class extends p.JT{constructor(C,M,E){super();this._editor=C,this._dialogService=M,this._codeEditorService=E,this._config=this._editor.getOption(114),this._register(this._editor.onDidChangeConfiguration(_=>{_.hasChanged(114)&&(this._config=this._editor.getOption(114),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(_=>{_.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return F(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const C=this._editor.getModel();if(!C.mightContainUnusualLineTerminators()||g(this._codeEditorService,C)===!0||this._editor.getOption(81))return;if(this._config==="auto"){C.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:S.N("unusualLineTerminators.title","Unusual Line Terminators"),message:S.N("unusualLineTerminators.message","Detected unusual line terminators"),detail:S.N("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,d.EZ)(C.uri)),primaryButton:S.N("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:S.N("unusualLineTerminators.ignore","Ignore")})).confirmed){v(this._codeEditorService,C,!0);return}C.removeUnusualLineTerminators(this._editor.getSelections())})}};D.ID="editor.contrib.unusualLineTerminatorsDetector",D=T([B(1,j.S),B(2,O.$)],D),(0,z._K)(D.ID,D)},61271:function(Tt,me,a){"use strict";a.r(me);var p=a(15393),d=a(9917),z=a(16830),O=a(89510),S=a(73733),j=a(51200),T=a(88802),B=a(33108),F=a(97781),x=a(88191),v=a(84013),g=a(71922),D=function(M,E,_,L){var N=arguments.length,b=N<3?E:L===null?L=Object.getOwnPropertyDescriptor(E,_):L,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(M,E,_,L);else for(var k=M.length-1;k>=0;k--)(I=M[k])&&(b=(N<3?I(b):N>3?I(E,_,b):I(E,_))||b);return N>3&&b&&Object.defineProperty(E,_,b),b},c=function(M,E){return function(_,L){E(_,L,M)}};let C=class extends d.JT{constructor(E,_,L,N,b,I){super();this._modelService=_,this._themeService=L,this._configurationService=N,this._editor=E,this._provider=I.documentRangeSemanticTokensProvider,this._debounceInformation=b.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new p.pY(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const k=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{k()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),k()})),this._register(this._editor.onDidChangeModelContent(W=>{this._cancelAll(),k()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),k()})),this._register(this._configurationService.onDidChangeConfiguration(W=>{W.affectsConfiguration(j.e3)&&(this._cancelAll(),k())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),k()}))}_cancelAll(){for(const E of this._outstandingRequests)E.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(E){for(let _=0,L=this._outstandingRequests.length;_<L;_++)if(this._outstandingRequests[_]===E){this._outstandingRequests.splice(_,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const E=this._editor.getModel();if(E.hasCompleteSemanticTokens())return;if(!(0,j.tw)(E,this._themeService,this._configurationService)){E.hasSomeSemanticTokens()&&E.setSemanticTokens(null,!1);return}if(!(0,O.KO)(this._provider,E)){E.hasSomeSemanticTokens()&&E.setSemanticTokens(null,!1);return}const _=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(_.map(L=>this._requestRange(E,L)))}_requestRange(E,_){const L=E.getVersionId(),N=(0,p.PG)(I=>Promise.resolve((0,O.OG)(this._provider,E,_,I))),b=new v.G(!1);return N.then(I=>{if(this._debounceInformation.update(E,b.elapsed()),!I||!I.tokens||E.isDisposed()||E.getVersionId()!==L)return;const{provider:k,tokens:W}=I,q=this._modelService.getSemanticTokensProviderStyling(k);E.setPartialSemanticTokens(_,(0,T.h)(W,q,E.getLanguageId()))}).then(()=>this._removeOutstandingRequest(N),()=>this._removeOutstandingRequest(N)),N}};C.ID="editor.contrib.viewportSemanticTokens",C=D([c(1,S.q),c(2,F.XE),c(3,B.Ui),c(4,x.A),c(5,g.p)],C),(0,z._K)(C.ID,C)},70943:function(Tt,me,a){"use strict";a.r(me),a.d(me,{getOccurrencesAtPosition:function(){return de}});var p=a(85152),d=a(9488),z=a(15393),O=a(71050),S=a(17301),j=a(9917),T=a(16830),B=a(24314),F=a(29102),x=a(84973),v=a(45146),g=a(96887),D=a(63580),c=a(16141),C=a(73910),M=a(97781),E=a(71922),_=function(Ce,ye,ke,Te){var ge=arguments.length,we=ge<3?ye:Te===null?Te=Object.getOwnPropertyDescriptor(ye,ke):Te,ze;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")we=Reflect.decorate(Ce,ye,ke,Te);else for(var Qe=Ce.length-1;Qe>=0;Qe--)(ze=Ce[Qe])&&(we=(ge<3?ze(we):ge>3?ze(ye,ke,we):ze(ye,ke))||we);return ge>3&&we&&Object.defineProperty(ye,ke,we),we},L=function(Ce,ye){return function(ke,Te){ye(ke,Te,Ce)}};const N=(0,C.P6G)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},D.N("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),b=(0,C.P6G)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},D.N("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),I=(0,C.P6G)("editor.wordHighlightBorder",{light:null,dark:null,hc:C.xL1},D.N("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),k=(0,C.P6G)("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:C.xL1},D.N("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),W=(0,C.P6G)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},D.N("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),q=(0,C.P6G)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},D.N("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),re=new c.uy("hasWordHighlights",!1);function de(Ce,ye,ke,Te){const ge=Ce.ordered(ye);return(0,z.Ps)(ge.map(we=>()=>Promise.resolve(we.provideDocumentHighlights(ye,ke,Te)).then(void 0,S.Cp)),d.Of)}class pe{constructor(ye,ke,Te){this._model=ye,this._selection=ke,this._wordSeparators=Te,this._wordRange=this._getCurrentWordRange(ye,ke),this._result=null}get result(){return this._result||(this._result=(0,z.PG)(ye=>this._compute(this._model,this._selection,this._wordSeparators,ye))),this._result}_getCurrentWordRange(ye,ke){const Te=ye.getWordAtPosition(ke.getPosition());return Te?new B.e(ke.startLineNumber,Te.startColumn,ke.startLineNumber,Te.endColumn):null}isValid(ye,ke,Te){const ge=ke.startLineNumber,we=ke.startColumn,ze=ke.endColumn,Qe=this._getCurrentWordRange(ye,ke);let Pe=Boolean(this._wordRange&&this._wordRange.equalsRange(Qe));for(let Oe=0,qe=Te.length;!Pe&&Oe<qe;Oe++){let Je=ye.getDecorationRange(Te[Oe]);Je&&Je.startLineNumber===ge&&Je.startColumn<=we&&Je.endColumn>=ze&&(Pe=!0)}return Pe}cancel(){this.result.cancel()}}class ae extends pe{constructor(ye,ke,Te,ge){super(ye,ke,Te);this._providers=ge}_compute(ye,ke,Te,ge){return de(this._providers,ye,ke.getPosition(),ge).then(we=>we||[])}}class ue extends pe{constructor(ye,ke,Te){super(ye,ke,Te);this._selectionIsEmpty=ke.isEmpty()}_compute(ye,ke,Te,ge){return(0,z.Vs)(250,ge).then(()=>{if(!ke.isEmpty())return[];const we=ye.getWordAtPosition(ke.getPosition());return!we||we.word.length>1e3?[]:ye.findMatches(we.word,!0,!1,!0,Te,!1).map(Qe=>({range:Qe.range,kind:g.MY.Text}))})}isValid(ye,ke,Te){const ge=ke.isEmpty();return this._selectionIsEmpty!==ge?!1:super.isValid(ye,ke,Te)}}function te(Ce,ye,ke,Te){return Ce.has(ye)?new ae(ye,ke,Te,Ce):new ue(ye,ke,Te)}(0,T.sb)("_executeDocumentHighlights",(Ce,ye,ke)=>{const Te=Ce.get(E.p);return de(Te.documentHighlightProvider,ye,ke,O.T.None)});class K{constructor(ye,ke,Te){this.toUnhook=new j.SL,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=ye,this.providers=ke,this._hasWordHighlights=re.bindTo(Te),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(72),this.model=this.editor.getModel(),this.toUnhook.add(ye.onDidChangeCursorPosition(ge=>{this._ignorePositionChangeEvent||!this.occurrencesHighlight||this._onPositionChanged(ge)})),this.toUnhook.add(ye.onDidChangeModelContent(ge=>{this._stopAll()})),this.toUnhook.add(ye.onDidChangeConfiguration(ge=>{let we=this.editor.getOption(72);this.occurrencesHighlight!==we&&(this.occurrencesHighlight=we,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){!this.occurrencesHighlight||this._run()}_getSortedHighlights(){return d.kX(this._decorationIds.map(ye=>this.model.getDecorationRange(ye)).sort(B.e.compareRangesUsingStarts))}moveNext(){let ye=this._getSortedHighlights(),Te=(ye.findIndex(we=>we.containsPosition(this.editor.getPosition()))+1)%ye.length,ge=ye[Te];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(ge.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(ge);const we=this._getWord();if(we){const ze=this.editor.getModel().getLineContent(ge.startLineNumber);(0,p.Z9)(`${ze}, ${Te+1} of ${ye.length} for '${we.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let ye=this._getSortedHighlights(),Te=(ye.findIndex(we=>we.containsPosition(this.editor.getPosition()))-1+ye.length)%ye.length,ge=ye[Te];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(ge.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(ge);const we=this._getWord();if(we){const ze=this.editor.getModel().getLineContent(ge.startLineNumber);(0,p.Z9)(`${ze}, ${Te+1} of ${ye.length} for '${we.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(ye){if(!this.occurrencesHighlight){this._stopAll();return}if(ye.reason!==3){this._stopAll();return}this._run()}_getWord(){let ye=this.editor.getSelection(),ke=ye.startLineNumber,Te=ye.startColumn;return this.model.getWordAtPosition({lineNumber:ke,column:Te})}_run(){let ye=this.editor.getSelection();if(ye.startLineNumber!==ye.endLineNumber){this._stopAll();return}let ke=ye.startColumn,Te=ye.endColumn;const ge=this._getWord();if(!ge||ge.startColumn>ke||ge.endColumn<Te){this._stopAll();return}const we=this.workerRequest&&this.workerRequest.isValid(this.model,ye,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),we)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let ze=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=te(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(117)),this.workerRequest.result.then(Qe=>{ze===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=Qe||[],this._beginRenderDecorations())},S.dL)}}_beginRenderDecorations(){let ye=new Date().getTime(),ke=this.lastCursorPositionChangeTime+250;ye>=ke?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},ke-ye)}renderDecorations(){this.renderDecorationsTimer=-1;let ye=[];for(const ke of this.workerRequestValue)ke.range&&ye.push({range:ke.range,options:K._getDecorationOptions(ke.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,ye),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(ye){return ye===g.MY.Write?this._WRITE_OPTIONS:ye===g.MY.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}K._WRITE_OPTIONS=v.qx.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:(0,M.EN)(q),position:x.sh.Center},minimap:{color:(0,M.EN)(C.IYc),position:x.F5.Inline}}),K._TEXT_OPTIONS=v.qx.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,M.EN)(C.SPM),position:x.sh.Center},minimap:{color:(0,M.EN)(C.IYc),position:x.F5.Inline}}),K._REGULAR_OPTIONS=v.qx.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:(0,M.EN)(W),position:x.sh.Center},minimap:{color:(0,M.EN)(C.IYc),position:x.F5.Inline}});let U=class xS extends j.JT{constructor(ye,ke,Te){super();this.wordHighlighter=null;const ge=()=>{ye.hasModel()&&(this.wordHighlighter=new K(ye,Te.documentHighlightProvider,ke))};this._register(ye.onDidChangeModel(we=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),ge()})),ge()}static get(ye){return ye.getContribution(xS.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(ye){this.wordHighlighter&&ye&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};U.ID="editor.contrib.wordHighlighter",U=_([L(1,c.i6),L(2,E.p)],U);class ee extends T.R6{constructor(ye,ke){super(ke);this._isNext=ye}run(ye,ke){const Te=U.get(ke);!Te||(this._isNext?Te.moveNext():Te.moveBack())}}class X extends ee{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:D.N("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:re,kbOpts:{kbExpr:F.u.editorTextFocus,primary:65,weight:100}})}}class le extends ee{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:D.N("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:re,kbOpts:{kbExpr:F.u.editorTextFocus,primary:1024|65,weight:100}})}}class oe extends T.R6{constructor(){super({id:"editor.action.wordHighlight.trigger",label:D.N("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:re.toNegated(),kbOpts:{kbExpr:F.u.editorTextFocus,primary:0,weight:100}})}run(ye,ke,Te){const ge=U.get(ke);!ge||ge.restoreViewState(!0)}}(0,T._K)(U.ID,U),(0,T.Qr)(X),(0,T.Qr)(le),(0,T.Qr)(oe),(0,M.Ic)((Ce,ye)=>{const ke=Ce.getColor(C.Rzx);ke&&(ye.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${ke}; }`),ye.addRule(`.monaco-editor .selectionHighlight { background-color: ${ke.transparent(.5)}; }`));const Te=Ce.getColor(N);Te&&ye.addRule(`.monaco-editor .wordHighlight { background-color: ${Te}; }`);const ge=Ce.getColor(b);ge&&ye.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${ge}; }`);const we=Ce.getColor(C.g_n);we&&ye.addRule(`.monaco-editor .selectionHighlight { border: 1px ${Ce.type==="hc"?"dotted":"solid"} ${we}; box-sizing: border-box; }`);const ze=Ce.getColor(I);ze&&ye.addRule(`.monaco-editor .wordHighlight { border: 1px ${Ce.type==="hc"?"dashed":"solid"} ${ze}; box-sizing: border-box; }`);const Qe=Ce.getColor(k);Qe&&ye.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${Ce.type==="hc"?"dashed":"solid"} ${Qe}; box-sizing: border-box; }`)})},37181:function(Tt,me,a){"use strict";a.r(me),a.d(me,{MoveWordCommand:function(){return M},WordLeftCommand:function(){return E},WordRightCommand:function(){return _},CursorWordStartLeft:function(){return L},CursorWordEndLeft:function(){return N},CursorWordLeft:function(){return b},CursorWordStartLeftSelect:function(){return I},CursorWordEndLeftSelect:function(){return k},CursorWordLeftSelect:function(){return W},CursorWordAccessibilityLeft:function(){return q},CursorWordAccessibilityLeftSelect:function(){return re},CursorWordStartRight:function(){return de},CursorWordEndRight:function(){return pe},CursorWordRight:function(){return ae},CursorWordStartRightSelect:function(){return ue},CursorWordEndRightSelect:function(){return te},CursorWordRightSelect:function(){return K},CursorWordAccessibilityRight:function(){return U},CursorWordAccessibilityRightSelect:function(){return ee},DeleteWordCommand:function(){return X},DeleteWordLeftCommand:function(){return le},DeleteWordRightCommand:function(){return oe},DeleteWordStartLeft:function(){return Ce},DeleteWordEndLeft:function(){return ye},DeleteWordLeft:function(){return ke},DeleteWordStartRight:function(){return Te},DeleteWordEndRight:function(){return ge},DeleteWordRight:function(){return we},DeleteInsideWord:function(){return ze}});var p=a(16830),d=a(61329),z=a(64141),O=a(55343),S=a(92896),j=a(24929),T=a(50187),B=a(24314),F=a(3860),x=a(29102),v=a(89381),g=a(63580),D=a(31106),c=a(16141),C=a(39282);class M extends p._l{constructor(Pe){super(Pe);this._inSelectionMode=Pe.inSelectionMode,this._wordNavigationType=Pe.wordNavigationType}runEditorCommand(Pe,Oe,qe){if(!Oe.hasModel())return;const Je=(0,j.u)(Oe.getOption(117)),Ne=Oe.getModel(),ne=Oe.getSelections().map(Q=>{const ie=new T.L(Q.positionLineNumber,Q.positionColumn),xe=this._move(Je,Ne,ie,this._wordNavigationType);return this._moveTo(Q,xe,this._inSelectionMode)});if(Ne.pushStackElement(),Oe._getViewModel().setCursorStates("moveWordCommand",3,ne.map(Q=>O.Vi.fromModelSelection(Q))),ne.length===1){const Q=new T.L(ne[0].positionLineNumber,ne[0].positionColumn);Oe.revealPosition(Q,0)}}_moveTo(Pe,Oe,qe){return qe?new F.Y(Pe.selectionStartLineNumber,Pe.selectionStartColumn,Oe.lineNumber,Oe.column):new F.Y(Oe.lineNumber,Oe.column,Oe.lineNumber,Oe.column)}}class E extends M{_move(Pe,Oe,qe,Je){return S.w.moveWordLeft(Pe,Oe,qe,Je)}}class _ extends M{_move(Pe,Oe,qe,Je){return S.w.moveWordRight(Pe,Oe,qe,Je)}}class L extends E{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class N extends E{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class b extends E{constructor(){var Pe;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:c.Ao.and(x.u.textInputFocus,(Pe=c.Ao.and(D.U,C.cv))===null||Pe===void 0?void 0:Pe.negate()),primary:2048|15,mac:{primary:512|15},weight:100}})}}class I extends E{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class k extends E{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class W extends E{constructor(){var Pe;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:c.Ao.and(x.u.textInputFocus,(Pe=c.Ao.and(D.U,C.cv))===null||Pe===void 0?void 0:Pe.negate()),primary:2048|1024|15,mac:{primary:512|1024|15},weight:100}})}}class q extends E{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(Pe,Oe,qe,Je){return super._move((0,j.u)(z.BH.wordSeparators.defaultValue),Oe,qe,Je)}}class re extends E{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(Pe,Oe,qe,Je){return super._move((0,j.u)(z.BH.wordSeparators.defaultValue),Oe,qe,Je)}}class de extends _{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class pe extends _{constructor(){var Pe;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:c.Ao.and(x.u.textInputFocus,(Pe=c.Ao.and(D.U,C.cv))===null||Pe===void 0?void 0:Pe.negate()),primary:2048|17,mac:{primary:512|17},weight:100}})}}class ae extends _{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class ue extends _{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class te extends _{constructor(){var Pe;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:c.Ao.and(x.u.textInputFocus,(Pe=c.Ao.and(D.U,C.cv))===null||Pe===void 0?void 0:Pe.negate()),primary:2048|1024|17,mac:{primary:512|1024|17},weight:100}})}}class K extends _{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class U extends _{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(Pe,Oe,qe,Je){return super._move((0,j.u)(z.BH.wordSeparators.defaultValue),Oe,qe,Je)}}class ee extends _{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(Pe,Oe,qe,Je){return super._move((0,j.u)(z.BH.wordSeparators.defaultValue),Oe,qe,Je)}}class X extends p._l{constructor(Pe){super(Pe);this._whitespaceHeuristics=Pe.whitespaceHeuristics,this._wordNavigationType=Pe.wordNavigationType}runEditorCommand(Pe,Oe,qe){const Je=Pe.get(v.c_);if(!Oe.hasModel())return;const Ne=(0,j.u)(Oe.getOption(117)),Fe=Oe.getModel(),ne=Oe.getSelections(),Q=Oe.getOption(5),ie=Oe.getOption(8),xe=Je.getLanguageConfiguration(Fe.getLanguageId()).getAutoClosingPairs(),be=Oe._getViewModel(),Ge=ne.map(nt=>{const _t=this._delete({wordSeparators:Ne,model:Fe,selection:nt,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:Oe.getOption(6),autoClosingBrackets:Q,autoClosingQuotes:ie,autoClosingPairs:xe,autoClosedCharacters:be.getCursorAutoClosedCharacters()},this._wordNavigationType);return new d.T4(_t,"")});Oe.pushUndoStop(),Oe.executeCommands(this.id,Ge),Oe.pushUndoStop()}}class le extends X{_delete(Pe,Oe){let qe=S.w.deleteWordLeft(Pe,Oe);return qe||new B.e(1,1,1,1)}}class oe extends X{_delete(Pe,Oe){let qe=S.w.deleteWordRight(Pe,Oe);if(qe)return qe;const Je=Pe.model.getLineCount(),Ne=Pe.model.getLineMaxColumn(Je);return new B.e(Je,Ne,Je,Ne)}}class Ce extends le{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:x.u.writable})}}class ye extends le{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:x.u.writable})}}class ke extends le{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:x.u.writable,kbOpts:{kbExpr:x.u.textInputFocus,primary:2048|1,mac:{primary:512|1},weight:100}})}}class Te extends oe{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:x.u.writable})}}class ge extends oe{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:x.u.writable})}}class we extends oe{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:x.u.writable,kbOpts:{kbExpr:x.u.textInputFocus,primary:2048|20,mac:{primary:512|20},weight:100}})}}class ze extends p.R6{constructor(){super({id:"deleteInsideWord",precondition:x.u.writable,label:g.N("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(Pe,Oe,qe){if(!Oe.hasModel())return;const Je=(0,j.u)(Oe.getOption(117)),Ne=Oe.getModel(),ne=Oe.getSelections().map(Q=>{const ie=S.w.deleteInsideWord(Je,Ne,Q);return new d.T4(ie,"")});Oe.pushUndoStop(),Oe.executeCommands(this.id,ne),Oe.pushUndoStop()}}(0,p.fK)(new L),(0,p.fK)(new N),(0,p.fK)(new b),(0,p.fK)(new I),(0,p.fK)(new k),(0,p.fK)(new W),(0,p.fK)(new de),(0,p.fK)(new pe),(0,p.fK)(new ae),(0,p.fK)(new ue),(0,p.fK)(new te),(0,p.fK)(new K),(0,p.fK)(new q),(0,p.fK)(new re),(0,p.fK)(new U),(0,p.fK)(new ee),(0,p.fK)(new Ce),(0,p.fK)(new ye),(0,p.fK)(new ke),(0,p.fK)(new Te),(0,p.fK)(new ge),(0,p.fK)(new we),(0,p.Qr)(ze)},86709:function(Tt,me,a){"use strict";a.r(me),a.d(me,{DeleteWordPartLeft:function(){return T},DeleteWordPartRight:function(){return B},WordPartLeftCommand:function(){return F},CursorWordPartLeft:function(){return x},CursorWordPartLeftSelect:function(){return v},WordPartRightCommand:function(){return g},CursorWordPartRight:function(){return D},CursorWordPartRightSelect:function(){return c}});var p=a(16830),d=a(92896),z=a(24314),O=a(29102),S=a(37181),j=a(94565);class T extends S.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:O.u.writable,kbOpts:{kbExpr:O.u.textInputFocus,primary:0,mac:{primary:256|512|1},weight:100}})}_delete(M,E){let _=d.L.deleteWordPartLeft(M);return _||new z.e(1,1,1,1)}}class B extends S.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:O.u.writable,kbOpts:{kbExpr:O.u.textInputFocus,primary:0,mac:{primary:256|512|20},weight:100}})}_delete(M,E){let _=d.L.deleteWordPartRight(M);if(_)return _;const L=M.model.getLineCount(),N=M.model.getLineMaxColumn(L);return new z.e(L,N,L,N)}}class F extends S.MoveWordCommand{_move(M,E,_,L){return d.L.moveWordPartLeft(M,E,_)}}class x extends F{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:O.u.textInputFocus,primary:0,mac:{primary:256|512|15},weight:100}})}}j.P0.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class v extends F{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:O.u.textInputFocus,primary:0,mac:{primary:256|512|1024|15},weight:100}})}}j.P0.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class g extends S.MoveWordCommand{_move(M,E,_,L){return d.L.moveWordPartRight(M,E,_)}}class D extends g{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:O.u.textInputFocus,primary:0,mac:{primary:256|512|17},weight:100}})}}class c extends g{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:O.u.textInputFocus,primary:0,mac:{primary:256|512|1024|17},weight:100}})}}(0,p.fK)(new T),(0,p.fK)(new B),(0,p.fK)(new x),(0,p.fK)(new v),(0,p.fK)(new D),(0,p.fK)(new c)},71163:function(Tt,me,a){"use strict";a.r(me),a.d(me,{CancellationTokenSource:function(){return Df},Emitter:function(){return ov},KeyCode:function(){return Nc},KeyMod:function(){return sv},MarkerSeverity:function(){return cv},MarkerTag:function(){return uv},Position:function(){return Ph},Range:function(){return xm},Selection:function(){return av},SelectionDirection:function(){return lv},Token:function(){return hv},Uri:function(){return dv},editor:function(){return fv},languages:function(){return gv}});var p=a(64141),d=a(71050),z=a(4669),O=a(22258),S=a(70666),j=a(50187),T=a(24314),B=a(3860),F=a(96887),x;(function(P){P[P.Unknown=0]="Unknown",P[P.Disabled=1]="Disabled",P[P.Enabled=2]="Enabled"})(x||(x={}));var v;(function(P){P[P.KeepWhitespace=1]="KeepWhitespace",P[P.InsertAsSnippet=4]="InsertAsSnippet"})(v||(v={}));var g;(function(P){P[P.Method=0]="Method",P[P.Function=1]="Function",P[P.Constructor=2]="Constructor",P[P.Field=3]="Field",P[P.Variable=4]="Variable",P[P.Class=5]="Class",P[P.Struct=6]="Struct",P[P.Interface=7]="Interface",P[P.Module=8]="Module",P[P.Property=9]="Property",P[P.Event=10]="Event",P[P.Operator=11]="Operator",P[P.Unit=12]="Unit",P[P.Value=13]="Value",P[P.Constant=14]="Constant",P[P.Enum=15]="Enum",P[P.EnumMember=16]="EnumMember",P[P.Keyword=17]="Keyword",P[P.Text=18]="Text",P[P.Color=19]="Color",P[P.File=20]="File",P[P.Reference=21]="Reference",P[P.Customcolor=22]="Customcolor",P[P.Folder=23]="Folder",P[P.TypeParameter=24]="TypeParameter",P[P.User=25]="User",P[P.Issue=26]="Issue",P[P.Snippet=27]="Snippet"})(g||(g={}));var D;(function(P){P[P.Deprecated=1]="Deprecated"})(D||(D={}));var c;(function(P){P[P.Invoke=0]="Invoke",P[P.TriggerCharacter=1]="TriggerCharacter",P[P.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(c||(c={}));var C;(function(P){P[P.EXACT=0]="EXACT",P[P.ABOVE=1]="ABOVE",P[P.BELOW=2]="BELOW"})(C||(C={}));var M;(function(P){P[P.NotSet=0]="NotSet",P[P.ContentFlush=1]="ContentFlush",P[P.RecoverFromMarkers=2]="RecoverFromMarkers",P[P.Explicit=3]="Explicit",P[P.Paste=4]="Paste",P[P.Undo=5]="Undo",P[P.Redo=6]="Redo"})(M||(M={}));var E;(function(P){P[P.LF=1]="LF",P[P.CRLF=2]="CRLF"})(E||(E={}));var _;(function(P){P[P.Text=0]="Text",P[P.Read=1]="Read",P[P.Write=2]="Write"})(_||(_={}));var L;(function(P){P[P.None=0]="None",P[P.Keep=1]="Keep",P[P.Brackets=2]="Brackets",P[P.Advanced=3]="Advanced",P[P.Full=4]="Full"})(L||(L={}));var N;(function(P){P[P.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",P[P.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",P[P.accessibilitySupport=2]="accessibilitySupport",P[P.accessibilityPageSize=3]="accessibilityPageSize",P[P.ariaLabel=4]="ariaLabel",P[P.autoClosingBrackets=5]="autoClosingBrackets",P[P.autoClosingDelete=6]="autoClosingDelete",P[P.autoClosingOvertype=7]="autoClosingOvertype",P[P.autoClosingQuotes=8]="autoClosingQuotes",P[P.autoIndent=9]="autoIndent",P[P.automaticLayout=10]="automaticLayout",P[P.autoSurround=11]="autoSurround",P[P.bracketPairColorization=12]="bracketPairColorization",P[P.guides=13]="guides",P[P.codeLens=14]="codeLens",P[P.codeLensFontFamily=15]="codeLensFontFamily",P[P.codeLensFontSize=16]="codeLensFontSize",P[P.colorDecorators=17]="colorDecorators",P[P.columnSelection=18]="columnSelection",P[P.comments=19]="comments",P[P.contextmenu=20]="contextmenu",P[P.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",P[P.cursorBlinking=22]="cursorBlinking",P[P.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",P[P.cursorStyle=24]="cursorStyle",P[P.cursorSurroundingLines=25]="cursorSurroundingLines",P[P.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",P[P.cursorWidth=27]="cursorWidth",P[P.disableLayerHinting=28]="disableLayerHinting",P[P.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",P[P.domReadOnly=30]="domReadOnly",P[P.dragAndDrop=31]="dragAndDrop",P[P.emptySelectionClipboard=32]="emptySelectionClipboard",P[P.extraEditorClassName=33]="extraEditorClassName",P[P.fastScrollSensitivity=34]="fastScrollSensitivity",P[P.find=35]="find",P[P.fixedOverflowWidgets=36]="fixedOverflowWidgets",P[P.folding=37]="folding",P[P.foldingStrategy=38]="foldingStrategy",P[P.foldingHighlight=39]="foldingHighlight",P[P.foldingImportsByDefault=40]="foldingImportsByDefault",P[P.foldingMaximumRegions=41]="foldingMaximumRegions",P[P.unfoldOnClickAfterEndOfLine=42]="unfoldOnClickAfterEndOfLine",P[P.fontFamily=43]="fontFamily",P[P.fontInfo=44]="fontInfo",P[P.fontLigatures=45]="fontLigatures",P[P.fontSize=46]="fontSize",P[P.fontWeight=47]="fontWeight",P[P.formatOnPaste=48]="formatOnPaste",P[P.formatOnType=49]="formatOnType",P[P.glyphMargin=50]="glyphMargin",P[P.gotoLocation=51]="gotoLocation",P[P.hideCursorInOverviewRuler=52]="hideCursorInOverviewRuler",P[P.hover=53]="hover",P[P.inDiffEditor=54]="inDiffEditor",P[P.inlineSuggest=55]="inlineSuggest",P[P.letterSpacing=56]="letterSpacing",P[P.lightbulb=57]="lightbulb",P[P.lineDecorationsWidth=58]="lineDecorationsWidth",P[P.lineHeight=59]="lineHeight",P[P.lineNumbers=60]="lineNumbers",P[P.lineNumbersMinChars=61]="lineNumbersMinChars",P[P.linkedEditing=62]="linkedEditing",P[P.links=63]="links",P[P.matchBrackets=64]="matchBrackets",P[P.minimap=65]="minimap",P[P.mouseStyle=66]="mouseStyle",P[P.mouseWheelScrollSensitivity=67]="mouseWheelScrollSensitivity",P[P.mouseWheelZoom=68]="mouseWheelZoom",P[P.multiCursorMergeOverlapping=69]="multiCursorMergeOverlapping",P[P.multiCursorModifier=70]="multiCursorModifier",P[P.multiCursorPaste=71]="multiCursorPaste",P[P.occurrencesHighlight=72]="occurrencesHighlight",P[P.overviewRulerBorder=73]="overviewRulerBorder",P[P.overviewRulerLanes=74]="overviewRulerLanes",P[P.padding=75]="padding",P[P.parameterHints=76]="parameterHints",P[P.peekWidgetDefaultFocus=77]="peekWidgetDefaultFocus",P[P.definitionLinkOpensInPeek=78]="definitionLinkOpensInPeek",P[P.quickSuggestions=79]="quickSuggestions",P[P.quickSuggestionsDelay=80]="quickSuggestionsDelay",P[P.readOnly=81]="readOnly",P[P.renameOnType=82]="renameOnType",P[P.renderControlCharacters=83]="renderControlCharacters",P[P.renderFinalNewline=84]="renderFinalNewline",P[P.renderLineHighlight=85]="renderLineHighlight",P[P.renderLineHighlightOnlyWhenFocus=86]="renderLineHighlightOnlyWhenFocus",P[P.renderValidationDecorations=87]="renderValidationDecorations",P[P.renderWhitespace=88]="renderWhitespace",P[P.revealHorizontalRightPadding=89]="revealHorizontalRightPadding",P[P.roundedSelection=90]="roundedSelection",P[P.rulers=91]="rulers",P[P.scrollbar=92]="scrollbar",P[P.scrollBeyondLastColumn=93]="scrollBeyondLastColumn",P[P.scrollBeyondLastLine=94]="scrollBeyondLastLine",P[P.scrollPredominantAxis=95]="scrollPredominantAxis",P[P.selectionClipboard=96]="selectionClipboard",P[P.selectionHighlight=97]="selectionHighlight",P[P.selectOnLineNumbers=98]="selectOnLineNumbers",P[P.showFoldingControls=99]="showFoldingControls",P[P.showUnused=100]="showUnused",P[P.snippetSuggestions=101]="snippetSuggestions",P[P.smartSelect=102]="smartSelect",P[P.smoothScrolling=103]="smoothScrolling",P[P.stickyTabStops=104]="stickyTabStops",P[P.stopRenderingLineAfter=105]="stopRenderingLineAfter",P[P.suggest=106]="suggest",P[P.suggestFontSize=107]="suggestFontSize",P[P.suggestLineHeight=108]="suggestLineHeight",P[P.suggestOnTriggerCharacters=109]="suggestOnTriggerCharacters",P[P.suggestSelection=110]="suggestSelection",P[P.tabCompletion=111]="tabCompletion",P[P.tabIndex=112]="tabIndex",P[P.unicodeHighlighting=113]="unicodeHighlighting",P[P.unusualLineTerminators=114]="unusualLineTerminators",P[P.useShadowDOM=115]="useShadowDOM",P[P.useTabStops=116]="useTabStops",P[P.wordSeparators=117]="wordSeparators",P[P.wordWrap=118]="wordWrap",P[P.wordWrapBreakAfterCharacters=119]="wordWrapBreakAfterCharacters",P[P.wordWrapBreakBeforeCharacters=120]="wordWrapBreakBeforeCharacters",P[P.wordWrapColumn=121]="wordWrapColumn",P[P.wordWrapOverride1=122]="wordWrapOverride1",P[P.wordWrapOverride2=123]="wordWrapOverride2",P[P.wrappingIndent=124]="wrappingIndent",P[P.wrappingStrategy=125]="wrappingStrategy",P[P.showDeprecated=126]="showDeprecated",P[P.inlayHints=127]="inlayHints",P[P.editorClassName=128]="editorClassName",P[P.pixelRatio=129]="pixelRatio",P[P.tabFocusMode=130]="tabFocusMode",P[P.layoutInfo=131]="layoutInfo",P[P.wrappingInfo=132]="wrappingInfo"})(N||(N={}));var b;(function(P){P[P.TextDefined=0]="TextDefined",P[P.LF=1]="LF",P[P.CRLF=2]="CRLF"})(b||(b={}));var I;(function(P){P[P.LF=0]="LF",P[P.CRLF=1]="CRLF"})(I||(I={}));var k;(function(P){P[P.None=0]="None",P[P.Indent=1]="Indent",P[P.IndentOutdent=2]="IndentOutdent",P[P.Outdent=3]="Outdent"})(k||(k={}));var W;(function(P){P[P.Both=0]="Both",P[P.Right=1]="Right",P[P.Left=2]="Left",P[P.None=3]="None"})(W||(W={}));var q;(function(P){P[P.Type=1]="Type",P[P.Parameter=2]="Parameter"})(q||(q={}));var re;(function(P){P[P.Automatic=0]="Automatic",P[P.Explicit=1]="Explicit"})(re||(re={}));var de;(function(P){P[P.DependsOnKbLayout=-1]="DependsOnKbLayout",P[P.Unknown=0]="Unknown",P[P.Backspace=1]="Backspace",P[P.Tab=2]="Tab",P[P.Enter=3]="Enter",P[P.Shift=4]="Shift",P[P.Ctrl=5]="Ctrl",P[P.Alt=6]="Alt",P[P.PauseBreak=7]="PauseBreak",P[P.CapsLock=8]="CapsLock",P[P.Escape=9]="Escape",P[P.Space=10]="Space",P[P.PageUp=11]="PageUp",P[P.PageDown=12]="PageDown",P[P.End=13]="End",P[P.Home=14]="Home",P[P.LeftArrow=15]="LeftArrow",P[P.UpArrow=16]="UpArrow",P[P.RightArrow=17]="RightArrow",P[P.DownArrow=18]="DownArrow",P[P.Insert=19]="Insert",P[P.Delete=20]="Delete",P[P.Digit0=21]="Digit0",P[P.Digit1=22]="Digit1",P[P.Digit2=23]="Digit2",P[P.Digit3=24]="Digit3",P[P.Digit4=25]="Digit4",P[P.Digit5=26]="Digit5",P[P.Digit6=27]="Digit6",P[P.Digit7=28]="Digit7",P[P.Digit8=29]="Digit8",P[P.Digit9=30]="Digit9",P[P.KeyA=31]="KeyA",P[P.KeyB=32]="KeyB",P[P.KeyC=33]="KeyC",P[P.KeyD=34]="KeyD",P[P.KeyE=35]="KeyE",P[P.KeyF=36]="KeyF",P[P.KeyG=37]="KeyG",P[P.KeyH=38]="KeyH",P[P.KeyI=39]="KeyI",P[P.KeyJ=40]="KeyJ",P[P.KeyK=41]="KeyK",P[P.KeyL=42]="KeyL",P[P.KeyM=43]="KeyM",P[P.KeyN=44]="KeyN",P[P.KeyO=45]="KeyO",P[P.KeyP=46]="KeyP",P[P.KeyQ=47]="KeyQ",P[P.KeyR=48]="KeyR",P[P.KeyS=49]="KeyS",P[P.KeyT=50]="KeyT",P[P.KeyU=51]="KeyU",P[P.KeyV=52]="KeyV",P[P.KeyW=53]="KeyW",P[P.KeyX=54]="KeyX",P[P.KeyY=55]="KeyY",P[P.KeyZ=56]="KeyZ",P[P.Meta=57]="Meta",P[P.ContextMenu=58]="ContextMenu",P[P.F1=59]="F1",P[P.F2=60]="F2",P[P.F3=61]="F3",P[P.F4=62]="F4",P[P.F5=63]="F5",P[P.F6=64]="F6",P[P.F7=65]="F7",P[P.F8=66]="F8",P[P.F9=67]="F9",P[P.F10=68]="F10",P[P.F11=69]="F11",P[P.F12=70]="F12",P[P.F13=71]="F13",P[P.F14=72]="F14",P[P.F15=73]="F15",P[P.F16=74]="F16",P[P.F17=75]="F17",P[P.F18=76]="F18",P[P.F19=77]="F19",P[P.NumLock=78]="NumLock",P[P.ScrollLock=79]="ScrollLock",P[P.Semicolon=80]="Semicolon",P[P.Equal=81]="Equal",P[P.Comma=82]="Comma",P[P.Minus=83]="Minus",P[P.Period=84]="Period",P[P.Slash=85]="Slash",P[P.Backquote=86]="Backquote",P[P.BracketLeft=87]="BracketLeft",P[P.Backslash=88]="Backslash",P[P.BracketRight=89]="BracketRight",P[P.Quote=90]="Quote",P[P.OEM_8=91]="OEM_8",P[P.IntlBackslash=92]="IntlBackslash",P[P.Numpad0=93]="Numpad0",P[P.Numpad1=94]="Numpad1",P[P.Numpad2=95]="Numpad2",P[P.Numpad3=96]="Numpad3",P[P.Numpad4=97]="Numpad4",P[P.Numpad5=98]="Numpad5",P[P.Numpad6=99]="Numpad6",P[P.Numpad7=100]="Numpad7",P[P.Numpad8=101]="Numpad8",P[P.Numpad9=102]="Numpad9",P[P.NumpadMultiply=103]="NumpadMultiply",P[P.NumpadAdd=104]="NumpadAdd",P[P.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",P[P.NumpadSubtract=106]="NumpadSubtract",P[P.NumpadDecimal=107]="NumpadDecimal",P[P.NumpadDivide=108]="NumpadDivide",P[P.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",P[P.ABNT_C1=110]="ABNT_C1",P[P.ABNT_C2=111]="ABNT_C2",P[P.AudioVolumeMute=112]="AudioVolumeMute",P[P.AudioVolumeUp=113]="AudioVolumeUp",P[P.AudioVolumeDown=114]="AudioVolumeDown",P[P.BrowserSearch=115]="BrowserSearch",P[P.BrowserHome=116]="BrowserHome",P[P.BrowserBack=117]="BrowserBack",P[P.BrowserForward=118]="BrowserForward",P[P.MediaTrackNext=119]="MediaTrackNext",P[P.MediaTrackPrevious=120]="MediaTrackPrevious",P[P.MediaStop=121]="MediaStop",P[P.MediaPlayPause=122]="MediaPlayPause",P[P.LaunchMediaPlayer=123]="LaunchMediaPlayer",P[P.LaunchMail=124]="LaunchMail",P[P.LaunchApp2=125]="LaunchApp2",P[P.Clear=126]="Clear",P[P.MAX_VALUE=127]="MAX_VALUE"})(de||(de={}));var pe;(function(P){P[P.Hint=1]="Hint",P[P.Info=2]="Info",P[P.Warning=4]="Warning",P[P.Error=8]="Error"})(pe||(pe={}));var ae;(function(P){P[P.Unnecessary=1]="Unnecessary",P[P.Deprecated=2]="Deprecated"})(ae||(ae={}));var ue;(function(P){P[P.Inline=1]="Inline",P[P.Gutter=2]="Gutter"})(ue||(ue={}));var te;(function(P){P[P.UNKNOWN=0]="UNKNOWN",P[P.TEXTAREA=1]="TEXTAREA",P[P.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",P[P.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",P[P.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",P[P.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",P[P.CONTENT_TEXT=6]="CONTENT_TEXT",P[P.CONTENT_EMPTY=7]="CONTENT_EMPTY",P[P.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",P[P.CONTENT_WIDGET=9]="CONTENT_WIDGET",P[P.OVERVIEW_RULER=10]="OVERVIEW_RULER",P[P.SCROLLBAR=11]="SCROLLBAR",P[P.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",P[P.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(te||(te={}));var K;(function(P){P[P.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",P[P.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",P[P.TOP_CENTER=2]="TOP_CENTER"})(K||(K={}));var U;(function(P){P[P.Left=1]="Left",P[P.Center=2]="Center",P[P.Right=4]="Right",P[P.Full=7]="Full"})(U||(U={}));var ee;(function(P){P[P.Left=0]="Left",P[P.Right=1]="Right",P[P.None=2]="None"})(ee||(ee={}));var X;(function(P){P[P.Off=0]="Off",P[P.On=1]="On",P[P.Relative=2]="Relative",P[P.Interval=3]="Interval",P[P.Custom=4]="Custom"})(X||(X={}));var le;(function(P){P[P.None=0]="None",P[P.Text=1]="Text",P[P.Blocks=2]="Blocks"})(le||(le={}));var oe;(function(P){P[P.Smooth=0]="Smooth",P[P.Immediate=1]="Immediate"})(oe||(oe={}));var Ce;(function(P){P[P.Auto=1]="Auto",P[P.Hidden=2]="Hidden",P[P.Visible=3]="Visible"})(Ce||(Ce={}));var ye;(function(P){P[P.LTR=0]="LTR",P[P.RTL=1]="RTL"})(ye||(ye={}));var ke;(function(P){P[P.Invoke=1]="Invoke",P[P.TriggerCharacter=2]="TriggerCharacter",P[P.ContentChange=3]="ContentChange"})(ke||(ke={}));var Te;(function(P){P[P.File=0]="File",P[P.Module=1]="Module",P[P.Namespace=2]="Namespace",P[P.Package=3]="Package",P[P.Class=4]="Class",P[P.Method=5]="Method",P[P.Property=6]="Property",P[P.Field=7]="Field",P[P.Constructor=8]="Constructor",P[P.Enum=9]="Enum",P[P.Interface=10]="Interface",P[P.Function=11]="Function",P[P.Variable=12]="Variable",P[P.Constant=13]="Constant",P[P.String=14]="String",P[P.Number=15]="Number",P[P.Boolean=16]="Boolean",P[P.Array=17]="Array",P[P.Object=18]="Object",P[P.Key=19]="Key",P[P.Null=20]="Null",P[P.EnumMember=21]="EnumMember",P[P.Struct=22]="Struct",P[P.Event=23]="Event",P[P.Operator=24]="Operator",P[P.TypeParameter=25]="TypeParameter"})(Te||(Te={}));var ge;(function(P){P[P.Deprecated=1]="Deprecated"})(ge||(ge={}));var we;(function(P){P[P.Hidden=0]="Hidden",P[P.Blink=1]="Blink",P[P.Smooth=2]="Smooth",P[P.Phase=3]="Phase",P[P.Expand=4]="Expand",P[P.Solid=5]="Solid"})(we||(we={}));var ze;(function(P){P[P.Line=1]="Line",P[P.Block=2]="Block",P[P.Underline=3]="Underline",P[P.LineThin=4]="LineThin",P[P.BlockOutline=5]="BlockOutline",P[P.UnderlineThin=6]="UnderlineThin"})(ze||(ze={}));var Qe;(function(P){P[P.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",P[P.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",P[P.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",P[P.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(Qe||(Qe={}));var Pe;(function(P){P[P.None=0]="None",P[P.Same=1]="Same",P[P.Indent=2]="Indent",P[P.DeepIndent=3]="DeepIndent"})(Pe||(Pe={}));class Oe{static chord(s,u){return(0,O.gx)(s,u)}}Oe.CtrlCmd=2048,Oe.Shift=1024,Oe.Alt=512,Oe.WinCtrl=256;function qe(){return{editor:void 0,languages:void 0,CancellationTokenSource:d.A,Emitter:z.Q5,KeyCode:de,KeyMod:Oe,Position:j.L,Range:T.e,Selection:B.Y,SelectionDirection:ye,MarkerSeverity:pe,MarkerTag:ae,Uri:S.o,Token:F.WU}}var Je=a(25924),Ne=a(27231),Fe=a(11640),ne=a(35146),Q=a(9917),ie=a(36248);const xe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class be extends Q.JT{constructor(s,u={}){super();this._onDidUpdate=this._register(new z.Q5),this._editor=s,this._options=ie.jB(u,xe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(y=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(y=>{this.revealFirst=!0})),this._init()}_init(){!!this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(s){this.ranges=[],s&&s.forEach(u=>{!this._options.ignoreCharChanges&&u.charChanges?u.charChanges.forEach(y=>{this.ranges.push({rhs:!0,range:new T.e(y.modifiedStartLineNumber,y.modifiedStartColumn,y.modifiedEndLineNumber,y.modifiedEndColumn)})}):u.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new T.e(u.modifiedStartLineNumber,1,u.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new T.e(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber+1,1)})}),this.ranges.sort((u,y)=>T.e.compareRangesUsingStarts(u.range,y.range)),this._onDidUpdate.fire(this)}_initIdx(s){let u=!1;const y=this._editor.getPosition();if(!y){this.nextIdx=0;return}for(let $=0,he=this.ranges.length;$<he&&!u;$++){const _e=this.ranges[$].range;y.isBeforeOrEqual(_e.getStartPosition())&&(this.nextIdx=$+(s?0:-1),u=!0)}u||(this.nextIdx=s?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(s,u){if(ne.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(s):s?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const y=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const $=y.range.getStartPosition();this._editor.setPosition($),this._editor.revealRangeInCenter(y.range,u)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(s=0){this._move(!0,s)}previous(s=0){this._move(!1,s)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}var Ge=a(27374),nt=a(96518),_t=a(84973),Ot=a(89381),rn=a(276),gt=a(72042),Ue=a(73733),Ye=a(15393),dt=a(17301),Re=a(1432),Ve=a(98401);const at="$initialize";let pt=!1;function Be(P){!Re.$L||(pt||(pt=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(P.message))}class je{constructor(s,u,y,$){this.vsWorker=s,this.req=u,this.method=y,this.args=$,this.type=0}}class Et{constructor(s,u,y,$){this.vsWorker=s,this.seq=u,this.res=y,this.err=$,this.type=1}}class Dt{constructor(s,u,y,$){this.vsWorker=s,this.req=u,this.eventName=y,this.arg=$,this.type=2}}class Xe{constructor(s,u,y){this.vsWorker=s,this.req=u,this.event=y,this.type=3}}class ft{constructor(s,u){this.vsWorker=s,this.req=u,this.type=4}}class an{constructor(s){this._workerId=-1,this._handler=s,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(s){this._workerId=s}sendMessage(s,u){const y=String(++this._lastSentReq);return new Promise(($,he)=>{this._pendingReplies[y]={resolve:$,reject:he},this._send(new je(this._workerId,y,s,u))})}listen(s,u){let y=null;const $=new z.Q5({onFirstListenerAdd:()=>{y=String(++this._lastSentReq),this._pendingEmitters.set(y,$),this._send(new Dt(this._workerId,y,s,u))},onLastListenerRemove:()=>{this._pendingEmitters.delete(y),this._send(new ft(this._workerId,y)),y=null}});return $.event}handleMessage(s){!s||!s.vsWorker||this._workerId!==-1&&s.vsWorker!==this._workerId||this._handleMessage(s)}_handleMessage(s){switch(s.type){case 1:return this._handleReplyMessage(s);case 0:return this._handleRequestMessage(s);case 2:return this._handleSubscribeEventMessage(s);case 3:return this._handleEventMessage(s);case 4:return this._handleUnsubscribeEventMessage(s)}}_handleReplyMessage(s){if(!this._pendingReplies[s.seq]){console.warn("Got reply to unknown seq");return}let u=this._pendingReplies[s.seq];if(delete this._pendingReplies[s.seq],s.err){let y=s.err;s.err.$isError&&(y=new Error,y.name=s.err.name,y.message=s.err.message,y.stack=s.err.stack),u.reject(y);return}u.resolve(s.res)}_handleRequestMessage(s){let u=s.req;this._handler.handleMessage(s.method,s.args).then($=>{this._send(new Et(this._workerId,u,$,void 0))},$=>{$.detail instanceof Error&&($.detail=(0,dt.ri)($.detail)),this._send(new Et(this._workerId,u,void 0,(0,dt.ri)($)))})}_handleSubscribeEventMessage(s){const u=s.req,y=this._handler.handleEvent(s.eventName,s.arg)($=>{this._send(new Xe(this._workerId,u,$))});this._pendingEvents.set(u,y)}_handleEventMessage(s){if(!this._pendingEmitters.has(s.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(s.req).fire(s.event)}_handleUnsubscribeEventMessage(s){if(!this._pendingEvents.has(s.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(s.req).dispose(),this._pendingEvents.delete(s.req)}_send(s){let u=[];if(s.type===0)for(let y=0;y<s.args.length;y++)s.args[y]instanceof ArrayBuffer&&u.push(s.args[y]);else s.type===1&&s.res instanceof ArrayBuffer&&u.push(s.res);this._handler.sendMessage(s,u)}}class An extends Q.JT{constructor(s,u,y){super();let $=null;this._worker=this._register(s.create("vs/base/common/worker/simpleWorker",yt=>{this._protocol.handleMessage(yt)},yt=>{$&&$(yt)})),this._protocol=new an({sendMessage:(yt,wt)=>{this._worker.postMessage(yt,wt)},handleMessage:(yt,wt)=>{if(typeof y[yt]!="function")return Promise.reject(new Error("Missing method "+yt+" on main thread host."));try{return Promise.resolve(y[yt].apply(y,wt))}catch(Xt){return Promise.reject(Xt)}},handleEvent:(yt,wt)=>{if(Ht(yt)){const Xt=y[yt].call(y,wt);if(typeof Xt!="function")throw new Error(`Missing dynamic event ${yt} on main thread host.`);return Xt}if(Fn(yt)){const Xt=y[yt];if(typeof Xt!="function")throw new Error(`Missing event ${yt} on main thread host.`);return Xt}throw new Error(`Malformed event name ${yt}`)}}),this._protocol.setWorkerId(this._worker.getId());let he=null;typeof Re.li.require!="undefined"&&typeof Re.li.require.getConfig=="function"?he=Re.li.require.getConfig():typeof Re.li.requirejs!="undefined"&&(he=Re.li.requirejs.s.contexts._.config);const _e=Ve.$E(y);this._onModuleLoaded=this._protocol.sendMessage(at,[this._worker.getId(),JSON.parse(JSON.stringify(he)),u,_e]);const Ie=(yt,wt)=>this._request(yt,wt),st=(yt,wt)=>this._protocol.listen(yt,wt);this._lazyProxy=new Promise((yt,wt)=>{$=wt,this._onModuleLoaded.then(Xt=>{yt(Kt(Xt,Ie,st))},Xt=>{wt(Xt),this._onError("Worker failed to load "+u,Xt)})})}getProxyObject(){return this._lazyProxy}_request(s,u){return new Promise((y,$)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(s,u).then(y,$)},$)})}_onError(s,u){console.error(s),console.info(u)}}function Fn(P){return P[0]==="o"&&P[1]==="n"&&Je.df(P.charCodeAt(2))}function Ht(P){return/^onDynamic/.test(P)&&Je.df(P.charCodeAt(9))}function Kt(P,s,u){const y=_e=>function(){const Ie=Array.prototype.slice.call(arguments,0);return s(_e,Ie)},$=_e=>function(Ie){return u(_e,Ie)};let he={};for(const _e of P){if(Ht(_e)){he[_e]=$(_e);continue}if(Fn(_e)){he[_e]=u(_e,void 0);continue}he[_e]=y(_e)}return he}class pn{constructor(s,u){this._requestHandlerFactory=u,this._requestHandler=null,this._protocol=new an({sendMessage:(y,$)=>{s(y,$)},handleMessage:(y,$)=>this._handleMessage(y,$),handleEvent:(y,$)=>this._handleEvent(y,$)})}onmessage(s){this._protocol.handleMessage(s)}_handleMessage(s,u){if(s===at)return this.initialize(u[0],u[1],u[2],u[3]);if(!this._requestHandler||typeof this._requestHandler[s]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+s));try{return Promise.resolve(this._requestHandler[s].apply(this._requestHandler,u))}catch(y){return Promise.reject(y)}}_handleEvent(s,u){if(!this._requestHandler)throw new Error("Missing requestHandler");if(Ht(s)){const y=this._requestHandler[s].call(this._requestHandler,u);if(typeof y!="function")throw new Error(`Missing dynamic event ${s} on request handler.`);return y}if(Fn(s)){const y=this._requestHandler[s];if(typeof y!="function")throw new Error(`Missing event ${s} on request handler.`);return y}throw new Error(`Malformed event name ${s}`)}initialize(s,u,y,$){this._protocol.setWorkerId(s);const Ie=Kt($,(st,yt)=>this._protocol.sendMessage(st,yt),(st,yt)=>this._protocol.listen(st,yt));return this._requestHandlerFactory?(this._requestHandler=this._requestHandlerFactory(Ie),Promise.resolve(types.getAllMethodNames(this._requestHandler))):(u&&(typeof u.baseUrl!="undefined"&&delete u.baseUrl,typeof u.paths!="undefined"&&typeof u.paths.vs!="undefined"&&delete u.paths.vs,typeof u.trustedTypesPolicy!==void 0&&delete u.trustedTypesPolicy,u.catchError=!0,globals.require.config(u)),new Promise((st,yt)=>{globals.require([y],Xt=>{if(this._requestHandler=Xt.create(Ie),!this._requestHandler){yt(new Error("No RequestHandler!"));return}st(types.getAllMethodNames(this._requestHandler))},yt)}))}}function Vn(P){return new pn(P,null)}var kt;const Zt=(kt=window.trustedTypes)===null||kt===void 0?void 0:kt.createPolicy("defaultWorkerFactory",{createScriptURL:P=>P});function wn(P){if(Re.li.MonacoEnvironment){if(typeof Re.li.MonacoEnvironment.getWorker=="function")return Re.li.MonacoEnvironment.getWorker("workerMain.js",P);if(typeof Re.li.MonacoEnvironment.getWorkerUrl=="function"){const s=Re.li.MonacoEnvironment.getWorkerUrl("workerMain.js",P);return new Worker(Zt?Zt.createScriptURL(s):s,{name:P})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function Pi(P){return typeof P.then=="function"}class Fi{constructor(s,u,y,$,he){this.id=u;const _e=wn(y);Pi(_e)?this.worker=_e:this.worker=Promise.resolve(_e),this.postMessage(s,[]),this.worker.then(Ie=>{Ie.onmessage=function(st){$(st.data)},Ie.onmessageerror=he,typeof Ie.addEventListener=="function"&&Ie.addEventListener("error",he)})}getId(){return this.id}postMessage(s,u){this.worker&&this.worker.then(y=>y.postMessage(s,u))}dispose(){this.worker&&this.worker.then(s=>s.terminate()),this.worker=null}}class Ji{constructor(s){this._label=s,this._webWorkerFailedBeforeError=!1}create(s,u,y){let $=++Ji.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Fi(s,$,this._label||"anonymous"+$,u,he=>{Be(he),this._webWorkerFailedBeforeError=he,y(he)})}}Ji.LAST_WORKER_ID=0;var si=a(2484);const zt=3;function Vt(P,s,u,y){return new si.Hs(P,s,u).ComputeDiff(y)}class vn{constructor(s){const u=[],y=[];for(let $=0,he=s.length;$<he;$++)u[$]=$t(s[$],1),y[$]=sn(s[$],1);this.lines=s,this._startColumns=u,this._endColumns=y}getElements(){const s=[];for(let u=0,y=this.lines.length;u<y;u++)s[u]=this.lines[u].substring(this._startColumns[u]-1,this._endColumns[u]-1);return s}getStrictElement(s){return this.lines[s]}getStartLineNumber(s){return s+1}getEndLineNumber(s){return s+1}createCharSequence(s,u,y){const $=[],he=[],_e=[];let Ie=0;for(let st=u;st<=y;st++){const yt=this.lines[st],wt=s?this._startColumns[st]:1,Xt=s?this._endColumns[st]:yt.length+1;for(let Rn=wt;Rn<Xt;Rn++)$[Ie]=yt.charCodeAt(Rn-1),he[Ie]=st+1,_e[Ie]=Rn,Ie++}return new Sn($,he,_e)}}class Sn{constructor(s,u,y){this._charCodes=s,this._lineNumbers=u,this._columns=y}getElements(){return this._charCodes}getStartLineNumber(s){return this._lineNumbers[s]}getStartColumn(s){return this._columns[s]}getEndLineNumber(s){return this._lineNumbers[s]}getEndColumn(s){return this._columns[s]+1}}class Bn{constructor(s,u,y,$,he,_e,Ie,st){this.originalStartLineNumber=s,this.originalStartColumn=u,this.originalEndLineNumber=y,this.originalEndColumn=$,this.modifiedStartLineNumber=he,this.modifiedStartColumn=_e,this.modifiedEndLineNumber=Ie,this.modifiedEndColumn=st}static createFromDiffChange(s,u,y){let $,he,_e,Ie,st,yt,wt,Xt;return s.originalLength===0?($=0,he=0,_e=0,Ie=0):($=u.getStartLineNumber(s.originalStart),he=u.getStartColumn(s.originalStart),_e=u.getEndLineNumber(s.originalStart+s.originalLength-1),Ie=u.getEndColumn(s.originalStart+s.originalLength-1)),s.modifiedLength===0?(st=0,yt=0,wt=0,Xt=0):(st=y.getStartLineNumber(s.modifiedStart),yt=y.getStartColumn(s.modifiedStart),wt=y.getEndLineNumber(s.modifiedStart+s.modifiedLength-1),Xt=y.getEndColumn(s.modifiedStart+s.modifiedLength-1)),new Bn($,he,_e,Ie,st,yt,wt,Xt)}}function mn(P){if(P.length<=1)return P;const s=[P[0]];let u=s[0];for(let y=1,$=P.length;y<$;y++){const he=P[y],_e=he.originalStart-(u.originalStart+u.originalLength),Ie=he.modifiedStart-(u.modifiedStart+u.modifiedLength);Math.min(_e,Ie)<zt?(u.originalLength=he.originalStart+he.originalLength-u.originalStart,u.modifiedLength=he.modifiedStart+he.modifiedLength-u.modifiedStart):(s.push(he),u=he)}return s}class Jt{constructor(s,u,y,$,he){this.originalStartLineNumber=s,this.originalEndLineNumber=u,this.modifiedStartLineNumber=y,this.modifiedEndLineNumber=$,this.charChanges=he}static createFromDiffResult(s,u,y,$,he,_e,Ie){let st,yt,wt,Xt,Rn;if(u.originalLength===0?(st=y.getStartLineNumber(u.originalStart)-1,yt=0):(st=y.getStartLineNumber(u.originalStart),yt=y.getEndLineNumber(u.originalStart+u.originalLength-1)),u.modifiedLength===0?(wt=$.getStartLineNumber(u.modifiedStart)-1,Xt=0):(wt=$.getStartLineNumber(u.modifiedStart),Xt=$.getEndLineNumber(u.modifiedStart+u.modifiedLength-1)),_e&&u.originalLength>0&&u.originalLength<20&&u.modifiedLength>0&&u.modifiedLength<20&&he()){const ui=y.createCharSequence(s,u.originalStart,u.originalStart+u.originalLength-1),Ai=$.createCharSequence(s,u.modifiedStart,u.modifiedStart+u.modifiedLength-1);let Gi=Vt(ui,Ai,he,!0).changes;Ie&&(Gi=mn(Gi)),Rn=[];for(let Cr=0,Gr=Gi.length;Cr<Gr;Cr++)Rn.push(Bn.createFromDiffChange(Gi[Cr],ui,Ai))}return new Jt(st,yt,wt,Xt,Rn)}}class En{constructor(s,u,y){this.shouldComputeCharChanges=y.shouldComputeCharChanges,this.shouldPostProcessCharChanges=y.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=y.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=y.shouldMakePrettyDiff,this.originalLines=s,this.modifiedLines=u,this.original=new vn(s),this.modified=new vn(u),this.continueLineDiff=Tn(y.maxComputationTime),this.continueCharDiff=Tn(y.maxComputationTime===0?0:Math.min(y.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const s=Vt(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),u=s.changes,y=s.quitEarly;if(this.shouldIgnoreTrimWhitespace){const Ie=[];for(let st=0,yt=u.length;st<yt;st++)Ie.push(Jt.createFromDiffResult(this.shouldIgnoreTrimWhitespace,u[st],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:y,changes:Ie}}const $=[];let he=0,_e=0;for(let Ie=-1,st=u.length;Ie<st;Ie++){const yt=Ie+1<st?u[Ie+1]:null,wt=yt?yt.originalStart:this.originalLines.length,Xt=yt?yt.modifiedStart:this.modifiedLines.length;for(;he<wt&&_e<Xt;){const Rn=this.originalLines[he],ui=this.modifiedLines[_e];if(Rn!==ui){{let Ai=$t(Rn,1),Gi=$t(ui,1);for(;Ai>1&&Gi>1;){const Cr=Rn.charCodeAt(Ai-2),Gr=ui.charCodeAt(Gi-2);if(Cr!==Gr)break;Ai--,Gi--}(Ai>1||Gi>1)&&this._pushTrimWhitespaceCharChange($,he+1,1,Ai,_e+1,1,Gi)}{let Ai=sn(Rn,1),Gi=sn(ui,1);const Cr=Rn.length+1,Gr=ui.length+1;for(;Ai<Cr&&Gi<Gr;){const io=Rn.charCodeAt(Ai-1),Ir=Rn.charCodeAt(Gi-1);if(io!==Ir)break;Ai++,Gi++}(Ai<Cr||Gi<Gr)&&this._pushTrimWhitespaceCharChange($,he+1,Ai,Cr,_e+1,Gi,Gr)}}he++,_e++}yt&&($.push(Jt.createFromDiffResult(this.shouldIgnoreTrimWhitespace,yt,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),he+=yt.originalLength,_e+=yt.modifiedLength)}return{quitEarly:y,changes:$}}_pushTrimWhitespaceCharChange(s,u,y,$,he,_e,Ie){if(this._mergeTrimWhitespaceCharChange(s,u,y,$,he,_e,Ie))return;let st;this.shouldComputeCharChanges&&(st=[new Bn(u,y,u,$,he,_e,he,Ie)]),s.push(new Jt(u,u,he,he,st))}_mergeTrimWhitespaceCharChange(s,u,y,$,he,_e,Ie){const st=s.length;if(st===0)return!1;const yt=s[st-1];return yt.originalEndLineNumber===0||yt.modifiedEndLineNumber===0?!1:yt.originalEndLineNumber+1===u&&yt.modifiedEndLineNumber+1===he?(yt.originalEndLineNumber=u,yt.modifiedEndLineNumber=he,this.shouldComputeCharChanges&&yt.charChanges&&yt.charChanges.push(new Bn(u,y,u,$,he,_e,he,Ie)),!0):!1}}function $t(P,s){const u=Je.LC(P);return u===-1?s:u+1}function sn(P,s){const u=Je.ow(P);return u===-1?s:u+2}function Tn(P){if(P===0)return()=>!0;const s=Date.now();return()=>Date.now()-s<P}var ri=a(90310);class oi{constructor(s,u,y,$){this._uri=s,this._lines=u,this._eol=y,this._versionId=$,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(s){s.eol&&s.eol!==this._eol&&(this._eol=s.eol,this._lineStarts=null);const u=s.changes;for(const y of u)this._acceptDeleteRange(y.range),this._acceptInsertText(new j.L(y.range.startLineNumber,y.range.startColumn),y.text);this._versionId=s.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const s=this._eol.length,u=this._lines.length,y=new Uint32Array(u);for(let $=0;$<u;$++)y[$]=this._lines[$].length+s;this._lineStarts=new ri.oQ(y)}}_setLineText(s,u){this._lines[s]=u,this._lineStarts&&this._lineStarts.setValue(s,this._lines[s].length+this._eol.length)}_acceptDeleteRange(s){if(s.startLineNumber===s.endLineNumber){if(s.startColumn===s.endColumn)return;this._setLineText(s.startLineNumber-1,this._lines[s.startLineNumber-1].substring(0,s.startColumn-1)+this._lines[s.startLineNumber-1].substring(s.endColumn-1));return}this._setLineText(s.startLineNumber-1,this._lines[s.startLineNumber-1].substring(0,s.startColumn-1)+this._lines[s.endLineNumber-1].substring(s.endColumn-1)),this._lines.splice(s.startLineNumber,s.endLineNumber-s.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(s.startLineNumber,s.endLineNumber-s.startLineNumber)}_acceptInsertText(s,u){if(u.length===0)return;const y=(0,Je.uq)(u);if(y.length===1){this._setLineText(s.lineNumber-1,this._lines[s.lineNumber-1].substring(0,s.column-1)+y[0]+this._lines[s.lineNumber-1].substring(s.column-1));return}y[y.length-1]+=this._lines[s.lineNumber-1].substring(s.column-1),this._setLineText(s.lineNumber-1,this._lines[s.lineNumber-1].substring(0,s.column-1)+y[0]);const $=new Uint32Array(y.length-1);for(let he=1;he<y.length;he++)this._lines.splice(s.lineNumber+he-1,0,y[he]),$[he-1]=y[he].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(s.lineNumber,$)}}var On=a(270),Qn=a(44906);class Yi{constructor(s,u,y){const $=new Uint8Array(s*u);for(let he=0,_e=s*u;he<_e;he++)$[he]=y;this._data=$,this.rows=s,this.cols=u}get(s,u){return this._data[s*this.cols+u]}set(s,u,y){this._data[s*this.cols+u]=y}}class Lr{constructor(s){let u=0,y=0;for(let he=0,_e=s.length;he<_e;he++){const[Ie,st,yt]=s[he];st>u&&(u=st),Ie>y&&(y=Ie),yt>y&&(y=yt)}u++,y++;const $=new Yi(y,u,0);for(let he=0,_e=s.length;he<_e;he++){const[Ie,st,yt]=s[he];$.set(Ie,st,yt)}this._states=$,this._maxCharCode=u}nextState(s,u){return u<0||u>=this._maxCharCode?0:this._states.get(s,u)}}let Dr=null;function Fr(){return Dr===null&&(Dr=new Lr([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Dr}let Sr=null;function Ro(){if(Sr===null){Sr=new Qn.N(0);const P=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let u=0;u<P.length;u++)Sr.set(P.charCodeAt(u),1);const s=".,;";for(let u=0;u<s.length;u++)Sr.set(s.charCodeAt(u),2)}return Sr}class to{static _createLink(s,u,y,$,he){let _e=he-1;do{const Ie=u.charCodeAt(_e);if(s.get(Ie)!==2)break;_e--}while(_e>$);if($>0){const Ie=u.charCodeAt($-1),st=u.charCodeAt(_e);(Ie===40&&st===41||Ie===91&&st===93||Ie===123&&st===125)&&_e--}return{range:{startLineNumber:y,startColumn:$+1,endLineNumber:y,endColumn:_e+2},url:u.substring($,_e+1)}}static computeLinks(s,u=Fr()){const y=Ro(),$=[];for(let he=1,_e=s.getLineCount();he<=_e;he++){const Ie=s.getLineContent(he),st=Ie.length;let yt=0,wt=0,Xt=0,Rn=1,ui=!1,Ai=!1,Gi=!1,Cr=!1;for(;yt<st;){let Gr=!1;const io=Ie.charCodeAt(yt);if(Rn===13){let Ir;switch(io){case 40:ui=!0,Ir=0;break;case 41:Ir=ui?0:1;break;case 91:Gi=!0,Ai=!0,Ir=0;break;case 93:Gi=!1,Ir=Ai?0:1;break;case 123:Cr=!0,Ir=0;break;case 125:Ir=Cr?0:1;break;case 39:Ir=Xt===34||Xt===96?0:1;break;case 34:Ir=Xt===39||Xt===96?0:1;break;case 96:Ir=Xt===39||Xt===34?0:1;break;case 42:Ir=Xt===42?1:0;break;case 124:Ir=Xt===124?1:0;break;case 32:Ir=Gi?0:1;break;default:Ir=y.get(io)}Ir===1&&($.push(to._createLink(y,Ie,he,wt,yt)),Gr=!0)}else if(Rn===12){let Ir;io===91?(Ai=!0,Ir=0):Ir=y.get(io),Ir===1?Gr=!0:Rn=13}else Rn=u.nextState(Rn,io),Rn===0&&(Gr=!0);Gr&&(Rn=1,ui=!1,Ai=!1,Cr=!1,wt=yt+1,Xt=io),yt++}Rn===13&&$.push(to._createLink(y,Ie,he,wt,st))}return $}}function no(P){return!P||typeof P.getLineCount!="function"||typeof P.getLineContent!="function"?[]:to.computeLinks(P)}class dr{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(s,u,y,$,he){if(s&&u){const _e=this.doNavigateValueSet(u,he);if(_e)return{range:s,value:_e}}if(y&&$){const _e=this.doNavigateValueSet($,he);if(_e)return{range:y,value:_e}}return null}doNavigateValueSet(s,u){const y=this.numberReplace(s,u);return y!==null?y:this.textReplace(s,u)}numberReplace(s,u){const y=Math.pow(10,s.length-(s.lastIndexOf(".")+1));let $=Number(s),he=parseFloat(s);return!isNaN($)&&!isNaN(he)&&$===he?$===0&&!u?null:($=Math.floor($*y),$+=u?y:-y,String($/y)):null}textReplace(s,u){return this.valueSetsReplace(this._defaultValueSet,s,u)}valueSetsReplace(s,u,y){let $=null;for(let he=0,_e=s.length;$===null&&he<_e;he++)$=this.valueSetReplace(s[he],u,y);return $}valueSetReplace(s,u,y){let $=s.indexOf(u);return $>=0?($+=y?1:-1,$<0?$=s.length-1:$%=s.length,s[$]):null}}dr.INSTANCE=new dr;var kn=a(84013),bt=a(31446),Bt=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};class At extends oi{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(s){return this._lines[s-1]}getWordAtPosition(s,u){const y=(0,On.t2)(s.column,(0,On.eq)(u),this._lines[s.lineNumber-1],0);return y?new T.e(s.lineNumber,y.startColumn,s.lineNumber,y.endColumn):null}words(s){const u=this._lines,y=this._wordenize.bind(this);let $=0,he="",_e=0,Ie=[];return{*[Symbol.iterator](){for(;;)if(_e<Ie.length){const st=he.substring(Ie[_e].start,Ie[_e].end);_e+=1,yield st}else if($<u.length)he=u[$],Ie=y(he,s),_e=0,$+=1;else break}}}getLineWords(s,u){const y=this._lines[s-1],$=this._wordenize(y,u),he=[];for(const _e of $)he.push({word:y.substring(_e.start,_e.end),startColumn:_e.start+1,endColumn:_e.end+1});return he}_wordenize(s,u){const y=[];let $;for(u.lastIndex=0;($=u.exec(s))&&$[0].length!==0;)y.push({start:$.index,end:$.index+$[0].length});return y}getValueInRange(s){if(s=this._validateRange(s),s.startLineNumber===s.endLineNumber)return this._lines[s.startLineNumber-1].substring(s.startColumn-1,s.endColumn-1);const u=this._eol,y=s.startLineNumber-1,$=s.endLineNumber-1,he=[];he.push(this._lines[y].substring(s.startColumn-1));for(let _e=y+1;_e<$;_e++)he.push(this._lines[_e]);return he.push(this._lines[$].substring(0,s.endColumn-1)),he.join(u)}offsetAt(s){return s=this._validatePosition(s),this._ensureLineStarts(),this._lineStarts.getPrefixSum(s.lineNumber-2)+(s.column-1)}positionAt(s){s=Math.floor(s),s=Math.max(0,s),this._ensureLineStarts();const u=this._lineStarts.getIndexOf(s),y=this._lines[u.index].length;return{lineNumber:1+u.index,column:1+Math.min(u.remainder,y)}}_validateRange(s){const u=this._validatePosition({lineNumber:s.startLineNumber,column:s.startColumn}),y=this._validatePosition({lineNumber:s.endLineNumber,column:s.endColumn});return u.lineNumber!==s.startLineNumber||u.column!==s.startColumn||y.lineNumber!==s.endLineNumber||y.column!==s.endColumn?{startLineNumber:u.lineNumber,startColumn:u.column,endLineNumber:y.lineNumber,endColumn:y.column}:s}_validatePosition(s){if(!j.L.isIPosition(s))throw new Error("bad position");let{lineNumber:u,column:y}=s,$=!1;if(u<1)u=1,y=1,$=!0;else if(u>this._lines.length)u=this._lines.length,y=this._lines[u-1].length+1,$=!0;else{const he=this._lines[u-1].length+1;y<1?(y=1,$=!0):y>he&&(y=he,$=!0)}return $?{lineNumber:u,column:y}:s}}class Ke{constructor(s,u){this._host=s,this._models=Object.create(null),this._foreignModuleFactory=u,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(s){return this._models[s]}_getModels(){const s=[];return Object.keys(this._models).forEach(u=>s.push(this._models[u])),s}acceptNewModel(s){this._models[s.url]=new At(S.o.parse(s.url),s.lines,s.EOL,s.versionId)}acceptModelChanged(s,u){if(!this._models[s])return;this._models[s].onEvents(u)}acceptRemovedModel(s){!this._models[s]||delete this._models[s]}computeUnicodeHighlights(s,u,y){return Bt(this,void 0,void 0,function*(){const $=this._getModel(s);return $?bt.a.computeUnicodeHighlights($,u,y):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(s,u,y,$){return Bt(this,void 0,void 0,function*(){const he=this._getModel(s),_e=this._getModel(u);if(!he||!_e)return null;const Ie=he.getLinesContent(),st=_e.getLinesContent(),wt=new En(Ie,st,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:y,shouldMakePrettyDiff:!0,maxComputationTime:$}).computeDiff(),Xt=wt.changes.length>0?!1:this._modelsAreIdentical(he,_e);return{quitEarly:wt.quitEarly,identical:Xt,changes:wt.changes}})}_modelsAreIdentical(s,u){const y=s.getLineCount(),$=u.getLineCount();if(y!==$)return!1;for(let he=1;he<=y;he++){const _e=s.getLineContent(he),Ie=u.getLineContent(he);if(_e!==Ie)return!1}return!0}computeMoreMinimalEdits(s,u){return Bt(this,void 0,void 0,function*(){const y=this._getModel(s);if(!y)return u;const $=[];let he;u=u.slice(0).sort((_e,Ie)=>{if(_e.range&&Ie.range)return T.e.compareRangesUsingStarts(_e.range,Ie.range);const st=_e.range?0:1,yt=Ie.range?0:1;return st-yt});for(let{range:_e,text:Ie,eol:st}of u){if(typeof st=="number"&&(he=st),T.e.isEmpty(_e)&&!Ie)continue;const yt=y.getValueInRange(_e);if(Ie=Ie.replace(/\r\n|\n|\r/g,y.eol),yt===Ie)continue;if(Math.max(Ie.length,yt.length)>Ke._diffLimit){$.push({range:_e,text:Ie});continue}const wt=(0,si.a$)(yt,Ie,!1),Xt=y.offsetAt(T.e.lift(_e).getStartPosition());for(const Rn of wt){const ui=y.positionAt(Xt+Rn.originalStart),Ai=y.positionAt(Xt+Rn.originalStart+Rn.originalLength),Gi={text:Ie.substr(Rn.modifiedStart,Rn.modifiedLength),range:{startLineNumber:ui.lineNumber,startColumn:ui.column,endLineNumber:Ai.lineNumber,endColumn:Ai.column}};y.getValueInRange(Gi.range)!==Gi.text&&$.push(Gi)}}return typeof he=="number"&&$.push({eol:he,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),$})}computeLinks(s){return Bt(this,void 0,void 0,function*(){const u=this._getModel(s);return u?no(u):null})}textualSuggest(s,u,y,$){return Bt(this,void 0,void 0,function*(){const he=new kn.G(!0),_e=new RegExp(y,$),Ie=new Set;e:for(let st of s){const yt=this._getModel(st);if(!!yt){for(let wt of yt.words(_e))if(!(wt===u||!isNaN(Number(wt)))&&(Ie.add(wt),Ie.size>Ke._suggestionsLimit))break e}}return{words:Array.from(Ie),duration:he.elapsed()}})}computeWordRanges(s,u,y,$){return Bt(this,void 0,void 0,function*(){const he=this._getModel(s);if(!he)return Object.create(null);const _e=new RegExp(y,$),Ie=Object.create(null);for(let st=u.startLineNumber;st<u.endLineNumber;st++){const yt=he.getLineWords(st,_e);for(const wt of yt){if(!isNaN(Number(wt.word)))continue;let Xt=Ie[wt.word];Xt||(Xt=[],Ie[wt.word]=Xt),Xt.push({startLineNumber:st,startColumn:wt.startColumn,endLineNumber:st,endColumn:wt.endColumn})}}return Ie})}navigateValueSet(s,u,y,$,he){return Bt(this,void 0,void 0,function*(){const _e=this._getModel(s);if(!_e)return null;const Ie=new RegExp($,he);u.startColumn===u.endColumn&&(u={startLineNumber:u.startLineNumber,startColumn:u.startColumn,endLineNumber:u.endLineNumber,endColumn:u.endColumn+1});const st=_e.getValueInRange(u),yt=_e.getWordAtPosition({lineNumber:u.startLineNumber,column:u.startColumn},Ie);if(!yt)return null;const wt=_e.getValueInRange(yt);return dr.INSTANCE.navigateValueSet(u,st,yt,wt,y)})}loadForeignModule(s,u,y){const $=(Ie,st)=>this._host.fhr(Ie,st),_e={host:Ve.IU(y,$),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(_e,u),Promise.resolve(Ve.$E(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(s,u){if(!this._foreignModule||typeof this._foreignModule[s]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+s));try{return Promise.resolve(this._foreignModule[s].apply(this._foreignModule,u))}catch(y){return Promise.reject(y)}}}Ke._diffLimit=1e5,Ke._suggestionsLimit=1e4;function vt(P){return new Ke(P,null)}typeof importScripts=="function"&&(Re.li.monaco=qe());var Lt=a(71765),tn=a(9488),dn=a(43557),hn=a(71922),Wn=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},Gn=function(P,s){return function(u,y){s(u,y,P)}},wi=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};const Ci=60*1e3,Xi=5*60*1e3;function Nr(P,s){const u=P.getModel(s);return!(!u||u.isTooLargeForSyncing())}let yr=class extends Q.JT{constructor(s,u,y,$,he){super();this._modelService=s,this._workerManager=this._register(new Jr(this._modelService,$)),this._logService=y,this._register(he.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(_e,Ie)=>Nr(this._modelService,_e.uri)?this._workerManager.withWorker().then(st=>st.computeLinks(_e.uri)).then(st=>st&&{links:st}):Promise.resolve({links:[]})})),this._register(he.completionProvider.register("*",new Xr(this._workerManager,u,this._modelService,$)))}dispose(){super.dispose()}canComputeUnicodeHighlights(s){return Nr(this._modelService,s)}computedUnicodeHighlights(s,u,y){return this._workerManager.withWorker().then($=>$.computedUnicodeHighlights(s,u,y))}computeDiff(s,u,y,$){return this._workerManager.withWorker().then(he=>he.computeDiff(s,u,y,$))}computeMoreMinimalEdits(s,u){if((0,tn.Of)(u)){if(!Nr(this._modelService,s))return Promise.resolve(u);const y=kn.G.create(!0),$=this._workerManager.withWorker().then(he=>he.computeMoreMinimalEdits(s,u));return $.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",s.toString(!0),y.elapsed())),Promise.race([$,(0,Ye.Vs)(1e3).then(()=>u)])}else return Promise.resolve(void 0)}canNavigateValueSet(s){return Nr(this._modelService,s)}navigateValueSet(s,u,y){return this._workerManager.withWorker().then($=>$.navigateValueSet(s,u,y))}canComputeWordRanges(s){return Nr(this._modelService,s)}computeWordRanges(s,u){return this._workerManager.withWorker().then(y=>y.computeWordRanges(s,u))}};yr=Wn([Gn(0,Ue.q),Gn(1,Lt.V),Gn(2,dn.VZ),Gn(3,Ot.c_),Gn(4,hn.p)],yr);class Xr{constructor(s,u,y,$){this.languageConfigurationService=$,this._debugDisplayName="wordbasedCompletions",this._workerManager=s,this._configurationService=u,this._modelService=y}provideCompletionItems(s,u){return wi(this,void 0,void 0,function*(){const y=this._configurationService.getValue(s.uri,u,"editor");if(!y.wordBasedSuggestions)return;const $=[];if(y.wordBasedSuggestionsMode==="currentDocument")Nr(this._modelService,s.uri)&&$.push(s.uri);else for(const Xt of this._modelService.getModels())!Nr(this._modelService,Xt.uri)||(Xt===s?$.unshift(Xt.uri):(y.wordBasedSuggestionsMode==="allDocuments"||Xt.getLanguageId()===s.getLanguageId())&&$.push(Xt.uri));if($.length===0)return;const he=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),_e=s.getWordAtPosition(u),Ie=_e?new T.e(u.lineNumber,_e.startColumn,u.lineNumber,_e.endColumn):T.e.fromPositions(u),st=Ie.setEndPosition(u.lineNumber,u.column),wt=yield(yield this._workerManager.withWorker()).textualSuggest($,_e==null?void 0:_e.word,he);if(!!wt)return{duration:wt.duration,suggestions:wt.words.map(Xt=>({kind:18,label:Xt,insertText:Xt,range:{insert:st,replace:Ie}}))}})}}class Jr extends Q.JT{constructor(s,u){super();this.languageConfigurationService=u,this._modelService=s,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Ye.zh).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(Xi/2)),this._register(this._modelService.onModelRemoved($=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>Xi&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new nr(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class $o extends Q.JT{constructor(s,u,y){super();if(this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=s,this._modelService=u,!y){const $=new Ye.zh;$.cancelAndSet(()=>this._checkStopModelSync(),Math.round(Ci/2)),this._register($)}}dispose(){for(let s in this._syncedModels)(0,Q.B9)(this._syncedModels[s]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(s,u){for(const y of s){const $=y.toString();this._syncedModels[$]||this._beginModelSync(y,u),this._syncedModels[$]&&(this._syncedModelsLastUsedTime[$]=new Date().getTime())}}_checkStopModelSync(){const s=new Date().getTime(),u=[];for(let y in this._syncedModelsLastUsedTime)s-this._syncedModelsLastUsedTime[y]>Ci&&u.push(y);for(const y of u)this._stopModelSync(y)}_beginModelSync(s,u){const y=this._modelService.getModel(s);if(!y||!u&&y.isTooLargeForSyncing())return;const $=s.toString();this._proxy.acceptNewModel({url:y.uri.toString(),lines:y.getLinesContent(),EOL:y.getEOL(),versionId:y.getVersionId()});const he=new Q.SL;he.add(y.onDidChangeContent(_e=>{this._proxy.acceptModelChanged($.toString(),_e)})),he.add(y.onWillDispose(()=>{this._stopModelSync($)})),he.add((0,Q.OF)(()=>{this._proxy.acceptRemovedModel($)})),this._syncedModels[$]=he}_stopModelSync(s){const u=this._syncedModels[s];delete this._syncedModels[s],delete this._syncedModelsLastUsedTime[s],(0,Q.B9)(u)}}class ms{constructor(s){this._instance=s,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class cs{constructor(s){this._workerClient=s}fhr(s,u){return this._workerClient.fhr(s,u)}}class nr extends Q.JT{constructor(s,u,y,$){super();this.languageConfigurationService=$,this._disposed=!1,this._modelService=s,this._keepIdleModels=u,this._workerFactory=new Ji(y),this._worker=null,this._modelManager=null}fhr(s,u){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new An(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new cs(this)))}catch(s){Be(s),this._worker=new ms(new Ke(new cs(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,s=>(Be(s),this._worker=new ms(new Ke(new cs(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(s){return this._modelManager||(this._modelManager=this._register(new $o(s,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(s,u=!1){return wi(this,void 0,void 0,function*(){return this._disposed?Promise.reject((0,dt.F0)()):this._getProxy().then(y=>(this._getOrCreateModelManager(y).ensureSyncedResources(s,u),y))})}computedUnicodeHighlights(s,u,y){return this._withSyncedResources([s]).then($=>$.computeUnicodeHighlights(s.toString(),u,y))}computeDiff(s,u,y,$){return this._withSyncedResources([s,u],!0).then(he=>he.computeDiff(s.toString(),u.toString(),y,$))}computeMoreMinimalEdits(s,u){return this._withSyncedResources([s]).then(y=>y.computeMoreMinimalEdits(s.toString(),u))}computeLinks(s){return this._withSyncedResources([s]).then(u=>u.computeLinks(s.toString()))}textualSuggest(s,u,y){return wi(this,void 0,void 0,function*(){const $=yield this._withSyncedResources(s),he=y.source,_e=(0,Je.mr)(y);return $.textualSuggest(s.map(Ie=>Ie.toString()),u,he,_e)})}computeWordRanges(s,u){return this._withSyncedResources([s]).then(y=>{const $=this._modelService.getModel(s);if(!$)return Promise.resolve(null);const he=this.languageConfigurationService.getLanguageConfiguration($.getLanguageId()).getWordDefinition(),_e=he.source,Ie=(0,Je.mr)(he);return y.computeWordRanges(s.toString(),u,_e,Ie)})}navigateValueSet(s,u,y){return this._withSyncedResources([s]).then($=>{const he=this._modelService.getModel(s);if(!he)return null;const _e=this.languageConfigurationService.getLanguageConfiguration(he.getLanguageId()).getWordDefinition(),Ie=_e.source,st=(0,Je.mr)(_e);return $.navigateValueSet(s.toString(),u,y,Ie,st)})}dispose(){super.dispose(),this._disposed=!0}}function tr(P,s,u){return new Br(P,s,u)}class Br extends nr{constructor(s,u,y){super(s,y.keepIdleModels||!1,y.label,u);this._foreignModuleId=y.moduleId,this._foreignModuleCreateData=y.createData||null,this._foreignModuleHost=y.host||null,this._foreignProxy=null}fhr(s,u){if(!this._foreignModuleHost||typeof this._foreignModuleHost[s]!="function")return Promise.reject(new Error("Missing method "+s+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[s].apply(this._foreignModuleHost,u))}catch(y){return Promise.reject(y)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(s=>{const u=this._foreignModuleHost?Ve.$E(this._foreignModuleHost):[];return s.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,u).then(y=>{this._foreignModuleCreateData=null;const $=(Ie,st)=>s.fmr(Ie,st),he=(Ie,st)=>function(){const yt=Array.prototype.slice.call(arguments,0);return st(Ie,yt)},_e={};for(const Ie of y)_e[Ie]=he(Ie,$);return _e})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(s){return this._withSyncedResources(s).then(u=>this.getProxy())}}var Mr=a(77378),so=a(77736),jr=a(1118);function No(P){return Array.isArray(P)}function ko(P){return!No(P)}function li(P){return typeof P=="string"}function tt(P){return!li(P)}function St(P){return!P}function Pt(P,s){return P.ignoreCase&&s?s.toLowerCase():s}function Yt(P){return P.replace(/[&<>'"_]/g,"-")}function en(P,s){console.log(`${P.languageId}: ${s}`)}function Ct(P,s){return new Error(`${P.languageId}: ${s}`)}function J(P,s,u,y,$){const he=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let _e=null;return s.replace(he,function(Ie,st,yt,wt,Xt,Rn,ui,Ai,Gi){return St(yt)?St(wt)?!St(Xt)&&Xt<y.length?Pt(P,y[Xt]):!St(ui)&&P&&typeof P[ui]=="string"?P[ui]:(_e===null&&(_e=$.split("."),_e.unshift($)),!St(Rn)&&Rn<_e.length?Pt(P,_e[Rn]):""):Pt(P,u):"$"})}function Ae(P,s){let u=s;for(;u&&u.length>0;){const y=P.tokenizer[u];if(y)return y;const $=u.lastIndexOf(".");$<0?u=null:u=u.substr(0,$)}return null}function ot(P,s){let u=s;for(;u&&u.length>0;){if(P.stateNames[u])return!0;const $=u.lastIndexOf(".");$<0?u=null:u=u.substr(0,$)}return!1}const Ee=5;class m{constructor(s){this._maxCacheDepth=s,this._entries=Object.create(null)}static create(s,u){return this._INSTANCE.create(s,u)}create(s,u){if(s!==null&&s.depth>=this._maxCacheDepth)return new V(s,u);let y=V.getStackElementId(s);y.length>0&&(y+="|"),y+=u;let $=this._entries[y];return $||($=new V(s,u),this._entries[y]=$,$)}}m._INSTANCE=new m(Ee);class V{constructor(s,u){this.parent=s,this.state=u,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(s){let u="";for(;s!==null;)u.length>0&&(u+="|"),u+=s.state,s=s.parent;return u}static _equals(s,u){for(;s!==null&&u!==null;){if(s===u)return!0;if(s.state!==u.state)return!1;s=s.parent,u=u.parent}return s===null&&u===null}equals(s){return V._equals(this,s)}push(s){return m.create(this,s)}pop(){return this.parent}popall(){let s=this;for(;s.parent;)s=s.parent;return s}switchTo(s){return m.create(this.parent,s)}}class G{constructor(s,u){this.languageId=s,this.state=u}equals(s){return this.languageId===s.languageId&&this.state.equals(s.state)}clone(){return this.state.clone()===this.state?this:new G(this.languageId,this.state)}}class ce{constructor(s){this._maxCacheDepth=s,this._entries=Object.create(null)}static create(s,u){return this._INSTANCE.create(s,u)}create(s,u){if(u!==null)return new ve(s,u);if(s!==null&&s.depth>=this._maxCacheDepth)return new ve(s,u);const y=V.getStackElementId(s);let $=this._entries[y];return $||($=new ve(s,null),this._entries[y]=$,$)}}ce._INSTANCE=new ce(Ee);class ve{constructor(s,u){this.stack=s,this.embeddedLanguageData=u}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:ce.create(this.stack,this.embeddedLanguageData)}equals(s){return!(s instanceof ve)||!this.stack.equals(s.stack)?!1:this.embeddedLanguageData===null&&s.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||s.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(s.embeddedLanguageData)}}class De{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(s){this._languageId=s}emit(s,u){this._lastTokenType===u&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=u,this._lastTokenLanguage=this._languageId,this._tokens.push(new F.WU(s,u,this._languageId)))}nestedLanguageTokenize(s,u,y,$){const he=y.languageId,_e=y.state,Ie=F.RW.get(he);if(!Ie)return this.enterLanguage(he),this.emit($,""),_e;const st=Ie.tokenize(s,u,_e);if($!==0)for(const yt of st.tokens)this._tokens.push(new F.WU(yt.offset+$,yt.type,yt.language));else this._tokens=this._tokens.concat(st.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,st.endState}finalize(s){return new F.hG(this._tokens,s)}}class ct{constructor(s,u){this._languageService=s,this._theme=u,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(s){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(s)}emit(s,u){const y=this._theme.match(this._currentLanguageId,u);this._lastTokenMetadata!==y&&(this._lastTokenMetadata=y,this._tokens.push(s),this._tokens.push(y))}static _merge(s,u,y){const $=s!==null?s.length:0,he=u.length,_e=y!==null?y.length:0;if($===0&&he===0&&_e===0)return new Uint32Array(0);if($===0&&he===0)return y;if(he===0&&_e===0)return s;const Ie=new Uint32Array($+he+_e);s!==null&&Ie.set(s);for(let st=0;st<he;st++)Ie[$+st]=u[st];return y!==null&&Ie.set(y,$+he),Ie}nestedLanguageTokenize(s,u,y,$){const he=y.languageId,_e=y.state,Ie=F.RW.get(he);if(!Ie)return this.enterLanguage(he),this.emit($,""),_e;const st=Ie.tokenizeEncoded(s,u,_e);if($!==0)for(let yt=0,wt=st.tokens.length;yt<wt;yt+=2)st.tokens[yt]+=$;return this._prependTokens=ct._merge(this._prependTokens,this._tokens,st.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,st.endState}finalize(s){return new F.DI(ct._merge(this._prependTokens,this._tokens,null),s)}}class lt{constructor(s,u,y,$){this._languageService=s,this._standaloneThemeService=u,this._languageId=y,this._lexer=$,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let he=!1;this._tokenizationRegistryListener=F.RW.onDidChange(_e=>{if(he)return;let Ie=!1;for(let st=0,yt=_e.changedLanguages.length;st<yt;st++){const wt=_e.changedLanguages[st];if(this._embeddedLanguages[wt]){Ie=!0;break}}Ie&&(he=!0,F.RW.fire([this._languageId]),he=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const s=[];for(let u in this._embeddedLanguages){const y=F.RW.get(u);if(y){if(y instanceof lt){const $=y.getLoadStatus();$.loaded===!1&&s.push($.promise)}continue}F.RW.isResolved(u)||s.push(F.RW.getOrCreate(u))}return s.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(s).then(u=>{})}}getInitialState(){const s=m.create(null,this._lexer.start);return ce.create(s,null)}tokenize(s,u,y){const $=new De,he=this._tokenize(s,u,y,$);return $.finalize(he)}tokenizeEncoded(s,u,y){const $=new ct(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),he=this._tokenize(s,u,y,$);return $.finalize(he)}_tokenize(s,u,y,$){return y.embeddedLanguageData?this._nestedTokenize(s,u,y,0,$):this._myTokenize(s,u,y,0,$)}_findLeavingNestedLanguageOffset(s,u){let y=this._lexer.tokenizer[u.stack.state];if(!y&&(y=Ae(this._lexer,u.stack.state),!y))throw Ct(this._lexer,"tokenizer state is not defined: "+u.stack.state);let $=-1,he=!1;for(const _e of y){if(!tt(_e.action)||_e.action.nextEmbedded!=="@pop")continue;he=!0;let Ie=_e.regex;const st=_e.regex.source;if(st.substr(0,4)==="^(?:"&&st.substr(st.length-1,1)===")"){const wt=(Ie.ignoreCase?"i":"")+(Ie.unicode?"u":"");Ie=new RegExp(st.substr(4,st.length-5),wt)}const yt=s.search(Ie);yt===-1||yt!==0&&_e.matchOnlyAtLineStart||($===-1||yt<$)&&($=yt)}if(!he)throw Ct(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+u.stack.state);return $}_nestedTokenize(s,u,y,$,he){const _e=this._findLeavingNestedLanguageOffset(s,y);if(_e===-1){const yt=he.nestedLanguageTokenize(s,u,y.embeddedLanguageData,$);return ce.create(y.stack,new G(y.embeddedLanguageData.languageId,yt))}const Ie=s.substring(0,_e);Ie.length>0&&he.nestedLanguageTokenize(Ie,!1,y.embeddedLanguageData,$);const st=s.substring(_e);return this._myTokenize(st,u,y,$+_e,he)}_safeRuleName(s){return s?s.name:"(unknown)"}_myTokenize(s,u,y,$,he){he.enterLanguage(this._languageId);const _e=s.length,Ie=u&&this._lexer.includeLF?s+`
`:s,st=Ie.length;let yt=y.embeddedLanguageData,wt=y.stack,Xt=0,Rn=null,ui=!0;for(;ui||Xt<st;){const Ai=Xt,Gi=wt.depth,Cr=Rn?Rn.groups.length:0,Gr=wt.state;let io=null,Ir=null,Rr=null,rs=null,Ho=null;if(Rn){io=Rn.matches;const ro=Rn.groups.shift();Ir=ro.matched,Rr=ro.action,rs=Rn.rule,Rn.groups.length===0&&(Rn=null)}else{if(!ui&&Xt>=st)break;ui=!1;let ro=this._lexer.tokenizer[Gr];if(!ro&&(ro=Ae(this._lexer,Gr),!ro))throw Ct(this._lexer,"tokenizer state is not defined: "+Gr);let zr=Ie.substr(Xt);for(const Ko of ro)if((Xt===0||!Ko.matchOnlyAtLineStart)&&(io=zr.match(Ko.regex),io)){Ir=io[0],Rr=Ko.action;break}}if(io||(io=[""],Ir=""),Rr||(Xt<st&&(io=[Ie.charAt(Xt)],Ir=io[0]),Rr=this._lexer.defaultToken),Ir===null)break;for(Xt+=Ir.length;ko(Rr)&&tt(Rr)&&Rr.test;)Rr=Rr.test(Ir,io,Gr,Xt===st);let Ur=null;if(typeof Rr=="string"||Array.isArray(Rr))Ur=Rr;else if(Rr.group)Ur=Rr.group;else if(Rr.token!==null&&Rr.token!==void 0){if(Rr.tokenSubst?Ur=J(this._lexer,Rr.token,Ir,io,Gr):Ur=Rr.token,Rr.nextEmbedded)if(Rr.nextEmbedded==="@pop"){if(!yt)throw Ct(this._lexer,"cannot pop embedded language if not inside one");yt=null}else{if(yt)throw Ct(this._lexer,"cannot enter embedded language from within an embedded language");Ho=J(this._lexer,Rr.nextEmbedded,Ir,io,Gr)}if(Rr.goBack&&(Xt=Math.max(0,Xt-Rr.goBack)),Rr.switchTo&&typeof Rr.switchTo=="string"){let ro=J(this._lexer,Rr.switchTo,Ir,io,Gr);if(ro[0]==="@"&&(ro=ro.substr(1)),Ae(this._lexer,ro))wt=wt.switchTo(ro);else throw Ct(this._lexer,"trying to switch to a state '"+ro+"' that is undefined in rule: "+this._safeRuleName(rs))}else{if(Rr.transform&&typeof Rr.transform=="function")throw Ct(this._lexer,"action.transform not supported");if(Rr.next)if(Rr.next==="@push"){if(wt.depth>=this._lexer.maxStack)throw Ct(this._lexer,"maximum tokenizer stack size reached: ["+wt.state+","+wt.parent.state+",...]");wt=wt.push(Gr)}else if(Rr.next==="@pop"){if(wt.depth<=1)throw Ct(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(rs));wt=wt.pop()}else if(Rr.next==="@popall")wt=wt.popall();else{let ro=J(this._lexer,Rr.next,Ir,io,Gr);if(ro[0]==="@"&&(ro=ro.substr(1)),Ae(this._lexer,ro))wt=wt.push(ro);else throw Ct(this._lexer,"trying to set a next state '"+ro+"' that is undefined in rule: "+this._safeRuleName(rs))}}Rr.log&&typeof Rr.log=="string"&&en(this._lexer,this._lexer.languageId+": "+J(this._lexer,Rr.log,Ir,io,Gr))}if(Ur===null)throw Ct(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(rs));const wr=ro=>{const zr=this._languageService.getLanguageIdByLanguageName(ro)||this._languageService.getLanguageIdByMimeType(ro)||ro,Ko=this._getNestedEmbeddedLanguageData(zr);if(Xt<st){const Ds=s.substr(Xt);return this._nestedTokenize(Ds,u,ce.create(wt,Ko),$+Xt,he)}else return ce.create(wt,Ko)};if(Array.isArray(Ur)){if(Rn&&Rn.groups.length>0)throw Ct(this._lexer,"groups cannot be nested: "+this._safeRuleName(rs));if(io.length!==Ur.length+1)throw Ct(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(rs));let ro=0;for(let zr=1;zr<io.length;zr++)ro+=io[zr].length;if(ro!==Ir.length)throw Ct(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(rs));Rn={rule:rs,matches:io,groups:[]};for(let zr=0;zr<Ur.length;zr++)Rn.groups[zr]={action:Ur[zr],matched:io[zr+1]};Xt-=Ir.length;continue}else{if(Ur==="@rematch"&&(Xt-=Ir.length,Ir="",io=null,Ur="",Ho!==null))return wr(Ho);if(Ir.length===0){if(st===0||Gi!==wt.depth||Gr!==wt.state||(Rn?Rn.groups.length:0)!==Cr)continue;throw Ct(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(rs))}let ro=null;if(li(Ur)&&Ur.indexOf("@brackets")===0){const zr=Ur.substr("@brackets".length),Ko=Nt(this._lexer,Ir);if(!Ko)throw Ct(this._lexer,"@brackets token returned but no bracket defined as: "+Ir);ro=Yt(Ko.token+zr)}else{const zr=Ur===""?"":Ur+this._lexer.tokenPostfix;ro=Yt(zr)}Ai<_e&&he.emit(Ai+$,ro)}if(Ho!==null)return wr(Ho)}return ce.create(wt,yt)}_getNestedEmbeddedLanguageData(s){if(!this._languageService.isRegisteredLanguageId(s))return new G(s,rn.TJ);s!==this._languageId&&(F.RW.getOrCreate(s),this._embeddedLanguages[s]=!0);const u=F.RW.get(s);return u?new G(s,u.getInitialState()):new G(s,rn.TJ)}}function Nt(P,s){if(!s)return null;s=Pt(P,s);const u=P.brackets;for(const y of u){if(y.open===s)return{token:y.token,bracketType:1};if(y.close===s)return{token:y.token,bracketType:-1}}return null}var It=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})},Ft;const jt=(Ft=window.trustedTypes)===null||Ft===void 0?void 0:Ft.createPolicy("standaloneColorizer",{createHTML:P=>P});class bn{static colorizeElement(s,u,y,$){$=$||{};const he=$.theme||"vs",_e=$.mimeType||y.getAttribute("lang")||y.getAttribute("data-lang");if(!_e)return console.error("Mode not detected"),Promise.resolve();const Ie=u.getLanguageIdByMimeType(_e)||_e;s.setTheme(he);const st=y.firstChild?y.firstChild.nodeValue:"";y.className+=" "+he;const yt=wt=>{var Xt;const Rn=(Xt=jt==null?void 0:jt.createHTML(wt))!==null&&Xt!==void 0?Xt:wt;y.innerHTML=Rn};return this.colorize(u,st||"",Ie,$).then(yt,wt=>console.error(wt))}static colorize(s,u,y,$){return It(this,void 0,void 0,function*(){const he=s.languageIdCodec;let _e=4;$&&typeof $.tabSize=="number"&&(_e=$.tabSize),Je.uS(u)&&(u=u.substr(1));const Ie=Je.uq(u);if(!s.isRegisteredLanguageId(y))return Xn(Ie,_e,he);const st=yield F.RW.getOrCreate(y);return st?Zn(Ie,_e,st,he):Xn(Ie,_e,he)})}static colorizeLine(s,u,y,$,he=4){const _e=jr.wA.isBasicASCII(s,u),Ie=jr.wA.containsRTL(s,_e,y);return(0,so.tF)(new so.IJ(!1,!0,s,!1,_e,Ie,0,$,[],he,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(s,u,y=4){const $=s.getLineContent(u);s.forceTokenization(u);const _e=s.getLineTokens(u).inflate();return this.colorizeLine($,s.mightContainNonBasicASCII(),s.mightContainRTL(),_e,y)}}function Zn(P,s,u,y){return new Promise(($,he)=>{const _e=()=>{const Ie=gi(P,s,u,y);if(u instanceof lt){const st=u.getLoadStatus();if(st.loaded===!1){st.promise.then(_e,he);return}}$(Ie)};_e()})}function Xn(P,s,u){let y=[];const $=(0<<10|1<<14|2<<23)>>>0,he=new Uint32Array(2);he[0]=0,he[1]=$;for(let _e=0,Ie=P.length;_e<Ie;_e++){const st=P[_e];he[0]=st.length;const yt=new Mr.A(he,st,u),wt=jr.wA.isBasicASCII(st,!0),Xt=jr.wA.containsRTL(st,wt,!0),Rn=(0,so.tF)(new so.IJ(!1,!0,st,!1,wt,Xt,0,yt,[],s,0,0,0,0,-1,"none",!1,!1,null));y=y.concat(Rn.html),y.push("<br/>")}return y.join("")}function gi(P,s,u,y){let $=[],he=u.getInitialState();for(let _e=0,Ie=P.length;_e<Ie;_e++){const st=P[_e],yt=u.tokenizeEncoded(st,!0,he);Mr.A.convertToEndOffset(yt.tokens,st.length);const wt=new Mr.A(yt.tokens,st,y),Xt=jr.wA.isBasicASCII(st,!0),Rn=jr.wA.containsRTL(st,Xt,!0),ui=(0,so.tF)(new so.IJ(!1,!0,st,!1,Xt,Rn,0,wt.inflate(),[],s,0,0,0,0,-1,"none",!1,!1,null));$=$.concat(ui.html),$.push("<br/>"),he=yt.endState}return $.join("")}var ji=a(85152),vr=a(63455),Un=a(63580),fn=a(65321),Vo=a(38626),jo=a(73098),Uo=a(52136),qs=a(43407),ss=a(90317),va=a(9802),ps=a(74741),wo=a(16830),Ss=a(8625),ts=a(16141),gr=a(73910),ns=a(97781),xr=a(73046),Jn=a(59554),hr=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},Pr=function(P,s){return function(u,y){s(u,y,P)}},Po=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})},Cs;const Ns=3;class as{constructor(s,u,y,$){this.originalLineStart=s,this.originalLineEnd=u,this.modifiedLineStart=y,this.modifiedLineEnd=$}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class is{constructor(s){this.entries=s}}const Xs=(0,Jn.q5)("diff-review-insert",xr.lA.add,Un.N("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),hl=(0,Jn.q5)("diff-review-remove",xr.lA.remove,Un.N("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),za=(0,Jn.q5)("diff-review-close",xr.lA.close,Un.N("diffReviewCloseIcon","Icon for 'Close' in diff review."));let fc=class Jh extends Q.JT{constructor(s,u){super();this._languageService=u,this._width=0,this._diffEditor=s,this._isVisible=!1,this.shadow=(0,Vo.X)(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=(0,Vo.X)(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new ss.o(this.actionBarContainer.domNode)),this._actionBar.push(new ps.aU("diffreview.close",Un.N("label.close","Close"),"close-diff-review "+ns.kS.asClassName(za),!0,()=>Po(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=(0,Vo.X)(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=(0,Vo.X)(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new va.s$(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(s.onDidUpdateDiff(()=>{!this._isVisible||(this._diffs=this._compute(),this._render())})),this._register(s.getModifiedEditor().onDidChangeCursorPosition(()=>{!this._isVisible||this._render()})),this._register(fn.mu(this.domNode.domNode,"click",y=>{y.preventDefault();const $=fn.Fx(y.target,"diff-review-row");$&&this._goToRow($)})),this._register(fn.mu(this.domNode.domNode,"keydown",y=>{(y.equals(18)||y.equals(2048|18)||y.equals(512|18))&&(y.preventDefault(),this._goToRow(this._getNextRow())),(y.equals(16)||y.equals(2048|16)||y.equals(512|16))&&(y.preventDefault(),this._goToRow(this._getPrevRow())),(y.equals(9)||y.equals(2048|9)||y.equals(512|9)||y.equals(1024|9))&&(y.preventDefault(),this.hide()),(y.equals(10)||y.equals(3))&&(y.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let s=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let y=-1;for(let $=0,he=this._diffs.length;$<he;$++)if(this._diffs[$]===this._currentDiff){y=$;break}s=this._diffs.length+y-1}else s=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;s=s%this._diffs.length;const u=this._diffs[s].entries;this._diffEditor.setPosition(new j.L(u[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:u[0].modifiedLineStart,endColumn:1073741824,endLineNumber:u[u.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let s=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let y=-1;for(let $=0,he=this._diffs.length;$<he;$++)if(this._diffs[$]===this._currentDiff){y=$;break}s=y+1}else s=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;s=s%this._diffs.length;const u=this._diffs[s].entries;this._diffEditor.setPosition(new j.L(u[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:u[0].modifiedLineStart,endColumn:1073741824,endLineNumber:u[u.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let s=-1;const u=this._getCurrentFocusedRow();if(u){const y=parseInt(u.getAttribute("data-line"),10);isNaN(y)||(s=y)}this.hide(),s!==-1&&(this._diffEditor.setPosition(new j.L(s,1)),this._diffEditor.revealPosition(new j.L(s,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const s=this._getCurrentFocusedRow();return s?s.previousElementSibling?s.previousElementSibling:s:this._getFirstRow()}_getNextRow(){const s=this._getCurrentFocusedRow();return s?s.nextElementSibling?s.nextElementSibling:s:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const s=document.activeElement;return s&&/diff-review-row/.test(s.className)?s:null}_goToRow(s){const u=this._getCurrentFocusedRow();s.tabIndex=0,s.focus(),u&&u!==s&&(u.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(s,u,y){this._width=u,this.shadow.setTop(s-6),this.shadow.setWidth(u),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(s),this.domNode.setWidth(u),this.domNode.setHeight(y),this._content.setHeight(y),this._content.setWidth(u),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const s=this._diffEditor.getLineChanges();if(!s||s.length===0)return[];const u=this._diffEditor.getOriginalEditor().getModel(),y=this._diffEditor.getModifiedEditor().getModel();return!u||!y?[]:Jh._mergeAdjacent(s,u.getLineCount(),y.getLineCount())}static _mergeAdjacent(s,u,y){if(!s||s.length===0)return[];const $=[];let he=0;for(let yt=0,wt=s.length;yt<wt;yt++){const Xt=s[yt],Rn=Xt.originalStartLineNumber,ui=Xt.originalEndLineNumber,Ai=Xt.modifiedStartLineNumber,Gi=Xt.modifiedEndLineNumber,Cr=[];let Gr=0;{const io=ui===0?Rn:Rn-1,Ir=Gi===0?Ai:Ai-1;let Rr=1,rs=1;if(yt>0){const wr=s[yt-1];wr.originalEndLineNumber===0?Rr=wr.originalStartLineNumber+1:Rr=wr.originalEndLineNumber+1,wr.modifiedEndLineNumber===0?rs=wr.modifiedStartLineNumber+1:rs=wr.modifiedEndLineNumber+1}let Ho=io-Ns+1,Ur=Ir-Ns+1;if(Ho<Rr){const wr=Rr-Ho;Ho=Ho+wr,Ur=Ur+wr}if(Ur<rs){const wr=rs-Ur;Ho=Ho+wr,Ur=Ur+wr}Cr[Gr++]=new as(Ho,io,Ur,Ir)}ui!==0&&(Cr[Gr++]=new as(Rn,ui,0,0)),Gi!==0&&(Cr[Gr++]=new as(0,0,Ai,Gi));{const io=ui===0?Rn+1:ui+1,Ir=Gi===0?Ai+1:Gi+1;let Rr=u,rs=y;if(yt+1<wt){const wr=s[yt+1];wr.originalEndLineNumber===0?Rr=wr.originalStartLineNumber:Rr=wr.originalStartLineNumber-1,wr.modifiedEndLineNumber===0?rs=wr.modifiedStartLineNumber:rs=wr.modifiedStartLineNumber-1}let Ho=io+Ns-1,Ur=Ir+Ns-1;if(Ho>Rr){const wr=Rr-Ho;Ho=Ho+wr,Ur=Ur+wr}if(Ur>rs){const wr=rs-Ur;Ho=Ho+wr,Ur=Ur+wr}Cr[Gr++]=new as(io,Ho,Ir,Ur)}$[he++]=new is(Cr)}let _e=$[0].entries;const Ie=[];let st=0;for(let yt=1,wt=$.length;yt<wt;yt++){const Xt=$[yt].entries,Rn=_e[_e.length-1],ui=Xt[0];if(Rn.getType()===0&&ui.getType()===0&&ui.originalLineStart<=Rn.originalLineEnd){_e[_e.length-1]=new as(Rn.originalLineStart,ui.originalLineEnd,Rn.modifiedLineStart,ui.modifiedLineEnd),_e=_e.concat(Xt.slice(1));continue}Ie[st++]=new is(_e),_e=Xt}return Ie[st++]=new is(_e),Ie}_findDiffIndex(s){const u=s.lineNumber;for(let y=0,$=this._diffs.length;y<$;y++){const he=this._diffs[y].entries,_e=he[he.length-1].modifiedLineEnd;if(u<=_e)return y}return 0}_render(){const s=this._diffEditor.getOriginalEditor().getOptions(),u=this._diffEditor.getModifiedEditor().getOptions(),y=this._diffEditor.getOriginalEditor().getModel(),$=this._diffEditor.getModifiedEditor().getModel(),he=y.getOptions(),_e=$.getOptions();if(!this._isVisible||!y||!$){fn.PO(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const Ie=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[Ie]===this._currentDiff)return;this._currentDiff=this._diffs[Ie];const st=this._diffs[Ie].entries,yt=document.createElement("div");yt.className="diff-review-table",yt.setAttribute("role","list"),yt.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),(0,Uo.N)(yt,u.get(44));let wt=0,Xt=0,Rn=0,ui=0;for(let Ur=0,wr=st.length;Ur<wr;Ur++){const ro=st[Ur],zr=ro.originalLineStart,Ko=ro.originalLineEnd,Ds=ro.modifiedLineStart,oo=ro.modifiedLineEnd;zr!==0&&(wt===0||zr<wt)&&(wt=zr),Ko!==0&&(Xt===0||Ko>Xt)&&(Xt=Ko),Ds!==0&&(Rn===0||Ds<Rn)&&(Rn=Ds),oo!==0&&(ui===0||oo>ui)&&(ui=oo)}const Ai=document.createElement("div");Ai.className="diff-review-row";const Gi=document.createElement("div");Gi.className="diff-review-cell diff-review-summary";const Cr=Xt-wt+1,Gr=ui-Rn+1;Gi.appendChild(document.createTextNode(`${Ie+1}/${this._diffs.length}: @@ -${wt},${Cr} +${Rn},${Gr} @@`)),Ai.setAttribute("data-line",String(Rn));const io=Ur=>Ur===0?Un.N("no_lines_changed","no lines changed"):Ur===1?Un.N("one_line_changed","1 line changed"):Un.N("more_lines_changed","{0} lines changed",Ur),Ir=io(Cr),Rr=io(Gr);Ai.setAttribute("aria-label",Un.N({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",Ie+1,this._diffs.length,wt,Ir,Rn,Rr)),Ai.appendChild(Gi),Ai.setAttribute("role","listitem"),yt.appendChild(Ai);const rs=u.get(59);let Ho=Rn;for(let Ur=0,wr=st.length;Ur<wr;Ur++){const ro=st[Ur];Jh._renderSection(yt,ro,Ho,rs,this._width,s,y,he,u,$,_e,this._languageService.languageIdCodec),ro.modifiedLineStart!==0&&(Ho=ro.modifiedLineEnd)}fn.PO(this._content.domNode),this._content.domNode.appendChild(yt),this.scrollbar.scanDomNode()}static _renderSection(s,u,y,$,he,_e,Ie,st,yt,wt,Xt,Rn){const ui=u.getType();let Ai="diff-review-row",Gi="";const Cr="diff-review-spacer";let Gr=null;switch(ui){case 1:Ai="diff-review-row line-insert",Gi=" char-insert",Gr=Xs;break;case 2:Ai="diff-review-row line-delete",Gi=" char-delete",Gr=hl;break}const io=u.originalLineStart,Ir=u.originalLineEnd,Rr=u.modifiedLineStart,rs=u.modifiedLineEnd,Ho=Math.max(rs-Rr,Ir-io),Ur=_e.get(131),wr=Ur.glyphMarginWidth+Ur.lineNumbersWidth,ro=yt.get(131),zr=10+ro.glyphMarginWidth+ro.lineNumbersWidth;for(let Ko=0;Ko<=Ho;Ko++){const Ds=io===0?0:io+Ko,oo=Rr===0?0:Rr+Ko,Zs=document.createElement("div");Zs.style.minWidth=he+"px",Zs.className=Ai,Zs.setAttribute("role","listitem"),oo!==0&&(y=oo),Zs.setAttribute("data-line",String(y));const Ja=document.createElement("div");Ja.className="diff-review-cell",Ja.style.height=`${$}px`,Zs.appendChild(Ja);const Hs=document.createElement("span");Hs.style.width=wr+"px",Hs.style.minWidth=wr+"px",Hs.className="diff-review-line-number"+Gi,Ds!==0?Hs.appendChild(document.createTextNode(String(Ds))):Hs.innerText="\xA0",Ja.appendChild(Hs);const ll=document.createElement("span");ll.style.width=zr+"px",ll.style.minWidth=zr+"px",ll.style.paddingRight="10px",ll.className="diff-review-line-number"+Gi,oo!==0?ll.appendChild(document.createTextNode(String(oo))):ll.innerText="\xA0",Ja.appendChild(ll);const zl=document.createElement("span");if(zl.className=Cr,Gr){const El=document.createElement("span");El.className=ns.kS.asClassName(Gr),El.innerText="\xA0\xA0",zl.appendChild(El)}else zl.innerText="\xA0\xA0";Ja.appendChild(zl);let cc;if(oo!==0){let El=this._renderLine(wt,yt,Xt.tabSize,oo,Rn);Jh._ttPolicy&&(El=Jh._ttPolicy.createHTML(El)),Ja.insertAdjacentHTML("beforeend",El),cc=wt.getLineContent(oo)}else{let El=this._renderLine(Ie,_e,st.tabSize,Ds,Rn);Jh._ttPolicy&&(El=Jh._ttPolicy.createHTML(El)),Ja.insertAdjacentHTML("beforeend",El),cc=Ie.getLineContent(Ds)}cc.length===0&&(cc=Un.N("blankLine","blank"));let Tc="";switch(ui){case 0:Ds===oo?Tc=Un.N({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",cc,Ds):Tc=Un.N("equalLine","{0} original line {1} modified line {2}",cc,Ds,oo);break;case 1:Tc=Un.N("insertLine","+ {0} modified line {1}",cc,oo);break;case 2:Tc=Un.N("deleteLine","- {0} original line {1}",cc,Ds);break}Zs.setAttribute("aria-label",Tc),s.appendChild(Zs)}}static _renderLine(s,u,y,$,he){const _e=s.getLineContent($),Ie=u.get(44),st=Mr.A.createEmpty(_e,he),yt=jr.wA.isBasicASCII(_e,s.mightContainNonBasicASCII()),wt=jr.wA.containsRTL(_e,yt,s.mightContainRTL());return(0,so.tF)(new so.IJ(Ie.isMonospace&&!u.get(29),Ie.canUseHalfwidthRightwardsArrow,_e,!1,yt,wt,0,st,[],y,0,Ie.spaceWidth,Ie.middotWidth,Ie.wsmiddotWidth,u.get(105),u.get(88),u.get(83),u.get(45)!==p.n0.OFF,null)).html}};fc._ttPolicy=(Cs=window.trustedTypes)===null||Cs===void 0?void 0:Cs.createPolicy("diffReview",{createHTML:P=>P}),fc=hr([Pr(1,gt.O)],fc),(0,ns.Ic)((P,s)=>{const u=P.getColor(Ss.hw);u&&s.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${u}; }`);const y=P.getColor(gr._wn);y&&s.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${y} 0 -6px 6px -6px inset; }`)});class xl extends wo.R6{constructor(){super({id:"editor.action.diffReview.next",label:Un.N("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:ts.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(s,u){const y=ed(s);y&&y.diffReviewNext()}}class fl extends wo.R6{constructor(){super({id:"editor.action.diffReview.prev",label:Un.N("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:ts.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1024|65,weight:100}})}run(s,u){const y=ed(s);y&&y.diffReviewPrev()}}function ed(P){const s=P.get(Fe.$),u=s.listDiffEditors(),y=s.getActiveCodeEditor();if(!y)return null;for(let $=0,he=u.length;$<he;$++){const _e=u[$];if(_e.getModifiedEditor().getId()===y.getId()||_e.getOriginalEditor().getId()===y.getId())return _e}return null}(0,wo.Qr)(xl),(0,wo.Qr)(fl);var Su=a(50072),js=a(45146),eu=a(85215),_a=a(30665),gl=a(92550),ea=a(72065),jl=a(60972),sa=a(59422),ml=a(5606),pl=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};class el extends Q.JT{constructor(s,u,y,$,he,_e){super();this._viewZoneId=s,this._marginDomNode=u,this.editor=y,this.diff=$,this._contextMenuService=he,this._clipboardService=_e,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=xr.lA.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const Ie=y.getOption(59),st=y.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${Ie}px`,this._diffActions.style.lineHeight=`${Ie}px`,this._marginDomNode.appendChild(this._diffActions);const yt=[],wt=$.modifiedEndLineNumber===0;yt.push(new ps.aU("diff.clipboard.copyDeletedContent",wt?$.originalEndLineNumber>$.modifiedStartLineNumber?Un.N("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):Un.N("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):$.originalEndLineNumber>$.modifiedStartLineNumber?Un.N("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):Un.N("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>pl(this,void 0,void 0,function*(){const Gi=new T.e($.originalStartLineNumber,1,$.originalEndLineNumber+1,1),Cr=$.originalModel.getValueInRange(Gi);yield this._clipboardService.writeText(Cr)})));let Xt=0,Rn;$.originalEndLineNumber>$.modifiedStartLineNumber&&(Rn=new ps.aU("diff.clipboard.copyDeletedLineContent",wt?Un.N("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",$.originalStartLineNumber):Un.N("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",$.originalStartLineNumber),void 0,!0,()=>pl(this,void 0,void 0,function*(){const Gi=$.originalModel.getLineContent($.originalStartLineNumber+Xt);if(Gi===""){const Cr=$.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(Cr===0?`
`:`\r
`)}else yield this._clipboardService.writeText(Gi)})),yt.push(Rn)),y.getOption(81)||yt.push(new ps.aU("diff.inline.revertChange",Un.N("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>pl(this,void 0,void 0,function*(){const Gi=new T.e($.originalStartLineNumber,1,$.originalEndLineNumber,$.originalModel.getLineMaxColumn($.originalEndLineNumber)),Cr=$.originalModel.getValueInRange(Gi);if($.modifiedEndLineNumber===0){const Gr=y.getModel().getLineMaxColumn($.modifiedStartLineNumber);y.executeEdits("diffEditor",[{range:new T.e($.modifiedStartLineNumber,Gr,$.modifiedStartLineNumber,Gr),text:st+Cr}])}else{const Gr=y.getModel().getLineMaxColumn($.modifiedEndLineNumber);y.executeEdits("diffEditor",[{range:new T.e($.modifiedStartLineNumber,1,$.modifiedEndLineNumber,Gr),text:Cr}])}})));const Ai=(Gi,Cr)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:Gi,y:Cr}),getActions:()=>(Rn&&(Rn.label=wt?Un.N("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",$.originalStartLineNumber+Xt):Un.N("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",$.originalStartLineNumber+Xt)),yt),autoSelectFirstItem:!0})};this._register(fn.mu(this._diffActions,"mousedown",Gi=>{const{top:Cr,height:Gr}=fn.i(this._diffActions),io=Math.floor(Ie/3);Gi.preventDefault(),Ai(Gi.posx,Cr+Gr+io)})),this._register(y.onMouseMove(Gi=>{Gi.target.type===8||Gi.target.type===5?Gi.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,Xt=this._updateLightBulbPosition(this._marginDomNode,Gi.event.browserEvent.y,Ie)):this.visibility=!1:this.visibility=!1})),this._register(y.onMouseDown(Gi=>{!Gi.event.rightButton||(Gi.target.type===8||Gi.target.type===5)&&Gi.target.detail.viewZoneId===this._viewZoneId&&(Gi.event.preventDefault(),Xt=this._updateLightBulbPosition(this._marginDomNode,Gi.event.browserEvent.y,Ie),Ai(Gi.event.posx,Gi.event.posy+Ie))}))}get visibility(){return this._visibility}set visibility(s){this._visibility!==s&&(this._visibility=s,s?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(s,u,y){const{top:$}=fn.i(s),he=u-$,_e=Math.floor(he/y),Ie=_e*y;if(this._diffActions.style.top=`${Ie}px`,this.diff.viewLineCounts){let st=0;for(let yt=0;yt<this.diff.viewLineCounts.length;yt++)if(st+=this.diff.viewLineCounts[yt],_e<st)return yt}return _e}}var vl=a(84972),Rc=a(90535),tu=a(54534),Eu=a(96542),td=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},Za=function(P,s){return function(u,y){s(u,y,P)}},Pc;class Oc{constructor(s,u){this._contextMenuService=s,this._clipboardService=u,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(s){return s.filter(u=>!this._zonesMap[String(u.id)])}clean(s){this._zones.length>0&&s.changeViewZones(u=>{for(const y of this._zones)u.removeZone(y)}),this._zones=[],this._zonesMap={},this._decorations=s.deltaDecorations(this._decorations,[])}apply(s,u,y,$){const he=$?qs.Z.capture(s):null;s.changeViewZones(_e=>{var Ie;for(const st of this._zones)_e.removeZone(st);for(const st of this._inlineDiffMargins)st.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let st=0,yt=y.zones.length;st<yt;st++){const wt=y.zones[st];wt.suppressMouseDown=!0;const Xt=_e.addZone(wt);this._zones.push(Xt),this._zonesMap[String(Xt)]=!0,y.zones[st].diff&&wt.marginDomNode&&(wt.suppressMouseDown=!1,((Ie=y.zones[st].diff)===null||Ie===void 0?void 0:Ie.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new el(Xt,wt.marginDomNode,s,y.zones[st].diff,this._contextMenuService,this._clipboardService)))}}),he&&he.restore(s),this._decorations=s.deltaDecorations(this._decorations,y.decorations),u&&u.setZones(y.overviewZones)}}let nu=0;const Il=(0,Jn.q5)("diff-insert",xr.lA.add,Un.N("diffInsertIcon","Line decoration for inserts in the diff editor.")),kc=(0,Jn.q5)("diff-remove",xr.lA.remove,Un.N("diffRemoveIcon","Line decoration for removals in the diff editor.")),Kl=(Pc=window.trustedTypes)===null||Pc===void 0?void 0:Pc.createPolicy("diffEditorWidget",{createHTML:P=>P});let ta=class $a extends Q.JT{constructor(s,u,y,$,he,_e,Ie,st,yt,wt,Xt,Rn){super();this._editorProgressService=Rn,this._onDidDispose=this._register(new z.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new z.Q5),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new z.Q5),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=he,this._codeEditorService=st,this._contextKeyService=this._register(_e.createScoped(s)),this._instantiationService=Ie.createChild(new jl.y([ts.i6,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=yt,this._notificationService=wt,this._id=++nu,this._state=0,this._updatingDiffProgress=null,this._domElement=s,u=u||{},this._options=ks(u,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof u.isInEmbeddedEditor!="undefined"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",u.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new Ye.pY(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=$a._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=(0,Vo.X)(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(fn.mu(this._overviewDomElement,"mousedown",Ai=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(Ai)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new Oc(Xt,$),this._modifiedEditorState=new Oc(Xt,$),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new tu.I(this._containerDomElement,u.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),u.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(u,y.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(u,y.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=Ie.createInstance(fc,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new ia(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new $l(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(yt.onDidColorThemeChange(Ai=>{this._strategy&&this._strategy.applyColors(Ai)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=$a._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const ui=wo.Uc.getDiffEditorContributions();for(const Ai of ui)try{this._register(Ie.createInstance(Ai.ctor,this))}catch(Gi){(0,dt.dL)(Gi)}this._codeEditorService.addDiffEditor(this)}_setState(s){this._state!==s&&(this._state=s,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(s,u){let y="monaco-diff-editor monaco-editor-background ";return u&&(y+="side-by-side "),y+=(0,ns.m6)(s.type),y}_recreateOverviewRulers(){!this._options.renderOverviewRuler||(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(s,u){const y=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(s),u);this._register(y.onDidScrollChange(he=>{this._isHandlingScrollEvent||!he.scrollTopChanged&&!he.scrollLeftChanged&&!he.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:he.scrollLeft,scrollTop:he.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(y.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(y.onDidChangeConfiguration(he=>{!y.getModel()||(he.hasChanged(44)&&this._updateDecorationsRunner.schedule(),he.hasChanged(132)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(y.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(y.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const $=this._contextKeyService.createKey("isInDiffLeftEditor",y.hasWidgetFocus());return this._register(y.onDidFocusEditorWidget(()=>$.set(!0))),this._register(y.onDidBlurEditorWidget(()=>$.set(!1))),this._register(y.onDidContentSizeChange(he=>{const _e=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+$a.ONE_OVERVIEW_WIDTH,Ie=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:Ie,contentWidth:_e,contentHeightChanged:he.contentHeightChanged,contentWidthChanged:he.contentWidthChanged})})),y}_createRightHandSideEditor(s,u){const y=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(s),u);this._register(y.onDidScrollChange(he=>{this._isHandlingScrollEvent||!he.scrollTopChanged&&!he.scrollLeftChanged&&!he.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:he.scrollLeft,scrollTop:he.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(y.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(y.onDidChangeConfiguration(he=>{!y.getModel()||(he.hasChanged(44)&&this._updateDecorationsRunner.schedule(),he.hasChanged(132)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(y.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(y.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(y.onDidChangeModelOptions(he=>{he.tabSize&&this._updateDecorationsRunner.schedule()}));const $=this._contextKeyService.createKey("isInDiffRightEditor",y.hasWidgetFocus());return this._register(y.onDidFocusEditorWidget(()=>$.set(!0))),this._register(y.onDidBlurEditorWidget(()=>$.set(!1))),this._register(y.onDidContentSizeChange(he=>{const _e=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+$a.ONE_OVERVIEW_WIDTH,Ie=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:Ie,contentWidth:_e,contentHeightChanged:he.contentHeightChanged,contentWidthChanged:he.contentWidthChanged})})),y}_createInnerEditor(s,u,y,$){return s.createInstance(vr.Gm,u,y,$)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return nt.g.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(s){const u=ks(s,this._options),y=tl(this._options,u);this._options=u;const $=y.ignoreTrimWhitespace||y.renderIndicators,he=this._isVisible&&(y.maxComputationTime||y.maxFileSize);$?this._beginUpdateDecorations():he&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(s)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(s)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),y.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new ia(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new $l(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=$a._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),y.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(s){if(s&&(!s.original||!s.modified))throw new Error(s.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(s?s.original:null),this._modifiedEditor.setModel(s?s.modified:null),this._updateDecorationsRunner.cancel(),s&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),s&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(s){return this._modifiedEditor.getVisibleColumnFromPosition(s)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(s,u="api"){this._modifiedEditor.setPosition(s,u)}revealLine(s,u=0){this._modifiedEditor.revealLine(s,u)}revealLineInCenter(s,u=0){this._modifiedEditor.revealLineInCenter(s,u)}revealLineInCenterIfOutsideViewport(s,u=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(s,u)}revealLineNearTop(s,u=0){this._modifiedEditor.revealLineNearTop(s,u)}revealPosition(s,u=0){this._modifiedEditor.revealPosition(s,u)}revealPositionInCenter(s,u=0){this._modifiedEditor.revealPositionInCenter(s,u)}revealPositionInCenterIfOutsideViewport(s,u=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(s,u)}revealPositionNearTop(s,u=0){this._modifiedEditor.revealPositionNearTop(s,u)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(s,u="api"){this._modifiedEditor.setSelection(s,u)}setSelections(s,u="api"){this._modifiedEditor.setSelections(s,u)}revealLines(s,u,y=0){this._modifiedEditor.revealLines(s,u,y)}revealLinesInCenter(s,u,y=0){this._modifiedEditor.revealLinesInCenter(s,u,y)}revealLinesInCenterIfOutsideViewport(s,u,y=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(s,u,y)}revealLinesNearTop(s,u,y=0){this._modifiedEditor.revealLinesNearTop(s,u,y)}revealRange(s,u=0,y=!1,$=!0){this._modifiedEditor.revealRange(s,u,y,$)}revealRangeInCenter(s,u=0){this._modifiedEditor.revealRangeInCenter(s,u)}revealRangeInCenterIfOutsideViewport(s,u=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(s,u)}revealRangeNearTop(s,u=0){this._modifiedEditor.revealRangeNearTop(s,u)}revealRangeNearTopIfOutsideViewport(s,u=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(s,u)}revealRangeAtTop(s,u=0){this._modifiedEditor.revealRangeAtTop(s,u)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const s=this._originalEditor.saveViewState(),u=this._modifiedEditor.saveViewState();return{original:s,modified:u}}restoreViewState(s){if(s&&s.original&&s.modified){const u=s;this._originalEditor.restoreViewState(u.original),this._modifiedEditor.restoreViewState(u.modified)}}layout(s){this._elementSizeObserver.observe(s)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(s,u,y){this._modifiedEditor.trigger(s,u,y)}changeDecorations(s){return this._modifiedEditor.changeDecorations(s)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const s=this._elementSizeObserver.getHeight(),u=this._getReviewHeight(),y=$a.ENTIRE_DIFF_OVERVIEW_WIDTH-2*$a.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:$a.ONE_OVERVIEW_WIDTH,right:y+$a.ONE_OVERVIEW_WIDTH,height:s-u}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:$a.ONE_OVERVIEW_WIDTH,height:s-u}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),$a.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(s,u){return!s&&!u?!0:!s||!u?!1:s.toString()===u.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const s=this._originalEditor.getModel(),u=this._modifiedEditor.getModel();if(!s||!u)return;this._diffComputationToken++;const y=this._diffComputationToken,$=this._options.maxFileSize*1024*1024,he=_e=>{const Ie=_e.getValueLength();return $===0||Ie<=$};if(!he(s)||!he(u)){(!$a._equals(s.uri,this._lastOriginalWarning)||!$a._equals(u.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=s.uri,this._lastModifiedWarning=u.uri,this._notificationService.warn(Un.N("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(s.uri,u.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(_e=>{y===this._diffComputationToken&&s===this._originalEditor.getModel()&&u===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=_e,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},_e=>{y===this._diffComputationToken&&s===this._originalEditor.getModel()&&u===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const s=this._diffComputationResult?this._diffComputationResult.changes:[],u=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),y=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),$=this._strategy.getEditorsDiffDecorations(s,this._options.ignoreTrimWhitespace,this._options.renderIndicators,u,y);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,$.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,$.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(s){const u=Object.assign({},s);return u.inDiffEditor=!0,u.automaticLayout=!1,u.scrollbar=Object.assign({},u.scrollbar||{}),u.scrollbar.vertical="visible",u.folding=!1,u.codeLens=this._options.diffCodeLens,u.fixedOverflowWidgets=!0,u.minimap=Object.assign({},u.minimap||{}),u.minimap.enabled=!1,u}_adjustOptionsForLeftHandSide(s){const u=this._adjustOptionsForSubEditor(s);return this._options.renderSideBySide?u.wordWrapOverride1=this._options.diffWordWrap:(u.wordWrapOverride1="off",u.wordWrapOverride2="off"),s.originalAriaLabel&&(u.ariaLabel=s.originalAriaLabel),u.readOnly=!this._options.originalEditable,u.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},u),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(s){const u=this._adjustOptionsForSubEditor(s);return s.modifiedAriaLabel&&(u.ariaLabel=s.modifiedAriaLabel),u.wordWrapOverride1=this._options.diffWordWrap,u.revealHorizontalRightPadding=p.BH.revealHorizontalRightPadding.defaultValue+$a.ENTIRE_DIFF_OVERVIEW_WIDTH,u.scrollbar.verticalHasArrows=!1,u.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},u),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const s=this._elementSizeObserver.getWidth(),u=this._elementSizeObserver.getHeight(),y=this._getReviewHeight(),$=this._strategy.layout();this._originalDomNode.style.width=$+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=s-$+"px",this._modifiedDomNode.style.left=$+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=u-y+"px",this._overviewDomElement.style.width=$a.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=s-$a.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth($a.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:$,height:u-y}),this._modifiedEditor.layout({width:s-$-(this._options.renderOverviewRuler?$a.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:u-y}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(u-y,s,y),this._layoutOverviewViewport()}_layoutOverviewViewport(){const s=this._computeOverviewViewport();s?(this._overviewViewportDomElement.setTop(s.top),this._overviewViewportDomElement.setHeight(s.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const s=this._modifiedEditor.getLayoutInfo();if(!s)return null;const u=this._modifiedEditor.getScrollTop(),y=this._modifiedEditor.getScrollHeight(),$=Math.max(0,s.height),he=Math.max(0,$-2*0),_e=y>0?he/y:0,Ie=Math.max(0,Math.floor(s.height*_e)),st=Math.floor(u*_e);return{height:Ie,top:st}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(s){this._strategy&&this._strategy.dispose(),this._strategy=s,s.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(s,u){const y=this._diffComputationResult?this._diffComputationResult.changes:[];if(y.length===0||s<u(y[0]))return null;let $=0,he=y.length-1;for(;$<he;){const _e=Math.floor(($+he)/2),Ie=u(y[_e]),st=_e+1<=he?u(y[_e+1]):1073741824;s<Ie?he=_e-1:s>=st?$=_e+1:($=_e,he=_e)}return y[$]}_getEquivalentLineForOriginalLineNumber(s){const u=this._getLineChangeAtOrBeforeLineNumber(s,st=>st.originalStartLineNumber);if(!u)return s;const y=u.originalStartLineNumber+(u.originalEndLineNumber>0?-1:0),$=u.modifiedStartLineNumber+(u.modifiedEndLineNumber>0?-1:0),he=u.originalEndLineNumber>0?u.originalEndLineNumber-u.originalStartLineNumber+1:0,_e=u.modifiedEndLineNumber>0?u.modifiedEndLineNumber-u.modifiedStartLineNumber+1:0,Ie=s-y;return Ie<=he?$+Math.min(Ie,_e):$+_e-he+Ie}_getEquivalentLineForModifiedLineNumber(s){const u=this._getLineChangeAtOrBeforeLineNumber(s,st=>st.modifiedStartLineNumber);if(!u)return s;const y=u.originalStartLineNumber+(u.originalEndLineNumber>0?-1:0),$=u.modifiedStartLineNumber+(u.modifiedEndLineNumber>0?-1:0),he=u.originalEndLineNumber>0?u.originalEndLineNumber-u.originalStartLineNumber+1:0,_e=u.modifiedEndLineNumber>0?u.modifiedEndLineNumber-u.modifiedStartLineNumber+1:0,Ie=s-$;return Ie<=_e?y+Math.min(Ie,he):y+he-_e+Ie}getDiffLineInformationForOriginal(s){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(s)}:null}getDiffLineInformationForModified(s){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(s)}:null}};ta.ONE_OVERVIEW_WIDTH=15,ta.ENTIRE_DIFF_OVERVIEW_WIDTH=30,ta.UPDATE_DIFF_DECORATIONS_DELAY=200,ta=td([Za(3,vl.p),Za(4,eu.p),Za(5,ts.i6),Za(6,ea.TG),Za(7,Fe.$),Za(8,ns.XE),Za(9,sa.lT),Za(10,ml.i),Za(11,Rc.ek)],ta);class Pa extends Q.JT{constructor(s){super();this._dataSource=s,this._insertColor=null,this._removeColor=null}applyColors(s){const u=s.getColor(gr.P6Y)||(s.getColor(gr.ypS)||gr.CzK).transparent(2),y=s.getColor(gr.F9q)||(s.getColor(gr.P4M)||gr.keg).transparent(2),$=!u.equals(this._insertColor)||!y.equals(this._removeColor);return this._insertColor=u,this._removeColor=y,$}getEditorsDiffDecorations(s,u,y,$,he){he=he.sort((yt,wt)=>yt.afterLineNumber-wt.afterLineNumber),$=$.sort((yt,wt)=>yt.afterLineNumber-wt.afterLineNumber);const _e=this._getViewZones(s,$,he,y),Ie=this._getOriginalEditorDecorations(_e,s,u,y),st=this._getModifiedEditorDecorations(_e,s,u,y);return{original:{decorations:Ie.decorations,overviewZones:Ie.overviewZones,zones:_e.original},modified:{decorations:st.decorations,overviewZones:st.overviewZones,zones:_e.modified}}}}class Wr{constructor(s){this._source=s,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class Oa{constructor(s,u,y,$,he){this._lineChanges=s,this._originalForeignVZ=u,this._modifiedForeignVZ=y,this._originalEditor=$,this._modifiedEditor=he}static _getViewLineCount(s,u,y){const $=s.getModel(),he=s._getViewModel();if($&&he){const _e=aa($,he,u,y);return _e.endLineNumber-_e.startLineNumber+1}return y-u+1}getViewZones(){const s=this._originalEditor.getOption(59),u=this._modifiedEditor.getOption(59),y=this._originalEditor.getOption(132).wrappingColumn!==-1,$=this._modifiedEditor.getOption(132).wrappingColumn!==-1,he=y||$,_e=this._originalEditor.getModel(),Ie=this._originalEditor._getViewModel().coordinatesConverter,st=this._modifiedEditor._getViewModel().coordinatesConverter,yt={original:[],modified:[]};let wt=0,Xt=0,Rn=0,ui=0,Ai=0,Gi=0;const Cr=(Ho,Ur)=>Ho.afterLineNumber-Ur.afterLineNumber,Gr=(Ho,Ur)=>{if(Ur.domNode===null&&Ho.length>0){const wr=Ho[Ho.length-1];if(wr.afterLineNumber===Ur.afterLineNumber&&wr.domNode===null){wr.heightInLines+=Ur.heightInLines;return}}Ho.push(Ur)},io=new Wr(this._modifiedForeignVZ),Ir=new Wr(this._originalForeignVZ);let Rr=1,rs=1;for(let Ho=0,Ur=this._lineChanges.length;Ho<=Ur;Ho++){const wr=Ho<Ur?this._lineChanges[Ho]:null;wr!==null?(Rn=wr.originalStartLineNumber+(wr.originalEndLineNumber>0?-1:0),ui=wr.modifiedStartLineNumber+(wr.modifiedEndLineNumber>0?-1:0),Xt=wr.originalEndLineNumber>0?Oa._getViewLineCount(this._originalEditor,wr.originalStartLineNumber,wr.originalEndLineNumber):0,wt=wr.modifiedEndLineNumber>0?Oa._getViewLineCount(this._modifiedEditor,wr.modifiedStartLineNumber,wr.modifiedEndLineNumber):0,Ai=Math.max(wr.originalStartLineNumber,wr.originalEndLineNumber),Gi=Math.max(wr.modifiedStartLineNumber,wr.modifiedEndLineNumber)):(Rn+=1e7+Xt,ui+=1e7+wt,Ai=Rn,Gi=ui);let ro=[],zr=[];if(he){let oo;wr?wr.originalEndLineNumber>0?oo=wr.originalStartLineNumber-Rr:oo=wr.modifiedStartLineNumber-rs:oo=_e.getLineCount()-Rr+1;for(let Zs=0;Zs<oo;Zs++){const Ja=Rr+Zs,Hs=rs+Zs,ll=Ie.getModelLineViewLineCount(Ja),zl=st.getModelLineViewLineCount(Hs);ll<zl?ro.push({afterLineNumber:Ja,heightInLines:zl-ll,domNode:null,marginDomNode:null}):ll>zl&&zr.push({afterLineNumber:Hs,heightInLines:ll-zl,domNode:null,marginDomNode:null})}wr&&(Rr=(wr.originalEndLineNumber>0?wr.originalEndLineNumber:wr.originalStartLineNumber)+1,rs=(wr.modifiedEndLineNumber>0?wr.modifiedEndLineNumber:wr.modifiedStartLineNumber)+1)}for(;io.current&&io.current.afterLineNumber<=Gi;){let oo;io.current.afterLineNumber<=ui?oo=Rn-ui+io.current.afterLineNumber:oo=Ai;let Zs=null;wr&&wr.modifiedStartLineNumber<=io.current.afterLineNumber&&io.current.afterLineNumber<=wr.modifiedEndLineNumber&&(Zs=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),ro.push({afterLineNumber:oo,heightInLines:io.current.height/u,domNode:null,marginDomNode:Zs}),io.advance()}for(;Ir.current&&Ir.current.afterLineNumber<=Ai;){let oo;Ir.current.afterLineNumber<=Rn?oo=ui-Rn+Ir.current.afterLineNumber:oo=Gi,zr.push({afterLineNumber:oo,heightInLines:Ir.current.height/s,domNode:null}),Ir.advance()}if(wr!==null&&zo(wr)){const oo=this._produceOriginalFromDiff(wr,Xt,wt);oo&&ro.push(oo)}if(wr!==null&&bs(wr)){const oo=this._produceModifiedFromDiff(wr,Xt,wt);oo&&zr.push(oo)}let Ko=0,Ds=0;for(ro=ro.sort(Cr),zr=zr.sort(Cr);Ko<ro.length&&Ds<zr.length;){const oo=ro[Ko],Zs=zr[Ds],Ja=oo.afterLineNumber-Rn,Hs=Zs.afterLineNumber-ui;Ja<Hs?(Gr(yt.original,oo),Ko++):Hs<Ja?(Gr(yt.modified,Zs),Ds++):oo.shouldNotShrink?(Gr(yt.original,oo),Ko++):Zs.shouldNotShrink?(Gr(yt.modified,Zs),Ds++):oo.heightInLines>=Zs.heightInLines?(oo.heightInLines-=Zs.heightInLines,Ds++):(Zs.heightInLines-=oo.heightInLines,Ko++)}for(;Ko<ro.length;)Gr(yt.original,ro[Ko]),Ko++;for(;Ds<zr.length;)Gr(yt.modified,zr[Ds]),Ds++}return{original:Oa._ensureDomNodes(yt.original),modified:Oa._ensureDomNodes(yt.modified)}}static _ensureDomNodes(s){return s.map(u=>(u.domNode||(u.domNode=Ws()),u))}}function Ca(P,s,u,y,$){return{range:new T.e(P,s,u,y),options:$}}const na={charDelete:js.qx.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:js.qx.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:js.qx.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:js.qx.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:js.qx.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:js.qx.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+ns.kS.asClassName(Il),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:js.qx.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:js.qx.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+ns.kS.asClassName(kc),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:js.qx.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class ia extends Pa{constructor(s,u){super(s);this._disableSash=u===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new jo.g(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(y=>this._onSashDrag(y)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(s){const u=s===!1;this._disableSash!==u&&(this._disableSash=u,this._sash.state=this._disableSash?0:3)}layout(s=this._sashRatio){const y=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?ta.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let $=Math.floor((s||.5)*y);const he=Math.floor(.5*y);return $=this._disableSash?he:$||he,y>ia.MINIMUM_EDITOR_WIDTH*2?($<ia.MINIMUM_EDITOR_WIDTH&&($=ia.MINIMUM_EDITOR_WIDTH),$>y-ia.MINIMUM_EDITOR_WIDTH&&($=y-ia.MINIMUM_EDITOR_WIDTH)):$=he,this._sashPosition!==$&&(this._sashPosition=$),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(s){const y=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?ta.ENTIRE_DIFF_OVERVIEW_WIDTH:0),$=this.layout((this._startSashPosition+(s.currentX-s.startX))/y);this._sashRatio=$/y,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(s){return 0}getVerticalSashLeft(s){return this._sashPosition}getVerticalSashHeight(s){return this._dataSource.getHeight()}_getViewZones(s,u,y){const $=this._dataSource.getOriginalEditor(),he=this._dataSource.getModifiedEditor();return new Lu(s,u,y,$,he).getViewZones()}_getOriginalEditorDecorations(s,u,y,$){const he=this._dataSource.getOriginalEditor(),_e=String(this._removeColor),Ie={decorations:[],overviewZones:[]},st=he.getModel(),yt=he._getViewModel();for(const wt of u)if(bs(wt)){Ie.decorations.push({range:new T.e(wt.originalStartLineNumber,1,wt.originalEndLineNumber,1073741824),options:$?na.lineDeleteWithSign:na.lineDelete}),(!zo(wt)||!wt.charChanges)&&Ie.decorations.push(Ca(wt.originalStartLineNumber,1,wt.originalEndLineNumber,1073741824,na.charDeleteWholeLine));const Xt=aa(st,yt,wt.originalStartLineNumber,wt.originalEndLineNumber);if(Ie.overviewZones.push(new _a.EY(Xt.startLineNumber,Xt.endLineNumber,0,_e)),wt.charChanges){for(const Rn of wt.charChanges)if(bs(Rn))if(y)for(let ui=Rn.originalStartLineNumber;ui<=Rn.originalEndLineNumber;ui++){let Ai,Gi;ui===Rn.originalStartLineNumber?Ai=Rn.originalStartColumn:Ai=st.getLineFirstNonWhitespaceColumn(ui),ui===Rn.originalEndLineNumber?Gi=Rn.originalEndColumn:Gi=st.getLineLastNonWhitespaceColumn(ui),Ie.decorations.push(Ca(ui,Ai,ui,Gi,na.charDelete))}else Ie.decorations.push(Ca(Rn.originalStartLineNumber,Rn.originalStartColumn,Rn.originalEndLineNumber,Rn.originalEndColumn,na.charDelete))}}return Ie}_getModifiedEditorDecorations(s,u,y,$){const he=this._dataSource.getModifiedEditor(),_e=String(this._insertColor),Ie={decorations:[],overviewZones:[]},st=he.getModel(),yt=he._getViewModel();for(const wt of u)if(zo(wt)){Ie.decorations.push({range:new T.e(wt.modifiedStartLineNumber,1,wt.modifiedEndLineNumber,1073741824),options:$?na.lineInsertWithSign:na.lineInsert}),(!bs(wt)||!wt.charChanges)&&Ie.decorations.push(Ca(wt.modifiedStartLineNumber,1,wt.modifiedEndLineNumber,1073741824,na.charInsertWholeLine));const Xt=aa(st,yt,wt.modifiedStartLineNumber,wt.modifiedEndLineNumber);if(Ie.overviewZones.push(new _a.EY(Xt.startLineNumber,Xt.endLineNumber,0,_e)),wt.charChanges){for(const Rn of wt.charChanges)if(zo(Rn))if(y)for(let ui=Rn.modifiedStartLineNumber;ui<=Rn.modifiedEndLineNumber;ui++){let Ai,Gi;ui===Rn.modifiedStartLineNumber?Ai=Rn.modifiedStartColumn:Ai=st.getLineFirstNonWhitespaceColumn(ui),ui===Rn.modifiedEndLineNumber?Gi=Rn.modifiedEndColumn:Gi=st.getLineLastNonWhitespaceColumn(ui),Ie.decorations.push(Ca(ui,Ai,ui,Gi,na.charInsert))}else Ie.decorations.push(Ca(Rn.modifiedStartLineNumber,Rn.modifiedStartColumn,Rn.modifiedEndLineNumber,Rn.modifiedEndColumn,na.charInsert))}}return Ie}}ia.MINIMUM_EDITOR_WIDTH=100;class Lu extends Oa{constructor(s,u,y,$,he){super(s,u,y,$,he)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(s,u,y){return y>u?{afterLineNumber:Math.max(s.originalStartLineNumber,s.originalEndLineNumber),heightInLines:y-u,domNode:null}:null}_produceModifiedFromDiff(s,u,y){return u>y?{afterLineNumber:Math.max(s.modifiedStartLineNumber,s.modifiedEndLineNumber),heightInLines:u-y,domNode:null}:null}}class $l extends Pa{constructor(s,u){super(s);this._decorationsLeft=s.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(s.getOriginalEditor().onDidLayoutChange(y=>{this._decorationsLeft!==y.decorationsLeft&&(this._decorationsLeft=y.decorationsLeft,s.relayoutEditors())}))}setEnableSplitViewResizing(s){}_getViewZones(s,u,y,$){const he=this._dataSource.getOriginalEditor(),_e=this._dataSource.getModifiedEditor();return new os(s,u,y,he,_e,$).getViewZones()}_getOriginalEditorDecorations(s,u,y,$){const he=String(this._removeColor),_e={decorations:[],overviewZones:[]},Ie=this._dataSource.getOriginalEditor(),st=Ie.getModel(),yt=Ie._getViewModel();let wt=0;for(const Xt of u)if(bs(Xt)){for(_e.decorations.push({range:new T.e(Xt.originalStartLineNumber,1,Xt.originalEndLineNumber,1073741824),options:na.lineDeleteMargin});wt<s.modified.length;){const Ai=s.modified[wt];if(Ai.diff&&Ai.diff.originalStartLineNumber>=Xt.originalStartLineNumber)break;wt++}let Rn=0;if(wt<s.modified.length){const Ai=s.modified[wt];Ai.diff&&Ai.diff.originalStartLineNumber===Xt.originalStartLineNumber&&Ai.diff.originalEndLineNumber===Xt.originalEndLineNumber&&Ai.diff.modifiedStartLineNumber===Xt.modifiedStartLineNumber&&Ai.diff.modifiedEndLineNumber===Xt.modifiedEndLineNumber&&(Rn=Ai.heightInLines)}const ui=aa(st,yt,Xt.originalStartLineNumber,Xt.originalEndLineNumber);_e.overviewZones.push(new _a.EY(ui.startLineNumber,ui.endLineNumber,Rn,he))}return _e}_getModifiedEditorDecorations(s,u,y,$){const he=this._dataSource.getModifiedEditor(),_e=String(this._insertColor),Ie={decorations:[],overviewZones:[]},st=he.getModel(),yt=he._getViewModel();for(const wt of u)if(zo(wt)){Ie.decorations.push({range:new T.e(wt.modifiedStartLineNumber,1,wt.modifiedEndLineNumber,1073741824),options:$?na.lineInsertWithSign:na.lineInsert});const Xt=aa(st,yt,wt.modifiedStartLineNumber,wt.modifiedEndLineNumber);if(Ie.overviewZones.push(new _a.EY(Xt.startLineNumber,Xt.endLineNumber,0,_e)),wt.charChanges){for(const Rn of wt.charChanges)if(zo(Rn))if(y)for(let ui=Rn.modifiedStartLineNumber;ui<=Rn.modifiedEndLineNumber;ui++){let Ai,Gi;ui===Rn.modifiedStartLineNumber?Ai=Rn.modifiedStartColumn:Ai=st.getLineFirstNonWhitespaceColumn(ui),ui===Rn.modifiedEndLineNumber?Gi=Rn.modifiedEndColumn:Gi=st.getLineLastNonWhitespaceColumn(ui),Ie.decorations.push(Ca(ui,Ai,ui,Gi,na.charInsert))}else Ie.decorations.push(Ca(Rn.modifiedStartLineNumber,Rn.modifiedStartColumn,Rn.modifiedEndLineNumber,Rn.modifiedEndColumn,na.charInsert))}else Ie.decorations.push(Ca(wt.modifiedStartLineNumber,1,wt.modifiedEndLineNumber,1073741824,na.charInsertWholeLine))}return Ie}layout(){return Math.max(5,this._decorationsLeft)}}class os extends Oa{constructor(s,u,y,$,he,_e){super(s,u,y,$,he);this._originalModel=$.getModel(),this._renderIndicators=_e,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const s=super.getViewZones();return this._finalize(s),s}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const s=document.createElement("div");return s.className="inline-added-margin-view-zone",s}_produceOriginalFromDiff(s,u,y){const $=document.createElement("div");return $.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(s.originalStartLineNumber,s.originalEndLineNumber),heightInLines:y,domNode:document.createElement("div"),marginDomNode:$}}_produceModifiedFromDiff(s,u,y){const $=document.createElement("div");$.className=`view-lines line-delete ${Eu.S}`;const he=document.createElement("div");he.className="inline-deleted-margin-view-zone";const _e={shouldNotShrink:!0,afterLineNumber:s.modifiedEndLineNumber===0?s.modifiedStartLineNumber:s.modifiedStartLineNumber-1,heightInLines:u,minWidthInPx:0,domNode:$,marginDomNode:he,diff:{originalStartLineNumber:s.originalStartLineNumber,originalEndLineNumber:s.originalEndLineNumber,modifiedStartLineNumber:s.modifiedStartLineNumber,modifiedEndLineNumber:s.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let Ie=s.originalStartLineNumber;Ie<=s.originalEndLineNumber;Ie++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(Ie),null,null);return this._pendingLineChange.push(s),this._pendingViewZones.push(_e),_e}_finalize(s){const u=this._modifiedEditor.getOptions(),y=this._modifiedEditor.getModel().getOptions().tabSize,$=u.get(44),he=u.get(29),_e=$.typicalHalfwidthCharacterWidth,Ie=u.get(93),st=this._originalModel.mightContainNonBasicASCII(),yt=this._originalModel.mightContainRTL(),wt=u.get(59),Rn=u.get(131).decorationsWidth,ui=u.get(105),Ai=u.get(88),Gi=u.get(83),Cr=u.get(45),Gr=this._lineBreaksComputer.finalize();let io=0;for(let Ir=0;Ir<this._pendingLineChange.length;Ir++){const Rr=this._pendingLineChange[Ir],rs=this._pendingViewZones[Ir],Ho=rs.domNode;(0,Uo.N)(Ho,$);const Ur=rs.marginDomNode;(0,Uo.N)(Ur,$);const wr=[];if(Rr.charChanges)for(const Hs of Rr.charChanges)bs(Hs)&&wr.push(new jr.$t(new T.e(Hs.originalStartLineNumber,Hs.originalStartColumn,Hs.originalEndLineNumber,Hs.originalEndColumn),"char-delete",0));const ro=wr.length>0,zr=(0,Su.l$)(1e4);let Ko=0,Ds=0,oo=null;for(let Hs=Rr.originalStartLineNumber;Hs<=Rr.originalEndLineNumber;Hs++){const ll=Hs-Rr.originalStartLineNumber,zl=this._originalModel.getLineTokens(Hs),cc=zl.getLineContent(),Tc=Gr[io++],El=gl.Kp.filter(wr,Hs,1,cc.length+1);if(Tc){let xf=0;for(const If of Tc.breakOffsets){const mv=zl.sliceAndInflate(xf,If,0),pv=cc.substring(xf,If);Ko=Math.max(Ko,this._renderOriginalLine(Ds++,pv,mv,gl.Kp.extractWrapped(El,xf,If),ro,st,yt,$,he,wt,Rn,ui,Ai,Gi,Cr,y,zr,Ur)),xf=If}for(oo||(oo=[]);oo.length<ll;)oo[oo.length]=1;oo[ll]=Tc.breakOffsets.length,rs.heightInLines+=Tc.breakOffsets.length-1;const Im=document.createElement("div");Im.className="gutter-delete",s.original.push({afterLineNumber:Hs,afterColumn:0,heightInLines:Tc.breakOffsets.length-1,domNode:Ws(),marginDomNode:Im})}else Ko=Math.max(Ko,this._renderOriginalLine(Ds++,cc,zl,El,ro,st,yt,$,he,wt,Rn,ui,Ai,Gi,Cr,y,zr,Ur))}Ko+=Ie;const Zs=zr.build(),Ja=Kl?Kl.createHTML(Zs):Zs;if(Ho.innerHTML=Ja,rs.minWidthInPx=Ko*_e,oo){const Hs=Rr.originalEndLineNumber-Rr.originalStartLineNumber;for(;oo.length<=Hs;)oo[oo.length]=1}rs.diff.viewLineCounts=oo}s.original.sort((Ir,Rr)=>Ir.afterLineNumber-Rr.afterLineNumber)}_renderOriginalLine(s,u,y,$,he,_e,Ie,st,yt,wt,Xt,Rn,ui,Ai,Gi,Cr,Gr,io){Gr.appendASCIIString('<div class="view-line'),he||Gr.appendASCIIString(" char-delete"),Gr.appendASCIIString('" style="top:'),Gr.appendASCIIString(String(s*wt)),Gr.appendASCIIString('px;width:1000000px;">');const Ir=jr.wA.isBasicASCII(u,_e),Rr=jr.wA.containsRTL(u,Ir,Ie),rs=(0,so.d1)(new so.IJ(st.isMonospace&&!yt,st.canUseHalfwidthRightwardsArrow,u,!1,Ir,Rr,0,y,$,Cr,0,st.spaceWidth,st.middotWidth,st.wsmiddotWidth,Rn,ui,Ai,Gi!==p.n0.OFF,null),Gr);if(Gr.appendASCIIString("</div>"),this._renderIndicators){const Ho=document.createElement("div");Ho.className=`delete-sign ${ns.kS.asClassName(kc)}`,Ho.setAttribute("style",`position:absolute;top:${s*wt}px;width:${Xt}px;height:${wt}px;right:0;`),io.appendChild(Ho)}return rs.characterMapping.getAbsoluteOffset(rs.characterMapping.length)}}function So(P,s){return(0,p.NY)(P,s,["off","on","inherit"])}function zo(P){return P.modifiedEndLineNumber>0}function bs(P){return P.originalEndLineNumber>0}function Ws(){const P=document.createElement("div");return P.className="diagonal-fill",P}function aa(P,s,u,y){const $=P.getLineCount();return u=Math.min($,Math.max(1,u)),y=Math.min($,Math.max(1,y)),s.coordinatesConverter.convertModelRangeToViewRange(new T.e(u,P.getLineMinColumn(u),y,P.getLineMaxColumn(y)))}function ks(P,s){return{enableSplitViewResizing:(0,p.O7)(P.enableSplitViewResizing,s.enableSplitViewResizing),renderSideBySide:(0,p.O7)(P.renderSideBySide,s.renderSideBySide),maxComputationTime:(0,p.Zc)(P.maxComputationTime,s.maxComputationTime,0,1073741824),maxFileSize:(0,p.Zc)(P.maxFileSize,s.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,p.O7)(P.ignoreTrimWhitespace,s.ignoreTrimWhitespace),renderIndicators:(0,p.O7)(P.renderIndicators,s.renderIndicators),originalEditable:(0,p.O7)(P.originalEditable,s.originalEditable),diffCodeLens:(0,p.O7)(P.diffCodeLens,s.diffCodeLens),renderOverviewRuler:(0,p.O7)(P.renderOverviewRuler,s.renderOverviewRuler),diffWordWrap:So(P.diffWordWrap,s.diffWordWrap)}}function tl(P,s){return{enableSplitViewResizing:P.enableSplitViewResizing!==s.enableSplitViewResizing,renderSideBySide:P.renderSideBySide!==s.renderSideBySide,maxComputationTime:P.maxComputationTime!==s.maxComputationTime,maxFileSize:P.maxFileSize!==s.maxFileSize,ignoreTrimWhitespace:P.ignoreTrimWhitespace!==s.ignoreTrimWhitespace,renderIndicators:P.renderIndicators!==s.renderIndicators,originalEditable:P.originalEditable!==s.originalEditable,diffCodeLens:P.diffCodeLens!==s.diffCodeLens,renderOverviewRuler:P.renderOverviewRuler!==s.renderOverviewRuler,diffWordWrap:P.diffWordWrap!==s.diffWordWrap}}(0,ns.Ic)((P,s)=>{const u=P.getColor(gr.ypS);u&&s.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${u}; }`);const y=P.getColor(gr.hzo)||u;y&&s.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${y}; }`);const $=P.getColor(gr.j51)||y;$&&(s.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${$}; }`),s.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${$}; }`));const he=P.getColor(gr.P4M);he&&s.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${he}; }`);const _e=P.getColor(gr.xi6)||he;_e&&s.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${_e}; }`);const Ie=P.getColor(gr.zOm)||_e;Ie&&(s.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${Ie}; }`),s.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${Ie}; }`));const st=P.getColor(gr.XL$);st&&s.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${P.type==="hc"?"dashed":"solid"} ${st}; }`);const yt=P.getColor(gr.mHy);yt&&s.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${P.type==="hc"?"dashed":"solid"} ${yt}; }`);const wt=P.getColor(gr._wn);wt&&s.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${wt}; }`);const Xt=P.getColor(gr.LLc);Xt&&s.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${Xt}; }`);const Rn=P.getColor(gr.etL);Rn&&s.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${Rn};
			}
		`);const ui=P.getColor(gr.ABB);ui&&s.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${ui};
			}
		`);const Ai=P.getColor(gr.ynu);Ai&&s.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${Ai};
			}
		`);const Gi=P.getColor(gr.L_t);s.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${Gi} 12.5%,
			#0000 12.5%, #0000 50%,
			${Gi} 50%, ${Gi} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var Nl=a(30653),ra=a(66663),dh=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},hh=function(P,s){return function(u,y){s(u,y,P)}};let nd=class extends Q.JT{constructor(s){super();this._themeService=s,this._onCodeEditorAdd=this._register(new z.Q5),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new z.Q5),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new z.Q5),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new z.Q5),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(s){this._codeEditors[s.getId()]=s,this._onCodeEditorAdd.fire(s)}removeCodeEditor(s){delete this._codeEditors[s.getId()]&&this._onCodeEditorRemove.fire(s)}listCodeEditors(){return Object.keys(this._codeEditors).map(s=>this._codeEditors[s])}addDiffEditor(s){this._diffEditors[s.getId()]=s,this._onDiffEditorAdd.fire(s)}removeDiffEditor(s){delete this._diffEditors[s.getId()]&&this._onDiffEditorRemove.fire(s)}listDiffEditors(){return Object.keys(this._diffEditors).map(s=>this._diffEditors[s])}getFocusedCodeEditor(){let s=null;const u=this.listCodeEditors();for(const y of u){if(y.hasTextFocus())return y;y.hasWidgetFocus()&&(s=y)}return s}removeDecorationType(s){const u=this._decorationOptionProviders.get(s);u&&(u.refCount--,u.refCount<=0&&(this._decorationOptionProviders.delete(s),u.dispose(),this.listCodeEditors().forEach(y=>y.removeDecorations(s))))}setModelProperty(s,u,y){const $=s.toString();let he;this._modelProperties.has($)?he=this._modelProperties.get($):(he=new Map,this._modelProperties.set($,he)),he.set(u,y)}getModelProperty(s,u){const y=s.toString();if(this._modelProperties.has(y))return this._modelProperties.get(y).get(u)}};nd=dh([hh(0,ns.XE)],nd);class qh{constructor(s){this._styleSheet=s}}var Zo=a(65026),Fc=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},iu=function(P,s){return function(u,y){s(u,y,P)}};let _l=class extends nd{constructor(s,u){super(u);this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=s.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let s=!1;for(const u of this.listCodeEditors())if(!u.isSimpleWidget){s=!0;break}this._editorIsOpen.set(s)}setActiveCodeEditor(s){this._activeCodeEditor=s}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(s,u,y){return u?Promise.resolve(this.doOpenEditor(u,s)):Promise.resolve(null)}doOpenEditor(s,u){if(!this.findModel(s,u.resource)){if(u.resource){const he=u.resource.scheme;if(he===ra.lg.http||he===ra.lg.https)return(0,fn.V3)(u.resource.toString()),s}return null}const $=u.options?u.options.selection:null;if($)if(typeof $.endLineNumber=="number"&&typeof $.endColumn=="number")s.setSelection($),s.revealRangeInCenter($,1);else{const he={lineNumber:$.startLineNumber,column:$.startColumn};s.setPosition(he),s.revealPositionInCenter(he,1)}return s}findModel(s,u){const y=s.getModel();return y&&y.uri.toString()!==u.toString()?null:y}};_l=Fc([iu(0,ts.i6),iu(1,ns.XE)],_l),(0,Zo.z)(Fe.$,_l);const ba=(0,ea.yh)("layoutService");var Tl=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},id=function(P,s){return function(u,y){s(u,y,P)}};let ru=class{constructor(s){this._codeEditorService=s,this.onDidLayout=z.ju.None}get dimension(){return this._dimension||(this._dimension=fn.D6(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var s;(s=this._codeEditorService.getFocusedCodeEditor())===null||s===void 0||s.focus()}};ru=Tl([id(0,Fe.$)],ru);let Du=class extends ru{constructor(s,u){super(u);this._container=s}get hasContainer(){return!1}get container(){return this._container}};Du=Tl([id(1,Fe.$)],Du),(0,Zo.z)(ba,ru);var xa=a(14603),rd=a(28820),nl=a(64862),fh=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},Zl=function(P,s){return function(u,y){s(u,y,P)}},Ys=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};const gc=!1;function xu(P){return P.scheme===ra.lg.file?P.fsPath:P.path}let Ml=0;class ou{constructor(s,u,y,$,he,_e,Ie){this.id=++Ml,this.type=0,this.actual=s,this.label=s.label,this.confirmBeforeUndo=s.confirmBeforeUndo||!1,this.resourceLabel=u,this.strResource=y,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=$,this.groupOrder=he,this.sourceId=_e,this.sourceOrder=Ie,this.isValid=!0}setValid(s){this.isValid=s}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class su{constructor(s,u){this.resourceLabel=s,this.reason=u}}class Od{constructor(){this.elements=new Map}createMessage(){const s=[],u=[];for(const[,$]of this.elements)($.reason===0?s:u).push($.resourceLabel);let y=[];return s.length>0&&y.push(Un.N({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",s.join(", "))),u.length>0&&y.push(Un.N({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",u.join(", "))),y.join(`
`)}get size(){return this.elements.size}has(s){return this.elements.has(s)}set(s,u){this.elements.set(s,u)}delete(s){return this.elements.delete(s)}}class gh{constructor(s,u,y,$,he,_e,Ie){this.id=++Ml,this.type=1,this.actual=s,this.label=s.label,this.confirmBeforeUndo=s.confirmBeforeUndo||!1,this.resourceLabels=u,this.strResources=y,this.groupId=$,this.groupOrder=he,this.sourceId=_e,this.sourceOrder=Ie,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(s,u,y){this.removedResources||(this.removedResources=new Od),this.removedResources.has(u)||this.removedResources.set(u,new su(s,y))}setValid(s,u,y){y?this.invalidatedResources&&(this.invalidatedResources.delete(u),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Od),this.invalidatedResources.has(u)||this.invalidatedResources.set(u,new su(s,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class kd{constructor(s,u){this.resourceLabel=s,this.strResource=u,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const s of this._past)s.type===1&&s.removeResource(this.resourceLabel,this.strResource,0);for(const s of this._future)s.type===1&&s.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let s=[];s.push(`* ${this.strResource}:`);for(let u=0;u<this._past.length;u++)s.push(`   * [UNDO] ${this._past[u]}`);for(let u=this._future.length-1;u>=0;u--)s.push(`   * [REDO] ${this._future[u]}`);return s.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(s,u){s.type===1?s.setValid(this.resourceLabel,this.strResource,u):s.setValid(u)}setElementsValidFlag(s,u){for(const y of this._past)u(y.actual)&&this._setElementValidFlag(y,s);for(const y of this._future)u(y.actual)&&this._setElementValidFlag(y,s)}pushElement(s){for(const u of this._future)u.type===1&&u.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(s),this.versionId++}createSnapshot(s){const u=[];for(let y=0,$=this._past.length;y<$;y++)u.push(this._past[y].id);for(let y=this._future.length-1;y>=0;y--)u.push(this._future[y].id);return new nl.YO(s,u)}restoreSnapshot(s){const u=s.elements.length;let y=!0,$=0,he=-1;for(let Ie=0,st=this._past.length;Ie<st;Ie++,$++){const yt=this._past[Ie];y&&($>=u||yt.id!==s.elements[$])&&(y=!1,he=0),!y&&yt.type===1&&yt.removeResource(this.resourceLabel,this.strResource,0)}let _e=-1;for(let Ie=this._future.length-1;Ie>=0;Ie--,$++){const st=this._future[Ie];y&&($>=u||st.id!==s.elements[$])&&(y=!1,_e=Ie),!y&&st.type===1&&st.removeResource(this.resourceLabel,this.strResource,0)}he!==-1&&(this._past=this._past.slice(0,he)),_e!==-1&&(this._future=this._future.slice(_e+1)),this.versionId++}getElements(){const s=[],u=[];for(const y of this._past)s.push(y.actual);for(const y of this._future)u.push(y.actual);return{past:s,future:u}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(s,u){for(let y=this._past.length-1;y>=0;y--)if(this._past[y]===s){u.has(this.strResource)?this._past[y]=u.get(this.strResource):this._past.splice(y,1);break}this.versionId++}splitFutureWorkspaceElement(s,u){for(let y=this._future.length-1;y>=0;y--)if(this._future[y]===s){u.has(this.strResource)?this._future[y]=u.get(this.strResource):this._future.splice(y,1);break}this.versionId++}moveBackward(s){this._past.pop(),this._future.push(s),this.versionId++}moveForward(s){this._future.pop(),this._past.push(s),this.versionId++}}class Iu{constructor(s){this.editStacks=s,this._versionIds=[];for(let u=0,y=this.editStacks.length;u<y;u++)this._versionIds[u]=this.editStacks[u].versionId}isValid(){for(let s=0,u=this.editStacks.length;s<u;s++)if(this._versionIds[s]!==this.editStacks[s].versionId)return!1;return!0}}const Al=new kd("","");Al.locked=!0;let au=class{constructor(s,u){this._dialogService=s,this._notificationService=u,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(s){for(const u of this._uriComparisonKeyComputers)if(u[0]===s.scheme)return u[1].getComparisonKey(s);return s.toString()}_print(s){console.log("------------------------------------"),console.log(`AFTER ${s}: `);let u=[];for(const y of this._editStacks)u.push(y[1].toString());console.log(u.join(`
`))}pushElement(s,u=nl.Xt.None,y=nl.gJ.None){if(s.type===0){const $=xu(s.resource),he=this.getUriComparisonKey(s.resource);this._pushElement(new ou(s,$,he,u.id,u.nextOrder(),y.id,y.nextOrder()))}else{const $=new Set,he=[],_e=[];for(const Ie of s.resources){const st=xu(Ie),yt=this.getUriComparisonKey(Ie);$.has(yt)||($.add(yt),he.push(st),_e.push(yt))}he.length===1?this._pushElement(new ou(s,he[0],_e[0],u.id,u.nextOrder(),y.id,y.nextOrder())):this._pushElement(new gh(s,he,_e,u.id,u.nextOrder(),y.id,y.nextOrder()))}gc&&this._print("pushElement")}_pushElement(s){for(let u=0,y=s.strResources.length;u<y;u++){const $=s.resourceLabels[u],he=s.strResources[u];let _e;this._editStacks.has(he)?_e=this._editStacks.get(he):(_e=new kd($,he),this._editStacks.set(he,_e)),_e.pushElement(s)}}getLastElement(s){const u=this.getUriComparisonKey(s);if(this._editStacks.has(u)){const y=this._editStacks.get(u);if(y.hasFutureElements())return null;const $=y.getClosestPastElement();return $?$.actual:null}return null}_splitPastWorkspaceElement(s,u){const y=s.actual.split(),$=new Map;for(const he of y){const _e=xu(he.resource),Ie=this.getUriComparisonKey(he.resource),st=new ou(he,_e,Ie,0,0,0,0);$.set(st.strResource,st)}for(const he of s.strResources){if(u&&u.has(he))continue;this._editStacks.get(he).splitPastWorkspaceElement(s,$)}}_splitFutureWorkspaceElement(s,u){const y=s.actual.split(),$=new Map;for(const he of y){const _e=xu(he.resource),Ie=this.getUriComparisonKey(he.resource),st=new ou(he,_e,Ie,0,0,0,0);$.set(st.strResource,st)}for(const he of s.strResources){if(u&&u.has(he))continue;this._editStacks.get(he).splitFutureWorkspaceElement(s,$)}}removeElements(s){const u=typeof s=="string"?s:this.getUriComparisonKey(s);this._editStacks.has(u)&&(this._editStacks.get(u).dispose(),this._editStacks.delete(u)),gc&&this._print("removeElements")}setElementsValidFlag(s,u,y){const $=this.getUriComparisonKey(s);this._editStacks.has($)&&this._editStacks.get($).setElementsValidFlag(u,y),gc&&this._print("setElementsValidFlag")}createSnapshot(s){const u=this.getUriComparisonKey(s);return this._editStacks.has(u)?this._editStacks.get(u).createSnapshot(s):new nl.YO(s,[])}restoreSnapshot(s){const u=this.getUriComparisonKey(s.resource);if(this._editStacks.has(u)){const y=this._editStacks.get(u);y.restoreSnapshot(s),!y.hasPastElements()&&!y.hasFutureElements()&&(y.dispose(),this._editStacks.delete(u))}gc&&this._print("restoreSnapshot")}getElements(s){const u=this.getUriComparisonKey(s);return this._editStacks.has(u)?this._editStacks.get(u).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(s){if(!s)return[null,null];let u=null,y=null;for(const[$,he]of this._editStacks){const _e=he.getClosestPastElement();!_e||_e.sourceId===s&&(!u||_e.sourceOrder>u.sourceOrder)&&(u=_e,y=$)}return[u,y]}canUndo(s){if(s instanceof nl.gJ){const[,y]=this._findClosestUndoElementWithSource(s.id);return!!y}const u=this.getUriComparisonKey(s);return this._editStacks.has(u)?this._editStacks.get(u).hasPastElements():!1}_onError(s,u){(0,dt.dL)(s);for(const y of u.strResources)this.removeElements(y);this._notificationService.error(s)}_acquireLocks(s){for(const u of s.editStacks)if(u.locked)throw new Error("Cannot acquire edit stack lock");for(const u of s.editStacks)u.locked=!0;return()=>{for(const u of s.editStacks)u.locked=!1}}_safeInvokeWithLocks(s,u,y,$,he){const _e=this._acquireLocks(y);let Ie;try{Ie=u()}catch(st){return _e(),$.dispose(),this._onError(st,s)}return Ie?Ie.then(()=>(_e(),$.dispose(),he()),st=>(_e(),$.dispose(),this._onError(st,s))):(_e(),$.dispose(),he())}_invokeWorkspacePrepare(s){return Ys(this,void 0,void 0,function*(){if(typeof s.actual.prepareUndoRedo=="undefined")return Q.JT.None;const u=s.actual.prepareUndoRedo();return typeof u=="undefined"?Q.JT.None:u})}_invokeResourcePrepare(s,u){if(s.actual.type!==1||typeof s.actual.prepareUndoRedo=="undefined")return u(Q.JT.None);const y=s.actual.prepareUndoRedo();return y?(0,Q.Wf)(y)?u(y):y.then($=>u($)):u(Q.JT.None)}_getAffectedEditStacks(s){const u=[];for(const y of s.strResources)u.push(this._editStacks.get(y)||Al);return new Iu(u)}_tryToSplitAndUndo(s,u,y,$){if(u.canSplit())return this._splitPastWorkspaceElement(u,y),this._notificationService.warn($),new mc(this._undo(s,0,!0));for(const he of u.strResources)this.removeElements(he);return this._notificationService.warn($),new mc}_checkWorkspaceUndo(s,u,y,$){if(u.removedResources)return this._tryToSplitAndUndo(s,u,u.removedResources,Un.N({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",u.label,u.removedResources.createMessage()));if($&&u.invalidatedResources)return this._tryToSplitAndUndo(s,u,u.invalidatedResources,Un.N({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",u.label,u.invalidatedResources.createMessage()));const he=[];for(const Ie of y.editStacks)Ie.getClosestPastElement()!==u&&he.push(Ie.resourceLabel);if(he.length>0)return this._tryToSplitAndUndo(s,u,null,Un.N({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",u.label,he.join(", ")));const _e=[];for(const Ie of y.editStacks)Ie.locked&&_e.push(Ie.resourceLabel);return _e.length>0?this._tryToSplitAndUndo(s,u,null,Un.N({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",u.label,_e.join(", "))):y.isValid()?null:this._tryToSplitAndUndo(s,u,null,Un.N({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",u.label))}_workspaceUndo(s,u,y){const $=this._getAffectedEditStacks(u),he=this._checkWorkspaceUndo(s,u,$,!1);return he?he.returnValue:this._confirmAndExecuteWorkspaceUndo(s,u,$,y)}_isPartOfUndoGroup(s){if(!s.groupId)return!1;for(const[,u]of this._editStacks){const y=u.getClosestPastElement();if(!!y){if(y===s){const $=u.getSecondClosestPastElement();if($&&$.groupId===s.groupId)return!0}if(y.groupId===s.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(s,u,y,$){return Ys(this,void 0,void 0,function*(){if(u.canSplit()&&!this._isPartOfUndoGroup(u)){const Ie=yield this._dialogService.show(xa.Z.Info,Un.N("confirmWorkspace","Would you like to undo '{0}' across all files?",u.label),[Un.N({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",y.editStacks.length),Un.N("nok","Undo this File"),Un.N("cancel","Cancel")],{cancelId:2});if(Ie.choice===2)return;if(Ie.choice===1)return this._splitPastWorkspaceElement(u,null),this._undo(s,0,!0);const st=this._checkWorkspaceUndo(s,u,y,!1);if(st)return st.returnValue;$=!0}let he;try{he=yield this._invokeWorkspacePrepare(u)}catch(Ie){return this._onError(Ie,u)}const _e=this._checkWorkspaceUndo(s,u,y,!0);if(_e)return he.dispose(),_e.returnValue;for(const Ie of y.editStacks)Ie.moveBackward(u);return this._safeInvokeWithLocks(u,()=>u.actual.undo(),y,he,()=>this._continueUndoInGroup(u.groupId,$))})}_resourceUndo(s,u,y){if(!u.isValid){s.flushAllElements();return}if(s.locked){const $=Un.N({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",u.label);this._notificationService.warn($);return}return this._invokeResourcePrepare(u,$=>(s.moveBackward(u),this._safeInvokeWithLocks(u,()=>u.actual.undo(),new Iu([s]),$,()=>this._continueUndoInGroup(u.groupId,y))))}_findClosestUndoElementInGroup(s){if(!s)return[null,null];let u=null,y=null;for(const[$,he]of this._editStacks){const _e=he.getClosestPastElement();!_e||_e.groupId===s&&(!u||_e.groupOrder>u.groupOrder)&&(u=_e,y=$)}return[u,y]}_continueUndoInGroup(s,u){if(!s)return;const[,y]=this._findClosestUndoElementInGroup(s);if(y)return this._undo(y,0,u)}undo(s){if(s instanceof nl.gJ){const[,u]=this._findClosestUndoElementWithSource(s.id);return u?this._undo(u,s.id,!1):void 0}return typeof s=="string"?this._undo(s,0,!1):this._undo(this.getUriComparisonKey(s),0,!1)}_undo(s,u=0,y){if(!this._editStacks.has(s))return;const $=this._editStacks.get(s),he=$.getClosestPastElement();if(!he)return;if(he.groupId){const[Ie,st]=this._findClosestUndoElementInGroup(he.groupId);if(he!==Ie&&st)return this._undo(st,u,y)}if((he.sourceId!==u||he.confirmBeforeUndo)&&!y)return this._confirmAndContinueUndo(s,u,he);try{return he.type===1?this._workspaceUndo(s,he,y):this._resourceUndo($,he,y)}finally{gc&&this._print("undo")}}_confirmAndContinueUndo(s,u,y){return Ys(this,void 0,void 0,function*(){if((yield this._dialogService.show(xa.Z.Info,Un.N("confirmDifferentSource","Would you like to undo '{0}'?",y.label),[Un.N("confirmDifferentSource.yes","Yes"),Un.N("confirmDifferentSource.no","No")],{cancelId:1})).choice!==1)return this._undo(s,u,!0)})}_findClosestRedoElementWithSource(s){if(!s)return[null,null];let u=null,y=null;for(const[$,he]of this._editStacks){const _e=he.getClosestFutureElement();!_e||_e.sourceId===s&&(!u||_e.sourceOrder<u.sourceOrder)&&(u=_e,y=$)}return[u,y]}canRedo(s){if(s instanceof nl.gJ){const[,y]=this._findClosestRedoElementWithSource(s.id);return!!y}const u=this.getUriComparisonKey(s);return this._editStacks.has(u)?this._editStacks.get(u).hasFutureElements():!1}_tryToSplitAndRedo(s,u,y,$){if(u.canSplit())return this._splitFutureWorkspaceElement(u,y),this._notificationService.warn($),new mc(this._redo(s));for(const he of u.strResources)this.removeElements(he);return this._notificationService.warn($),new mc}_checkWorkspaceRedo(s,u,y,$){if(u.removedResources)return this._tryToSplitAndRedo(s,u,u.removedResources,Un.N({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",u.label,u.removedResources.createMessage()));if($&&u.invalidatedResources)return this._tryToSplitAndRedo(s,u,u.invalidatedResources,Un.N({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",u.label,u.invalidatedResources.createMessage()));const he=[];for(const Ie of y.editStacks)Ie.getClosestFutureElement()!==u&&he.push(Ie.resourceLabel);if(he.length>0)return this._tryToSplitAndRedo(s,u,null,Un.N({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",u.label,he.join(", ")));const _e=[];for(const Ie of y.editStacks)Ie.locked&&_e.push(Ie.resourceLabel);return _e.length>0?this._tryToSplitAndRedo(s,u,null,Un.N({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",u.label,_e.join(", "))):y.isValid()?null:this._tryToSplitAndRedo(s,u,null,Un.N({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",u.label))}_workspaceRedo(s,u){const y=this._getAffectedEditStacks(u),$=this._checkWorkspaceRedo(s,u,y,!1);return $?$.returnValue:this._executeWorkspaceRedo(s,u,y)}_executeWorkspaceRedo(s,u,y){return Ys(this,void 0,void 0,function*(){let $;try{$=yield this._invokeWorkspacePrepare(u)}catch(_e){return this._onError(_e,u)}const he=this._checkWorkspaceRedo(s,u,y,!0);if(he)return $.dispose(),he.returnValue;for(const _e of y.editStacks)_e.moveForward(u);return this._safeInvokeWithLocks(u,()=>u.actual.redo(),y,$,()=>this._continueRedoInGroup(u.groupId))})}_resourceRedo(s,u){if(!u.isValid){s.flushAllElements();return}if(s.locked){const y=Un.N({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",u.label);this._notificationService.warn(y);return}return this._invokeResourcePrepare(u,y=>(s.moveForward(u),this._safeInvokeWithLocks(u,()=>u.actual.redo(),new Iu([s]),y,()=>this._continueRedoInGroup(u.groupId))))}_findClosestRedoElementInGroup(s){if(!s)return[null,null];let u=null,y=null;for(const[$,he]of this._editStacks){const _e=he.getClosestFutureElement();!_e||_e.groupId===s&&(!u||_e.groupOrder<u.groupOrder)&&(u=_e,y=$)}return[u,y]}_continueRedoInGroup(s){if(!s)return;const[,u]=this._findClosestRedoElementInGroup(s);if(u)return this._redo(u)}redo(s){if(s instanceof nl.gJ){const[,u]=this._findClosestRedoElementWithSource(s.id);return u?this._redo(u):void 0}return typeof s=="string"?this._redo(s):this._redo(this.getUriComparisonKey(s))}_redo(s){if(!this._editStacks.has(s))return;const u=this._editStacks.get(s),y=u.getClosestFutureElement();if(!!y){if(y.groupId){const[$,he]=this._findClosestRedoElementInGroup(y.groupId);if(y!==$&&he)return this._redo(he)}try{return y.type===1?this._workspaceRedo(s,y):this._resourceRedo(u,y)}finally{gc&&this._print("redo")}}}};au=fh([Zl(0,rd.S),Zl(1,sa.lT)],au);class mc{constructor(s){this.returnValue=s}}(0,Zo.z)(nl.tJ,au);var ef=a(88191),la=a(59069),Cl=a(8313),Nu=a(66007),Xl=a(22075),Ba=a(23193),Yl=a(89872);const od=Object.freeze({id:"editor",order:5,type:"object",title:Un.N("editorConfigurationTitle","Editor"),scope:5}),Rl=Object.assign(Object.assign({},od),{properties:{"editor.tabSize":{type:"number",default:Xl.D.tabSize,minimum:1,markdownDescription:Un.N("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Xl.D.insertSpaces,markdownDescription:Un.N("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Xl.D.detectIndentation,markdownDescription:Un.N("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Xl.D.trimAutoWhitespace,description:Un.N("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Xl.D.largeFileOptimizations,description:Un.N("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:Un.N("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[Un.N("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),Un.N("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),Un.N("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:Un.N("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[Un.N("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),Un.N("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),Un.N("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:Un.N("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:Un.N("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:Un.N("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:Un.N("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:Un.N("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:Un.N("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:Un.N("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:Un.N("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:Un.N("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:Un.N("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:Un.N("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:Un.N("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:Un.N("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:Un.N("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:Un.N("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[Un.N("wordWrap.off","Lines will never wrap."),Un.N("wordWrap.on","Lines will wrap at the viewport width."),Un.N("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function sd(P){return typeof P.type!="undefined"||typeof P.anyOf!="undefined"}for(const P of p.Bc){const s=P.schema;if(typeof s!="undefined")if(sd(s))Rl.properties[`editor.${P.name}`]=s;else for(const u in s)Object.hasOwnProperty.call(s,u)&&(Rl.properties[u]=s[u])}let pc=null;function ad(){return pc===null&&(pc=Object.create(null),Object.keys(Rl.properties).forEach(P=>{pc[P]=!0})),pc}function Tu(P){return ad()[`editor.${P}`]||!1}function ld(P){return ad()[`diffEditor.${P}`]||!1}Yl.B.as(Ba.IP.Configuration).registerConfiguration(Rl);var Fd=a(69386),il=a(88216),Ia=a(94565),Na=a(33108),Vs=a(43702);class Ta{constructor(s={},u=[],y=[]){this._contents=s,this._keys=u,this._overrides=y,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(s){return s?(0,Na.Mt)(this.contents,s):this.contents}getOverrideValue(s,u){const y=this.getContentsForOverrideIdentifer(u);return y?s?(0,Na.Mt)(y,s):y:void 0}override(s){let u=this.overrideConfigurations.get(s);return u||(u=this.createOverrideConfigurationModel(s),this.overrideConfigurations.set(s,u)),u}merge(...s){const u=ie.I8(this.contents),y=ie.I8(this.overrides),$=[...this.keys];for(const he of s){this.mergeContents(u,he.contents);for(const _e of he.overrides){const[Ie]=y.filter(st=>tn.fS(st.identifiers,_e.identifiers));Ie?(this.mergeContents(Ie.contents,_e.contents),Ie.keys.push(..._e.keys),Ie.keys=tn.EB(Ie.keys)):y.push(ie.I8(_e))}for(const _e of he.keys)$.indexOf(_e)===-1&&$.push(_e)}return new Ta(u,$,y)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(s){const u=this.getContentsForOverrideIdentifer(s);if(!u||typeof u!="object"||!Object.keys(u).length)return this;let y={};for(const $ of tn.EB([...Object.keys(this.contents),...Object.keys(u)])){let he=this.contents[$],_e=u[$];_e&&(typeof he=="object"&&typeof _e=="object"?(he=ie.I8(he),this.mergeContents(he,_e)):he=_e),y[$]=he}return new Ta(y,this.keys,this.overrides)}mergeContents(s,u){for(const y of Object.keys(u)){if(y in s&&Ve.Kn(s[y])&&Ve.Kn(u[y])){this.mergeContents(s[y],u[y]);continue}s[y]=ie.I8(u[y])}}checkAndFreeze(s){return this.isFrozen&&!Object.isFrozen(s)?ie._A(s):s}getContentsForOverrideIdentifer(s){let u=null,y=null;const $=he=>{he&&(y?this.mergeContents(y,he):y=ie.I8(he))};for(const he of this.overrides)tn.fS(he.identifiers,[s])?u=he.contents:he.identifiers.includes(s)&&$(he.contents);return $(u),y}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(s,u){this.addKey(s),(0,Na.KV)(this.contents,s,u,y=>{throw new Error(y)})}removeValue(s){this.removeKey(s)&&(0,Na.xL)(this.contents,s)}addKey(s){let u=this.keys.length;for(let y=0;y<u;y++)s.indexOf(this.keys[y])===0&&(u=y);this.keys.splice(u,1,s)}removeKey(s){let u=this.keys.indexOf(s);return u!==-1?(this.keys.splice(u,1),!0):!1}}class vc extends Ta{constructor(s={}){const u=Yl.B.as(Ba.IP.Configuration).getConfigurationProperties(),y=Object.keys(u),$=Object.create(null),he=[];for(const _e in u){const Ie=s[_e],st=Ie!==void 0?Ie:u[_e].default;(0,Na.KV)($,_e,st,yt=>console.error(`Conflict in default settings: ${yt}`))}for(const _e of Object.keys($))Ba.eU.test(_e)&&he.push({identifiers:(0,Ba.ny)(_e),keys:Object.keys($[_e]),contents:(0,Na.Od)($[_e],Ie=>console.error(`Conflict in default settings file: ${Ie}`))});super($,y,he)}}class _c{constructor(s,u,y=new Ta,$=new Ta,he=new Vs.Y9,_e=new Ta,Ie=new Vs.Y9,st=!0){this._defaultConfiguration=s,this._localUserConfiguration=u,this._remoteUserConfiguration=y,this._workspaceConfiguration=$,this._folderConfigurations=he,this._memoryConfiguration=_e,this._memoryConfigurationByResource=Ie,this._freeze=st,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Vs.Y9,this._userConfiguration=null}getValue(s,u,y){return this.getConsolidateConfigurationModel(u,y).getValue(s)}updateValue(s,u,y={}){let $;y.resource?($=this._memoryConfigurationByResource.get(y.resource),$||($=new Ta,this._memoryConfigurationByResource.set(y.resource,$))):$=this._memoryConfiguration,u===void 0?$.removeValue(s):$.setValue(s,u),y.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(s,u,y){const $=this.getConsolidateConfigurationModel(u,y),he=this.getFolderConfigurationModelForResource(u.resource,y),_e=u.resource?this._memoryConfigurationByResource.get(u.resource)||this._memoryConfiguration:this._memoryConfiguration,Ie=u.overrideIdentifier?this._defaultConfiguration.freeze().override(u.overrideIdentifier).getValue(s):this._defaultConfiguration.freeze().getValue(s),st=u.overrideIdentifier?this.userConfiguration.freeze().override(u.overrideIdentifier).getValue(s):this.userConfiguration.freeze().getValue(s),yt=u.overrideIdentifier?this.localUserConfiguration.freeze().override(u.overrideIdentifier).getValue(s):this.localUserConfiguration.freeze().getValue(s),wt=u.overrideIdentifier?this.remoteUserConfiguration.freeze().override(u.overrideIdentifier).getValue(s):this.remoteUserConfiguration.freeze().getValue(s),Xt=y?u.overrideIdentifier?this._workspaceConfiguration.freeze().override(u.overrideIdentifier).getValue(s):this._workspaceConfiguration.freeze().getValue(s):void 0,Rn=he?u.overrideIdentifier?he.freeze().override(u.overrideIdentifier).getValue(s):he.freeze().getValue(s):void 0,ui=u.overrideIdentifier?_e.override(u.overrideIdentifier).getValue(s):_e.getValue(s),Ai=$.getValue(s),Gi=tn.EB(tn.xH($.overrides.map(Cr=>Cr.identifiers))).filter(Cr=>$.getOverrideValue(s,Cr)!==void 0);return{defaultValue:Ie,userValue:st,userLocalValue:yt,userRemoteValue:wt,workspaceValue:Xt,workspaceFolderValue:Rn,memoryValue:ui,value:Ai,default:Ie!==void 0?{value:this._defaultConfiguration.freeze().getValue(s),override:u.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(s,u.overrideIdentifier):void 0}:void 0,user:st!==void 0?{value:this.userConfiguration.freeze().getValue(s),override:u.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(s,u.overrideIdentifier):void 0}:void 0,userLocal:yt!==void 0?{value:this.localUserConfiguration.freeze().getValue(s),override:u.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(s,u.overrideIdentifier):void 0}:void 0,userRemote:wt!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(s),override:u.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(s,u.overrideIdentifier):void 0}:void 0,workspace:Xt!==void 0?{value:this._workspaceConfiguration.freeze().getValue(s),override:u.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(s,u.overrideIdentifier):void 0}:void 0,workspaceFolder:Rn!==void 0?{value:he==null?void 0:he.freeze().getValue(s),override:u.overrideIdentifier?he==null?void 0:he.freeze().getOverrideValue(s,u.overrideIdentifier):void 0}:void 0,memory:ui!==void 0?{value:_e.getValue(s),override:u.overrideIdentifier?_e.getOverrideValue(s,u.overrideIdentifier):void 0}:void 0,overrideIdentifiers:Gi.length?Gi:void 0}}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidateConfigurationModel(s,u){let y=this.getConsolidatedConfigurationModelForResource(s,u);return s.overrideIdentifier?y.override(s.overrideIdentifier):y}getConsolidatedConfigurationModelForResource({resource:s},u){let y=this.getWorkspaceConsolidatedConfiguration();if(u&&s){const $=u.getFolder(s);$&&(y=this.getFolderConsolidatedConfiguration($.uri)||y);const he=this._memoryConfigurationByResource.get(s);he&&(y=y.merge(he))}return y}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(s){let u=this._foldersConsolidatedConfigurations.get(s);if(!u){const y=this.getWorkspaceConsolidatedConfiguration(),$=this._folderConfigurations.get(s);$?(u=y.merge($),this._freeze&&(u=u.freeze()),this._foldersConsolidatedConfigurations.set(s,u)):u=y}return u}getFolderConfigurationModelForResource(s,u){if(u&&s){const y=u.getFolder(s);if(y)return this._folderConfigurations.get(y.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((s,u)=>{const{contents:y,overrides:$,keys:he}=this._folderConfigurations.get(u);return s.push([u,{contents:y,overrides:$,keys:he}]),s},[])}}static parse(s){const u=this.parseConfigurationModel(s.defaults),y=this.parseConfigurationModel(s.user),$=this.parseConfigurationModel(s.workspace),he=s.folders.reduce((_e,Ie)=>(_e.set(S.o.revive(Ie[0]),this.parseConfigurationModel(Ie[1])),_e),new Vs.Y9);return new _c(u,y,new Ta,$,he,new Ta,new Vs.Y9,!1)}static parseConfigurationModel(s){return new Ta(s.contents,s.keys,s.overrides).freeze()}}class ud{constructor(s,u,y,$){this.change=s,this.previous=u,this.currentConfiguraiton=y,this.currentWorkspace=$,this._previousConfiguration=void 0;const he=new Set;s.keys.forEach(Ie=>he.add(Ie)),s.overrides.forEach(([,Ie])=>Ie.forEach(st=>he.add(st))),this.affectedKeys=[...he.values()];const _e=new Ta;this.affectedKeys.forEach(Ie=>_e.setValue(Ie,{})),this.affectedKeysTree=_e.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=_c.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(s,u){var y;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,s)){if(u){const $=this.previousConfiguration?this.previousConfiguration.getValue(s,u,(y=this.previous)===null||y===void 0?void 0:y.workspace):void 0,he=this.currentConfiguraiton.getValue(s,u,this.currentWorkspace);return!ie.fS($,he)}return!0}return!1}doesAffectedKeysTreeContains(s,u){let y=(0,Na.Od)({[u]:!0},()=>{}),$;for(;typeof y=="object"&&($=Object.keys(y)[0]);){if(s=s[$],!s)return!1;y=y[$]}return!0}}const bl=/^(cursor|delete)/;class Bd extends Q.JT{constructor(s,u,y,$,he){super();this._contextKeyService=s,this._commandService=u,this._telemetryService=y,this._notificationService=$,this._logService=he,this._onDidUpdateKeybindings=this._register(new z.Q5),this._currentChord=null,this._currentChordChecker=new Ye.zh,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Cc.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Ye._F,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:z.ju.None}dispose(){super.dispose()}_log(s){this._logging&&this._logService.info(`[KeybindingService]: ${s}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(s,u){const y=this._getResolver().lookupPrimaryKeybinding(s,u||this._contextKeyService);if(!!y)return y.resolvedKeybinding}dispatchEvent(s,u){return this._dispatch(s,u)}softDispatch(s,u){const y=this.resolveKeyboardEvent(s);if(y.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[$]=y.getDispatchParts();if($===null)return null;const he=this._contextKeyService.getContext(u),_e=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(he,_e,$)}_enterChordMode(s,u){this._currentChord={keypress:s,label:u},this._currentChordStatusMessage=this._notificationService.status(Un.N("first.chord","({0}) was pressed. Waiting for second key of chord...",u));const y=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-y>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(s,u){return this._doDispatch(this.resolveKeyboardEvent(s),u,!1)}_singleModifierDispatch(s,u){const y=this.resolveKeyboardEvent(s),[$]=y.getSingleModifierDispatchParts();if($)return this._ignoreSingleModifiers.has($)?(this._log(`+ Ignoring single modifier ${$} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Cc.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Cc.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${$}.`),this._currentSingleModifier=$,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):$===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${$} ${$}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(y,u,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${$}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[he]=y.getParts();return this._ignoreSingleModifiers=new Cc(he),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(s,u,y=!1){let $=!1;if(s.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let he=null,_e=null;if(y){const[wt]=s.getSingleModifierDispatchParts();he=wt,_e=wt}else[he]=s.getDispatchParts(),_e=this._currentChord?this._currentChord.keypress:null;if(he===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),$;const Ie=this._contextKeyService.getContext(u),st=s.getLabel(),yt=this._getResolver().resolve(Ie,_e,he);return this._logService.trace("KeybindingService#dispatch",st,yt==null?void 0:yt.commandId),yt&&yt.enterChord?($=!0,this._enterChordMode(he,st),$):(this._currentChord&&(!yt||!yt.commandId)&&(this._notificationService.status(Un.N("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,st),{hideAfter:10*1e3}),$=!0),this._leaveChordMode(),yt&&yt.commandId&&(yt.bubble||($=!0),typeof yt.commandArgs=="undefined"?this._commandService.executeCommand(yt.commandId).then(void 0,wt=>this._notificationService.warn(wt)):this._commandService.executeCommand(yt.commandId,yt.commandArgs).then(void 0,wt=>this._notificationService.warn(wt)),bl.test(yt.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:yt.commandId,from:"keybinding"})),$)}mightProducePrintableCharacter(s){return s.ctrlKey||s.metaKey?!1:s.keyCode>=31&&s.keyCode<=56||s.keyCode>=21&&s.keyCode<=30}}class Cc{constructor(s){this._ctrlKey=s?s.ctrlKey:!1,this._shiftKey=s?s.shiftKey:!1,this._altKey=s?s.altKey:!1,this._metaKey=s?s.metaKey:!1}has(s){switch(s){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Cc.EMPTY=new Cc(null);var Ql=a(91847);class bc{constructor(s,u,y){this._log=y,this._defaultKeybindings=s,this._defaultBoundCommands=new Map;for(const $ of s){const he=$.command;he&&he.charAt(0)!=="-"&&this._defaultBoundCommands.set(he,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=bc.handleRemovals([].concat(s).concat(u));for(let $=0,he=this._keybindings.length;$<he;$++){let _e=this._keybindings[$];_e.keypressParts.length!==0&&(_e.when&&_e.when.type===0||this._addKeyPress(_e.keypressParts[0],_e))}}static _isTargetedForRemoval(s,u,y,$){return!(u&&s.keypressParts[0]!==u||y&&s.keypressParts[1]!==y||$&&(!s.when||!(0,ts.Fb)($,s.when)))}static handleRemovals(s){const u=new Map;for(let $=0,he=s.length;$<he;$++){const _e=s[$];if(_e.command&&_e.command.charAt(0)==="-"){const Ie=_e.command.substring(1);u.has(Ie)?u.get(Ie).push(_e):u.set(Ie,[_e])}}if(u.size===0)return s;const y=[];for(let $=0,he=s.length;$<he;$++){const _e=s[$];if(!_e.command||_e.command.length===0){y.push(_e);continue}if(_e.command.charAt(0)==="-")continue;const Ie=u.get(_e.command);if(!Ie||!_e.isDefault){y.push(_e);continue}let st=!1;for(const yt of Ie){const wt=yt.keypressParts[0],Xt=yt.keypressParts[1],Rn=yt.when;if(this._isTargetedForRemoval(_e,wt,Xt,Rn)){st=!0;break}}if(!st){y.push(_e);continue}}return y}_addKeyPress(s,u){const y=this._map.get(s);if(typeof y=="undefined"){this._map.set(s,[u]),this._addToLookupMap(u);return}for(let $=y.length-1;$>=0;$--){let he=y[$];if(he.command===u.command)continue;const _e=he.keypressParts.length>1,Ie=u.keypressParts.length>1;_e&&Ie&&he.keypressParts[1]!==u.keypressParts[1]||bc.whenIsEntirelyIncluded(he.when,u.when)&&this._removeFromLookupMap(he)}y.push(u),this._addToLookupMap(u)}_addToLookupMap(s){if(!s.command)return;let u=this._lookupMap.get(s.command);typeof u=="undefined"?(u=[s],this._lookupMap.set(s.command,u)):u.push(s)}_removeFromLookupMap(s){if(!s.command)return;let u=this._lookupMap.get(s.command);if(typeof u!="undefined"){for(let y=0,$=u.length;y<$;y++)if(u[y]===s){u.splice(y,1);return}}}static whenIsEntirelyIncluded(s,u){return!u||u.type===1?!0:!s||s.type===1?!1:(0,ts.K8)(s,u)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(s,u){const y=this._lookupMap.get(s);if(typeof y=="undefined"||y.length===0)return null;if(y.length===1)return y[0];for(let $=y.length-1;$>=0;$--){const he=y[$];if(u.contextMatchesRules(he.when))return he}return y[y.length-1]}resolve(s,u,y){this._log(`| Resolving ${y}${u?` chorded from ${u}`:""}`);let $=null;if(u!==null){const _e=this._map.get(u);if(typeof _e=="undefined")return this._log("\\ No keybinding entries."),null;$=[];for(let Ie=0,st=_e.length;Ie<st;Ie++){let yt=_e[Ie];yt.keypressParts[1]===y&&$.push(yt)}}else{const _e=this._map.get(y);if(typeof _e=="undefined")return this._log("\\ No keybinding entries."),null;$=_e}let he=this._findCommand(s,$);return he?u===null&&he.keypressParts.length>1&&he.keypressParts[1]!==null?(this._log(`\\ From ${$.length} keybinding entries, matched chord, when: ${dd(he.when)}, source: ${Mu(he)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${$.length} keybinding entries, matched ${he.command}, when: ${dd(he.when)}, source: ${Mu(he)}.`),{enterChord:!1,leaveChord:he.keypressParts.length>1,commandId:he.command,commandArgs:he.commandArgs,bubble:he.bubble}):(this._log(`\\ From ${$.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(s,u){for(let y=u.length-1;y>=0;y--){let $=u[y];if(!!bc._contextMatchesRules(s,$.when))return $}return null}static _contextMatchesRules(s,u){return u?u.evaluate(s):!0}}function dd(P){return P?`${P.serialize()}`:"no when condition"}function Mu(P){return P.extensionId?P.isBuiltinExtension?`built-in extension ${P.extensionId}`:`user extension ${P.extensionId}`:P.isDefault?"built-in":"user"}var mh=a(49989);class Wd{constructor(s,u,y,$,he,_e,Ie){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=s,this.keypressParts=s?Au(s.getDispatchParts()):[],s&&this.keypressParts.length===0&&(this.keypressParts=Au(s.getSingleModifierDispatchParts())),this.bubble=u?u.charCodeAt(0)===94:!1,this.command=this.bubble?u.substr(1):u,this.commandArgs=y,this.when=$,this.isDefault=he,this.extensionId=_e,this.isBuiltinExtension=Ie}}function Au(P){let s=[];for(let u=0,y=P.length;u<y;u++){const $=P[u];if(!$)return s;s.push($)}return s}var yc=a(8030);class Vd extends Cl.f1{constructor(s,u){super();if(u.length===0)throw(0,dt.b1)("parts");this._os=s,this._parts=u}getLabel(){return yc.xo.toLabel(this._os,this._parts,s=>this._getLabel(s))}getAriaLabel(){return yc.X4.toLabel(this._os,this._parts,s=>this._getAriaLabel(s))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:yc.jC.toLabel(this._os,this._parts,s=>this._getElectronAccelerator(s))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(s=>this._getPart(s))}_getPart(s){return new Cl.BQ(s.ctrlKey,s.shiftKey,s.altKey,s.metaKey,this._getLabel(s),this._getAriaLabel(s))}getDispatchParts(){return this._parts.map(s=>this._getDispatchPart(s))}getSingleModifierDispatchParts(){return this._parts.map(s=>this._getSingleModifierDispatchPart(s))}}class wc extends Vd{constructor(s,u){super(u,s.parts)}_keyCodeToUILabel(s){if(this._os===2)switch(s){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return O.kL.toString(s)}_getLabel(s){return s.isDuplicateModifierCase()?"":this._keyCodeToUILabel(s.keyCode)}_getAriaLabel(s){return s.isDuplicateModifierCase()?"":O.kL.toString(s.keyCode)}_getElectronAccelerator(s){return O.kL.toElectronAccelerator(s.keyCode)}_getDispatchPart(s){return wc.getDispatchStr(s)}static getDispatchStr(s){if(s.isModifierKey())return null;let u="";return s.ctrlKey&&(u+="ctrl+"),s.shiftKey&&(u+="shift+"),s.altKey&&(u+="alt+"),s.metaKey&&(u+="meta+"),u+=O.kL.toString(s.keyCode),u}_getSingleModifierDispatchPart(s){return s.keyCode===5&&!s.shiftKey&&!s.altKey&&!s.metaKey?"ctrl":s.keyCode===4&&!s.ctrlKey&&!s.altKey&&!s.metaKey?"shift":s.keyCode===6&&!s.ctrlKey&&!s.shiftKey&&!s.metaKey?"alt":s.keyCode===57&&!s.ctrlKey&&!s.shiftKey&&!s.altKey?"meta":null}static _scanCodeToKeyCode(s){const u=O.Vd[s];if(u!==-1)return u;switch(s){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(s){if(!s)return null;if(s instanceof Cl.QC)return s;const u=this._scanCodeToKeyCode(s.scanCode);return u===0?null:new Cl.QC(s.ctrlKey,s.shiftKey,s.altKey,s.metaKey,u)}static resolveUserBinding(s,u){const y=Au(s.map($=>this._resolveSimpleUserBinding($)));return y.length>0?[new wc(new Cl.X_(y),u)]:[]}}var ph=a(44349),Ut=a(10829),o=a(40382),h=a(20913),A=a(33425),Z=a(10161),se=a(61134),Se;(function(P){P[P.AVOID=0]="AVOID",P[P.ALIGN=1]="ALIGN"})(Se||(Se={}));function $e(P,s,u){const y=u.mode===Se.ALIGN?u.offset:u.offset+u.size,$=u.mode===Se.ALIGN?u.offset+u.size:u.offset;return u.position===0?s<=P-y?y:s<=$?$-s:Math.max(P-s,0):s<=$?$-s:s<=P-y?y:0}class rt extends Q.JT{constructor(s,u){super();this.container=null,this.delegate=null,this.toDisposeOnClean=Q.JT.None,this.toDisposeOnSetContainer=Q.JT.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=fn.$(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,fn.Cp(this.view),this.setContainer(s,u),this._register((0,Q.OF)(()=>this.setContainer(null,1)))}setContainer(s,u){var y;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(y=this.shadowRootHostElement)===null||y===void 0||y.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),s){if(this.container=s,this.useFixedPosition=u!==1,this.useShadowDOM=u===3,this.useShadowDOM){this.shadowRootHostElement=fn.$(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const he=document.createElement("style");he.textContent=ht,this.shadowRoot.appendChild(he),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(fn.$("slot"))}else this.container.appendChild(this.view);const $=new Q.SL;rt.BUBBLE_UP_EVENTS.forEach(he=>{$.add(fn.mu(this.container,he,_e=>{this.onDOMEvent(_e,!1)}))}),rt.BUBBLE_DOWN_EVENTS.forEach(he=>{$.add(fn.mu(this.container,he,_e=>{this.onDOMEvent(_e,!0)},!0))}),this.toDisposeOnSetContainer=$}}show(s){this.isVisible()&&this.hide(),fn.PO(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",fn.$Z(this.view),this.toDisposeOnClean=s.render(this.view)||Q.JT.None,this.delegate=s,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(!!this.isVisible()){if(this.delegate.canRelayout===!1&&!(Re.gn&&Z.D.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let s=this.delegate.getAnchor(),u;if(fn.Re(s)){let Xt=fn.i(s);u={top:Xt.top,left:Xt.left,width:Xt.width,height:Xt.height}}else u={top:s.y,left:s.x,width:s.width||1,height:s.height||2};const y=fn.w(this.view),$=fn.wn(this.view),he=this.delegate.anchorPosition||0,_e=this.delegate.anchorAlignment||0,Ie=this.delegate.anchorAxisAlignment||0;let st,yt;if(Ie===0){const Xt={offset:u.top-window.pageYOffset,size:u.height,position:he===0?0:1},Rn={offset:u.left,size:u.width,position:_e===0?0:1,mode:Se.ALIGN};st=$e(window.innerHeight,$,Xt)+window.pageYOffset,se.e.intersects({start:st,end:st+$},{start:Xt.offset,end:Xt.offset+Xt.size})&&(Rn.mode=Se.AVOID),yt=$e(window.innerWidth,y,Rn)}else{const Xt={offset:u.left,size:u.width,position:_e===0?0:1},Rn={offset:u.top,size:u.height,position:he===0?0:1,mode:Se.ALIGN};yt=$e(window.innerWidth,y,Xt),se.e.intersects({start:yt,end:yt+y},{start:Xt.offset,end:Xt.offset+Xt.size})&&(Rn.mode=Se.AVOID),st=$e(window.innerHeight,$,Rn)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(he===0?"bottom":"top"),this.view.classList.add(_e===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const wt=fn.i(this.container);this.view.style.top=`${st-(this.useFixedPosition?fn.i(this.view).top:wt.top)}px`,this.view.style.left=`${yt-(this.useFixedPosition?fn.i(this.view).left:wt.left)}px`,this.view.style.width="initial"}hide(s){const u=this.delegate;this.delegate=null,(u==null?void 0:u.onHide)&&u.onHide(s),this.toDisposeOnClean.dispose(),fn.Cp(this.view)}isVisible(){return!!this.delegate}onDOMEvent(s,u){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(s,document.activeElement):u&&!fn.jg(s.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}rt.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],rt.BUBBLE_DOWN_EVENTS=["click"];let ht=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var xt=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},Wt=function(P,s){return function(u,y){s(u,y,P)}};let qt=class extends Q.JT{constructor(s){super();this.layoutService=s,this.currentViewDisposable=Q.JT.None,this.container=s.hasContainer?s.container:null,this.contextView=this._register(new rt(this.container,1)),this.layout(),this._register(s.onDidLayout(()=>this.layout()))}setContainer(s,u){this.contextView.setContainer(s,u||1)}showContextView(s,u,y){u?u!==this.container&&(this.container=u,this.setContainer(u,y?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(s);const $=(0,Q.OF)(()=>{this.currentViewDisposable===$&&this.hideContextView()});return this.currentViewDisposable=$,$}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(s){this.contextView.hide(s)}};qt=xt([Wt(0,ba)],qt);var on=a(15527),_n=a(88721);const Mn="**",$n="/",vi="[/\\\\]",Ii="[^/\\\\]",Di=/\//g;function mr(P){switch(P){case 0:return"";case 1:return`${Ii}*?`;default:return`(?:${vi}|${Ii}+${vi}|${vi}${Ii}+)*?`}}function or(P,s){if(!P)return[];const u=[];let y=!1,$=!1,he="";for(const _e of P){switch(_e){case s:if(!y&&!$){u.push(he),he="";continue}break;case"{":y=!0;break;case"}":y=!1;break;case"[":$=!0;break;case"]":$=!1;break}he+=_e}return he&&u.push(he),u}function Tr(P){if(!P)return"";let s="";const u=or(P,$n);if(u.every(y=>y===Mn))s=".*";else{let y=!1;u.forEach(($,he)=>{if($===Mn){y||(s+=mr(2),y=!0);return}let _e=!1,Ie="",st=!1,yt="";for(const wt of $){if(wt!=="}"&&_e){Ie+=wt;continue}if(st&&(wt!=="]"||!yt)){let Xt;wt==="-"?Xt=wt:(wt==="^"||wt==="!")&&!yt?Xt="^":wt===$n?Xt="":Xt=(0,Je.ec)(wt),yt+=Xt;continue}switch(wt){case"{":_e=!0;continue;case"[":st=!0;continue;case"}":{s+=`(?:${or(Ie,",").map(ui=>Tr(ui)).join("|")})`,_e=!1,Ie="";break}case"]":s+="["+yt+"]",st=!1,yt="";break;case"?":s+=Ii;continue;case"*":s+=mr(1);continue;default:s+=(0,Je.ec)(wt)}}he<u.length-1&&(u[he+1]!==Mn||he+2<u.length)&&(s+=vi),y=!1})}return s}const Er=/^\*\*\/\*\.[\w\.-]+$/,cr=/^\*\*\/([\w\.-]+)\/?$/,Or=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Lo=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Kr=/^\*\*((\/[\w\.-]+)+)\/?$/,us=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,hs=new Vs.z6(1e4),Es=function(){return!1},go=function(){return null};function Ks(P,s){if(!P)return go;let u;typeof P!="string"?u=P.pattern:u=P,u=u.trim();const y=`${u}_${!!s.trimForExclusions}`;let $=hs.get(y);if($)return Ls($,P);let he;if(Er.test(u)){const _e=u.substr(4);$=function(Ie,st){return typeof Ie=="string"&&Ie.endsWith(_e)?u:null}}else(he=cr.exec(Ts(u,s)))?$=La(he[1],u):(s.trimForExclusions?Lo:Or).test(u)?$=vh(u,s):(he=Kr.exec(Ts(u,s)))?$=Ud(he[1].substr(1),u,!0):(he=us.exec(Ts(u,s)))?$=Ud(he[1],u,!1):$=_h(u);return hs.set(y,$),Ls($,P)}function Ls(P,s){return typeof s=="string"?P:function(u,y){return(0,on.KM)(u,s.base,!Re.IJ)?P(u.substr(s.base.length+1),y):null}}function Ts(P,s){return s.trimForExclusions&&P.endsWith("/**")?P.substr(0,P.length-2):P}function La(P,s){const u=`/${P}`,y=`\\${P}`,$=function(_e,Ie){return typeof _e!="string"?null:Ie?Ie===P?s:null:_e===P||_e.endsWith(u)||_e.endsWith(y)?s:null},he=[P];return $.basenames=he,$.patterns=[s],$.allBasenames=he,$}function vh(P,s){const u=hd(P.slice(1,-1).split(",").map(Ie=>Ks(Ie,s)).filter(Ie=>Ie!==go),P),y=u.length;if(!y)return go;if(y===1)return u[0];const $=function(Ie,st){for(let yt=0,wt=u.length;yt<wt;yt++)if(u[yt](Ie,st))return P;return null},he=u.find(Ie=>!!Ie.allBasenames);he&&($.allBasenames=he.allBasenames);const _e=u.reduce((Ie,st)=>st.allPaths?Ie.concat(st.allPaths):Ie,[]);return _e.length&&($.allPaths=_e),$}function Ud(P,s,u){const y=_n.ir===_n.KR.sep,$=y?P:P.replace(Di,_n.ir),he=_n.ir+$,_e=_n.KR.sep+P,Ie=u?function(st,yt){return typeof st=="string"&&(st===$||st.endsWith(he)||!y&&(st===P||st.endsWith(_e)))?s:null}:function(st,yt){return typeof st=="string"&&(st===$||!y&&st===P)?s:null};return Ie.allPaths=[(u?"*/":"./")+P],Ie}function _h(P){try{const s=new RegExp(`^${Tr(P)}$`);return function(u){return s.lastIndex=0,typeof u=="string"&&s.test(u)?P:null}}catch(s){return go}}function Ch(P,s,u){return!P||typeof s!="string"?!1:Ru(P)(s,void 0,u)}function Ru(P,s={}){if(!P)return Es;if(typeof P=="string"||Pu(P)){const u=Ks(P,s);if(u===go)return Es;const y=function($,he){return!!u($,he)};return u.allBasenames&&(y.allBasenames=u.allBasenames),u.allPaths&&(y.allPaths=u.allPaths),y}return tf(P,s)}function Pu(P){const s=P;return s?typeof s.base=="string"&&typeof s.pattern=="string":!1}function tf(P,s){const u=hd(Object.getOwnPropertyNames(P).map(Ie=>nf(Ie,P[Ie],s)).filter(Ie=>Ie!==go)),y=u.length;if(!y)return go;if(!u.some(Ie=>!!Ie.requiresSiblings)){if(y===1)return u[0];const Ie=function(wt,Xt){for(let Rn=0,ui=u.length;Rn<ui;Rn++){const Ai=u[Rn](wt,Xt);if(Ai)return Ai}return null},st=u.find(wt=>!!wt.allBasenames);st&&(Ie.allBasenames=st.allBasenames);const yt=u.reduce((wt,Xt)=>Xt.allPaths?wt.concat(Xt.allPaths):wt,[]);return yt.length&&(Ie.allPaths=yt),Ie}const $=function(Ie,st,yt){let wt;for(let Xt=0,Rn=u.length;Xt<Rn;Xt++){const ui=u[Xt];ui.requiresSiblings&&yt&&(st||(st=(0,_n.EZ)(Ie)),wt||(wt=st.substr(0,st.length-(0,_n.DZ)(Ie).length)));const Ai=ui(Ie,st,wt,yt);if(Ai)return Ai}return null},he=u.find(Ie=>!!Ie.allBasenames);he&&($.allBasenames=he.allBasenames);const _e=u.reduce((Ie,st)=>st.allPaths?Ie.concat(st.allPaths):Ie,[]);return _e.length&&($.allPaths=_e),$}function nf(P,s,u){if(s===!1)return go;const y=Ks(P,u);if(y===go)return go;if(typeof s=="boolean")return y;if(s){const $=s.when;if(typeof $=="string"){const he=(_e,Ie,st,yt)=>{if(!yt||!y(_e,Ie))return null;const wt=$.replace("$(basename)",st),Xt=yt(wt);return(0,Ye.J8)(Xt)?Xt.then(Rn=>Rn?P:null):Xt?P:null};return he.requiresSiblings=!0,he}}return y}function hd(P,s){const u=P.filter(Ie=>!!Ie.basenames);if(u.length<2)return P;const y=u.reduce((Ie,st)=>{const yt=st.basenames;return yt?Ie.concat(yt):Ie},[]);let $;if(s){$=[];for(let Ie=0,st=y.length;Ie<st;Ie++)$.push(s)}else $=u.reduce((Ie,st)=>{const yt=st.patterns;return yt?Ie.concat(yt):Ie},[]);const he=function(Ie,st){if(typeof Ie!="string")return null;if(!st){let wt;for(wt=Ie.length;wt>0;wt--){const Xt=Ie.charCodeAt(wt-1);if(Xt===47||Xt===92)break}st=Ie.substr(wt)}const yt=y.indexOf(st);return yt!==-1?$[yt]:null};he.basenames=y,he.patterns=$,he.allBasenames=y;const _e=P.filter(Ie=>!Ie.basenames);return _e.push(he),_e}var Sc=a(81170),lu=a(95935);let Ec=[],Jl=[],bh=[];function Da(P,s=!1){cu(P,!1,s)}function cu(P,s,u){const y=Ou(P,s);Ec.push(y),y.userConfigured?bh.push(y):Jl.push(y),u&&!y.userConfigured&&Ec.forEach($=>{$.mime===y.mime||$.userConfigured||(y.extension&&$.extension===y.extension&&console.warn(`Overwriting extension <<${y.extension}>> to now point to mime <<${y.mime}>>`),y.filename&&$.filename===y.filename&&console.warn(`Overwriting filename <<${y.filename}>> to now point to mime <<${y.mime}>>`),y.filepattern&&$.filepattern===y.filepattern&&console.warn(`Overwriting filepattern <<${y.filepattern}>> to now point to mime <<${y.mime}>>`),y.firstline&&$.firstline===y.firstline&&console.warn(`Overwriting firstline <<${y.firstline}>> to now point to mime <<${y.mime}>>`))})}function Ou(P,s){return{id:P.id,mime:P.mime,filename:P.filename,extension:P.extension,filepattern:P.filepattern,firstline:P.firstline,userConfigured:s,filenameLowercase:P.filename?P.filename.toLowerCase():void 0,extensionLowercase:P.extension?P.extension.toLowerCase():void 0,filepatternLowercase:P.filepattern?Ru(P.filepattern.toLowerCase()):void 0,filepatternOnPath:P.filepattern?P.filepattern.indexOf(_n.KR.sep)>=0:!1}}function ku(){Ec=Ec.filter(P=>P.userConfigured),Jl=[]}function fd(P,s){let u;if(P)switch(P.scheme){case ra.lg.file:u=P.fsPath;break;case ra.lg.data:{u=lu.Vb.parseMetaData(P).get(lu.Vb.META_DATA_LABEL);break}default:u=P.path}if(!u)return[Sc.v.unknown];u=u.toLowerCase();const y=(0,_n.EZ)(u),$=gd(u,y,bh);if($)return[$,Sc.v.text];const he=gd(u,y,Jl);if(he)return[he,Sc.v.text];if(s){const _e=yh(s);if(_e)return[_e,Sc.v.text]}return[Sc.v.unknown]}function gd(P,s,u){var y;let $,he,_e;for(let Ie=u.length-1;Ie>=0;Ie--){const st=u[Ie];if(s===st.filenameLowercase){$=st;break}if(st.filepattern&&(!he||st.filepattern.length>he.filepattern.length)){const yt=st.filepatternOnPath?P:s;((y=st.filepatternLowercase)===null||y===void 0?void 0:y.call(st,yt))&&(he=st)}st.extension&&(!_e||st.extension.length>_e.extension.length)&&s.endsWith(st.extensionLowercase)&&(_e=st)}if($)return $.mime;if(he)return he.mime;if(_e)return _e.mime}function yh(P){if((0,Je.uS)(P)&&(P=P.substr(1)),P.length>0)for(let s=Ec.length-1;s>=0;s--){const u=Ec[s];if(!u.firstline)continue;const y=P.match(u.firstline);if(y&&y.length>0)return u.mime}}var Xa=a(68801);const Bc=Object.prototype.hasOwnProperty,md="vs.editor.nullLanguage";Ot.zu.register(md,{});class rf{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(md,0),this._register(Xa.bd,1),this._nextLanguageId=2}_register(s,u){this._languageIdToLanguage[u]=s,this._languageToLanguageId.set(s,u)}register(s){if(this._languageToLanguageId.has(s))return;const u=this._nextLanguageId++;this._register(s,u)}encodeLanguageId(s){return this._languageToLanguageId.get(s)||0}decodeLanguageId(s){return this._languageIdToLanguage[s]||md}}class Fu extends Q.JT{constructor(s=!0,u=!1){super();this._onDidChange=this._register(new z.Q5),this.onDidChange=this._onDidChange.event,Fu.instanceCount++,this._warnOnOverwrite=u,this.languageIdCodec=new rf,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},s&&(this._initializeFromRegistry(),this._register(Xa.dQ.onDidChangeLanguages(y=>{this._initializeFromRegistry()})))}dispose(){Fu.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},ku();const s=[].concat(Xa.dQ.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(s)}_registerLanguages(s){for(const u of s)this._registerLanguage(u);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(u=>{const y=this._languages[u];y.name&&(this._nameMap[y.name]=y.identifier),y.aliases.forEach($=>{this._lowercaseNameMap[$.toLowerCase()]=y.identifier}),y.mimetypes.forEach($=>{this._mimeTypesMap[$]=y.identifier})}),Yl.B.as(Ba.IP.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(s){const u=s.id;let y;Bc.call(this._languages,u)?y=this._languages[u]:(this.languageIdCodec.register(u),y={identifier:u,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[u]=y),this._mergeLanguage(y,s)}_mergeLanguage(s,u){const y=u.id;let $=null;if(Array.isArray(u.mimetypes)&&u.mimetypes.length>0&&(s.mimetypes.push(...u.mimetypes),$=u.mimetypes[0]),$||($=`text/x-${y}`,s.mimetypes.push($)),Array.isArray(u.extensions)){u.configuration?s.extensions=u.extensions.concat(s.extensions):s.extensions=s.extensions.concat(u.extensions);for(let Ie of u.extensions)Da({id:y,mime:$,extension:Ie},this._warnOnOverwrite)}if(Array.isArray(u.filenames))for(let Ie of u.filenames)Da({id:y,mime:$,filename:Ie},this._warnOnOverwrite),s.filenames.push(Ie);if(Array.isArray(u.filenamePatterns))for(let Ie of u.filenamePatterns)Da({id:y,mime:$,filepattern:Ie},this._warnOnOverwrite);if(typeof u.firstLine=="string"&&u.firstLine.length>0){let Ie=u.firstLine;Ie.charAt(0)!=="^"&&(Ie="^"+Ie);try{const st=new RegExp(Ie);(0,Je.IO)(st)||Da({id:y,mime:$,firstline:st},this._warnOnOverwrite)}catch(st){(0,dt.dL)(st)}}s.aliases.push(y);let he=null;if(typeof u.aliases!="undefined"&&Array.isArray(u.aliases)&&(u.aliases.length===0?he=[null]:he=u.aliases),he!==null)for(const Ie of he)!Ie||Ie.length===0||s.aliases.push(Ie);const _e=he!==null&&he.length>0;if(!(_e&&he[0]===null)){const Ie=(_e?he[0]:null)||y;(_e||!s.name)&&(s.name=Ie)}u.configuration&&s.configurationFiles.push(u.configuration),u.icon&&s.icons.push(u.icon)}isRegisteredLanguageId(s){return s?Bc.call(this._languages,s):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(s){const u=s.toLowerCase();return Bc.call(this._lowercaseNameMap,u)?this._lowercaseNameMap[u]:null}getLanguageIdByMimeType(s){return s&&Bc.call(this._mimeTypesMap,s)?this._mimeTypesMap[s]:null}guessLanguageIdByFilepathOrFirstLine(s,u){if(!s&&!u)return[];const y=fd(s,u);return(0,tn.kX)(y.map($=>this.getLanguageIdByMimeType($)))}}Fu.instanceCount=0;class uu extends Q.JT{constructor(s=!1){super();this._onDidEncounterLanguage=this._register(new z.Q5),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new z.Q5({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,uu.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new Fu(!0,s)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){uu.instanceCount--,super.dispose()}isRegisteredLanguageId(s){return this._registry.isRegisteredLanguageId(s)}getLanguageIdByLanguageName(s){return this._registry.getLanguageIdByLanguageName(s)}getLanguageIdByMimeType(s){return this._registry.getLanguageIdByMimeType(s)}guessLanguageIdByFilepathOrFirstLine(s,u){const y=this._registry.guessLanguageIdByFilepathOrFirstLine(s,u);return(0,tn.Xh)(y,null)}createById(s){return new wh(this.onDidChange,()=>this._createAndGetLanguageIdentifier(s))}createByFilepathOrFirstLine(s,u){return new wh(this.onDidChange,()=>{const y=this.guessLanguageIdByFilepathOrFirstLine(s,u);return this._createAndGetLanguageIdentifier(y)})}_createAndGetLanguageIdentifier(s){return(!s||!this.isRegisteredLanguageId(s))&&(s=Xa.bd),this._encounteredLanguages.has(s)||(this._encounteredLanguages.add(s),F.RW.getOrCreate(s),this._onDidEncounterLanguage.fire(s)),s}}uu.instanceCount=0;class wh{constructor(s,u){this._onDidChangeLanguages=s,this._selector=u,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new z.Q5({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){const s=this._selector();s!==this.languageId&&(this.languageId=s,this._emitter&&this._emitter.fire(this.languageId))}}var Lc=a(23938),Wc=a(16268),Vc=a(10553),Bu=a(76033),Sh=a(28609),yl=a(21212);const wl=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,du=/(&amp;)?(&amp;)([^\s&])/g;var ya;(function(P){P[P.Right=0]="Right",P[P.Left=1]="Left"})(ya||(ya={}));class ca extends ss.o{constructor(s,u,y={}){s.classList.add("monaco-menu-container"),s.setAttribute("role","presentation");const $=document.createElement("div");$.classList.add("monaco-menu"),$.setAttribute("role","presentation"),super($,{orientation:1,actionViewItemProvider:Ie=>this.doGetActionViewItem(Ie,y,he),context:y.context,actionRunner:y.actionRunner,ariaLabel:y.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Re.dz||Re.IJ?[10]:[]],keyDown:!0}}),this.menuElement=$,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Q.SL),this.initializeOrUpdateStyleSheet(s,{}),this._register(Vc.o.addTarget($)),(0,fn.nm)($,fn.tw.KEY_DOWN,Ie=>{new la.y(Ie).equals(2)&&Ie.preventDefault()}),y.enableMnemonics&&this.menuDisposables.add((0,fn.nm)($,fn.tw.KEY_DOWN,Ie=>{const st=Ie.key.toLocaleLowerCase();if(this.mnemonics.has(st)){fn.zB.stop(Ie,!0);const yt=this.mnemonics.get(st);if(yt.length===1&&(yt[0]instanceof zc&&yt[0].container&&this.focusItemByElement(yt[0].container),yt[0].onClick(Ie)),yt.length>1){const wt=yt.shift();wt&&wt.container&&(this.focusItemByElement(wt.container),yt.push(wt)),this.mnemonics.set(st,yt)}}})),Re.IJ&&this._register((0,fn.nm)($,fn.tw.KEY_DOWN,Ie=>{const st=new la.y(Ie);st.equals(14)||st.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),fn.zB.stop(Ie,!0)):(st.equals(13)||st.equals(12))&&(this.focusedItem=0,this.focusPrevious(),fn.zB.stop(Ie,!0))})),this._register((0,fn.nm)(this.domNode,fn.tw.MOUSE_OUT,Ie=>{let st=Ie.relatedTarget;(0,fn.jg)(st,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),Ie.stopPropagation())})),this._register((0,fn.nm)(this.actionsList,fn.tw.MOUSE_OVER,Ie=>{let st=Ie.target;if(!(!st||!(0,fn.jg)(st,this.actionsList)||st===this.actionsList)){for(;st.parentElement!==this.actionsList&&st.parentElement!==null;)st=st.parentElement;if(st.classList.contains("action-item")){const yt=this.focusedItem;this.setFocusedItem(st),yt!==this.focusedItem&&this.updateFocus()}}})),this._register(Vc.o.addTarget(this.actionsList)),this._register((0,fn.nm)(this.actionsList,Vc.t.Tap,Ie=>{let st=Ie.initialTarget;if(!(!st||!(0,fn.jg)(st,this.actionsList)||st===this.actionsList)){for(;st.parentElement!==this.actionsList&&st.parentElement!==null;)st=st.parentElement;if(st.classList.contains("action-item")){const yt=this.focusedItem;this.setFocusedItem(st),yt!==this.focusedItem&&this.updateFocus()}}}));let he={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new va.s$($,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const _e=this.scrollableElement.getDomNode();_e.style.position="",this._register((0,fn.nm)($,Vc.t.Change,Ie=>{fn.zB.stop(Ie,!0);const st=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:st-Ie.translationY})})),this._register((0,fn.nm)(_e,fn.tw.MOUSE_UP,Ie=>{Ie.preventDefault()})),$.style.maxHeight=`${Math.max(10,window.innerHeight-s.getBoundingClientRect().top-35)}px`,u=u.filter(Ie=>{var st;return((st=y.submenuIds)===null||st===void 0?void 0:st.has(Ie.id))?(console.warn(`Found submenu cycle: ${Ie.id}`),!1):!0}),this.push(u,{icon:!0,label:!0,isMenu:!0}),s.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(Ie=>!(Ie instanceof Dc)).forEach((Ie,st,yt)=>{Ie.updatePositionInSet(st+1,yt.length)})}initializeOrUpdateStyleSheet(s,u){this.styleSheet||((0,fn.OO)(s)?this.styleSheet=(0,fn.dS)(s):(ca.globalStyleSheet||(ca.globalStyleSheet=(0,fn.dS)()),this.styleSheet=ca.globalStyleSheet)),this.styleSheet.textContent=zd(u,(0,fn.OO)(s))}style(s){const u=this.getContainer();this.initializeOrUpdateStyleSheet(u,s);const y=s.foregroundColor?`${s.foregroundColor}`:"",$=s.backgroundColor?`${s.backgroundColor}`:"",he=s.borderColor?`1px solid ${s.borderColor}`:"",_e=s.shadowColor?`0 2px 4px ${s.shadowColor}`:"";u.style.border=he,this.domNode.style.color=y,this.domNode.style.backgroundColor=$,u.style.boxShadow=_e,this.viewItems&&this.viewItems.forEach(Ie=>{(Ie instanceof Uc||Ie instanceof Dc)&&Ie.style(s)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(s){const u=this.focusedItem;this.setFocusedItem(s),u!==this.focusedItem&&this.updateFocus()}setFocusedItem(s){for(let u=0;u<this.actionsList.children.length;u++){let y=this.actionsList.children[u];if(s===y){this.focusedItem=u;break}}}updateFocus(s){super.updateFocus(s,!0,!0),typeof this.focusedItem!="undefined"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(s,u,y){if(s instanceof ps.Z0)return new Dc(u.context,s,{icon:!0});if(s instanceof ps.wY){const $=new zc(s,s.actions,y,Object.assign(Object.assign({},u),{submenuIds:new Set([...u.submenuIds||[],s.id])}));if(u.enableMnemonics){const he=$.getMnemonic();if(he&&$.isEnabled()){let _e=[];this.mnemonics.has(he)&&(_e=this.mnemonics.get(he)),_e.push($),this.mnemonics.set(he,_e)}}return $}else{const $={enableMnemonics:u.enableMnemonics,useEventAsContext:u.useEventAsContext};if(u.getKeyBinding){const _e=u.getKeyBinding(s);if(_e){const Ie=_e.getLabel();Ie&&($.keybinding=Ie)}}const he=new Uc(u.context,s,$);if(u.enableMnemonics){const _e=he.getMnemonic();if(_e&&he.isEnabled()){let Ie=[];this.mnemonics.has(_e)&&(Ie=this.mnemonics.get(_e)),Ie.push(he),this.mnemonics.set(_e,Ie)}}return he}}}class Uc extends Bu.Y{constructor(s,u,y={}){if(y.isMenu=!0,super(u,u,y),this.options=y,this.options.icon=y.icon!==void 0?y.icon:!1,this.options.label=y.label!==void 0?y.label:!0,this.cssClass="",this.options.label&&y.enableMnemonics){let $=this.getAction().label;if($){let he=wl.exec($);he&&(this.mnemonic=(he[1]?he[1]:he[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Ye.pY(()=>{!this.element||(this._register((0,fn.nm)(this.element,fn.tw.MOUSE_UP,$=>{if(fn.zB.stop($,!0),Wc.isFirefox){if(new Lc.n($).rightButton)return;this.onClick($)}else setTimeout(()=>{this.onClick($)},0)})),this._register((0,fn.nm)(this.element,fn.tw.CONTEXT_MENU,$=>{fn.zB.stop($,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(s){super.render(s),!!this.element&&(this.container=s,this.item=(0,fn.R3)(this.element,(0,fn.$)("a.action-menu-item")),this._action.id===ps.Z0.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=(0,fn.R3)(this.item,(0,fn.$)("span.menu-item-check"+xr.lA.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=(0,fn.R3)(this.item,(0,fn.$)("span.action-label")),this.options.label&&this.options.keybinding&&((0,fn.R3)(this.item,(0,fn.$)("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(s,u){this.item&&(this.item.setAttribute("aria-posinset",`${s}`),this.item.setAttribute("aria-setsize",`${u}`))}updateLabel(){if(!!this.label&&this.options.label){(0,fn.PO)(this.label);let s=(0,yl.x$)(this.getAction().label);if(s){const u=Pl(s);this.options.enableMnemonics||(s=u),this.label.setAttribute("aria-label",u.replace(/&&/g,"&"));const y=wl.exec(s);if(y){s=Je.YU(s),du.lastIndex=0;let $=du.exec(s);for(;$&&$[1];)$=du.exec(s);const he=_e=>_e.replace(/&amp;&amp;/g,"&amp;");$?this.label.append(Je.j3(he(s.substr(0,$.index))," "),(0,fn.$)("u",{"aria-hidden":"true"},$[3]),Je.oL(he(s.substr($.index+$[0].length))," ")):this.label.innerText=he(s).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(y[1]?y[1]:y[3]).toLocaleLowerCase())}else this.label.innerText=s.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const s=this.getAction().checked;this.item.classList.toggle("checked",!!s),s!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",s?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const s=this.element&&this.element.classList.contains("focused"),u=s&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,y=s&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,$=s&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=u?u.toString():"",this.item.style.backgroundColor=y?y.toString():""),this.check&&(this.check.style.color=u?u.toString():""),this.container&&(this.container.style.border=$)}style(s){this.menuStyle=s,this.applyStyle()}}class zc extends Uc{constructor(s,u,y,$){super(s,s,$);this.submenuActions=u,this.parentData=y,this.submenuOptions=$,this.mysubmenu=null,this.submenuDisposables=this._register(new Q.SL),this.mouseOver=!1,this.expandDirection=$&&$.expandDirection!==void 0?$.expandDirection:ya.Right,this.showScheduler=new Ye.pY(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Ye.pY(()=>{this.element&&!(0,fn.jg)((0,fn.vY)(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(s){super.render(s),!!this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=(0,fn.R3)(this.item,(0,fn.$)("span.submenu-indicator"+xr.lA.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register((0,fn.nm)(this.element,fn.tw.KEY_UP,u=>{let y=new la.y(u);(y.equals(17)||y.equals(3))&&(fn.zB.stop(u,!0),this.createSubmenu(!0))})),this._register((0,fn.nm)(this.element,fn.tw.KEY_DOWN,u=>{let y=new la.y(u);(0,fn.vY)()===this.item&&(y.equals(17)||y.equals(3))&&fn.zB.stop(u,!0)})),this._register((0,fn.nm)(this.element,fn.tw.MOUSE_OVER,u=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register((0,fn.nm)(this.element,fn.tw.MOUSE_LEAVE,u=>{this.mouseOver=!1})),this._register((0,fn.nm)(this.element,fn.tw.FOCUS_OUT,u=>{this.element&&!(0,fn.jg)((0,fn.vY)(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(s){fn.zB.stop(s,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(s){if(this.parentData.submenu&&(s||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(u){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(s,u,y,$){const he={top:0,left:0};return he.left=$e(s.width,u.width,{position:$===ya.Right?0:1,offset:y.left,size:y.width}),he.left>=y.left&&he.left<y.left+y.width&&(y.left+10+u.width<=s.width&&(he.left=y.left+10),y.top+=10,y.height=0),he.top=$e(s.height,u.height,{position:0,offset:y.top,size:0}),he.top+u.height===y.top&&he.top+y.height+u.height<=s.height&&(he.top+=y.height),he}createSubmenu(s=!0){if(!!this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=(0,fn.R3)(this.element,(0,fn.$)("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const u=getComputedStyle(this.parentData.parent.domNode),y=parseFloat(u.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new ca(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new ps.eZ],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const $=this.element.getBoundingClientRect(),he={top:$.top-y,left:$.left,height:$.height+2*y,width:$.width},_e=this.submenuContainer.getBoundingClientRect(),{top:Ie,left:st}=this.calculateSubmenuMenuLayout(new fn.Ro(window.innerWidth,window.innerHeight),fn.Ro.lift(_e),he,this.expandDirection);this.submenuContainer.style.left=`${st-_e.left}px`,this.submenuContainer.style.top=`${Ie-_e.top}px`,this.submenuDisposables.add((0,fn.nm)(this.submenuContainer,fn.tw.KEY_UP,yt=>{new la.y(yt).equals(15)&&(fn.zB.stop(yt,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add((0,fn.nm)(this.submenuContainer,fn.tw.KEY_DOWN,yt=>{new la.y(yt).equals(15)&&fn.zB.stop(yt,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(s),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(s){var u;this.item&&((u=this.item)===null||u===void 0||u.setAttribute("aria-expanded",s))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const u=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=u?`${u}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class Dc extends Bu.g{style(s){this.label&&(this.label.style.borderBottomColor=s.separatorColor?`${s.separatorColor}`:"")}}function Pl(P){const s=wl,u=s.exec(P);if(!u)return P;const y=!u[1];return P.replace(s,y?"$2$3":"").trim()}function zd(P,s){let u=`
.monaco-menu {
	font-size: 13px;

}

${(0,Sh.a)(xr.lA.menuSelection)}
${(0,Sh.a)(xr.lA.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(s){u+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const y=P.scrollbarShadow;y&&(u+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${y} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${y} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${y} 6px 6px 6px -6px inset;
				}
			`);const $=P.scrollbarSliderBackground;$&&(u+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${$};
				}
			`);const he=P.scrollbarSliderHoverBackground;he&&(u+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${he};
				}
			`);const _e=P.scrollbarSliderActiveBackground;_e&&(u+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${_e};
				}
			`)}return u}var Ol=a(88810);class pd{constructor(s,u,y,$,he){this.contextViewService=s,this.telemetryService=u,this.notificationService=y,this.keybindingService=$,this.themeService=he,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(s){this.options=s}showContextMenu(s){const u=s.getActions();if(!u.length)return;this.focusToReturn=document.activeElement;let y,$=(0,fn.Re)(s.domForShadowRoot)?s.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>s.getAnchor(),canRelayout:!1,anchorAlignment:s.anchorAlignment,anchorAxisAlignment:s.anchorAxisAlignment,render:he=>{let _e=s.getMenuClassName?s.getMenuClassName():"";_e&&(he.className+=" "+_e),this.options.blockMouse&&(this.block=he.appendChild((0,fn.$)(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(0,fn.nm)(this.block,fn.tw.MOUSE_DOWN,yt=>yt.stopPropagation()));const Ie=new Q.SL,st=s.actionRunner||new ps.Wi;return st.onBeforeRun(this.onActionRun,this,Ie),st.onDidRun(this.onDidActionRun,this,Ie),y=new ca(he,u,{actionViewItemProvider:s.getActionViewItem,context:s.getActionsContext?s.getActionsContext():null,actionRunner:st,getKeyBinding:s.getKeyBinding?s.getKeyBinding:yt=>this.keybindingService.lookupKeybinding(yt.id)}),Ie.add((0,Ol.tj)(y,this.themeService)),y.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,Ie),y.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,Ie),Ie.add((0,fn.nm)(window,fn.tw.BLUR,()=>this.contextViewService.hideContextView(!0))),Ie.add((0,fn.nm)(window,fn.tw.MOUSE_DOWN,yt=>{if(yt.defaultPrevented)return;let wt=new Lc.n(yt),Xt=wt.target;if(!wt.rightButton){for(;Xt;){if(Xt===he)return;Xt=Xt.parentElement}this.contextViewService.hideContextView(!0)}})),(0,Q.F8)(Ie,y)},focus:()=>{y&&y.focus(!!s.autoSelectFirstItem)},onHide:he=>{s.onHide&&s.onHide(!!he),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},$,!!$)}onActionRun(s){this.telemetryService.publicLog2("workbenchActionExecuted",{id:s.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(s){s.error&&!(0,dt.n2)(s.error)&&this.notificationService.error(s.error)}}var Hd=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},Ya=function(P,s){return function(u,y){s(u,y,P)}};let ua=class extends Q.JT{constructor(s,u,y,$,he){super();this._onDidShowContextMenu=new z.Q5,this._onDidHideContextMenu=new z.Q5,this.contextMenuHandler=new pd(y,s,u,$,he)}configure(s){this.contextMenuHandler.configure(s)}showContextMenu(s){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},s),{onHide:u=>{s.onHide&&s.onHide(u),this._onDidHideContextMenu.fire()}})),fn._q.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};ua=Hd([Ya(0,Ut.b),Ya(1,sa.lT),Ya(2,ml.u),Ya(3,Ql.d),Ya(4,ns.XE)],ua);var ql=a(91741),Wu=a(23897),Vu;(function(P){P[P.API=0]="API",P[P.USER=1]="USER"})(Vu||(Vu={}));var hu=a(50988),Gd=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},vd=function(P,s){return function(u,y){s(u,y,P)}},rl=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};let Hc=class{constructor(s){this._commandService=s}open(s,u){return rl(this,void 0,void 0,function*(){if(!(0,hu.xn)(s,ra.lg.command))return!1;if(!(u==null?void 0:u.allowCommands))return!0;typeof s=="string"&&(s=S.o.parse(s));let y=[];try{y=(0,Wu.Q)(decodeURIComponent(s.query))}catch($){try{y=(0,Wu.Q)(s.query)}catch(he){}}return Array.isArray(y)||(y=[y]),yield this._commandService.executeCommand(s.path,...y),!0})}};Hc=Gd([vd(0,Ia.Hy)],Hc);let Eh=class{constructor(s){this._editorService=s}open(s,u){return rl(this,void 0,void 0,function*(){typeof s=="string"&&(s=S.o.parse(s));const{selection:y,uri:$}=(0,hu.xI)(s);return s=$,s.scheme===ra.lg.file&&(s=(0,lu.AH)(s)),yield this._editorService.openCodeEditor({resource:s,options:Object.assign({selection:y,source:(u==null?void 0:u.fromUserGesture)?Vu.USER:Vu.API},u==null?void 0:u.editorOptions)},this._editorService.getFocusedCodeEditor(),u==null?void 0:u.openToSide),!0})}};Eh=Gd([vd(0,Fe.$)],Eh);let Lh=class{constructor(s,u){this._openers=new ql.S,this._validators=new ql.S,this._resolvers=new ql.S,this._resolvedUriTargets=new Vs.Y9(y=>y.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new ql.S,this._defaultExternalOpener={openExternal:y=>rl(this,void 0,void 0,function*(){return(0,hu.Gs)(y,ra.lg.http,ra.lg.https)?fn.V3(y):window.location.href=y,!0})},this._openers.push({open:(y,$)=>rl(this,void 0,void 0,function*(){return($==null?void 0:$.openExternal)||(0,hu.Gs)(y,ra.lg.mailto,ra.lg.http,ra.lg.https,ra.lg.vsls)?(yield this._doOpenExternal(y,$),!0):!1})}),this._openers.push(new Hc(u)),this._openers.push(new Eh(s))}registerOpener(s){return{dispose:this._openers.unshift(s)}}registerValidator(s){return{dispose:this._validators.push(s)}}registerExternalUriResolver(s){return{dispose:this._resolvers.push(s)}}setDefaultExternalOpener(s){this._defaultExternalOpener=s}registerExternalOpener(s){return{dispose:this._externalOpeners.push(s)}}open(s,u){var y;return rl(this,void 0,void 0,function*(){const $=typeof s=="string"?S.o.parse(s):s,he=(y=this._resolvedUriTargets.get($))!==null&&y!==void 0?y:s;for(const _e of this._validators)if(!(yield _e.shouldOpen(he)))return!1;for(const _e of this._openers)if(yield _e.open(s,u))return!0;return!1})}resolveExternalUri(s,u){return rl(this,void 0,void 0,function*(){for(const y of this._resolvers)try{const $=yield y.resolveExternalUri(s,u);if($)return this._resolvedUriTargets.has($.resolved)||this._resolvedUriTargets.set($.resolved,s),$}catch($){}throw new Error("Could not resolve external URI: "+s.toString())})}_doOpenExternal(s,u){return rl(this,void 0,void 0,function*(){const y=typeof s=="string"?S.o.parse(s):s;let $;try{$=(yield this.resolveExternalUri(y,u)).resolved}catch(_e){$=y}let he;if(typeof s=="string"&&y.toString()===$.toString()?he=s:he=encodeURI($.toString(!0)),u==null?void 0:u.allowContributedOpeners){const _e=typeof(u==null?void 0:u.allowContributedOpeners)=="string"?u==null?void 0:u.allowContributedOpeners:void 0;for(const Ie of this._externalOpeners)if(yield Ie.openExternal(he,{sourceUri:y,preferredOpenerId:_e},d.T.None))return!0}return this._defaultExternalOpener.openExternal(he,{sourceUri:y},d.T.None)})}dispose(){this._validators.clear()}};Lh=Gd([vd(0,Fe.$),vd(1,Ia.Hy)],Lh);var Qa=a(98674),of=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},sf=function(P,s){return function(u,y){s(u,y,P)}};class tg extends Q.JT{constructor(s){super();this.model=s,this._markersData=new Map,this._register((0,Q.OF)(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(s,u){const y=[...this._markersData.keys()];this._markersData.clear();const $=this.model.deltaDecorations(y,u);for(let he=0;he<$.length;he++)this._markersData.set($[he],s[he]);return y.length!==0||$.length!==0}getMarker(s){return this._markersData.get(s.id)}}let Dh=class extends Q.JT{constructor(s,u){super();this._markerService=u,this._onDidChangeMarker=this._register(new z.Q5),this._markerDecorations=new Vs.Y9,s.getModels().forEach(y=>this._onModelAdded(y)),this._register(s.onModelAdded(this._onModelAdded,this)),this._register(s.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(s=>s.dispose()),this._markerDecorations.clear()}getMarker(s,u){const y=this._markerDecorations.get(s);return y&&y.getMarker(u)||null}_handleMarkerChange(s){s.forEach(u=>{const y=this._markerDecorations.get(u);y&&this._updateDecorations(y)})}_onModelAdded(s){const u=new tg(s);this._markerDecorations.set(s.uri,u),this._updateDecorations(u)}_onModelRemoved(s){const u=this._markerDecorations.get(s.uri);u&&(u.dispose(),this._markerDecorations.delete(s.uri)),(s.uri.scheme===ra.lg.inMemory||s.uri.scheme===ra.lg.internal||s.uri.scheme===ra.lg.vscode)&&this._markerService&&this._markerService.read({resource:s.uri}).map(y=>y.owner).forEach(y=>this._markerService.remove(y,[s.uri]))}_updateDecorations(s){const u=this._markerService.read({resource:s.model.uri,take:500}),y=u.map($=>({range:this._createDecorationRange(s.model,$),options:this._createDecorationOption($)}));s.update(u,y)&&this._onDidChangeMarker.fire(s.model)}_createDecorationRange(s,u){let y=T.e.lift(u);if(u.severity===Qa.ZL.Hint&&!this._hasMarkerTag(u,1)&&!this._hasMarkerTag(u,2)&&(y=y.setEndPosition(y.startLineNumber,y.startColumn+2)),y=s.validateRange(y),y.isEmpty()){const $=s.getLineLastNonWhitespaceColumn(y.startLineNumber)||s.getLineMaxColumn(y.startLineNumber);if($===1||y.endColumn>=$)return y;const he=s.getWordAtPosition(y.getStartPosition());he&&(y=new T.e(y.startLineNumber,he.startColumn,y.endLineNumber,he.endColumn))}else if(u.endColumn===Number.MAX_VALUE&&u.startColumn===1&&y.startLineNumber===y.endLineNumber){let $=s.getLineFirstNonWhitespaceColumn(u.startLineNumber);$<y.endColumn&&(y=new T.e(y.startLineNumber,$,y.endLineNumber,y.endColumn),u.startColumn=$)}return y}_createDecorationOption(s){let u,y,$,he,_e;switch(s.severity){case Qa.ZL.Hint:this._hasMarkerTag(s,2)?u=void 0:this._hasMarkerTag(s,1)?u="squiggly-unnecessary":u="squiggly-hint",$=0;break;case Qa.ZL.Warning:u="squiggly-warning",y=(0,ns.EN)(Ss.Re),$=20,_e={color:(0,ns.EN)(gr.Ivo),position:_t.F5.Inline};break;case Qa.ZL.Info:u="squiggly-info",y=(0,ns.EN)(Ss.eS),$=10;break;case Qa.ZL.Error:default:u="squiggly-error",y=(0,ns.EN)(Ss.lK),$=30,_e={color:(0,ns.EN)(gr.Gj_),position:_t.F5.Inline};break}return s.tags&&(s.tags.indexOf(1)!==-1&&(he="squiggly-inline-unnecessary"),s.tags.indexOf(2)!==-1&&(he="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:u,showIfCollapsed:!0,overviewRuler:{color:y,position:_t.sh.Right},minimap:_e,zIndex:$,inlineClassName:he}}_hasMarkerTag(s,u){return s.tags?s.tags.indexOf(u)>=0:!1}};Dh=of([sf(0,Ue.q),sf(1,Qa.lT)],Dh);var fu=a(36357),_d=a(51200),ec=a(31106),af=a(56811),Gc=a(41264);const ng={buttonBackground:Gc.Il.fromHex("#0E639C"),buttonHoverBackground:Gc.Il.fromHex("#006BB3"),buttonForeground:Gc.Il.white};class lf extends Q.JT{constructor(s,u){super();this._onDidClick=this._register(new z.Q5),this.options=u||Object.create(null),(0,ie.jB)(this.options,ng,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),s.appendChild(this._element),this._register(Vc.o.addTarget(this._element)),[fn.tw.CLICK,Vc.t.Tap].forEach(y=>{this._register((0,fn.nm)(this._element,y,$=>{if(!this.enabled){fn.zB.stop($);return}this._onDidClick.fire($)}))}),this._register((0,fn.nm)(this._element,fn.tw.KEY_DOWN,y=>{const $=new la.y(y);let he=!1;this.enabled&&($.equals(3)||$.equals(10))?(this._onDidClick.fire(y),he=!0):$.equals(9)&&(this._element.blur(),he=!0),he&&fn.zB.stop($,!0)})),this._register((0,fn.nm)(this._element,fn.tw.MOUSE_OVER,y=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register((0,fn.nm)(this._element,fn.tw.MOUSE_OUT,y=>{this.applyStyles()})),this.focusTracker=this._register((0,fn.go)(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let s;this.options.secondary?s=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:s=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,s&&(this._element.style.backgroundColor=s)}style(s){this.buttonForeground=s.buttonForeground,this.buttonBackground=s.buttonBackground,this.buttonHoverBackground=s.buttonHoverBackground,this.buttonSecondaryForeground=s.buttonSecondaryForeground,this.buttonSecondaryBackground=s.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=s.buttonSecondaryHoverBackground,this.buttonBorder=s.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let s,u;this.options.secondary?(u=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",s=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(u=this.buttonForeground?this.buttonForeground.toString():"",s=this.buttonBackground?this.buttonBackground.toString():"");const y=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=u,this._element.style.backgroundColor=s,this._element.style.borderWidth=y?"1px":"",this._element.style.borderStyle=y?"solid":"",this._element.style.borderColor=y}}get element(){return this._element}set label(s){this._element.classList.add("monaco-text-button"),this.options.supportIcons?(0,fn.mc)(this._element,...(0,af.T)(s)):this._element.textContent=s,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=s)}set enabled(s){s?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}var jd=a(67488);const Cd="done",bd="active",kl="infinite",Uu="infinite-long-running",yd="discrete",Kd={progressBarBackground:Gc.Il.fromHex("#0E70C0")};class tc extends Q.JT{constructor(s,u){super();this.options=u||Object.create(null),(0,ie.jB)(this.options,Kd,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new Ye.pY(()=>(0,fn.$Z)(this.element),0)),this.longRunningScheduler=this._register(new Ye.pY(()=>this.infiniteLongRunning(),tc.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(s)}create(s){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),s.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(bd,kl,Uu,yd),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(s){return this.element.classList.add(Cd),this.element.classList.contains(kl)?(this.bit.style.opacity="0",s?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",s?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(yd,Cd,Uu),this.element.classList.add(bd,kl),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(Uu)}getContainer(){return this.element}style(s){this.progressBarBackground=s.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const s=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=s}}}tc.LONG_RUNNING_INFINITE_THRESHOLD=1e4;var xh=a(44742);const zu={},$d=new xh.R("quick-input-button-icon-");function Hu(P){if(!P)return;let s;const u=P.dark.toString();return zu[u]?s=zu[u]:(s=$d.nextId(),fn.fk(`.${s}`,`background-image: ${fn.wY(P.light||P.dark)}`),fn.fk(`.vs-dark .${s}, .hc-black .${s}`,`background-image: ${fn.wY(P.dark)}`),zu[u]=s),s}var da=a(67746),jc=a(77927);const wd=fn.$;class nc extends Q.JT{constructor(s){super();this.parent=s,this.onKeyDown=u=>fn.nm(this.inputBox.inputElement,fn.tw.KEY_DOWN,y=>{u(new la.y(y))}),this.onMouseDown=u=>fn.nm(this.inputBox.inputElement,fn.tw.MOUSE_DOWN,y=>{u(new Lc.n(y))}),this.onDidChange=u=>this.inputBox.onDidChange(u),this.container=fn.R3(this.parent,wd(".quick-input-box")),this.inputBox=this._register(new jc.W(this.container,void 0))}get value(){return this.inputBox.value}set value(s){this.inputBox.value=s}select(s=null){this.inputBox.select(s)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(s){this.inputBox.setPlaceHolder(s)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(s){this.inputBox.setAriaLabel(s)}get password(){return this.inputBox.inputElement.type==="password"}set password(s){this.inputBox.inputElement.type=s?"password":"text"}setAttribute(s,u){this.inputBox.inputElement.setAttribute(s,u)}removeAttribute(s){this.inputBox.inputElement.removeAttribute(s)}showDecoration(s){s===xa.Z.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:s===xa.Z.Info?1:s===xa.Z.Warning?2:3,content:""})}stylesForType(s){return this.inputBox.stylesForType(s===xa.Z.Info?1:s===xa.Z.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(s){this.inputBox.style(s)}}var Fl=a(48801);const gu=fn.$;class ic{constructor(s,u,y){this.os=u,this.keyElements=new Set,this.options=y||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=fn.R3(s,gu(".monaco-keybinding")),this.didEverRender=!1,s.appendChild(this.domNode)}get element(){return this.domNode}set(s,u){this.didEverRender&&this.keybinding===s&&ic.areSame(this.matches,u)||(this.keybinding=s,this.matches=u,this.render())}render(){if(this.clear(),this.keybinding){let[s,u]=this.keybinding.getParts();s&&this.renderPart(this.domNode,s,this.matches?this.matches.firstPart:null),u&&(fn.R3(this.domNode,gu("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,u,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){fn.PO(this.domNode),this.keyElements.clear()}renderPart(s,u,y){const $=yc.xo.modifierLabels[this.os];u.ctrlKey&&this.renderKey(s,$.ctrlKey,Boolean(y==null?void 0:y.ctrlKey),$.separator),u.shiftKey&&this.renderKey(s,$.shiftKey,Boolean(y==null?void 0:y.shiftKey),$.separator),u.altKey&&this.renderKey(s,$.altKey,Boolean(y==null?void 0:y.altKey),$.separator),u.metaKey&&this.renderKey(s,$.metaKey,Boolean(y==null?void 0:y.metaKey),$.separator);const he=u.keyLabel;he&&this.renderKey(s,he,Boolean(y==null?void 0:y.keyCode),"")}renderKey(s,u,y,$){fn.R3(s,this.createKeyElement(u,y?".highlight":"")),$&&fn.R3(s,gu("span.monaco-keybinding-key-separator",void 0,$))}renderUnbound(s){fn.R3(s,this.createKeyElement((0,Un.N)("unbound","Unbound")))}createKeyElement(s,u=""){const y=gu("span.monaco-keybinding-key"+u,void 0,s);return this.keyElements.add(y),y}style(s){this.labelBackground=s.keybindingLabelBackground,this.labelForeground=s.keybindingLabelForeground,this.labelBorder=s.keybindingLabelBorder,this.labelBottomBorder=s.keybindingLabelBottomBorder,this.labelShadow=s.keybindingLabelShadow,this.applyStyles()}applyStyles(){var s;if(this.element){for(const u of this.keyElements)this.labelBackground&&(u.style.backgroundColor=(s=this.labelBackground)===null||s===void 0?void 0:s.toString()),this.labelBorder&&(u.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(u.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(u.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(s,u){return s===u||!s&&!u?!0:!!s&&!!u&&(0,ie.fS)(s.firstPart,u.firstPart)&&(0,ie.fS)(s.chordPart,u.chordPart)}}const Bl=new Ye.Ue(()=>{const P=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:P,collatorIsNumeric:P.resolvedOptions().numeric}}),ig=new Ye.Ue(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),Sd=new Ye.Ue(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function Ed(P,s,u=!1){const y=P||"",$=s||"",he=Bl.value.collator.compare(y,$);return Bl.value.collatorIsNumeric&&he===0&&y!==$?y<$?-1:1:he}function rg(P,s,u){const y=P.toLowerCase(),$=s.toLowerCase(),he=Wl(P,s,u);if(he)return he;const _e=y.endsWith(u),Ie=$.endsWith(u);if(_e!==Ie)return _e?-1:1;const st=Ed(y,$);return st!==0?st:y.localeCompare($)}function Wl(P,s,u){const y=P.toLowerCase(),$=s.toLowerCase(),he=y.startsWith(u),_e=$.startsWith(u);if(he!==_e)return he?-1:1;if(he&&_e){if(y.length<$.length)return-1;if(y.length>$.length)return 1}return 0}var rc=a(49898),Zd=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},cf=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};const Vl=fn.$;class Gu{constructor(s){this.hidden=!1,this._onChecked=new z.Q5,this.onChecked=this._onChecked.event,Object.assign(this,s)}get checked(){return!!this._checked}set checked(s){s!==this._checked&&(this._checked=s,this._onChecked.fire(s))}dispose(){this._onChecked.dispose()}}class Ms{get templateId(){return Ms.ID}renderTemplate(s){const u=Object.create(null);u.toDisposeElement=[],u.toDisposeTemplate=[],u.entry=fn.R3(s,Vl(".quick-input-list-entry"));const y=fn.R3(u.entry,Vl("label.quick-input-list-label"));u.toDisposeTemplate.push(fn.mu(y,fn.tw.CLICK,yt=>{u.checkbox.offsetParent||yt.preventDefault()})),u.checkbox=fn.R3(y,Vl("input.quick-input-list-checkbox")),u.checkbox.type="checkbox",u.toDisposeTemplate.push(fn.mu(u.checkbox,fn.tw.CHANGE,yt=>{u.element.checked=u.checkbox.checked}));const $=fn.R3(y,Vl(".quick-input-list-rows")),he=fn.R3($,Vl(".quick-input-list-row")),_e=fn.R3($,Vl(".quick-input-list-row"));u.label=new Fl.g(he,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const Ie=fn.R3(he,Vl(".quick-input-list-entry-keybinding"));u.keybinding=new ic(Ie,Re.OS);const st=fn.R3(_e,Vl(".quick-input-list-label-meta"));return u.detail=new Fl.g(st,{supportHighlights:!0,supportIcons:!0}),u.separator=fn.R3(u.entry,Vl(".quick-input-list-separator")),u.actionBar=new ss.o(u.entry),u.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),u.toDisposeTemplate.push(u.actionBar),u}renderElement(s,u,y){y.toDisposeElement=(0,Q.B9)(y.toDisposeElement),y.element=s,y.checkbox.checked=s.checked,y.toDisposeElement.push(s.onChecked(yt=>y.checkbox.checked=yt));const{labelHighlights:$,descriptionHighlights:he,detailHighlights:_e}=s,Ie=Object.create(null);Ie.matches=$||[],Ie.descriptionTitle=s.saneDescription,Ie.descriptionMatches=he||[],Ie.extraClasses=s.item.iconClasses,Ie.italic=s.item.italic,Ie.strikethrough=s.item.strikethrough,y.label.setLabel(s.saneLabel,s.saneDescription,Ie),y.keybinding.set(s.item.keybinding),s.saneDetail&&y.detail.setLabel(s.saneDetail,void 0,{matches:_e,title:s.saneDetail}),s.separator&&s.separator.label?(y.separator.textContent=s.separator.label,y.separator.style.display=""):y.separator.style.display="none",y.entry.classList.toggle("quick-input-list-separator-border",!!s.separator),y.actionBar.clear();const st=s.item.buttons;st&&st.length?(y.actionBar.push(st.map((yt,wt)=>{let Xt=yt.iconClass||(yt.iconPath?Hu(yt.iconPath):void 0);yt.alwaysVisible&&(Xt=Xt?`${Xt} always-visible`:"always-visible");const Rn=new ps.aU(`id-${wt}`,"",Xt,!0,()=>cf(this,void 0,void 0,function*(){s.fireButtonTriggered({button:yt,item:s.item})}));return Rn.tooltip=yt.tooltip||"",Rn}),{icon:!0,label:!1}),y.entry.classList.add("has-actions")):y.entry.classList.remove("has-actions")}disposeElement(s,u,y){y.toDisposeElement=(0,Q.B9)(y.toDisposeElement)}disposeTemplate(s){s.toDisposeElement=(0,Q.B9)(s.toDisposeElement),s.toDisposeTemplate=(0,Q.B9)(s.toDisposeTemplate)}}Ms.ID="listelement";class og{getHeight(s){return s.saneDetail?44:22}getTemplateId(s){return Ms.ID}}var Yo;(function(P){P[P.First=1]="First",P[P.Second=2]="Second",P[P.Last=3]="Last",P[P.Next=4]="Next",P[P.Previous=5]="Previous",P[P.NextPage=6]="NextPage",P[P.PreviousPage=7]="PreviousPage"})(Yo||(Yo={}));class Xd{constructor(s,u,y){this.parent=s,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new z.Q5,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new z.Q5,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new z.Q5,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new z.Q5,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new z.Q5,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new z.Q5,this.onKeyDown=this._onKeyDown.event,this._onLeave=new z.Q5,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=u,this.container=fn.R3(this.parent,Vl(".quick-input-list"));const $=new og,he=new oc;this.list=y.createList("QuickInput",this.container,$,[new Ms],{identityProvider:{getId:_e=>_e.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:he}),this.list.getHTMLElement().id=u,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(_e=>{const Ie=new la.y(_e);switch(Ie.keyCode){case 10:this.toggleCheckbox();break;case 31:(Re.dz?_e.metaKey:_e.ctrlKey)&&this.list.setFocus((0,tn.w6)(this.list.length));break;case 16:{const st=this.list.getFocus();st.length===1&&st[0]===0&&this._onLeave.fire();break}case 18:{const st=this.list.getFocus();st.length===1&&st[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(Ie)})),this.disposables.push(this.list.onMouseDown(_e=>{_e.browserEvent.button!==2&&_e.browserEvent.preventDefault()})),this.disposables.push(fn.nm(this.container,fn.tw.CLICK,_e=>{(_e.x||_e.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(_e=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(_e=>{typeof _e.index=="number"&&(_e.browserEvent.preventDefault(),this.list.setSelection([_e.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return z.ju.map(this.list.onDidChangeFocus,s=>s.elements.map(u=>u.item))}get onDidChangeSelection(){return z.ju.map(this.list.onDidChangeSelection,s=>({items:s.elements.map(u=>u.item),event:s.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(s){this.list.scrollTop=s}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(s,u=!0){for(let y=0,$=s.length;y<$;y++){const he=s[y];if(!he.hidden)if(he.checked)u=!0;else return!1}return u}getCheckedCount(){let s=0;const u=this.elements;for(let y=0,$=u.length;y<$;y++)u[y].checked&&s++;return s}getVisibleCount(){let s=0;const u=this.elements;for(let y=0,$=u.length;y<$;y++)u[y].hidden||s++;return s}setAllVisibleChecked(s){try{this._fireCheckedEvents=!1,this.elements.forEach(u=>{u.hidden||(u.checked=s)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(s){this.elementDisposables=(0,Q.B9)(this.elementDisposables);const u=y=>this.fireButtonTriggered(y);this.inputElements=s,this.elements=s.reduce((y,$,he)=>{var _e,Ie,st;if($.type!=="separator"){const yt=he&&s[he-1],wt=$.label&&$.label.replace(/\r?\n/g," "),Xt=$.meta&&$.meta.replace(/\r?\n/g," "),Rn=$.description&&$.description.replace(/\r?\n/g," "),ui=$.detail&&$.detail.replace(/\r?\n/g," "),Ai=$.ariaLabel||[wt,Rn,ui].map(Cr=>(0,xr.JL)(Cr)).filter(Cr=>!!Cr).join(", "),Gi=this.parent.classList.contains("show-checkboxes");y.push(new Gu({hasCheckbox:Gi,index:he,item:$,saneLabel:wt,saneMeta:Xt,saneAriaLabel:Ai,saneDescription:Rn,saneDetail:ui,labelHighlights:(_e=$.highlights)===null||_e===void 0?void 0:_e.label,descriptionHighlights:(Ie=$.highlights)===null||Ie===void 0?void 0:Ie.description,detailHighlights:(st=$.highlights)===null||st===void 0?void 0:st.detail,checked:!1,separator:yt&&yt.type==="separator"?yt:void 0,fireButtonTriggered:u}))}return y},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(y=>y.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((y,$,he)=>(y.set($.item,he),y),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(s=>s.item)}setFocusedElements(s){if(this.list.setFocus(s.filter(u=>this.elementsToIndexes.has(u)).map(u=>this.elementsToIndexes.get(u))),s.length>0){const u=this.list.getFocus()[0];typeof u=="number"&&this.list.reveal(u)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(s){this.list.setSelection(s.filter(u=>this.elementsToIndexes.has(u)).map(u=>this.elementsToIndexes.get(u)))}getCheckedElements(){return this.elements.filter(s=>s.checked).map(s=>s.item)}setCheckedElements(s){try{this._fireCheckedEvents=!1;const u=new Set;for(const y of s)u.add(y);for(const y of this.elements)y.checked=u.has(y.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(s){this.list.getHTMLElement().style.pointerEvents=s?"":"none"}focus(s){if(!this.list.length)return;switch(s===Yo.Next&&this.list.getFocus()[0]===this.list.length-1&&(s=Yo.First),s===Yo.Previous&&this.list.getFocus()[0]===0&&(s=Yo.Last),s===Yo.Second&&this.list.length<2&&(s=Yo.First),s){case Yo.First:this.list.focusFirst();break;case Yo.Second:this.list.focusNth(1);break;case Yo.Last:this.list.focusLast();break;case Yo.Next:this.list.focusNext();break;case Yo.Previous:this.list.focusPrevious();break;case Yo.NextPage:this.list.focusNextPage();break;case Yo.PreviousPage:this.list.focusPreviousPage();break}const u=this.list.getFocus()[0];typeof u=="number"&&this.list.reveal(u)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(s){this.list.getHTMLElement().style.maxHeight=s?`calc(${Math.floor(s/44)*44}px)`:"",this.list.layout()}filter(s){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(s=s.trim(),!s||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(y=>{y.labelHighlights=void 0,y.descriptionHighlights=void 0,y.detailHighlights=void 0,y.hidden=!1;const $=y.index&&this.inputElements[y.index-1];y.separator=$&&$.type==="separator"?$:void 0});else{let y;this.elements.forEach($=>{const he=this.matchOnLabel?(0,Ve.f6)((0,yl.Gt)(s,(0,yl.Ho)($.saneLabel))):void 0,_e=this.matchOnDescription?(0,Ve.f6)((0,yl.Gt)(s,(0,yl.Ho)($.saneDescription||""))):void 0,Ie=this.matchOnDetail?(0,Ve.f6)((0,yl.Gt)(s,(0,yl.Ho)($.saneDetail||""))):void 0,st=this.matchOnMeta?(0,Ve.f6)((0,yl.Gt)(s,(0,yl.Ho)($.saneMeta||""))):void 0;if(he||_e||Ie||st?($.labelHighlights=he,$.descriptionHighlights=_e,$.detailHighlights=Ie,$.hidden=!1):($.labelHighlights=void 0,$.descriptionHighlights=void 0,$.detailHighlights=void 0,$.hidden=!$.item.alwaysShow),$.separator=void 0,!this.sortByLabel){const yt=$.index&&this.inputElements[$.index-1];y=yt&&yt.type==="separator"?yt:y,y&&!$.hidden&&($.separator=y,y=void 0)}})}const u=this.elements.filter(y=>!y.hidden);if(this.sortByLabel&&s){const y=s.toLowerCase();u.sort(($,he)=>xc($,he,y))}return this.elementsToIndexes=u.reduce((y,$,he)=>(y.set($.item,he),y),new Map),this.list.splice(0,this.list.length,u),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(u.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const s=this.list.getFocusedElements(),u=this.allVisibleChecked(s);for(const y of s)y.checked=!u}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(s){this.container.style.display=s?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=(0,Q.B9)(this.elementDisposables),this.disposables=(0,Q.B9)(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(s){this._onButtonTriggered.fire(s)}style(s){this.list.style(s)}}Zd([rc.H],Xd.prototype,"onDidChangeFocus",null),Zd([rc.H],Xd.prototype,"onDidChangeSelection",null);function xc(P,s,u){const y=P.labelHighlights||[],$=s.labelHighlights||[];return y.length&&!$.length?-1:!y.length&&$.length?1:y.length===0&&$.length===0?0:rg(P.saneLabel,s.saneLabel,u)}class oc{getWidgetAriaLabel(){return(0,Un.N)("quickInput","Quick Input")}getAriaLabel(s){return s.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(s){return s.hasCheckbox?"checkbox":"option"}isChecked(s){if(!!s.hasCheckbox)return{value:s.checked,onDidChange:s.onChecked}}}var As=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};const Wa=fn.$,Ic={iconClass:xr.lA.quickInputBack.classNames,tooltip:(0,Un.N)("quickInput.back","Back"),handle:-1};class sc extends Q.JT{constructor(s){super();this.ui=s,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=sc.noPromptMessage,this._severity=xa.Z.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new z.Q5),this.onDidHideEmitter=this._register(new z.Q5),this.onDisposeEmitter=this._register(new z.Q5),this.visibleDisposables=this._register(new Q.SL),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(s){this._title=s,this.update()}get description(){return this._description}set description(s){this._description=s,this.update()}get step(){return this._steps}set step(s){this._steps=s,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(s){this._totalSteps=s,this.update()}get enabled(){return this._enabled}set enabled(s){this._enabled=s,this.update()}get contextKey(){return this._contextKey}set contextKey(s){this._contextKey=s,this.update()}get busy(){return this._busy}set busy(s){this._busy=s,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(s){const u=this._ignoreFocusOut!==s&&!Re.gn;this._ignoreFocusOut=s&&!Re.gn,u&&this.update()}get buttons(){return this._buttons}set buttons(s){this._buttons=s,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(s){this._validationMessage=s,this.update()}get severity(){return this._severity}set severity(s){this._severity=s,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(s=>{this.buttons.indexOf(s)!==-1&&this.onDidTriggerButtonEmitter.fire(s)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){!this.visible||this.ui.hide()}didHide(s=da.Jq.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:s})}update(){if(!this.visible)return;const s=this.getTitle();s&&this.ui.title.textContent!==s?this.ui.title.textContent=s:!s&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");const u=this.getDescription();if(this.ui.description1.textContent!==u&&(this.ui.description1.textContent=u),this.ui.description2.textContent!==u&&(this.ui.description2.textContent=u),this.busy&&!this.busyDelay&&(this.busyDelay=new Ye._F,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const $=this.buttons.filter(_e=>_e===Ic);this.ui.leftActionBar.push($.map((_e,Ie)=>{const st=new ps.aU(`id-${Ie}`,"",_e.iconClass||Hu(_e.iconPath),!0,()=>As(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(_e)}));return st.tooltip=_e.tooltip||"",st}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const he=this.buttons.filter(_e=>_e!==Ic);this.ui.rightActionBar.push(he.map((_e,Ie)=>{const st=new ps.aU(`id-${Ie}`,"",_e.iconClass||Hu(_e.iconPath),!0,()=>As(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(_e)}));return st.tooltip=_e.tooltip||"",st}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const y=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==y&&(this._lastValidationMessage=y,fn.mc(this.ui.message,...(0,af.T)(y))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,Un.N)("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(s){if(this.ui.inputBox.showDecoration(s),s!==xa.Z.Ignore){const u=this.ui.inputBox.stylesForType(s);this.ui.message.style.color=u.foreground?`${u.foreground}`:"",this.ui.message.style.backgroundColor=u.background?`${u.background}`:"",this.ui.message.style.border=u.border?`1px solid ${u.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}sc.noPromptMessage=(0,Un.N)("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class wa extends sc{constructor(){super(...arguments);this._value="",this.onDidChangeValueEmitter=this._register(new z.Q5),this.onWillAcceptEmitter=this._register(new z.Q5),this.onDidAcceptEmitter=this._register(new z.Q5),this.onDidCustomEmitter=this._register(new z.Q5),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?da.jG.NONE:da.jG.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new z.Q5),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new z.Q5),this.onDidTriggerItemButtonEmitter=this._register(new z.Q5),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=s=>s,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(s){this._quickNavigate=s,this.update()}get value(){return this._value}set value(s){this.doSetValue(s)}doSetValue(s,u){this._value!==s&&(this._value=s,u||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(s){this._ariaLabel=s,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(s){this._placeholder=s,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(s){this.ui.list.scrollTop=s}set items(s){this._items=s,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(s){this._canSelectMany=s,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(s){this._canAcceptInBackground=s}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(s){this._matchOnDescription=s,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(s){this._matchOnDetail=s,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(s){this._matchOnLabel=s,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(s){this._sortByLabel=s,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(s){this._autoFocusOnList=s,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(s){this._keepScrollPosition=s}get itemActivation(){return this._itemActivation}set itemActivation(s){this._itemActivation=s}get activeItems(){return this._activeItems}set activeItems(s){this._activeItems=s,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(s){this._selectedItems=s,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?da.X5:this.ui.keyMods}set valueSelection(s){this._valueSelection=s,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(s){this._customButton=s,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(s){this._customButtonLabel=s,this.update()}get customHover(){return this._customButtonHover}set customHover(s){this._customButtonHover=s,this.update()}get ok(){return this._ok}set ok(s){this._ok=s,this.update()}get hideInput(){return!!this._hideInput}set hideInput(s){this._hideInput=s,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Yo.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(s=>{this.doSetValue(s,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(s=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(s=>{switch(s.keyCode){case 18:this.ui.list.focus(Yo.Next),this.canSelectMany&&this.ui.list.domFocus(),fn.zB.stop(s,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Yo.Previous):this.ui.list.focus(Yo.Last),this.canSelectMany&&this.ui.list.domFocus(),fn.zB.stop(s,!0);break;case 12:this.ui.list.focus(Yo.NextPage),this.canSelectMany&&this.ui.list.domFocus(),fn.zB.stop(s,!0);break;case 11:this.ui.list.focus(Yo.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),fn.zB.stop(s,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(s.ctrlKey||s.metaKey)&&!s.shiftKey&&!s.altKey&&(this.ui.list.focus(Yo.First),fn.zB.stop(s,!0));break;case 13:(s.ctrlKey||s.metaKey)&&!s.shiftKey&&!s.altKey&&(this.ui.list.focus(Yo.Last),fn.zB.stop(s,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(s=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,tn.fS)(s,this._activeItems,(u,y)=>u===y)||(this._activeItems=s,this.onDidChangeActiveEmitter.fire(s))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:s,event:u})=>{if(this.canSelectMany){s.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&(0,tn.fS)(s,this._selectedItems,(y,$)=>y===$)||(this._selectedItems=s,this.onDidChangeSelectionEmitter.fire(s),s.length&&this.handleAccept(u instanceof MouseEvent&&u.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(s=>{!this.canSelectMany||this.selectedItemsToConfirm!==this._selectedItems&&(0,tn.fS)(s,this._selectedItems,(u,y)=>u===y)||(this._selectedItems=s,this.onDidChangeSelectionEmitter.fire(s))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(s=>this.onDidTriggerItemButtonEmitter.fire(s))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(s){let u=!1;this.onWillAcceptEmitter.fire({veto:()=>u=!0}),u||this.onDidAcceptEmitter.fire({inBackground:s})}registerQuickNavigation(){return fn.nm(this.ui.container,fn.tw.KEY_UP,s=>{if(this.canSelectMany||!this._quickNavigate)return;const u=new la.y(s),y=u.keyCode;this._quickNavigate.keybindings.some(_e=>{const[Ie,st]=_e.getParts();return st?!1:Ie.shiftKey&&y===4?!(u.ctrlKey||u.altKey||u.metaKey):!!(Ie.altKey&&y===6||Ie.ctrlKey&&y===5||Ie.metaKey&&y===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const s=this.keepScrollPosition?this.scrollTop:0,u=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",u&&!this.description);const y={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!u,progressBar:!u,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(y),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const $=this.ariaLabel||this.placeholder||wa.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==$&&(this.ui.inputBox.ariaLabel=$),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case da.jG.NONE:this._itemActivation=da.jG.FIRST;break;case da.jG.SECOND:this.ui.list.focus(Yo.Second),this._itemActivation=da.jG.FIRST;break;case da.jG.LAST:this.ui.list.focus(Yo.Last),this._itemActivation=da.jG.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),y.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Yo.First)),this.keepScrollPosition&&(this.scrollTop=s)}}wa.DEFAULT_ARIA_LABEL=(0,Un.N)("quickInputBox.ariaLabel","Type to narrow down results.");class Ha extends Q.JT{constructor(s){super();this.options=s,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new z.Q5),this.onDidCustomEmitter=this._register(new z.Q5),this.onDidTriggerButtonEmitter=this._register(new z.Q5),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new z.Q5),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new z.Q5),this.onHide=this.onHideEmitter.event,this.idPrefix=s.idPrefix,this.parentElement=s.container,this.styles=s.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const s=u=>{this.keyMods.ctrlCmd=u.ctrlKey||u.metaKey,this.keyMods.alt=u.altKey};this._register(fn.nm(window,fn.tw.KEY_DOWN,s,!0)),this._register(fn.nm(window,fn.tw.KEY_UP,s,!0)),this._register(fn.nm(window,fn.tw.MOUSE_DOWN,s,!0))}getUI(){if(this.ui)return this.ui;const s=fn.R3(this.parentElement,Wa(".quick-input-widget.show-file-icons"));s.tabIndex=-1,s.style.display="none";const u=fn.dS(s),y=fn.R3(s,Wa(".quick-input-titlebar")),$=this._register(new ss.o(y));$.domNode.classList.add("quick-input-left-action-bar");const he=fn.R3(y,Wa(".quick-input-title")),_e=this._register(new ss.o(y));_e.domNode.classList.add("quick-input-right-action-bar");const Ie=fn.R3(s,Wa(".quick-input-description")),st=fn.R3(s,Wa(".quick-input-header")),yt=fn.R3(st,Wa("input.quick-input-check-all"));yt.type="checkbox",this._register(fn.mu(yt,fn.tw.CHANGE,zr=>{const Ko=yt.checked;Ur.setAllVisibleChecked(Ko)})),this._register(fn.nm(yt,fn.tw.CLICK,zr=>{(zr.x||zr.y)&&ui.setFocus()}));const wt=fn.R3(st,Wa(".quick-input-description")),Xt=fn.R3(st,Wa(".quick-input-and-message")),Rn=fn.R3(Xt,Wa(".quick-input-filter")),ui=this._register(new nc(Rn));ui.setAttribute("aria-describedby",`${this.idPrefix}message`);const Ai=fn.R3(Rn,Wa(".quick-input-visible-count"));Ai.setAttribute("aria-live","polite"),Ai.setAttribute("aria-atomic","true");const Gi=new jd.Z(Ai,{countFormat:(0,Un.N)({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),Cr=fn.R3(Rn,Wa(".quick-input-count"));Cr.setAttribute("aria-live","polite");const Gr=new jd.Z(Cr,{countFormat:(0,Un.N)({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),io=fn.R3(st,Wa(".quick-input-action")),Ir=new lf(io);Ir.label=(0,Un.N)("ok","OK"),this._register(Ir.onDidClick(zr=>{this.onDidAcceptEmitter.fire()}));const Rr=fn.R3(st,Wa(".quick-input-action")),rs=new lf(Rr);rs.label=(0,Un.N)("custom","Custom"),this._register(rs.onDidClick(zr=>{this.onDidCustomEmitter.fire()}));const Ho=fn.R3(Xt,Wa(`#${this.idPrefix}message.quick-input-message`)),Ur=this._register(new Xd(s,this.idPrefix+"list",this.options));this._register(Ur.onChangedAllVisibleChecked(zr=>{yt.checked=zr})),this._register(Ur.onChangedVisibleCount(zr=>{Gi.setCount(zr)})),this._register(Ur.onChangedCheckedCount(zr=>{Gr.setCount(zr)})),this._register(Ur.onLeave(()=>{setTimeout(()=>{ui.setFocus(),this.controller instanceof wa&&this.controller.canSelectMany&&Ur.clearFocus()},0)})),this._register(Ur.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const wr=new tc(s);wr.getContainer().classList.add("quick-input-progress");const ro=fn.go(s);return this._register(ro),this._register(fn.nm(s,fn.tw.FOCUS,zr=>{this.previousFocusElement=zr.relatedTarget instanceof HTMLElement?zr.relatedTarget:void 0},!0)),this._register(ro.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(da.Jq.Blur),this.previousFocusElement=void 0})),this._register(fn.nm(s,fn.tw.FOCUS,zr=>{ui.setFocus()})),this._register(fn.nm(s,fn.tw.KEY_DOWN,zr=>{const Ko=new la.y(zr);switch(Ko.keyCode){case 3:fn.zB.stop(zr,!0),this.onDidAcceptEmitter.fire();break;case 9:fn.zB.stop(zr,!0),this.hide(da.Jq.Gesture);break;case 2:if(!Ko.altKey&&!Ko.ctrlKey&&!Ko.metaKey){const Ds=[".action-label.codicon"];s.classList.contains("show-checkboxes")?Ds.push("input"):Ds.push("input[type=text]"),this.getUI().list.isDisplayed()&&Ds.push(".monaco-list");const oo=s.querySelectorAll(Ds.join(", "));Ko.shiftKey&&Ko.target===oo[0]?(fn.zB.stop(zr,!0),oo[oo.length-1].focus()):!Ko.shiftKey&&Ko.target===oo[oo.length-1]&&(fn.zB.stop(zr,!0),oo[0].focus())}break}})),this.ui={container:s,styleSheet:u,leftActionBar:$,titleBar:y,title:he,description1:Ie,description2:wt,rightActionBar:_e,checkAll:yt,filterContainer:Rn,inputBox:ui,visibleCountContainer:Ai,visibleCount:Gi,countContainer:Cr,count:Gr,okContainer:io,ok:Ir,message:Ho,customButtonContainer:Rr,customButton:rs,list:Ur,progressBar:wr,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:zr=>this.show(zr),hide:()=>this.hide(),setVisibilities:zr=>this.setVisibilities(zr),setComboboxAccessibility:zr=>this.setComboboxAccessibility(zr),setEnabled:zr=>this.setEnabled(zr),setContextKey:zr=>this.options.setContextKey(zr)},this.updateStyles(),this.ui}pick(s,u={},y=d.T.None){return new Promise(($,he)=>{let _e=wt=>{_e=$,u.onKeyMods&&u.onKeyMods(Ie.keyMods),$(wt)};if(y.isCancellationRequested){_e(void 0);return}const Ie=this.createQuickPick();let st;const yt=[Ie,Ie.onDidAccept(()=>{if(Ie.canSelectMany)_e(Ie.selectedItems.slice()),Ie.hide();else{const wt=Ie.activeItems[0];wt&&(_e(wt),Ie.hide())}}),Ie.onDidChangeActive(wt=>{const Xt=wt[0];Xt&&u.onDidFocus&&u.onDidFocus(Xt)}),Ie.onDidChangeSelection(wt=>{if(!Ie.canSelectMany){const Xt=wt[0];Xt&&(_e(Xt),Ie.hide())}}),Ie.onDidTriggerItemButton(wt=>u.onDidTriggerItemButton&&u.onDidTriggerItemButton(Object.assign(Object.assign({},wt),{removeItem:()=>{const Xt=Ie.items.indexOf(wt.item);if(Xt!==-1){const Rn=Ie.items.slice(),ui=Rn.splice(Xt,1),Ai=Ie.activeItems.filter(Cr=>Cr!==ui[0]),Gi=Ie.keepScrollPosition;Ie.keepScrollPosition=!0,Ie.items=Rn,Ai&&(Ie.activeItems=Ai),Ie.keepScrollPosition=Gi}}}))),Ie.onDidChangeValue(wt=>{st&&!wt&&(Ie.activeItems.length!==1||Ie.activeItems[0]!==st)&&(Ie.activeItems=[st])}),y.onCancellationRequested(()=>{Ie.hide()}),Ie.onDidHide(()=>{(0,Q.B9)(yt),_e(void 0)})];Ie.title=u.title,Ie.canSelectMany=!!u.canPickMany,Ie.placeholder=u.placeHolder,Ie.ignoreFocusOut=!!u.ignoreFocusLost,Ie.matchOnDescription=!!u.matchOnDescription,Ie.matchOnDetail=!!u.matchOnDetail,Ie.matchOnLabel=u.matchOnLabel===void 0||u.matchOnLabel,Ie.autoFocusOnList=u.autoFocusOnList===void 0||u.autoFocusOnList,Ie.quickNavigate=u.quickNavigate,Ie.contextKey=u.contextKey,Ie.busy=!0,Promise.all([s,u.activeItem]).then(([wt,Xt])=>{st=Xt,Ie.busy=!1,Ie.items=wt,Ie.canSelectMany&&(Ie.selectedItems=wt.filter(Rn=>Rn.type!=="separator"&&Rn.picked)),st&&(Ie.activeItems=[st])}),Ie.show(),Promise.resolve(s).then(void 0,wt=>{he(wt),Ie.hide()})})}createQuickPick(){const s=this.getUI();return new wa(s)}show(s){const u=this.getUI();this.onShowEmitter.fire();const y=this.controller;this.controller=s,y&&y.didHide(),this.setEnabled(!0),u.leftActionBar.clear(),u.title.textContent="",u.description1.textContent="",u.description2.textContent="",u.rightActionBar.clear(),u.checkAll.checked=!1,u.inputBox.placeholder="",u.inputBox.password=!1,u.inputBox.showDecoration(xa.Z.Ignore),u.visibleCount.setCount(0),u.count.setCount(0),fn.mc(u.message),u.progressBar.stop(),u.list.setElements([]),u.list.matchOnDescription=!1,u.list.matchOnDetail=!1,u.list.matchOnLabel=!0,u.list.sortByLabel=!0,u.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),u.inputBox.ariaLabel="";const $=this.options.backKeybindingLabel();Ic.tooltip=$?(0,Un.N)("quickInput.backWithKeybinding","Back ({0})",$):(0,Un.N)("quickInput.back","Back"),u.container.style.display="",this.updateLayout(),u.inputBox.setFocus()}setVisibilities(s){const u=this.getUI();u.title.style.display=s.title?"":"none",u.description1.style.display=s.description&&(s.inputBox||s.checkAll)?"":"none",u.description2.style.display=s.description&&!(s.inputBox||s.checkAll)?"":"none",u.checkAll.style.display=s.checkAll?"":"none",u.filterContainer.style.display=s.inputBox?"":"none",u.visibleCountContainer.style.display=s.visibleCount?"":"none",u.countContainer.style.display=s.count?"":"none",u.okContainer.style.display=s.ok?"":"none",u.customButtonContainer.style.display=s.customButton?"":"none",u.message.style.display=s.message?"":"none",u.progressBar.getContainer().style.display=s.progressBar?"":"none",u.list.display(!!s.list),u.container.classList[s.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(s){if(s!==this.comboboxAccessibility){const u=this.getUI();this.comboboxAccessibility=s,this.comboboxAccessibility?(u.inputBox.setAttribute("role","combobox"),u.inputBox.setAttribute("aria-haspopup","true"),u.inputBox.setAttribute("aria-autocomplete","list"),u.inputBox.setAttribute("aria-activedescendant",u.list.getActiveDescendant()||"")):(u.inputBox.removeAttribute("role"),u.inputBox.removeAttribute("aria-haspopup"),u.inputBox.removeAttribute("aria-autocomplete"),u.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(s){if(s!==this.enabled){this.enabled=s;for(const u of this.getUI().leftActionBar.viewItems)u.getAction().enabled=s;for(const u of this.getUI().rightActionBar.viewItems)u.getAction().enabled=s;this.getUI().checkAll.disabled=!s,this.getUI().ok.enabled=s,this.getUI().list.enabled=s}}hide(s){var u;const y=this.controller;if(y){const $=!((u=this.ui)===null||u===void 0?void 0:u.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!$){let he=this.previousFocusElement;for(;he&&!he.offsetParent;)he=(0,Ve.f6)(he.parentElement);(he==null?void 0:he.offsetParent)?(he.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}y.didHide(s)}}layout(s,u){this.dimension=s,this.titleBarOffset=u,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const s=this.ui.container.style,u=Math.min(this.dimension.width*.62,Ha.MAX_WIDTH);s.width=u+"px",s.marginLeft="-"+u/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(s){this.styles=s,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:s,quickInputBackground:u,quickInputForeground:y,contrastBorder:$,widgetShadow:he}=this.styles.widget;this.ui.titleBar.style.backgroundColor=s?s.toString():"",this.ui.container.style.backgroundColor=u?u.toString():"",this.ui.container.style.color=y?y.toString():"",this.ui.container.style.border=$?`1px solid ${$}`:"",this.ui.container.style.boxShadow=he?`0 0 8px 2px ${he}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const _e=[];this.styles.list.pickerGroupBorder&&_e.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&_e.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(_e.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&_e.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&_e.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&_e.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&_e.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&_e.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),_e.push("}"));const Ie=_e.join(`
`);Ie!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=Ie)}}}Ha.MAX_WIDTH=600;var $s=a(586),ka=a(88289),Ih=a(90725),ju=a(41157),uf=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},df=function(P,s){return function(u,y){s(u,y,P)}};let Nh=class extends Q.JT{constructor(s,u){super();this.quickInputService=s,this.instantiationService=u,this.registry=Yl.B.as(Ih.IP.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(s="",u){this.doShowOrPick(s,!1,u)}doShowOrPick(s,u,y){var $;const[he,_e]=this.getOrInstantiateProvider(s),Ie=this.visibleQuickAccess,st=Ie==null?void 0:Ie.descriptor;if(Ie&&_e&&st===_e){s!==_e.prefix&&!(y==null?void 0:y.preserveValue)&&(Ie.picker.value=s),this.adjustValueSelection(Ie.picker,_e,y);return}if(_e&&!(y==null?void 0:y.preserveValue)){let ui;if(Ie&&st&&st!==_e){const Ai=Ie.value.substr(st.prefix.length);Ai&&(ui=`${_e.prefix}${Ai}`)}if(!ui){const Ai=he==null?void 0:he.defaultFilterValue;Ai===Ih.Ry.LAST?ui=this.lastAcceptedPickerValues.get(_e):typeof Ai=="string"&&(ui=`${_e.prefix}${Ai}`)}typeof ui=="string"&&(s=ui)}const yt=new Q.SL,wt=yt.add(this.quickInputService.createQuickPick());wt.value=s,this.adjustValueSelection(wt,_e,y),wt.placeholder=_e==null?void 0:_e.placeholder,wt.quickNavigate=y==null?void 0:y.quickNavigateConfiguration,wt.hideInput=!!wt.quickNavigate&&!Ie,(typeof(y==null?void 0:y.itemActivation)=="number"||(y==null?void 0:y.quickNavigateConfiguration))&&(wt.itemActivation=($=y==null?void 0:y.itemActivation)!==null&&$!==void 0?$:ju.jG.SECOND),wt.contextKey=_e==null?void 0:_e.contextKey,wt.filterValue=ui=>ui.substring(_e?_e.prefix.length:0),(_e==null?void 0:_e.placeholder)&&(wt.ariaLabel=_e==null?void 0:_e.placeholder);let Xt;u&&(Xt=new Ye.CR,yt.add((0,ka.I)(wt.onWillAccept)(ui=>{ui.veto(),wt.hide()}))),yt.add(this.registerPickerListeners(wt,he,_e,s));const Rn=yt.add(new d.A);if(he&&yt.add(he.provide(wt,Rn.token)),(0,ka.I)(wt.onDidHide)(()=>{wt.selectedItems.length===0&&Rn.cancel(),yt.dispose(),Xt==null||Xt.complete(wt.selectedItems.slice(0))}),wt.show(),u)return Xt==null?void 0:Xt.p}adjustValueSelection(s,u,y){var $;let he;(y==null?void 0:y.preserveValue)?he=[s.value.length,s.value.length]:he=[($=u==null?void 0:u.prefix.length)!==null&&$!==void 0?$:0,s.value.length],s.valueSelection=he}registerPickerListeners(s,u,y,$){const he=new Q.SL,_e=this.visibleQuickAccess={picker:s,descriptor:y,value:$};return he.add((0,Q.OF)(()=>{_e===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),he.add(s.onDidChangeValue(Ie=>{const[st]=this.getOrInstantiateProvider(Ie);st!==u?this.show(Ie,{preserveValue:!0}):_e.value=Ie})),y&&he.add(s.onDidAccept(()=>{this.lastAcceptedPickerValues.set(y,s.value)})),he}getOrInstantiateProvider(s){const u=this.registry.getQuickAccessProvider(s);if(!u)return[void 0,void 0];let y=this.mapProviderToDescriptor.get(u);return y||(y=this.instantiationService.createInstance(u.ctor),this.mapProviderToDescriptor.set(u,y)),[y,u]}};Nh=uf([df(0,ju.eJ),df(1,ea.TG)],Nh);var Yd=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},ol=function(P,s){return function(u,y){s(u,y,P)}};let ac=class extends ns.bB{constructor(s,u,y,$,he){super(y);this.instantiationService=s,this.contextKeyService=u,this.accessibilityService=$,this.layoutService=he,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(Nh))),this._quickAccess}createController(s=this.layoutService,u){var y,$;const he={idPrefix:"quickInput_",container:s.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:Ie=>this.setContextKey(Ie),returnFocus:()=>s.focus(),createList:(Ie,st,yt,wt,Xt)=>this.instantiationService.createInstance($s.ev,Ie,st,yt,wt,Xt),styles:this.computeStyles()},_e=this._register(new Ha(Object.assign(Object.assign({},he),u)));return _e.layout(s.dimension,($=(y=s.offset)===null||y===void 0?void 0:y.top)!==null&&$!==void 0?$:0),this._register(s.onDidLayout(Ie=>{var st,yt;return _e.layout(Ie,(yt=(st=s.offset)===null||st===void 0?void 0:st.top)!==null&&yt!==void 0?yt:0)})),this._register(_e.onShow(()=>this.resetContextKeys())),this._register(_e.onHide(()=>this.resetContextKeys())),_e}setContextKey(s){let u;s&&(u=this.contexts.get(s),u||(u=new ts.uy(s,!1).bindTo(this.contextKeyService),this.contexts.set(s,u))),!(u&&u.get())&&(this.resetContextKeys(),u&&u.set(!0))}resetContextKeys(){this.contexts.forEach(s=>{s.get()&&s.reset()})}pick(s,u={},y=d.T.None){return this.controller.pick(s,u,y)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},(0,Ol.o)(this.theme,{quickInputBackground:gr.zKr,quickInputForeground:gr.tZ6,quickInputTitleBackground:gr.loF,contrastBorder:gr.lRK,widgetShadow:gr.rh})),inputBox:(0,Ol.o)(this.theme,{inputForeground:gr.zJb,inputBackground:gr.sEe,inputBorder:gr.dt_,inputValidationInfoBackground:gr._lC,inputValidationInfoForeground:gr.YI3,inputValidationInfoBorder:gr.EPQ,inputValidationWarningBackground:gr.RV_,inputValidationWarningForeground:gr.SUG,inputValidationWarningBorder:gr.C3g,inputValidationErrorBackground:gr.paE,inputValidationErrorForeground:gr._t9,inputValidationErrorBorder:gr.OZR}),countBadge:(0,Ol.o)(this.theme,{badgeBackground:gr.g8u,badgeForeground:gr.qeD,badgeBorder:gr.lRK}),button:(0,Ol.o)(this.theme,{buttonForeground:gr.j5u,buttonBackground:gr.b7$,buttonHoverBackground:gr.GO4,buttonBorder:gr.lRK}),progressBar:(0,Ol.o)(this.theme,{progressBarBackground:gr.zRJ}),keybindingLabel:(0,Ol.o)(this.theme,{keybindingLabelBackground:gr.oQ$,keybindingLabelForeground:gr.lWp,keybindingLabelBorder:gr.AWI,keybindingLabelBottomBorder:gr.K19,keybindingLabelShadow:gr.rh}),list:(0,Ol.o)(this.theme,{listBackground:gr.zKr,listInactiveFocusForeground:gr.NPS,listInactiveSelectionIconForeground:gr.cbQ,listInactiveFocusBackground:gr.Vqd,listFocusOutline:gr.xL1,listInactiveFocusOutline:gr.xL1,pickerGroupBorder:gr.opG,pickerGroupForeground:gr.kJk})}}};ac=Yd([ol(0,ea.TG),ol(1,ts.i6),ol(2,ns.XE),ol(3,ec.F),ol(4,ba)],ac);var hf=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},mu=function(P,s){return function(u,y){s(u,y,P)}};let Th=class extends ac{constructor(s,u,y,$,he,_e){super(u,y,$,he,new Du(s.getContainerDomNode(),_e));this.host=void 0;const Ie=sl.get(s);if(Ie){const st=Ie.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return st.getDomNode()},get dimension(){return s.getLayoutInfo()},get onDidLayout(){return s.onDidLayoutChange},focus:()=>s.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};Th=hf([mu(1,ea.TG),mu(2,ts.i6),mu(3,ns.XE),mu(4,ec.F),mu(5,Fe.$)],Th);let Qd=class{constructor(s,u){this.instantiationService=s,this.codeEditorService=u,this.mapEditorToService=new Map}get activeService(){const s=this.codeEditorService.getFocusedCodeEditor();if(!s)throw new Error("Quick input service needs a focused editor to work.");let u=this.mapEditorToService.get(s);if(!u){const y=u=this.instantiationService.createInstance(Th,s);this.mapEditorToService.set(s,u),(0,ka.I)(s.onDidDispose)(()=>{y.dispose(),this.mapEditorToService.delete(s)})}return u}get quickAccess(){return this.activeService.quickAccess}pick(s,u={},y=d.T.None){return this.activeService.pick(s,u,y)}createQuickPick(){return this.activeService.createQuickPick()}};Qd=hf([mu(0,ea.TG),mu(1,Fe.$)],Qd);class sl{constructor(s){this.editor=s,this.widget=new Ld(this.editor)}static get(s){return s.getContribution(sl.ID)}dispose(){this.widget.dispose()}}sl.ID="editor.controller.quickInput";class Ld{constructor(s){this.codeEditor=s,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return Ld.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}Ld.ID="editor.contrib.quickInputWidget",(0,wo._K)(sl.ID,sl);class ff{constructor(s,u,y,$,he){this._parsedThemeRuleBrand=void 0,this.token=s,this.index=u,this.fontStyle=y,this.foreground=$,this.background=he}}function gf(P){if(!P||!Array.isArray(P))return[];const s=[];let u=0;for(let y=0,$=P.length;y<$;y++){const he=P[y];let _e=-1;if(typeof he.fontStyle=="string"){_e=0;const yt=he.fontStyle.split(" ");for(let wt=0,Xt=yt.length;wt<Xt;wt++)switch(yt[wt]){case"italic":_e=_e|1;break;case"bold":_e=_e|2;break;case"underline":_e=_e|4;break;case"strikethrough":_e=_e|8;break}}let Ie=null;typeof he.foreground=="string"&&(Ie=he.foreground);let st=null;typeof he.background=="string"&&(st=he.background),s[u++]=new ff(he.token||"",y,_e,Ie,st)}return s}function Mh(P,s){P.sort((wt,Xt)=>{const Rn=Ei(wt.token,Xt.token);return Rn!==0?Rn:wt.index-Xt.index});let u=0,y="000000",$="ffffff";for(;P.length>=1&&P[0].token==="";){const wt=P.shift();wt.fontStyle!==-1&&(u=wt.fontStyle),wt.foreground!==null&&(y=wt.foreground),wt.background!==null&&($=wt.background)}const he=new mt;for(let wt of s)he.getId(wt);const _e=he.getId(y),Ie=he.getId($),st=new di(u,_e,Ie),yt=new mi(st);for(let wt=0,Xt=P.length;wt<Xt;wt++){const Rn=P[wt];yt.insert(Rn.token,Rn.fontStyle,he.getId(Rn.foreground),he.getId(Rn.background))}return new Qt(he,yt)}const mf=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class mt{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(s){if(s===null)return 0;const u=s.match(mf);if(!u)throw new Error("Illegal value for token color: "+s);s=u[1].toUpperCase();let y=this._color2id.get(s);return y||(y=++this._lastColorId,this._color2id.set(s,y),this._id2color[y]=Gc.Il.fromHex("#"+s),y)}getColorMap(){return this._id2color.slice(0)}}class Qt{constructor(s,u){this._colorMap=s,this._root=u,this._cache=new Map}static createFromRawTokenTheme(s,u){return this.createFromParsedTokenTheme(gf(s),u)}static createFromParsedTokenTheme(s,u){return Mh(s,u)}getColorMap(){return this._colorMap.getColorMap()}_match(s){return this._root.match(s)}match(s,u){let y=this._cache.get(u);if(typeof y=="undefined"){const $=this._match(u),he=hi(u);y=($.metadata|he<<8)>>>0,this._cache.set(u,y)}return(y|s<<0)>>>0}}const Cn=/\b(comment|string|regex|regexp)\b/;function hi(P){const s=P.match(Cn);if(!s)return 0;switch(s[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function Ei(P,s){return P<s?-1:P>s?1:0}class di{constructor(s,u,y){this._themeTrieElementRuleBrand=void 0,this._fontStyle=s,this._foreground=u,this._background=y,this.metadata=(this._fontStyle<<10|this._foreground<<14|this._background<<23)>>>0}clone(){return new di(this._fontStyle,this._foreground,this._background)}acceptOverwrite(s,u,y){s!==-1&&(this._fontStyle=s),u!==0&&(this._foreground=u),y!==0&&(this._background=y),this.metadata=(this._fontStyle<<10|this._foreground<<14|this._background<<23)>>>0}}class mi{constructor(s){this._themeTrieElementBrand=void 0,this._mainRule=s,this._children=new Map}match(s){if(s==="")return this._mainRule;const u=s.indexOf(".");let y,$;u===-1?(y=s,$=""):(y=s.substring(0,u),$=s.substring(u+1));const he=this._children.get(y);return typeof he!="undefined"?he.match($):this._mainRule}insert(s,u,y,$){if(s===""){this._mainRule.acceptOverwrite(u,y,$);return}const he=s.indexOf(".");let _e,Ie;he===-1?(_e=s,Ie=""):(_e=s.substring(0,he),Ie=s.substring(he+1));let st=this._children.get(_e);typeof st=="undefined"&&(st=new mi(this._mainRule.clone()),this._children.set(_e,st)),st.insert(Ie,u,y,$)}}function Wi(P){const s=[];for(let u=1,y=P.length;u<y;u++){const $=P[u];s[u]=`.mtk${u} { color: ${$}; }`}return s.push(".mtki { font-style: italic; }"),s.push(".mtkb { font-weight: bold; }"),s.push(".mtku { text-decoration: underline; text-underline-position: under; }"),s.push(".mtks { text-decoration: line-through; }"),s.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),s.join(`
`)}const Vi={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[gr.cvW]:"#FFFFFE",[gr.NOs]:"#000000",[gr.ES4]:"#E5EBF1",[Ss.tR]:"#D3D3D3",[Ss.Ym]:"#939393",[gr.Rzx]:"#ADD6FF4D"}},Ki={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[gr.cvW]:"#1E1E1E",[gr.NOs]:"#D4D4D4",[gr.ES4]:"#3A3D41",[Ss.tR]:"#404040",[Ss.Ym]:"#707070",[gr.Rzx]:"#ADD6FF26"}},zi={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[gr.cvW]:"#000000",[gr.NOs]:"#FFFFFF",[Ss.tR]:"#FFFFFF",[Ss.Ym]:"#FFFFFF"}};var Qi=a(92321);function ir(P){const s=new z.Q5,u=(0,Jn.Ks)();return u.onDidChange(()=>s.fire()),P==null||P.onDidProductIconThemeChange(()=>s.fire()),{onDidChange:s.event,getCSS(){const y=P?P.getProductIconTheme():new Oi,$={},he=Ie=>{const st=y.getIcon(Ie);if(!st)return;const yt=st.font;return yt?($[yt.id]=yt.definition,`.codicon-${Ie.id}:before { content: '${st.fontCharacter}'; font-family: ${(0,fn._h)(yt.id)}; }`):`.codicon-${Ie.id}:before { content: '${st.fontCharacter}'; }`},_e=[];for(let Ie of u.getIcons()){const st=he(Ie);st&&_e.push(st)}for(let Ie in $){const st=$[Ie],yt=st.weight?`font-weight: ${st.weight};`:"",wt=st.style?`font-style: ${st.style};`:"",Xt=st.src.map(Rn=>`${(0,fn.wY)(Rn.location)} format('${Rn.format}')`).join(", ");_e.push(`@font-face { src: ${Xt}; font-family: ${(0,fn._h)(Ie)};${yt}${wt} font-display: block; }`)}return _e.join(`
`)}}}class Oi{getIcon(s){const u=(0,Jn.Ks)();let y=s.defaults;for(;ns.kS.isThemeIcon(y);){const $=u.getIcon(y.id);if(!$)return;y=$.defaults}return y}}const Zi="vs",Yn="vs-dark",fi="hc-black",$i=Yl.B.as(gr.IPX.ColorContribution),ar=Yl.B.as(ns.IP.ThemingContribution);class Mi{constructor(s,u){this.semanticHighlighting=!1,this.themeData=u;const y=u.base;s.length>0?(sr(s)?this.id=s:this.id=y+" "+s,this.themeName=s):(this.id=y,this.themeName=y),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const s=new Map;for(let u in this.themeData.colors)s.set(u,Gc.Il.fromHex(this.themeData.colors[u]));if(this.themeData.inherit){const u=Ni(this.themeData.base);for(let y in u.colors)s.has(y)||s.set(y,Gc.Il.fromHex(u.colors[y]))}this.colors=s}return this.colors}getColor(s,u){const y=this.getColors().get(s);if(y)return y;if(u!==!1)return this.getDefault(s)}getDefault(s){let u=this.defaultColors[s];return u||(u=$i.resolveDefaultColor(s,this),this.defaultColors[s]=u,u)}defines(s){return Object.prototype.hasOwnProperty.call(this.getColors(),s)}get type(){switch(this.base){case Zi:return Qi.e.LIGHT;case fi:return Qi.e.HIGH_CONTRAST;default:return Qi.e.DARK}}get tokenTheme(){if(!this._tokenTheme){let s=[],u=[];if(this.themeData.inherit){const he=Ni(this.themeData.base);s=he.rules,he.encodedTokensColors&&(u=he.encodedTokensColors)}const y=this.themeData.colors["editor.foreground"],$=this.themeData.colors["editor.background"];if(y||$){const he={token:""};y&&(he.foreground=y),$&&(he.background=$),s.push(he)}s=s.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(u=this.themeData.encodedTokensColors),this._tokenTheme=Qt.createFromRawTokenTheme(s,u)}return this._tokenTheme}getTokenStyleMetadata(s,u,y){const he=this.tokenTheme._match([s].concat(u).join(".")).metadata,_e=F.NX.getForeground(he),Ie=F.NX.getFontStyle(he);return{foreground:_e,italic:Boolean(Ie&1),bold:Boolean(Ie&2),underline:Boolean(Ie&4),strikethrough:Boolean(Ie&8)}}}function sr(P){return P===Zi||P===Yn||P===fi}function Ni(P){switch(P){case Zi:return Vi;case Yn:return Ki;case fi:return zi}}function qi(P){const s=Ni(P);return new Mi(P,s)}class Ri extends Q.JT{constructor(){super();this._onColorThemeChange=this._register(new z.Q5),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new z.Q5),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new Oi,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Zi,qi(Zi)),this._knownThemes.set(Yn,qi(Yn)),this._knownThemes.set(fi,qi(fi));const s=ir(this);this._codiconCSS=s.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Zi),s.onDidChange(()=>{this._codiconCSS=s.getCSS(),this._updateCSS()}),fn.uB("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(s){return fn.OO(s)?this._registerShadowDomContainer(s):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=fn.dS(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),Q.JT.None}_registerShadowDomContainer(s){const u=fn.dS(s);return u.className="monaco-colors",u.textContent=this._allCSS,this._styleElements.push(u),{dispose:()=>{for(let y=0;y<this._styleElements.length;y++)if(this._styleElements[y]===u){this._styleElements.splice(y,1);return}}}}defineTheme(s,u){if(!/^[a-z0-9\-]+$/i.test(s))throw new Error("Illegal theme name!");if(!sr(u.base)&&!sr(s))throw new Error("Illegal theme base!");this._knownThemes.set(s,new Mi(s,u)),sr(s)&&this._knownThemes.forEach(y=>{y.base===s&&y.notifyBaseUpdated()}),this._theme.themeName===s&&this.setTheme(s)}getColorTheme(){return this._theme}setColorMapOverride(s){this._colorMapOverride=s,this._updateThemeOrColorMap()}setTheme(s){let u;this._knownThemes.has(s)?u=this._knownThemes.get(s):u=this._knownThemes.get(Zi),this._desiredTheme=u,this._updateActualTheme()}_updateActualTheme(){const s=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(fi):this._desiredTheme;this._theme!==s&&(this._theme=s,this._updateThemeOrColorMap())}setAutoDetectHighContrast(s){this._autoDetectHighContrast=s,this._updateActualTheme()}_updateThemeOrColorMap(){const s=[],u={},y={addRule:_e=>{u[_e]||(s.push(_e),u[_e]=!0)}};ar.getThemingParticipants().forEach(_e=>_e(this._theme,y,this._environment));const $=[];for(const _e of $i.getColors()){const Ie=this._theme.getColor(_e.id,!0);Ie&&$.push(`${(0,gr.QO2)(_e.id)}: ${Ie.toString()};`)}y.addRule(`.monaco-editor { ${$.join(`
`)} }`);const he=this._colorMapOverride||this._theme.tokenTheme.getColorMap();y.addRule(Wi(he)),this._themeCSS=s.join(`
`),this._updateCSS(),F.RW.setColorMap(he),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(s=>s.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}var Ui=a(44156),Vr=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},co=function(P,s){return function(u,y){s(u,y,P)}};let rr=class extends Q.JT{constructor(s,u){super();this._contextKeyService=s,this._configurationService=u,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new z.Q5,this._accessibilityModeEnabledContext=ec.U.bindTo(this._contextKeyService);const y=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration($=>{$.affectsConfiguration("editor.accessibilitySupport")&&(y(),this._onDidChangeScreenReaderOptimized.fire())})),y(),this.onDidChangeScreenReaderOptimized(()=>y())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const s=this._configurationService.getValue("editor.accessibilitySupport");return s==="on"||s==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};rr=Vr([co(0,ts.i6),co(1,Na.Ui)],rr);var ki=a(84144),Ti=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},Yr=function(P,s){return function(u,y){s(u,y,P)}};let Eo=class{constructor(s){this._commandService=s}createMenu(s,u,y){return new br(s,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},y),this._commandService,u,this)}};Eo=Ti([Yr(0,Ia.Hy)],Eo);let br=class eg{constructor(s,u,y,$,he){this._id=s,this._options=u,this._commandService=y,this._contextKeyService=$,this._menuService=he,this._disposables=new Q.SL,this._menuGroups=[],this._contextKeys=new Set,this._build();const _e=new Ye.pY(()=>{this._build(),this._onDidChange.fire(this)},u.eventDebounceDelay);this._disposables.add(_e),this._disposables.add(ki.BH.onDidChangeMenu(yt=>{yt.has(s)&&_e.schedule()}));const Ie=this._disposables.add(new Q.SL),st=()=>{const yt=new Ye.pY(()=>this._onDidChange.fire(this),u.eventDebounceDelay);Ie.add(yt),Ie.add($.onDidChangeContext(wt=>{wt.affectsSome(this._contextKeys)&&yt.schedule()}))};this._onDidChange=new z.Q5({onFirstListenerAdd:st,onLastListenerRemove:Ie.clear.bind(Ie)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const s=ki.BH.getMenuItems(this._id);let u;s.sort(eg._compareMenuItems);for(const y of s){const $=y.group||"";(!u||u[0]!==$)&&(u=[$,[]],this._menuGroups.push(u)),u[1].push(y),this._collectContextKeys(y)}}_collectContextKeys(s){if(eg._fillInKbExprKeys(s.when,this._contextKeys),(0,ki.vr)(s)){if(s.command.precondition&&eg._fillInKbExprKeys(s.command.precondition,this._contextKeys),s.command.toggled){const u=s.command.toggled.condition||s.command.toggled;eg._fillInKbExprKeys(u,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&ki.BH.getMenuItems(s.submenu).forEach(this._collectContextKeys,this)}getActions(s){const u=[];for(let y of this._menuGroups){const[$,he]=y,_e=[];for(const Ie of he)if(this._contextKeyService.contextMatchesRules(Ie.when)){const st=(0,ki.vr)(Ie)?new ki.U8(Ie.command,Ie.alt,s,this._contextKeyService,this._commandService):new ki.NZ(Ie,this._menuService,this._contextKeyService,s);_e.push(st)}_e.length>0&&u.push([$,_e])}return u}static _fillInKbExprKeys(s,u){if(s)for(let y of s.keys())u.add(y)}static _compareMenuItems(s,u){let y=s.group,$=u.group;if(y!==$){if(y){if(!$)return-1}else return 1;if(y==="navigation")return-1;if($==="navigation")return 1;let Ie=y.localeCompare($);if(Ie!==0)return Ie}let he=s.order||0,_e=u.order||0;return he<_e?-1:he>_e?1:eg._compareTitles((0,ki.vr)(s)?s.command.title:s.title,(0,ki.vr)(u)?u.command.title:u.title)}static _compareTitles(s,u){const y=typeof s=="string"?s:s.original,$=typeof u=="string"?u:u.original;return y.localeCompare($)}};br=Ti([Yr(2,Ia.Hy),Yr(3,ts.i6),Yr(4,ki.co)],br);var Fo=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},uo=function(P,s){return function(u,y){s(u,y,P)}},vo=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};let Qo=class extends Q.JT{constructor(s,u){super();this.layoutService=s,this.logService=u,this.mapTextToType=new Map,this.findText="",(Wc.isSafari||Wc.isWebkitWebView)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const s=()=>{const u=new Ye.CR;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=u,navigator.clipboard.write([new ClipboardItem({"text/plain":u.p})]).catch(y=>vo(this,void 0,void 0,function*(){(!(y instanceof Error)||y.name!=="NotAllowedError"||!u.isRejected)&&this.logService.error(y)}))};this.layoutService.hasContainer&&(this._register((0,fn.nm)(this.layoutService.container,"click",s)),this._register((0,fn.nm)(this.layoutService.container,"keydown",s)))}writeText(s,u){return vo(this,void 0,void 0,function*(){if(u){this.mapTextToType.set(u,s);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(s);try{return yield navigator.clipboard.writeText(s)}catch(he){console.error(he)}const y=document.activeElement,$=document.body.appendChild((0,fn.$)("textarea",{"aria-hidden":!0}));$.style.height="1px",$.style.width="1px",$.style.position="absolute",$.value=s,$.focus(),$.select(),document.execCommand("copy"),y instanceof HTMLElement&&y.focus(),document.body.removeChild($)})}readText(s){return vo(this,void 0,void 0,function*(){if(s)return this.mapTextToType.get(s)||"";try{return yield navigator.clipboard.readText()}catch(u){return console.error(u),""}})}readFindText(){return vo(this,void 0,void 0,function*(){return this.findText})}writeFindText(s){return vo(this,void 0,void 0,function*(){this.findText=s})}};Qo=Fo([uo(0,ba),uo(1,dn.VZ)],Qo);var Rs=a(53725),ha=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},Go=function(P,s){return function(u,y){s(u,y,P)}};const Us="data-keybinding-context";class vs{constructor(s,u){this._id=s,this._parent=u,this._value=Object.create(null),this._value._contextId=s}setValue(s,u){return this._value[s]!==u?(this._value[s]=u,!0):!1}removeValue(s){return s in this._value?(delete this._value[s],!0):!1}getValue(s){const u=this._value[s];return typeof u=="undefined"&&this._parent?this._parent.getValue(s):u}}class Ps extends vs{constructor(){super(-1,null)}setValue(s,u){return!1}removeValue(s){return!1}getValue(s){}}Ps.INSTANCE=new Ps;class Do extends vs{constructor(s,u,y){super(s,null);this._configurationService=u,this._values=Vs.Id.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration($=>{if($.source===6){const he=Array.from(Rs.$.map(this._values,([_e])=>_e));this._values.clear(),y.fire(new fa(he))}else{const he=[];for(const _e of $.affectedKeys){const Ie=`config.${_e}`,st=this._values.findSuperstr(Ie);st!==void 0&&(he.push(...Rs.$.map(st,([yt])=>yt)),this._values.deleteSuperstr(Ie)),this._values.has(Ie)&&(he.push(Ie),this._values.delete(Ie))}y.fire(new fa(he))}})}dispose(){this._listener.dispose()}getValue(s){if(s.indexOf(Do._keyPrefix)!==0)return super.getValue(s);if(this._values.has(s))return this._values.get(s);const u=s.substr(Do._keyPrefix.length),y=this._configurationService.getValue(u);let $;switch(typeof y){case"number":case"boolean":case"string":$=y;break;default:Array.isArray(y)?$=JSON.stringify(y):$=y}return this._values.set(s,$),$}setValue(s,u){return super.setValue(s,u)}removeValue(s){return super.removeValue(s)}}Do._keyPrefix="config.";class oa{constructor(s,u,y){this._service=s,this._key=u,this._defaultValue=y,this.reset()}set(s){this._service.setContext(this._key,s)}reset(){typeof this._defaultValue=="undefined"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class Sa{constructor(s){this.key=s}affectsSome(s){return s.has(this.key)}}class fa{constructor(s){this.keys=s}affectsSome(s){for(const u of this.keys)if(s.has(u))return!0;return!1}}class zs{constructor(s){this.events=s}affectsSome(s){for(const u of this.events)if(u.affectsSome(s))return!0;return!1}}class _o{constructor(s){this._onDidChangeContext=new z.K3({merge:u=>new zs(u)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=s}createKey(s,u){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new oa(this,s,u)}bufferChangeEvents(s){this._onDidChangeContext.pause();try{s()}finally{this._onDidChangeContext.resume()}}createScoped(s){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Xo(this,s)}contextMatchesRules(s){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const u=this.getContextValuesContainer(this._myContextId);return s?s.evaluate(u):!0}getContextKeyValue(s){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(s)}setContext(s,u){if(this._isDisposed)return;const y=this.getContextValuesContainer(this._myContextId);!y||y.setValue(s,u)&&this._onDidChangeContext.fire(new Sa(s))}removeContext(s){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(s)&&this._onDidChangeContext.fire(new Sa(s))}getContext(s){return this._isDisposed?Ps.INSTANCE:this.getContextValuesContainer(Zr(s))}}let Qs=class extends _o{constructor(s){super(0);this._contexts=new Map,this._toDispose=new Q.SL,this._lastContextId=0;const u=new Do(this._myContextId,s,this._onDidChangeContext);this._contexts.set(this._myContextId,u),this._toDispose.add(u)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(s){return this._isDisposed?Ps.INSTANCE:this._contexts.get(s)||Ps.INSTANCE}createChildContext(s=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let u=++this._lastContextId;return this._contexts.set(u,new vs(u,this.getContextValuesContainer(s))),u}disposeContext(s){this._isDisposed||this._contexts.delete(s)}};Qs=ha([Go(0,Na.Ui)],Qs);class Xo extends _o{constructor(s,u){super(s.createChildContext());if(this._parentChangeListener=new Q.XK,this._parent=s,this._updateParentChangeListener(),this._domNode=u,this._domNode.hasAttribute(Us)){let y="";this._domNode.classList&&(y=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${y?": "+y:""}`)}this._domNode.setAttribute(Us,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Us),this._isDisposed=!0)}getContextValuesContainer(s){return this._isDisposed?Ps.INSTANCE:this._parent.getContextValuesContainer(s)}createChildContext(s=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(s)}disposeContext(s){this._isDisposed||this._parent.disposeContext(s)}}function Zr(P){for(;P;){if(P.hasAttribute(Us)){const s=P.getAttribute(Us);return s?parseInt(s,10):NaN}P=P.parentElement}return 0}Ia.P0.registerCommand(ts.Eq,function(P,s,u){P.get(ts.i6).createKey(String(s),u)}),Ia.P0.registerCommand({id:"getContextKeyInfo",handler(){return[...ts.uy.all()].sort((P,s)=>P.key.localeCompare(s.key))},description:{description:(0,Un.N)("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),Ia.P0.registerCommand("_generateContextKeyInfo",function(){const P=[],s=new Set;for(let u of ts.uy.all())s.has(u.key)||(s.add(u.key),P.push(u));P.sort((u,y)=>u.key.localeCompare(y.key)),console.log(JSON.stringify(P,void 0,2))});var Co=a(97108);class Jo{constructor(s){this.incoming=new Map,this.outgoing=new Map,this.data=s}}class Js{constructor(s){this._hashFn=s,this._nodes=new Map}roots(){const s=[];for(let u of this._nodes.values())u.outgoing.size===0&&s.push(u);return s}insertEdge(s,u){const y=this.lookupOrInsertNode(s),$=this.lookupOrInsertNode(u);y.outgoing.set(this._hashFn(u),$),$.incoming.set(this._hashFn(s),y)}removeNode(s){const u=this._hashFn(s);this._nodes.delete(u);for(let y of this._nodes.values())y.outgoing.delete(u),y.incoming.delete(u)}lookupOrInsertNode(s){const u=this._hashFn(s);let y=this._nodes.get(u);return y||(y=new Jo(s),this._nodes.set(u,y)),y}isEmpty(){return this._nodes.size===0}toString(){let s=[];for(let[u,y]of this._nodes)s.push(`${u}, (incoming)[${[...y.incoming.keys()].join(", ")}], (outgoing)[${[...y.outgoing.keys()].join(",")}]`);return s.join(`
`)}findCycleSlow(){for(let[s,u]of this._nodes){const y=new Set([s]),$=this._findCycle(u,y);if($)return $}}_findCycle(s,u){for(let[y,$]of s.outgoing){if(u.has(y))return[...u,y].join(" -> ");u.add(y);const he=this._findCycle($,u);if(he)return he;u.delete(y)}}}const Ul=!1;class Kc extends Error{constructor(s){var u;super("cyclic dependency between services");this.message=(u=s.findCycleSlow())!==null&&u!==void 0?u:`UNABLE to detect cycle, dumping graph: 
${s.toString()}`}}class gn{constructor(s=new jl.y,u=!1,y){this._activeInstantiations=new Set,this._services=s,this._strict=u,this._parent=y,this._services.set(ea.TG,this)}createChild(s){return new gn(s,this._strict,this)}invokeFunction(s,...u){let y=ai.traceInvocation(s),$=!1;try{return s({get:_e=>{if($)throw(0,dt.L6)("service accessor is only valid during the invocation of its target method");const Ie=this._getOrCreateServiceInstance(_e,y);if(!Ie)throw new Error(`[invokeFunction] unknown service '${_e}'`);return Ie}},...u)}finally{$=!0,y.stop()}}createInstance(s,...u){let y,$;return s instanceof Co.M?(y=ai.traceCreation(s.ctor),$=this._createInstance(s.ctor,s.staticArguments.concat(u),y)):(y=ai.traceCreation(s),$=this._createInstance(s,u,y)),y.stop(),$}_createInstance(s,u=[],y){let $=ea.I8.getServiceDependencies(s).sort((Ie,st)=>Ie.index-st.index),he=[];for(const Ie of $){let st=this._getOrCreateServiceInstance(Ie.id,y);st||this._throwIfStrict(`[createInstance] ${s.name} depends on UNKNOWN service ${Ie.id}.`,!1),he.push(st)}let _e=$.length>0?$[0].index:u.length;if(u.length!==_e){console.warn(`[createInstance] First service dependency of ${s.name} at position ${_e+1} conflicts with ${u.length} static arguments`);let Ie=_e-u.length;Ie>0?u=u.concat(new Array(Ie)):u=u.slice(0,_e)}return new s(...[...u,...he])}_setServiceInstance(s,u){if(this._services.get(s)instanceof Co.M)this._services.set(s,u);else if(this._parent)this._parent._setServiceInstance(s,u);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(s){let u=this._services.get(s);return!u&&this._parent?this._parent._getServiceInstanceOrDescriptor(s):u}_getOrCreateServiceInstance(s,u){let y=this._getServiceInstanceOrDescriptor(s);return y instanceof Co.M?this._safeCreateAndCacheServiceInstance(s,y,u.branch(s,!0)):(u.branch(s,!1),y)}_safeCreateAndCacheServiceInstance(s,u,y){if(this._activeInstantiations.has(s))throw new Error(`illegal state - RECURSIVELY instantiating service '${s}'`);this._activeInstantiations.add(s);try{return this._createAndCacheServiceInstance(s,u,y)}finally{this._activeInstantiations.delete(s)}}_createAndCacheServiceInstance(s,u,y){const $=new Js(Ie=>Ie.id.toString());let he=0;const _e=[{id:s,desc:u,_trace:y}];for(;_e.length;){const Ie=_e.pop();if($.lookupOrInsertNode(Ie),he++>1e3)throw new Kc($);for(let st of ea.I8.getServiceDependencies(Ie.desc.ctor)){let yt=this._getServiceInstanceOrDescriptor(st.id);if(yt||this._throwIfStrict(`[createInstance] ${s} depends on ${st.id} which is NOT registered.`,!0),yt instanceof Co.M){const wt={id:st.id,desc:yt,_trace:Ie._trace.branch(st.id,!0)};$.insertEdge(Ie,wt),_e.push(wt)}}}for(;;){const Ie=$.roots();if(Ie.length===0){if(!$.isEmpty())throw new Kc($);break}for(const{data:st}of Ie){if(this._getServiceInstanceOrDescriptor(st.id)instanceof Co.M){const wt=this._createServiceInstanceWithOwner(st.id,st.desc.ctor,st.desc.staticArguments,st.desc.supportsDelayedInstantiation,st._trace);this._setServiceInstance(st.id,wt)}$.removeNode(st)}}return this._getServiceInstanceOrDescriptor(s)}_createServiceInstanceWithOwner(s,u,y=[],$,he){if(this._services.get(s)instanceof Co.M)return this._createServiceInstance(u,y,$,he);if(this._parent)return this._parent._createServiceInstanceWithOwner(s,u,y,$,he);throw new Error(`illegalState - creating UNKNOWN service instance ${u.name}`)}_createServiceInstance(s,u=[],y,$){if(y){const he=new Ye.Ue(()=>this._createInstance(s,u,$));return new Proxy(Object.create(null),{get(_e,Ie){if(Ie in _e)return _e[Ie];let st=he.value,yt=st[Ie];return typeof yt!="function"||(yt=yt.bind(st),_e[Ie]=yt),yt},set(_e,Ie,st){return he.value[Ie]=st,!0}})}else return this._createInstance(s,u,$)}_throwIfStrict(s,u){if(u&&console.warn(u),this._strict)throw new Error(s)}}class ai{constructor(s,u){this.type=s,this.name=u,this._start=Date.now(),this._dep=[]}static traceInvocation(s){return Ul?new ai(1,s.name||s.toString().substring(0,42).replace(/\n/g,"")):ai._None}static traceCreation(s){return Ul?new ai(0,s.name):ai._None}branch(s,u){let y=new ai(2,s.toString());return this._dep.push([s,u,y]),y}stop(){let s=Date.now()-this._start;ai._totals+=s;let u=!1;function y(he,_e){let Ie=[],st=new Array(he+1).join("	");for(const[yt,wt,Xt]of _e._dep)if(wt&&Xt){u=!0,Ie.push(`${st}CREATES -> ${yt}`);let Rn=y(he+1,Xt);Rn&&Ie.push(Rn)}else Ie.push(`${st}uses -> ${yt}`);return Ie.join(`
`)}let $=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${y(1,this)}`,`DONE, took ${s.toFixed(2)}ms (grand total ${ai._totals.toFixed(2)}ms)`];(s>2||u)&&console.log($.join(`
`))}}ai._None=new class extends ai{constructor(){super(-1,null)}stop(){}branch(){return this}},ai._totals=0;class ci{constructor(){this._byResource=new Vs.Y9,this._byOwner=new Map}set(s,u,y){let $=this._byResource.get(s);$||($=new Map,this._byResource.set(s,$)),$.set(u,y);let he=this._byOwner.get(u);he||(he=new Vs.Y9,this._byOwner.set(u,he)),he.set(s,y)}get(s,u){let y=this._byResource.get(s);return y==null?void 0:y.get(u)}delete(s,u){let y=!1,$=!1,he=this._byResource.get(s);he&&(y=he.delete(u));let _e=this._byOwner.get(u);if(_e&&($=_e.delete(s)),y!==$)throw new Error("illegal state");return y&&$}values(s){var u,y,$,he;return typeof s=="string"?(y=(u=this._byOwner.get(s))===null||u===void 0?void 0:u.values())!==null&&y!==void 0?y:Rs.$.empty():S.o.isUri(s)?(he=($=this._byResource.get(s))===null||$===void 0?void 0:$.values())!==null&&he!==void 0?he:Rs.$.empty():Rs.$.map(Rs.$.concat(...this._byOwner.values()),_e=>_e[1])}}class pr{constructor(s){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Vs.Y9,this._service=s,this._subscription=s.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(s){for(const u of s){const y=this._data.get(u);y&&this._substract(y);const $=this._resourceStats(u);this._add($),this._data.set(u,$)}}_resourceStats(s){const u={errors:0,warnings:0,infos:0,unknowns:0};if(s.scheme===ra.lg.inMemory||s.scheme===ra.lg.walkThrough||s.scheme===ra.lg.walkThroughSnippet)return u;for(const{severity:y}of this._service.read({resource:s}))y===Qa.ZL.Error?u.errors+=1:y===Qa.ZL.Warning?u.warnings+=1:y===Qa.ZL.Info?u.infos+=1:u.unknowns+=1;return u}_substract(s){this.errors-=s.errors,this.warnings-=s.warnings,this.infos-=s.infos,this.unknowns-=s.unknowns}_add(s){this.errors+=s.errors,this.warnings+=s.warnings,this.infos+=s.infos,this.unknowns+=s.unknowns}}class bo{constructor(){this._onMarkerChanged=new z.D0({delay:0,merge:bo._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new ci,this._stats=new pr(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(s,u){for(const y of u||[])this.changeOne(s,y,[])}changeOne(s,u,y){if((0,tn.XY)(y))this._data.delete(u,s)&&this._onMarkerChanged.fire([u]);else{const $=[];for(const he of y){const _e=bo._toMarker(s,u,he);_e&&$.push(_e)}this._data.set(u,s,$),this._onMarkerChanged.fire([u])}}static _toMarker(s,u,y){let{code:$,severity:he,message:_e,source:Ie,startLineNumber:st,startColumn:yt,endLineNumber:wt,endColumn:Xt,relatedInformation:Rn,tags:ui}=y;if(!!_e)return st=st>0?st:1,yt=yt>0?yt:1,wt=wt>=st?wt:st,Xt=Xt>0?Xt:yt,{resource:u,owner:s,code:$,severity:he,message:_e,source:Ie,startLineNumber:st,startColumn:yt,endLineNumber:wt,endColumn:Xt,relatedInformation:Rn,tags:ui}}read(s=Object.create(null)){let{owner:u,resource:y,severities:$,take:he}=s;if((!he||he<0)&&(he=-1),u&&y){const _e=this._data.get(y,u);if(_e){const Ie=[];for(const st of _e)if(bo._accept(st,$)){const yt=Ie.push(st);if(he>0&&yt===he)break}return Ie}else return[]}else if(!u&&!y){const _e=[];for(let Ie of this._data.values())for(let st of Ie)if(bo._accept(st,$)){const yt=_e.push(st);if(he>0&&yt===he)return _e}return _e}else{const _e=this._data.values(y??u),Ie=[];for(const st of _e)for(const yt of st)if(bo._accept(yt,$)){const wt=Ie.push(yt);if(he>0&&wt===he)return Ie}return Ie}}static _accept(s,u){return u===void 0||(u&s.severity)===s.severity}static _merge(s){const u=new Vs.Y9;for(let y of s)for(let $ of y)u.set($,!0);return Array.from(u.keys())}}var ln=a(26904);function Gt(P,s,u,y,$){if(Array.isArray(P)){let he=0;for(const _e of P){const Ie=Gt(_e,s,u,y,$);if(Ie===10)return Ie;Ie>he&&(he=Ie)}return he}else{if(typeof P=="string")return y?P==="*"?5:P===u?10:0:0;if(P){const{language:he,pattern:_e,scheme:Ie,hasAccessToAllModels:st,notebookType:yt}=P;if(!y&&!st)return 0;let wt=0;if(Ie)if(Ie===s.scheme)wt=10;else if(Ie==="*")wt=5;else return 0;if(he)if(he===u)wt=10;else if(he==="*")wt=Math.max(wt,5);else return 0;if(yt)if(yt===$)wt=10;else if(yt==="*")wt=Math.max(wt,5);else return 0;if(_e){let Xt;if(typeof _e=="string"?Xt=_e:Xt=Object.assign(Object.assign({},_e),{base:(0,_n.Fv)(_e.base)}),Xt===s.fsPath||Ch(Xt,s.fsPath))wt=10;else return 0}return wt}else return 0}}function Dn(P){return typeof P=="string"?!1:Array.isArray(P)?P.every(Dn):!!P.exclusive}class Pn{constructor(s){this._notebookTypeResolver=s,this._clock=0,this._entries=[],this._onDidChange=new z.Q5,this.onDidChange=this._onDidChange.event}register(s,u){let y={selector:s,provider:u,_score:-1,_time:this._clock++};return this._entries.push(y),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,Q.OF)(()=>{if(y){const $=this._entries.indexOf(y);$>=0&&(this._entries.splice($,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),y=void 0)}})}has(s){return this.all(s).length>0}all(s){if(!s)return[];this._updateScores(s);const u=[];for(let y of this._entries)y._score>0&&u.push(y.provider);return u}ordered(s){const u=[];return this._orderedForEach(s,y=>u.push(y.provider)),u}orderedGroups(s){const u=[];let y,$;return this._orderedForEach(s,he=>{y&&$===he._score?y.push(he.provider):($=he._score,y=[he.provider],u.push(y))}),u}_orderedForEach(s,u){if(!!s){this._updateScores(s);for(const y of this._entries)y._score>0&&u(y)}}_updateScores(s){var u;const y=(u=this._notebookTypeResolver)===null||u===void 0?void 0:u.call(this,s.uri),$={uri:s.uri.toString(),language:s.getLanguageId(),notebookType:y};if(!(this._lastCandidate&&this._lastCandidate.language===$.language&&this._lastCandidate.uri===$.uri&&this._lastCandidate.notebookType===$.notebookType)){this._lastCandidate=$;for(let he of this._entries)if(he._score=Gt(he.selector,s.uri,s.getLanguageId(),(0,_t.pt)(s),y),Dn(he.selector)&&he._score>0){for(let _e of this._entries)_e._score=0;he._score=1e3;break}this._entries.sort(Pn._compareByScoreAndTime)}}static _compareByScoreAndTime(s,u){return s._score<u._score?1:s._score>u._score?-1:s._time<u._time?1:s._time>u._time?-1:0}}class qn{constructor(){this.referenceProvider=new Pn(this._score.bind(this)),this.renameProvider=new Pn(this._score.bind(this)),this.codeActionProvider=new Pn(this._score.bind(this)),this.definitionProvider=new Pn(this._score.bind(this)),this.typeDefinitionProvider=new Pn(this._score.bind(this)),this.declarationProvider=new Pn(this._score.bind(this)),this.implementationProvider=new Pn(this._score.bind(this)),this.documentSymbolProvider=new Pn(this._score.bind(this)),this.inlayHintsProvider=new Pn(this._score.bind(this)),this.colorProvider=new Pn(this._score.bind(this)),this.codeLensProvider=new Pn(this._score.bind(this)),this.documentFormattingEditProvider=new Pn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Pn(this._score.bind(this)),this.onTypeFormattingEditProvider=new Pn(this._score.bind(this)),this.signatureHelpProvider=new Pn(this._score.bind(this)),this.hoverProvider=new Pn(this._score.bind(this)),this.documentHighlightProvider=new Pn(this._score.bind(this)),this.selectionRangeProvider=new Pn(this._score.bind(this)),this.foldingRangeProvider=new Pn(this._score.bind(this)),this.linkProvider=new Pn(this._score.bind(this)),this.inlineCompletionsProvider=new Pn(this._score.bind(this)),this.completionProvider=new Pn(this._score.bind(this)),this.linkedEditingRangeProvider=new Pn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Pn(this._score.bind(this)),this.documentSemanticTokensProvider=new Pn(this._score.bind(this))}_score(s){var u;return(u=this._notebookTypeResolver)===null||u===void 0?void 0:u.call(this,s)}}(0,Zo.z)(hn.p,qn,!0);var In=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},yn=function(P,s){return function(u,y){s(u,y,P)}},zn=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};class cn{constructor(s){this.disposed=!1,this.model=s,this._onWillDispose=new z.Q5}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let Ln=class{constructor(s){this.modelService=s}createModelReference(s){const u=this.modelService.getModel(s);return u?Promise.resolve(new Q.Jz(new cn(u))):Promise.reject(new Error("Model not found"))}};Ln=In([yn(0,Ue.q)],Ln);class nn{show(){return nn.NULL_PROGRESS_RUNNER}showWhile(s,u){return zn(this,void 0,void 0,function*(){yield s})}}nn.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class Kn{confirm(s){return this.doConfirm(s).then(u=>({confirmed:u,checkboxChecked:!1}))}doConfirm(s){let u=s.message;return s.detail&&(u=u+`

`+s.detail),Promise.resolve(window.confirm(u))}show(s,u,y,$){return Promise.resolve({choice:0})}}class ni{info(s){return this.notify({severity:xa.Z.Info,message:s})}warn(s){return this.notify({severity:xa.Z.Warning,message:s})}error(s){return this.notify({severity:xa.Z.Error,message:s})}notify(s){switch(s.severity){case xa.Z.Error:console.error(s.message);break;case xa.Z.Warning:console.warn(s.message);break;default:console.log(s.message);break}return ni.NO_OP}status(s,u){return Q.JT.None}}ni.NO_OP=new sa.EO;let bi=class{constructor(s){this._onWillExecuteCommand=new z.Q5,this._onDidExecuteCommand=new z.Q5,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=s}executeCommand(s,...u){const y=Ia.P0.getCommand(s);if(!y)return Promise.reject(new Error(`command '${s}' not found`));try{this._onWillExecuteCommand.fire({commandId:s,args:u});const $=this._instantiationService.invokeFunction.apply(this._instantiationService,[y.handler,...u]);return this._onDidExecuteCommand.fire({commandId:s,args:u}),Promise.resolve($)}catch($){return Promise.reject($)}}};bi=In([yn(0,ea.TG)],bi);let Si=class extends Bd{constructor(s,u,y,$,he,_e){super(s,u,y,$,he);this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const Ie=ui=>{const Ai=new Q.SL;Ai.add(fn.nm(ui,fn.tw.KEY_DOWN,Gi=>{const Cr=new la.y(Gi);this._dispatch(Cr,Cr.target)&&(Cr.preventDefault(),Cr.stopPropagation())})),Ai.add(fn.nm(ui,fn.tw.KEY_UP,Gi=>{const Cr=new la.y(Gi);this._singleModifierDispatch(Cr,Cr.target)&&Cr.preventDefault()})),this._domNodeListeners.push(new pi(ui,Ai))},st=ui=>{for(let Ai=0;Ai<this._domNodeListeners.length;Ai++){const Gi=this._domNodeListeners[Ai];Gi.domNode===ui&&(this._domNodeListeners.splice(Ai,1),Gi.dispose())}},yt=ui=>{ui.getOption(54)||Ie(ui.getContainerDomNode())},wt=ui=>{ui.getOption(54)||st(ui.getContainerDomNode())};this._register(_e.onCodeEditorAdd(yt)),this._register(_e.onCodeEditorRemove(wt)),_e.listCodeEditors().forEach(yt);const Xt=ui=>{Ie(ui.getContainerDomNode())},Rn=ui=>{st(ui.getContainerDomNode())};this._register(_e.onDiffEditorAdd(Xt)),this._register(_e.onDiffEditorRemove(Rn)),_e.listDiffEditors().forEach(Xt)}addDynamicKeybinding(s,u,y,$){const he=(0,Cl.gm)(u,Re.OS),_e=new Q.SL;return he&&(this._dynamicKeybindings.push({keybinding:he.parts,command:s,when:$,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),_e.add((0,Q.OF)(()=>{for(let Ie=0;Ie<this._dynamicKeybindings.length;Ie++)if(this._dynamicKeybindings[Ie].command===s){this._dynamicKeybindings.splice(Ie,1),this.updateResolver({source:1});return}}))),_e.add(Ia.P0.registerCommand(s,y)),this.updateResolver({source:1}),_e}updateResolver(s){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(s)}_getResolver(){if(!this._cachedResolver){const s=this._toNormalizedKeybindingItems(mh.W.getDefaultKeybindings(),!0),u=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new bc(s,u,y=>this._log(y))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(s,u){const y=[];let $=0;for(const he of s){const _e=he.when||void 0,Ie=he.keybinding;if(!Ie)y[$++]=new Wd(void 0,he.command,he.commandArgs,_e,u,null,!1);else{const st=wc.resolveUserBinding(Ie,Re.OS);for(const yt of st)y[$++]=new Wd(yt,he.command,he.commandArgs,_e,u,null,!1)}}return y}resolveKeyboardEvent(s){const u=new Cl.QC(s.ctrlKey,s.shiftKey,s.altKey,s.metaKey,s.keyCode).toChord();return new wc(u,Re.OS)}};Si=In([yn(0,ts.i6),yn(1,Ia.Hy),yn(2,Ut.b),yn(3,sa.lT),yn(4,dn.VZ),yn(5,Fe.$)],Si);class pi extends Q.JT{constructor(s,u){super();this.domNode=s,this._register(u)}}function Hi(P){return P&&typeof P=="object"&&(!P.overrideIdentifier||typeof P.overrideIdentifier=="string")&&(!P.resource||P.resource instanceof S.o)}class kr{constructor(){this._onDidChangeConfiguration=new z.Q5,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new _c(new vc,new Ta)}getValue(s,u){const y=typeof s=="string"?s:void 0,$=Hi(s)?s:Hi(u)?u:{};return this._configuration.getValue(y,$,void 0)}updateValues(s){const u={data:this._configuration.toData()},y=[];for(const $ of s){const[he,_e]=$;this.getValue(he)!==_e&&(this._configuration.updateValue(he,_e),y.push(he))}if(y.length>0){const $=new ud({keys:y,overrides:[]},u,this._configuration);$.source=7,$.sourceConfig=null,this._onDidChangeConfiguration.fire($)}return Promise.resolve()}updateValue(s,u,y,$){return this.updateValues([[s,u]])}inspect(s,u={}){return this._configuration.inspect(s,u,void 0)}}let mo=class{constructor(s){this.configurationService=s,this._onDidChangeConfiguration=new z.Q5,this.configurationService.onDidChangeConfiguration(u=>{this._onDidChangeConfiguration.fire({affectedKeys:u.affectedKeys,affectsConfiguration:(y,$)=>u.affectsConfiguration($)})})}getValue(s,u,y){const he=(j.L.isIPosition(u)?u:null)?typeof y=="string"?y:void 0:typeof u=="string"?u:void 0;return typeof he=="undefined"?this.configurationService.getValue():this.configurationService.getValue(he)}};mo=In([yn(0,Na.Ui)],mo);let _r=class{constructor(s){this.configurationService=s}getEOL(s,u){const y=this.configurationService.getValue("files.eol",{overrideIdentifier:u,resource:s});return y&&typeof y=="string"&&y!=="auto"?y:Re.IJ||Re.dz?`
`:`\r
`}};_r=In([yn(0,Na.Ui)],_r);class qr{publicLog(s,u){return Promise.resolve(void 0)}publicLog2(s,u){return this.publicLog(s,u)}}class ho{constructor(){const s=S.o.from({scheme:ho.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new o.md({uri:s,name:"",index:0})]}}getWorkspace(){return this.workspace}}ho.SCHEME="inmemory";function qo(P,s,u){if(!s||!(P instanceof kr))return;const y=[];Object.keys(s).forEach($=>{Tu($)&&y.push([`editor.${$}`,s[$]]),u&&ld($)&&y.push([`diffEditor.${$}`,s[$]])}),y.length>0&&P.updateValues(y)}let Fs=class{constructor(s){this._modelService=s}hasPreviewHandler(){return!1}apply(s,u){return zn(this,void 0,void 0,function*(){const y=new Map;for(let _e of s){if(!(_e instanceof Nu.Gl))throw new Error("bad edit - only text edits are supported");const Ie=this._modelService.getModel(_e.resource);if(!Ie)throw new Error("bad edit - model not found");if(typeof _e.versionId=="number"&&Ie.getVersionId()!==_e.versionId)throw new Error("bad state - model changed in the meantime");let st=y.get(Ie);st||(st=[],y.set(Ie,st)),st.push(Fd.h.replaceMove(T.e.lift(_e.textEdit.range),_e.textEdit.text))}let $=0,he=0;for(const[_e,Ie]of y)_e.pushStackElement(),_e.pushEditOperations([],Ie,()=>[]),_e.pushStackElement(),he+=1,$+=Ie.length;return{ariaSummary:Je.WU(h.iN.bulkEditServiceSummary,$,he)}})}};Fs=In([yn(0,Ue.q)],Fs);class Ea{getUriLabel(s,u){return s.scheme==="file"?s.fsPath:s.path}}let Ku=class extends qt{constructor(s,u){super(s);this._codeEditorService=u}showContextView(s,u,y){if(!u){const $=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();$&&(u=$.getContainerDomNode())}return super.showContextView(s,u,y)}};Ku=In([yn(0,ba),yn(1,Fe.$)],Ku);class al{constructor(){this._neverEmitter=new z.Q5,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class pf extends uu{constructor(){super()}}class Sl extends dn.$V{constructor(){super(new dn.kw)}}let pu=class extends ua{constructor(s,u,y,$,he){super(s,u,y,$,he);this.configure({blockMouse:!1})}};pu=In([yn(0,Ut.b),yn(1,sa.lT),yn(2,ml.u),yn(3,Ql.d),yn(4,ns.XE)],pu),(0,Zo.z)(Na.Ui,kr),(0,Zo.z)(Lt.V,mo),(0,Zo.z)(Lt.y,_r),(0,Zo.z)(o.ec,ho),(0,Zo.z)(ph.e,Ea),(0,Zo.z)(Ut.b,qr),(0,Zo.z)(rd.S,Kn),(0,Zo.z)(sa.lT,ni),(0,Zo.z)(Qa.lT,bo),(0,Zo.z)(gt.O,pf),(0,Zo.z)(Ui.Z,Ri),(0,Zo.z)(dn.VZ,Sl),(0,Zo.z)(Ue.q,_d.b$),(0,Zo.z)(fu.i,Dh),(0,Zo.z)(ts.i6,Qs),(0,Zo.z)(Rc.ek,nn),(0,Zo.z)(ln.Uy,ln.vm),(0,Zo.z)(eu.p,yr),(0,Zo.z)(Nu.vu,Fs),(0,Zo.z)(A.Y,al),(0,Zo.z)(il.S,Ln),(0,Zo.z)(ec.F,rr),(0,Zo.z)($s.Lw,$s.XN),(0,Zo.z)(Ia.Hy,bi),(0,Zo.z)(Ql.d,Si),(0,Zo.z)(ju.eJ,Qd),(0,Zo.z)(ml.u,Ku),(0,Zo.z)(hu.v4,Lh),(0,Zo.z)(vl.p,Qo),(0,Zo.z)(ml.i,pu),(0,Zo.z)(ki.co,Eo);var $r;(function(P){const s=new jl.y;for(const[_e,Ie]of(0,Zo.d)())s.set(_e,Ie);const u=new gn(s,!0);s.set(ea.TG,u);function y(_e){const Ie=s.get(_e);if(!Ie)throw new Error("Missing service "+_e);return Ie instanceof Co.M?u.invokeFunction(st=>st.get(_e)):Ie}P.get=y;let $=!1;function he(_e){if($)return u;$=!0;for(const[Ie,st]of(0,Zo.d)())s.get(Ie)||s.set(Ie,st);for(const Ie in _e)if(_e.hasOwnProperty(Ie)){const st=(0,ea.yh)(Ie);s.get(st)instanceof Co.M&&s.set(st,_e[Ie])}return u}P.initialize=he})($r||($r={}));var Jd=function(P,s,u,y){var $=arguments.length,he=$<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,u):y,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")he=Reflect.decorate(P,s,u,y);else for(var Ie=P.length-1;Ie>=0;Ie--)(_e=P[Ie])&&(he=($<3?_e(he):$>3?_e(s,u,he):_e(s,u))||he);return $>3&&he&&Object.defineProperty(s,u,he),he},_s=function(P,s){return function(u,y){s(u,y,P)}};let Ep=0,sg=!1;function qg(P){if(!P){if(sg)return;sg=!0}ji.wW(P||document.body)}let vf=class extends vr.Gm{constructor(s,u,y,$,he,_e,Ie,st,yt,wt,Xt,Rn){const ui=Object.assign({},u);ui.ariaLabel=ui.ariaLabel||h.B8.editorViewAccessibleLabel,ui.ariaLabel=ui.ariaLabel+";"+h.B8.accessibilityHelpMessage,super(s,ui,{},y,$,he,_e,st,yt,wt,Xt,Rn),Ie instanceof Si?this._standaloneKeybindingService=Ie:this._standaloneKeybindingService=null,qg(ui.ariaContainerElement)}addCommand(s,u,y){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const $="DYNAMIC_"+ ++Ep,he=ts.Ao.deserialize(y);return this._standaloneKeybindingService.addDynamicKeybinding($,s,u,he),$}createContextKey(s,u){return this._contextKeyService.createKey(s,u)}addAction(s){if(typeof s.id!="string"||typeof s.label!="string"||typeof s.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Q.JT.None;const u=s.id,y=s.label,$=ts.Ao.and(ts.Ao.equals("editorId",this.getId()),ts.Ao.deserialize(s.precondition)),he=s.keybindings,_e=ts.Ao.and($,ts.Ao.deserialize(s.keybindingContext)),Ie=s.contextMenuGroupId||null,st=s.contextMenuOrder||0,yt=(ui,...Ai)=>Promise.resolve(s.run(this,...Ai)),wt=new Q.SL,Xt=this.getId()+":"+u;if(wt.add(Ia.P0.registerCommand(Xt,yt)),Ie){const ui={command:{id:Xt,title:y},when:$,group:Ie,order:st};wt.add(ki.BH.appendMenuItem(ki.eH.EditorContext,ui))}if(Array.isArray(he))for(const ui of he)wt.add(this._standaloneKeybindingService.addDynamicKeybinding(Xt,ui,yt,_e));const Rn=new Nl.p(Xt,y,y,$,yt,this._contextKeyService);return this._actions[u]=Rn,wt.add((0,Q.OF)(()=>{delete this._actions[u]})),wt}_triggerCommand(s,u){if(this._codeEditorService instanceof _l)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(s,u)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(s,u)}};vf=Jd([_s(2,ea.TG),_s(3,Fe.$),_s(4,Ia.Hy),_s(5,ts.i6),_s(6,Ql.d),_s(7,ns.XE),_s(8,sa.lT),_s(9,ec.F),_s(10,Ot.c_),_s(11,hn.p)],vf);let _f=class extends vf{constructor(s,u,y,$,he,_e,Ie,st,yt,wt,Xt,Rn,ui,Ai,Gi){const Cr=Object.assign({},u);qo(wt,Cr,!1);const Gr=st.registerEditorContainer(s);typeof Cr.theme=="string"&&st.setTheme(Cr.theme),typeof Cr.autoDetectHighContrast!="undefined"&&st.setAutoDetectHighContrast(Boolean(Cr.autoDetectHighContrast));const io=Cr.model;delete Cr.model,super(s,Cr,y,$,he,_e,Ie,st,yt,Xt,Ai,Gi),this._configurationService=wt,this._standaloneThemeService=st,this._register(Gr);let Ir;if(typeof io=="undefined"){const Rr=ui.getLanguageIdByMimeType(Cr.language)||Cr.language||Xa.bd;Ir=em(Rn,ui,Cr.value||"",Rr,void 0),this._ownsModel=!0}else Ir=io,this._ownsModel=!1;if(this._attachModel(Ir),Ir){const Rr={oldModelUrl:null,newModelUrl:Ir.uri};this._onDidChangeModel.fire(Rr)}}dispose(){super.dispose()}updateOptions(s){qo(this._configurationService,s,!1),typeof s.theme=="string"&&this._standaloneThemeService.setTheme(s.theme),typeof s.autoDetectHighContrast!="undefined"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(s.autoDetectHighContrast)),super.updateOptions(s)}_postDetachModelCleanup(s){super._postDetachModelCleanup(s),s&&this._ownsModel&&(s.dispose(),this._ownsModel=!1)}};_f=Jd([_s(2,ea.TG),_s(3,Fe.$),_s(4,Ia.Hy),_s(5,ts.i6),_s(6,Ql.d),_s(7,Ui.Z),_s(8,sa.lT),_s(9,Na.Ui),_s(10,ec.F),_s(11,Ue.q),_s(12,gt.O),_s(13,Ot.c_),_s(14,hn.p)],_f);let ag=class extends ta{constructor(s,u,y,$,he,_e,Ie,st,yt,wt,Xt,Rn){const ui=Object.assign({},u);qo(yt,ui,!0);const Ai=Ie.registerEditorContainer(s);typeof ui.theme=="string"&&Ie.setTheme(ui.theme),typeof ui.autoDetectHighContrast!="undefined"&&Ie.setAutoDetectHighContrast(Boolean(ui.autoDetectHighContrast)),super(s,ui,{},Rn,he,$,y,_e,Ie,st,wt,Xt),this._configurationService=yt,this._standaloneThemeService=Ie,this._register(Ai)}dispose(){super.dispose()}updateOptions(s){qo(this._configurationService,s,!0),typeof s.theme=="string"&&this._standaloneThemeService.setTheme(s.theme),typeof s.autoDetectHighContrast!="undefined"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(s.autoDetectHighContrast)),super.updateOptions(s)}_createInnerEditor(s,u,y){return s.createInstance(vf,u,y)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(s,u,y){return this.getModifiedEditor().addCommand(s,u,y)}createContextKey(s,u){return this.getModifiedEditor().createContextKey(s,u)}addAction(s){return this.getModifiedEditor().addAction(s)}};ag=Jd([_s(2,ea.TG),_s(3,ts.i6),_s(4,eu.p),_s(5,Fe.$),_s(6,Ui.Z),_s(7,sa.lT),_s(8,Na.Ui),_s(9,ml.i),_s(10,Rc.ek),_s(11,vl.p)],ag);function em(P,s,u,y,$){if(u=u||"",!y){const he=u.indexOf(`
`);let _e=u;return he!==-1&&(_e=u.substring(0,he)),$c(P,u,s.createByFilepathOrFirstLine($||null,_e),$)}return $c(P,u,s.createById(y),$)}function $c(P,s,u,y){return P.createModel(s,u,y)}function tm(P,s,u){return $r.initialize(u||{}).createInstance(_f,P,s)}function Lp(P){return $r.get(Fe.$).onCodeEditorAdd(u=>{P(u)})}function Dp(P,s,u){return $r.initialize(u||{}).createInstance(ag,P,s)}function nm(P,s){return new be(P,s)}function xp(P,s,u){const y=$r.get(gt.O),$=y.getLanguageIdByMimeType(s)||s;return em($r.get(Ue.q),y,P,$,u)}function Ip(P,s){const u=$r.get(gt.O);$r.get(Ue.q).setMode(P,u.createById(s))}function im(P,s,u){P&&$r.get(Qa.lT).changeOne(s,P.uri,u)}function rm(P){return $r.get(Qa.lT).read(P)}function om(P){return $r.get(Qa.lT).onMarkerChanged(P)}function Np(P){return $r.get(Ue.q).getModel(P)}function Tp(){return $r.get(Ue.q).getModels()}function sm(P){return $r.get(Ue.q).onModelAdded(P)}function Mp(P){return $r.get(Ue.q).onModelRemoved(P)}function Ap(P){return $r.get(Ue.q).onModelLanguageChanged(u=>{P({model:u.model,oldLanguage:u.oldLanguageId})})}function Rp(P){return tr($r.get(Ue.q),$r.get(Ot.c_),P)}function Pp(P,s){const u=$r.get(gt.O),y=$r.get(Ui.Z);return y.registerEditorContainer(P),bn.colorizeElement(y,u,P,s)}function Op(P,s,u){const y=$r.get(gt.O);return $r.get(Ui.Z).registerEditorContainer(document.body),bn.colorize(y,P,s,u)}function lg(P,s,u=4){return $r.get(Ui.Z).registerEditorContainer(document.body),bn.colorizeModelLine(P,s,u)}function cg(P){const s=F.RW.get(P);return s||{getInitialState:()=>rn.TJ,tokenize:(u,y,$)=>(0,rn.Ri)(P,$)}}function am(P,s){F.RW.getOrCreate(s);const u=cg(s),y=(0,Je.uq)(P),$=[];let he=u.getInitialState();for(let _e=0,Ie=y.length;_e<Ie;_e++){const st=y[_e],yt=u.tokenize(st,!0,he);$[_e]=yt.tokens,he=yt.endState}return $}function lm(P,s){$r.get(Ui.Z).defineTheme(P,s)}function cm(P){$r.get(Ui.Z).setTheme(P)}function um(){Ne.g.clearAllFontInfos()}function kp(P,s){return Ia.P0.registerCommand({id:P,handler:s})}function Fp(){return{create:tm,onDidCreateEditor:Lp,createDiffEditor:Dp,createDiffNavigator:nm,createModel:xp,setModelLanguage:Ip,setModelMarkers:im,getModelMarkers:rm,onDidChangeMarkers:om,getModels:Tp,getModel:Np,onDidCreateModel:sm,onWillDisposeModel:Mp,onDidChangeModelLanguage:Ap,createWebWorker:Rp,colorizeElement:Pp,colorize:Op,colorizeModelLine:lg,tokenize:am,defineTheme:lm,setTheme:cm,remeasureFonts:um,registerCommand:kp,AccessibilitySupport:x,ContentWidgetPositionPreference:C,CursorChangeReason:M,DefaultEndOfLine:E,EditorAutoIndentStrategy:L,EditorOption:N,EndOfLinePreference:b,EndOfLineSequence:I,MinimapPosition:ue,MouseTargetType:te,OverlayWidgetPositionPreference:K,OverviewRulerLane:U,RenderLineNumbersType:X,RenderMinimap:le,ScrollbarVisibility:Ce,ScrollType:oe,TextEditorCursorBlinkingStyle:we,TextEditorCursorStyle:ze,TrackedRangeStickiness:Qe,WrappingIndent:Pe,InjectedTextCursorStops:W,PositionAffinity:ee,ConfigurationChangedEvent:p.Bb,BareFontInfo:Ge.E4,FontInfo:Ge.pR,TextModelResolvedOptions:_t.dJ,FindMatch:_t.tk,ApplyUpdateResult:p.rk,EditorType:nt.g,EditorOptions:p.BH}}function dm(P,s){if(!s||!Array.isArray(s))return!1;for(const u of s)if(!P(u))return!1;return!0}function Cf(P,s){return typeof P=="boolean"?P:s}function hm(P,s){return typeof P=="string"?P:s}function Bp(P){const s={};for(const u of P)s[u]=!0;return s}function fm(P,s=!1){s&&(P=P.map(function(y){return y.toLowerCase()}));const u=Bp(P);return s?function(y){return u[y.toLowerCase()]!==void 0&&u.hasOwnProperty(y.toLowerCase())}:function(y){return u[y]!==void 0&&u.hasOwnProperty(y)}}function bf(P,s){s=s.replace(/@@/g,"");let u=0,y;do y=!1,s=s.replace(/@(\w+)/g,function(he,_e){y=!0;let Ie="";if(typeof P[_e]=="string")Ie=P[_e];else if(P[_e]&&P[_e]instanceof RegExp)Ie=P[_e].source;else throw P[_e]===void 0?Ct(P,"language definition does not contain attribute '"+_e+"', used at: "+s):Ct(P,"attribute reference '"+_e+"' must be a string, used at: "+s);return St(Ie)?"":"(?:"+Ie+")"}),u++;while(y&&u<5);s=s.replace(/\x01/g,"@");const $=(P.ignoreCase?"i":"")+(P.unicode?"u":"");return new RegExp(s,$)}function Wp(P,s,u,y){if(y<0)return P;if(y<s.length)return s[y];if(y>=100){y=y-100;const $=u.split(".");if($.unshift(u),y<$.length)return $[y]}return null}function ug(P,s,u,y){let $=-1,he=u,_e=u.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);_e&&(_e[3]&&($=parseInt(_e[3]),_e[2]&&($=$+100)),he=_e[4]);let Ie="~",st=he;!he||he.length===0?(Ie="!=",st=""):/^\w*$/.test(st)?Ie="==":(_e=he.match(/^(@|!@|~|!~|==|!=)(.*)$/),_e&&(Ie=_e[1],st=_e[2]));let yt;if((Ie==="~"||Ie==="!~")&&/^(\w|\|)*$/.test(st)){const wt=fm(st.split("|"),P.ignoreCase);yt=function(Xt){return Ie==="~"?wt(Xt):!wt(Xt)}}else if(Ie==="@"||Ie==="!@"){const wt=P[st];if(!wt)throw Ct(P,"the @ match target '"+st+"' is not defined, in rule: "+s);if(!dm(function(Rn){return typeof Rn=="string"},wt))throw Ct(P,"the @ match target '"+st+"' must be an array of strings, in rule: "+s);const Xt=fm(wt,P.ignoreCase);yt=function(Rn){return Ie==="@"?Xt(Rn):!Xt(Rn)}}else if(Ie==="~"||Ie==="!~")if(st.indexOf("$")<0){const wt=bf(P,"^"+st+"$");yt=function(Xt){return Ie==="~"?wt.test(Xt):!wt.test(Xt)}}else yt=function(wt,Xt,Rn,ui){return bf(P,"^"+J(P,st,Xt,Rn,ui)+"$").test(wt)};else if(st.indexOf("$")<0){const wt=Pt(P,st);yt=function(Xt){return Ie==="=="?Xt===wt:Xt!==wt}}else{const wt=Pt(P,st);yt=function(Xt,Rn,ui,Ai,Gi){const Cr=J(P,wt,Rn,ui,Ai);return Ie==="=="?Xt===Cr:Xt!==Cr}}return $===-1?{name:u,value:y,test:function(wt,Xt,Rn,ui){return yt(wt,wt,Xt,Rn,ui)}}:{name:u,value:y,test:function(wt,Xt,Rn,ui){const Ai=Wp(wt,Xt,Rn,$);return yt(Ai||"",wt,Xt,Rn,ui)}}}function dg(P,s,u){if(u){if(typeof u=="string")return u;if(u.token||u.token===""){if(typeof u.token!="string")throw Ct(P,"a 'token' attribute must be of type string, in rule: "+s);{const y={token:u.token};if(u.token.indexOf("$")>=0&&(y.tokenSubst=!0),typeof u.bracket=="string")if(u.bracket==="@open")y.bracket=1;else if(u.bracket==="@close")y.bracket=-1;else throw Ct(P,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+s);if(u.next){if(typeof u.next!="string")throw Ct(P,"the next state must be a string value in rule: "+s);{let $=u.next;if(!/^(@pop|@push|@popall)$/.test($)&&($[0]==="@"&&($=$.substr(1)),$.indexOf("$")<0&&!ot(P,J(P,$,"",[],""))))throw Ct(P,"the next state '"+u.next+"' is not defined in rule: "+s);y.next=$}}return typeof u.goBack=="number"&&(y.goBack=u.goBack),typeof u.switchTo=="string"&&(y.switchTo=u.switchTo),typeof u.log=="string"&&(y.log=u.log),typeof u.nextEmbedded=="string"&&(y.nextEmbedded=u.nextEmbedded,P.usesEmbedded=!0),y}}else if(Array.isArray(u)){const y=[];for(let $=0,he=u.length;$<he;$++)y[$]=dg(P,s,u[$]);return{group:y}}else if(u.cases){const y=[];for(let he in u.cases)if(u.cases.hasOwnProperty(he)){const _e=dg(P,s,u.cases[he]);he==="@default"||he==="@"||he===""?y.push({test:void 0,value:_e,name:he}):he==="@eos"?y.push({test:function(Ie,st,yt,wt){return wt},value:_e,name:he}):y.push(ug(P,s,he,_e))}const $=P.defaultToken;return{test:function(he,_e,Ie,st){for(const yt of y)if(!yt.test||yt.test(he,_e,Ie,st))return yt.value;return $}}}else throw Ct(P,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+s)}else return{token:""}}class gm{constructor(s){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=s}setRegex(s,u){let y;if(typeof u=="string")y=u;else if(u instanceof RegExp)y=u.source;else throw Ct(s,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=y.length>0&&y[0]==="^",this.name=this.name+": "+y,this.regex=bf(s,"^(?:"+(this.matchOnlyAtLineStart?y.substr(1):y)+")")}setAction(s,u){this.action=dg(s,this.name,u)}}function hg(P,s){if(!s||typeof s!="object")throw new Error("Monarch: expecting a language definition object");const u={};u.languageId=P,u.includeLF=Cf(s.includeLF,!1),u.noThrow=!1,u.maxStack=100,u.start=typeof s.start=="string"?s.start:null,u.ignoreCase=Cf(s.ignoreCase,!1),u.unicode=Cf(s.unicode,!1),u.tokenPostfix=hm(s.tokenPostfix,"."+u.languageId),u.defaultToken=hm(s.defaultToken,"source"),u.usesEmbedded=!1;const y=s;y.languageId=P,y.includeLF=u.includeLF,y.ignoreCase=u.ignoreCase,y.unicode=u.unicode,y.noThrow=u.noThrow,y.usesEmbedded=u.usesEmbedded,y.stateNames=s.tokenizer,y.defaultToken=u.defaultToken;function $(_e,Ie,st){for(const yt of st){let wt=yt.include;if(wt){if(typeof wt!="string")throw Ct(u,"an 'include' attribute must be a string at: "+_e);if(wt[0]==="@"&&(wt=wt.substr(1)),!s.tokenizer[wt])throw Ct(u,"include target '"+wt+"' is not defined at: "+_e);$(_e+"."+wt,Ie,s.tokenizer[wt])}else{const Xt=new gm(_e);if(Array.isArray(yt)&&yt.length>=1&&yt.length<=3)if(Xt.setRegex(y,yt[0]),yt.length>=3)if(typeof yt[1]=="string")Xt.setAction(y,{token:yt[1],next:yt[2]});else if(typeof yt[1]=="object"){const Rn=yt[1];Rn.next=yt[2],Xt.setAction(y,Rn)}else throw Ct(u,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+_e);else Xt.setAction(y,yt[1]);else{if(!yt.regex)throw Ct(u,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+_e);yt.name&&typeof yt.name=="string"&&(Xt.name=yt.name),yt.matchOnlyAtStart&&(Xt.matchOnlyAtLineStart=Cf(yt.matchOnlyAtLineStart,!1)),Xt.setRegex(y,yt.regex),Xt.setAction(y,yt.action)}Ie.push(Xt)}}}if(!s.tokenizer||typeof s.tokenizer!="object")throw Ct(u,"a language definition must define the 'tokenizer' attribute as an object");u.tokenizer=[];for(let _e in s.tokenizer)if(s.tokenizer.hasOwnProperty(_e)){u.start||(u.start=_e);const Ie=s.tokenizer[_e];u.tokenizer[_e]=new Array,$("tokenizer."+_e,u.tokenizer[_e],Ie)}if(u.usesEmbedded=y.usesEmbedded,s.brackets){if(!Array.isArray(s.brackets))throw Ct(u,"the 'brackets' attribute must be defined as an array")}else s.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const he=[];for(let _e of s.brackets){let Ie=_e;if(Ie&&Array.isArray(Ie)&&Ie.length===3&&(Ie={token:Ie[2],open:Ie[0],close:Ie[1]}),Ie.open===Ie.close)throw Ct(u,"open and close brackets in a 'brackets' attribute must be different: "+Ie.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof Ie.open=="string"&&typeof Ie.token=="string"&&typeof Ie.close=="string")he.push({token:Ie.token+u.tokenPostfix,open:Pt(u,Ie.open),close:Pt(u,Ie.close)});else throw Ct(u,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return u.brackets=he,u.noThrow=!0,u}var Vp=function(P,s,u,y){function $(he){return he instanceof u?he:new u(function(_e){_e(he)})}return new(u||(u=Promise))(function(he,_e){function Ie(wt){try{yt(y.next(wt))}catch(Xt){_e(Xt)}}function st(wt){try{yt(y.throw(wt))}catch(Xt){_e(Xt)}}function yt(wt){wt.done?he(wt.value):$(wt.value).then(Ie,st)}yt((y=y.apply(P,s||[])).next())})};function Up(P){Xa.dQ.registerLanguage(P)}function mm(){let P=[];return P=P.concat(Xa.dQ.getLanguages()),P}function yf(P){return $r.get(gt.O).languageIdCodec.encodeLanguageId(P)}function pm(P,s){const y=$r.get(gt.O).onDidEncounterLanguage($=>{$===P&&(y.dispose(),s())});return y}function zp(P,s){if(!$r.get(gt.O).isRegisteredLanguageId(P))throw new Error(`Cannot set configuration for unknown language ${P}`);return Ot.zu.register(P,s,100)}class Hp{constructor(s,u){this._languageId=s,this._actual=u}getInitialState(){return this._actual.getInitialState()}tokenize(s,u,y){if(typeof this._actual.tokenize=="function")return Ah.adaptTokenize(this._languageId,this._actual,s,y);throw new Error("Not supported!")}tokenizeEncoded(s,u,y){const $=this._actual.tokenizeEncoded(s,y);return new F.DI($.tokens,$.endState)}}class Ah{constructor(s,u,y,$){this._languageId=s,this._actual=u,this._languageService=y,this._standaloneThemeService=$}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(s,u){const y=[];let $=0;for(let he=0,_e=s.length;he<_e;he++){const Ie=s[he];let st=Ie.startIndex;he===0?st=0:st<$&&(st=$),y[he]=new F.WU(st,Ie.scopes,u),$=st}return y}static adaptTokenize(s,u,y,$){const he=u.tokenize(y,$),_e=Ah._toClassicTokens(he.tokens,s);let Ie;return he.endState.equals($)?Ie=$:Ie=he.endState,new F.hG(_e,Ie)}tokenize(s,u,y){return Ah.adaptTokenize(this._languageId,this._actual,s,y)}_toBinaryTokens(s,u){const y=s.encodeLanguageId(this._languageId),$=this._standaloneThemeService.getColorTheme().tokenTheme,he=[];let _e=0,Ie=0;for(let yt=0,wt=u.length;yt<wt;yt++){const Xt=u[yt],Rn=$.match(y,Xt.scopes);if(_e>0&&he[_e-1]===Rn)continue;let ui=Xt.startIndex;yt===0?ui=0:ui<Ie&&(ui=Ie),he[_e++]=ui,he[_e++]=Rn,Ie=ui}const st=new Uint32Array(_e);for(let yt=0;yt<_e;yt++)st[yt]=he[yt];return st}tokenizeEncoded(s,u,y){const $=this._actual.tokenize(s,y),he=this._toBinaryTokens(this._languageService.languageIdCodec,$.tokens);let _e;return $.endState.equals(y)?_e=y:_e=$.endState,new F.DI(he,_e)}}function Gp(P){return typeof P.getInitialState=="function"}function jp(P){return"tokenizeEncoded"in P}function vm(P){return P&&typeof P.then=="function"}function Kp(P){const s=$r.get(Ui.Z);if(P){const u=[null];for(let y=1,$=P.length;y<$;y++)u[y]=Gc.Il.fromHex(P[y]);s.setColorMapOverride(u)}else s.setColorMapOverride(null)}function _m(P,s){return jp(s)?new Hp(P,s):new Ah(P,s,$r.get(gt.O),$r.get(Ui.Z))}function wf(P,s){const u={createTokenizationSupport:()=>Vp(this,void 0,void 0,function*(){const y=yield Promise.resolve(s.create());return y?Gp(y)?_m(P,y):new lt($r.get(gt.O),$r.get(Ui.Z),P,hg(P,y)):null})};return F.RW.registerFactory(P,u)}function $p(P,s){if(!$r.get(gt.O).isRegisteredLanguageId(P))throw new Error(`Cannot set tokens provider for unknown language ${P}`);return vm(s)?wf(P,{create:()=>s}):F.RW.register(P,_m(P,s))}function Zp(P,s){const u=y=>new lt($r.get(gt.O),$r.get(Ui.Z),P,hg(P,y));return vm(s)?wf(P,{create:()=>s}):F.RW.register(P,u(s))}function Sf(P,s){return $r.get(hn.p).referenceProvider.register(P,s)}function Cm(P,s){return $r.get(hn.p).renameProvider.register(P,s)}function Ar(P,s){return $r.get(hn.p).signatureHelpProvider.register(P,s)}function fg(P,s){return $r.get(hn.p).hoverProvider.register(P,{provideHover:(y,$,he)=>{const _e=y.getWordAtPosition($);return Promise.resolve(s.provideHover(y,$,he)).then(Ie=>{if(!!Ie)return!Ie.range&&_e&&(Ie.range=new T.e($.lineNumber,_e.startColumn,$.lineNumber,_e.endColumn)),Ie.range||(Ie.range=new T.e($.lineNumber,$.column,$.lineNumber,$.column)),Ie})}})}function ls(P,s){return $r.get(hn.p).documentSymbolProvider.register(P,s)}function bm(P,s){return $r.get(hn.p).documentHighlightProvider.register(P,s)}function ym(P,s){return $r.get(hn.p).linkedEditingRangeProvider.register(P,s)}function Rh(P,s){return $r.get(hn.p).definitionProvider.register(P,s)}function Xp(P,s){return $r.get(hn.p).implementationProvider.register(P,s)}function gg(P,s){return $r.get(hn.p).typeDefinitionProvider.register(P,s)}function wm(P,s){return $r.get(hn.p).codeLensProvider.register(P,s)}function Yp(P,s,u){return $r.get(hn.p).codeActionProvider.register(P,{providedCodeActionKinds:u==null?void 0:u.providedCodeActionKinds,provideCodeActions:($,he,_e,Ie)=>{const yt=$r.get(Qa.lT).read({resource:$.uri}).filter(wt=>T.e.areIntersectingOrTouching(wt,he));return s.provideCodeActions($,he,{markers:yt,only:_e.only},Ie)},resolveCodeAction:s.resolveCodeAction})}function Qp(P,s){return $r.get(hn.p).documentFormattingEditProvider.register(P,s)}function Jp(P,s){return $r.get(hn.p).documentRangeFormattingEditProvider.register(P,s)}function qp(P,s){return $r.get(hn.p).onTypeFormattingEditProvider.register(P,s)}function Sm(P,s){return $r.get(hn.p).linkProvider.register(P,s)}function lc(P,s){return $r.get(hn.p).completionProvider.register(P,s)}function Em(P,s){return $r.get(hn.p).colorProvider.register(P,s)}function ev(P,s){return $r.get(hn.p).foldingRangeProvider.register(P,s)}function tv(P,s){return $r.get(hn.p).declarationProvider.register(P,s)}function Lm(P,s){return $r.get(hn.p).selectionRangeProvider.register(P,s)}function nv(P,s){return $r.get(hn.p).documentSemanticTokensProvider.register(P,s)}function iv(P,s){return $r.get(hn.p).documentRangeSemanticTokensProvider.register(P,s)}function rv(P,s){return $r.get(hn.p).inlineCompletionsProvider.register(P,s)}function mg(P,s){return $r.get(hn.p).inlayHintsProvider.register(P,s)}function Dm(){return{register:Up,getLanguages:mm,onLanguage:pm,getEncodedLanguageId:yf,setLanguageConfiguration:zp,setColorMap:Kp,registerTokensProviderFactory:wf,setTokensProvider:$p,setMonarchTokensProvider:Zp,registerReferenceProvider:Sf,registerRenameProvider:Cm,registerCompletionItemProvider:lc,registerSignatureHelpProvider:Ar,registerHoverProvider:fg,registerDocumentSymbolProvider:ls,registerDocumentHighlightProvider:bm,registerLinkedEditingRangeProvider:ym,registerDefinitionProvider:Rh,registerImplementationProvider:Xp,registerTypeDefinitionProvider:gg,registerCodeLensProvider:wm,registerCodeActionProvider:Yp,registerDocumentFormattingEditProvider:Qp,registerDocumentRangeFormattingEditProvider:Jp,registerOnTypeFormattingEditProvider:qp,registerLinkProvider:Sm,registerColorProvider:Em,registerFoldingRangeProvider:ev,registerDeclarationProvider:tv,registerSelectionRangeProvider:Lm,registerDocumentSemanticTokensProvider:nv,registerDocumentRangeSemanticTokensProvider:iv,registerInlineCompletionsProvider:rv,registerInlayHintsProvider:mg,DocumentHighlightKind:_,CompletionItemKind:g,CompletionItemTag:D,CompletionItemInsertTextRule:v,SymbolKind:Te,SymbolTag:ge,IndentAction:k,CompletionTriggerKind:c,SignatureHelpTriggerKind:ke,InlayHintKind:q,InlineCompletionTriggerKind:re,FoldingRangeKind:F.AD}}var Ef=a(58823),Lf;p.BH.wrappingIndent.defaultValue=0,p.BH.glyphMargin.defaultValue=!1,p.BH.autoIndent.defaultValue=3,p.BH.overviewRulerLanes.defaultValue=2,Ef.xC.setFormatterSelector((P,s,u)=>Promise.resolve(P[0]));const Va=qe();Va.editor=Fp(),Va.languages=Dm();const Df=Va.CancellationTokenSource,ov=Va.Emitter,Nc=Va.KeyCode,sv=Va.KeyMod,Ph=Va.Position,xm=Va.Range,av=Va.Selection,lv=Va.SelectionDirection,cv=Va.MarkerSeverity,uv=Va.MarkerTag,dv=Va.Uri,hv=Va.Token,fv=Va.editor,gv=Va.languages;(((Lf=Re.li.MonacoEnvironment)===null||Lf===void 0?void 0:Lf.globalAPI)||typeof define=="function"&&a.amdO)&&(self.monaco=Va),typeof self.require!="undefined"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})},29477:function(Tt,me,a){"use strict";a.r(me);var p=a(65321),d=a(38626),z=a(48764),O=a(85152),S=a(93794),j=a(9917),T=a(1432),B=a(25924),F=a(70666),x=a(16830),v=a(29102),g=a(64662),D=a(16141),c=a(72065),C=a(91847),M=a(50988),E=a(73910),_=a(97781),L=a(20913),N=function(pe,ae,ue,te){var K=arguments.length,U=K<3?ae:te===null?te=Object.getOwnPropertyDescriptor(ae,ue):te,ee;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(pe,ae,ue,te);else for(var X=pe.length-1;X>=0;X--)(ee=pe[X])&&(U=(K<3?ee(U):K>3?ee(ae,ue,U):ee(ae,ue))||U);return K>3&&U&&Object.defineProperty(ae,ue,U),U},b=function(pe,ae){return function(ue,te){ae(ue,te,pe)}};const I=new D.uy("accessibilityHelpWidgetVisible",!1);let k=class IS extends j.JT{constructor(ae,ue){super();this._editor=ae,this._widget=this._register(ue.createInstance(q,this._editor))}static get(ae){return ae.getContribution(IS.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};k.ID="editor.contrib.accessibilityHelpController",k=N([b(1,c.TG)],k);function W(pe,ae){return!pe||pe.length===0?L.Oe.noSelection:pe.length===1?ae?B.WU(L.Oe.singleSelectionRange,pe[0].positionLineNumber,pe[0].positionColumn,ae):B.WU(L.Oe.singleSelection,pe[0].positionLineNumber,pe[0].positionColumn):ae?B.WU(L.Oe.multiSelectionRange,pe.length,ae):pe.length>0?B.WU(L.Oe.multiSelection,pe.length):""}let q=class yp extends S.${constructor(ae,ue,te,K){super();this._contextKeyService=ue,this._keybindingService=te,this._openerService=K,this._editor=ae,this._isVisibleKey=I.bindTo(this._contextKeyService),this._domNode=(0,d.X)(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=(0,d.X)(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(p.mu(this._contentDomNode.domNode,"keydown",U=>{if(!!this._isVisible&&(U.equals(2048|35)&&((0,O.Z9)(L.Oe.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),p.PO(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),U.preventDefault(),U.stopPropagation()),U.equals(2048|38))){(0,O.Z9)(L.Oe.openingDocs);let ee=this._editor.getRawOptions().accessibilityHelpUrl;typeof ee=="undefined"&&(ee="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(F.o.parse(ee)),U.preventDefault(),U.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return yp.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(ae,ue,te){const K=this._keybindingService.lookupKeybinding(ae);return K?B.WU(ue,K.getAriaLabel()):B.WU(te,ae)}_buildContent(){const ae=this._editor.getOptions(),ue=this._editor.getSelections();let te=0;if(ue){const X=this._editor.getModel();X&&ue.forEach(le=>{te+=X.getValueLengthInRange(le)})}let K=W(ue,te);ae.get(54)?ae.get(81)?K+=L.Oe.readonlyDiffEditor:K+=L.Oe.editableDiffEditor:ae.get(81)?K+=L.Oe.readonlyEditor:K+=L.Oe.editableEditor;const U=T.dz?L.Oe.changeConfigToOnMac:L.Oe.changeConfigToOnWinLinux;switch(ae.get(2)){case 0:K+=`

 - `+U;break;case 2:K+=`

 - `+L.Oe.auto_on;break;case 1:K+=`

 - `+L.Oe.auto_off,K+=" "+U;break}ae.get(130)?K+=`

 - `+this._descriptionForCommand(g.ToggleTabFocusModeAction.ID,L.Oe.tabFocusModeOnMsg,L.Oe.tabFocusModeOnMsgNoKb):K+=`

 - `+this._descriptionForCommand(g.ToggleTabFocusModeAction.ID,L.Oe.tabFocusModeOffMsg,L.Oe.tabFocusModeOffMsgNoKb);const ee=T.dz?L.Oe.openDocMac:L.Oe.openDocWinLinux;K+=`

 - `+ee,K+=`

`+L.Oe.outroMsg,this._contentDomNode.domNode.appendChild((0,z.BO)(K)),this._contentDomNode.domNode.setAttribute("aria-label",K)}hide(){!this._isVisible||(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,p.PO(this._contentDomNode.domNode),this._editor.focus())}_layout(){const ae=this._editor.getLayoutInfo(),ue=Math.max(5,Math.min(yp.WIDTH,ae.width-40)),te=Math.max(5,Math.min(yp.HEIGHT,ae.height-40));this._domNode.setWidth(ue),this._domNode.setHeight(te);const K=Math.round((ae.height-te)/2);this._domNode.setTop(K);const U=Math.round((ae.width-ue)/2);this._domNode.setLeft(U)}};q.ID="editor.contrib.accessibilityHelpWidget",q.WIDTH=500,q.HEIGHT=300,q=N([b(1,D.i6),b(2,C.d),b(3,M.v4)],q);class re extends x.R6{constructor(){super({id:"editor.action.showAccessibilityHelp",label:L.Oe.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:512|59,weight:100,linux:{primary:512|1024|59,secondary:[512|59]}}})}run(ae,ue){const te=k.get(ue);te&&te.show()}}(0,x._K)(k.ID,k),(0,x.Qr)(re);const de=x._l.bindToContribution(k.get);(0,x.fK)(new de({id:"closeAccessibilityHelp",precondition:I,handler:pe=>pe.hide(),kbOpts:{weight:100+100,kbExpr:v.u.focus,primary:9,secondary:[1024|9]}})),(0,_.Ic)((pe,ae)=>{const ue=pe.getColor(E.D0T);ue&&ae.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${ue}; }`);const te=pe.getColor(E.Hfx);te&&ae.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${te}; }`);const K=pe.getColor(E.rh);K&&ae.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${K}; }`);const U=pe.getColor(E.lRK);U&&ae.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${U}; }`)})},19646:function(Tt,me,a){"use strict";a.r(me),a.d(me,{IPadShowKeyboard:function(){return S}});var p=a(65321),d=a(9917),z=a(16830),O=a(1432);class S extends d.JT{constructor(B){super();this.editor=B,this.widget=null,O.gn&&(this._register(B.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const B=!this.editor.getOption(81);!this.widget&&B?this.widget=new j(this.editor):this.widget&&!B&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}S.ID="editor.contrib.iPadShowKeyboard";class j extends d.JT{constructor(B){super();this.editor=B,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(p.nm(this._domNode,"touchstart",F=>{this.editor.focus()})),this._register(p.nm(this._domNode,"focus",F=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return j.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}j.ID="editor.contrib.ShowKeyboardWidget",(0,z._K)(S.ID,S)},97830:function(Tt,me,a){"use strict";a.r(me);var p=a(65321),d=a(41264),z=a(9917),O=a(16830),S=a(96887),j=a(276),T=a(72042),B=a(44156),F=a(73910),x=a(97781),v=a(20913),g=a(92321),D=function(N,b,I,k){var W=arguments.length,q=W<3?b:k===null?k=Object.getOwnPropertyDescriptor(b,I):k,re;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(N,b,I,k);else for(var de=N.length-1;de>=0;de--)(re=N[de])&&(q=(W<3?re(q):W>3?re(b,I,q):re(b,I))||q);return W>3&&q&&Object.defineProperty(b,I,q),q},c=function(N,b){return function(I,k){b(I,k,N)}};let C=class NS extends z.JT{constructor(b,I,k){super();this._editor=b,this._languageService=k,this._widget=null,this._register(this._editor.onDidChangeModel(W=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(W=>this.stop())),this._register(S.RW.onDidChange(W=>this.stop())),this._register(this._editor.onKeyUp(W=>W.keyCode===9&&this.stop()))}static get(b){return b.getContribution(NS.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||!this._editor.hasModel()||(this._widget=new L(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};C.ID="editor.contrib.inspectTokens",C=D([c(1,B.Z),c(2,T.O)],C);class M extends O.R6{constructor(){super({id:"editor.action.inspectTokens",label:v.ug.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(b,I){const k=C.get(I);k&&k.launch()}}function E(N){let b="";for(let I=0,k=N.length;I<k;I++){const W=N.charCodeAt(I);switch(W){case 9:b+="\u2192";break;case 32:b+="\xB7";break;default:b+=String.fromCharCode(W)}}return b}function _(N,b){const I=S.RW.get(b);if(I)return I;const k=N.encodeLanguageId(b);return{getInitialState:()=>j.TJ,tokenize:(W,q,re)=>(0,j.Ri)(b,re),tokenizeEncoded:(W,q,re)=>(0,j.Dy)(k,re)}}class L extends z.JT{constructor(b,I){super();this.allowEditorOverflow=!0,this._editor=b,this._languageService=I,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=_(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(k=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return L._ID}_compute(b){const I=this._getTokensAtLine(b.lineNumber);let k=0;for(let pe=I.tokens1.length-1;pe>=0;pe--){const ae=I.tokens1[pe];if(b.column-1>=ae.offset){k=pe;break}}let W=0;for(let pe=I.tokens2.length>>>1;pe>=0;pe--)if(b.column-1>=I.tokens2[pe<<1]){W=pe;break}const q=this._model.getLineContent(b.lineNumber);let re="";if(k<I.tokens1.length){const pe=I.tokens1[k].offset,ae=k+1<I.tokens1.length?I.tokens1[k+1].offset:q.length;re=q.substring(pe,ae)}(0,p.mc)(this._domNode,(0,p.$)("h2.tm-token",void 0,E(re),(0,p.$)("span.tm-token-length",void 0,`${re.length} ${re.length===1?"char":"chars"}`))),(0,p.R3)(this._domNode,(0,p.$)("hr.tokens-inspect-separator",{style:"clear:both"}));const de=(W<<1)+1<I.tokens2.length?this._decodeMetadata(I.tokens2[(W<<1)+1]):null;(0,p.R3)(this._domNode,(0,p.$)("table.tm-metadata-table",void 0,(0,p.$)("tbody",void 0,(0,p.$)("tr",void 0,(0,p.$)("td.tm-metadata-key",void 0,"language"),(0,p.$)("td.tm-metadata-value",void 0,`${de?de.languageId:"-?-"}`)),(0,p.$)("tr",void 0,(0,p.$)("td.tm-metadata-key",void 0,"token type"),(0,p.$)("td.tm-metadata-value",void 0,`${de?this._tokenTypeToString(de.tokenType):"-?-"}`)),(0,p.$)("tr",void 0,(0,p.$)("td.tm-metadata-key",void 0,"font style"),(0,p.$)("td.tm-metadata-value",void 0,`${de?this._fontStyleToString(de.fontStyle):"-?-"}`)),(0,p.$)("tr",void 0,(0,p.$)("td.tm-metadata-key",void 0,"foreground"),(0,p.$)("td.tm-metadata-value",void 0,`${de?d.Il.Format.CSS.formatHex(de.foreground):"-?-"}`)),(0,p.$)("tr",void 0,(0,p.$)("td.tm-metadata-key",void 0,"background"),(0,p.$)("td.tm-metadata-value",void 0,`${de?d.Il.Format.CSS.formatHex(de.background):"-?-"}`))))),(0,p.R3)(this._domNode,(0,p.$)("hr.tokens-inspect-separator")),k<I.tokens1.length&&(0,p.R3)(this._domNode,(0,p.$)("span.tm-token-type",void 0,I.tokens1[k].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(b){const I=S.RW.getColorMap(),k=S.NX.getLanguageId(b),W=S.NX.getTokenType(b),q=S.NX.getFontStyle(b),re=S.NX.getForeground(b),de=S.NX.getBackground(b);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(k),tokenType:W,fontStyle:q,foreground:I[re],background:I[de]}}_tokenTypeToString(b){switch(b){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(b){let I="";return b&1&&(I+="italic "),b&2&&(I+="bold "),b&4&&(I+="underline "),b&8&&(I+="strikethrough "),I.length===0&&(I="---"),I}_getTokensAtLine(b){const I=this._getStateBeforeLine(b),k=this._tokenizationSupport.tokenize(this._model.getLineContent(b),!0,I),W=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(b),!0,I);return{startState:I,tokens1:k.tokens,tokens2:W.tokens,endState:k.endState}}_getStateBeforeLine(b){let I=this._tokenizationSupport.getInitialState();for(let k=1;k<b;k++)I=this._tokenizationSupport.tokenize(this._model.getLineContent(k),!0,I).endState;return I}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}L._ID="editor.contrib.inspectTokensWidget",(0,O._K)(C.ID,C),(0,O.Qr)(M),(0,x.Ic)((N,b)=>{const I=N.getColor(F.CNo);if(I){const q=N.type===g.e.HIGH_CONTRAST?2:1;b.addRule(`.monaco-editor .tokens-inspect-widget { border: ${q}px solid ${I}; }`),b.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${I}; }`)}const k=N.getColor(F.yJx);k&&b.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${k}; }`);const W=N.getColor(F.Sbf);W&&b.addRule(`.monaco-editor .tokens-inspect-widget { color: ${W}; }`)})},38956:function(Tt,me,a){"use strict";a.r(me),a.d(me,{GotoLineAction:function(){return Qe},StandaloneCommandsQuickAccessProvider:function(){return ze}});var p=a(89872),d=a(90725),z=a(20913),O=a(11640),S=a(21212),j=a(9488),T=a(98401),B=a(63580);function F(Pe,Oe){return Oe&&(Pe.stack||Pe.stacktrace)?B.N("stackTrace.format","{0}: {1}",v(Pe),x(Pe.stack)||x(Pe.stacktrace)):v(Pe)}function x(Pe){return Array.isArray(Pe)?Pe.join(`
`):Pe}function v(Pe){return typeof Pe.code=="string"&&typeof Pe.errno=="number"&&typeof Pe.syscall=="string"?B.N("nodeExceptionMessage","A system error occurred ({0})",Pe.message):Pe.message||B.N("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function g(Pe=null,Oe=!1){if(!Pe)return B.N("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(Pe)){const qe=j.kX(Pe),Je=g(qe[0],Oe);return qe.length>1?B.N("error.moreErrors","{0} ({1} errors in total)",Je,qe.length):Je}if(T.HD(Pe))return Pe;if(Pe.detail){const qe=Pe.detail;if(qe.error)return F(qe.error,Oe);if(qe.exception)return F(qe.exception,Oe)}return Pe.stack?F(Pe,Oe):Pe.message?Pe.message:B.N("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var D=a(17301),c=a(75392),C=a(9917),M=a(43702),E=a(14603),_=a(94565),L=a(33108),N=a(28820),b=a(72065),I=a(91847),k=a(15393),W=a(71050),q=function(Pe,Oe,qe,Je){function Ne(Fe){return Fe instanceof qe?Fe:new qe(function(ne){ne(Fe)})}return new(qe||(qe=Promise))(function(Fe,ne){function Q(be){try{xe(Je.next(be))}catch(Ge){ne(Ge)}}function ie(be){try{xe(Je.throw(be))}catch(Ge){ne(Ge)}}function xe(be){be.done?Fe(be.value):Ne(be.value).then(Q,ie)}xe((Je=Je.apply(Pe,Oe||[])).next())})},re;(function(Pe){Pe[Pe.NO_ACTION=0]="NO_ACTION",Pe[Pe.CLOSE_PICKER=1]="CLOSE_PICKER",Pe[Pe.REFRESH_PICKER=2]="REFRESH_PICKER",Pe[Pe.REMOVE_ITEM=3]="REMOVE_ITEM"})(re||(re={}));function de(Pe){const Oe=Pe;return Array.isArray(Oe.items)}function pe(Pe){const Oe=Pe;return!!Oe.picks&&Oe.additionalPicks instanceof Promise}class ae extends C.JT{constructor(Oe,qe){super();this.prefix=Oe,this.options=qe}provide(Oe,qe){var Je;const Ne=new C.SL;Oe.canAcceptInBackground=!!((Je=this.options)===null||Je===void 0?void 0:Je.canAcceptInBackground),Oe.matchOnLabel=Oe.matchOnDescription=Oe.matchOnDetail=Oe.sortByLabel=!1;let Fe;const ne=Ne.add(new C.XK),Q=()=>q(this,void 0,void 0,function*(){const ie=ne.value=new C.SL;Fe==null||Fe.dispose(!0),Oe.busy=!1,Fe=new W.A(qe);const xe=Fe.token,be=Oe.value.substr(this.prefix.length).trim(),Ge=this._getPicks(be,ie,xe),nt=(_t,Ot)=>{var rn;let gt,Ue;if(de(_t)?(gt=_t.items,Ue=_t.active):gt=_t,gt.length===0){if(Ot)return!1;be.length>0&&((rn=this.options)===null||rn===void 0?void 0:rn.noResultsPick)&&(gt=[this.options.noResultsPick])}return Oe.items=gt,Ue&&(Oe.activeItems=[Ue]),!0};if(Ge!==null)if(pe(Ge)){let _t=!1,Ot=!1;yield Promise.all([(()=>q(this,void 0,void 0,function*(){yield(0,k.Vs)(ae.FAST_PICKS_RACE_DELAY),!xe.isCancellationRequested&&(Ot||(_t=nt(Ge.picks,!0)))}))(),(()=>q(this,void 0,void 0,function*(){Oe.busy=!0;try{const rn=yield Ge.additionalPicks;if(xe.isCancellationRequested)return;let gt,Ue;de(Ge.picks)?(gt=Ge.picks.items,Ue=Ge.picks.active):gt=Ge.picks;let Ye,dt;if(de(rn)?(Ye=rn.items,dt=rn.active):Ye=rn,Ye.length>0||!_t){let Re;if(!Ue&&!dt){const Ve=Oe.activeItems[0];Ve&&gt.indexOf(Ve)!==-1&&(Re=Ve)}nt({items:[...gt,...Ye],active:Ue||dt||Re})}}finally{xe.isCancellationRequested||(Oe.busy=!1),Ot=!0}}))()])}else if(!(Ge instanceof Promise))nt(Ge);else{Oe.busy=!0;try{const _t=yield Ge;if(xe.isCancellationRequested)return;nt(_t)}finally{xe.isCancellationRequested||(Oe.busy=!1)}}});return Ne.add(Oe.onDidChangeValue(()=>Q())),Q(),Ne.add(Oe.onDidAccept(ie=>{const[xe]=Oe.selectedItems;typeof(xe==null?void 0:xe.accept)=="function"&&(ie.inBackground||Oe.hide(),xe.accept(Oe.keyMods,ie))})),Ne.add(Oe.onDidTriggerItemButton(({button:ie,item:xe})=>q(this,void 0,void 0,function*(){var be,Ge;if(typeof xe.trigger=="function"){const nt=(Ge=(be=xe.buttons)===null||be===void 0?void 0:be.indexOf(ie))!==null&&Ge!==void 0?Ge:-1;if(nt>=0){const _t=xe.trigger(nt,Oe.keyMods),Ot=typeof _t=="number"?_t:yield _t;if(qe.isCancellationRequested)return;switch(Ot){case re.NO_ACTION:break;case re.CLOSE_PICKER:Oe.hide();break;case re.REFRESH_PICKER:Q();break;case re.REMOVE_ITEM:{const rn=Oe.items.indexOf(xe);if(rn!==-1){const gt=Oe.items.slice(),Ue=gt.splice(rn,1),Ye=Oe.activeItems.filter(Re=>Re!==Ue[0]),dt=Oe.keepScrollPosition;Oe.keepScrollPosition=!0,Oe.items=gt,Ye&&(Oe.activeItems=Ye),Oe.keepScrollPosition=dt}break}}}}}))),Ne}}ae.FAST_PICKS_RACE_DELAY=200;var ue=a(26904),te=a(10829),K=function(Pe,Oe,qe,Je){var Ne=arguments.length,Fe=Ne<3?Oe:Je===null?Je=Object.getOwnPropertyDescriptor(Oe,qe):Je,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Fe=Reflect.decorate(Pe,Oe,qe,Je);else for(var Q=Pe.length-1;Q>=0;Q--)(ne=Pe[Q])&&(Fe=(Ne<3?ne(Fe):Ne>3?ne(Oe,qe,Fe):ne(Oe,qe))||Fe);return Ne>3&&Fe&&Object.defineProperty(Oe,qe,Fe),Fe},U=function(Pe,Oe){return function(qe,Je){Oe(qe,Je,Pe)}},ee=function(Pe,Oe,qe,Je){function Ne(Fe){return Fe instanceof qe?Fe:new qe(function(ne){ne(Fe)})}return new(qe||(qe=Promise))(function(Fe,ne){function Q(be){try{xe(Je.next(be))}catch(Ge){ne(Ge)}}function ie(be){try{xe(Je.throw(be))}catch(Ge){ne(Ge)}}function xe(be){be.done?Fe(be.value):Ne(be.value).then(Q,ie)}xe((Je=Je.apply(Pe,Oe||[])).next())})};let X=class wp extends ae{constructor(Oe,qe,Je,Ne,Fe,ne){super(wp.PREFIX,Oe);this.instantiationService=qe,this.keybindingService=Je,this.commandService=Ne,this.telemetryService=Fe,this.dialogService=ne,this.commandsHistory=this._register(this.instantiationService.createInstance(le)),this.options=Oe}_getPicks(Oe,qe,Je){return ee(this,void 0,void 0,function*(){const Ne=yield this.getCommandPicks(qe,Je);if(Je.isCancellationRequested)return[];const Fe=[];for(const xe of Ne){const be=(0,T.f6)(wp.WORD_FILTER(Oe,xe.label)),Ge=xe.commandAlias?(0,T.f6)(wp.WORD_FILTER(Oe,xe.commandAlias)):void 0;be||Ge?(xe.highlights={label:be,detail:this.options.showAlias?Ge:void 0},Fe.push(xe)):Oe===xe.commandId&&Fe.push(xe)}const ne=new Map;for(const xe of Fe){const be=ne.get(xe.label);be?(xe.description=xe.commandId,be.description=be.commandId):ne.set(xe.label,xe)}Fe.sort((xe,be)=>{const Ge=this.commandsHistory.peek(xe.commandId),nt=this.commandsHistory.peek(be.commandId);return Ge&&nt?Ge>nt?-1:1:Ge?-1:nt?1:xe.label.localeCompare(be.label)});const Q=[];let ie=!1;for(let xe=0;xe<Fe.length;xe++){const be=Fe[xe],Ge=this.keybindingService.lookupKeybinding(be.commandId),nt=Ge?(0,B.N)("commandPickAriaLabelWithKeybinding","{0}, {1}",be.label,Ge.getAriaLabel()):be.label;xe===0&&this.commandsHistory.peek(be.commandId)&&(Q.push({type:"separator",label:(0,B.N)("recentlyUsed","recently used")}),ie=!0),xe!==0&&ie&&!this.commandsHistory.peek(be.commandId)&&(Q.push({type:"separator",label:(0,B.N)("morecCommands","other commands")}),ie=!1),Q.push(Object.assign(Object.assign({},be),{ariaLabel:nt,detail:this.options.showAlias&&be.commandAlias!==be.label?be.commandAlias:void 0,keybinding:Ge,accept:()=>ee(this,void 0,void 0,function*(){this.commandsHistory.push(be.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:be.commandId,from:"quick open"});try{yield this.commandService.executeCommand(be.commandId)}catch(_t){(0,D.n2)(_t)||this.dialogService.show(E.Z.Error,(0,B.N)("canNotRun","Command '{0}' resulted in an error ({1})",be.label,g(_t)))}})}))}return Q})}};X.PREFIX=">",X.WORD_FILTER=(0,c.or)(c.Ji,c.KZ,c.ir),X=K([U(1,b.TG),U(2,I.d),U(3,_.Hy),U(4,te.b),U(5,N.S)],X);let le=class Ra extends C.JT{constructor(Oe,qe){super();this.storageService=Oe,this.configurationService=qe,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=Ra.getConfiguredCommandHistoryLength(this.configurationService),Ra.cache&&Ra.cache.limit!==this.configuredCommandsHistoryLength&&(Ra.cache.limit=this.configuredCommandsHistoryLength,Ra.saveState(this.storageService))}load(){const Oe=this.storageService.get(Ra.PREF_KEY_CACHE,0);let qe;if(Oe)try{qe=JSON.parse(Oe)}catch(Ne){}const Je=Ra.cache=new M.z6(this.configuredCommandsHistoryLength,1);if(qe){let Ne;qe.usesLRU?Ne=qe.entries:Ne=qe.entries.sort((Fe,ne)=>Fe.value-ne.value),Ne.forEach(Fe=>Je.set(Fe.key,Fe.value))}Ra.counter=this.storageService.getNumber(Ra.PREF_KEY_COUNTER,0,Ra.counter)}push(Oe){!Ra.cache||(Ra.cache.set(Oe,Ra.counter++),Ra.saveState(this.storageService))}peek(Oe){var qe;return(qe=Ra.cache)===null||qe===void 0?void 0:qe.peek(Oe)}static saveState(Oe){if(!Ra.cache)return;const qe={usesLRU:!0,entries:[]};Ra.cache.forEach((Je,Ne)=>qe.entries.push({key:Ne,value:Je})),Oe.store(Ra.PREF_KEY_CACHE,JSON.stringify(qe),0,0),Oe.store(Ra.PREF_KEY_COUNTER,Ra.counter,0,0)}static getConfiguredCommandHistoryLength(Oe){var qe,Je;const Fe=(Je=(qe=Oe.getValue().workbench)===null||qe===void 0?void 0:qe.commandPalette)===null||Je===void 0?void 0:Je.history;return typeof Fe=="number"?Fe:Ra.DEFAULT_COMMANDS_HISTORY_LENGTH}};le.DEFAULT_COMMANDS_HISTORY_LENGTH=50,le.PREF_KEY_CACHE="commandPalette.mru.cache",le.PREF_KEY_COUNTER="commandPalette.mru.counter",le.counter=1,le=K([U(0,ue.Uy),U(1,L.Ui)],le);class oe extends X{constructor(Oe,qe,Je,Ne,Fe,ne){super(Oe,qe,Je,Ne,Fe,ne)}getCodeEditorCommandPicks(){const Oe=this.activeTextEditorControl;if(!Oe)return[];const qe=[];for(const Je of Oe.getSupportedActions())qe.push({commandId:Je.id,commandAlias:Je.alias,label:(0,S.x$)(Je.label)||Je.id});return qe}}var Ce=a(16830),ye=a(29102),ke=a(41157),Te=function(Pe,Oe,qe,Je){var Ne=arguments.length,Fe=Ne<3?Oe:Je===null?Je=Object.getOwnPropertyDescriptor(Oe,qe):Je,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Fe=Reflect.decorate(Pe,Oe,qe,Je);else for(var Q=Pe.length-1;Q>=0;Q--)(ne=Pe[Q])&&(Fe=(Ne<3?ne(Fe):Ne>3?ne(Oe,qe,Fe):ne(Oe,qe))||Fe);return Ne>3&&Fe&&Object.defineProperty(Oe,qe,Fe),Fe},ge=function(Pe,Oe){return function(qe,Je){Oe(qe,Je,Pe)}},we=function(Pe,Oe,qe,Je){function Ne(Fe){return Fe instanceof qe?Fe:new qe(function(ne){ne(Fe)})}return new(qe||(qe=Promise))(function(Fe,ne){function Q(be){try{xe(Je.next(be))}catch(Ge){ne(Ge)}}function ie(be){try{xe(Je.throw(be))}catch(Ge){ne(Ge)}}function xe(be){be.done?Fe(be.value):Ne(be.value).then(Q,ie)}xe((Je=Je.apply(Pe,Oe||[])).next())})};let ze=class extends oe{constructor(Oe,qe,Je,Ne,Fe,ne){super({showAlias:!1},Oe,Je,Ne,Fe,ne);this.codeEditorService=qe}get activeTextEditorControl(){return(0,T.f6)(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return we(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};ze=Te([ge(0,b.TG),ge(1,O.$),ge(2,I.d),ge(3,_.Hy),ge(4,te.b),ge(5,N.S)],ze),p.B.as(d.IP.Quickaccess).registerQuickAccessProvider({ctor:ze,prefix:ze.PREFIX,helpEntries:[{description:z.UX.quickCommandHelp,needsEditor:!0}]});class Qe extends Ce.R6{constructor(){super({id:"editor.action.quickCommand",label:z.UX.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:ye.u.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(Oe){Oe.get(ke.eJ).quickAccess.show(ze.PREFIX)}}(0,Ce.Qr)(Qe)},43588:function(Tt,me,a){"use strict";a.r(me),a.d(me,{GotoLineAction:function(){return _},StandaloneGotoLineQuickAccessProvider:function(){return E}});var p=a(9917),d=a(65520),z=a(83943),O=a(63580);class S extends z.X{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(N){const b=(0,O.N)("cannotRunGotoLine","Open a text editor first to go to a line.");return N.items=[{label:b}],N.ariaLabel=b,p.JT.None}provideWithTextEditor(N,b,I){const k=N.editor,W=new p.SL;W.add(b.onDidAccept(de=>{const[pe]=b.selectedItems;if(pe){if(!this.isValidLineNumber(k,pe.lineNumber))return;this.gotoLocation(N,{range:this.toRange(pe.lineNumber,pe.column),keyMods:b.keyMods,preserveFocus:de.inBackground}),de.inBackground||b.hide()}}));const q=()=>{const de=this.parsePosition(k,b.value.trim().substr(S.PREFIX.length)),pe=this.getPickLabel(k,de.lineNumber,de.column);if(b.items=[{lineNumber:de.lineNumber,column:de.column,label:pe}],b.ariaLabel=pe,!this.isValidLineNumber(k,de.lineNumber)){this.clearDecorations(k);return}const ae=this.toRange(de.lineNumber,de.column);k.revealRangeInCenter(ae,0),this.addDecorations(k,ae)};q(),W.add(b.onDidChangeValue(()=>q()));const re=(0,d.Pi)(k);return re&&re.getOptions().get(60).renderType===2&&(re.updateOptions({lineNumbers:"on"}),W.add((0,p.OF)(()=>re.updateOptions({lineNumbers:"relative"})))),W}toRange(N=1,b=1){return{startLineNumber:N,startColumn:b,endLineNumber:N,endColumn:b}}parsePosition(N,b){const I=b.split(/,|:|#/).map(W=>parseInt(W,10)).filter(W=>!isNaN(W)),k=this.lineCount(N)+1;return{lineNumber:I[0]>0?I[0]:k+I[0],column:I[1]}}getPickLabel(N,b,I){if(this.isValidLineNumber(N,b))return this.isValidColumn(N,b,I)?(0,O.N)("gotoLineColumnLabel","Go to line {0} and character {1}.",b,I):(0,O.N)("gotoLineLabel","Go to line {0}.",b);const k=N.getPosition()||{lineNumber:1,column:1},W=this.lineCount(N);return W>1?(0,O.N)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",k.lineNumber,k.column,W):(0,O.N)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",k.lineNumber,k.column)}isValidLineNumber(N,b){return!b||typeof b!="number"?!1:b>0&&b<=this.lineCount(N)}isValidColumn(N,b,I){if(!I||typeof I!="number")return!1;const k=this.getModel(N);if(!k)return!1;const W={lineNumber:b,column:I};return k.validatePosition(W).equals(W)}lineCount(N){var b,I;return(I=(b=this.getModel(N))===null||b===void 0?void 0:b.getLineCount())!==null&&I!==void 0?I:0}}S.PREFIX=":";var j=a(89872),T=a(90725),B=a(11640),F=a(98401),x=a(20913),v=a(4669),g=a(16830),D=a(29102),c=a(41157),C=function(L,N,b,I){var k=arguments.length,W=k<3?N:I===null?I=Object.getOwnPropertyDescriptor(N,b):I,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(L,N,b,I);else for(var re=L.length-1;re>=0;re--)(q=L[re])&&(W=(k<3?q(W):k>3?q(N,b,W):q(N,b))||W);return k>3&&W&&Object.defineProperty(N,b,W),W},M=function(L,N){return function(b,I){N(b,I,L)}};let E=class extends S{constructor(N){super();this.editorService=N,this.onDidActiveTextEditorControlChange=v.ju.None}get activeTextEditorControl(){return(0,F.f6)(this.editorService.getFocusedCodeEditor())}};E=C([M(0,B.$)],E),j.B.as(T.IP.Quickaccess).registerQuickAccessProvider({ctor:E,prefix:E.PREFIX,helpEntries:[{description:x.qq.gotoLineActionLabel,needsEditor:!0}]});class _ extends g.R6{constructor(){super({id:"editor.action.gotoLine",label:x.qq.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:D.u.focus,primary:2048|37,mac:{primary:256|37},weight:100}})}run(N){N.get(c.eJ).quickAccess.show(E.PREFIX)}}(0,g.Qr)(_)},48766:function(Tt,me,a){"use strict";a.r(me),a.d(me,{GotoLineAction:function(){return Oe},StandaloneGotoSymbolQuickAccessProvider:function(){return Pe}});var p=a(28609),d=a(71713),z=a(15393),O=a(71050),S=a(73046),j=a(75392),T=a(88721),B=a(1432),F=a(25924);const x=[void 0,[]];function v(qe,Je,Ne=0,Fe=0){const ne=Je;return ne.values&&ne.values.length>1?g(qe,ne.values,Ne,Fe):D(qe,Je,Ne,Fe)}function g(qe,Je,Ne,Fe){let ne=0;const Q=[];for(const ie of Je){const[xe,be]=D(qe,ie,Ne,Fe);if(typeof xe!="number")return x;ne+=xe,Q.push(...be)}return[ne,C(Q)]}function D(qe,Je,Ne,Fe){const ne=(0,j.EW)(Je.original,Je.originalLowercase,Ne,qe,qe.toLowerCase(),Fe,!0);return ne?[ne[0],(0,j.mB)(ne)]:x}const c=Object.freeze({score:0});function C(qe){const Je=qe.sort((ne,Q)=>ne.start-Q.start),Ne=[];let Fe;for(const ne of Je)!Fe||!M(Fe,ne)?(Fe=ne,Ne.push(ne)):(Fe.start=Math.min(Fe.start,ne.start),Fe.end=Math.max(Fe.end,ne.end));return Ne}function M(qe,Je){return!(qe.end<Je.start||Je.end<qe.start)}function E(qe){return qe.startsWith('"')&&qe.endsWith('"')}const _=" ";function L(qe){typeof qe!="string"&&(qe="");const Je=qe.toLowerCase(),{pathNormalized:Ne,normalized:Fe,normalizedLowercase:ne}=N(qe),Q=Ne.indexOf(T.ir)>=0,ie=E(qe);let xe;const be=qe.split(_);if(be.length>1)for(const Ge of be){const nt=E(Ge),{pathNormalized:_t,normalized:Ot,normalizedLowercase:rn}=N(Ge);Ot&&(xe||(xe=[]),xe.push({original:Ge,originalLowercase:Ge.toLowerCase(),pathNormalized:_t,normalized:Ot,normalizedLowercase:rn,expectContiguousMatch:nt}))}return{original:qe,originalLowercase:Je,pathNormalized:Ne,normalized:Fe,normalizedLowercase:ne,values:xe,containsPathSeparator:Q,expectContiguousMatch:ie}}function N(qe){let Je;B.ED?Je=qe.replace(/\//g,T.ir):Je=qe.replace(/\\/g,T.ir);const Ne=(0,F.R1)(Je).replace(/\s|"/g,"");return{pathNormalized:Je,normalized:Ne,normalizedLowercase:Ne.toLowerCase()}}function b(qe){return Array.isArray(qe)?L(qe.map(Je=>Je.original).join(_)):L(qe.original)}var I=a(9917),k=a(24314),W=a(96887),q=a(30335),re=a(83943),de=a(63580),pe=a(71922),ae=function(qe,Je,Ne,Fe){var ne=arguments.length,Q=ne<3?Je:Fe===null?Fe=Object.getOwnPropertyDescriptor(Je,Ne):Fe,ie;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(qe,Je,Ne,Fe);else for(var xe=qe.length-1;xe>=0;xe--)(ie=qe[xe])&&(Q=(ne<3?ie(Q):ne>3?ie(Je,Ne,Q):ie(Je,Ne))||Q);return ne>3&&Q&&Object.defineProperty(Je,Ne,Q),Q},ue=function(qe,Je){return function(Ne,Fe){Je(Ne,Fe,qe)}},te=function(qe,Je,Ne,Fe){function ne(Q){return Q instanceof Ne?Q:new Ne(function(ie){ie(Q)})}return new(Ne||(Ne=Promise))(function(Q,ie){function xe(nt){try{Ge(Fe.next(nt))}catch(_t){ie(_t)}}function be(nt){try{Ge(Fe.throw(nt))}catch(_t){ie(_t)}}function Ge(nt){nt.done?Q(nt.value):ne(nt.value).then(xe,be)}Ge((Fe=Fe.apply(qe,Je||[])).next())})};let K=class L0 extends re.X{constructor(Je,Ne,Fe=Object.create(null)){super(Fe);this._languageFeaturesService=Je,this._outlineModelService=Ne,this.options=Fe,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(Je){return this.provideLabelPick(Je,(0,de.N)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),I.JT.None}provideWithTextEditor(Je,Ne,Fe){const ne=Je.editor,Q=this.getModel(ne);return Q?this._languageFeaturesService.documentSymbolProvider.has(Q)?this.doProvideWithEditorSymbols(Je,Q,Ne,Fe):this.doProvideWithoutEditorSymbols(Je,Q,Ne,Fe):I.JT.None}doProvideWithoutEditorSymbols(Je,Ne,Fe,ne){const Q=new I.SL;return this.provideLabelPick(Fe,(0,de.N)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(()=>te(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(Ne,Q))||ne.isCancellationRequested||Q.add(this.doProvideWithEditorSymbols(Je,Ne,Fe,ne))}))(),Q}provideLabelPick(Je,Ne){Je.items=[{label:Ne,index:0,kind:14}],Je.ariaLabel=Ne}waitForLanguageSymbolRegistry(Je,Ne){return te(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(Je))return!0;const Fe=new z.CR,ne=Ne.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(Je)&&(ne.dispose(),Fe.complete(!0))}));return Ne.add((0,I.OF)(()=>Fe.complete(!1))),Fe.p})}doProvideWithEditorSymbols(Je,Ne,Fe,ne){const Q=Je.editor,ie=new I.SL;ie.add(Fe.onDidAccept(_t=>{const[Ot]=Fe.selectedItems;Ot&&Ot.range&&(this.gotoLocation(Je,{range:Ot.range.selection,keyMods:Fe.keyMods,preserveFocus:_t.inBackground}),_t.inBackground||Fe.hide())})),ie.add(Fe.onDidTriggerItemButton(({item:_t})=>{_t&&_t.range&&(this.gotoLocation(Je,{range:_t.range.selection,keyMods:Fe.keyMods,forceSideBySide:!0}),Fe.hide())}));const xe=this.getDocumentSymbols(Ne,ne);let be;const Ge=()=>te(this,void 0,void 0,function*(){be==null||be.dispose(!0),Fe.busy=!1,be=new O.A(ne),Fe.busy=!0;try{const _t=L(Fe.value.substr(L0.PREFIX.length).trim()),Ot=yield this.doGetSymbolPicks(xe,_t,void 0,be.token);if(ne.isCancellationRequested)return;Ot.length>0?Fe.items=Ot:_t.original.length>0?this.provideLabelPick(Fe,(0,de.N)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(Fe,(0,de.N)("noSymbolResults","No editor symbols"))}finally{ne.isCancellationRequested||(Fe.busy=!1)}});ie.add(Fe.onDidChangeValue(()=>Ge())),Ge();let nt=!0;return ie.add(Fe.onDidChangeActive(()=>{const[_t]=Fe.activeItems;if(_t&&_t.range){if(nt){nt=!1;return}Q.revealRangeInCenter(_t.range.selection,0),this.addDecorations(Q,_t.range.decoration)}})),ie}doGetSymbolPicks(Je,Ne,Fe,ne){return te(this,void 0,void 0,function*(){const Q=yield Je;if(ne.isCancellationRequested)return[];const ie=Ne.original.indexOf(L0.SCOPE_PREFIX)===0,xe=ie?1:0;let be,Ge;Ne.values&&Ne.values.length>1?(be=b(Ne.values[0]),Ge=b(Ne.values.slice(1))):be=Ne;const nt=[];for(let rn=0;rn<Q.length;rn++){const gt=Q[rn],Ue=(0,F.fy)(gt.name),Ye=`$(${W.uZ.toIcon(gt.kind).id}) ${Ue}`,dt=Ye.length-Ue.length;let Re=gt.containerName;(Fe==null?void 0:Fe.extraContainerLabel)&&(Re?Re=`${Fe.extraContainerLabel} \u2022 ${Re}`:Re=Fe.extraContainerLabel);let Ve,at,pt,Be;if(Ne.original.length>xe){let Et=!1;if(be!==Ne&&([Ve,at]=v(Ye,Object.assign(Object.assign({},Ne),{values:void 0}),xe,dt),typeof Ve=="number"&&(Et=!0)),typeof Ve!="number"&&([Ve,at]=v(Ye,be,xe,dt),typeof Ve!="number"))continue;if(!Et&&Ge){if(Re&&Ge.original.length>0&&([pt,Be]=v(Re,Ge)),typeof pt!="number")continue;typeof Ve=="number"&&(Ve+=pt)}}const je=gt.tags&&gt.tags.indexOf(1)>=0;nt.push({index:rn,kind:gt.kind,score:Ve,label:Ye,ariaLabel:Ue,description:Re,highlights:je?void 0:{label:at,description:Be},range:{selection:k.e.collapseToStart(gt.selectionRange),decoration:gt.range},strikethrough:je,buttons:(()=>{var Et,Dt;const Xe=((Et=this.options)===null||Et===void 0?void 0:Et.openSideBySideDirection)?(Dt=this.options)===null||Dt===void 0?void 0:Dt.openSideBySideDirection():void 0;if(!!Xe)return[{iconClass:Xe==="right"?S.lA.splitHorizontal.classNames:S.lA.splitVertical.classNames,tooltip:Xe==="right"?(0,de.N)("openToSide","Open to the Side"):(0,de.N)("openToBottom","Open to the Bottom")}]})()})}const _t=nt.sort((rn,gt)=>ie?this.compareByKindAndScore(rn,gt):this.compareByScore(rn,gt));let Ot=[];if(ie){let Ye=function(){gt&&typeof rn=="number"&&Ue>0&&(gt.label=(0,F.WU)(ee[rn]||U,Ue))},rn,gt,Ue=0;for(const dt of _t)rn!==dt.kind?(Ye(),rn=dt.kind,Ue=1,gt={type:"separator"},Ot.push(gt)):Ue++,Ot.push(dt);Ye()}else _t.length>0&&(Ot=[{label:(0,de.N)("symbols","symbols ({0})",nt.length),type:"separator"},..._t]);return Ot})}compareByScore(Je,Ne){if(typeof Je.score!="number"&&typeof Ne.score=="number")return 1;if(typeof Je.score=="number"&&typeof Ne.score!="number")return-1;if(typeof Je.score=="number"&&typeof Ne.score=="number"){if(Je.score>Ne.score)return-1;if(Je.score<Ne.score)return 1}return Je.index<Ne.index?-1:Je.index>Ne.index?1:0}compareByKindAndScore(Je,Ne){const Fe=ee[Je.kind]||U,ne=ee[Ne.kind]||U,Q=Fe.localeCompare(ne);return Q===0?this.compareByScore(Je,Ne):Q}getDocumentSymbols(Je,Ne){return te(this,void 0,void 0,function*(){const Fe=yield this._outlineModelService.getOrCreate(Je,Ne);return Ne.isCancellationRequested?[]:Fe.asListOfDocumentSymbols()})}};K.PREFIX="@",K.SCOPE_PREFIX=":",K.PREFIX_BY_CATEGORY=`${K.PREFIX}${K.SCOPE_PREFIX}`,K=ae([ue(0,pe.p),ue(1,q.Je)],K);const U=(0,de.N)("property","properties ({0})"),ee={[5]:(0,de.N)("method","methods ({0})"),[11]:(0,de.N)("function","functions ({0})"),[8]:(0,de.N)("_constructor","constructors ({0})"),[12]:(0,de.N)("variable","variables ({0})"),[4]:(0,de.N)("class","classes ({0})"),[22]:(0,de.N)("struct","structs ({0})"),[23]:(0,de.N)("event","events ({0})"),[24]:(0,de.N)("operator","operators ({0})"),[10]:(0,de.N)("interface","interfaces ({0})"),[2]:(0,de.N)("namespace","namespaces ({0})"),[3]:(0,de.N)("package","packages ({0})"),[25]:(0,de.N)("typeParameter","type parameters ({0})"),[1]:(0,de.N)("modules","modules ({0})"),[6]:(0,de.N)("property","properties ({0})"),[9]:(0,de.N)("enum","enumerations ({0})"),[21]:(0,de.N)("enumMember","enumeration members ({0})"),[14]:(0,de.N)("string","strings ({0})"),[0]:(0,de.N)("file","files ({0})"),[17]:(0,de.N)("array","arrays ({0})"),[15]:(0,de.N)("number","numbers ({0})"),[16]:(0,de.N)("boolean","booleans ({0})"),[18]:(0,de.N)("object","objects ({0})"),[19]:(0,de.N)("key","keys ({0})"),[7]:(0,de.N)("field","fields ({0})"),[13]:(0,de.N)("constant","constants ({0})")};var X=a(89872),le=a(90725),oe=a(11640),Ce=a(98401),ye=a(20913),ke=a(4669),Te=a(16830),ge=a(29102),we=a(41157),ze=function(qe,Je,Ne,Fe){var ne=arguments.length,Q=ne<3?Je:Fe===null?Fe=Object.getOwnPropertyDescriptor(Je,Ne):Fe,ie;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(qe,Je,Ne,Fe);else for(var xe=qe.length-1;xe>=0;xe--)(ie=qe[xe])&&(Q=(ne<3?ie(Q):ne>3?ie(Je,Ne,Q):ie(Je,Ne))||Q);return ne>3&&Q&&Object.defineProperty(Je,Ne,Q),Q},Qe=function(qe,Je){return function(Ne,Fe){Je(Ne,Fe,qe)}};let Pe=class extends K{constructor(Je,Ne,Fe){super(Ne,Fe);this.editorService=Je,this.onDidActiveTextEditorControlChange=ke.ju.None}get activeTextEditorControl(){return(0,Ce.f6)(this.editorService.getFocusedCodeEditor())}};Pe=ze([Qe(0,oe.$),Qe(1,pe.p),Qe(2,q.Je)],Pe),X.B.as(le.IP.Quickaccess).registerQuickAccessProvider({ctor:Pe,prefix:K.PREFIX,helpEntries:[{description:ye.aq.quickOutlineActionLabel,prefix:K.PREFIX,needsEditor:!0},{description:ye.aq.quickOutlineByCategoryActionLabel,prefix:K.PREFIX_BY_CATEGORY,needsEditor:!0}]});class Oe extends Te.R6{constructor(){super({id:"editor.action.quickOutline",label:ye.aq.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:ge.u.hasDocumentSymbolProvider,kbOpts:{kbExpr:ge.u.focus,primary:2048|1024|45,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(Je){Je.get(we.eJ).quickAccess.show(K.PREFIX)}}(0,Te.Qr)(Oe)},78944:function(Tt,me,a){"use strict";a.r(me);var p=a(89872),d=a(90725),z=a(20913),O=a(9917),S=a(63580),j=a(41157),T=function(x,v,g,D){var c=arguments.length,C=c<3?v:D===null?D=Object.getOwnPropertyDescriptor(v,g):D,M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(x,v,g,D);else for(var E=x.length-1;E>=0;E--)(M=x[E])&&(C=(c<3?M(C):c>3?M(v,g,C):M(v,g))||C);return c>3&&C&&Object.defineProperty(v,g,C),C},B=function(x,v){return function(g,D){v(g,D,x)}};let F=class Sp{constructor(v){this.quickInputService=v,this.registry=p.B.as(d.IP.Quickaccess)}provide(v){const g=new O.SL;g.add(v.onDidAccept(()=>{const[C]=v.selectedItems;C&&this.quickInputService.quickAccess.show(C.prefix,{preserveValue:!0})})),g.add(v.onDidChangeValue(C=>{const M=this.registry.getQuickAccessProvider(C.substr(Sp.PREFIX.length));M&&M.prefix&&M.prefix!==Sp.PREFIX&&this.quickInputService.quickAccess.show(M.prefix,{preserveValue:!0})}));const{editorProviders:D,globalProviders:c}=this.getQuickAccessProviders();return v.items=D.length===0||c.length===0?[...D.length===0?c:D]:[{label:(0,S.N)("globalCommands","global commands"),type:"separator"},...c,{label:(0,S.N)("editorCommands","editor commands"),type:"separator"},...D],g}getQuickAccessProviders(){const v=[],g=[];for(const D of this.registry.getQuickAccessProviders().sort((c,C)=>c.prefix.localeCompare(C.prefix)))if(D.prefix!==Sp.PREFIX)for(const c of D.helpEntries){const C=c.prefix||D.prefix,M=C||"\u2026";(c.needsEditor?g:v).push({prefix:C,label:M,ariaLabel:(0,S.N)("helpPickAriaLabel","{0}, {1}",M,c.description),description:c.description})}return{editorProviders:g,globalProviders:v}}};F.PREFIX="?",F=T([B(0,j.eJ)],F),p.B.as(d.IP.Quickaccess).registerQuickAccessProvider({ctor:F,prefix:"",helpEntries:[{description:z.ld.helpQuickAccessActionLabel,needsEditor:!0}]})},45048:function(Tt,me,a){"use strict";a.r(me),a.d(me,{StandaloneReferencesController:function(){return v}});var p=a(16830),d=a(11640),z=a(27376),O=a(33108),S=a(16141),j=a(72065),T=a(59422),B=a(26904),F=function(g,D,c,C){var M=arguments.length,E=M<3?D:C===null?C=Object.getOwnPropertyDescriptor(D,c):C,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,D,c,C);else for(var L=g.length-1;L>=0;L--)(_=g[L])&&(E=(M<3?_(E):M>3?_(D,c,E):_(D,c))||E);return M>3&&E&&Object.defineProperty(D,c,E),E},x=function(g,D){return function(c,C){D(c,C,g)}};let v=class extends z.J{constructor(D,c,C,M,E,_,L){super(!0,D,c,C,M,E,_,L)}};v=F([x(1,S.i6),x(2,d.$),x(3,T.lT),x(4,j.TG),x(5,B.Uy),x(6,O.Ui)],v),(0,p._K)(z.J.ID,v)},15662:function(Tt,me,a){"use strict";a.r(me);var p=a(16830),d=a(44156),z=a(20913);class O extends p.R6{constructor(){super({id:"editor.action.toggleHighContrast",label:z.xi.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0});this._originalThemeName=null}run(j,T){const B=j.get(d.Z);this._originalThemeName?(B.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=B.getColorTheme().themeName,B.setTheme("hc-black"))}}(0,p.Qr)(O)},44156:function(Tt,me,a){"use strict";a.d(me,{Z:function(){return d}});var p=a(72065);const d=(0,p.yh)("themeService")},72323:function(Tt,me,a){"use strict";a.r(me),a.d(me,{jsonDefaults:function(){return v}});var p=a(26565);/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var d=Object.defineProperty,z=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,j=(D,c,C,M)=>{if(c&&typeof c=="object"||typeof c=="function")for(let E of O(c))!S.call(D,E)&&(C||E!=="default")&&d(D,E,{get:()=>c[E],enumerable:!(M=z(c,E))||M.enumerable});return D},T={};j(T,p);var B=class{constructor(D,c,C){Ua(this,"_onDidChange",new T.Emitter);Ua(this,"_diagnosticsOptions");Ua(this,"_modeConfiguration");Ua(this,"_languageId");this._languageId=D,this.setDiagnosticsOptions(c),this.setModeConfiguration(C)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(D){this._diagnosticsOptions=D||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(D){this._modeConfiguration=D||Object.create(null),this._onDidChange.fire(this)}},F={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},x={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},v=new B("json",F,x);T.languages.json={jsonDefaults:v};function g(){return a.e(665).then(a.bind(a,90665))}T.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),T.languages.onLanguage("json",()=>{g().then(D=>D.setupMode(v))})},39585:function(Tt,me,a){"use strict";a.r(me),a.d(me,{JsxEmit:function(){return x},ModuleKind:function(){return F},ModuleResolutionKind:function(){return D},NewLineKind:function(){return v},ScriptTarget:function(){return g},getJavaScriptWorker:function(){return L},getTypeScriptWorker:function(){return _},javascriptDefaults:function(){return E},typescriptDefaults:function(){return M},typescriptVersion:function(){return C}});var p=a(26565);/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var d=Object.defineProperty,z=Object.getOwnPropertyDescriptor,O=Object.getOwnPropertyNames,S=Object.prototype.hasOwnProperty,j=(b,I,k,W)=>{if(I&&typeof I=="object"||typeof I=="function")for(let q of O(I))!S.call(b,q)&&(k||q!=="default")&&d(b,q,{get:()=>I[q],enumerable:!(W=z(I,q))||W.enumerable});return b},T="4.5.5",B={};j(B,p);var F=(b=>(b[b.None=0]="None",b[b.CommonJS=1]="CommonJS",b[b.AMD=2]="AMD",b[b.UMD=3]="UMD",b[b.System=4]="System",b[b.ES2015=5]="ES2015",b[b.ESNext=99]="ESNext",b))(F||{}),x=(b=>(b[b.None=0]="None",b[b.Preserve=1]="Preserve",b[b.React=2]="React",b[b.ReactNative=3]="ReactNative",b[b.ReactJSX=4]="ReactJSX",b[b.ReactJSXDev=5]="ReactJSXDev",b))(x||{}),v=(b=>(b[b.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",b[b.LineFeed=1]="LineFeed",b))(v||{}),g=(b=>(b[b.ES3=0]="ES3",b[b.ES5=1]="ES5",b[b.ES2015=2]="ES2015",b[b.ES2016=3]="ES2016",b[b.ES2017=4]="ES2017",b[b.ES2018=5]="ES2018",b[b.ES2019=6]="ES2019",b[b.ES2020=7]="ES2020",b[b.ESNext=99]="ESNext",b[b.JSON=100]="JSON",b[b.Latest=99]="Latest",b))(g||{}),D=(b=>(b[b.Classic=1]="Classic",b[b.NodeJs=2]="NodeJs",b))(D||{}),c=class{constructor(b,I,k,W){Ua(this,"_onDidChange",new B.Emitter);Ua(this,"_onDidExtraLibsChange",new B.Emitter);Ua(this,"_extraLibs");Ua(this,"_removedExtraLibs");Ua(this,"_eagerModelSync");Ua(this,"_compilerOptions");Ua(this,"_diagnosticsOptions");Ua(this,"_workerOptions");Ua(this,"_onDidExtraLibsChangeTimeout");Ua(this,"_inlayHintsOptions");this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(b),this.setDiagnosticsOptions(I),this.setWorkerOptions(k),this.setInlayHintsOptions(W),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(b,I){let k;if(typeof I=="undefined"?k=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:k=I,this._extraLibs[k]&&this._extraLibs[k].content===b)return{dispose:()=>{}};let W=1;return this._removedExtraLibs[k]&&(W=this._removedExtraLibs[k]+1),this._extraLibs[k]&&(W=this._extraLibs[k].version+1),this._extraLibs[k]={content:b,version:W},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let q=this._extraLibs[k];!q||q.version===W&&(delete this._extraLibs[k],this._removedExtraLibs[k]=W,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(b){for(const I in this._extraLibs)this._removedExtraLibs[I]=this._extraLibs[I].version;if(this._extraLibs=Object.create(null),b&&b.length>0)for(const I of b){const k=I.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,W=I.content;let q=1;this._removedExtraLibs[k]&&(q=this._removedExtraLibs[k]+1),this._extraLibs[k]={content:W,version:q}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(b){this._compilerOptions=b||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(b){this._diagnosticsOptions=b||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(b){this._workerOptions=b||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(b){this._inlayHintsOptions=b||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(b){}setEagerModelSync(b){this._eagerModelSync=b}getEagerModelSync(){return this._eagerModelSync}},C=T,M=new c({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),E=new c({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),_=()=>N().then(b=>b.getTypeScriptWorker()),L=()=>N().then(b=>b.getJavaScriptWorker());B.languages.typescript={ModuleKind:F,JsxEmit:x,NewLineKind:v,ScriptTarget:g,ModuleResolutionKind:D,typescriptVersion:C,typescriptDefaults:M,javascriptDefaults:E,getTypeScriptWorker:_,getJavaScriptWorker:L};function N(){return a.e(401).then(a.bind(a,78401))}B.languages.onLanguage("typescript",()=>N().then(b=>b.setupTypeScript(M))),B.languages.onLanguage("javascript",()=>N().then(b=>b.setupJavaScript(E)))},63580:function(Tt,me,a){"use strict";a.d(me,{N:function(){return d}});function p(z,O){let S;return O.length===0?S=z:S=z.replace(/\{(\d+)\}/g,function(j,T){const B=T[0];return typeof O[B]!="undefined"?O[B]:j}),S}function d(z,O,...S){return p(O,S)}},31106:function(Tt,me,a){"use strict";a.d(me,{F:function(){return z},U:function(){return O}});var p=a(16141),d=a(72065);const z=(0,d.yh)("accessibilityService"),O=new p.uy("accessibilityModeEnabled",!1)},58335:function(Tt,me,a){"use strict";a.d(me,{Mm:function(){return pe},Id:function(){return te},vr:function(){return q}});var p=a(65321),d=a(59069),z=a(76033),O=a(10553),S=a(74741),j=a(4669);class T extends S.Wi{constructor(U,ee){super();this._onDidChangeVisibility=this._register(new j.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=(0,p.R3)(U,(0,p.$)(".monaco-dropdown")),this._label=(0,p.R3)(this._element,(0,p.$)(".dropdown-label"));let X=ee.labelRenderer;X||(X=oe=>(oe.textContent=ee.label||"",null));for(const oe of[p.tw.CLICK,p.tw.MOUSE_DOWN,O.t.Tap])this._register((0,p.nm)(this.element,oe,Ce=>p.zB.stop(Ce,!0)));for(const oe of[p.tw.MOUSE_DOWN,O.t.Tap])this._register((0,p.nm)(this._label,oe,Ce=>{Ce instanceof MouseEvent&&Ce.detail>1||(this.visible?this.hide():this.show())}));this._register((0,p.nm)(this._label,p.tw.KEY_UP,oe=>{const Ce=new d.y(oe);(Ce.equals(3)||Ce.equals(10))&&(p.zB.stop(oe,!0),this.visible?this.hide():this.show())}));const le=X(this._label);le&&this._register(le),this._register(O.o.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class B extends T{constructor(U,ee){super(U,ee);this._actions=[],this._contextMenuProvider=ee.contextMenuProvider,this.actions=ee.actions||[],this.actionProvider=ee.actionProvider,this.menuClassName=ee.menuClassName||"",this.menuAsChild=!!ee.menuAsChild}set menuOptions(U){this._menuOptions=U}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(U){this._actions=U}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:U=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(U):void 0,getKeyBinding:U=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(U):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class F extends z.Y{constructor(U,ee,X,le=Object.create(null)){super(null,U,le);this.actionItem=null,this._onDidChangeVisibility=this._register(new j.Q5),this.menuActionsOrProvider=ee,this.contextMenuProvider=X,this.options=le,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(U){this.actionItem=U;const ee=oe=>{this.element=(0,p.R3)(oe,(0,p.$)("a.action-label"));let Ce=[];return typeof this.options.classNames=="string"?Ce=this.options.classNames.split(/\s+/g).filter(ye=>!!ye):this.options.classNames&&(Ce=this.options.classNames),Ce.find(ye=>ye==="icon")||Ce.push("codicon"),this.element.classList.add(...Ce),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},X=Array.isArray(this.menuActionsOrProvider),le={contextMenuProvider:this.contextMenuProvider,labelRenderer:ee,menuAsChild:this.options.menuAsChild,actions:X?this.menuActionsOrProvider:void 0,actionProvider:X?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new B(U,le)),this._register(this.dropdownMenu.onDidChangeVisibility(oe=>{var Ce;(Ce=this.element)===null||Ce===void 0||Ce.setAttribute("aria-expanded",`${oe}`),this._onDidChangeVisibility.fire(oe)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const oe=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return oe.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(U){super.setActionContext(U),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=U:this.dropdownMenu.menuOptions={context:U})}updateEnabled(){var U,ee;const X=!this.getAction().enabled;(U=this.actionItem)===null||U===void 0||U.classList.toggle("disabled",X),(ee=this.element)===null||ee===void 0||ee.classList.toggle("disabled",X)}}var x=a(8030),v=a(9917),g=a(1432),D=a(63580),c=a(84144),C=a(16141),M=a(5606),E=a(72065),_=a(91847),L=a(59422),N=a(26904),b=a(97781),I=function(K,U,ee,X){var le=arguments.length,oe=le<3?U:X===null?X=Object.getOwnPropertyDescriptor(U,ee):X,Ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")oe=Reflect.decorate(K,U,ee,X);else for(var ye=K.length-1;ye>=0;ye--)(Ce=K[ye])&&(oe=(le<3?Ce(oe):le>3?Ce(U,ee,oe):Ce(U,ee))||oe);return le>3&&oe&&Object.defineProperty(U,ee,oe),oe},k=function(K,U){return function(ee,X){U(ee,X,K)}},W=function(K,U,ee,X){function le(oe){return oe instanceof ee?oe:new ee(function(Ce){Ce(oe)})}return new(ee||(ee=Promise))(function(oe,Ce){function ye(ge){try{Te(X.next(ge))}catch(we){Ce(we)}}function ke(ge){try{Te(X.throw(ge))}catch(we){Ce(we)}}function Te(ge){ge.done?oe(ge.value):le(ge.value).then(ye,ke)}Te((X=X.apply(K,U||[])).next())})};function q(K,U,ee,X,le,oe,Ce){const ye=K.getActions(U),ke=typeof X=="string"?Te=>Te===X:X;return de(ye,ee,!1,ke,le,oe,Ce),re(ye)}function re(K){const U=new v.SL;for(const[,ee]of K)for(const X of ee)U.add(X);return U}function de(K,U,ee,X=ye=>ye==="navigation",le=Number.MAX_SAFE_INTEGER,oe=()=>!1,Ce=!1){let ye,ke;Array.isArray(U)?(ye=U,ke=U):(ye=U.primary,ke=U.secondary);const Te=new Set;for(const[ge,we]of K){let ze;X(ge)?(ze=ye,ze.length>0&&Ce&&ze.push(new S.Z0)):(ze=ke,ze.length>0&&ze.push(new S.Z0));for(let Qe of we){ee&&(Qe=Qe instanceof c.U8&&Qe.alt?Qe.alt:Qe);const Pe=ze.push(Qe);Qe instanceof S.wY&&Te.add({group:ge,action:Qe,index:Pe-1})}}for(const{group:ge,action:we,index:ze}of Te){const Qe=X(ge)?ye:ke,Pe=we.actions;(Pe.length<=1||Qe.length+Pe.length-2<=le)&&oe(we,ge,Qe.length)&&Qe.splice(ze,1,...Pe)}if(ye!==ke&&ye.length>le){const ge=ye.splice(le,ye.length-le);ke.unshift(...ge,new S.Z0)}}let pe=class extends z.g{constructor(U,ee,X,le,oe){super(void 0,U,{icon:!!(U.class||U.item.icon),label:!U.class&&!U.item.icon,draggable:ee==null?void 0:ee.draggable});this._keybindingService=X,this._notificationService=le,this._contextKeyService=oe,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new v.XK),this._altKey=p._q.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(U){return W(this,void 0,void 0,function*(){U.preventDefault(),U.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(ee){this._notificationService.error(ee)}})}render(U){super.render(U),U.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let ee=!1,X=this._altKey.keyStatus.altKey||(g.ED||g.IJ)&&this._altKey.keyStatus.shiftKey;const le=()=>{const oe=ee&&X;oe!==this._wantsAltCommand&&(this._wantsAltCommand=oe,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(oe=>{X=oe.altKey||(g.ED||g.IJ)&&oe.shiftKey,le()})),this._register((0,p.nm)(U,"mouseleave",oe=>{ee=!1,le()})),this._register((0,p.nm)(U,"mouseenter",oe=>{ee=!0,le()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const U=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),ee=U&&U.getLabel(),X=this._commandAction.tooltip||this._commandAction.label;let le=ee?(0,D.N)("titleAndKb","{0} ({1})",X,ee):X;if(!this._wantsAltCommand&&this._menuItemAction.alt){const oe=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,Ce=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),ye=Ce&&Ce.getLabel(),ke=ye?(0,D.N)("titleAndKb","{0} ({1})",oe,ye):oe;le+=`
[${x.xo.modifierLabels[g.OS].altKey}] ${ke}`}this.label.title=le}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(U){var ee;this._itemClassDispose.value=void 0;const{element:X,label:le}=this;if(!X||!le)return;const oe=this._commandAction.checked&&((ee=U.toggled)===null||ee===void 0?void 0:ee.icon)?U.toggled.icon:U.icon;if(!!oe)if(b.kS.isThemeIcon(oe)){const Ce=b.kS.asClassNameArray(oe);le.classList.add(...Ce),this._itemClassDispose.value=(0,v.OF)(()=>{le.classList.remove(...Ce)})}else oe.light&&le.style.setProperty("--menu-entry-icon-light",(0,p.wY)(oe.light)),oe.dark&&le.style.setProperty("--menu-entry-icon-dark",(0,p.wY)(oe.dark)),le.classList.add("icon"),this._itemClassDispose.value=(0,v.OF)(()=>{le.classList.remove("icon"),le.style.removeProperty("--menu-entry-icon-light"),le.style.removeProperty("--menu-entry-icon-dark")})}};pe=I([k(2,_.d),k(3,L.lT),k(4,C.i6)],pe);let ae=class extends F{constructor(U,ee,X){var le,oe;const Ce=Object.assign({},ee??Object.create(null),{menuAsChild:(le=ee==null?void 0:ee.menuAsChild)!==null&&le!==void 0?le:!1,classNames:(oe=ee==null?void 0:ee.classNames)!==null&&oe!==void 0?oe:b.kS.isThemeIcon(U.item.icon)?b.kS.asClassName(U.item.icon):void 0});super(U,{getActions:()=>U.actions},X,Ce)}render(U){if(super.render(U),this.element){U.classList.add("menu-entry");const{icon:ee}=this._action.item;ee&&!b.kS.isThemeIcon(ee)&&(this.element.classList.add("icon"),ee.light&&this.element.style.setProperty("--menu-entry-icon-light",(0,p.wY)(ee.light)),ee.dark&&this.element.style.setProperty("--menu-entry-icon-dark",(0,p.wY)(ee.dark)))}}};ae=I([k(2,M.i)],ae);let ue=class extends z.Y{constructor(U,ee,X,le,oe,Ce,ye,ke){var Te,ge,we;super(null,U);this._keybindingService=X,this._notificationService=le,this._contextMenuService=oe,this._menuService=Ce,this._instaService=ye,this._storageService=ke,this._container=null,this._storageKey=`${U.item.submenu._debugName}_lastActionId`;let ze,Qe=ke.get(this._storageKey,1);Qe&&(ze=U.actions.find(Oe=>Qe===Oe.id)),ze||(ze=U.actions[0]),this._defaultAction=this._instaService.createInstance(pe,ze,void 0);const Pe=Object.assign({},ee??Object.create(null),{menuAsChild:(Te=ee==null?void 0:ee.menuAsChild)!==null&&Te!==void 0?Te:!0,classNames:(ge=ee==null?void 0:ee.classNames)!==null&&ge!==void 0?ge:["codicon","codicon-chevron-down"],actionRunner:(we=ee==null?void 0:ee.actionRunner)!==null&&we!==void 0?we:new S.Wi});this._dropdown=new F(U,U.actions,this._contextMenuService,Pe),this._dropdown.actionRunner.onDidRun(Oe=>{Oe.action instanceof c.U8&&this.update(Oe.action)})}update(U){this._storageService.store(this._storageKey,U.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(pe,U,void 0),this._defaultAction.actionRunner=new class extends S.Wi{runAction(ee,X){return W(this,void 0,void 0,function*(){yield ee.run(void 0)})}},this._container&&this._defaultAction.render((0,p.Ce)(this._container,(0,p.$)(".action-container")))}setActionContext(U){super.setActionContext(U),this._defaultAction.setActionContext(U),this._dropdown.setActionContext(U)}render(U){this._container=U,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const ee=(0,p.$)(".action-container");this._defaultAction.render((0,p.R3)(this._container,ee)),this._register((0,p.nm)(ee,p.tw.KEY_DOWN,le=>{const oe=new d.y(le);oe.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),oe.stopPropagation())}));const X=(0,p.$)(".dropdown-action-container");this._dropdown.render((0,p.R3)(this._container,X)),this._register((0,p.nm)(X,p.tw.KEY_DOWN,le=>{var oe;const Ce=new d.y(le);Ce.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(oe=this._defaultAction.element)===null||oe===void 0||oe.focus(),Ce.stopPropagation())}))}focus(U){U?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(U){U?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};ue=I([k(2,_.d),k(3,L.lT),k(4,M.i),k(5,c.co),k(6,E.TG),k(7,N.Uy)],ue);function te(K,U,ee){return U instanceof c.U8?K.createInstance(pe,U,void 0):U instanceof c.NZ?U.item.rememberDefaultAction?K.createInstance(ue,U,ee):K.createInstance(ae,U,ee):void 0}},84144:function(Tt,me,a){"use strict";a.d(me,{vr:function(){return D},eH:function(){return c},co:function(){return C},BH:function(){return M},NZ:function(){return E},U8:function(){return _}});var p=a(74741),d=a(73046),z=a(4669),O=a(53725),S=a(9917),j=a(91741),T=a(94565),B=a(16141),F=a(72065),x=a(97781),v=function(L,N,b,I){var k=arguments.length,W=k<3?N:I===null?I=Object.getOwnPropertyDescriptor(N,b):I,q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(L,N,b,I);else for(var re=L.length-1;re>=0;re--)(q=L[re])&&(W=(k<3?q(W):k>3?q(N,b,W):q(N,b))||W);return k>3&&W&&Object.defineProperty(N,b,W),W},g=function(L,N){return function(b,I){N(b,I,L)}};function D(L){return L.command!==void 0}class c{constructor(N){this.id=c._idPool++,this._debugName=N}}c._idPool=0,c.CommandPalette=new c("CommandPalette"),c.DebugBreakpointsContext=new c("DebugBreakpointsContext"),c.DebugCallStackContext=new c("DebugCallStackContext"),c.DebugConsoleContext=new c("DebugConsoleContext"),c.DebugVariablesContext=new c("DebugVariablesContext"),c.DebugWatchContext=new c("DebugWatchContext"),c.DebugToolBar=new c("DebugToolBar"),c.EditorContext=new c("EditorContext"),c.SimpleEditorContext=new c("SimpleEditorContext"),c.EditorContextCopy=new c("EditorContextCopy"),c.EditorContextPeek=new c("EditorContextPeek"),c.EditorTitle=new c("EditorTitle"),c.EditorTitleRun=new c("EditorTitleRun"),c.EditorTitleContext=new c("EditorTitleContext"),c.EmptyEditorGroup=new c("EmptyEditorGroup"),c.EmptyEditorGroupContext=new c("EmptyEditorGroupContext"),c.ExplorerContext=new c("ExplorerContext"),c.ExtensionContext=new c("ExtensionContext"),c.GlobalActivity=new c("GlobalActivity"),c.LayoutControlMenuSubmenu=new c("LayoutControlMenuSubmenu"),c.LayoutControlMenu=new c("LayoutControlMenu"),c.MenubarMainMenu=new c("MenubarMainMenu"),c.MenubarAppearanceMenu=new c("MenubarAppearanceMenu"),c.MenubarDebugMenu=new c("MenubarDebugMenu"),c.MenubarEditMenu=new c("MenubarEditMenu"),c.MenubarCopy=new c("MenubarCopy"),c.MenubarFileMenu=new c("MenubarFileMenu"),c.MenubarGoMenu=new c("MenubarGoMenu"),c.MenubarHelpMenu=new c("MenubarHelpMenu"),c.MenubarLayoutMenu=new c("MenubarLayoutMenu"),c.MenubarNewBreakpointMenu=new c("MenubarNewBreakpointMenu"),c.MenubarPanelAlignmentMenu=new c("MenubarPanelAlignmentMenu"),c.MenubarPanelPositionMenu=new c("MenubarPanelPositionMenu"),c.MenubarPreferencesMenu=new c("MenubarPreferencesMenu"),c.MenubarRecentMenu=new c("MenubarRecentMenu"),c.MenubarSelectionMenu=new c("MenubarSelectionMenu"),c.MenubarSwitchEditorMenu=new c("MenubarSwitchEditorMenu"),c.MenubarSwitchGroupMenu=new c("MenubarSwitchGroupMenu"),c.MenubarTerminalMenu=new c("MenubarTerminalMenu"),c.MenubarViewMenu=new c("MenubarViewMenu"),c.MenubarHomeMenu=new c("MenubarHomeMenu"),c.OpenEditorsContext=new c("OpenEditorsContext"),c.ProblemsPanelContext=new c("ProblemsPanelContext"),c.SCMChangeContext=new c("SCMChangeContext"),c.SCMResourceContext=new c("SCMResourceContext"),c.SCMResourceFolderContext=new c("SCMResourceFolderContext"),c.SCMResourceGroupContext=new c("SCMResourceGroupContext"),c.SCMSourceControl=new c("SCMSourceControl"),c.SCMTitle=new c("SCMTitle"),c.SearchContext=new c("SearchContext"),c.StatusBarWindowIndicatorMenu=new c("StatusBarWindowIndicatorMenu"),c.StatusBarRemoteIndicatorMenu=new c("StatusBarRemoteIndicatorMenu"),c.TestItem=new c("TestItem"),c.TestItemGutter=new c("TestItemGutter"),c.TestPeekElement=new c("TestPeekElement"),c.TestPeekTitle=new c("TestPeekTitle"),c.TouchBarContext=new c("TouchBarContext"),c.TitleBarContext=new c("TitleBarContext"),c.TunnelContext=new c("TunnelContext"),c.TunnelPrivacy=new c("TunnelPrivacy"),c.TunnelProtocol=new c("TunnelProtocol"),c.TunnelPortInline=new c("TunnelInline"),c.TunnelTitle=new c("TunnelTitle"),c.TunnelLocalAddressInline=new c("TunnelLocalAddressInline"),c.TunnelOriginInline=new c("TunnelOriginInline"),c.ViewItemContext=new c("ViewItemContext"),c.ViewContainerTitle=new c("ViewContainerTitle"),c.ViewContainerTitleContext=new c("ViewContainerTitleContext"),c.ViewTitle=new c("ViewTitle"),c.ViewTitleContext=new c("ViewTitleContext"),c.CommentThreadTitle=new c("CommentThreadTitle"),c.CommentThreadActions=new c("CommentThreadActions"),c.CommentTitle=new c("CommentTitle"),c.CommentActions=new c("CommentActions"),c.InteractiveToolbar=new c("InteractiveToolbar"),c.InteractiveCellTitle=new c("InteractiveCellTitle"),c.InteractiveCellExecute=new c("InteractiveCellExecute"),c.InteractiveInputExecute=new c("InteractiveInputExecute"),c.NotebookToolbar=new c("NotebookToolbar"),c.NotebookCellTitle=new c("NotebookCellTitle"),c.NotebookCellInsert=new c("NotebookCellInsert"),c.NotebookCellBetween=new c("NotebookCellBetween"),c.NotebookCellListTop=new c("NotebookCellTop"),c.NotebookCellExecute=new c("NotebookCellExecute"),c.NotebookCellExecutePrimary=new c("NotebookCellExecutePrimary"),c.NotebookDiffCellInputTitle=new c("NotebookDiffCellInputTitle"),c.NotebookDiffCellMetadataTitle=new c("NotebookDiffCellMetadataTitle"),c.NotebookDiffCellOutputsTitle=new c("NotebookDiffCellOutputsTitle"),c.NotebookOutputToolbar=new c("NotebookOutputToolbar"),c.NotebookEditorLayoutConfigure=new c("NotebookEditorLayoutConfigure"),c.BulkEditTitle=new c("BulkEditTitle"),c.BulkEditContext=new c("BulkEditContext"),c.TimelineItemContext=new c("TimelineItemContext"),c.TimelineTitle=new c("TimelineTitle"),c.TimelineTitleContext=new c("TimelineTitleContext"),c.AccountsContext=new c("AccountsContext"),c.PanelTitle=new c("PanelTitle"),c.AuxiliaryBarTitle=new c("AuxiliaryBarTitle"),c.TerminalInstanceContext=new c("TerminalInstanceContext"),c.TerminalEditorInstanceContext=new c("TerminalEditorInstanceContext"),c.TerminalNewDropdownContext=new c("TerminalNewDropdownContext"),c.TerminalTabContext=new c("TerminalTabContext"),c.TerminalTabEmptyAreaContext=new c("TerminalTabEmptyAreaContext"),c.TerminalInlineTabContext=new c("TerminalInlineTabContext"),c.WebviewContext=new c("WebviewContext"),c.InlineCompletionsActions=new c("InlineCompletionsActions"),c.NewFile=new c("NewFile");const C=(0,F.yh)("menuService"),M=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new z.Q5,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:L=>L===c.CommandPalette}}addCommand(L){return this.addCommands(O.$.single(L))}addCommands(L){for(const N of L)this._commands.set(N.id,N);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),(0,S.OF)(()=>{let N=!1;for(const b of L)N=this._commands.delete(b.id)||N;N&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(L){return this._commands.get(L)}getCommands(){const L=new Map;return this._commands.forEach((N,b)=>L.set(b,N)),L}appendMenuItem(L,N){return this.appendMenuItems(O.$.single({id:L,item:N}))}appendMenuItems(L){const N=new Set,b=new j.S;for(const{id:I,item:k}of L){let W=this._menuItems.get(I);W||(W=new j.S,this._menuItems.set(I,W)),b.push(W.push(k)),N.add(I)}return this._onDidChangeMenu.fire(N),(0,S.OF)(()=>{if(b.size>0){for(let I of b)I();this._onDidChangeMenu.fire(N),b.clear()}})}getMenuItems(L){let N;return this._menuItems.has(L)?N=[...this._menuItems.get(L)]:N=[],L===c.CommandPalette&&this._appendImplicitItems(N),N}_appendImplicitItems(L){const N=new Set;for(const b of L)D(b)&&(N.add(b.command.id),b.alt&&N.add(b.alt.id));this._commands.forEach((b,I)=>{N.has(I)||L.push({command:b})})}};class E extends p.wY{constructor(N,b,I,k){super(`submenuitem.${N.submenu.id}`,typeof N.title=="string"?N.title:N.title.value,[],"submenu");this.item=N,this._menuService=b,this._contextKeyService=I,this._options=k}get actions(){const N=[],b=this._menuService.createMenu(this.item.submenu,this._contextKeyService),I=b.getActions(this._options);b.dispose();for(const[,k]of I)k.length>0&&(N.push(...k),N.push(new p.Z0));return N.length&&N.pop(),N}}let _=class TS{constructor(N,b,I,k,W){var q,re;if(this._commandService=W,this.id=N.id,this.label=(I==null?void 0:I.renderShortTitle)&&N.shortTitle?typeof N.shortTitle=="string"?N.shortTitle:N.shortTitle.value:typeof N.title=="string"?N.title:N.title.value,this.tooltip=(re=typeof N.tooltip=="string"?N.tooltip:(q=N.tooltip)===null||q===void 0?void 0:q.value)!==null&&re!==void 0?re:"",this.enabled=!N.precondition||k.contextMatchesRules(N.precondition),this.checked=void 0,N.toggled){const de=N.toggled.condition?N.toggled:{condition:N.toggled};this.checked=k.contextMatchesRules(de.condition),this.checked&&de.tooltip&&(this.tooltip=typeof de.tooltip=="string"?de.tooltip:de.tooltip.value),de.title&&(this.label=typeof de.title=="string"?de.title:de.title.value)}this.item=N,this.alt=b?new TS(b,void 0,I,k,W):void 0,this._options=I,x.kS.isThemeIcon(N.icon)&&(this.class=d.dT.asClassName(N.icon))}dispose(){}run(...N){var b,I;let k=[];return((b=this._options)===null||b===void 0?void 0:b.arg)&&(k=[...k,this._options.arg]),((I=this._options)===null||I===void 0?void 0:I.shouldForwardArgs)&&(k=[...k,...N]),this._commandService.executeCommand(this.id,...k)}};_=v([g(3,B.i6),g(4,T.Hy)],_)},84972:function(Tt,me,a){"use strict";a.d(me,{p:function(){return d}});var p=a(72065);const d=(0,p.yh)("clipboardService")},94565:function(Tt,me,a){"use strict";a.d(me,{Hy:function(){return T},P0:function(){return B}});var p=a(4669),d=a(53725),z=a(9917),O=a(91741),S=a(98401),j=a(72065);const T=(0,j.yh)("commandService"),B=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new p.Q5,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(x,v){if(!x)throw new Error("invalid command");if(typeof x=="string"){if(!v)throw new Error("invalid command");return this.registerCommand({id:x,handler:v})}if(x.description){const M=[];for(let _ of x.description.args)M.push(_.constraint);const E=x.handler;x.handler=function(_,...L){return(0,S.D8)(L,M),E(_,...L)}}const{id:g}=x;let D=this._commands.get(g);D||(D=new O.S,this._commands.set(g,D));let c=D.unshift(x),C=(0,z.OF)(()=>{c();const M=this._commands.get(g);(M==null?void 0:M.isEmpty())&&this._commands.delete(g)});return this._onDidRegisterCommand.fire(g),C}registerCommandAlias(x,v){return B.registerCommand(x,(g,...D)=>g.get(T).executeCommand(v,...D))}getCommand(x){const v=this._commands.get(x);if(!(!v||v.isEmpty()))return d.$.first(v)}getCommands(){const x=new Map;for(const v of this._commands.keys()){const g=this.getCommand(v);g&&x.set(v,g)}return x}},F={_serviceBrand:void 0,onWillExecuteCommand:()=>z.JT.None,onDidExecuteCommand:()=>z.JT.None,executeCommand(){return Promise.resolve(void 0)}};B.registerCommand("noop",()=>{})},33108:function(Tt,me,a){"use strict";a.d(me,{Ui:function(){return d},Od:function(){return z},KV:function(){return O},xL:function(){return S},Mt:function(){return T}});var p=a(72065);const d=(0,p.yh)("configurationService");function z(B,F){const x=Object.create(null);for(let v in B)O(x,v,B[v],F);return x}function O(B,F,x,v){const g=F.split("."),D=g.pop();let c=B;for(let C=0;C<g.length;C++){let M=g[C],E=c[M];switch(typeof E){case"undefined":E=c[M]=Object.create(null);break;case"object":break;default:v(`Ignoring ${F} as ${g.slice(0,C+1).join(".")} is ${JSON.stringify(E)}`);return}c=E}if(typeof c=="object"&&c!==null)try{c[D]=x}catch(C){v(`Ignoring ${F} as ${g.join(".")} is ${JSON.stringify(c)}`)}else v(`Ignoring ${F} as ${g.join(".")} is ${JSON.stringify(c)}`)}function S(B,F){const x=F.split(".");j(B,x)}function j(B,F){const x=F.shift();if(F.length===0){delete B[x];return}if(Object.keys(B).indexOf(x)!==-1){const v=B[x];typeof v=="object"&&!Array.isArray(v)&&(j(v,F),Object.keys(v).length===0&&delete B[x])}}function T(B,F,x){function v(c,C){let M=c;for(const E of C){if(typeof M!="object"||M===null)return;M=M[E]}return M}const g=F.split("."),D=v(B,g);return typeof D=="undefined"?x:D}},23193:function(Tt,me,a){"use strict";a.d(me,{IP:function(){return T},eU:function(){return N},ny:function(){return b}});var p=a(9488),d=a(4669),z=a(98401),O=a(63580),S=a(81294),j=a(89872);const T={Configuration:"base.contributions.configuration"},B={properties:{},patternProperties:{}},F={properties:{},patternProperties:{}},x={properties:{},patternProperties:{}},v={properties:{},patternProperties:{}},g={properties:{},patternProperties:{}},D={properties:{},patternProperties:{}},c="vscode://schemas/settings/resourceLanguage",C=j.B.as(S.I.JSONContribution);class M{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new d.Q5,this._onDidUpdateConfiguration=new d.Q5,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:O.N("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},C.registerSchema(c,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(re,de=!0){this.registerConfigurations([re],de)}registerConfigurations(re,de=!0){const pe=this.doRegisterConfigurations(re,de);C.registerSchema(c,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:pe})}registerDefaultConfigurations(re){var de;const pe=[],ae=[];for(const{overrides:ue,source:te}of re)for(const K in ue)if(pe.push(K),N.test(K)){const U=Object.assign(Object.assign({},((de=this.configurationDefaultsOverrides.get(K))===null||de===void 0?void 0:de.value)||{}),ue[K]);this.configurationDefaultsOverrides.set(K,{source:te,value:U});const ee={type:"object",default:U,description:O.N("defaultLanguageConfiguration.description","Configure settings to be overridden for {0} language.",K),$ref:c,defaultDefaultValue:U,source:z.HD(te)?void 0:te};ae.push(...b(K)),this.configurationProperties[K]=ee,this.defaultLanguageConfigurationOverridesNode.properties[K]=ee}else{this.configurationDefaultsOverrides.set(K,{value:ue[K],source:te});const U=this.configurationProperties[K];U&&(this.updatePropertyDefaultValue(K,U),this.updateSchema(K,U))}this.registerOverrideIdentifiers(ae),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:pe,defaultsOverrides:!0})}registerOverrideIdentifiers(re){for(const de of re)this.overrideIdentifiers.add(de);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(re,de){const pe=[];return re.forEach(ae=>{pe.push(...this.validateAndRegisterProperties(ae,de,ae.extensionInfo,ae.restrictedProperties)),this.configurationContributors.push(ae),this.registerJSONConfiguration(ae)}),pe}validateAndRegisterProperties(re,de=!0,pe,ae,ue=3){ue=z.Jp(re.scope)?ue:re.scope;let te=[],K=re.properties;if(K)for(let ee in K){if(de&&W(ee)){delete K[ee];continue}const X=K[ee];if(X.source=pe,X.defaultDefaultValue=K[ee].default,this.updatePropertyDefaultValue(ee,X),N.test(ee)?X.scope=void 0:(X.scope=z.Jp(X.scope)?ue:X.scope,X.restricted=z.Jp(X.restricted)?!!(ae==null?void 0:ae.includes(ee)):X.restricted),K[ee].hasOwnProperty("included")&&!K[ee].included){this.excludedConfigurationProperties[ee]=K[ee],delete K[ee];continue}else this.configurationProperties[ee]=K[ee];!K[ee].deprecationMessage&&K[ee].markdownDeprecationMessage&&(K[ee].deprecationMessage=K[ee].markdownDeprecationMessage),te.push(ee)}let U=re.allOf;if(U)for(let ee of U)te.push(...this.validateAndRegisterProperties(ee,de,pe,ae,ue));return te}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(re){const de=pe=>{let ae=pe.properties;if(ae)for(const te in ae)this.updateSchema(te,ae[te]);let ue=pe.allOf;ue&&ue.forEach(de)};de(re)}updateSchema(re,de){switch(B.properties[re]=de,de.scope){case 1:F.properties[re]=de;break;case 2:x.properties[re]=de;break;case 6:v.properties[re]=de;break;case 3:g.properties[re]=de;break;case 4:D.properties[re]=de;break;case 5:D.properties[re]=de,this.resourceLanguageSettingsSchema.properties[re]=de;break}}updateOverridePropertyPatternKey(){for(const re of this.overrideIdentifiers.values()){const de=`[${re}]`,pe={type:"object",description:O.N("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:O.N("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:c};this.updatePropertyDefaultValue(de,pe),B.properties[de]=pe,F.properties[de]=pe,x.properties[de]=pe,v.properties[de]=pe,g.properties[de]=pe,D.properties[de]=pe}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){const re={type:"object",description:O.N("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:O.N("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:c};B.patternProperties[L]=re,F.patternProperties[L]=re,x.patternProperties[L]=re,v.patternProperties[L]=re,g.patternProperties[L]=re,D.patternProperties[L]=re,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(re,de){const pe=this.configurationDefaultsOverrides.get(re);let ae=pe==null?void 0:pe.value,ue=pe==null?void 0:pe.source;z.o8(ae)&&(ae=de.defaultDefaultValue,ue=void 0),z.o8(ae)&&(ae=I(de.type)),de.default=ae,de.defaultValueSource=ue}}const E="\\[([^\\]]+)\\]",_=new RegExp(E,"g"),L=`^(${E})+$`,N=new RegExp(L);function b(q){const re=[];if(N.test(q)){let de=_.exec(q);for(;de==null?void 0:de.length;){const pe=de[1].trim();pe&&re.push(pe),de=_.exec(q)}}return(0,p.EB)(re)}function I(q){switch(Array.isArray(q)?q[0]:q){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const k=new M;j.B.add(T.Configuration,k);function W(q){return q.trim()?N.test(q)?O.N("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",q):k.getConfigurationProperties()[q]!==void 0?O.N("config.property.duplicate","Cannot register '{0}'. This property is already registered.",q):null:O.N("config.property.empty","Cannot register an empty property")}},16141:function(Tt,me,a){"use strict";a.d(me,{Ao:function(){return j},Fb:function(){return T},uy:function(){return de},i6:function(){return pe},Eq:function(){return ae},K8:function(){return K}});var p=a(1432),d=a(25924),z=a(72065);const O=new Map;O.set("false",!1),O.set("true",!0),O.set("isMac",p.dz),O.set("isLinux",p.IJ),O.set("isWindows",p.ED),O.set("isWeb",p.$L),O.set("isMacNative",p.dz&&!p.$L),O.set("isEdge",p.un),O.set("isFirefox",p.vU),O.set("isChrome",p.i7),O.set("isSafari",p.G6);const S=Object.prototype.hasOwnProperty;class j{static has(X){return v.create(X)}static equals(X,le){return g.create(X,le)}static regex(X,le){return I.create(X,le)}static not(X){return M.create(X)}static and(...X){return q.create(X,null)}static or(...X){return re.create(X,null,!0)}static deserialize(X,le=!1){if(!!X)return this._deserializeOrExpression(X,le)}static _deserializeOrExpression(X,le){let oe=X.split("||");return re.create(oe.map(Ce=>this._deserializeAndExpression(Ce,le)),null,!0)}static _deserializeAndExpression(X,le){let oe=X.split("&&");return q.create(oe.map(Ce=>this._deserializeOne(Ce,le)),null)}static _deserializeOne(X,le){if(X=X.trim(),X.indexOf("!=")>=0){let oe=X.split("!=");return C.create(oe[0].trim(),this._deserializeValue(oe[1],le))}if(X.indexOf("==")>=0){let oe=X.split("==");return g.create(oe[0].trim(),this._deserializeValue(oe[1],le))}if(X.indexOf("=~")>=0){let oe=X.split("=~");return I.create(oe[0].trim(),this._deserializeRegexValue(oe[1],le))}if(X.indexOf(" in ")>=0){let oe=X.split(" in ");return D.create(oe[0].trim(),oe[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(X)){const oe=X.split(">=");return L.create(oe[0].trim(),oe[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(X)){const oe=X.split(">");return _.create(oe[0].trim(),oe[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(X)){const oe=X.split("<=");return b.create(oe[0].trim(),oe[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(X)){const oe=X.split("<");return N.create(oe[0].trim(),oe[1].trim())}return/^\!\s*/.test(X)?M.create(X.substr(1).trim()):v.create(X)}static _deserializeValue(X,le){if(X=X.trim(),X==="true")return!0;if(X==="false")return!1;let oe=/^'([^']*)'$/.exec(X);return oe?oe[1].trim():X}static _deserializeRegexValue(X,le){if((0,d.m5)(X)){if(le)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let oe=X.indexOf("/"),Ce=X.lastIndexOf("/");if(oe===Ce||oe<0){if(le)throw new Error(`bad regexp-value '${X}', missing /-enclosure`);return console.warn(`bad regexp-value '${X}', missing /-enclosure`),null}let ye=X.slice(oe+1,Ce),ke=X[Ce+1]==="i"?"i":"";try{return new RegExp(ye,ke)}catch(Te){if(le)throw new Error(`bad regexp-value '${X}', parse error: ${Te}`);return console.warn(`bad regexp-value '${X}', parse error: ${Te}`),null}}}function T(ee,X){const le=ee?ee.substituteConstants():void 0,oe=X?X.substituteConstants():void 0;return!le&&!oe?!0:!le||!oe?!1:le.equals(oe)}function B(ee,X){return ee.cmp(X)}class F{constructor(){this.type=0}cmp(X){return this.type-X.type}equals(X){return X.type===this.type}substituteConstants(){return this}evaluate(X){return!1}serialize(){return"false"}keys(){return[]}negate(){return x.INSTANCE}}F.INSTANCE=new F;class x{constructor(){this.type=1}cmp(X){return this.type-X.type}equals(X){return X.type===this.type}substituteConstants(){return this}evaluate(X){return!0}serialize(){return"true"}keys(){return[]}negate(){return F.INSTANCE}}x.INSTANCE=new x;class v{constructor(X,le){this.key=X,this.negated=le,this.type=2}static create(X,le=null){const oe=O.get(X);return typeof oe=="boolean"?oe?x.INSTANCE:F.INSTANCE:new v(X,le)}cmp(X){return X.type!==this.type?this.type-X.type:ue(this.key,X.key)}equals(X){return X.type===this.type?this.key===X.key:!1}substituteConstants(){const X=O.get(this.key);return typeof X=="boolean"?X?x.INSTANCE:F.INSTANCE:this}evaluate(X){return!!X.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=M.create(this.key,this)),this.negated}}class g{constructor(X,le,oe){this.key=X,this.value=le,this.negated=oe,this.type=4}static create(X,le,oe=null){if(typeof le=="boolean")return le?v.create(X,oe):M.create(X,oe);const Ce=O.get(X);return typeof Ce=="boolean"?le===(Ce?"true":"false")?x.INSTANCE:F.INSTANCE:new g(X,le,oe)}cmp(X){return X.type!==this.type?this.type-X.type:te(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type?this.key===X.key&&this.value===X.value:!1}substituteConstants(){const X=O.get(this.key);if(typeof X=="boolean"){const le=X?"true":"false";return this.value===le?x.INSTANCE:F.INSTANCE}return this}evaluate(X){return X.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=C.create(this.key,this.value,this)),this.negated}}class D{constructor(X,le){this.key=X,this.valueKey=le,this.type=10,this.negated=null}static create(X,le){return new D(X,le)}cmp(X){return X.type!==this.type?this.type-X.type:te(this.key,this.valueKey,X.key,X.valueKey)}equals(X){return X.type===this.type?this.key===X.key&&this.valueKey===X.valueKey:!1}substituteConstants(){return this}evaluate(X){const le=X.getValue(this.valueKey),oe=X.getValue(this.key);return Array.isArray(le)?le.indexOf(oe)>=0:typeof oe=="string"&&typeof le=="object"&&le!==null?S.call(le,oe):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=c.create(this)),this.negated}}class c{constructor(X){this._actual=X,this.type=11}static create(X){return new c(X)}cmp(X){return X.type!==this.type?this.type-X.type:this._actual.cmp(X._actual)}equals(X){return X.type===this.type?this._actual.equals(X._actual):!1}substituteConstants(){return this}evaluate(X){return!this._actual.evaluate(X)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class C{constructor(X,le,oe){this.key=X,this.value=le,this.negated=oe,this.type=5}static create(X,le,oe=null){if(typeof le=="boolean")return le?M.create(X,oe):v.create(X,oe);const Ce=O.get(X);return typeof Ce=="boolean"?le===(Ce?"true":"false")?F.INSTANCE:x.INSTANCE:new C(X,le,oe)}cmp(X){return X.type!==this.type?this.type-X.type:te(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type?this.key===X.key&&this.value===X.value:!1}substituteConstants(){const X=O.get(this.key);if(typeof X=="boolean"){const le=X?"true":"false";return this.value===le?F.INSTANCE:x.INSTANCE}return this}evaluate(X){return X.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=g.create(this.key,this.value,this)),this.negated}}class M{constructor(X,le){this.key=X,this.negated=le,this.type=3}static create(X,le=null){const oe=O.get(X);return typeof oe=="boolean"?oe?F.INSTANCE:x.INSTANCE:new M(X,le)}cmp(X){return X.type!==this.type?this.type-X.type:ue(this.key,X.key)}equals(X){return X.type===this.type?this.key===X.key:!1}substituteConstants(){const X=O.get(this.key);return typeof X=="boolean"?X?F.INSTANCE:x.INSTANCE:this}evaluate(X){return!X.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=v.create(this.key,this)),this.negated}}function E(ee,X){if(typeof ee=="string"){const le=parseFloat(ee);isNaN(le)||(ee=le)}return typeof ee=="string"||typeof ee=="number"?X(ee):F.INSTANCE}class _{constructor(X,le,oe){this.key=X,this.value=le,this.negated=oe,this.type=12}static create(X,le,oe=null){return E(le,Ce=>new _(X,Ce,oe))}cmp(X){return X.type!==this.type?this.type-X.type:te(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type?this.key===X.key&&this.value===X.value:!1}substituteConstants(){return this}evaluate(X){return typeof this.value=="string"?!1:parseFloat(X.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=b.create(this.key,this.value,this)),this.negated}}class L{constructor(X,le,oe){this.key=X,this.value=le,this.negated=oe,this.type=13}static create(X,le,oe=null){return E(le,Ce=>new L(X,Ce,oe))}cmp(X){return X.type!==this.type?this.type-X.type:te(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type?this.key===X.key&&this.value===X.value:!1}substituteConstants(){return this}evaluate(X){return typeof this.value=="string"?!1:parseFloat(X.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=N.create(this.key,this.value,this)),this.negated}}class N{constructor(X,le,oe){this.key=X,this.value=le,this.negated=oe,this.type=14}static create(X,le,oe=null){return E(le,Ce=>new N(X,Ce,oe))}cmp(X){return X.type!==this.type?this.type-X.type:te(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type?this.key===X.key&&this.value===X.value:!1}substituteConstants(){return this}evaluate(X){return typeof this.value=="string"?!1:parseFloat(X.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=L.create(this.key,this.value,this)),this.negated}}class b{constructor(X,le,oe){this.key=X,this.value=le,this.negated=oe,this.type=15}static create(X,le,oe=null){return E(le,Ce=>new b(X,Ce,oe))}cmp(X){return X.type!==this.type?this.type-X.type:te(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type?this.key===X.key&&this.value===X.value:!1}substituteConstants(){return this}evaluate(X){return typeof this.value=="string"?!1:parseFloat(X.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_.create(this.key,this.value,this)),this.negated}}class I{constructor(X,le){this.key=X,this.regexp=le,this.type=7,this.negated=null}static create(X,le){return new I(X,le)}cmp(X){if(X.type!==this.type)return this.type-X.type;if(this.key<X.key)return-1;if(this.key>X.key)return 1;const le=this.regexp?this.regexp.source:"",oe=X.regexp?X.regexp.source:"";return le<oe?-1:le>oe?1:0}equals(X){if(X.type===this.type){const le=this.regexp?this.regexp.source:"",oe=X.regexp?X.regexp.source:"";return this.key===X.key&&le===oe}return!1}substituteConstants(){return this}evaluate(X){let le=X.getValue(this.key);return this.regexp?this.regexp.test(le):!1}serialize(){const X=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${X}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=k.create(this)),this.negated}}class k{constructor(X){this._actual=X,this.type=8}static create(X){return new k(X)}cmp(X){return X.type!==this.type?this.type-X.type:this._actual.cmp(X._actual)}equals(X){return X.type===this.type?this._actual.equals(X._actual):!1}substituteConstants(){return this}evaluate(X){return!this._actual.evaluate(X)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function W(ee){let X=null;for(let le=0,oe=ee.length;le<oe;le++){const Ce=ee[le].substituteConstants();if(ee[le]!==Ce&&X===null){X=[];for(let ye=0;ye<le;ye++)X[ye]=ee[ye]}X!==null&&(X[le]=Ce)}return X===null?ee:X}class q{constructor(X,le){this.expr=X,this.negated=le,this.type=6}static create(X,le){return q._normalizeArr(X,le)}cmp(X){if(X.type!==this.type)return this.type-X.type;if(this.expr.length<X.expr.length)return-1;if(this.expr.length>X.expr.length)return 1;for(let le=0,oe=this.expr.length;le<oe;le++){const Ce=B(this.expr[le],X.expr[le]);if(Ce!==0)return Ce}return 0}equals(X){if(X.type===this.type){if(this.expr.length!==X.expr.length)return!1;for(let le=0,oe=this.expr.length;le<oe;le++)if(!this.expr[le].equals(X.expr[le]))return!1;return!0}return!1}substituteConstants(){const X=W(this.expr);return X===this.expr?this:q.create(X,this.negated)}evaluate(X){for(let le=0,oe=this.expr.length;le<oe;le++)if(!this.expr[le].evaluate(X))return!1;return!0}static _normalizeArr(X,le){const oe=[];let Ce=!1;for(const ye of X)if(!!ye){if(ye.type===1){Ce=!0;continue}if(ye.type===0)return F.INSTANCE;if(ye.type===6){oe.push(...ye.expr);continue}oe.push(ye)}if(oe.length===0&&Ce)return x.INSTANCE;if(oe.length!==0){if(oe.length===1)return oe[0];oe.sort(B);for(let ye=1;ye<oe.length;ye++)oe[ye-1].equals(oe[ye])&&(oe.splice(ye,1),ye--);if(oe.length===1)return oe[0];for(;oe.length>1;){const ye=oe[oe.length-1];if(ye.type!==9)break;oe.pop();const ke=oe.pop(),Te=oe.length===0,ge=re.create(ye.expr.map(we=>q.create([we,ke],null)),null,Te);ge&&(oe.push(ge),oe.sort(B))}return oe.length===1?oe[0]:new q(oe,le)}}serialize(){return this.expr.map(X=>X.serialize()).join(" && ")}keys(){const X=[];for(let le of this.expr)X.push(...le.keys());return X}negate(){if(!this.negated){const X=[];for(let le of this.expr)X.push(le.negate());this.negated=re.create(X,this,!0)}return this.negated}}class re{constructor(X,le){this.expr=X,this.negated=le,this.type=9}static create(X,le,oe){return re._normalizeArr(X,le,oe)}cmp(X){if(X.type!==this.type)return this.type-X.type;if(this.expr.length<X.expr.length)return-1;if(this.expr.length>X.expr.length)return 1;for(let le=0,oe=this.expr.length;le<oe;le++){const Ce=B(this.expr[le],X.expr[le]);if(Ce!==0)return Ce}return 0}equals(X){if(X.type===this.type){if(this.expr.length!==X.expr.length)return!1;for(let le=0,oe=this.expr.length;le<oe;le++)if(!this.expr[le].equals(X.expr[le]))return!1;return!0}return!1}substituteConstants(){const X=W(this.expr);return X===this.expr?this:re.create(X,this.negated,!1)}evaluate(X){for(let le=0,oe=this.expr.length;le<oe;le++)if(this.expr[le].evaluate(X))return!0;return!1}static _normalizeArr(X,le,oe){let Ce=[],ye=!1;if(X){for(let ke=0,Te=X.length;ke<Te;ke++){const ge=X[ke];if(!!ge){if(ge.type===0){ye=!0;continue}if(ge.type===1)return x.INSTANCE;if(ge.type===9){Ce=Ce.concat(ge.expr);continue}Ce.push(ge)}}if(Ce.length===0&&ye)return F.INSTANCE;Ce.sort(B)}if(Ce.length!==0){if(Ce.length===1)return Ce[0];for(let ke=1;ke<Ce.length;ke++)Ce[ke-1].equals(Ce[ke])&&(Ce.splice(ke,1),ke--);if(Ce.length===1)return Ce[0];if(oe){for(let ke=0;ke<Ce.length;ke++)for(let Te=ke+1;Te<Ce.length;Te++)K(Ce[ke],Ce[Te])&&(Ce.splice(Te,1),Te--);if(Ce.length===1)return Ce[0]}return new re(Ce,le)}}serialize(){return this.expr.map(X=>X.serialize()).join(" || ")}keys(){const X=[];for(let le of this.expr)X.push(...le.keys());return X}negate(){if(!this.negated){let X=[];for(let le of this.expr)X.push(le.negate());for(;X.length>1;){const le=X.shift(),oe=X.shift(),Ce=[];for(const ke of U(le))for(const Te of U(oe))Ce.push(q.create([ke,Te],null));const ye=X.length===0;X.unshift(re.create(Ce,null,ye))}this.negated=X[0]}return this.negated}}class de extends v{constructor(X,le,oe){super(X,null);this._defaultValue=le,typeof oe=="object"?de._info.push(Object.assign(Object.assign({},oe),{key:X})):oe!==!0&&de._info.push({key:X,description:oe,type:le!=null?typeof le:void 0})}static all(){return de._info.values()}bindTo(X){return X.createKey(this.key,this._defaultValue)}getValue(X){return X.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(X){return g.create(this.key,X)}}de._info=[];const pe=(0,z.yh)("contextKeyService"),ae="setContext";function ue(ee,X){return ee<X?-1:ee>X?1:0}function te(ee,X,le,oe){return ee<le?-1:ee>le?1:X<oe?-1:X>oe?1:0}function K(ee,X){if(X.type===6&&ee.type!==9&&ee.type!==6){for(const Ce of X.expr)if(ee.equals(Ce))return!0}const le=ee.negate(),oe=U(le).concat(U(X));oe.sort(B);for(let Ce=0;Ce<oe.length;Ce++){const ke=oe[Ce].negate();for(let Te=Ce+1;Te<oe.length;Te++){const ge=oe[Te];if(ke.equals(ge))return!0}}return!1}function U(ee){return ee.type===9?ee.expr:[ee]}},39282:function(Tt,me,a){"use strict";a.d(me,{cv:function(){return j},d0:function(){return v}});var p=a(1432),d=a(63580),z=a(16141);const O=new z.uy("isMac",p.dz,(0,d.N)("isMac","Whether the operating system is macOS")),S=new z.uy("isLinux",p.IJ,(0,d.N)("isLinux","Whether the operating system is Linux")),j=new z.uy("isWindows",p.ED,(0,d.N)("isWindows","Whether the operating system is Windows")),T=new z.uy("isWeb",p.$L,(0,d.N)("isWeb","Whether the platform is a web browser")),B=new z.uy("isMacNative",p.dz&&!p.$L,(0,d.N)("isMacNative","Whether the operating system is macOS on a non-browser platform")),F=new z.uy("isIOS",p.gn,(0,d.N)("isIOS","Whether the operating system is iOS")),x=new z.uy("isDevelopment",!1,!0),v="inputFocus",g=new z.uy(v,!1,(0,d.N)("inputFocus","Whether keyboard focus is inside an input box"))},5606:function(Tt,me,a){"use strict";a.d(me,{u:function(){return d},i:function(){return z}});var p=a(72065);const d=(0,p.yh)("contextViewService"),z=(0,p.yh)("contextMenuService")},28820:function(Tt,me,a){"use strict";a.d(me,{S:function(){return d}});var p=a(72065);const d=(0,p.yh)("dialogService")},10337:function(Tt,me,a){"use strict";a.d(me,{Yb:function(){return de},Nq:function(){return pe},iX:function(){return L}});var p=a(65321),d=a(3331),z=a(77927),O=a(93794),S=a(4669),j=a(63580);const T=j.N("defaultLabel","input");class B extends O.${constructor(ue,te,K,U){super();this._showOptionButtons=K,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new S.Q5),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new S.Q5),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new S.Q5),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new S.Q5),this._onKeyUp=this._register(new S.Q5),this._onCaseSensitiveKeyDown=this._register(new S.Q5),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new S.Q5),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=te,this.placeholder=U.placeholder||"",this.validation=U.validation,this.label=U.label||T,this.inputActiveOptionBorder=U.inputActiveOptionBorder,this.inputActiveOptionForeground=U.inputActiveOptionForeground,this.inputActiveOptionBackground=U.inputActiveOptionBackground,this.inputBackground=U.inputBackground,this.inputForeground=U.inputForeground,this.inputBorder=U.inputBorder,this.inputValidationInfoBorder=U.inputValidationInfoBorder,this.inputValidationInfoBackground=U.inputValidationInfoBackground,this.inputValidationInfoForeground=U.inputValidationInfoForeground,this.inputValidationWarningBorder=U.inputValidationWarningBorder,this.inputValidationWarningBackground=U.inputValidationWarningBackground,this.inputValidationWarningForeground=U.inputValidationWarningForeground,this.inputValidationErrorBorder=U.inputValidationErrorBorder,this.inputValidationErrorBackground=U.inputValidationErrorBackground,this.inputValidationErrorForeground=U.inputValidationErrorForeground;const ee=U.appendCaseSensitiveLabel||"",X=U.appendWholeWordsLabel||"",le=U.appendRegexLabel||"",oe=U.history||[],Ce=!!U.flexibleHeight,ye=!!U.flexibleWidth,ke=U.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new z.p(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:oe,showHistoryHint:U.showHistoryHint,flexibleHeight:Ce,flexibleWidth:ye,flexibleMaxHeight:ke})),this.regex=this._register(new d.am({appendTitle:le,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(ge=>{this._onDidOptionChange.fire(ge),!ge&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(ge=>{this._onRegexKeyDown.fire(ge)})),this.wholeWords=this._register(new d.n3({appendTitle:X,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(ge=>{this._onDidOptionChange.fire(ge),!ge&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new d.vk({appendTitle:ee,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(ge=>{this._onDidOptionChange.fire(ge),!ge&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(ge=>{this._onCaseSensitiveKeyDown.fire(ge)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let Te=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,ge=>{if(ge.equals(15)||ge.equals(17)||ge.equals(9)){let we=Te.indexOf(document.activeElement);if(we>=0){let ze=-1;ge.equals(17)?ze=(we+1)%Te.length:ge.equals(15)&&(we===0?ze=Te.length-1:ze=we-1),ge.equals(9)?(Te[we].blur(),this.inputBox.focus()):ze>=0&&Te[ze].focus(),p.zB.stop(ge,!0)}}}),this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this._showOptionButtons?"block":"none",this.controls.appendChild(this.caseSensitive.domNode),this.controls.appendChild(this.wholeWords.domNode),this.controls.appendChild(this.regex.domNode),this.domNode.appendChild(this.controls),ue&&ue.appendChild(this.domNode),this._register(p.nm(this.inputBox.inputElement,"compositionstart",ge=>{this.imeSessionInProgress=!0})),this._register(p.nm(this.inputBox.inputElement,"compositionend",ge=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,ge=>this._onKeyDown.fire(ge)),this.onkeyup(this.inputBox.inputElement,ge=>this._onKeyUp.fire(ge)),this.oninput(this.inputBox.inputElement,ge=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,ge=>this._onMouseDown.fire(ge))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(ue){this.fixFocusOnOptionClickEnabled=ue}setEnabled(ue){ue?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(ue){this.inputBox.value!==ue&&(this.inputBox.value=ue)}style(ue){this.inputActiveOptionBorder=ue.inputActiveOptionBorder,this.inputActiveOptionForeground=ue.inputActiveOptionForeground,this.inputActiveOptionBackground=ue.inputActiveOptionBackground,this.inputBackground=ue.inputBackground,this.inputForeground=ue.inputForeground,this.inputBorder=ue.inputBorder,this.inputValidationInfoBackground=ue.inputValidationInfoBackground,this.inputValidationInfoForeground=ue.inputValidationInfoForeground,this.inputValidationInfoBorder=ue.inputValidationInfoBorder,this.inputValidationWarningBackground=ue.inputValidationWarningBackground,this.inputValidationWarningForeground=ue.inputValidationWarningForeground,this.inputValidationWarningBorder=ue.inputValidationWarningBorder,this.inputValidationErrorBackground=ue.inputValidationErrorBackground,this.inputValidationErrorForeground=ue.inputValidationErrorForeground,this.inputValidationErrorBorder=ue.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const ue={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(ue),this.wholeWords.style(ue),this.caseSensitive.style(ue);const te={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(te)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(ue){this.caseSensitive.checked=ue}getWholeWords(){return this.wholeWords.checked}setWholeWords(ue){this.wholeWords.checked=ue}getRegex(){return this.regex.checked}setRegex(ue){this.regex.checked=ue,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}var F=a(16229),x=a(73046);const v=j.N("defaultLabel","input"),g=j.N("label.preserveCaseCheckbox","Preserve Case");class D extends F.X{constructor(ue){super({icon:x.lA.preserveCase,title:g+ue.appendTitle,isChecked:ue.isChecked,inputActiveOptionBorder:ue.inputActiveOptionBorder,inputActiveOptionForeground:ue.inputActiveOptionForeground,inputActiveOptionBackground:ue.inputActiveOptionBackground})}}class c extends O.${constructor(ue,te,K,U){super();this._showOptionButtons=K,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new S.Q5),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new S.Q5),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new S.Q5),this._onInput=this._register(new S.Q5),this._onKeyUp=this._register(new S.Q5),this._onPreserveCaseKeyDown=this._register(new S.Q5),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=te,this.placeholder=U.placeholder||"",this.validation=U.validation,this.label=U.label||v,this.inputActiveOptionBorder=U.inputActiveOptionBorder,this.inputActiveOptionForeground=U.inputActiveOptionForeground,this.inputActiveOptionBackground=U.inputActiveOptionBackground,this.inputBackground=U.inputBackground,this.inputForeground=U.inputForeground,this.inputBorder=U.inputBorder,this.inputValidationInfoBorder=U.inputValidationInfoBorder,this.inputValidationInfoBackground=U.inputValidationInfoBackground,this.inputValidationInfoForeground=U.inputValidationInfoForeground,this.inputValidationWarningBorder=U.inputValidationWarningBorder,this.inputValidationWarningBackground=U.inputValidationWarningBackground,this.inputValidationWarningForeground=U.inputValidationWarningForeground,this.inputValidationErrorBorder=U.inputValidationErrorBorder,this.inputValidationErrorBackground=U.inputValidationErrorBackground,this.inputValidationErrorForeground=U.inputValidationErrorForeground;const ee=U.appendPreserveCaseLabel||"",X=U.history||[],le=!!U.flexibleHeight,oe=!!U.flexibleWidth,Ce=U.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new z.p(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:X,showHistoryHint:U.showHistoryHint,flexibleHeight:le,flexibleWidth:oe,flexibleMaxHeight:Ce})),this.preserveCase=this._register(new D({appendTitle:ee,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(Te=>{this._onDidOptionChange.fire(Te),!Te&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(Te=>{this._onPreserveCaseKeyDown.fire(Te)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let ye=[this.preserveCase.domNode];this.onkeydown(this.domNode,Te=>{if(Te.equals(15)||Te.equals(17)||Te.equals(9)){let ge=ye.indexOf(document.activeElement);if(ge>=0){let we=-1;Te.equals(17)?we=(ge+1)%ye.length:Te.equals(15)&&(ge===0?we=ye.length-1:we=ge-1),Te.equals(9)?(ye[ge].blur(),this.inputBox.focus()):we>=0&&ye[we].focus(),p.zB.stop(Te,!0)}}});let ke=document.createElement("div");ke.className="controls",ke.style.display=this._showOptionButtons?"block":"none",ke.appendChild(this.preserveCase.domNode),this.domNode.appendChild(ke),ue&&ue.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,Te=>this._onKeyDown.fire(Te)),this.onkeyup(this.inputBox.inputElement,Te=>this._onKeyUp.fire(Te)),this.oninput(this.inputBox.inputElement,Te=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,Te=>this._onMouseDown.fire(Te))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(ue){ue?this.enable():this.disable()}style(ue){this.inputActiveOptionBorder=ue.inputActiveOptionBorder,this.inputActiveOptionForeground=ue.inputActiveOptionForeground,this.inputActiveOptionBackground=ue.inputActiveOptionBackground,this.inputBackground=ue.inputBackground,this.inputForeground=ue.inputForeground,this.inputBorder=ue.inputBorder,this.inputValidationInfoBackground=ue.inputValidationInfoBackground,this.inputValidationInfoForeground=ue.inputValidationInfoForeground,this.inputValidationInfoBorder=ue.inputValidationInfoBorder,this.inputValidationWarningBackground=ue.inputValidationWarningBackground,this.inputValidationWarningForeground=ue.inputValidationWarningForeground,this.inputValidationWarningBorder=ue.inputValidationWarningBorder,this.inputValidationErrorBackground=ue.inputValidationErrorBackground,this.inputValidationErrorForeground=ue.inputValidationErrorForeground,this.inputValidationErrorBorder=ue.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const ue={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(ue);const te={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(te)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(ue){this.preserveCase.checked=ue}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(ue){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=ue,this.domNode.style.width=ue+"px"}dispose(){super.dispose()}}var C=a(16141),M=a(49989),E=function(ae,ue,te,K){var U=arguments.length,ee=U<3?ue:K===null?K=Object.getOwnPropertyDescriptor(ue,te):K,X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(ae,ue,te,K);else for(var le=ae.length-1;le>=0;le--)(X=ae[le])&&(ee=(U<3?X(ee):U>3?X(ue,te,ee):X(ue,te))||ee);return U>3&&ee&&Object.defineProperty(ue,te,ee),ee},_=function(ae,ue){return function(te,K){ue(te,K,ae)}};const L=new C.uy("suggestWidgetVisible",!1,(0,j.N)("suggestWidgetVisible","Whether suggestion are visible")),N="historyNavigationWidget",b="historyNavigationForwardsEnabled",I="historyNavigationBackwardsEnabled";function k(ae,ue,te){new C.uy(te,ue).bindTo(ae)}function W(ae,ue){return ae.createScoped(ue.target)}function q(ae,ue){return ae.getContext(document.activeElement).getValue(ue)}function re(ae,ue){const te=W(ae,ue);k(te,ue,N);const K=new C.uy(b,!0).bindTo(te),U=new C.uy(I,!0).bindTo(te);return{scopedContextKeyService:te,historyNavigationForwardsEnablement:K,historyNavigationBackwardsEnablement:U}}let de=class extends B{constructor(ue,te,K,U,ee=!1){super(ue,te,ee,K);this._register(re(U,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};de=E([_(3,C.i6)],de);let pe=class extends c{constructor(ue,te,K,U,ee=!1){super(ue,te,ee,K);this._register(re(U,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};pe=E([_(3,C.i6)],pe),M.W.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:C.Ao.and(C.Ao.has(N),C.Ao.equals(I,!0),L.isEqualTo(!1)),primary:16,secondary:[512|16],handler:ae=>{const ue=q(ae.get(C.i6),N);ue&&ue.historyNavigator.showPreviousValue()}}),M.W.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:C.Ao.and(C.Ao.has(N),C.Ao.equals(b,!0),L.isEqualTo(!1)),primary:18,secondary:[512|18],handler:ae=>{const ue=q(ae.get(C.i6),N);ue&&ue.historyNavigator.showNextValue()}})},97108:function(Tt,me,a){"use strict";a.d(me,{M:function(){return p}});class p{constructor(z,O=[],S=!1){this.ctor=z,this.staticArguments=O,this.supportsDelayedInstantiation=S}}},65026:function(Tt,me,a){"use strict";a.d(me,{z:function(){return z},d:function(){return O}});var p=a(97108);const d=[];function z(S,j,T){j instanceof p.M||(j=new p.M(j,[],T)),d.push([S,j])}function O(){return d}},72065:function(Tt,me,a){"use strict";a.d(me,{I8:function(){return p},TG:function(){return d},yh:function(){return O}});var p;(function(S){S.serviceIds=new Map,S.DI_TARGET="$di$target",S.DI_DEPENDENCIES="$di$dependencies";function j(T){return T[S.DI_DEPENDENCIES]||[]}S.getServiceDependencies=j})(p||(p={}));const d=O("instantiationService");function z(S,j,T){j[p.DI_TARGET]===j?j[p.DI_DEPENDENCIES].push({id:S,index:T}):(j[p.DI_DEPENDENCIES]=[{id:S,index:T}],j[p.DI_TARGET]=j)}function O(S){if(p.serviceIds.has(S))return p.serviceIds.get(S);const j=function(T,B,F){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");z(j,T,F)};return j.toString=()=>S,p.serviceIds.set(S,j),j}},60972:function(Tt,me,a){"use strict";a.d(me,{y:function(){return p}});class p{constructor(...z){this._entries=new Map;for(let[O,S]of z)this.set(O,S)}set(z,O){const S=this._entries.get(z);return this._entries.set(z,O),S}get(z){return this._entries.get(z)}}},81294:function(Tt,me,a){"use strict";a.d(me,{I:function(){return z}});var p=a(4669),d=a(89872);const z={JSONContribution:"base.contributions.json"};function O(T){return T.length>0&&T.charAt(T.length-1)==="#"?T.substring(0,T.length-1):T}class S{constructor(){this._onDidChangeSchema=new p.Q5,this.schemasById={}}registerSchema(B,F){this.schemasById[O(B)]=F,this._onDidChangeSchema.fire(B)}notifySchemaChanged(B){this._onDidChangeSchema.fire(B)}}const j=new S;d.B.add(z.JSONContribution,j)},91847:function(Tt,me,a){"use strict";a.d(me,{d:function(){return d}});var p=a(72065);const d=(0,p.yh)("keybindingService")},49989:function(Tt,me,a){"use strict";a.d(me,{W:function(){return j}});var p=a(8313),d=a(1432),z=a(94565),O=a(89872);class S{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(x){if(d.OS===1){if(x&&x.win)return x.win}else if(d.OS===2){if(x&&x.mac)return x.mac}else if(x&&x.linux)return x.linux;return x}registerKeybindingRule(x){const v=S.bindToCurrentPlatform(x);if(v&&v.primary){const g=(0,p.gm)(v.primary,d.OS);g&&this._registerDefaultKeybinding(g,x.id,x.args,x.weight,0,x.when)}if(v&&Array.isArray(v.secondary))for(let g=0,D=v.secondary.length;g<D;g++){const c=v.secondary[g],C=(0,p.gm)(c,d.OS);C&&this._registerDefaultKeybinding(C,x.id,x.args,x.weight,-g-1,x.when)}}registerCommandAndKeybindingRule(x){this.registerKeybindingRule(x),z.P0.registerCommand(x)}static _mightProduceChar(x){return x>=21&&x<=30||x>=31&&x<=56?!0:x===80||x===81||x===82||x===83||x===84||x===85||x===86||x===110||x===111||x===87||x===88||x===89||x===90||x===91||x===92}_assertNoCtrlAlt(x,v){x.ctrlKey&&x.altKey&&!x.metaKey&&S._mightProduceChar(x.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",x," for ",v)}_registerDefaultKeybinding(x,v,g,D,c,C){d.OS===1&&this._assertNoCtrlAlt(x.parts[0],v),this._coreKeybindings.push({keybinding:x.parts,command:v,commandArgs:g,when:C,weight1:D,weight2:c,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(B)),this._cachedMergedKeybindings.slice(0)}}const j=new S,T={EditorModes:"platform.keybindingsRegistry"};O.B.add(T.EditorModes,j);function B(F,x){return F.weight1!==x.weight1?F.weight1-x.weight1:F.command<x.command?-1:F.command>x.command?1:F.weight2-x.weight2}},44349:function(Tt,me,a){"use strict";a.d(me,{e:function(){return d}});var p=a(72065);const d=(0,p.yh)("labelService")},586:function(Tt,me,a){"use strict";a.d(me,{Lw:function(){return Yi},XN:function(){return Lr},ls:function(){return tt},ev:function(){return ms},CQ:function(){return Sr},PS:function(){return kn},uJ:function(){return Bt}});var p=a(65321),d=a(9488),z=a(71050),O=a(4669),S=a(9917),j=a(43799);class T{constructor(J,Ae){this.renderer=J,this.modelProvider=Ae}get templateId(){return this.renderer.templateId}renderTemplate(J){return{data:this.renderer.renderTemplate(J),disposable:S.JT.None}}renderElement(J,Ae,ot,Ee){if(ot.disposable&&ot.disposable.dispose(),!ot.data)return;const m=this.modelProvider();if(m.isResolved(J))return this.renderer.renderElement(m.get(J),J,ot.data,Ee);const V=new z.A,G=m.resolve(J,V.token);ot.disposable={dispose:()=>V.cancel()},this.renderer.renderPlaceholder(J,ot.data),G.then(ce=>this.renderer.renderElement(ce,J,ot.data,Ee))}disposeTemplate(J){J.disposable&&(J.disposable.dispose(),J.disposable=void 0),J.data&&(this.renderer.disposeTemplate(J.data),J.data=void 0)}}class B{constructor(J,Ae){this.modelProvider=J,this.accessibilityProvider=Ae}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(J){const Ae=this.modelProvider();return Ae.isResolved(J)?this.accessibilityProvider.getAriaLabel(Ae.get(J)):null}}function F(Ct,J){return Object.assign(Object.assign({},J),{accessibilityProvider:J.accessibilityProvider&&new B(Ct,J.accessibilityProvider)})}class x{constructor(J,Ae,ot,Ee,m={}){const V=()=>this.model,G=Ee.map(ce=>new T(ce,V));this.list=new j.aV(J,Ae,ot,G,F(V,m))}updateOptions(J){this.list.updateOptions(J)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return O.ju.map(this.list.onMouseDblClick,({element:J,index:Ae,browserEvent:ot})=>({element:J===void 0?void 0:this._model.get(J),index:Ae,browserEvent:ot}))}get onPointer(){return O.ju.map(this.list.onPointer,({element:J,index:Ae,browserEvent:ot})=>({element:J===void 0?void 0:this._model.get(J),index:Ae,browserEvent:ot}))}get onDidChangeSelection(){return O.ju.map(this.list.onDidChangeSelection,({elements:J,indexes:Ae,browserEvent:ot})=>({elements:J.map(Ee=>this._model.get(Ee)),indexes:Ae,browserEvent:ot}))}get model(){return this._model}set model(J){this._model=J,this.list.splice(0,this.list.length,(0,d.w6)(J.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(J=>this.model.get(J))}style(J){this.list.style(J)}dispose(){this.list.dispose()}}var v=a(23937);class g{constructor(J,Ae,ot){this.columns=J,this.getColumnSize=ot,this.templateId=g.TemplateId,this.renderedTemplates=new Set;const Ee=new Map(Ae.map(m=>[m.templateId,m]));this.renderers=[];for(const m of J){const V=Ee.get(m.templateId);if(!V)throw new Error(`Table cell renderer for template id ${m.templateId} not found.`);this.renderers.push(V)}}renderTemplate(J){const Ae=(0,p.R3)(J,(0,p.$)(".monaco-table-tr")),ot=[],Ee=[];for(let V=0;V<this.columns.length;V++){const G=this.renderers[V],ce=(0,p.R3)(Ae,(0,p.$)(".monaco-table-td",{"data-col-index":V}));ce.style.width=`${this.getColumnSize(V)}px`,ot.push(ce),Ee.push(G.renderTemplate(ce))}const m={container:J,cellContainers:ot,cellTemplateData:Ee};return this.renderedTemplates.add(m),m}renderElement(J,Ae,ot,Ee){for(let m=0;m<this.columns.length;m++){const G=this.columns[m].project(J);this.renderers[m].renderElement(G,Ae,ot.cellTemplateData[m],Ee)}}disposeElement(J,Ae,ot,Ee){for(let m=0;m<this.columns.length;m++){const V=this.renderers[m];if(V.disposeElement){const ce=this.columns[m].project(J);V.disposeElement(ce,Ae,ot.cellTemplateData[m],Ee)}}}disposeTemplate(J){for(let Ae=0;Ae<this.columns.length;Ae++)this.renderers[Ae].disposeTemplate(J.cellTemplateData[Ae]);(0,p.PO)(J.container),this.renderedTemplates.delete(J)}layoutColumn(J,Ae){for(const{cellContainers:ot}of this.renderedTemplates)ot[J].style.width=`${Ae}px`}}g.TemplateId="row";function D(Ct){return{getHeight(J){return Ct.getHeight(J)},getTemplateId(){return g.TemplateId}}}class c{constructor(J,Ae){this.column=J,this.index=Ae,this._onDidLayout=new O.Q5,this.onDidLayout=this._onDidLayout.event,this.element=(0,p.$)(".monaco-table-th",{"data-col-index":Ae,title:J.tooltip},J.label)}get minimumSize(){var J;return(J=this.column.minimumWidth)!==null&&J!==void 0?J:120}get maximumSize(){var J;return(J=this.column.maximumWidth)!==null&&J!==void 0?J:Number.POSITIVE_INFINITY}get onDidChange(){var J;return(J=this.column.onDidChangeWidthConstraints)!==null&&J!==void 0?J:O.ju.None}layout(J){this._onDidLayout.fire([this.index,J])}}class C{constructor(J,Ae,ot,Ee,m,V){this.virtualDelegate=ot,this.domId=`table_id_${++C.InstanceCount}`,this.disposables=new S.SL,this.cachedWidth=0,this.cachedHeight=0,this.domNode=(0,p.R3)(Ae,(0,p.$)(`.monaco-table.${this.domId}`));const G=Ee.map((De,ct)=>new c(De,ct)),ce={size:G.reduce((De,ct)=>De+ct.column.weight,0),views:G.map(De=>({size:De.column.weight,view:De}))};this.splitview=this.disposables.add(new v.z(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:ce})),this.splitview.el.style.height=`${ot.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${ot.headerRowHeight}px`;const ve=new g(Ee,m,De=>this.splitview.getViewSize(De));this.list=this.disposables.add(new j.aV(J,this.domNode,D(ot),[ve],V)),O.ju.any(...G.map(De=>De.onDidLayout))(([De,ct])=>ve.layoutColumn(De,ct),null,this.disposables),this.splitview.onDidSashReset(De=>{const ct=Ee.reduce((Nt,It)=>Nt+It.weight,0),lt=Ee[De].weight/ct*this.cachedWidth;this.splitview.resizeView(De,lt)},null,this.disposables),this.styleElement=(0,p.dS)(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(J){this.list.updateOptions(J)}splice(J,Ae,ot=[]){this.list.splice(J,Ae,ot)}getHTMLElement(){return this.domNode}style(J){const Ae=[];Ae.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=Ae.join(`
`),this.list.style(J)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}C.InstanceCount=0;var M=a(25707),E=a(23547),_=a(4850),L=a(59069),N;(function(Ct){Ct[Ct.Unknown=0]="Unknown",Ct[Ct.Twistie=1]="Twistie",Ct[Ct.Element=2]="Element"})(N||(N={}));class b extends Error{constructor(J,Ae){super(`TreeError [${J}] ${Ae}`)}}class I{constructor(J){this.fn=J,this._map=new WeakMap}map(J){let Ae=this._map.get(J);return Ae||(Ae=this.fn(J),this._map.set(J,Ae)),Ae}}var k=a(15393),W=a(2484),q=a(53725);function re(Ct){return typeof Ct=="object"&&"visibility"in Ct&&"data"in Ct}function de(Ct){switch(Ct){case!0:return 1;case!1:return 0;default:return Ct}}function pe(Ct){return typeof Ct.collapsible=="boolean"}class ae{constructor(J,Ae,ot,Ee={}){this.user=J,this.list=Ae,this.rootRef=[],this.eventBufferer=new O.E7,this._onDidChangeCollapseState=new O.Q5,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new O.Q5,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new O.Q5,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new k.vp(k.ne),this.collapseByDefault=typeof Ee.collapseByDefault=="undefined"?!1:Ee.collapseByDefault,this.filter=Ee.filter,this.autoExpandSingleChildren=typeof Ee.autoExpandSingleChildren=="undefined"?!1:Ee.autoExpandSingleChildren,this.root={parent:void 0,element:ot,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(J,Ae,ot=q.$.empty(),Ee={}){if(J.length===0)throw new b(this.user,"Invalid tree location");Ee.diffIdentityProvider?this.spliceSmart(Ee.diffIdentityProvider,J,Ae,ot,Ee):this.spliceSimple(J,Ae,ot,Ee)}spliceSmart(J,Ae,ot,Ee,m,V){var G;Ee===void 0&&(Ee=q.$.empty()),V===void 0&&(V=(G=m.diffDepth)!==null&&G!==void 0?G:0);const{parentNode:ce}=this.getParentNodeWithListIndex(Ae);if(!ce.lastDiffIds)return this.spliceSimple(Ae,ot,Ee,m);const ve=[...Ee],De=Ae[Ae.length-1],ct=new W.Hs({getElements:()=>ce.lastDiffIds},{getElements:()=>[...ce.children.slice(0,De),...ve,...ce.children.slice(De+ot)].map(jt=>J.getId(jt.element).toString())}).ComputeDiff(!1);if(ct.quitEarly)return ce.lastDiffIds=void 0,this.spliceSimple(Ae,ot,ve,m);const lt=Ae.slice(0,-1),Nt=(jt,bn,Zn)=>{if(V>0)for(let Xn=0;Xn<Zn;Xn++)jt--,bn--,this.spliceSmart(J,[...lt,jt,0],Number.MAX_SAFE_INTEGER,ve[bn].children,m,V-1)};let It=Math.min(ce.children.length,De+ot),Ft=ve.length;for(const jt of ct.changes.sort((bn,Zn)=>Zn.originalStart-bn.originalStart))Nt(It,Ft,It-(jt.originalStart+jt.originalLength)),It=jt.originalStart,Ft=jt.modifiedStart-De,this.spliceSimple([...lt,It],jt.originalLength,q.$.slice(ve,Ft,Ft+jt.modifiedLength),m);Nt(It,Ft,It)}spliceSimple(J,Ae,ot=q.$.empty(),{onDidCreateNode:Ee,onDidDeleteNode:m,diffIdentityProvider:V}){const{parentNode:G,listIndex:ce,revealed:ve,visible:De}=this.getParentNodeWithListIndex(J),ct=[],lt=q.$.map(ot,Un=>this.createTreeNode(Un,G,G.visible?1:0,ve,ct,Ee)),Nt=J[J.length-1],It=G.children.length>0;let Ft=0;for(let Un=Nt;Un>=0&&Un<G.children.length;Un--){const fn=G.children[Un];if(fn.visible){Ft=fn.visibleChildIndex;break}}const jt=[];let bn=0,Zn=0;for(const Un of lt)jt.push(Un),Zn+=Un.renderNodeCount,Un.visible&&(Un.visibleChildIndex=Ft+bn++);const Xn=(0,d.db)(G.children,Nt,Ae,jt);V?G.lastDiffIds?(0,d.db)(G.lastDiffIds,Nt,Ae,jt.map(Un=>V.getId(Un.element).toString())):G.lastDiffIds=G.children.map(Un=>V.getId(Un.element).toString()):G.lastDiffIds=void 0;let gi=0;for(const Un of Xn)Un.visible&&gi++;if(gi!==0)for(let Un=Nt+jt.length;Un<G.children.length;Un++){const fn=G.children[Un];fn.visible&&(fn.visibleChildIndex-=gi)}if(G.visibleChildrenCount+=bn-gi,ve&&De){const Un=Xn.reduce((fn,Vo)=>fn+(Vo.visible?Vo.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(G,Zn-Un),this.list.splice(ce,Un,ct)}if(Xn.length>0&&m){const Un=fn=>{m(fn),fn.children.forEach(Un)};Xn.forEach(Un)}this._onDidSplice.fire({insertedNodes:jt,deletedNodes:Xn});const ji=G.children.length>0;It!==ji&&this.setCollapsible(J.slice(0,-1),ji);let vr=G;for(;vr;){if(vr.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}vr=vr.parent}}rerender(J){if(J.length===0)throw new b(this.user,"Invalid tree location");const{node:Ae,listIndex:ot,revealed:Ee}=this.getTreeNodeWithListIndex(J);Ae.visible&&Ee&&this.list.splice(ot,1,[Ae])}has(J){return this.hasTreeNode(J)}getListIndex(J){const{listIndex:Ae,visible:ot,revealed:Ee}=this.getTreeNodeWithListIndex(J);return ot&&Ee?Ae:-1}getListRenderCount(J){return this.getTreeNode(J).renderNodeCount}isCollapsible(J){return this.getTreeNode(J).collapsible}setCollapsible(J,Ae){const ot=this.getTreeNode(J);typeof Ae=="undefined"&&(Ae=!ot.collapsible);const Ee={collapsible:Ae};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(J,Ee))}isCollapsed(J){return this.getTreeNode(J).collapsed}setCollapsed(J,Ae,ot){const Ee=this.getTreeNode(J);typeof Ae=="undefined"&&(Ae=!Ee.collapsed);const m={collapsed:Ae,recursive:ot||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(J,m))}_setCollapseState(J,Ae){const{node:ot,listIndex:Ee,revealed:m}=this.getTreeNodeWithListIndex(J),V=this._setListNodeCollapseState(ot,Ee,m,Ae);if(ot!==this.root&&this.autoExpandSingleChildren&&V&&!pe(Ae)&&ot.collapsible&&!ot.collapsed&&!Ae.recursive){let G=-1;for(let ce=0;ce<ot.children.length;ce++)if(ot.children[ce].visible)if(G>-1){G=-1;break}else G=ce;G>-1&&this._setCollapseState([...J,G],Ae)}return V}_setListNodeCollapseState(J,Ae,ot,Ee){const m=this._setNodeCollapseState(J,Ee,!1);if(!ot||!J.visible||!m)return m;const V=J.renderNodeCount,G=this.updateNodeAfterCollapseChange(J),ce=V-(Ae===-1?0:1);return this.list.splice(Ae+1,ce,G.slice(1)),m}_setNodeCollapseState(J,Ae,ot){let Ee;if(J===this.root?Ee=!1:(pe(Ae)?(Ee=J.collapsible!==Ae.collapsible,J.collapsible=Ae.collapsible):J.collapsible?(Ee=J.collapsed!==Ae.collapsed,J.collapsed=Ae.collapsed):Ee=!1,Ee&&this._onDidChangeCollapseState.fire({node:J,deep:ot})),!pe(Ae)&&Ae.recursive)for(const m of J.children)Ee=this._setNodeCollapseState(m,Ae,!0)||Ee;return Ee}expandTo(J){this.eventBufferer.bufferEvents(()=>{let Ae=this.getTreeNode(J);for(;Ae.parent;)Ae=Ae.parent,J=J.slice(0,J.length-1),Ae.collapsed&&this._setCollapseState(J,{collapsed:!1,recursive:!1})})}refilter(){const J=this.root.renderNodeCount,Ae=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,J,Ae),this.refilterDelayer.cancel()}createTreeNode(J,Ae,ot,Ee,m,V){const G={parent:Ae,element:J.element,children:[],depth:Ae.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof J.collapsible=="boolean"?J.collapsible:typeof J.collapsed!="undefined",collapsed:typeof J.collapsed=="undefined"?this.collapseByDefault:J.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},ce=this._filterNode(G,ot);G.visibility=ce,Ee&&m.push(G);const ve=J.children||q.$.empty(),De=Ee&&ce!==0&&!G.collapsed,ct=q.$.map(ve,It=>this.createTreeNode(It,G,ce,De,m,V));let lt=0,Nt=1;for(const It of ct)G.children.push(It),Nt+=It.renderNodeCount,It.visible&&(It.visibleChildIndex=lt++);return G.collapsible=G.collapsible||G.children.length>0,G.visibleChildrenCount=lt,G.visible=ce===2?lt>0:ce===1,G.visible?G.collapsed||(G.renderNodeCount=Nt):(G.renderNodeCount=0,Ee&&m.pop()),V&&V(G),G}updateNodeAfterCollapseChange(J){const Ae=J.renderNodeCount,ot=[];return this._updateNodeAfterCollapseChange(J,ot),this._updateAncestorsRenderNodeCount(J.parent,ot.length-Ae),ot}_updateNodeAfterCollapseChange(J,Ae){if(J.visible===!1)return 0;if(Ae.push(J),J.renderNodeCount=1,!J.collapsed)for(const ot of J.children)J.renderNodeCount+=this._updateNodeAfterCollapseChange(ot,Ae);return this._onDidChangeRenderNodeCount.fire(J),J.renderNodeCount}updateNodeAfterFilterChange(J){const Ae=J.renderNodeCount,ot=[];return this._updateNodeAfterFilterChange(J,J.visible?1:0,ot),this._updateAncestorsRenderNodeCount(J.parent,ot.length-Ae),ot}_updateNodeAfterFilterChange(J,Ae,ot,Ee=!0){let m;if(J!==this.root){if(m=this._filterNode(J,Ae),m===0)return J.visible=!1,J.renderNodeCount=0,!1;Ee&&ot.push(J)}const V=ot.length;J.renderNodeCount=J===this.root?0:1;let G=!1;if(!J.collapsed||m!==0){let ce=0;for(const ve of J.children)G=this._updateNodeAfterFilterChange(ve,m,ot,Ee&&!J.collapsed)||G,ve.visible&&(ve.visibleChildIndex=ce++);J.visibleChildrenCount=ce}else J.visibleChildrenCount=0;return J!==this.root&&(J.visible=m===2?G:m===1,J.visibility=m),J.visible?J.collapsed||(J.renderNodeCount+=ot.length-V):(J.renderNodeCount=0,Ee&&ot.pop()),this._onDidChangeRenderNodeCount.fire(J),J.visible}_updateAncestorsRenderNodeCount(J,Ae){if(Ae!==0)for(;J;)J.renderNodeCount+=Ae,this._onDidChangeRenderNodeCount.fire(J),J=J.parent}_filterNode(J,Ae){const ot=this.filter?this.filter.filter(J.element,Ae):1;return typeof ot=="boolean"?(J.filterData=void 0,ot?1:0):re(ot)?(J.filterData=ot.data,de(ot.visibility)):(J.filterData=void 0,de(ot))}hasTreeNode(J,Ae=this.root){if(!J||J.length===0)return!0;const[ot,...Ee]=J;return ot<0||ot>Ae.children.length?!1:this.hasTreeNode(Ee,Ae.children[ot])}getTreeNode(J,Ae=this.root){if(!J||J.length===0)return Ae;const[ot,...Ee]=J;if(ot<0||ot>Ae.children.length)throw new b(this.user,"Invalid tree location");return this.getTreeNode(Ee,Ae.children[ot])}getTreeNodeWithListIndex(J){if(J.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:Ae,listIndex:ot,revealed:Ee,visible:m}=this.getParentNodeWithListIndex(J),V=J[J.length-1];if(V<0||V>Ae.children.length)throw new b(this.user,"Invalid tree location");const G=Ae.children[V];return{node:G,listIndex:ot,revealed:Ee,visible:m&&G.visible}}getParentNodeWithListIndex(J,Ae=this.root,ot=0,Ee=!0,m=!0){const[V,...G]=J;if(V<0||V>Ae.children.length)throw new b(this.user,"Invalid tree location");for(let ce=0;ce<V;ce++)ot+=Ae.children[ce].renderNodeCount;return Ee=Ee&&!Ae.collapsed,m=m&&Ae.visible,G.length===0?{parentNode:Ae,listIndex:ot,revealed:Ee,visible:m}:this.getParentNodeWithListIndex(G,Ae.children[V],ot+1,Ee,m)}getNode(J=[]){return this.getTreeNode(J)}getNodeLocation(J){const Ae=[];let ot=J;for(;ot.parent;)Ae.push(ot.parent.children.indexOf(ot)),ot=ot.parent;return Ae.reverse()}getParentNodeLocation(J){if(J.length!==0)return J.length===1?[]:(0,d.JH)(J)[0]}getFirstElementChild(J){const Ae=this.getTreeNode(J);if(Ae.children.length!==0)return Ae.children[0].element}}var ue=a(73046),te=a(6626),K=a(75392),U=a(59870),ee=a(1432),X=a(63580);class le extends M.kX{constructor(J){super(J.elements.map(Ae=>Ae.element));this.data=J}}function oe(Ct){return Ct instanceof M.kX?new le(Ct):Ct}class Ce{constructor(J,Ae){this.modelProvider=J,this.dnd=Ae,this.autoExpandDisposable=S.JT.None}getDragURI(J){return this.dnd.getDragURI(J.element)}getDragLabel(J,Ae){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(J.map(ot=>ot.element),Ae)}onDragStart(J,Ae){this.dnd.onDragStart&&this.dnd.onDragStart(oe(J),Ae)}onDragOver(J,Ae,ot,Ee,m=!0){const V=this.dnd.onDragOver(oe(J),Ae&&Ae.element,ot,Ee),G=this.autoExpandNode!==Ae;if(G&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=Ae),typeof Ae=="undefined")return V;if(G&&typeof V!="boolean"&&V.autoExpand&&(this.autoExpandDisposable=(0,k.Vg)(()=>{const lt=this.modelProvider(),Nt=lt.getNodeLocation(Ae);lt.isCollapsed(Nt)&&lt.setCollapsed(Nt,!1),this.autoExpandNode=void 0},500)),typeof V=="boolean"||!V.accept||typeof V.bubble=="undefined"||V.feedback){if(!m){const lt=typeof V=="boolean"?V:V.accept,Nt=typeof V=="boolean"?void 0:V.effect;return{accept:lt,effect:Nt,feedback:[ot]}}return V}if(V.bubble===1){const lt=this.modelProvider(),Nt=lt.getNodeLocation(Ae),It=lt.getParentNodeLocation(Nt),Ft=lt.getNode(It),jt=It&&lt.getListIndex(It);return this.onDragOver(J,Ft,jt,Ee,!1)}const ce=this.modelProvider(),ve=ce.getNodeLocation(Ae),De=ce.getListIndex(ve),ct=ce.getListRenderCount(ve);return Object.assign(Object.assign({},V),{feedback:(0,d.w6)(De,De+ct)})}drop(J,Ae,ot,Ee){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(oe(J),Ae&&Ae.element,ot,Ee)}onDragEnd(J){this.dnd.onDragEnd&&this.dnd.onDragEnd(J)}}function ye(Ct,J){return J&&Object.assign(Object.assign({},J),{identityProvider:J.identityProvider&&{getId(Ae){return J.identityProvider.getId(Ae.element)}},dnd:J.dnd&&new Ce(Ct,J.dnd),multipleSelectionController:J.multipleSelectionController&&{isSelectionSingleChangeEvent(Ae){return J.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},Ae),{element:Ae.element}))},isSelectionRangeChangeEvent(Ae){return J.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},Ae),{element:Ae.element}))}},accessibilityProvider:J.accessibilityProvider&&Object.assign(Object.assign({},J.accessibilityProvider),{getSetSize(Ae){const ot=Ct(),Ee=ot.getNodeLocation(Ae),m=ot.getParentNodeLocation(Ee);return ot.getNode(m).visibleChildrenCount},getPosInSet(Ae){return Ae.visibleChildIndex+1},isChecked:J.accessibilityProvider&&J.accessibilityProvider.isChecked?Ae=>J.accessibilityProvider.isChecked(Ae.element):void 0,getRole:J.accessibilityProvider&&J.accessibilityProvider.getRole?Ae=>J.accessibilityProvider.getRole(Ae.element):()=>"treeitem",getAriaLabel(Ae){return J.accessibilityProvider.getAriaLabel(Ae.element)},getWidgetAriaLabel(){return J.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:J.accessibilityProvider&&J.accessibilityProvider.getWidgetRole?()=>J.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:J.accessibilityProvider&&J.accessibilityProvider.getAriaLevel?Ae=>J.accessibilityProvider.getAriaLevel(Ae.element):Ae=>Ae.depth,getActiveDescendantId:J.accessibilityProvider.getActiveDescendantId&&(Ae=>J.accessibilityProvider.getActiveDescendantId(Ae.element))}),keyboardNavigationLabelProvider:J.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},J.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(Ae){return J.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(Ae.element)}}),enableKeyboardNavigation:J.simpleKeyboardNavigation})}class ke{constructor(J){this.delegate=J}getHeight(J){return this.delegate.getHeight(J.element)}getTemplateId(J){return this.delegate.getTemplateId(J.element)}hasDynamicHeight(J){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(J.element)}setDynamicHeight(J,Ae){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(J.element,Ae)}}var Te;(function(Ct){Ct.None="none",Ct.OnHover="onHover",Ct.Always="always"})(Te||(Te={}));class ge{constructor(J,Ae=[]){this._elements=Ae,this.onDidChange=O.ju.forEach(J,ot=>this._elements=ot)}get elements(){return this._elements}}class we{constructor(J,Ae,ot,Ee,m={}){this.renderer=J,this.modelProvider=Ae,this.activeNodes=Ee,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=we.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new te.r,this.activeIndentNodes=new Set,this.indentGuidesDisposable=S.JT.None,this.disposables=new S.SL,this.templateId=J.templateId,this.updateOptions(m),O.ju.map(ot,V=>V.node)(this.onDidChangeNodeTwistieState,this,this.disposables),J.onDidChangeTwistieState&&J.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(J={}){if(typeof J.indent!="undefined"&&(this.indent=(0,U.uZ)(J.indent,0,40)),typeof J.renderIndentGuides!="undefined"){const Ae=J.renderIndentGuides!==Te.None;if(Ae!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=Ae,this.indentGuidesDisposable.dispose(),Ae)){const ot=new S.SL;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,ot),this.indentGuidesDisposable=ot,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof J.hideTwistiesOfChildlessElements!="undefined"&&(this.hideTwistiesOfChildlessElements=J.hideTwistiesOfChildlessElements)}renderTemplate(J){const Ae=(0,p.R3)(J,(0,p.$)(".monaco-tl-row")),ot=(0,p.R3)(Ae,(0,p.$)(".monaco-tl-indent")),Ee=(0,p.R3)(Ae,(0,p.$)(".monaco-tl-twistie")),m=(0,p.R3)(Ae,(0,p.$)(".monaco-tl-contents")),V=this.renderer.renderTemplate(m);return{container:J,indent:ot,twistie:Ee,indentGuidesDisposable:S.JT.None,templateData:V}}renderElement(J,Ae,ot,Ee){typeof Ee=="number"&&(this.renderedNodes.set(J,{templateData:ot,height:Ee}),this.renderedElements.set(J.element,J));const m=we.DefaultIndent+(J.depth-1)*this.indent;ot.twistie.style.paddingLeft=`${m}px`,ot.indent.style.width=`${m+this.indent-16}px`,this.renderTwistie(J,ot),typeof Ee=="number"&&this.renderIndentGuides(J,ot),this.renderer.renderElement(J,Ae,ot.templateData,Ee)}disposeElement(J,Ae,ot,Ee){ot.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(J,Ae,ot.templateData,Ee),typeof Ee=="number"&&(this.renderedNodes.delete(J),this.renderedElements.delete(J.element))}disposeTemplate(J){this.renderer.disposeTemplate(J.templateData)}onDidChangeTwistieState(J){const Ae=this.renderedElements.get(J);!Ae||this.onDidChangeNodeTwistieState(Ae)}onDidChangeNodeTwistieState(J){const Ae=this.renderedNodes.get(J);!Ae||(this.renderTwistie(J,Ae.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(J,Ae.templateData))}renderTwistie(J,Ae){Ae.twistie.classList.remove(...ue.lA.treeItemExpanded.classNamesArray);let ot=!1;this.renderer.renderTwistie&&(ot=this.renderer.renderTwistie(J.element,Ae.twistie)),J.collapsible&&(!this.hideTwistiesOfChildlessElements||J.visibleChildrenCount>0)?(ot||Ae.twistie.classList.add(...ue.lA.treeItemExpanded.classNamesArray),Ae.twistie.classList.add("collapsible"),Ae.twistie.classList.toggle("collapsed",J.collapsed)):Ae.twistie.classList.remove("collapsible","collapsed"),J.collapsible?Ae.container.setAttribute("aria-expanded",String(!J.collapsed)):Ae.container.removeAttribute("aria-expanded")}renderIndentGuides(J,Ae){if((0,p.PO)(Ae.indent),Ae.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const ot=new S.SL,Ee=this.modelProvider();let m=J;for(;;){const V=Ee.getNodeLocation(m),G=Ee.getParentNodeLocation(V);if(!G)break;const ce=Ee.getNode(G),ve=(0,p.$)(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(ce)&&ve.classList.add("active"),Ae.indent.childElementCount===0?Ae.indent.appendChild(ve):Ae.indent.insertBefore(ve,Ae.indent.firstElementChild),this.renderedIndentGuides.add(ce,ve),ot.add((0,S.OF)(()=>this.renderedIndentGuides.delete(ce,ve))),m=ce}Ae.indentGuidesDisposable=ot}_onDidChangeActiveNodes(J){if(!this.shouldRenderIndentGuides)return;const Ae=new Set,ot=this.modelProvider();J.forEach(Ee=>{const m=ot.getNodeLocation(Ee);try{const V=ot.getParentNodeLocation(m);Ee.collapsible&&Ee.children.length>0&&!Ee.collapsed?Ae.add(Ee):V&&Ae.add(ot.getNode(V))}catch(V){}}),this.activeIndentNodes.forEach(Ee=>{Ae.has(Ee)||this.renderedIndentGuides.forEach(Ee,m=>m.classList.remove("active"))}),Ae.forEach(Ee=>{this.activeIndentNodes.has(Ee)||this.renderedIndentGuides.forEach(Ee,m=>m.classList.add("active"))}),this.activeIndentNodes=Ae}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,S.B9)(this.disposables)}}we.DefaultIndent=8;class ze{constructor(J,Ae,ot){this.tree=J,this.keyboardNavigationLabelProvider=Ae,this._filter=ot,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new S.SL,J.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(J){this._pattern=J,this._lowercasePattern=J.toLowerCase()}filter(J,Ae){if(this._filter){const m=this._filter.filter(J,Ae);if(this.tree.options.simpleKeyboardNavigation)return m;let V;if(typeof m=="boolean"?V=m?1:0:re(m)?V=de(m.visibility):V=m,V===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:K.CL.Default,visibility:!0};const ot=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(J),Ee=Array.isArray(ot)?ot:[ot];for(const m of Ee){const V=m&&m.toString();if(typeof V=="undefined")return{data:K.CL.Default,visibility:!0};const G=(0,K.EW)(this._pattern,this._lowercasePattern,0,V,V.toLowerCase(),0,!0);if(G)return this._matchCount++,Ee.length===1?{data:G,visibility:!0}:{data:{label:V,score:G},visibility:!0}}return this.tree.options.filterOnType?2:{data:K.CL.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,S.B9)(this.disposables)}}class Qe{constructor(J,Ae,ot,Ee,m){this.tree=J,this.view=ot,this.filter=Ee,this.keyboardNavigationDelegate=m,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new O.Q5,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new O.Q5,this.enabledDisposables=new S.SL,this.disposables=new S.SL,this.domNode=(0,p.$)(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add((0,p.nm)(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=(0,p.R3)(ot.getHTMLElement(),(0,p.$)(".monaco-list-type-filter-message")),this.labelDomNode=(0,p.R3)(this.domNode,(0,p.$)("span.label"));const V=(0,p.R3)(this.domNode,(0,p.$)(".controls"));this._filterOnType=!!J.options.filterOnType,this.filterOnTypeDomNode=(0,p.R3)(V,(0,p.$)("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add((0,p.nm)(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=(0,p.R3)(V,(0,p.$)("button.clear"+ue.lA.treeFilterClear.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=(0,X.N)("clear","Clear"),this.keyboardNavigationEventFilter=J.options.keyboardNavigationEventFilter,Ae.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(J.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(J){J.simpleKeyboardNavigation?this.disable():this.enable(),typeof J.filterOnType!="undefined"&&(this._filterOnType=!!J.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof J.automaticKeyboardNavigation!="undefined"&&(this.automaticKeyboardNavigation=J.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const J=this.enabledDisposables.add(new _.Y(this.view.getHTMLElement(),"keydown")),Ae=O.ju.chain(J.event).filter(Ee=>!(0,j.cK)(Ee.target)||Ee.target===this.filterOnTypeDomNode).filter(Ee=>Ee.key!=="Dead"&&!/^Media/.test(Ee.key)).map(Ee=>new L.y(Ee)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(Ee=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(Ee)&&!(Ee.keyCode===18||Ee.keyCode===16||Ee.keyCode===15||Ee.keyCode===17)||(this.pattern.length>0||this.triggered)&&(Ee.keyCode===9||Ee.keyCode===1)&&!Ee.altKey&&!Ee.ctrlKey&&!Ee.metaKey||Ee.keyCode===1&&(ee.dz?Ee.altKey&&!Ee.metaKey:Ee.ctrlKey)&&!Ee.shiftKey).forEach(Ee=>{Ee.stopPropagation(),Ee.preventDefault()}).event,ot=this.enabledDisposables.add(new _.Y(this.clearDomNode,"click"));O.ju.chain(O.ju.any(Ae,ot.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){!this._enabled||(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(J){typeof J=="string"?this.onInput(J):J instanceof MouseEvent||J.keyCode===9||J.keyCode===1&&(ee.dz?J.altKey:J.ctrlKey)?this.onInput(""):J.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+J.browserEvent.key)}onInput(J){const Ae=this.view.getHTMLElement();J&&!this.domNode.parentElement?Ae.append(this.domNode):!J&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=J,this._onDidChangePattern.fire(J),this.filter.pattern=J,this.tree.refilter(),J&&this.tree.focusNext(0,!0,void 0,Ee=>!K.CL.isDefault(Ee.filterData));const ot=this.tree.getFocus();if(ot.length>0){const Ee=ot[0];this.tree.getRelativeTop(Ee)===null&&this.tree.reveal(Ee,.5)}this.render(),J||(this.triggered=!1)}onDragStart(){const J=this.view.getHTMLElement(),{left:Ae}=(0,p.i)(J),ot=J.clientWidth,Ee=ot/2,m=this.domNode.clientWidth,V=new S.SL;let G=this.positionClassName;const ce=()=>{switch(G){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${ot-m-6}px`;break}},ve=ct=>{ct.preventDefault();const lt=ct.clientX-Ae;ct.dataTransfer&&(ct.dataTransfer.dropEffect="none"),lt<Ee?G="nw":G="ne",ce()},De=()=>{this.positionClassName=G,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",(0,S.B9)(V)};ce(),this.domNode.classList.remove(G),this.domNode.classList.add("dragging"),V.add((0,S.OF)(()=>this.domNode.classList.remove("dragging"))),V.add((0,p.nm)(document,"dragover",ct=>ve(ct))),V.add((0,p.nm)(this.domNode,"dragend",()=>De())),E.P$.CurrentDragAndDropData=new E.TN("vscode-ui"),V.add((0,S.OF)(()=>E.P$.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...ue.lA.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.classList.add(...ue.lA.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.title=(0,X.N)("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...ue.lA.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.classList.add(...ue.lA.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.title=(0,X.N)("enable filter on type","Enable Filter on Type"))}render(){const J=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&J?(this.messageDomNode.textContent=(0,X.N)("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",J),this.domNode.title=(0,X.N)("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"\u2026"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(J){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!K.CL.isDefault(J.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),(0,S.B9)(this.disposables)}}function Pe(Ct){let J=N.Unknown;return(0,p.uU)(Ct.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?J=N.Twistie:(0,p.uU)(Ct.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(J=N.Element),{browserEvent:Ct.browserEvent,element:Ct.element?Ct.element.element:null,target:J}}function Oe(Ct,J){J(Ct),Ct.children.forEach(Ae=>Oe(Ae,J))}class qe{constructor(J,Ae){this.getFirstViewElementWithTrait=J,this.identityProvider=Ae,this.nodes=[],this._onDidChange=new O.Q5,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(J,Ae){!(Ae==null?void 0:Ae.__forceEvent)&&(0,d.fS)(this.nodes,J)||this._set(J,!1,Ae)}_set(J,Ae,ot){if(this.nodes=[...J],this.elements=void 0,this._nodeSet=void 0,!Ae){const Ee=this;this._onDidChange.fire({get elements(){return Ee.get()},browserEvent:ot})}}get(){return this.elements||(this.elements=this.nodes.map(J=>J.element)),[...this.elements]}getNodes(){return this.nodes}has(J){return this.nodeSet.has(J)}onDidModelSplice({insertedNodes:J,deletedNodes:Ae}){if(!this.identityProvider){const ce=this.createNodeSet(),ve=De=>ce.delete(De);Ae.forEach(De=>Oe(De,ve)),this.set([...ce.values()]);return}const ot=new Set,Ee=ce=>ot.add(this.identityProvider.getId(ce.element).toString());Ae.forEach(ce=>Oe(ce,Ee));const m=new Map,V=ce=>m.set(this.identityProvider.getId(ce.element).toString(),ce);J.forEach(ce=>Oe(ce,V));const G=[];for(const ce of this.nodes){const ve=this.identityProvider.getId(ce.element).toString();if(!ot.has(ve))G.push(ce);else{const ct=m.get(ve);ct&&G.push(ct)}}if(this.nodes.length>0&&G.length===0){const ce=this.getFirstViewElementWithTrait();ce&&G.push(ce)}this._set(G,!0)}createNodeSet(){const J=new Set;for(const Ae of this.nodes)J.add(Ae);return J}}class Je extends j.sx{constructor(J,Ae){super(J);this.tree=Ae}onViewPointer(J){if((0,j.cK)(J.browserEvent.target)||(0,j.hD)(J.browserEvent.target))return;const Ae=J.element;if(!Ae)return super.onViewPointer(J);if(this.isSelectionRangeChangeEvent(J)||this.isSelectionSingleChangeEvent(J))return super.onViewPointer(J);const ot=J.browserEvent.target,Ee=ot.classList.contains("monaco-tl-twistie")||ot.classList.contains("monaco-icon-label")&&ot.classList.contains("folder-icon")&&J.browserEvent.offsetX<16;let m=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?m=this.tree.expandOnlyOnTwistieClick(Ae.element):m=!!this.tree.expandOnlyOnTwistieClick,m&&!Ee&&J.browserEvent.detail!==2)return super.onViewPointer(J);if(!this.tree.expandOnDoubleClick&&J.browserEvent.detail===2)return super.onViewPointer(J);if(Ae.collapsible){const V=this.tree.model,G=V.getNodeLocation(Ae),ce=J.browserEvent.altKey;if(this.tree.setFocus([G]),V.setCollapsed(G,void 0,ce),m&&Ee)return}super.onViewPointer(J)}onDoubleClick(J){J.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(J)}}class Ne extends j.aV{constructor(J,Ae,ot,Ee,m,V,G,ce){super(J,Ae,ot,Ee,ce);this.focusTrait=m,this.selectionTrait=V,this.anchorTrait=G}createMouseController(J){return new Je(this,J.tree)}splice(J,Ae,ot=[]){if(super.splice(J,Ae,ot),ot.length===0)return;const Ee=[],m=[];let V;ot.forEach((G,ce)=>{this.focusTrait.has(G)&&Ee.push(J+ce),this.selectionTrait.has(G)&&m.push(J+ce),this.anchorTrait.has(G)&&(V=J+ce)}),Ee.length>0&&super.setFocus((0,d.EB)([...super.getFocus(),...Ee])),m.length>0&&super.setSelection((0,d.EB)([...super.getSelection(),...m])),typeof V=="number"&&super.setAnchor(V)}setFocus(J,Ae,ot=!1){super.setFocus(J,Ae),ot||this.focusTrait.set(J.map(Ee=>this.element(Ee)),Ae)}setSelection(J,Ae,ot=!1){super.setSelection(J,Ae),ot||this.selectionTrait.set(J.map(Ee=>this.element(Ee)),Ae)}setAnchor(J,Ae=!1){super.setAnchor(J),Ae||(typeof J=="undefined"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(J)]))}}class Fe{constructor(J,Ae,ot,Ee,m={}){this._user=J,this._options=m,this.eventBufferer=new O.E7,this.disposables=new S.SL,this._onWillRefilter=new O.Q5,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new O.Q5;const V=new ke(ot),G=new O.ZD,ce=new O.ZD,ve=new ge(ce.event);this.renderers=Ee.map(lt=>new we(lt,()=>this.model,G.event,ve,m));for(let lt of this.renderers)this.disposables.add(lt);let De;m.keyboardNavigationLabelProvider&&(De=new ze(this,m.keyboardNavigationLabelProvider,m.filter),m=Object.assign(Object.assign({},m),{filter:De}),this.disposables.add(De)),this.focus=new qe(()=>this.view.getFocusedElements()[0],m.identityProvider),this.selection=new qe(()=>this.view.getSelectedElements()[0],m.identityProvider),this.anchor=new qe(()=>this.view.getAnchorElement(),m.identityProvider),this.view=new Ne(J,Ae,V,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},ye(()=>this.model,m)),{tree:this})),this.model=this.createModel(J,this.view,m),G.input=this.model.onDidChangeCollapseState;const ct=O.ju.forEach(this.model.onDidSplice,lt=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(lt),this.selection.onDidModelSplice(lt)})});if(ct(()=>null,null,this.disposables),ce.input=O.ju.chain(O.ju.any(ct,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const lt=new Set;for(const Nt of this.focus.getNodes())lt.add(Nt);for(const Nt of this.selection.getNodes())lt.add(Nt);return[...lt.values()]}).event,m.keyboardSupport!==!1){const lt=O.ju.chain(this.view.onKeyDown).filter(Nt=>!(0,j.cK)(Nt.target)).map(Nt=>new L.y(Nt));lt.filter(Nt=>Nt.keyCode===15).on(this.onLeftArrow,this,this.disposables),lt.filter(Nt=>Nt.keyCode===17).on(this.onRightArrow,this,this.disposables),lt.filter(Nt=>Nt.keyCode===10).on(this.onSpace,this,this.disposables)}if(m.keyboardNavigationLabelProvider){const lt=m.keyboardNavigationDelegate||j.WK;this.typeFilterController=new Qe(this,this.model,this.view,De,lt),this.focusNavigationFilter=Nt=>this.typeFilterController.shouldAllowFocus(Nt),this.disposables.add(this.typeFilterController)}this.styleElement=(0,p.dS)(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Te.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return O.ju.map(this.view.onMouseDblClick,Pe)}get onPointer(){return O.ju.map(this.view.onPointer,Pe)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return O.ju.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick=="undefined"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick=="undefined"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(J={}){this._options=Object.assign(Object.assign({},this._options),J);for(const Ae of this.renderers)Ae.updateOptions(J);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Te.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(J){this.view.scrollTop=J}domFocus(){this.view.domFocus()}layout(J,Ae){this.view.layout(J,Ae)}style(J){const Ae=`.${this.view.domId}`,ot=[];J.treeIndentGuidesStroke&&(ot.push(`.monaco-list${Ae}:hover .monaco-tl-indent > .indent-guide, .monaco-list${Ae}.always .monaco-tl-indent > .indent-guide  { border-color: ${J.treeIndentGuidesStroke.transparent(.4)}; }`),ot.push(`.monaco-list${Ae} .monaco-tl-indent > .indent-guide.active { border-color: ${J.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=ot.join(`
`),this.view.style(J)}getParentElement(J){const Ae=this.model.getParentNodeLocation(J);return this.model.getNode(Ae).element}getFirstElementChild(J){return this.model.getFirstElementChild(J)}getNode(J){return this.model.getNode(J)}collapse(J,Ae=!1){return this.model.setCollapsed(J,!0,Ae)}expand(J,Ae=!1){return this.model.setCollapsed(J,!1,Ae)}isCollapsible(J){return this.model.isCollapsible(J)}setCollapsible(J,Ae){return this.model.setCollapsible(J,Ae)}isCollapsed(J){return this.model.isCollapsed(J)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(J,Ae){const ot=J.map(m=>this.model.getNode(m));this.selection.set(ot,Ae);const Ee=J.map(m=>this.model.getListIndex(m)).filter(m=>m>-1);this.view.setSelection(Ee,Ae,!0)}getSelection(){return this.selection.get()}setFocus(J,Ae){const ot=J.map(m=>this.model.getNode(m));this.focus.set(ot,Ae);const Ee=J.map(m=>this.model.getListIndex(m)).filter(m=>m>-1);this.view.setFocus(Ee,Ae,!0)}focusNext(J=1,Ae=!1,ot,Ee=this.focusNavigationFilter){this.view.focusNext(J,Ae,ot,Ee)}getFocus(){return this.focus.get()}reveal(J,Ae){this.model.expandTo(J);const ot=this.model.getListIndex(J);ot!==-1&&this.view.reveal(ot,Ae)}getRelativeTop(J){const Ae=this.model.getListIndex(J);return Ae===-1?null:this.view.getRelativeTop(Ae)}onLeftArrow(J){J.preventDefault(),J.stopPropagation();const Ae=this.view.getFocusedElements();if(Ae.length===0)return;const ot=Ae[0],Ee=this.model.getNodeLocation(ot);if(!this.model.setCollapsed(Ee,!0)){const V=this.model.getParentNodeLocation(Ee);if(!V)return;const G=this.model.getListIndex(V);this.view.reveal(G),this.view.setFocus([G])}}onRightArrow(J){J.preventDefault(),J.stopPropagation();const Ae=this.view.getFocusedElements();if(Ae.length===0)return;const ot=Ae[0],Ee=this.model.getNodeLocation(ot);if(!this.model.setCollapsed(Ee,!1)){if(!ot.children.some(ce=>ce.visible))return;const[V]=this.view.getFocus(),G=V+1;this.view.reveal(G),this.view.setFocus([G])}}onSpace(J){J.preventDefault(),J.stopPropagation();const Ae=this.view.getFocusedElements();if(Ae.length===0)return;const ot=Ae[0],Ee=this.model.getNodeLocation(ot),m=J.browserEvent.altKey;this.model.setCollapsed(Ee,void 0,m)}dispose(){(0,S.B9)(this.disposables),this.view.dispose()}}class ne{constructor(J,Ae,ot={}){this.user=J,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new ae(J,Ae,null,ot),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,ot.sorter&&(this.sorter={compare(Ee,m){return ot.sorter.compare(Ee.element,m.element)}}),this.identityProvider=ot.identityProvider}setChildren(J,Ae=q.$.empty(),ot={}){const Ee=this.getElementLocation(J);this._setChildren(Ee,this.preserveCollapseState(Ae),ot)}_setChildren(J,Ae=q.$.empty(),ot){const Ee=new Set,m=new Set,V=ce=>{var ve;if(ce.element===null)return;const De=ce;if(Ee.add(De.element),this.nodes.set(De.element,De),this.identityProvider){const ct=this.identityProvider.getId(De.element).toString();m.add(ct),this.nodesByIdentity.set(ct,De)}(ve=ot.onDidCreateNode)===null||ve===void 0||ve.call(ot,De)},G=ce=>{var ve;if(ce.element===null)return;const De=ce;if(Ee.has(De.element)||this.nodes.delete(De.element),this.identityProvider){const ct=this.identityProvider.getId(De.element).toString();m.has(ct)||this.nodesByIdentity.delete(ct)}(ve=ot.onDidDeleteNode)===null||ve===void 0||ve.call(ot,De)};this.model.splice([...J,0],Number.MAX_VALUE,Ae,Object.assign(Object.assign({},ot),{onDidCreateNode:V,onDidDeleteNode:G}))}preserveCollapseState(J=q.$.empty()){return this.sorter&&(J=[...J].sort(this.sorter.compare.bind(this.sorter))),q.$.map(J,Ae=>{let ot=this.nodes.get(Ae.element);if(!ot&&this.identityProvider){const V=this.identityProvider.getId(Ae.element).toString();ot=this.nodesByIdentity.get(V)}if(!ot)return Object.assign(Object.assign({},Ae),{children:this.preserveCollapseState(Ae.children)});const Ee=typeof Ae.collapsible=="boolean"?Ae.collapsible:ot.collapsible,m=typeof Ae.collapsed!="undefined"?Ae.collapsed:ot.collapsed;return Object.assign(Object.assign({},Ae),{collapsible:Ee,collapsed:m,children:this.preserveCollapseState(Ae.children)})})}rerender(J){const Ae=this.getElementLocation(J);this.model.rerender(Ae)}getFirstElementChild(J=null){const Ae=this.getElementLocation(J);return this.model.getFirstElementChild(Ae)}has(J){return this.nodes.has(J)}getListIndex(J){const Ae=this.getElementLocation(J);return this.model.getListIndex(Ae)}getListRenderCount(J){const Ae=this.getElementLocation(J);return this.model.getListRenderCount(Ae)}isCollapsible(J){const Ae=this.getElementLocation(J);return this.model.isCollapsible(Ae)}setCollapsible(J,Ae){const ot=this.getElementLocation(J);return this.model.setCollapsible(ot,Ae)}isCollapsed(J){const Ae=this.getElementLocation(J);return this.model.isCollapsed(Ae)}setCollapsed(J,Ae,ot){const Ee=this.getElementLocation(J);return this.model.setCollapsed(Ee,Ae,ot)}expandTo(J){const Ae=this.getElementLocation(J);this.model.expandTo(Ae)}refilter(){this.model.refilter()}getNode(J=null){if(J===null)return this.model.getNode(this.model.rootRef);const Ae=this.nodes.get(J);if(!Ae)throw new b(this.user,`Tree element not found: ${J}`);return Ae}getNodeLocation(J){return J.element}getParentNodeLocation(J){if(J===null)throw new b(this.user,"Invalid getParentNodeLocation call");const Ae=this.nodes.get(J);if(!Ae)throw new b(this.user,`Tree element not found: ${J}`);const ot=this.model.getNodeLocation(Ae),Ee=this.model.getParentNodeLocation(ot);return this.model.getNode(Ee).element}getElementLocation(J){if(J===null)return[];const Ae=this.nodes.get(J);if(!Ae)throw new b(this.user,`Tree element not found: ${J}`);return this.model.getNodeLocation(Ae)}}function Q(Ct){const J=[Ct.element],Ae=Ct.incompressible||!1;return{element:{elements:J,incompressible:Ae},children:q.$.map(q.$.from(Ct.children),Q),collapsible:Ct.collapsible,collapsed:Ct.collapsed}}function ie(Ct){const J=[Ct.element],Ae=Ct.incompressible||!1;let ot,Ee;for(;[Ee,ot]=q.$.consume(q.$.from(Ct.children),2),!(Ee.length!==1||Ee[0].incompressible);)Ct=Ee[0],J.push(Ct.element);return{element:{elements:J,incompressible:Ae},children:q.$.map(q.$.concat(Ee,ot),ie),collapsible:Ct.collapsible,collapsed:Ct.collapsed}}function xe(Ct,J=0){let Ae;return J<Ct.element.elements.length-1?Ae=[xe(Ct,J+1)]:Ae=q.$.map(q.$.from(Ct.children),ot=>xe(ot,0)),J===0&&Ct.element.incompressible?{element:Ct.element.elements[J],children:Ae,incompressible:!0,collapsible:Ct.collapsible,collapsed:Ct.collapsed}:{element:Ct.element.elements[J],children:Ae,collapsible:Ct.collapsible,collapsed:Ct.collapsed}}function be(Ct){return xe(Ct,0)}function Ge(Ct,J,Ae){return Ct.element===J?Object.assign(Object.assign({},Ct),{children:Ae}):Object.assign(Object.assign({},Ct),{children:q.$.map(q.$.from(Ct.children),ot=>Ge(ot,J,Ae))})}const nt=Ct=>({getId(J){return J.elements.map(Ae=>Ct.getId(Ae).toString()).join("\0")}});class _t{constructor(J,Ae,ot={}){this.user=J,this.rootRef=null,this.nodes=new Map,this.model=new ne(J,Ae,ot),this.enabled=typeof ot.compressionEnabled=="undefined"?!0:ot.compressionEnabled,this.identityProvider=ot.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(J,Ae=q.$.empty(),ot){const Ee=ot.diffIdentityProvider&&nt(ot.diffIdentityProvider);if(J===null){const Nt=q.$.map(Ae,this.enabled?ie:Q);this._setChildren(null,Nt,{diffIdentityProvider:Ee,diffDepth:Infinity});return}const m=this.nodes.get(J);if(!m)throw new Error("Unknown compressed tree node");const V=this.model.getNode(m),G=this.model.getParentNodeLocation(m),ce=this.model.getNode(G),ve=be(V),De=Ge(ve,J,Ae),ct=(this.enabled?ie:Q)(De),lt=ce.children.map(Nt=>Nt===V?ct:Nt);this._setChildren(ce.element,lt,{diffIdentityProvider:Ee,diffDepth:V.depth-ce.depth})}setCompressionEnabled(J){if(J===this.enabled)return;this.enabled=J;const ot=this.model.getNode().children,Ee=q.$.map(ot,be),m=q.$.map(Ee,J?ie:Q);this._setChildren(null,m,{diffIdentityProvider:this.identityProvider,diffDepth:Infinity})}_setChildren(J,Ae,ot){const Ee=new Set,m=G=>{for(const ce of G.element.elements)Ee.add(ce),this.nodes.set(ce,G.element)},V=G=>{for(const ce of G.element.elements)Ee.has(ce)||this.nodes.delete(ce)};this.model.setChildren(J,Ae,Object.assign(Object.assign({},ot),{onDidCreateNode:m,onDidDeleteNode:V}))}has(J){return this.nodes.has(J)}getListIndex(J){const Ae=this.getCompressedNode(J);return this.model.getListIndex(Ae)}getListRenderCount(J){const Ae=this.getCompressedNode(J);return this.model.getListRenderCount(Ae)}getNode(J){if(typeof J=="undefined")return this.model.getNode();const Ae=this.getCompressedNode(J);return this.model.getNode(Ae)}getNodeLocation(J){const Ae=this.model.getNodeLocation(J);return Ae===null?null:Ae.elements[Ae.elements.length-1]}getParentNodeLocation(J){const Ae=this.getCompressedNode(J),ot=this.model.getParentNodeLocation(Ae);return ot===null?null:ot.elements[ot.elements.length-1]}getFirstElementChild(J){const Ae=this.getCompressedNode(J);return this.model.getFirstElementChild(Ae)}isCollapsible(J){const Ae=this.getCompressedNode(J);return this.model.isCollapsible(Ae)}setCollapsible(J,Ae){const ot=this.getCompressedNode(J);return this.model.setCollapsible(ot,Ae)}isCollapsed(J){const Ae=this.getCompressedNode(J);return this.model.isCollapsed(Ae)}setCollapsed(J,Ae,ot){const Ee=this.getCompressedNode(J);return this.model.setCollapsed(Ee,Ae,ot)}expandTo(J){const Ae=this.getCompressedNode(J);this.model.expandTo(Ae)}rerender(J){const Ae=this.getCompressedNode(J);this.model.rerender(Ae)}refilter(){this.model.refilter()}getCompressedNode(J){if(J===null)return null;const Ae=this.nodes.get(J);if(!Ae)throw new b(this.user,`Tree element not found: ${J}`);return Ae}}const Ot=Ct=>Ct[Ct.length-1];class rn{constructor(J,Ae){this.unwrapper=J,this.node=Ae}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(J=>new rn(this.unwrapper,J))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function gt(Ct,J){return{splice(Ae,ot,Ee){J.splice(Ae,ot,Ee.map(m=>Ct.map(m)))},updateElementHeight(Ae,ot){J.updateElementHeight(Ae,ot)}}}function Ue(Ct,J){return Object.assign(Object.assign({},J),{identityProvider:J.identityProvider&&{getId(Ae){return J.identityProvider.getId(Ct(Ae))}},sorter:J.sorter&&{compare(Ae,ot){return J.sorter.compare(Ae.elements[0],ot.elements[0])}},filter:J.filter&&{filter(Ae,ot){return J.filter.filter(Ct(Ae),ot)}}})}class Ye{constructor(J,Ae,ot={}){this.rootRef=null,this.elementMapper=ot.elementMapper||Ot;const Ee=m=>this.elementMapper(m.elements);this.nodeMapper=new I(m=>new rn(Ee,m)),this.model=new _t(J,gt(this.nodeMapper,Ae),Ue(Ee,ot))}get onDidSplice(){return O.ju.map(this.model.onDidSplice,({insertedNodes:J,deletedNodes:Ae})=>({insertedNodes:J.map(ot=>this.nodeMapper.map(ot)),deletedNodes:Ae.map(ot=>this.nodeMapper.map(ot))}))}get onDidChangeCollapseState(){return O.ju.map(this.model.onDidChangeCollapseState,({node:J,deep:Ae})=>({node:this.nodeMapper.map(J),deep:Ae}))}get onDidChangeRenderNodeCount(){return O.ju.map(this.model.onDidChangeRenderNodeCount,J=>this.nodeMapper.map(J))}setChildren(J,Ae=q.$.empty(),ot={}){this.model.setChildren(J,Ae,ot)}setCompressionEnabled(J){this.model.setCompressionEnabled(J)}has(J){return this.model.has(J)}getListIndex(J){return this.model.getListIndex(J)}getListRenderCount(J){return this.model.getListRenderCount(J)}getNode(J){return this.nodeMapper.map(this.model.getNode(J))}getNodeLocation(J){return J.element}getParentNodeLocation(J){return this.model.getParentNodeLocation(J)}getFirstElementChild(J){const Ae=this.model.getFirstElementChild(J);return Ae===null||typeof Ae=="undefined"?Ae:this.elementMapper(Ae.elements)}isCollapsible(J){return this.model.isCollapsible(J)}setCollapsible(J,Ae){return this.model.setCollapsible(J,Ae)}isCollapsed(J){return this.model.isCollapsed(J)}setCollapsed(J,Ae,ot){return this.model.setCollapsed(J,Ae,ot)}expandTo(J){return this.model.expandTo(J)}rerender(J){return this.model.rerender(J)}refilter(){return this.model.refilter()}getCompressedTreeNode(J=null){return this.model.getNode(J)}}var dt=a(49898),Re=function(Ct,J,Ae,ot){var Ee=arguments.length,m=Ee<3?J:ot===null?ot=Object.getOwnPropertyDescriptor(J,Ae):ot,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(Ct,J,Ae,ot);else for(var G=Ct.length-1;G>=0;G--)(V=Ct[G])&&(m=(Ee<3?V(m):Ee>3?V(J,Ae,m):V(J,Ae))||m);return Ee>3&&m&&Object.defineProperty(J,Ae,m),m};class Ve extends Fe{constructor(J,Ae,ot,Ee,m={}){super(J,Ae,ot,Ee,m);this.user=J}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(J,Ae=q.$.empty(),ot){this.model.setChildren(J,Ae,ot)}rerender(J){if(J===void 0){this.view.rerender();return}this.model.rerender(J)}hasElement(J){return this.model.has(J)}createModel(J,Ae,ot){return new ne(J,Ae,ot)}}class at{constructor(J,Ae){this._compressedTreeNodeProvider=J,this.renderer=Ae,this.templateId=Ae.templateId,Ae.onDidChangeTwistieState&&(this.onDidChangeTwistieState=Ae.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(J){const Ae=this.renderer.renderTemplate(J);return{compressedTreeNode:void 0,data:Ae}}renderElement(J,Ae,ot,Ee){const m=this.compressedTreeNodeProvider.getCompressedTreeNode(J.element);m.element.elements.length===1?(ot.compressedTreeNode=void 0,this.renderer.renderElement(J,Ae,ot.data,Ee)):(ot.compressedTreeNode=m,this.renderer.renderCompressedElements(m,Ae,ot.data,Ee))}disposeElement(J,Ae,ot,Ee){ot.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(ot.compressedTreeNode,Ae,ot.data,Ee):this.renderer.disposeElement&&this.renderer.disposeElement(J,Ae,ot.data,Ee)}disposeTemplate(J){this.renderer.disposeTemplate(J.data)}renderTwistie(J,Ae){return this.renderer.renderTwistie?this.renderer.renderTwistie(J,Ae):!1}}Re([dt.H],at.prototype,"compressedTreeNodeProvider",null);function pt(Ct,J){return J&&Object.assign(Object.assign({},J),{keyboardNavigationLabelProvider:J.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(Ae){let ot;try{ot=Ct().getCompressedTreeNode(Ae)}catch(Ee){return J.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(Ae)}return ot.element.elements.length===1?J.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(Ae):J.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(ot.element.elements)}}})}class Be extends Ve{constructor(J,Ae,ot,Ee,m={}){const V=()=>this,G=Ee.map(ce=>new at(V,ce));super(J,Ae,ot,G,pt(V,m))}setChildren(J,Ae=q.$.empty(),ot){this.model.setChildren(J,Ae,ot)}createModel(J,Ae,ot){return new Ye(J,Ae,ot)}updateOptions(J={}){super.updateOptions(J),typeof J.compressionEnabled!="undefined"&&this.model.setCompressionEnabled(J.compressionEnabled)}getCompressedTreeNode(J=null){return this.model.getCompressedTreeNode(J)}}var je=a(17301),Et=a(98401),Dt=function(Ct,J,Ae,ot){function Ee(m){return m instanceof Ae?m:new Ae(function(V){V(m)})}return new(Ae||(Ae=Promise))(function(m,V){function G(De){try{ve(ot.next(De))}catch(ct){V(ct)}}function ce(De){try{ve(ot.throw(De))}catch(ct){V(ct)}}function ve(De){De.done?m(De.value):Ee(De.value).then(G,ce)}ve((ot=ot.apply(Ct,J||[])).next())})};function Xe(Ct){return Object.assign(Object.assign({},Ct),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function ft(Ct,J){return J.parent?J.parent===Ct?!0:ft(Ct,J.parent):!1}function an(Ct,J){return Ct===J||ft(Ct,J)||ft(J,Ct)}class An{constructor(J){this.node=J}get element(){return this.node.element.element}get children(){return this.node.children.map(J=>new An(J))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class Fn{constructor(J,Ae,ot){this.renderer=J,this.nodeMapper=Ae,this.onDidChangeTwistieState=ot,this.renderedNodes=new Map,this.templateId=J.templateId}renderTemplate(J){return{templateData:this.renderer.renderTemplate(J)}}renderElement(J,Ae,ot,Ee){this.renderer.renderElement(this.nodeMapper.map(J),Ae,ot.templateData,Ee)}renderTwistie(J,Ae){return J.slow?(Ae.classList.add(...ue.lA.treeItemLoading.classNamesArray),!0):(Ae.classList.remove(...ue.lA.treeItemLoading.classNamesArray),!1)}disposeElement(J,Ae,ot,Ee){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(J),Ae,ot.templateData,Ee)}disposeTemplate(J){this.renderer.disposeTemplate(J.templateData)}dispose(){this.renderedNodes.clear()}}function Ht(Ct){return{browserEvent:Ct.browserEvent,elements:Ct.elements.map(J=>J.element)}}function Kt(Ct){return{browserEvent:Ct.browserEvent,element:Ct.element&&Ct.element.element,target:Ct.target}}class pn extends M.kX{constructor(J){super(J.elements.map(Ae=>Ae.element));this.data=J}}function Vn(Ct){return Ct instanceof M.kX?new pn(Ct):Ct}class kt{constructor(J){this.dnd=J}getDragURI(J){return this.dnd.getDragURI(J.element)}getDragLabel(J,Ae){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(J.map(ot=>ot.element),Ae)}onDragStart(J,Ae){this.dnd.onDragStart&&this.dnd.onDragStart(Vn(J),Ae)}onDragOver(J,Ae,ot,Ee,m=!0){return this.dnd.onDragOver(Vn(J),Ae&&Ae.element,ot,Ee)}drop(J,Ae,ot,Ee){this.dnd.drop(Vn(J),Ae&&Ae.element,ot,Ee)}onDragEnd(J){this.dnd.onDragEnd&&this.dnd.onDragEnd(J)}}function Zt(Ct){return Ct&&Object.assign(Object.assign({},Ct),{collapseByDefault:!0,identityProvider:Ct.identityProvider&&{getId(J){return Ct.identityProvider.getId(J.element)}},dnd:Ct.dnd&&new kt(Ct.dnd),multipleSelectionController:Ct.multipleSelectionController&&{isSelectionSingleChangeEvent(J){return Ct.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},J),{element:J.element}))},isSelectionRangeChangeEvent(J){return Ct.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},J),{element:J.element}))}},accessibilityProvider:Ct.accessibilityProvider&&Object.assign(Object.assign({},Ct.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:Ct.accessibilityProvider.getRole?J=>Ct.accessibilityProvider.getRole(J.element):()=>"treeitem",isChecked:Ct.accessibilityProvider.isChecked?J=>{var Ae;return!!((Ae=Ct.accessibilityProvider)===null||Ae===void 0?void 0:Ae.isChecked(J.element))}:void 0,getAriaLabel(J){return Ct.accessibilityProvider.getAriaLabel(J.element)},getWidgetAriaLabel(){return Ct.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:Ct.accessibilityProvider.getWidgetRole?()=>Ct.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:Ct.accessibilityProvider.getAriaLevel&&(J=>Ct.accessibilityProvider.getAriaLevel(J.element)),getActiveDescendantId:Ct.accessibilityProvider.getActiveDescendantId&&(J=>Ct.accessibilityProvider.getActiveDescendantId(J.element))}),filter:Ct.filter&&{filter(J,Ae){return Ct.filter.filter(J.element,Ae)}},keyboardNavigationLabelProvider:Ct.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},Ct.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(J){return Ct.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(J.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof Ct.expandOnlyOnTwistieClick=="undefined"?void 0:typeof Ct.expandOnlyOnTwistieClick!="function"?Ct.expandOnlyOnTwistieClick:J=>Ct.expandOnlyOnTwistieClick(J.element),additionalScrollHeight:Ct.additionalScrollHeight})}function wn(Ct,J){J(Ct),Ct.children.forEach(Ae=>wn(Ae,J))}class Pi{constructor(J,Ae,ot,Ee,m,V={}){this.user=J,this.dataSource=m,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new O.Q5,this._onDidChangeNodeSlowState=new O.Q5,this.nodeMapper=new I(G=>new An(G)),this.disposables=new S.SL,this.identityProvider=V.identityProvider,this.autoExpandSingleChildren=typeof V.autoExpandSingleChildren=="undefined"?!1:V.autoExpandSingleChildren,this.sorter=V.sorter,this.collapseByDefault=V.collapseByDefault,this.tree=this.createTree(J,Ae,ot,Ee,V),this.root=Xe({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return O.ju.map(this.tree.onDidChangeFocus,Ht)}get onDidChangeSelection(){return O.ju.map(this.tree.onDidChangeSelection,Ht)}get onMouseDblClick(){return O.ju.map(this.tree.onMouseDblClick,Kt)}get onPointer(){return O.ju.map(this.tree.onPointer,Kt)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidDispose(){return this.tree.onDidDispose}createTree(J,Ae,ot,Ee,m){const V=new ke(ot),G=Ee.map(ve=>new Fn(ve,this.nodeMapper,this._onDidChangeNodeSlowState.event)),ce=Zt(m)||{};return new Ve(J,Ae,V,G,ce)}updateOptions(J={}){this.tree.updateOptions(J)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(J){this.tree.scrollTop=J}domFocus(){this.tree.domFocus()}layout(J,Ae){this.tree.layout(J,Ae)}style(J){this.tree.style(J)}getInput(){return this.root.element}setInput(J,Ae){return Dt(this,void 0,void 0,function*(){this.refreshPromises.forEach(Ee=>Ee.cancel()),this.refreshPromises.clear(),this.root.element=J;const ot=Ae&&{viewState:Ae,focus:[],selection:[]};yield this._updateChildren(J,!0,!1,ot),ot&&(this.tree.setFocus(ot.focus),this.tree.setSelection(ot.selection)),Ae&&typeof Ae.scrollTop=="number"&&(this.scrollTop=Ae.scrollTop)})}_updateChildren(J=this.root.element,Ae=!0,ot=!1,Ee,m){return Dt(this,void 0,void 0,function*(){if(typeof this.root.element=="undefined")throw new b(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield O.ju.toPromise(this._onDidRender.event));const V=this.getDataNode(J);if(yield this.refreshAndRenderNode(V,Ae,Ee,m),ot)try{this.tree.rerender(V)}catch(G){}})}rerender(J){if(J===void 0||J===this.root.element){this.tree.rerender();return}const Ae=this.getDataNode(J);this.tree.rerender(Ae)}getNode(J=this.root.element){const Ae=this.getDataNode(J),ot=this.tree.getNode(Ae===this.root?null:Ae);return this.nodeMapper.map(ot)}collapse(J,Ae=!1){const ot=this.getDataNode(J);return this.tree.collapse(ot===this.root?null:ot,Ae)}expand(J,Ae=!1){return Dt(this,void 0,void 0,function*(){if(typeof this.root.element=="undefined")throw new b(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield O.ju.toPromise(this._onDidRender.event));const ot=this.getDataNode(J);if(this.tree.hasElement(ot)&&!this.tree.isCollapsible(ot)||(ot.refreshPromise&&(yield this.root.refreshPromise,yield O.ju.toPromise(this._onDidRender.event)),ot!==this.root&&!ot.refreshPromise&&!this.tree.isCollapsed(ot)))return!1;const Ee=this.tree.expand(ot===this.root?null:ot,Ae);return ot.refreshPromise&&(yield this.root.refreshPromise,yield O.ju.toPromise(this._onDidRender.event)),Ee})}setSelection(J,Ae){const ot=J.map(Ee=>this.getDataNode(Ee));this.tree.setSelection(ot,Ae)}getSelection(){return this.tree.getSelection().map(Ae=>Ae.element)}setFocus(J,Ae){const ot=J.map(Ee=>this.getDataNode(Ee));this.tree.setFocus(ot,Ae)}getFocus(){return this.tree.getFocus().map(Ae=>Ae.element)}reveal(J,Ae){this.tree.reveal(this.getDataNode(J),Ae)}getParentElement(J){const Ae=this.tree.getParentElement(this.getDataNode(J));return Ae&&Ae.element}getFirstElementChild(J=this.root.element){const Ae=this.getDataNode(J),ot=this.tree.getFirstElementChild(Ae===this.root?null:Ae);return ot&&ot.element}getDataNode(J){const Ae=this.nodes.get(J===this.root.element?null:J);if(!Ae)throw new b(this.user,`Data tree node not found: ${J}`);return Ae}refreshAndRenderNode(J,Ae,ot,Ee){return Dt(this,void 0,void 0,function*(){yield this.refreshNode(J,Ae,ot),this.render(J,ot,Ee)})}refreshNode(J,Ae,ot){return Dt(this,void 0,void 0,function*(){let Ee;return this.subTreeRefreshPromises.forEach((m,V)=>{!Ee&&an(V,J)&&(Ee=m.then(()=>this.refreshNode(J,Ae,ot)))}),Ee||this.doRefreshSubTree(J,Ae,ot)})}doRefreshSubTree(J,Ae,ot){return Dt(this,void 0,void 0,function*(){let Ee;J.refreshPromise=new Promise(m=>Ee=m),this.subTreeRefreshPromises.set(J,J.refreshPromise),J.refreshPromise.finally(()=>{J.refreshPromise=void 0,this.subTreeRefreshPromises.delete(J)});try{const m=yield this.doRefreshNode(J,Ae,ot);J.stale=!1,yield k.jT.settled(m.map(V=>this.doRefreshSubTree(V,Ae,ot)))}finally{Ee()}})}doRefreshNode(J,Ae,ot){return Dt(this,void 0,void 0,function*(){J.hasChildren=!!this.dataSource.hasChildren(J.element);let Ee;if(!J.hasChildren)Ee=Promise.resolve(q.$.empty());else{const m=this.doGetChildren(J);if((0,Et.TW)(m))Ee=Promise.resolve(m);else{const V=(0,k.Vs)(800);V.then(()=>{J.slow=!0,this._onDidChangeNodeSlowState.fire(J)},G=>null),Ee=m.finally(()=>V.cancel())}}try{const m=yield Ee;return this.setChildren(J,m,Ae,ot)}catch(m){if(J!==this.root&&this.tree.hasElement(J)&&this.tree.collapse(J),(0,je.n2)(m))return[];throw m}finally{J.slow&&(J.slow=!1,this._onDidChangeNodeSlowState.fire(J))}})}doGetChildren(J){let Ae=this.refreshPromises.get(J);if(Ae)return Ae;const ot=this.dataSource.getChildren(J.element);return(0,Et.TW)(ot)?this.processChildren(ot):(Ae=(0,k.PG)(()=>Dt(this,void 0,void 0,function*(){return this.processChildren(yield ot)})),this.refreshPromises.set(J,Ae),Ae.finally(()=>{this.refreshPromises.delete(J)}))}_onDidChangeCollapseState({node:J,deep:Ae}){J.element!==null&&!J.collapsed&&J.element.stale&&(Ae?this.collapse(J.element.element):this.refreshAndRenderNode(J.element,!1).catch(je.dL))}setChildren(J,Ae,ot,Ee){const m=[...Ae];if(J.children.length===0&&m.length===0)return[];const V=new Map,G=new Map;for(const De of J.children)if(V.set(De.element,De),this.identityProvider){const ct=this.tree.isCollapsed(De);G.set(De.id,{node:De,collapsed:ct})}const ce=[],ve=m.map(De=>{const ct=!!this.dataSource.hasChildren(De);if(!this.identityProvider){const Ft=Xe({element:De,parent:J,hasChildren:ct});return ct&&this.collapseByDefault&&!this.collapseByDefault(De)&&(Ft.collapsedByDefault=!1,ce.push(Ft)),Ft}const lt=this.identityProvider.getId(De).toString(),Nt=G.get(lt);if(Nt){const Ft=Nt.node;return V.delete(Ft.element),this.nodes.delete(Ft.element),this.nodes.set(De,Ft),Ft.element=De,Ft.hasChildren=ct,ot?Nt.collapsed?(Ft.children.forEach(jt=>wn(jt,bn=>this.nodes.delete(bn.element))),Ft.children.splice(0,Ft.children.length),Ft.stale=!0):ce.push(Ft):ct&&this.collapseByDefault&&!this.collapseByDefault(De)&&(Ft.collapsedByDefault=!1,ce.push(Ft)),Ft}const It=Xe({element:De,parent:J,id:lt,hasChildren:ct});return Ee&&Ee.viewState.focus&&Ee.viewState.focus.indexOf(lt)>-1&&Ee.focus.push(It),Ee&&Ee.viewState.selection&&Ee.viewState.selection.indexOf(lt)>-1&&Ee.selection.push(It),Ee&&Ee.viewState.expanded&&Ee.viewState.expanded.indexOf(lt)>-1?ce.push(It):ct&&this.collapseByDefault&&!this.collapseByDefault(De)&&(It.collapsedByDefault=!1,ce.push(It)),It});for(const De of V.values())wn(De,ct=>this.nodes.delete(ct.element));for(const De of ve)this.nodes.set(De.element,De);return J.children.splice(0,J.children.length,...ve),J!==this.root&&this.autoExpandSingleChildren&&ve.length===1&&ce.length===0&&(ve[0].collapsedByDefault=!1,ce.push(ve[0])),ce}render(J,Ae,ot){const Ee=J.children.map(V=>this.asTreeElement(V,Ae)),m=ot&&Object.assign(Object.assign({},ot),{diffIdentityProvider:ot.diffIdentityProvider&&{getId(V){return ot.diffIdentityProvider.getId(V.element)}}});this.tree.setChildren(J===this.root?null:J,Ee,m),J!==this.root&&this.tree.setCollapsible(J,J.hasChildren),this._onDidRender.fire()}asTreeElement(J,Ae){if(J.stale)return{element:J,collapsible:J.hasChildren,collapsed:!0};let ot;return Ae&&Ae.viewState.expanded&&J.id&&Ae.viewState.expanded.indexOf(J.id)>-1?ot=!1:ot=J.collapsedByDefault,J.collapsedByDefault=void 0,{element:J,children:J.hasChildren?q.$.map(J.children,Ee=>this.asTreeElement(Ee,Ae)):[],collapsible:J.hasChildren,collapsed:ot}}processChildren(J){return this.sorter&&(J=[...J].sort(this.sorter.compare.bind(this.sorter))),J}dispose(){this.disposables.dispose()}}class Fi{constructor(J){this.node=J}get element(){return{elements:this.node.element.elements.map(J=>J.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(J=>new Fi(J))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class Ji{constructor(J,Ae,ot,Ee){this.renderer=J,this.nodeMapper=Ae,this.compressibleNodeMapperProvider=ot,this.onDidChangeTwistieState=Ee,this.renderedNodes=new Map,this.disposables=[],this.templateId=J.templateId}renderTemplate(J){return{templateData:this.renderer.renderTemplate(J)}}renderElement(J,Ae,ot,Ee){this.renderer.renderElement(this.nodeMapper.map(J),Ae,ot.templateData,Ee)}renderCompressedElements(J,Ae,ot,Ee){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(J),Ae,ot.templateData,Ee)}renderTwistie(J,Ae){return J.slow?(Ae.classList.add(...ue.lA.treeItemLoading.classNamesArray),!0):(Ae.classList.remove(...ue.lA.treeItemLoading.classNamesArray),!1)}disposeElement(J,Ae,ot,Ee){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(J),Ae,ot.templateData,Ee)}disposeCompressedElements(J,Ae,ot,Ee){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(J),Ae,ot.templateData,Ee)}disposeTemplate(J){this.renderer.disposeTemplate(J.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,S.B9)(this.disposables)}}function si(Ct){const J=Ct&&Zt(Ct);return J&&Object.assign(Object.assign({},J),{keyboardNavigationLabelProvider:J.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},J.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(Ae){return Ct.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(Ae.map(ot=>ot.element))}})})}class zt extends Pi{constructor(J,Ae,ot,Ee,m,V,G={}){super(J,Ae,ot,m,V,G);this.compressionDelegate=Ee,this.compressibleNodeMapper=new I(ce=>new Fi(ce)),this.filter=G.filter}createTree(J,Ae,ot,Ee,m){const V=new ke(ot),G=Ee.map(ve=>new Ji(ve,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),ce=si(m)||{};return new Be(J,Ae,V,G,ce)}asTreeElement(J,Ae){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(J.element)},super.asTreeElement(J,Ae))}updateOptions(J={}){this.tree.updateOptions(J)}render(J,Ae){if(!this.identityProvider)return super.render(J,Ae);const ot=lt=>this.identityProvider.getId(lt).toString(),Ee=lt=>{const Nt=new Set;for(const It of lt){const Ft=this.tree.getCompressedTreeNode(It===this.root?null:It);if(!!Ft.element)for(const jt of Ft.element.elements)Nt.add(ot(jt.element))}return Nt},m=Ee(this.tree.getSelection()),V=Ee(this.tree.getFocus());super.render(J,Ae);const G=this.getSelection();let ce=!1;const ve=this.getFocus();let De=!1;const ct=lt=>{const Nt=lt.element;if(Nt)for(let It=0;It<Nt.elements.length;It++){const Ft=ot(Nt.elements[It].element),jt=Nt.elements[Nt.elements.length-1].element;m.has(Ft)&&G.indexOf(jt)===-1&&(G.push(jt),ce=!0),V.has(Ft)&&ve.indexOf(jt)===-1&&(ve.push(jt),De=!0)}lt.children.forEach(ct)};ct(this.tree.getCompressedTreeNode(J===this.root?null:J)),ce&&this.setSelection(G),De&&this.setFocus(ve)}processChildren(J){return this.filter&&(J=q.$.filter(J,Ae=>{const ot=this.filter.filter(Ae,1),Ee=Vt(ot);if(Ee===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return Ee===1})),super.processChildren(J)}}function Vt(Ct){return typeof Ct=="boolean"?Ct?1:0:re(Ct)?de(Ct.visibility):de(Ct)}class vn extends Fe{constructor(J,Ae,ot,Ee,m,V={}){super(J,Ae,ot,Ee,V);this.user=J,this.dataSource=m,this.identityProvider=V.identityProvider}createModel(J,Ae,ot){return new ne(J,Ae,ot)}}var Sn=a(31106),Bn=a(33108),mn=a(23193),Jt=a(16141),En=a(39282),$t=a(72065),sn=a(91847),Tn=a(89872),ri=a(88810),oi=a(97781),On=function(Ct,J,Ae,ot){var Ee=arguments.length,m=Ee<3?J:ot===null?ot=Object.getOwnPropertyDescriptor(J,Ae):ot,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(Ct,J,Ae,ot);else for(var G=Ct.length-1;G>=0;G--)(V=Ct[G])&&(m=(Ee<3?V(m):Ee>3?V(J,Ae,m):V(J,Ae))||m);return Ee>3&&m&&Object.defineProperty(J,Ae,m),m},Qn=function(Ct,J){return function(Ae,ot){J(Ae,ot,Ct)}};const Yi=(0,$t.yh)("listService");let Lr=class{constructor(J){this._themeService=J,this.disposables=new S.SL,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(J){var Ae,ot;J!==this._lastFocusedWidget&&((Ae=this._lastFocusedWidget)===null||Ae===void 0||Ae.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=J,(ot=this._lastFocusedWidget)===null||ot===void 0||ot.getHTMLElement().classList.add("last-focused"))}register(J,Ae){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const Ee=new j.wD((0,p.dS)(),"");this.disposables.add((0,ri.Jl)(Ee,this._themeService))}if(this.lists.some(Ee=>Ee.widget===J))throw new Error("Cannot register the same widget multiple times");const ot={widget:J,extraContextKeys:Ae};return this.lists.push(ot),J.getHTMLElement()===document.activeElement&&this.setLastFocusedList(J),(0,S.F8)(J.onDidFocus(()=>this.setLastFocusedList(J)),(0,S.OF)(()=>this.lists.splice(this.lists.indexOf(ot),1)),J.onDidDispose(()=>{this.lists=this.lists.filter(Ee=>Ee!==ot),this._lastFocusedWidget===J&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};Lr=On([Qn(0,oi.XE)],Lr);const Dr=new Jt.uy("listFocus",!0),Fr=new Jt.uy("listSupportsMultiselect",!0),Sr=Jt.Ao.and(Dr,Jt.Ao.not(En.d0)),Ro=new Jt.uy("listHasSelectionOrFocus",!1),to=new Jt.uy("listDoubleSelection",!1),no=new Jt.uy("listMultiSelection",!1),dr=new Jt.uy("listSelectionNavigation",!1),kn=new Jt.uy("treeElementCanCollapse",!1),bt=new Jt.uy("treeElementHasParent",!1),Bt=new Jt.uy("treeElementCanExpand",!1),At=new Jt.uy("treeElementHasChild",!1),Ke="listAutomaticKeyboardNavigation";function vt(Ct,J){const Ae=Ct.createScoped(J.getHTMLElement());return Dr.bindTo(Ae),Ae}const Lt="workbench.list.multiSelectModifier",tn="workbench.list.openMode",dn="workbench.list.horizontalScrolling",hn="workbench.list.keyboardNavigation",Wn="workbench.list.automaticKeyboardNavigation",Gn="workbench.tree.indent",wi="workbench.tree.renderIndentGuides",Ci="workbench.list.smoothScrolling",Xi="workbench.list.mouseWheelScrollSensitivity",Nr="workbench.list.fastScrollSensitivity",yr="workbench.tree.expandMode";function Xr(Ct){return Ct.getValue(Lt)==="alt"}class Jr extends S.JT{constructor(J){super();this.configurationService=J,this.useAltAsMultipleSelectionModifier=Xr(J),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(J=>{J.affectsConfiguration(Lt)&&(this.useAltAsMultipleSelectionModifier=Xr(this.configurationService))}))}isSelectionSingleChangeEvent(J){return this.useAltAsMultipleSelectionModifier?J.browserEvent.altKey:(0,j.Zo)(J)}isSelectionRangeChangeEvent(J){return(0,j.wn)(J)}}function $o(Ct,J,Ae){var ot;const Ee=new S.SL;return[Object.assign(Object.assign({},Ct),{keyboardNavigationDelegate:{mightProducePrintableCharacter(V){return Ae.mightProducePrintableCharacter(V)}},smoothScrolling:Boolean(J.getValue(Ci)),mouseWheelScrollSensitivity:J.getValue(Xi),fastScrollSensitivity:J.getValue(Nr),multipleSelectionController:(ot=Ct.multipleSelectionController)!==null&&ot!==void 0?ot:Ee.add(new Jr(J))}),Ee]}let ms=class extends j.aV{constructor(J,Ae,ot,Ee,m,V,G,ce,ve,De){const ct=typeof m.horizontalScrolling!="undefined"?m.horizontalScrolling:Boolean(ve.getValue(dn)),[lt,Nt]=$o(m,ve,De);super(J,Ae,ot,Ee,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},(0,ri.o)(ce.getColorTheme(),ri.O2)),lt),{horizontalScrolling:ct}));this.disposables.add(Nt),this.contextKeyService=vt(V,this),this.themeService=ce,this.listSupportsMultiSelect=Fr.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(m.multipleSelectionSupport!==!1),dr.bindTo(this.contextKeyService).set(Boolean(m.selectionNavigation)),this.listHasSelectionOrFocus=Ro.bindTo(this.contextKeyService),this.listDoubleSelection=to.bindTo(this.contextKeyService),this.listMultiSelection=no.bindTo(this.contextKeyService),this.horizontalScrolling=m.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Xr(ve),this.disposables.add(this.contextKeyService),this.disposables.add(G.register(this)),m.overrideStyles&&this.updateStyles(m.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const Ft=this.getSelection(),jt=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(Ft.length>0||jt.length>0),this.listMultiSelection.set(Ft.length>1),this.listDoubleSelection.set(Ft.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const Ft=this.getSelection(),jt=this.getFocus();this.listHasSelectionOrFocus.set(Ft.length>0||jt.length>0)})),this.disposables.add(ve.onDidChangeConfiguration(Ft=>{Ft.affectsConfiguration(Lt)&&(this._useAltAsMultipleSelectionModifier=Xr(ve));let jt={};if(Ft.affectsConfiguration(dn)&&this.horizontalScrolling===void 0){const bn=Boolean(ve.getValue(dn));jt=Object.assign(Object.assign({},jt),{horizontalScrolling:bn})}if(Ft.affectsConfiguration(Ci)){const bn=Boolean(ve.getValue(Ci));jt=Object.assign(Object.assign({},jt),{smoothScrolling:bn})}if(Ft.affectsConfiguration(Xi)){const bn=ve.getValue(Xi);jt=Object.assign(Object.assign({},jt),{mouseWheelScrollSensitivity:bn})}if(Ft.affectsConfiguration(Nr)){const bn=ve.getValue(Nr);jt=Object.assign(Object.assign({},jt),{fastScrollSensitivity:bn})}Object.keys(jt).length>0&&this.updateOptions(jt)})),this.navigator=new Br(this,Object.assign({configurationService:ve},m)),this.disposables.add(this.navigator)}updateOptions(J){super.updateOptions(J),J.overrideStyles&&this.updateStyles(J.overrideStyles),J.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!J.multipleSelectionSupport)}updateStyles(J){var Ae;(Ae=this._styler)===null||Ae===void 0||Ae.dispose(),this._styler=(0,ri.Jl)(this,this.themeService,J)}dispose(){var J;(J=this._styler)===null||J===void 0||J.dispose(),super.dispose()}};ms=On([Qn(5,Jt.i6),Qn(6,Yi),Qn(7,oi.XE),Qn(8,Bn.Ui),Qn(9,sn.d)],ms);let cs=class extends x{constructor(J,Ae,ot,Ee,m,V,G,ce,ve,De){const ct=typeof m.horizontalScrolling!="undefined"?m.horizontalScrolling:Boolean(ve.getValue(dn)),[lt,Nt]=$o(m,ve,De);super(J,Ae,ot,Ee,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},(0,ri.o)(ce.getColorTheme(),ri.O2)),lt),{horizontalScrolling:ct}));this.disposables=new S.SL,this.disposables.add(Nt),this.contextKeyService=vt(V,this),this.themeService=ce,this.horizontalScrolling=m.horizontalScrolling,this.listSupportsMultiSelect=Fr.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(m.multipleSelectionSupport!==!1),dr.bindTo(this.contextKeyService).set(Boolean(m.selectionNavigation)),this._useAltAsMultipleSelectionModifier=Xr(ve),this.disposables.add(this.contextKeyService),this.disposables.add(G.register(this)),m.overrideStyles&&this.updateStyles(m.overrideStyles),m.overrideStyles&&this.disposables.add((0,ri.Jl)(this,ce,m.overrideStyles)),this.disposables.add(ve.onDidChangeConfiguration(Ft=>{Ft.affectsConfiguration(Lt)&&(this._useAltAsMultipleSelectionModifier=Xr(ve));let jt={};if(Ft.affectsConfiguration(dn)&&this.horizontalScrolling===void 0){const bn=Boolean(ve.getValue(dn));jt=Object.assign(Object.assign({},jt),{horizontalScrolling:bn})}if(Ft.affectsConfiguration(Ci)){const bn=Boolean(ve.getValue(Ci));jt=Object.assign(Object.assign({},jt),{smoothScrolling:bn})}if(Ft.affectsConfiguration(Xi)){const bn=ve.getValue(Xi);jt=Object.assign(Object.assign({},jt),{mouseWheelScrollSensitivity:bn})}if(Ft.affectsConfiguration(Nr)){const bn=ve.getValue(Nr);jt=Object.assign(Object.assign({},jt),{fastScrollSensitivity:bn})}Object.keys(jt).length>0&&this.updateOptions(jt)})),this.navigator=new Br(this,Object.assign({configurationService:ve},m)),this.disposables.add(this.navigator)}updateOptions(J){super.updateOptions(J),J.overrideStyles&&this.updateStyles(J.overrideStyles),J.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!J.multipleSelectionSupport)}updateStyles(J){var Ae;(Ae=this._styler)===null||Ae===void 0||Ae.dispose(),this._styler=(0,ri.Jl)(this,this.themeService,J)}dispose(){var J;(J=this._styler)===null||J===void 0||J.dispose(),this.disposables.dispose(),super.dispose()}};cs=On([Qn(5,Jt.i6),Qn(6,Yi),Qn(7,oi.XE),Qn(8,Bn.Ui),Qn(9,sn.d)],cs);let nr=class extends C{constructor(J,Ae,ot,Ee,m,V,G,ce,ve,De,ct){const lt=typeof V.horizontalScrolling!="undefined"?V.horizontalScrolling:Boolean(De.getValue(dn)),[Nt,It]=$o(V,De,ct);super(J,Ae,ot,Ee,m,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},(0,ri.o)(ve.getColorTheme(),ri.O2)),Nt),{horizontalScrolling:lt}));this.disposables.add(It),this.contextKeyService=vt(G,this),this.themeService=ve,this.listSupportsMultiSelect=Fr.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(V.multipleSelectionSupport!==!1),dr.bindTo(this.contextKeyService).set(Boolean(V.selectionNavigation)),this.listHasSelectionOrFocus=Ro.bindTo(this.contextKeyService),this.listDoubleSelection=to.bindTo(this.contextKeyService),this.listMultiSelection=no.bindTo(this.contextKeyService),this.horizontalScrolling=V.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Xr(De),this.disposables.add(this.contextKeyService),this.disposables.add(ce.register(this)),V.overrideStyles&&this.updateStyles(V.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const jt=this.getSelection(),bn=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(jt.length>0||bn.length>0),this.listMultiSelection.set(jt.length>1),this.listDoubleSelection.set(jt.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const jt=this.getSelection(),bn=this.getFocus();this.listHasSelectionOrFocus.set(jt.length>0||bn.length>0)})),this.disposables.add(De.onDidChangeConfiguration(jt=>{jt.affectsConfiguration(Lt)&&(this._useAltAsMultipleSelectionModifier=Xr(De));let bn={};if(jt.affectsConfiguration(dn)&&this.horizontalScrolling===void 0){const Zn=Boolean(De.getValue(dn));bn=Object.assign(Object.assign({},bn),{horizontalScrolling:Zn})}if(jt.affectsConfiguration(Ci)){const Zn=Boolean(De.getValue(Ci));bn=Object.assign(Object.assign({},bn),{smoothScrolling:Zn})}if(jt.affectsConfiguration(Xi)){const Zn=De.getValue(Xi);bn=Object.assign(Object.assign({},bn),{mouseWheelScrollSensitivity:Zn})}if(jt.affectsConfiguration(Nr)){const Zn=De.getValue(Nr);bn=Object.assign(Object.assign({},bn),{fastScrollSensitivity:Zn})}Object.keys(bn).length>0&&this.updateOptions(bn)})),this.navigator=new Mr(this,Object.assign({configurationService:De},V)),this.disposables.add(this.navigator)}updateOptions(J){super.updateOptions(J),J.overrideStyles&&this.updateStyles(J.overrideStyles),J.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!J.multipleSelectionSupport)}updateStyles(J){var Ae;(Ae=this._styler)===null||Ae===void 0||Ae.dispose(),this._styler=(0,ri.Jl)(this,this.themeService,J)}dispose(){var J;(J=this._styler)===null||J===void 0||J.dispose(),this.disposables.dispose(),super.dispose()}};nr=On([Qn(6,Jt.i6),Qn(7,Yi),Qn(8,oi.XE),Qn(9,Bn.Ui),Qn(10,sn.d)],nr);class tr extends S.JT{constructor(J,Ae){var ot;super();this.widget=J,this._onDidOpen=this._register(new O.Q5),this.onDidOpen=this._onDidOpen.event,this._register(O.ju.filter(this.widget.onDidChangeSelection,Ee=>Ee.browserEvent instanceof KeyboardEvent)(Ee=>this.onSelectionFromKeyboard(Ee))),this._register(this.widget.onPointer(Ee=>this.onPointer(Ee.element,Ee.browserEvent))),this._register(this.widget.onMouseDblClick(Ee=>this.onMouseDblClick(Ee.element,Ee.browserEvent))),typeof(Ae==null?void 0:Ae.openOnSingleClick)!="boolean"&&(Ae==null?void 0:Ae.configurationService)?(this.openOnSingleClick=(Ae==null?void 0:Ae.configurationService.getValue(tn))!=="doubleClick",this._register(Ae==null?void 0:Ae.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(Ae==null?void 0:Ae.configurationService.getValue(tn))!=="doubleClick"}))):this.openOnSingleClick=(ot=Ae==null?void 0:Ae.openOnSingleClick)!==null&&ot!==void 0?ot:!0}onSelectionFromKeyboard(J){if(J.elements.length!==1)return;const Ae=J.browserEvent,ot=typeof Ae.preserveFocus=="boolean"?Ae.preserveFocus:!0,Ee=typeof Ae.pinned=="boolean"?Ae.pinned:!ot,m=!1;this._open(this.getSelectedElement(),ot,Ee,m,J.browserEvent)}onPointer(J,Ae){if(!this.openOnSingleClick||Ae.detail===2)return;const Ee=Ae.button===1,m=!0,V=Ee,G=Ae.ctrlKey||Ae.metaKey||Ae.altKey;this._open(J,m,V,G,Ae)}onMouseDblClick(J,Ae){if(!Ae)return;const ot=Ae.target;if(ot.classList.contains("monaco-tl-twistie")||ot.classList.contains("monaco-icon-label")&&ot.classList.contains("folder-icon")&&Ae.offsetX<16)return;const m=!1,V=!0,G=Ae.ctrlKey||Ae.metaKey||Ae.altKey;this._open(J,m,V,G,Ae)}_open(J,Ae,ot,Ee,m){!J||this._onDidOpen.fire({editorOptions:{preserveFocus:Ae,pinned:ot,revealIfVisible:!0},sideBySide:Ee,element:J,browserEvent:m})}}class Br extends tr{constructor(J,Ae){super(J,Ae);this.widget=J}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Mr extends tr{constructor(J,Ae){super(J,Ae)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class so extends tr{constructor(J,Ae){super(J,Ae)}getSelectedElement(){var J;return(J=this.widget.getSelection()[0])!==null&&J!==void 0?J:void 0}}function jr(Ct,J){let Ae=!1;return ot=>{if(ot.toKeybinding().isModifierKey())return!1;if(Ae)return Ae=!1,!1;const Ee=J.softDispatch(ot,Ct);return Ee&&Ee.enterChord?(Ae=!0,!1):(Ae=!1,!0)}}let No=class extends Ve{constructor(J,Ae,ot,Ee,m,V,G,ce,ve,De,ct){const{options:lt,getAutomaticKeyboardNavigation:Nt,disposable:It}=Pt(Ae,m,V,ve,De,ct);super(J,Ae,ot,Ee,lt);this.disposables.add(It),this.internals=new Yt(this,m,Nt,m.overrideStyles,V,G,ce,ve,ct),this.disposables.add(this.internals)}updateOptions(J){super.updateOptions(J),this.internals.updateOptions(J)}};No=On([Qn(5,Jt.i6),Qn(6,Yi),Qn(7,oi.XE),Qn(8,Bn.Ui),Qn(9,sn.d),Qn(10,Sn.F)],No);let ko=class extends Be{constructor(J,Ae,ot,Ee,m,V,G,ce,ve,De,ct){const{options:lt,getAutomaticKeyboardNavigation:Nt,disposable:It}=Pt(Ae,m,V,ve,De,ct);super(J,Ae,ot,Ee,lt);this.disposables.add(It),this.internals=new Yt(this,m,Nt,m.overrideStyles,V,G,ce,ve,ct),this.disposables.add(this.internals)}updateOptions(J={}){super.updateOptions(J),J.overrideStyles&&this.internals.updateStyleOverrides(J.overrideStyles),this.internals.updateOptions(J)}};ko=On([Qn(5,Jt.i6),Qn(6,Yi),Qn(7,oi.XE),Qn(8,Bn.Ui),Qn(9,sn.d),Qn(10,Sn.F)],ko);let li=class extends vn{constructor(J,Ae,ot,Ee,m,V,G,ce,ve,De,ct,lt){const{options:Nt,getAutomaticKeyboardNavigation:It,disposable:Ft}=Pt(Ae,V,G,De,ct,lt);super(J,Ae,ot,Ee,m,Nt);this.disposables.add(Ft),this.internals=new Yt(this,V,It,V.overrideStyles,G,ce,ve,De,lt),this.disposables.add(this.internals)}updateOptions(J={}){super.updateOptions(J),J.overrideStyles&&this.internals.updateStyleOverrides(J.overrideStyles),this.internals.updateOptions(J)}};li=On([Qn(6,Jt.i6),Qn(7,Yi),Qn(8,oi.XE),Qn(9,Bn.Ui),Qn(10,sn.d),Qn(11,Sn.F)],li);let tt=class extends Pi{constructor(J,Ae,ot,Ee,m,V,G,ce,ve,De,ct,lt){const{options:Nt,getAutomaticKeyboardNavigation:It,disposable:Ft}=Pt(Ae,V,G,De,ct,lt);super(J,Ae,ot,Ee,m,Nt);this.disposables.add(Ft),this.internals=new Yt(this,V,It,V.overrideStyles,G,ce,ve,De,lt),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(J={}){super.updateOptions(J),J.overrideStyles&&this.internals.updateStyleOverrides(J.overrideStyles),this.internals.updateOptions(J)}};tt=On([Qn(6,Jt.i6),Qn(7,Yi),Qn(8,oi.XE),Qn(9,Bn.Ui),Qn(10,sn.d),Qn(11,Sn.F)],tt);let St=class extends zt{constructor(J,Ae,ot,Ee,m,V,G,ce,ve,De,ct,lt,Nt){const{options:It,getAutomaticKeyboardNavigation:Ft,disposable:jt}=Pt(Ae,G,ce,ct,lt,Nt);super(J,Ae,ot,Ee,m,V,It);this.disposables.add(jt),this.internals=new Yt(this,G,Ft,G.overrideStyles,ce,ve,De,ct,Nt),this.disposables.add(this.internals)}updateOptions(J){super.updateOptions(J),this.internals.updateOptions(J)}};St=On([Qn(7,Jt.i6),Qn(8,Yi),Qn(9,oi.XE),Qn(10,Bn.Ui),Qn(11,sn.d),Qn(12,Sn.F)],St);function Pt(Ct,J,Ae,ot,Ee,m){var V;const G=()=>{let It=Boolean(Ae.getContextKeyValue(Ke));return It&&(It=Boolean(ot.getValue(Wn))),It},ce=m.isScreenReaderOptimized(),ve=J.simpleKeyboardNavigation||ce?"simple":ot.getValue(hn),De=J.horizontalScrolling!==void 0?J.horizontalScrolling:Boolean(ot.getValue(dn)),[ct,lt]=$o(J,ot,Ee),Nt=J.additionalScrollHeight;return{getAutomaticKeyboardNavigation:G,disposable:lt,options:Object.assign(Object.assign({keyboardSupport:!1},ct),{indent:typeof ot.getValue(Gn)=="number"?ot.getValue(Gn):void 0,renderIndentGuides:ot.getValue(wi),smoothScrolling:Boolean(ot.getValue(Ci)),automaticKeyboardNavigation:G(),simpleKeyboardNavigation:ve==="simple",filterOnType:ve==="filter",horizontalScrolling:De,keyboardNavigationEventFilter:jr(Ct,Ee),additionalScrollHeight:Nt,hideTwistiesOfChildlessElements:J.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(V=J.expandOnlyOnTwistieClick)!==null&&V!==void 0?V:ot.getValue(yr)==="doubleClick"})}}let Yt=class{constructor(J,Ae,ot,Ee,m,V,G,ce,ve){this.tree=J,this.themeService=G,this.disposables=[],this.contextKeyService=vt(m,J),this.listSupportsMultiSelect=Fr.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Ae.multipleSelectionSupport!==!1),dr.bindTo(this.contextKeyService).set(Boolean(Ae.selectionNavigation)),this.hasSelectionOrFocus=Ro.bindTo(this.contextKeyService),this.hasDoubleSelection=to.bindTo(this.contextKeyService),this.hasMultiSelection=no.bindTo(this.contextKeyService),this.treeElementCanCollapse=kn.bindTo(this.contextKeyService),this.treeElementHasParent=bt.bindTo(this.contextKeyService),this.treeElementCanExpand=Bt.bindTo(this.contextKeyService),this.treeElementHasChild=At.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Xr(ce);const ct=new Set;ct.add(Ke);const lt=()=>{const Ft=ve.isScreenReaderOptimized()?"simple":ce.getValue(hn);J.updateOptions({simpleKeyboardNavigation:Ft==="simple",filterOnType:Ft==="filter"})};this.updateStyleOverrides(Ee);const Nt=()=>{const It=J.getFocus()[0];if(!It)return;const Ft=J.getNode(It);this.treeElementCanCollapse.set(Ft.collapsible&&!Ft.collapsed),this.treeElementHasParent.set(!!J.getParentElement(It)),this.treeElementCanExpand.set(Ft.collapsible&&Ft.collapsed),this.treeElementHasChild.set(!!J.getFirstElementChild(It))};this.disposables.push(this.contextKeyService,V.register(J),J.onDidChangeSelection(()=>{const It=J.getSelection(),Ft=J.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(It.length>0||Ft.length>0),this.hasMultiSelection.set(It.length>1),this.hasDoubleSelection.set(It.length===2)})}),J.onDidChangeFocus(()=>{const It=J.getSelection(),Ft=J.getFocus();this.hasSelectionOrFocus.set(It.length>0||Ft.length>0),Nt()}),J.onDidChangeCollapseState(Nt),J.onDidChangeModel(Nt),ce.onDidChangeConfiguration(It=>{let Ft={};if(It.affectsConfiguration(Lt)&&(this._useAltAsMultipleSelectionModifier=Xr(ce)),It.affectsConfiguration(Gn)){const jt=ce.getValue(Gn);Ft=Object.assign(Object.assign({},Ft),{indent:jt})}if(It.affectsConfiguration(wi)){const jt=ce.getValue(wi);Ft=Object.assign(Object.assign({},Ft),{renderIndentGuides:jt})}if(It.affectsConfiguration(Ci)){const jt=Boolean(ce.getValue(Ci));Ft=Object.assign(Object.assign({},Ft),{smoothScrolling:jt})}if(It.affectsConfiguration(hn)&&lt(),It.affectsConfiguration(Wn)&&(Ft=Object.assign(Object.assign({},Ft),{automaticKeyboardNavigation:ot()})),It.affectsConfiguration(dn)&&Ae.horizontalScrolling===void 0){const jt=Boolean(ce.getValue(dn));Ft=Object.assign(Object.assign({},Ft),{horizontalScrolling:jt})}if(It.affectsConfiguration(yr)&&Ae.expandOnlyOnTwistieClick===void 0&&(Ft=Object.assign(Object.assign({},Ft),{expandOnlyOnTwistieClick:ce.getValue(yr)==="doubleClick"})),It.affectsConfiguration(Xi)){const jt=ce.getValue(Xi);Ft=Object.assign(Object.assign({},Ft),{mouseWheelScrollSensitivity:jt})}if(It.affectsConfiguration(Nr)){const jt=ce.getValue(Nr);Ft=Object.assign(Object.assign({},Ft),{fastScrollSensitivity:jt})}Object.keys(Ft).length>0&&J.updateOptions(Ft)}),this.contextKeyService.onDidChangeContext(It=>{It.affectsSome(ct)&&J.updateOptions({automaticKeyboardNavigation:ot()})}),ve.onDidChangeScreenReaderOptimized(()=>lt())),this.navigator=new so(J,Object.assign({configurationService:ce},Ae)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(J){J.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!J.multipleSelectionSupport)}updateStyleOverrides(J){(0,S.B9)(this.styler),this.styler=J?(0,ri.Jl)(this.tree,this.themeService,J):S.JT.None}dispose(){this.disposables=(0,S.B9)(this.disposables),(0,S.B9)(this.styler),this.styler=void 0}};Yt=On([Qn(4,Jt.i6),Qn(5,Yi),Qn(6,oi.XE),Qn(7,Bn.Ui),Qn(8,Sn.F)],Yt),Tn.B.as(mn.IP.Configuration).registerConfiguration({id:"workbench",order:7,title:(0,X.N)("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Lt]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[(0,X.N)("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),(0,X.N)("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:(0,X.N)({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[tn]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,X.N)({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[dn]:{type:"boolean",default:!1,description:(0,X.N)("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Gn]:{type:"number",default:8,minimum:4,maximum:40,description:(0,X.N)("tree indent setting","Controls tree indentation in pixels.")},[wi]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:(0,X.N)("render tree indent guides","Controls whether the tree should render indent guides.")},[Ci]:{type:"boolean",default:!1,description:(0,X.N)("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Xi]:{type:"number",default:1,description:(0,X.N)("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Nr]:{type:"number",default:5,description:(0,X.N)("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[hn]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[(0,X.N)("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),(0,X.N)("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),(0,X.N)("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:(0,X.N)("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[Wn]:{type:"boolean",default:!0,markdownDescription:(0,X.N)("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[yr]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,X.N)("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}})},43557:function(Tt,me,a){"use strict";a.d(me,{VZ:function(){return O},in:function(){return S},kw:function(){return B},$V:function(){return F}});var p=a(4669),d=a(9917),z=a(72065);const O=(0,z.yh)("logService");var S;(function(x){x[x.Trace=0]="Trace",x[x.Debug=1]="Debug",x[x.Info=2]="Info",x[x.Warning=3]="Warning",x[x.Error=4]="Error",x[x.Critical=5]="Critical",x[x.Off=6]="Off"})(S||(S={}));const j=S.Info;class T extends d.JT{constructor(){super(...arguments);this.level=j,this._onDidChangeLogLevel=this._register(new p.Q5)}setLevel(v){this.level!==v&&(this.level=v,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class B extends T{constructor(v=j){super();this.setLevel(v)}trace(v,...g){this.getLevel()<=S.Trace&&console.log("%cTRACE","color: #888",v,...g)}debug(v,...g){this.getLevel()<=S.Debug&&console.log("%cDEBUG","background: #eee; color: #888",v,...g)}info(v,...g){this.getLevel()<=S.Info&&console.log("%c INFO","color: #33f",v,...g)}error(v,...g){this.getLevel()<=S.Error&&console.log("%c  ERR","color: #f33",v,...g)}dispose(){}}class F extends d.JT{constructor(v){super();this.logger=v,this._register(v)}getLevel(){return this.logger.getLevel()}trace(v,...g){this.logger.trace(v,...g)}debug(v,...g){this.logger.debug(v,...g)}info(v,...g){this.logger.info(v,...g)}error(v,...g){this.logger.error(v,...g)}}},98674:function(Tt,me,a){"use strict";a.d(me,{ZL:function(){return O},H0:function(){return S},lT:function(){return j}});var p=a(14603),d=a(63580),z=a(72065),O;(function(T){T[T.Hint=1]="Hint",T[T.Info=2]="Info",T[T.Warning=4]="Warning",T[T.Error=8]="Error"})(O||(O={})),function(T){function B(D,c){return c-D}T.compare=B;const F=Object.create(null);F[T.Error]=(0,d.N)("sev.error","Error"),F[T.Warning]=(0,d.N)("sev.warning","Warning"),F[T.Info]=(0,d.N)("sev.info","Info");function x(D){return F[D]||""}T.toString=x;function v(D){switch(D){case p.Z.Error:return T.Error;case p.Z.Warning:return T.Warning;case p.Z.Info:return T.Info;case p.Z.Ignore:return T.Hint}}T.fromSeverity=v;function g(D){switch(D){case T.Error:return p.Z.Error;case T.Warning:return p.Z.Warning;case T.Info:return p.Z.Info;case T.Hint:return p.Z.Ignore}}T.toSeverity=g}(O||(O={}));var S;(function(T){const B="";function F(v){return x(v,!0)}T.makeKey=F;function x(v,g){let D=[B];return v.source?D.push(v.source.replace("\xA6","\\\xA6")):D.push(B),v.code?typeof v.code=="string"?D.push(v.code.replace("\xA6","\\\xA6")):D.push(v.code.value.replace("\xA6","\\\xA6")):D.push(B),v.severity!==void 0&&v.severity!==null?D.push(O.toString(v.severity)):D.push(B),v.message&&g?D.push(v.message.replace("\xA6","\\\xA6")):D.push(B),v.startLineNumber!==void 0&&v.startLineNumber!==null?D.push(v.startLineNumber.toString()):D.push(B),v.startColumn!==void 0&&v.startColumn!==null?D.push(v.startColumn.toString()):D.push(B),v.endLineNumber!==void 0&&v.endLineNumber!==null?D.push(v.endLineNumber.toString()):D.push(B),v.endColumn!==void 0&&v.endColumn!==null?D.push(v.endColumn.toString()):D.push(B),D.push(B),D.join("\xA6")}T.makeKeyOptionalMessage=x})(S||(S={}));const j=(0,z.yh)("markerService")},59422:function(Tt,me,a){"use strict";a.d(me,{zb:function(){return z},lT:function(){return O},EO:function(){return S}});var p=a(14603),d=a(72065),z=p.Z;const O=(0,d.yh)("notificationService");class S{}},50988:function(Tt,me,a){"use strict";a.d(me,{v4:function(){return j},SW:function(){return T},xn:function(){return B},Gs:function(){return F},xI:function(){return x}});var p=a(9917),d=a(25924),z=a(70666),O=a(72065),S=function(v,g,D,c){function C(M){return M instanceof D?M:new D(function(E){E(M)})}return new(D||(D=Promise))(function(M,E){function _(b){try{N(c.next(b))}catch(I){E(I)}}function L(b){try{N(c.throw(b))}catch(I){E(I)}}function N(b){b.done?M(b.value):C(b.value).then(_,L)}N((c=c.apply(v,g||[])).next())})};const j=(0,O.yh)("openerService"),T=Object.freeze({_serviceBrand:void 0,registerOpener(){return p.JT.None},registerValidator(){return p.JT.None},registerExternalUriResolver(){return p.JT.None},setDefaultExternalOpener(){},registerExternalOpener(){return p.JT.None},open(){return S(this,void 0,void 0,function*(){return!1})},resolveExternalUri(v){return S(this,void 0,void 0,function*(){return{resolved:v,dispose(){}}})}});function B(v,g){return z.o.isUri(v)?(0,d.qq)(v.scheme,g):(0,d.ok)(v,g+":")}function F(v,...g){return g.some(D=>B(v,D))}function x(v){let g;const D=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(v.fragment);return D&&(g={startLineNumber:parseInt(D[1]),startColumn:D[2]?parseInt(D[2]):1,endLineNumber:D[4]?parseInt(D[4]):void 0,endColumn:D[4]?D[5]?parseInt(D[5]):1:void 0},v=v.with({fragment:""})),{selection:g,uri:v}}},90535:function(Tt,me,a){"use strict";a.d(me,{Ex:function(){return z},ek:function(){return O}});var p=a(72065);const d=Object.freeze({total(){},worked(){},done(){}});class z{constructor(j){this.callback=j}report(j){this._value=j,this.callback(this._value)}}z.None=Object.freeze({report(){}});const O=(0,p.yh)("editorProgressService")},90725:function(Tt,me,a){"use strict";a.d(me,{Ry:function(){return O},IP:function(){return S}});var p=a(9488),d=a(9917),z=a(89872),O;(function(T){T[T.PRESERVE=0]="PRESERVE",T[T.LAST=1]="LAST"})(O||(O={}));const S={Quickaccess:"workbench.contributions.quickaccess"};class j{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(B){return B.prefix.length===0?this.defaultProvider=B:this.providers.push(B),this.providers.sort((F,x)=>x.prefix.length-F.prefix.length),(0,d.OF)(()=>{this.providers.splice(this.providers.indexOf(B),1),this.defaultProvider===B&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return(0,p.kX)([this.defaultProvider,...this.providers])}getQuickAccessProvider(B){return B&&this.providers.find(x=>B.startsWith(x.prefix))||void 0||this.defaultProvider}}z.B.add(S.Quickaccess,new j)},41157:function(Tt,me,a){"use strict";a.d(me,{jG:function(){return d.jG},eJ:function(){return z}});var p=a(72065),d=a(67746);const z=(0,p.yh)("quickInputService")},89872:function(Tt,me,a){"use strict";a.d(me,{B:function(){return O}});var p=a(35146),d=a(98401);class z{constructor(){this.data=new Map}add(j,T){p.ok(d.HD(j)),p.ok(d.Kn(T)),p.ok(!this.data.has(j),"There is already an extension with this id"),this.data.set(j,T)}as(j){return this.data.get(j)||null}}const O=new z},26904:function(Tt,me,a){"use strict";a.d(me,{Uy:function(){return v},vm:function(){return c},fk:function(){return g}});var p=a(4669),d=a(9917),z=a(98401),O=a(15393),S=function(C,M,E,_){function L(N){return N instanceof E?N:new E(function(b){b(N)})}return new(E||(E=Promise))(function(N,b){function I(q){try{W(_.next(q))}catch(re){b(re)}}function k(q){try{W(_.throw(q))}catch(re){b(re)}}function W(q){q.done?N(q.value):L(q.value).then(I,k)}W((_=_.apply(C,M||[])).next())})},j;(function(C){C[C.None=0]="None",C[C.Initialized=1]="Initialized",C[C.Closed=2]="Closed"})(j||(j={}));class T extends d.JT{constructor(M,E=Object.create(null)){super();this.database=M,this.options=E,this._onDidChangeStorage=this._register(new p.Q5),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=j.None,this.cache=new Map,this.flushDelayer=new O.rH(T.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(M=>this.onDidChangeItemsExternal(M)))}onDidChangeItemsExternal(M){var E,_;(E=M.changed)===null||E===void 0||E.forEach((L,N)=>this.accept(N,L)),(_=M.deleted)===null||_===void 0||_.forEach(L=>this.accept(L,void 0))}accept(M,E){if(this.state===j.Closed)return;let _=!1;(0,z.Jp)(E)?_=this.cache.delete(M):this.cache.get(M)!==E&&(this.cache.set(M,E),_=!0),_&&this._onDidChangeStorage.fire(M)}get(M,E){const _=this.cache.get(M);return(0,z.Jp)(_)?E:_}getBoolean(M,E){const _=this.get(M);return(0,z.Jp)(_)?E:_==="true"}getNumber(M,E){const _=this.get(M);return(0,z.Jp)(_)?E:parseInt(_,10)}set(M,E){return S(this,void 0,void 0,function*(){if(this.state===j.Closed)return;if((0,z.Jp)(E))return this.delete(M);const _=String(E);if(this.cache.get(M)!==_)return this.cache.set(M,_),this.pendingInserts.set(M,_),this.pendingDeletes.delete(M),this._onDidChangeStorage.fire(M),this.doFlush()})}delete(M){return S(this,void 0,void 0,function*(){if(!(this.state===j.Closed||!this.cache.delete(M)))return this.pendingDeletes.has(M)||this.pendingDeletes.add(M),this.pendingInserts.delete(M),this._onDidChangeStorage.fire(M),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return S(this,void 0,void 0,function*(){if(!this.hasPending)return;const M={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(M).finally(()=>{var E;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(E=this.whenFlushedCallbacks.pop())===null||E===void 0||E()})})}doFlush(M){return S(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),M)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}T.DEFAULT_FLUSH_DELAY=100;class B{constructor(){this.onDidChangeItemsExternal=p.ju.None,this.items=new Map}updateItems(M){return S(this,void 0,void 0,function*(){M.insert&&M.insert.forEach((E,_)=>this.items.set(_,E)),M.delete&&M.delete.forEach(E=>this.items.delete(E))})}}var F=a(72065);const x="__$__targetStorageMarker",v=(0,F.yh)("storageService");var g;(function(C){C[C.NONE=0]="NONE",C[C.SHUTDOWN=1]="SHUTDOWN"})(g||(g={}));class D extends d.JT{constructor(M={flushInterval:D.DEFAULT_FLUSH_INTERVAL}){super();this.options=M,this._onDidChangeValue=this._register(new p.K3),this._onDidChangeTarget=this._register(new p.K3),this._onWillSaveState=this._register(new p.Q5),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(M,E){E===x?(M===0?this._globalKeyTargets=void 0:M===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:M})):this._onDidChangeValue.fire({scope:M,key:E,target:this.getKeyTargets(M)[E]})}get(M,E,_){var L;return(L=this.getStorage(E))===null||L===void 0?void 0:L.get(M,_)}getBoolean(M,E,_){var L;return(L=this.getStorage(E))===null||L===void 0?void 0:L.getBoolean(M,_)}getNumber(M,E,_){var L;return(L=this.getStorage(E))===null||L===void 0?void 0:L.getNumber(M,_)}store(M,E,_,L){if((0,z.Jp)(E)){this.remove(M,_);return}this.withPausedEmitters(()=>{var N;this.updateKeyTarget(M,_,L),(N=this.getStorage(_))===null||N===void 0||N.set(M,E)})}remove(M,E){this.withPausedEmitters(()=>{var _;this.updateKeyTarget(M,E,void 0),(_=this.getStorage(E))===null||_===void 0||_.delete(M)})}withPausedEmitters(M){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{M()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(M,E,_){var L,N;const b=this.getKeyTargets(E);typeof _=="number"?b[M]!==_&&(b[M]=_,(L=this.getStorage(E))===null||L===void 0||L.set(x,JSON.stringify(b))):typeof b[M]=="number"&&(delete b[M],(N=this.getStorage(E))===null||N===void 0||N.set(x,JSON.stringify(b)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(M){return M===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(M){const E=this.get(x,M);if(E)try{return JSON.parse(E)}catch(_){}return Object.create(null)}}D.DEFAULT_FLUSH_INTERVAL=60*1e3;class c extends D{constructor(){super();this.globalStorage=this._register(new T(new B)),this.workspaceStorage=this._register(new T(new B)),this._register(this.workspaceStorage.onDidChangeStorage(M=>this.emitDidChangeValue(1,M))),this._register(this.globalStorage.onDidChangeStorage(M=>this.emitDidChangeValue(0,M)))}getStorage(M){return M===0?this.globalStorage:this.workspaceStorage}}},10829:function(Tt,me,a){"use strict";a.d(me,{b:function(){return d}});var p=a(72065);const d=(0,p.yh)("telemetryService")},73910:function(Tt,me,a){"use strict";a.d(me,{QO2:function(){return B},IPX:function(){return F},P6G:function(){return g},dRz:function(){return D},Ido:function(){return c},XZx:function(){return M},R80:function(){return E},lRK:function(){return _},xL1:function(){return L},url:function(){return I},sgC:function(){return k},SwI:function(){return de},rh:function(){return pe},sEe:function(){return ae},zJb:function(){return ue},dt_:function(){return te},PRb:function(){return K},XEs:function(){return ee},Pvw:function(){return X},_lC:function(){return oe},YI3:function(){return Ce},EPQ:function(){return ye},RV_:function(){return ke},SUG:function(){return Te},C3g:function(){return ge},paE:function(){return we},_t9:function(){return ze},OZR:function(){return Qe},j5u:function(){return Q},b7$:function(){return ie},GO4:function(){return xe},g8u:function(){return Ot},qeD:function(){return rn},_wn:function(){return gt},etL:function(){return Ue},ABB:function(){return Ye},ynu:function(){return dt},zRJ:function(){return Re},L_H:function(){return Ve},lXJ:function(){return at},b6y:function(){return pt},gpD:function(){return Be},uoC:function(){return je},pW3:function(){return Et},few:function(){return Dt},c63:function(){return Xe},T83:function(){return ft},Dut:function(){return an},fEB:function(){return An},cvW:function(){return Ht},NOs:function(){return Kt},D0T:function(){return pn},Hfx:function(){return Vn},D1_:function(){return kt},Ng6:function(){return Zt},zKr:function(){return wn},tZ6:function(){return Pi},loF:function(){return Fi},kJk:function(){return Ji},opG:function(){return si},oQ$:function(){return zt},lWp:function(){return Vt},AWI:function(){return vn},K19:function(){return Sn},hEj:function(){return Bn},yb5:function(){return mn},ES4:function(){return Jt},Rzx:function(){return En},g_n:function(){return $t},nyM:function(){return sn},MUv:function(){return Tn},jUe:function(){return ri},pnM:function(){return oi},EiJ:function(){return On},gkn:function(){return Qn},ptc:function(){return Dr},yJx:function(){return Fr},Sbf:function(){return Sr},CNo:function(){return Ro},LoV:function(){return to},_Yy:function(){return no},VVv:function(){return dr},PpC:function(){return kn},hX8:function(){return bt},bKB:function(){return Bt},HCL:function(){return At},phM:function(){return Ke},Fu1:function(){return vt},sKV:function(){return Lt},CzK:function(){return tn},keg:function(){return dn},ypS:function(){return hn},P4M:function(){return Wn},hzo:function(){return Gn},xi6:function(){return wi},j51:function(){return Ci},zOm:function(){return Xi},P6Y:function(){return Nr},F9q:function(){return yr},XL$:function(){return Xr},mHy:function(){return Jr},LLc:function(){return $o},L_t:function(){return ms},_bK:function(){return cs},_2n:function(){return nr},Oop:function(){return tr},dCr:function(){return Br},M6C:function(){return Mr},Tnx:function(){return so},rg2:function(){return jr},ytC:function(){return No},kvU:function(){return ko},s$:function(){return li},F3d:function(){return tt},mV1:function(){return St},$d5:function(){return Pt},AS1:function(){return Yt},Gwp:function(){return en},PX0:function(){return Ct},vGG:function(){return Ee},oSI:function(){return m},Saq:function(){return V},UnT:function(){return ve},uxu:function(){return De},EQn:function(){return ct},NPS:function(){return It},cbQ:function(){return Ft},Vqd:function(){return jt},Cdg:function(){return bn},DEr:function(){return Zn},Hz8:function(){return Xn},jbW:function(){return gi},$DX:function(){return ji},E3h:function(){return vr},ZGJ:function(){return Un},lUq:function(){return fn},Fm_:function(){return ed},SPM:function(){return Su},SUY:function(){return js},IYc:function(){return eu},ov3:function(){return _a},Gj_:function(){return gl},Ivo:function(){return ea},kVY:function(){return jl},Itd:function(){return sa},CA6:function(){return ml},Xy4:function(){return pl},brw:function(){return el},JpG:function(){return vl},BOY:function(){return Rc},OLZ:function(){return tu},ZnX:function(){return Wr},kwl:function(){return Oa},Snq:function(){return ia}});var p=a(15393),d=a(41264),z=a(4669),O=a(98401),S=a(63580),j=a(81294),T=a(89872);function B(So){return`--vscode-${So.replace(/\./g,"-")}`}const F={ColorContribution:"base.contributions.colors"};class x{constructor(){this._onDidChangeSchema=new z.Q5,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(zo,bs,Ws,aa=!1,ks){let tl={id:zo,description:Ws,defaults:bs,needsTransparency:aa,deprecationMessage:ks};this.colorsById[zo]=tl;let Nl={type:"string",description:Ws,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return ks&&(Nl.deprecationMessage=ks),this.colorSchema.properties[zo]=Nl,this.colorReferenceSchema.enum.push(zo),this.colorReferenceSchema.enumDescriptions.push(Ws),this._onDidChangeSchema.fire(),zo}getColors(){return Object.keys(this.colorsById).map(zo=>this.colorsById[zo])}resolveDefaultColor(zo,bs){const Ws=this.colorsById[zo];if(Ws&&Ws.defaults){const aa=Ws.defaults[bs.type];return ia(aa,bs)}}getColorSchema(){return this.colorSchema}toString(){let zo=(bs,Ws)=>{let aa=bs.indexOf(".")===-1?0:1,ks=Ws.indexOf(".")===-1?0:1;return aa!==ks?aa-ks:bs.localeCompare(Ws)};return Object.keys(this.colorsById).sort(zo).map(bs=>`- \`${bs}\`: ${this.colorsById[bs].description}`).join(`
`)}}const v=new x;T.B.add(F.ColorContribution,v);function g(So,zo,bs,Ws,aa){return v.registerColor(So,zo,bs,Ws,aa)}const D=g("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},S.N("foreground","Overall foreground color. This color is only used if not overridden by a component.")),c=g("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},S.N("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),C=g("descriptionForeground",{light:"#717171",dark:Wr(D,.7),hc:Wr(D,.7)},S.N("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),M=g("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},S.N("iconForeground","The default color for icons in the workbench.")),E=g("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},S.N("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),_=g("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},S.N("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),L=g("contrastActiveBorder",{light:null,dark:null,hc:E},S.N("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),N=g("selection.background",{light:null,dark:null,hc:null},S.N("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),b=g("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hc:d.Il.black},S.N("textSeparatorForeground","Color for text separators.")),I=g("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},S.N("textLinkForeground","Foreground color for links in text.")),k=g("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},S.N("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),W=g("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hc:"#D7BA7D"},S.N("textPreformatForeground","Foreground color for preformatted text segments.")),q=g("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hc:null},S.N("textBlockQuoteBackground","Background color for block quotes in text.")),re=g("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hc:d.Il.white},S.N("textBlockQuoteBorder","Border color for block quotes in text.")),de=g("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:d.Il.black},S.N("textCodeBlockBackground","Background color for code blocks in text.")),pe=g("widget.shadow",{dark:Wr(d.Il.black,.36),light:Wr(d.Il.black,.16),hc:null},S.N("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),ae=g("input.background",{dark:"#3C3C3C",light:d.Il.white,hc:d.Il.black},S.N("inputBoxBackground","Input box background.")),ue=g("input.foreground",{dark:D,light:D,hc:D},S.N("inputBoxForeground","Input box foreground.")),te=g("input.border",{dark:null,light:null,hc:_},S.N("inputBoxBorder","Input box border.")),K=g("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:_},S.N("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),U=g("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hc:null},S.N("inputOption.hoverBackground","Background color of activated options in input fields.")),ee=g("inputOption.activeBackground",{dark:Wr(E,.4),light:Wr(E,.2),hc:d.Il.transparent},S.N("inputOption.activeBackground","Background hover color of options in input fields.")),X=g("inputOption.activeForeground",{dark:d.Il.white,light:d.Il.black,hc:null},S.N("inputOption.activeForeground","Foreground color of activated options in input fields.")),le=g("input.placeholderForeground",{light:Wr(D,.5),dark:Wr(D,.5),hc:Wr(D,.7)},S.N("inputPlaceholderForeground","Input box foreground color for placeholder text.")),oe=g("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:d.Il.black},S.N("inputValidationInfoBackground","Input validation background color for information severity.")),Ce=g("inputValidation.infoForeground",{dark:null,light:null,hc:null},S.N("inputValidationInfoForeground","Input validation foreground color for information severity.")),ye=g("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:_},S.N("inputValidationInfoBorder","Input validation border color for information severity.")),ke=g("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:d.Il.black},S.N("inputValidationWarningBackground","Input validation background color for warning severity.")),Te=g("inputValidation.warningForeground",{dark:null,light:null,hc:null},S.N("inputValidationWarningForeground","Input validation foreground color for warning severity.")),ge=g("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:_},S.N("inputValidationWarningBorder","Input validation border color for warning severity.")),we=g("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:d.Il.black},S.N("inputValidationErrorBackground","Input validation background color for error severity.")),ze=g("inputValidation.errorForeground",{dark:null,light:null,hc:null},S.N("inputValidationErrorForeground","Input validation foreground color for error severity.")),Qe=g("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:_},S.N("inputValidationErrorBorder","Input validation border color for error severity.")),Pe=g("dropdown.background",{dark:"#3C3C3C",light:d.Il.white,hc:d.Il.black},S.N("dropdownBackground","Dropdown background.")),Oe=g("dropdown.listBackground",{dark:null,light:null,hc:d.Il.black},S.N("dropdownListBackground","Dropdown list background.")),qe=g("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:d.Il.white},S.N("dropdownForeground","Dropdown foreground.")),Je=g("dropdown.border",{dark:Pe,light:"#CECECE",hc:_},S.N("dropdownBorder","Dropdown border.")),Ne=g("checkbox.background",{dark:Pe,light:Pe,hc:Pe},S.N("checkbox.background","Background color of checkbox widget.")),Fe=g("checkbox.foreground",{dark:qe,light:qe,hc:qe},S.N("checkbox.foreground","Foreground color of checkbox widget.")),ne=g("checkbox.border",{dark:Je,light:Je,hc:Je},S.N("checkbox.border","Border color of checkbox widget.")),Q=g("button.foreground",{dark:d.Il.white,light:d.Il.white,hc:d.Il.white},S.N("buttonForeground","Button foreground color.")),ie=g("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},S.N("buttonBackground","Button background color.")),xe=g("button.hoverBackground",{dark:Pa(ie,.2),light:ta(ie,.2),hc:null},S.N("buttonHoverBackground","Button background color when hovering.")),be=g("button.border",{dark:_,light:_,hc:_},S.N("buttonBorder","Button border color.")),Ge=g("button.secondaryForeground",{dark:d.Il.white,light:d.Il.white,hc:d.Il.white},S.N("buttonSecondaryForeground","Secondary button foreground color.")),nt=g("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hc:null},S.N("buttonSecondaryBackground","Secondary button background color.")),_t=g("button.secondaryHoverBackground",{dark:Pa(nt,.2),light:ta(nt,.2),hc:null},S.N("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Ot=g("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:d.Il.black},S.N("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),rn=g("badge.foreground",{dark:d.Il.white,light:"#333",hc:d.Il.white},S.N("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),gt=g("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},S.N("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Ue=g("scrollbarSlider.background",{dark:d.Il.fromHex("#797979").transparent(.4),light:d.Il.fromHex("#646464").transparent(.4),hc:Wr(_,.6)},S.N("scrollbarSliderBackground","Scrollbar slider background color.")),Ye=g("scrollbarSlider.hoverBackground",{dark:d.Il.fromHex("#646464").transparent(.7),light:d.Il.fromHex("#646464").transparent(.7),hc:Wr(_,.8)},S.N("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),dt=g("scrollbarSlider.activeBackground",{dark:d.Il.fromHex("#BFBFBF").transparent(.4),light:d.Il.fromHex("#000000").transparent(.6),hc:_},S.N("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),Re=g("progressBar.background",{dark:d.Il.fromHex("#0E70C0"),light:d.Il.fromHex("#0E70C0"),hc:_},S.N("progressBarBackground","Background color of the progress bar that can show for long running operations.")),Ve=g("editorError.background",{dark:null,light:null,hc:null},S.N("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),at=g("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},S.N("editorError.foreground","Foreground color of error squigglies in the editor.")),pt=g("editorError.border",{dark:null,light:null,hc:d.Il.fromHex("#E47777").transparent(.8)},S.N("errorBorder","Border color of error boxes in the editor.")),Be=g("editorWarning.background",{dark:null,light:null,hc:null},S.N("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),je=g("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},S.N("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Et=g("editorWarning.border",{dark:null,light:null,hc:d.Il.fromHex("#FFCC00").transparent(.8)},S.N("warningBorder","Border color of warning boxes in the editor.")),Dt=g("editorInfo.background",{dark:null,light:null,hc:null},S.N("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Xe=g("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},S.N("editorInfo.foreground","Foreground color of info squigglies in the editor.")),ft=g("editorInfo.border",{dark:null,light:null,hc:d.Il.fromHex("#3794FF").transparent(.8)},S.N("infoBorder","Border color of info boxes in the editor.")),an=g("editorHint.foreground",{dark:d.Il.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},S.N("editorHint.foreground","Foreground color of hint squigglies in the editor.")),An=g("editorHint.border",{dark:null,light:null,hc:d.Il.fromHex("#eeeeee").transparent(.8)},S.N("hintBorder","Border color of hint boxes in the editor.")),Fn=g("sash.hoverBorder",{dark:E,light:E,hc:E},S.N("sashActiveBorder","Border color of active sashes.")),Ht=g("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:d.Il.black},S.N("editorBackground","Editor background color.")),Kt=g("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:d.Il.white},S.N("editorForeground","Editor default foreground color.")),pn=g("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},S.N("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Vn=g("editorWidget.foreground",{dark:D,light:D,hc:D},S.N("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),kt=g("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:_},S.N("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),Zt=g("editorWidget.resizeBorder",{light:null,dark:null,hc:null},S.N("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),wn=g("quickInput.background",{dark:pn,light:pn,hc:pn},S.N("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Pi=g("quickInput.foreground",{dark:Vn,light:Vn,hc:Vn},S.N("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Fi=g("quickInputTitle.background",{dark:new d.Il(new d.VS(255,255,255,.105)),light:new d.Il(new d.VS(0,0,0,.06)),hc:"#000000"},S.N("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Ji=g("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:d.Il.white},S.N("pickerGroupForeground","Quick picker color for grouping labels.")),si=g("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:d.Il.white},S.N("pickerGroupBorder","Quick picker color for grouping borders.")),zt=g("keybindingLabel.background",{dark:new d.Il(new d.VS(128,128,128,.17)),light:new d.Il(new d.VS(221,221,221,.4)),hc:d.Il.transparent},S.N("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Vt=g("keybindingLabel.foreground",{dark:d.Il.fromHex("#CCCCCC"),light:d.Il.fromHex("#555555"),hc:d.Il.white},S.N("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),vn=g("keybindingLabel.border",{dark:new d.Il(new d.VS(51,51,51,.6)),light:new d.Il(new d.VS(204,204,204,.4)),hc:new d.Il(new d.VS(111,195,223))},S.N("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Sn=g("keybindingLabel.bottomBorder",{dark:new d.Il(new d.VS(68,68,68,.6)),light:new d.Il(new d.VS(187,187,187,.4)),hc:new d.Il(new d.VS(111,195,223))},S.N("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Bn=g("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},S.N("editorSelectionBackground","Color of the editor selection.")),mn=g("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},S.N("editorSelectionForeground","Color of the selected text for high contrast.")),Jt=g("editor.inactiveSelectionBackground",{light:Wr(Bn,.5),dark:Wr(Bn,.5),hc:Wr(Bn,.5)},S.N("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),En=g("editor.selectionHighlightBackground",{light:na(Bn,Ht,.3,.6),dark:na(Bn,Ht,.3,.6),hc:null},S.N("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),$t=g("editor.selectionHighlightBorder",{light:null,dark:null,hc:L},S.N("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),sn=g("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},S.N("editorFindMatch","Color of the current search match.")),Tn=g("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},S.N("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),ri=g("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},S.N("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),oi=g("editor.findMatchBorder",{light:null,dark:null,hc:L},S.N("editorFindMatchBorder","Border color of the current search match.")),On=g("editor.findMatchHighlightBorder",{light:null,dark:null,hc:L},S.N("findMatchHighlightBorder","Border color of the other search matches.")),Qn=g("editor.findRangeHighlightBorder",{dark:null,light:null,hc:Wr(L,.4)},S.N("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Yi=g("searchEditor.findMatchBackground",{light:Wr(Tn,.66),dark:Wr(Tn,.66),hc:Tn},S.N("searchEditor.queryMatch","Color of the Search Editor query matches.")),Lr=g("searchEditor.findMatchBorder",{light:Wr(On,.66),dark:Wr(On,.66),hc:On},S.N("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches.")),Dr=g("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},S.N("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),Fr=g("editorHoverWidget.background",{light:pn,dark:pn,hc:pn},S.N("hoverBackground","Background color of the editor hover.")),Sr=g("editorHoverWidget.foreground",{light:Vn,dark:Vn,hc:Vn},S.N("hoverForeground","Foreground color of the editor hover.")),Ro=g("editorHoverWidget.border",{light:kt,dark:kt,hc:kt},S.N("hoverBorder","Border color of the editor hover.")),to=g("editorHoverWidget.statusBarBackground",{dark:Pa(Fr,.2),light:ta(Fr,.05),hc:pn},S.N("statusBarBackground","Background color of the editor hover status bar.")),no=g("editorLink.activeForeground",{dark:"#4E94CE",light:d.Il.blue,hc:d.Il.cyan},S.N("activeLinkForeground","Color of active links.")),dr=g("editorInlayHint.foreground",{dark:Wr(rn,.8),light:Wr(rn,.8),hc:rn},S.N("editorInlayHintForeground","Foreground color of inline hints")),kn=g("editorInlayHint.background",{dark:Wr(Ot,.6),light:Wr(Ot,.3),hc:Ot},S.N("editorInlayHintBackground","Background color of inline hints")),bt=g("editorInlayHint.typeForeground",{dark:dr,light:dr,hc:dr},S.N("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Bt=g("editorInlayHint.typeBackground",{dark:kn,light:kn,hc:kn},S.N("editorInlayHintBackgroundTypes","Background color of inline hints for types")),At=g("editorInlayHint.parameterForeground",{dark:dr,light:dr,hc:dr},S.N("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),Ke=g("editorInlayHint.parameterBackground",{dark:kn,light:kn,hc:kn},S.N("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),vt=g("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},S.N("editorLightBulbForeground","The color used for the lightbulb actions icon.")),Lt=g("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},S.N("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),tn=new d.Il(new d.VS(155,185,85,.2)),dn=new d.Il(new d.VS(255,0,0,.2)),hn=g("diffEditor.insertedTextBackground",{dark:tn,light:tn,hc:null},S.N("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Wn=g("diffEditor.removedTextBackground",{dark:dn,light:dn,hc:null},S.N("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Gn=g("diffEditor.insertedLineBackground",{dark:null,light:null,hc:null},S.N("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),wi=g("diffEditor.removedLineBackground",{dark:null,light:null,hc:null},S.N("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Ci=g("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hc:null},S.N("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),Xi=g("diffEditorGutter.removedLineBackground",{dark:null,light:null,hc:null},S.N("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),Nr=g("diffEditorOverview.insertedForeground",{dark:null,light:null,hc:null},S.N("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),yr=g("diffEditorOverview.removedForeground",{dark:null,light:null,hc:null},S.N("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),Xr=g("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},S.N("diffEditorInsertedOutline","Outline color for the text that got inserted.")),Jr=g("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},S.N("diffEditorRemovedOutline","Outline color for text that got removed.")),$o=g("diffEditor.border",{dark:null,light:null,hc:_},S.N("diffEditorBorder","Border color between the two text editors.")),ms=g("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},S.N("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),cs=g("list.focusBackground",{dark:null,light:null,hc:null},S.N("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nr=g("list.focusForeground",{dark:null,light:null,hc:null},S.N("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),tr=g("list.focusOutline",{dark:E,light:E,hc:L},S.N("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Br=g("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},S.N("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Mr=g("list.activeSelectionForeground",{dark:d.Il.white,light:d.Il.white,hc:null},S.N("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),so=g("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},S.N("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),jr=g("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},S.N("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),No=g("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},S.N("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ko=g("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},S.N("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),li=g("list.inactiveFocusBackground",{dark:null,light:null,hc:null},S.N("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),tt=g("list.inactiveFocusOutline",{dark:null,light:null,hc:null},S.N("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),St=g("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},S.N("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Pt=g("list.hoverForeground",{dark:null,light:null,hc:null},S.N("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Yt=g("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},S.N("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),en=g("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:E},S.N("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Ct=g("list.focusHighlightForeground",{dark:en,light:Ca(Br,en,"#9DDDFF"),hc:en},S.N("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),J=g("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hc:"#B89500"},S.N("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),Ae=g("list.errorForeground",{dark:"#F88070",light:"#B01011",hc:null},S.N("listErrorForeground","Foreground color of list items containing errors.")),ot=g("list.warningForeground",{dark:"#CCA700",light:"#855F00",hc:null},S.N("listWarningForeground","Foreground color of list items containing warnings.")),Ee=g("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:d.Il.black},S.N("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),m=g("listFilterWidget.outline",{dark:d.Il.transparent,light:d.Il.transparent,hc:"#f38518"},S.N("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),V=g("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:_},S.N("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),G=g("list.filterMatchBackground",{dark:Tn,light:Tn,hc:null},S.N("listFilterMatchHighlight","Background color of the filtered match.")),ce=g("list.filterMatchBorder",{dark:On,light:On,hc:_},S.N("listFilterMatchHighlightBorder","Border color of the filtered match.")),ve=g("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},S.N("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),De=g("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},S.N("tableColumnsBorder","Table border color between columns.")),ct=g("tree.tableOddRowsBackground",{dark:Wr(D,.04),light:Wr(D,.04),hc:null},S.N("tableOddRowsBackgroundColor","Background color for odd table rows.")),lt=g("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hc:"#A7A8A9"},S.N("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. ")),Nt=g("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,S.N("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),It=g("quickInputList.focusForeground",{dark:Mr,light:Mr,hc:Mr},S.N("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Ft=g("quickInputList.focusIconForeground",{dark:so,light:so,hc:so},S.N("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),jt=g("quickInputList.focusBackground",{dark:Oa(Nt,Br),light:Oa(Nt,Br),hc:null},S.N("quickInput.listFocusBackground","Quick picker background color for the focused item.")),bn=g("menu.border",{dark:null,light:null,hc:_},S.N("menuBorder","Border color of menus.")),Zn=g("menu.foreground",{dark:qe,light:D,hc:qe},S.N("menuForeground","Foreground color of menu items.")),Xn=g("menu.background",{dark:Pe,light:Pe,hc:Pe},S.N("menuBackground","Background color of menu items.")),gi=g("menu.selectionForeground",{dark:Mr,light:Mr,hc:Mr},S.N("menuSelectionForeground","Foreground color of the selected menu item in menus.")),ji=g("menu.selectionBackground",{dark:Br,light:Br,hc:Br},S.N("menuSelectionBackground","Background color of the selected menu item in menus.")),vr=g("menu.selectionBorder",{dark:null,light:null,hc:L},S.N("menuSelectionBorder","Border color of the selected menu item in menus.")),Un=g("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:_},S.N("menuSeparatorBackground","Color of a separator menu item in menus.")),fn=g("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},S.N("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),Vo=g("toolbar.hoverOutline",{dark:null,light:null,hc:L},S.N("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),jo=g("toolbar.activeBackground",{dark:Pa(fn,.1),light:ta(fn,.1),hc:null},S.N("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),Uo=g("editor.snippetTabstopHighlightBackground",{dark:new d.Il(new d.VS(124,124,124,.3)),light:new d.Il(new d.VS(10,50,100,.2)),hc:new d.Il(new d.VS(124,124,124,.3))},S.N("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),qs=g("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},S.N("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),ss=g("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},S.N("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),va=g("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new d.Il(new d.VS(10,50,100,.5)),hc:"#525252"},S.N("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),ps=g("breadcrumb.foreground",{light:Wr(D,.8),dark:Wr(D,.8),hc:Wr(D,.8)},S.N("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),wo=g("breadcrumb.background",{light:Ht,dark:Ht,hc:Ht},S.N("breadcrumbsBackground","Background color of breadcrumb items.")),Ss=g("breadcrumb.focusForeground",{light:ta(D,.2),dark:Pa(D,.1),hc:Pa(D,.1)},S.N("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),ts=g("breadcrumb.activeSelectionForeground",{light:ta(D,.2),dark:Pa(D,.1),hc:Pa(D,.1)},S.N("breadcrumbsSelectedForegound","Color of selected breadcrumb items.")),gr=g("breadcrumbPicker.background",{light:pn,dark:pn,hc:pn},S.N("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),ns=.5,xr=d.Il.fromHex("#40C8AE").transparent(ns),Jn=d.Il.fromHex("#40A6FF").transparent(ns),hr=d.Il.fromHex("#606060").transparent(.4),Pr=.4,Po=1,Cs=g("merge.currentHeaderBackground",{dark:xr,light:xr,hc:null},S.N("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Ns=g("merge.currentContentBackground",{dark:Wr(Cs,Pr),light:Wr(Cs,Pr),hc:Wr(Cs,Pr)},S.N("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),as=g("merge.incomingHeaderBackground",{dark:Jn,light:Jn,hc:null},S.N("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),is=g("merge.incomingContentBackground",{dark:Wr(as,Pr),light:Wr(as,Pr),hc:Wr(as,Pr)},S.N("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Xs=g("merge.commonHeaderBackground",{dark:hr,light:hr,hc:null},S.N("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),hl=g("merge.commonContentBackground",{dark:Wr(Xs,Pr),light:Wr(Xs,Pr),hc:Wr(Xs,Pr)},S.N("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),za=g("merge.border",{dark:null,light:null,hc:"#C3DF6F"},S.N("mergeBorder","Border color on headers and the splitter in inline merge-conflicts.")),fc=g("editorOverviewRuler.currentContentForeground",{dark:Wr(Cs,Po),light:Wr(Cs,Po),hc:za},S.N("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),xl=g("editorOverviewRuler.incomingContentForeground",{dark:Wr(as,Po),light:Wr(as,Po),hc:za},S.N("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),fl=g("editorOverviewRuler.commonContentForeground",{dark:Wr(Xs,Po),light:Wr(Xs,Po),hc:za},S.N("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),ed=g("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},S.N("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Su=g("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},S.N("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),js=g("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},S.N("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),eu=g("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},S.N("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),_a=g("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},S.N("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),gl=g("minimap.errorHighlight",{dark:new d.Il(new d.VS(255,18,18,.7)),light:new d.Il(new d.VS(255,18,18,.7)),hc:new d.Il(new d.VS(255,50,50,1))},S.N("minimapError","Minimap marker color for errors.")),ea=g("minimap.warningHighlight",{dark:je,light:je,hc:Et},S.N("overviewRuleWarning","Minimap marker color for warnings.")),jl=g("minimap.background",{dark:null,light:null,hc:null},S.N("minimapBackground","Minimap background color.")),sa=g("minimap.foregroundOpacity",{dark:d.Il.fromHex("#000f"),light:d.Il.fromHex("#000f"),hc:d.Il.fromHex("#000f")},S.N("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),ml=g("minimapSlider.background",{light:Wr(Ue,.5),dark:Wr(Ue,.5),hc:Wr(Ue,.5)},S.N("minimapSliderBackground","Minimap slider background color.")),pl=g("minimapSlider.hoverBackground",{light:Wr(Ye,.5),dark:Wr(Ye,.5),hc:Wr(Ye,.5)},S.N("minimapSliderHoverBackground","Minimap slider background color when hovering.")),el=g("minimapSlider.activeBackground",{light:Wr(dt,.5),dark:Wr(dt,.5),hc:Wr(dt,.5)},S.N("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),vl=g("problemsErrorIcon.foreground",{dark:at,light:at,hc:at},S.N("problemsErrorIconForeground","The color used for the problems error icon.")),Rc=g("problemsWarningIcon.foreground",{dark:je,light:je,hc:je},S.N("problemsWarningIconForeground","The color used for the problems warning icon.")),tu=g("problemsInfoIcon.foreground",{dark:Xe,light:Xe,hc:Xe},S.N("problemsInfoIconForeground","The color used for the problems info icon.")),Eu=g("charts.foreground",{dark:D,light:D,hc:D},S.N("chartsForeground","The foreground color used in charts.")),td=g("charts.lines",{dark:Wr(D,.5),light:Wr(D,.5),hc:Wr(D,.5)},S.N("chartsLines","The color used for horizontal lines in charts.")),Za=g("charts.red",{dark:at,light:at,hc:at},S.N("chartsRed","The red color used in chart visualizations.")),Pc=g("charts.blue",{dark:Xe,light:Xe,hc:Xe},S.N("chartsBlue","The blue color used in chart visualizations.")),Oc=g("charts.yellow",{dark:je,light:je,hc:je},S.N("chartsYellow","The yellow color used in chart visualizations.")),nu=g("charts.orange",{dark:js,light:js,hc:js},S.N("chartsOrange","The orange color used in chart visualizations.")),Il=g("charts.green",{dark:"#89D185",light:"#388A34",hc:"#89D185"},S.N("chartsGreen","The green color used in chart visualizations.")),kc=g("charts.purple",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},S.N("chartsPurple","The purple color used in chart visualizations."));function Kl(So,zo){var bs,Ws,aa;switch(So.op){case 0:return(bs=ia(So.value,zo))===null||bs===void 0?void 0:bs.darken(So.factor);case 1:return(Ws=ia(So.value,zo))===null||Ws===void 0?void 0:Ws.lighten(So.factor);case 2:return(aa=ia(So.value,zo))===null||aa===void 0?void 0:aa.transparent(So.factor);case 3:for(const ks of So.values){const tl=ia(ks,zo);if(tl)return tl}return;case 5:return ia(zo.defines(So.if)?So.then:So.else,zo);case 4:{const ks=ia(So.value,zo);if(!ks)return;const tl=ia(So.background,zo);return tl?ks.isDarkerThan(tl)?d.Il.getLighterColor(ks,tl,So.factor).transparent(So.transparency):d.Il.getDarkerColor(ks,tl,So.factor).transparent(So.transparency):ks.transparent(So.factor*So.transparency)}default:throw(0,O.vE)(So)}}function ta(So,zo){return{op:0,value:So,factor:zo}}function Pa(So,zo){return{op:1,value:So,factor:zo}}function Wr(So,zo){return{op:2,value:So,factor:zo}}function Oa(...So){return{op:3,values:So}}function Ca(So,zo,bs){return{op:5,if:So,then:zo,else:bs}}function na(So,zo,bs,Ws){return{op:4,value:So,background:zo,factor:bs,transparency:Ws}}function ia(So,zo){if(So!==null){if(typeof So=="string")return So[0]==="#"?d.Il.fromHex(So):zo.getColor(So);if(So instanceof d.Il)return So;if(typeof So=="object")return Kl(So,zo)}}const Lu="vscode://schemas/workbench-colors";let $l=T.B.as(j.I.JSONContribution);$l.registerSchema(Lu,v.getColorSchema());const os=new p.pY(()=>$l.notifySchemaChanged(Lu),200);v.onDidChangeSchema(()=>{os.isScheduled()||os.schedule()})},59554:function(Tt,me,a){"use strict";a.d(me,{q5:function(){return g},Ks:function(){return D},s_:function(){return _}});var p=a(15393),d=a(73046),z=a(4669),O=a(63580),S=a(81294),j=a(89872),T=a(97781);const B={IconContribution:"base.contributions.icons"};var F;(function(k){function W(q,re){let de=q.defaults;for(;T.kS.isThemeIcon(de);){const pe=v.getIcon(de.id);if(!pe)return;de=pe.defaults}return de}k.getDefinition=W})(F||(F={}));class x{constructor(){this._onDidChange=new z.Q5,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:(0,O.N)("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:(0,O.N)("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${d.dT.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(W,q,re,de){const pe=this.iconsById[W];if(pe){if(re&&!pe.description){pe.description=re,this.iconSchema.properties[W].markdownDescription=`${re} $(${W})`;const te=this.iconReferenceSchema.enum.indexOf(W);te!==-1&&(this.iconReferenceSchema.enumDescriptions[te]=re),this._onDidChange.fire()}return pe}let ae={id:W,description:re,defaults:q,deprecationMessage:de};this.iconsById[W]=ae;let ue={$ref:"#/definitions/icons"};return de&&(ue.deprecationMessage=de),re&&(ue.markdownDescription=`${re}: $(${W})`),this.iconSchema.properties[W]=ue,this.iconReferenceSchema.enum.push(W),this.iconReferenceSchema.enumDescriptions.push(re||""),this._onDidChange.fire(),{id:W}}getIcons(){return Object.keys(this.iconsById).map(W=>this.iconsById[W])}getIcon(W){return this.iconsById[W]}getIconSchema(){return this.iconSchema}toString(){const W=(pe,ae)=>pe.id.localeCompare(ae.id),q=pe=>{for(;T.kS.isThemeIcon(pe.defaults);)pe=this.iconsById[pe.defaults.id];return`codicon codicon-${pe?pe.id:""}`};let re=[];re.push("| preview     | identifier                        | default codicon ID                | description"),re.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const de=Object.keys(this.iconsById).map(pe=>this.iconsById[pe]);for(const pe of de.filter(ae=>!!ae.description).sort(W))re.push(`|<i class="${q(pe)}"></i>|${pe.id}|${T.kS.isThemeIcon(pe.defaults)?pe.defaults.id:pe.id}|${pe.description||""}|`);re.push("| preview     | identifier                        "),re.push("| ----------- | --------------------------------- |");for(const pe of de.filter(ae=>!T.kS.isThemeIcon(ae.defaults)).sort(W))re.push(`|<i class="${q(pe)}"></i>|${pe.id}|`);return re.join(`
`)}}const v=new x;j.B.add(B.IconContribution,v);function g(k,W,q,re){return v.registerIcon(k,W,q,re)}function D(){return v}function c(){for(const k of d.lA.getAll())v.registerIcon(k.id,k.definition,k.description)}c();const C="vscode://schemas/icons";let M=j.B.as(S.I.JSONContribution);M.registerSchema(C,v.getIconSchema());const E=new p.pY(()=>M.notifySchemaChanged(C),200);v.onDidChange(()=>{E.isScheduled()||E.schedule()});const _=g("widget-close",d.lA.close,(0,O.N)("widgetClose","Icon for the close action in widgets.")),L=g("goto-previous-location",d.lA.arrowUp,(0,O.N)("previousChangeIcon","Icon for goto previous editor location.")),N=g("goto-next-location",d.lA.arrowDown,(0,O.N)("nextChangeIcon","Icon for goto next editor location.")),b=T.kS.modify(d.lA.sync,"spin"),I=T.kS.modify(d.lA.loading,"spin")},88810:function(Tt,me,a){"use strict";a.d(me,{o:function(){return d},WZ:function(){return O},Jl:function(){return S},O2:function(){return j},tj:function(){return B}});var p=a(73910);function d(F,x){const v=Object.create(null);for(let g in x){const D=x[g];D&&(v[g]=(0,p.Snq)(D,F))}return v}function z(F,x,v){function g(){const D=d(F.getColorTheme(),x);typeof v=="function"?v(D):v.style(D)}return g(),F.onDidColorThemeChange(g)}function O(F,x,v){return z(x,{badgeBackground:(v==null?void 0:v.badgeBackground)||p.g8u,badgeForeground:(v==null?void 0:v.badgeForeground)||p.qeD,badgeBorder:p.lRK},F)}function S(F,x,v){return z(x,Object.assign(Object.assign({},j),v||{}),F)}const j={listFocusBackground:p._bK,listFocusForeground:p._2n,listFocusOutline:p.Oop,listActiveSelectionBackground:p.dCr,listActiveSelectionForeground:p.M6C,listActiveSelectionIconForeground:p.Tnx,listFocusAndSelectionBackground:p.dCr,listFocusAndSelectionForeground:p.M6C,listInactiveSelectionBackground:p.rg2,listInactiveSelectionIconForeground:p.kvU,listInactiveSelectionForeground:p.ytC,listInactiveFocusBackground:p.s$,listInactiveFocusOutline:p.F3d,listHoverBackground:p.mV1,listHoverForeground:p.$d5,listDropBackground:p.AS1,listSelectionOutline:p.xL1,listHoverOutline:p.xL1,listFilterWidgetBackground:p.vGG,listFilterWidgetOutline:p.oSI,listFilterWidgetNoMatchesOutline:p.Saq,listMatchesShadow:p.rh,treeIndentGuidesStroke:p.UnT,tableColumnsBorder:p.uxu,tableOddRowsBackgroundColor:p.EQn},T={shadowColor:p.rh,borderColor:p.Cdg,foregroundColor:p.DEr,backgroundColor:p.Hz8,selectionForegroundColor:p.jbW,selectionBackgroundColor:p.$DX,selectionBorderColor:p.E3h,separatorColor:p.ZGJ,scrollbarShadow:p._wn,scrollbarSliderBackground:p.etL,scrollbarSliderHoverBackground:p.ABB,scrollbarSliderActiveBackground:p.ynu};function B(F,x,v){return z(x,Object.assign(Object.assign({},T),v),F)}},92321:function(Tt,me,a){"use strict";a.d(me,{e:function(){return p}});var p;(function(d){d.DARK="dark",d.LIGHT="light",d.HIGH_CONTRAST="hc"})(p||(p={}))},97781:function(Tt,me,a){"use strict";a.d(me,{XE:function(){return T},EN:function(){return F},kS:function(){return x},m6:function(){return v},IP:function(){return g},Ic:function(){return C},bB:function(){return M}});var p=a(73046),d=a(4669),z=a(9917),O=a(72065),S=a(89872),j=a(92321);const T=(0,O.yh)("themeService");var B;(function(E){function _(L){return L&&typeof L=="object"&&typeof L.id=="string"}E.isThemeColor=_})(B||(B={}));function F(E){return{id:E}}var x;(function(E){function _(re){return re&&typeof re=="object"&&typeof re.id=="string"&&(typeof re.color=="undefined"||B.isThemeColor(re.color))}E.isThemeIcon=_;const L=new RegExp(`^\\$\\((${p.dT.iconNameExpression}(?:${p.dT.iconModifierExpression})?)\\)$`);function N(re){const de=L.exec(re);if(!de)return;let[,pe]=de;return{id:pe}}E.fromString=N;function b(re){return{id:re}}E.fromId=b;function I(re,de){let pe=re.id;const ae=pe.lastIndexOf("~");return ae!==-1&&(pe=pe.substring(0,ae)),de&&(pe=`${pe}~${de}`),{id:pe}}E.modify=I;function k(re){const de=re.id.lastIndexOf("~");if(de!==-1)return re.id.substring(de+1)}E.getModifier=k;function W(re,de){var pe,ae;return re.id===de.id&&((pe=re.color)===null||pe===void 0?void 0:pe.id)===((ae=de.color)===null||ae===void 0?void 0:ae.id)}E.isEqual=W;function q(re,de){return{id:re.id,color:de?F(de):void 0}}E.asThemeIcon=q,E.asClassNameArray=p.dT.asClassNameArray,E.asClassName=p.dT.asClassName,E.asCSSSelector=p.dT.asCSSSelector})(x||(x={}));function v(E){switch(E){case j.e.DARK:return"vs-dark";case j.e.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const g={ThemingContribution:"base.contributions.theming"};class D{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new d.Q5}onColorThemeChange(_){return this.themingParticipants.push(_),this.onThemingParticipantAddedEmitter.fire(_),(0,z.OF)(()=>{const L=this.themingParticipants.indexOf(_);this.themingParticipants.splice(L,1)})}getThemingParticipants(){return this.themingParticipants}}let c=new D;S.B.add(g.ThemingContribution,c);function C(E){return c.onColorThemeChange(E)}class M extends z.JT{constructor(_){super();this.themeService=_,this.theme=_.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(L=>this.onThemeChange(L)))}onThemeChange(_){this.theme=_,this.updateStyles()}updateStyles(){}}},64862:function(Tt,me,a){"use strict";a.d(me,{tJ:function(){return d},YO:function(){return z},Xt:function(){return O},gJ:function(){return S}});var p=a(72065);const d=(0,p.yh)("undoRedoService");class z{constructor(T,B){this.resource=T,this.elements=B}}class O{constructor(){this.id=O._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}O._ID=0,O.None=new O;class S{constructor(){this.id=S._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}S._ID=0,S.None=new S},40382:function(Tt,me,a){"use strict";a.d(me,{ec:function(){return S},eb:function(){return j},uT:function(){return T},md:function(){return F},A6:function(){return x}});var p=a(63580),d=a(43702),z=a(70666),O=a(72065);const S=(0,O.yh)("contextService");function j(g){const D=g;return typeof(D==null?void 0:D.id)=="string"&&z.o.isUri(D.uri)}function T(g){if(g.configuration)return{id:g.id,configPath:g.configuration};if(g.folders.length===1)return{id:g.id,uri:g.folders[0].uri}}class B{constructor(D,c,C,M,E){this._id=D,this._transient=C,this._configuration=M,this._ignorePathCasing=E,this._foldersMap=TernarySearchTree.forUris(this._ignorePathCasing),this.folders=c}get folders(){return this._folders}set folders(D){this._folders=D,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(D){this._configuration=D}getFolder(D){return D&&this._foldersMap.findSubstr(D.with({scheme:D.scheme,authority:D.authority,path:D.path}))||null}updateFoldersMap(){this._foldersMap=TernarySearchTree.forUris(this._ignorePathCasing);for(const D of this.folders)this._foldersMap.set(D.uri,D)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}class F{constructor(D,c){this.raw=c,this.uri=D.uri,this.index=D.index,this.name=D.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const x="code-workspace",v=[{name:(0,p.N)("codeWorkspace","Code Workspace"),extensions:[x]}]},33425:function(Tt,me,a){"use strict";a.d(me,{Y:function(){return d}});var p=a(72065);const d=(0,p.yh)("workspaceTrustManagementService")},40582:function(Tt,me,a){var p=a(89550),d=a(68854),z=a(36820),O=a(43650),S=a(56601),j=[0,0];Tt.exports.x7=function(B,F,x,v,g){return p(B,x,v),z(B,B),d(F,-B[1],B[0]),d(j,-x[1],x[0]),g/S(F,j)},Tt.exports.mJ=function(B,F){return d(B,-F[1],F[0]),B},Tt.exports.o7=function(B,F,x){return O(B,F,x),z(B,B),B}},81493:function(Tt,me,a){"use strict";a.d(me,{ZP:function(){return c}});var p=a(26565),d=a(45697),z=a(67294);function O(C){return/^\d+$/.test(C)?"".concat(C,"px"):C}function S(){}var j=function(){var C=function(M,E){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,L){_.__proto__=L}||function(_,L){for(var N in L)Object.prototype.hasOwnProperty.call(L,N)&&(_[N]=L[N])},C(M,E)};return function(M,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");C(M,E);function _(){this.constructor=M}M.prototype=E===null?Object.create(E):(_.prototype=E.prototype,new _)}}(),T=function(){return T=Object.assign||function(C){for(var M,E=1,_=arguments.length;E<_;E++){M=arguments[E];for(var L in M)Object.prototype.hasOwnProperty.call(M,L)&&(C[L]=M[L])}return C},T.apply(this,arguments)},B=function(C){j(M,C);function M(E){var _=C.call(this,E)||this;return _.assignRef=function(L){_.containerElement=L},_.containerElement=void 0,_}return M.prototype.componentDidMount=function(){this.initMonaco()},M.prototype.componentDidUpdate=function(E){var _=this.props,L=_.language,N=_.theme,b=_.height,I=_.options,k=_.width,W=_.className,q=this.editor.getModel(),re=q.original,de=q.modified;this.props.original!==re.getValue()&&re.setValue(this.props.original),this.props.value!=null&&this.props.value!==de.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.getModifiedEditor().pushUndoStop(),de.pushEditOperations([],[{range:de.getFullModelRange(),text:this.props.value}]),this.editor.getModifiedEditor().pushUndoStop(),this.__prevent_trigger_change_event=!1),E.language!==L&&(p.editor.setModelLanguage(re,L),p.editor.setModelLanguage(de,L)),E.theme!==N&&p.editor.setTheme(N),this.editor&&(k!==E.width||b!==E.height)&&this.editor.layout(),E.options!==I&&this.editor.updateOptions(T(T({},W?{extraEditorClassName:W}:{}),I))},M.prototype.componentWillUnmount=function(){this.destroyMonaco()},M.prototype.editorWillMount=function(){var E=this.props.editorWillMount,_=E(p);return _||{}},M.prototype.editorDidMount=function(E){var _=this;this.props.editorDidMount(E,p);var L=E.getModel().modified;this._subscription=L.onDidChangeContent(function(N){_.__prevent_trigger_change_event||_.props.onChange(L.getValue(),N)})},M.prototype.editorWillUnmount=function(E){var _=this.props.editorWillUnmount;_(E,p)},M.prototype.initModels=function(E,_){var L=this.props.language,N=p.editor.createModel(_,L),b=p.editor.createModel(E,L);this.editor.setModel({original:N,modified:b})},M.prototype.initMonaco=function(){var E=this.props.value!=null?this.props.value:this.props.defaultValue,_=this.props,L=_.original,N=_.theme,b=_.options,I=_.overrideServices,k=_.className;this.containerElement&&(this.editorWillMount(),this.editor=p.editor.createDiffEditor(this.containerElement,T(T(T({},k?{extraEditorClassName:k}:{}),b),N?{theme:N}:{}),I),this.initModels(E,L),this.editorDidMount(this.editor))},M.prototype.destroyMonaco=function(){if(this.editor){this.editorWillUnmount(this.editor),this.editor.dispose();var E=this.editor.getModel(),_=E.original,L=E.modified;_&&_.dispose(),L&&L.dispose()}this._subscription&&this._subscription.dispose()},M.prototype.render=function(){var E=this.props,_=E.width,L=E.height,N=O(_),b=O(L),I={width:N,height:b};return z.createElement("div",{ref:this.assignRef,style:I,className:"react-monaco-editor-container"})},M.propTypes={width:d.oneOfType([d.string,d.number]),height:d.oneOfType([d.string,d.number]),original:d.string,value:d.string,defaultValue:d.string,language:d.string,theme:d.string,options:d.object,overrideServices:d.object,editorWillMount:d.func,editorDidMount:d.func,editorWillUnmount:d.func,onChange:d.func,className:d.string},M.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:S,editorDidMount:S,editorWillUnmount:S,onChange:S,className:null},M}(z.Component),F=null,x=function(){var C=function(M,E){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,L){_.__proto__=L}||function(_,L){for(var N in L)Object.prototype.hasOwnProperty.call(L,N)&&(_[N]=L[N])},C(M,E)};return function(M,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");C(M,E);function _(){this.constructor=M}M.prototype=E===null?Object.create(E):(_.prototype=E.prototype,new _)}}(),v=function(){return v=Object.assign||function(C){for(var M,E=1,_=arguments.length;E<_;E++){M=arguments[E];for(var L in M)Object.prototype.hasOwnProperty.call(M,L)&&(C[L]=M[L])}return C},v.apply(this,arguments)},g=function(C,M){var E={};for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&M.indexOf(_)<0&&(E[_]=C[_]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,_=Object.getOwnPropertySymbols(C);L<_.length;L++)M.indexOf(_[L])<0&&Object.prototype.propertyIsEnumerable.call(C,_[L])&&(E[_[L]]=C[_[L]]);return E},D=function(C){x(M,C);function M(E){var _=C.call(this,E)||this;return _.assignRef=function(L){_.containerElement=L},_.containerElement=void 0,_}return M.prototype.componentDidMount=function(){this.initMonaco()},M.prototype.componentDidUpdate=function(E){var _=this.props,L=_.value,N=_.language,b=_.theme,I=_.height,k=_.options,W=_.width,q=_.className,re=this.editor,de=re.getModel();if(this.props.value!=null&&this.props.value!==de.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.pushUndoStop(),de.pushEditOperations([],[{range:de.getFullModelRange(),text:L}]),this.editor.pushUndoStop(),this.__prevent_trigger_change_event=!1),E.language!==N&&p.editor.setModelLanguage(de,N),E.theme!==b&&p.editor.setTheme(b),re&&(W!==E.width||I!==E.height)&&re.layout(),E.options!==k){var pe=k.model,ae=g(k,["model"]);re.updateOptions(v(v({},q?{extraEditorClassName:q}:{}),ae))}},M.prototype.componentWillUnmount=function(){this.destroyMonaco()},M.prototype.destroyMonaco=function(){if(this.editor){this.editorWillUnmount(this.editor),this.editor.dispose();var E=this.editor.getModel();E&&E.dispose()}this._subscription&&this._subscription.dispose()},M.prototype.initMonaco=function(){var E=this.props.value!=null?this.props.value:this.props.defaultValue,_=this.props,L=_.language,N=_.theme,b=_.overrideServices,I=_.className;if(this.containerElement){var k=v(v({},this.props.options),this.editorWillMount());this.editor=p.editor.create(this.containerElement,v(v(v({value:E,language:L},I?{extraEditorClassName:I}:{}),k),N?{theme:N}:{}),b),this.editorDidMount(this.editor)}},M.prototype.editorWillMount=function(){var E=this.props.editorWillMount,_=E(p);return _||{}},M.prototype.editorDidMount=function(E){var _=this;this.props.editorDidMount(E,p),this._subscription=E.onDidChangeModelContent(function(L){_.__prevent_trigger_change_event||_.props.onChange(E.getValue(),L)})},M.prototype.editorWillUnmount=function(E){var _=this.props.editorWillUnmount;_(E,p)},M.prototype.render=function(){var E=this.props,_=E.width,L=E.height,N=O(_),b=O(L),I={width:N,height:b};return z.createElement("div",{ref:this.assignRef,style:I,className:"react-monaco-editor-container"})},M.propTypes={width:d.oneOfType([d.string,d.number]),height:d.oneOfType([d.string,d.number]),value:d.string,defaultValue:d.string,language:d.string,theme:d.string,options:d.object,overrideServices:d.object,editorWillMount:d.func,editorDidMount:d.func,editorWillUnmount:d.func,onChange:d.func,className:d.string},M.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:S,editorDidMount:S,editorWillUnmount:S,onChange:S,className:null},M}(z.Component),c=D},28660:function(Tt,me,a){var p=a(34155);/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var d;(function(z){(function(O){var S=typeof a.g=="object"?a.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),j=T(z);typeof S.Reflect=="undefined"?S.Reflect=z:j=T(S.Reflect,j),O(j);function T(B,F){return function(x,v){typeof B[x]!="function"&&Object.defineProperty(B,x,{configurable:!0,writable:!0,value:v}),F&&F(x,v)}}})(function(O){var S=Object.prototype.hasOwnProperty,j=typeof Symbol=="function",T=j&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",B=j&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",F=typeof Object.create=="function",x={__proto__:[]}instanceof Array,v=!F&&!x,g={create:F?function(){return gt(Object.create(null))}:x?function(){return gt({__proto__:null})}:function(){return gt({})},has:v?function(Ue,Ye){return S.call(Ue,Ye)}:function(Ue,Ye){return Ye in Ue},get:v?function(Ue,Ye){return S.call(Ue,Ye)?Ue[Ye]:void 0}:function(Ue,Ye){return Ue[Ye]}},D=Object.getPrototypeOf(Function),c=typeof p=="object"&&{NODE_ENV:"production"}&&{NODE_ENV:"production"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",C=!c&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:_t(),M=!c&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Ot(),E=!c&&typeof WeakMap=="function"?WeakMap:rn(),_=new E;function L(Ue,Ye,dt,Re){if(ke(dt)){if(!Je(Ue))throw new TypeError;if(!Fe(Ye))throw new TypeError;return ae(Ue,Ye)}else{if(!Je(Ue))throw new TypeError;if(!we(Ye))throw new TypeError;if(!we(Re)&&!ke(Re)&&!Te(Re))throw new TypeError;return Te(Re)&&(Re=void 0),dt=qe(dt),ue(Ue,Ye,dt,Re)}}O("decorate",L);function N(Ue,Ye){function dt(Re,Ve){if(!we(Re))throw new TypeError;if(!ke(Ve)&&!ne(Ve))throw new TypeError;le(Ue,Ye,Re,Ve)}return dt}O("metadata",N);function b(Ue,Ye,dt,Re){if(!we(dt))throw new TypeError;return ke(Re)||(Re=qe(Re)),le(Ue,Ye,dt,Re)}O("defineMetadata",b);function I(Ue,Ye,dt){if(!we(Ye))throw new TypeError;return ke(dt)||(dt=qe(dt)),K(Ue,Ye,dt)}O("hasMetadata",I);function k(Ue,Ye,dt){if(!we(Ye))throw new TypeError;return ke(dt)||(dt=qe(dt)),U(Ue,Ye,dt)}O("hasOwnMetadata",k);function W(Ue,Ye,dt){if(!we(Ye))throw new TypeError;return ke(dt)||(dt=qe(dt)),ee(Ue,Ye,dt)}O("getMetadata",W);function q(Ue,Ye,dt){if(!we(Ye))throw new TypeError;return ke(dt)||(dt=qe(dt)),X(Ue,Ye,dt)}O("getOwnMetadata",q);function re(Ue,Ye){if(!we(Ue))throw new TypeError;return ke(Ye)||(Ye=qe(Ye)),oe(Ue,Ye)}O("getMetadataKeys",re);function de(Ue,Ye){if(!we(Ue))throw new TypeError;return ke(Ye)||(Ye=qe(Ye)),Ce(Ue,Ye)}O("getOwnMetadataKeys",de);function pe(Ue,Ye,dt){if(!we(Ye))throw new TypeError;ke(dt)||(dt=qe(dt));var Re=te(Ye,dt,!1);if(ke(Re)||!Re.delete(Ue))return!1;if(Re.size>0)return!0;var Ve=_.get(Ye);return Ve.delete(dt),Ve.size>0||_.delete(Ye),!0}O("deleteMetadata",pe);function ae(Ue,Ye){for(var dt=Ue.length-1;dt>=0;--dt){var Re=Ue[dt],Ve=Re(Ye);if(!ke(Ve)&&!Te(Ve)){if(!Fe(Ve))throw new TypeError;Ye=Ve}}return Ye}function ue(Ue,Ye,dt,Re){for(var Ve=Ue.length-1;Ve>=0;--Ve){var at=Ue[Ve],pt=at(Ye,dt,Re);if(!ke(pt)&&!Te(pt)){if(!we(pt))throw new TypeError;Re=pt}}return Re}function te(Ue,Ye,dt){var Re=_.get(Ue);if(ke(Re)){if(!dt)return;Re=new C,_.set(Ue,Re)}var Ve=Re.get(Ye);if(ke(Ve)){if(!dt)return;Ve=new C,Re.set(Ye,Ve)}return Ve}function K(Ue,Ye,dt){var Re=U(Ue,Ye,dt);if(Re)return!0;var Ve=nt(Ye);return Te(Ve)?!1:K(Ue,Ve,dt)}function U(Ue,Ye,dt){var Re=te(Ye,dt,!1);return ke(Re)?!1:Pe(Re.has(Ue))}function ee(Ue,Ye,dt){var Re=U(Ue,Ye,dt);if(Re)return X(Ue,Ye,dt);var Ve=nt(Ye);if(!Te(Ve))return ee(Ue,Ve,dt)}function X(Ue,Ye,dt){var Re=te(Ye,dt,!1);if(!ke(Re))return Re.get(Ue)}function le(Ue,Ye,dt,Re){var Ve=te(dt,Re,!0);Ve.set(Ue,Ye)}function oe(Ue,Ye){var dt=Ce(Ue,Ye),Re=nt(Ue);if(Re===null)return dt;var Ve=oe(Re,Ye);if(Ve.length<=0)return dt;if(dt.length<=0)return Ve;for(var at=new M,pt=[],Be=0,je=dt;Be<je.length;Be++){var Et=je[Be],Dt=at.has(Et);Dt||(at.add(Et),pt.push(Et))}for(var Xe=0,ft=Ve;Xe<ft.length;Xe++){var Et=ft[Xe],Dt=at.has(Et);Dt||(at.add(Et),pt.push(Et))}return pt}function Ce(Ue,Ye){var dt=[],Re=te(Ue,Ye,!1);if(ke(Re))return dt;for(var Ve=Re.keys(),at=ie(Ve),pt=0;;){var Be=be(at);if(!Be)return dt.length=pt,dt;var je=xe(Be);try{dt[pt]=je}catch(Et){try{Ge(at)}finally{throw Et}}pt++}}function ye(Ue){if(Ue===null)return 1;switch(typeof Ue){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Ue===null?1:6;default:return 6}}function ke(Ue){return Ue===void 0}function Te(Ue){return Ue===null}function ge(Ue){return typeof Ue=="symbol"}function we(Ue){return typeof Ue=="object"?Ue!==null:typeof Ue=="function"}function ze(Ue,Ye){switch(ye(Ue)){case 0:return Ue;case 1:return Ue;case 2:return Ue;case 3:return Ue;case 4:return Ue;case 5:return Ue}var dt=Ye===3?"string":Ye===5?"number":"default",Re=Q(Ue,T);if(Re!==void 0){var Ve=Re.call(Ue,dt);if(we(Ve))throw new TypeError;return Ve}return Qe(Ue,dt==="default"?"number":dt)}function Qe(Ue,Ye){if(Ye==="string"){var dt=Ue.toString;if(Ne(dt)){var Re=dt.call(Ue);if(!we(Re))return Re}var Ve=Ue.valueOf;if(Ne(Ve)){var Re=Ve.call(Ue);if(!we(Re))return Re}}else{var Ve=Ue.valueOf;if(Ne(Ve)){var Re=Ve.call(Ue);if(!we(Re))return Re}var at=Ue.toString;if(Ne(at)){var Re=at.call(Ue);if(!we(Re))return Re}}throw new TypeError}function Pe(Ue){return!!Ue}function Oe(Ue){return""+Ue}function qe(Ue){var Ye=ze(Ue,3);return ge(Ye)?Ye:Oe(Ye)}function Je(Ue){return Array.isArray?Array.isArray(Ue):Ue instanceof Object?Ue instanceof Array:Object.prototype.toString.call(Ue)==="[object Array]"}function Ne(Ue){return typeof Ue=="function"}function Fe(Ue){return typeof Ue=="function"}function ne(Ue){switch(ye(Ue)){case 3:return!0;case 4:return!0;default:return!1}}function Q(Ue,Ye){var dt=Ue[Ye];if(dt!=null){if(!Ne(dt))throw new TypeError;return dt}}function ie(Ue){var Ye=Q(Ue,B);if(!Ne(Ye))throw new TypeError;var dt=Ye.call(Ue);if(!we(dt))throw new TypeError;return dt}function xe(Ue){return Ue.value}function be(Ue){var Ye=Ue.next();return Ye.done?!1:Ye}function Ge(Ue){var Ye=Ue.return;Ye&&Ye.call(Ue)}function nt(Ue){var Ye=Object.getPrototypeOf(Ue);if(typeof Ue!="function"||Ue===D||Ye!==D)return Ye;var dt=Ue.prototype,Re=dt&&Object.getPrototypeOf(dt);if(Re==null||Re===Object.prototype)return Ye;var Ve=Re.constructor;return typeof Ve!="function"||Ve===Ue?Ye:Ve}function _t(){var Ue={},Ye=[],dt=function(){function pt(Be,je,Et){this._index=0,this._keys=Be,this._values=je,this._selector=Et}return pt.prototype["@@iterator"]=function(){return this},pt.prototype[B]=function(){return this},pt.prototype.next=function(){var Be=this._index;if(Be>=0&&Be<this._keys.length){var je=this._selector(this._keys[Be],this._values[Be]);return Be+1>=this._keys.length?(this._index=-1,this._keys=Ye,this._values=Ye):this._index++,{value:je,done:!1}}return{value:void 0,done:!0}},pt.prototype.throw=function(Be){throw this._index>=0&&(this._index=-1,this._keys=Ye,this._values=Ye),Be},pt.prototype.return=function(Be){return this._index>=0&&(this._index=-1,this._keys=Ye,this._values=Ye),{value:Be,done:!0}},pt}();return function(){function pt(){this._keys=[],this._values=[],this._cacheKey=Ue,this._cacheIndex=-2}return Object.defineProperty(pt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),pt.prototype.has=function(Be){return this._find(Be,!1)>=0},pt.prototype.get=function(Be){var je=this._find(Be,!1);return je>=0?this._values[je]:void 0},pt.prototype.set=function(Be,je){var Et=this._find(Be,!0);return this._values[Et]=je,this},pt.prototype.delete=function(Be){var je=this._find(Be,!1);if(je>=0){for(var Et=this._keys.length,Dt=je+1;Dt<Et;Dt++)this._keys[Dt-1]=this._keys[Dt],this._values[Dt-1]=this._values[Dt];return this._keys.length--,this._values.length--,Be===this._cacheKey&&(this._cacheKey=Ue,this._cacheIndex=-2),!0}return!1},pt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Ue,this._cacheIndex=-2},pt.prototype.keys=function(){return new dt(this._keys,this._values,Re)},pt.prototype.values=function(){return new dt(this._keys,this._values,Ve)},pt.prototype.entries=function(){return new dt(this._keys,this._values,at)},pt.prototype["@@iterator"]=function(){return this.entries()},pt.prototype[B]=function(){return this.entries()},pt.prototype._find=function(Be,je){return this._cacheKey!==Be&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Be)),this._cacheIndex<0&&je&&(this._cacheIndex=this._keys.length,this._keys.push(Be),this._values.push(void 0)),this._cacheIndex},pt}();function Re(pt,Be){return pt}function Ve(pt,Be){return Be}function at(pt,Be){return[pt,Be]}}function Ot(){return function(){function Ue(){this._map=new C}return Object.defineProperty(Ue.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Ue.prototype.has=function(Ye){return this._map.has(Ye)},Ue.prototype.add=function(Ye){return this._map.set(Ye,Ye),this},Ue.prototype.delete=function(Ye){return this._map.delete(Ye)},Ue.prototype.clear=function(){this._map.clear()},Ue.prototype.keys=function(){return this._map.keys()},Ue.prototype.values=function(){return this._map.values()},Ue.prototype.entries=function(){return this._map.entries()},Ue.prototype["@@iterator"]=function(){return this.keys()},Ue.prototype[B]=function(){return this.keys()},Ue}()}function rn(){var Ue=16,Ye=g.create(),dt=Re();return function(){function je(){this._key=Re()}return je.prototype.has=function(Et){var Dt=Ve(Et,!1);return Dt!==void 0?g.has(Dt,this._key):!1},je.prototype.get=function(Et){var Dt=Ve(Et,!1);return Dt!==void 0?g.get(Dt,this._key):void 0},je.prototype.set=function(Et,Dt){var Xe=Ve(Et,!0);return Xe[this._key]=Dt,this},je.prototype.delete=function(Et){var Dt=Ve(Et,!1);return Dt!==void 0?delete Dt[this._key]:!1},je.prototype.clear=function(){this._key=Re()},je}();function Re(){var je;do je="@@WeakMap@@"+Be();while(g.has(Ye,je));return Ye[je]=!0,je}function Ve(je,Et){if(!S.call(je,dt)){if(!Et)return;Object.defineProperty(je,dt,{value:g.create()})}return je[dt]}function at(je,Et){for(var Dt=0;Dt<Et;++Dt)je[Dt]=Math.random()*255|0;return je}function pt(je){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(je)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(je)):at(new Uint8Array(je),je):at(new Array(je),je)}function Be(){var je=pt(Ue);je[6]=je[6]&79|64,je[8]=je[8]&191|128;for(var Et="",Dt=0;Dt<Ue;++Dt){var Xe=je[Dt];(Dt===4||Dt===6||Dt===8)&&(Et+="-"),Xe<16&&(Et+="0"),Et+=Xe.toString(16).toLowerCase()}return Et}}function gt(Ue){return Ue.__=void 0,delete Ue.__,Ue}})})(d||(d={}))},81550:function(Tt){(function(me,a){Tt.exports=a()})(this,function(){"use strict";var me=function(mt){return mt instanceof Uint8Array||mt instanceof Uint16Array||mt instanceof Uint32Array||mt instanceof Int8Array||mt instanceof Int16Array||mt instanceof Int32Array||mt instanceof Float32Array||mt instanceof Float64Array||mt instanceof Uint8ClampedArray},a=function(mt,Qt){for(var Cn=Object.keys(Qt),hi=0;hi<Cn.length;++hi)mt[Cn[hi]]=Qt[Cn[hi]];return mt},p=`
`;function d(mt){return typeof atob!="undefined"?atob(mt):"base64:"+mt}function z(mt){var Qt=new Error("(regl) "+mt);throw console.error(Qt),Qt}function O(mt,Qt){mt||z(Qt)}function S(mt){return mt?": "+mt:""}function j(mt,Qt,Cn){mt in Qt||z("unknown parameter ("+mt+")"+S(Cn)+". possible values: "+Object.keys(Qt).join())}function T(mt,Qt){me(mt)||z("invalid parameter type"+S(Qt)+". must be a typed array")}function B(mt,Qt){switch(Qt){case"number":return typeof mt=="number";case"object":return typeof mt=="object";case"string":return typeof mt=="string";case"boolean":return typeof mt=="boolean";case"function":return typeof mt=="function";case"undefined":return typeof mt=="undefined";case"symbol":return typeof mt=="symbol"}}function F(mt,Qt,Cn){B(mt,Qt)||z("invalid parameter type"+S(Cn)+". expected "+Qt+", got "+typeof mt)}function x(mt,Qt){mt>=0&&(mt|0)===mt||z("invalid parameter type, ("+mt+")"+S(Qt)+". must be a nonnegative integer")}function v(mt,Qt,Cn){Qt.indexOf(mt)<0&&z("invalid value"+S(Cn)+". must be one of: "+Qt)}var g=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function D(mt){Object.keys(mt).forEach(function(Qt){g.indexOf(Qt)<0&&z('invalid regl constructor argument "'+Qt+'". must be one of '+g)})}function c(mt,Qt){for(mt=mt+"";mt.length<Qt;)mt=" "+mt;return mt}function C(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function M(mt,Qt){this.number=mt,this.line=Qt,this.errors=[]}function E(mt,Qt,Cn){this.file=mt,this.line=Qt,this.message=Cn}function _(){var mt=new Error,Qt=(mt.stack||mt).toString(),Cn=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Qt);if(Cn)return Cn[1];var hi=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Qt);return hi?hi[1]:"unknown"}function L(){var mt=new Error,Qt=(mt.stack||mt).toString(),Cn=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Qt);if(Cn)return Cn[1];var hi=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Qt);return hi?hi[1]:"unknown"}function N(mt,Qt){var Cn=mt.split(`
`),hi=1,Ei=0,di={unknown:new C,0:new C};di.unknown.name=di[0].name=Qt||_(),di.unknown.lines.push(new M(0,""));for(var mi=0;mi<Cn.length;++mi){var Wi=Cn[mi],Vi=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Wi);if(Vi)switch(Vi[1]){case"line":var Ki=/(\d+)(\s+\d+)?/.exec(Vi[2]);Ki&&(hi=Ki[1]|0,Ki[2]&&(Ei=Ki[2]|0,Ei in di||(di[Ei]=new C)));break;case"define":var zi=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Vi[2]);zi&&(di[Ei].name=zi[1]?d(zi[2]):zi[2]);break}di[Ei].lines.push(new M(hi++,Wi))}return Object.keys(di).forEach(function(Qi){var ir=di[Qi];ir.lines.forEach(function(Oi){ir.index[Oi.number]=Oi})}),di}function b(mt){var Qt=[];return mt.split(`
`).forEach(function(Cn){if(!(Cn.length<5)){var hi=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Cn);hi?Qt.push(new E(hi[1]|0,hi[2]|0,hi[3].trim())):Cn.length>0&&Qt.push(new E("unknown",0,Cn))}}),Qt}function I(mt,Qt){Qt.forEach(function(Cn){var hi=mt[Cn.file];if(hi){var Ei=hi.index[Cn.line];if(Ei){Ei.errors.push(Cn),hi.hasErrors=!0;return}}mt.unknown.hasErrors=!0,mt.unknown.lines[0].errors.push(Cn)})}function k(mt,Qt,Cn,hi,Ei){if(!mt.getShaderParameter(Qt,mt.COMPILE_STATUS)){var di=mt.getShaderInfoLog(Qt),mi=hi===mt.FRAGMENT_SHADER?"fragment":"vertex";ue(Cn,"string",mi+" shader source must be a string",Ei);var Wi=N(Cn,Ei),Vi=b(di);I(Wi,Vi),Object.keys(Wi).forEach(function(Ki){var zi=Wi[Ki];if(!zi.hasErrors)return;var Qi=[""],ir=[""];function Oi(Zi,Yn){Qi.push(Zi),ir.push(Yn||"")}Oi("file number "+Ki+": "+zi.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),zi.lines.forEach(function(Zi){if(Zi.errors.length>0){Oi(c(Zi.number,4)+"|  ","background-color:yellow; font-weight:bold"),Oi(Zi.line+p,"color:red; background-color:yellow; font-weight:bold");var Yn=0;Zi.errors.forEach(function(fi){var $i=fi.message,ar=/^\s*'(.*)'\s*:\s*(.*)$/.exec($i);if(ar){var Mi=ar[1];switch($i=ar[2],Mi){case"assign":Mi="=";break}Yn=Math.max(Zi.line.indexOf(Mi,Yn),0)}else Yn=0;Oi(c("| ",6)),Oi(c("^^^",Yn+3)+p,"font-weight:bold"),Oi(c("| ",6)),Oi($i+p,"font-weight:bold")}),Oi(c("| ",6)+p)}else Oi(c(Zi.number,4)+"|  "),Oi(Zi.line+p,"color:red")}),typeof document!="undefined"&&!window.chrome?(ir[0]=Qi.join("%c"),console.log.apply(console,ir)):console.log(Qi.join(""))}),O.raise("Error compiling "+mi+" shader, "+Wi[0].name)}}function W(mt,Qt,Cn,hi,Ei){if(!mt.getProgramParameter(Qt,mt.LINK_STATUS)){var di=mt.getProgramInfoLog(Qt),mi=N(Cn,Ei),Wi=N(hi,Ei),Vi='Error linking program with vertex shader, "'+Wi[0].name+'", and fragment shader "'+mi[0].name+'"';typeof document!="undefined"?console.log("%c"+Vi+p+"%c"+di,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Vi+p+di),O.raise(Vi)}}function q(mt){mt._commandRef=_()}function re(mt,Qt,Cn,hi){q(mt);function Ei(Vi){return Vi?hi.id(Vi):0}mt._fragId=Ei(mt.static.frag),mt._vertId=Ei(mt.static.vert);function di(Vi,Ki){Object.keys(Ki).forEach(function(zi){Vi[hi.id(zi)]=!0})}var mi=mt._uniformSet={};di(mi,Qt.static),di(mi,Qt.dynamic);var Wi=mt._attributeSet={};di(Wi,Cn.static),di(Wi,Cn.dynamic),mt._hasCount="count"in mt.static||"count"in mt.dynamic||"elements"in mt.static||"elements"in mt.dynamic}function de(mt,Qt){var Cn=L();z(mt+" in command "+(Qt||_())+(Cn==="unknown"?"":" called from "+Cn))}function pe(mt,Qt,Cn){mt||de(Qt,Cn||_())}function ae(mt,Qt,Cn,hi){mt in Qt||de("unknown parameter ("+mt+")"+S(Cn)+". possible values: "+Object.keys(Qt).join(),hi||_())}function ue(mt,Qt,Cn,hi){B(mt,Qt)||de("invalid parameter type"+S(Cn)+". expected "+Qt+", got "+typeof mt,hi||_())}function te(mt){mt()}function K(mt,Qt,Cn){mt.texture?v(mt.texture._texture.internalformat,Qt,"unsupported texture format for attachment"):v(mt.renderbuffer._renderbuffer.format,Cn,"unsupported renderbuffer format for attachment")}var U=33071,ee=9728,X=9984,le=9985,oe=9986,Ce=9987,ye=5120,ke=5121,Te=5122,ge=5123,we=5124,ze=5125,Qe=5126,Pe=32819,Oe=32820,qe=33635,Je=34042,Ne=36193,Fe={};Fe[ye]=Fe[ke]=1,Fe[Te]=Fe[ge]=Fe[Ne]=Fe[qe]=Fe[Pe]=Fe[Oe]=2,Fe[we]=Fe[ze]=Fe[Qe]=Fe[Je]=4;function ne(mt,Qt){return mt===Oe||mt===Pe||mt===qe?2:mt===Je?4:Fe[mt]*Qt}function Q(mt){return!(mt&mt-1)&&!!mt}function ie(mt,Qt,Cn){var hi,Ei=Qt.width,di=Qt.height,mi=Qt.channels;O(Ei>0&&Ei<=Cn.maxTextureSize&&di>0&&di<=Cn.maxTextureSize,"invalid texture shape"),(mt.wrapS!==U||mt.wrapT!==U)&&O(Q(Ei)&&Q(di),"incompatible wrap mode for texture, both width and height must be power of 2"),Qt.mipmask===1?Ei!==1&&di!==1&&O(mt.minFilter!==X&&mt.minFilter!==oe&&mt.minFilter!==le&&mt.minFilter!==Ce,"min filter requires mipmap"):(O(Q(Ei)&&Q(di),"texture must be a square power of 2 to support mipmapping"),O(Qt.mipmask===(Ei<<1)-1,"missing or incomplete mipmap data")),Qt.type===Qe&&(Cn.extensions.indexOf("oes_texture_float_linear")<0&&O(mt.minFilter===ee&&mt.magFilter===ee,"filter not supported, must enable oes_texture_float_linear"),O(!mt.genMipmaps,"mipmap generation not supported with float textures"));var Wi=Qt.images;for(hi=0;hi<16;++hi)if(Wi[hi]){var Vi=Ei>>hi,Ki=di>>hi;O(Qt.mipmask&1<<hi,"missing mipmap data");var zi=Wi[hi];if(O(zi.width===Vi&&zi.height===Ki,"invalid shape for mip images"),O(zi.format===Qt.format&&zi.internalformat===Qt.internalformat&&zi.type===Qt.type,"incompatible type for mip image"),!zi.compressed)if(zi.data){var Qi=Math.ceil(ne(zi.type,mi)*Vi/zi.unpackAlignment)*zi.unpackAlignment;O(zi.data.byteLength===Qi*Ki,"invalid data for image, buffer size is inconsistent with image format")}else zi.element||zi.copy}else mt.genMipmaps||O((Qt.mipmask&1<<hi)==0,"extra mipmap data");Qt.compressed&&O(!mt.genMipmaps,"mipmap generation for compressed images not supported")}function xe(mt,Qt,Cn,hi){var Ei=mt.width,di=mt.height,mi=mt.channels;O(Ei>0&&Ei<=hi.maxTextureSize&&di>0&&di<=hi.maxTextureSize,"invalid texture shape"),O(Ei===di,"cube map must be square"),O(Qt.wrapS===U&&Qt.wrapT===U,"wrap mode not supported by cube map");for(var Wi=0;Wi<Cn.length;++Wi){var Vi=Cn[Wi];O(Vi.width===Ei&&Vi.height===di,"inconsistent cube map face shape"),Qt.genMipmaps&&(O(!Vi.compressed,"can not generate mipmap for compressed textures"),O(Vi.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ki=Vi.images,zi=0;zi<16;++zi){var Qi=Ki[zi];if(Qi){var ir=Ei>>zi,Oi=di>>zi;O(Vi.mipmask&1<<zi,"missing mipmap data"),O(Qi.width===ir&&Qi.height===Oi,"invalid shape for mip images"),O(Qi.format===mt.format&&Qi.internalformat===mt.internalformat&&Qi.type===mt.type,"incompatible type for mip image"),Qi.compressed||(Qi.data?O(Qi.data.byteLength===ir*Oi*Math.max(ne(Qi.type,mi),Qi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Qi.element||Qi.copy)}}}}var be=a(O,{optional:te,raise:z,commandRaise:de,command:pe,parameter:j,commandParameter:ae,constructor:D,type:F,commandType:ue,isTypedArray:T,nni:x,oneOf:v,shaderError:k,linkError:W,callSite:L,saveCommandRef:q,saveDrawInfo:re,framebufferFormat:K,guessCommand:_,texture2D:ie,textureCube:xe}),Ge=0,nt=0,_t=5,Ot=6;function rn(mt,Qt){this.id=Ge++,this.type=mt,this.data=Qt}function gt(mt){return mt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ue(mt){if(mt.length===0)return[];var Qt=mt.charAt(0),Cn=mt.charAt(mt.length-1);if(mt.length>1&&Qt===Cn&&(Qt==='"'||Qt==="'"))return['"'+gt(mt.substr(1,mt.length-2))+'"'];var hi=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(mt);if(hi)return Ue(mt.substr(0,hi.index)).concat(Ue(hi[1])).concat(Ue(mt.substr(hi.index+hi[0].length)));var Ei=mt.split(".");if(Ei.length===1)return['"'+gt(mt)+'"'];for(var di=[],mi=0;mi<Ei.length;++mi)di=di.concat(Ue(Ei[mi]));return di}function Ye(mt){return"["+Ue(mt).join("][")+"]"}function dt(mt,Qt){return new rn(mt,Ye(Qt+""))}function Re(mt){return typeof mt=="function"&&!mt._reglType||mt instanceof rn}function Ve(mt,Qt){if(typeof mt=="function")return new rn(nt,mt);if(typeof mt=="number"||typeof mt=="boolean")return new rn(_t,mt);if(Array.isArray(mt))return new rn(Ot,mt.map((Cn,hi)=>Ve(Cn,Qt+"["+hi+"]")));if(mt instanceof rn)return mt;be(!1,"invalid option type in uniform "+Qt)}var at={DynamicVariable:rn,define:dt,isDynamic:Re,unbox:Ve,accessor:Ye},pt={next:typeof requestAnimationFrame=="function"?function(mt){return requestAnimationFrame(mt)}:function(mt){return setTimeout(mt,16)},cancel:typeof cancelAnimationFrame=="function"?function(mt){return cancelAnimationFrame(mt)}:clearTimeout},Be=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function je(){var mt={"":0},Qt=[""];return{id:function(Cn){var hi=mt[Cn];return hi||(hi=mt[Cn]=Qt.length,Qt.push(Cn),hi)},str:function(Cn){return Qt[Cn]}}}function Et(mt,Qt,Cn){var hi=document.createElement("canvas");a(hi.style,{border:0,margin:0,padding:0,top:0,left:0}),mt.appendChild(hi),mt===document.body&&(hi.style.position="absolute",a(mt.style,{margin:0,padding:0}));function Ei(){var Wi=window.innerWidth,Vi=window.innerHeight;if(mt!==document.body){var Ki=mt.getBoundingClientRect();Wi=Ki.right-Ki.left,Vi=Ki.bottom-Ki.top}hi.width=Cn*Wi,hi.height=Cn*Vi,a(hi.style,{width:Wi+"px",height:Vi+"px"})}var di;mt!==document.body&&typeof ResizeObserver=="function"?(di=new ResizeObserver(function(){setTimeout(Ei)}),di.observe(mt)):window.addEventListener("resize",Ei,!1);function mi(){di?di.disconnect():window.removeEventListener("resize",Ei),mt.removeChild(hi)}return Ei(),{canvas:hi,onDestroy:mi}}function Dt(mt,Qt){function Cn(hi){try{return mt.getContext(hi,Qt)}catch(Ei){return null}}return Cn("webgl")||Cn("experimental-webgl")||Cn("webgl-experimental")}function Xe(mt){return typeof mt.nodeName=="string"&&typeof mt.appendChild=="function"&&typeof mt.getBoundingClientRect=="function"}function ft(mt){return typeof mt.drawArrays=="function"||typeof mt.drawElements=="function"}function an(mt){return typeof mt=="string"?mt.split():(be(Array.isArray(mt),"invalid extension array"),mt)}function An(mt){return typeof mt=="string"?(be(typeof document!="undefined","not supported outside of DOM"),document.querySelector(mt)):mt}function Fn(mt){var Qt=mt||{},Cn,hi,Ei,di,mi={},Wi=[],Vi=[],Ki=typeof window=="undefined"?1:window.devicePixelRatio,zi=!1,Qi=function(Zi){Zi&&be.raise(Zi)},ir=function(){};if(typeof Qt=="string"?(be(typeof document!="undefined","selector queries only supported in DOM enviroments"),Cn=document.querySelector(Qt),be(Cn,"invalid query string for element")):typeof Qt=="object"?Xe(Qt)?Cn=Qt:ft(Qt)?(di=Qt,Ei=di.canvas):(be.constructor(Qt),"gl"in Qt?di=Qt.gl:"canvas"in Qt?Ei=An(Qt.canvas):"container"in Qt&&(hi=An(Qt.container)),"attributes"in Qt&&(mi=Qt.attributes,be.type(mi,"object","invalid context attributes")),"extensions"in Qt&&(Wi=an(Qt.extensions)),"optionalExtensions"in Qt&&(Vi=an(Qt.optionalExtensions)),"onDone"in Qt&&(be.type(Qt.onDone,"function","invalid or missing onDone callback"),Qi=Qt.onDone),"profile"in Qt&&(zi=!!Qt.profile),"pixelRatio"in Qt&&(Ki=+Qt.pixelRatio,be(Ki>0,"invalid pixel ratio"))):be.raise("invalid arguments to regl"),Cn&&(Cn.nodeName.toLowerCase()==="canvas"?Ei=Cn:hi=Cn),!di){if(!Ei){be(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Oi=Et(hi||document.body,Qi,Ki);if(!Oi)return null;Ei=Oi.canvas,ir=Oi.onDestroy}mi.premultipliedAlpha===void 0&&(mi.premultipliedAlpha=!0),di=Dt(Ei,mi)}return di?{gl:di,canvas:Ei,container:hi,extensions:Wi,optionalExtensions:Vi,pixelRatio:Ki,profile:zi,onDone:Qi,onDestroy:ir}:(ir(),Qi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ht(mt,Qt){var Cn={};function hi(mi){be.type(mi,"string","extension name must be string");var Wi=mi.toLowerCase(),Vi;try{Vi=Cn[Wi]=mt.getExtension(Wi)}catch(Ki){}return!!Vi}for(var Ei=0;Ei<Qt.extensions.length;++Ei){var di=Qt.extensions[Ei];if(!hi(di))return Qt.onDestroy(),Qt.onDone('"'+di+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Qt.optionalExtensions.forEach(hi),{extensions:Cn,restore:function(){Object.keys(Cn).forEach(function(mi){if(Cn[mi]&&!hi(mi))throw new Error("(regl): error restoring extension "+mi)})}}}function Kt(mt,Qt){for(var Cn=Array(mt),hi=0;hi<mt;++hi)Cn[hi]=Qt(hi);return Cn}var pn=5120,Vn=5121,kt=5122,Zt=5123,wn=5124,Pi=5125,Fi=5126;function Ji(mt){for(var Qt=16;Qt<=1<<28;Qt*=16)if(mt<=Qt)return Qt;return 0}function si(mt){var Qt,Cn;return Qt=(mt>65535)<<4,mt>>>=Qt,Cn=(mt>255)<<3,mt>>>=Cn,Qt|=Cn,Cn=(mt>15)<<2,mt>>>=Cn,Qt|=Cn,Cn=(mt>3)<<1,mt>>>=Cn,Qt|=Cn,Qt|mt>>1}function zt(){var mt=Kt(8,function(){return[]});function Qt(di){var mi=Ji(di),Wi=mt[si(mi)>>2];return Wi.length>0?Wi.pop():new ArrayBuffer(mi)}function Cn(di){mt[si(di.byteLength)>>2].push(di)}function hi(di,mi){var Wi=null;switch(di){case pn:Wi=new Int8Array(Qt(mi),0,mi);break;case Vn:Wi=new Uint8Array(Qt(mi),0,mi);break;case kt:Wi=new Int16Array(Qt(2*mi),0,mi);break;case Zt:Wi=new Uint16Array(Qt(2*mi),0,mi);break;case wn:Wi=new Int32Array(Qt(4*mi),0,mi);break;case Pi:Wi=new Uint32Array(Qt(4*mi),0,mi);break;case Fi:Wi=new Float32Array(Qt(4*mi),0,mi);break;default:return null}return Wi.length!==mi?Wi.subarray(0,mi):Wi}function Ei(di){Cn(di.buffer)}return{alloc:Qt,free:Cn,allocType:hi,freeType:Ei}}var Vt=zt();Vt.zero=zt();var vn=3408,Sn=3410,Bn=3411,mn=3412,Jt=3413,En=3414,$t=3415,sn=33901,Tn=33902,ri=3379,oi=3386,On=34921,Qn=36347,Yi=36348,Lr=35661,Dr=35660,Fr=34930,Sr=36349,Ro=34076,to=34024,no=7936,dr=7937,kn=7938,bt=35724,Bt=34047,At=36063,Ke=34852,vt=3553,Lt=34067,tn=34069,dn=33984,hn=6408,Wn=5126,Gn=5121,wi=36160,Ci=36053,Xi=36064,Nr=16384,yr=function(mt,Qt){var Cn=1;Qt.ext_texture_filter_anisotropic&&(Cn=mt.getParameter(Bt));var hi=1,Ei=1;Qt.webgl_draw_buffers&&(hi=mt.getParameter(Ke),Ei=mt.getParameter(At));var di=!!Qt.oes_texture_float;if(di){var mi=mt.createTexture();mt.bindTexture(vt,mi),mt.texImage2D(vt,0,hn,1,1,0,hn,Wn,null);var Wi=mt.createFramebuffer();if(mt.bindFramebuffer(wi,Wi),mt.framebufferTexture2D(wi,Xi,vt,mi,0),mt.bindTexture(vt,null),mt.checkFramebufferStatus(wi)!==Ci)di=!1;else{mt.viewport(0,0,1,1),mt.clearColor(1,0,0,1),mt.clear(Nr);var Vi=Vt.allocType(Wn,4);mt.readPixels(0,0,1,1,hn,Wn,Vi),mt.getError()?di=!1:(mt.deleteFramebuffer(Wi),mt.deleteTexture(mi),di=Vi[0]===1),Vt.freeType(Vi)}}var Ki=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),zi=!0;if(!Ki){var Qi=mt.createTexture(),ir=Vt.allocType(Gn,36);mt.activeTexture(dn),mt.bindTexture(Lt,Qi),mt.texImage2D(tn,0,hn,3,3,0,hn,Gn,ir),Vt.freeType(ir),mt.bindTexture(Lt,null),mt.deleteTexture(Qi),zi=!mt.getError()}return{colorBits:[mt.getParameter(Sn),mt.getParameter(Bn),mt.getParameter(mn),mt.getParameter(Jt)],depthBits:mt.getParameter(En),stencilBits:mt.getParameter($t),subpixelBits:mt.getParameter(vn),extensions:Object.keys(Qt).filter(function(Oi){return!!Qt[Oi]}),maxAnisotropic:Cn,maxDrawbuffers:hi,maxColorAttachments:Ei,pointSizeDims:mt.getParameter(sn),lineWidthDims:mt.getParameter(Tn),maxViewportDims:mt.getParameter(oi),maxCombinedTextureUnits:mt.getParameter(Lr),maxCubeMapSize:mt.getParameter(Ro),maxRenderbufferSize:mt.getParameter(to),maxTextureUnits:mt.getParameter(Fr),maxTextureSize:mt.getParameter(ri),maxAttributes:mt.getParameter(On),maxVertexUniforms:mt.getParameter(Qn),maxVertexTextureUnits:mt.getParameter(Dr),maxVaryingVectors:mt.getParameter(Yi),maxFragmentUniforms:mt.getParameter(Sr),glsl:mt.getParameter(bt),renderer:mt.getParameter(dr),vendor:mt.getParameter(no),version:mt.getParameter(kn),readFloat:di,npotTextureCube:zi}};function Xr(mt){return!!mt&&typeof mt=="object"&&Array.isArray(mt.shape)&&Array.isArray(mt.stride)&&typeof mt.offset=="number"&&mt.shape.length===mt.stride.length&&(Array.isArray(mt.data)||me(mt.data))}var Jr=function(mt){return Object.keys(mt).map(function(Qt){return mt[Qt]})},$o={shape:Mr,flatten:Br};function ms(mt,Qt,Cn){for(var hi=0;hi<Qt;++hi)Cn[hi]=mt[hi]}function cs(mt,Qt,Cn,hi){for(var Ei=0,di=0;di<Qt;++di)for(var mi=mt[di],Wi=0;Wi<Cn;++Wi)hi[Ei++]=mi[Wi]}function nr(mt,Qt,Cn,hi,Ei,di){for(var mi=di,Wi=0;Wi<Qt;++Wi)for(var Vi=mt[Wi],Ki=0;Ki<Cn;++Ki)for(var zi=Vi[Ki],Qi=0;Qi<hi;++Qi)Ei[mi++]=zi[Qi]}function tr(mt,Qt,Cn,hi,Ei){for(var di=1,mi=Cn+1;mi<Qt.length;++mi)di*=Qt[mi];var Wi=Qt[Cn];if(Qt.length-Cn==4){var Vi=Qt[Cn+1],Ki=Qt[Cn+2],zi=Qt[Cn+3];for(mi=0;mi<Wi;++mi)nr(mt[mi],Vi,Ki,zi,hi,Ei),Ei+=di}else for(mi=0;mi<Wi;++mi)tr(mt[mi],Qt,Cn+1,hi,Ei),Ei+=di}function Br(mt,Qt,Cn,hi){var Ei=1;if(Qt.length)for(var di=0;di<Qt.length;++di)Ei*=Qt[di];else Ei=0;var mi=hi||Vt.allocType(Cn,Ei);switch(Qt.length){case 0:break;case 1:ms(mt,Qt[0],mi);break;case 2:cs(mt,Qt[0],Qt[1],mi);break;case 3:nr(mt,Qt[0],Qt[1],Qt[2],mi,0);break;default:tr(mt,Qt,0,mi,0)}return mi}function Mr(mt){for(var Qt=[],Cn=mt;Cn.length;Cn=Cn[0])Qt.push(Cn.length);return Qt}var so={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},jr=5120,No=5122,ko=5124,li=5121,tt=5123,St=5125,Pt=5126,Yt=5126,en={int8:jr,int16:No,int32:ko,uint8:li,uint16:tt,uint32:St,float:Pt,float32:Yt},Ct=35048,J=35040,Ae={dynamic:Ct,stream:J,static:35044},ot=$o.flatten,Ee=$o.shape,m=35044,V=35040,G=5121,ce=5126,ve=[];ve[5120]=1,ve[5122]=2,ve[5124]=4,ve[5121]=1,ve[5123]=2,ve[5125]=4,ve[5126]=4;function De(mt){return so[Object.prototype.toString.call(mt)]|0}function ct(mt,Qt){for(var Cn=0;Cn<Qt.length;++Cn)mt[Cn]=Qt[Cn]}function lt(mt,Qt,Cn,hi,Ei,di,mi){for(var Wi=0,Vi=0;Vi<Cn;++Vi)for(var Ki=0;Ki<hi;++Ki)mt[Wi++]=Qt[Ei*Vi+di*Ki+mi]}function Nt(mt,Qt,Cn,hi){var Ei=0,di={};function mi(Yn){this.id=Ei++,this.buffer=mt.createBuffer(),this.type=Yn,this.usage=m,this.byteLength=0,this.dimension=1,this.dtype=G,this.persistentData=null,Cn.profile&&(this.stats={size:0})}mi.prototype.bind=function(){mt.bindBuffer(this.type,this.buffer)},mi.prototype.destroy=function(){ir(this)};var Wi=[];function Vi(Yn,fi){var $i=Wi.pop();return $i||($i=new mi(Yn)),$i.bind(),Qi($i,fi,V,0,1,!1),$i}function Ki(Yn){Wi.push(Yn)}function zi(Yn,fi,$i){Yn.byteLength=fi.byteLength,mt.bufferData(Yn.type,fi,$i)}function Qi(Yn,fi,$i,ar,Mi,sr){var Ni;if(Yn.usage=$i,Array.isArray(fi)){if(Yn.dtype=ar||ce,fi.length>0){var qi;if(Array.isArray(fi[0])){Ni=Ee(fi);for(var Ri=1,Ui=1;Ui<Ni.length;++Ui)Ri*=Ni[Ui];Yn.dimension=Ri,qi=ot(fi,Ni,Yn.dtype),zi(Yn,qi,$i),sr?Yn.persistentData=qi:Vt.freeType(qi)}else if(typeof fi[0]=="number"){Yn.dimension=Mi;var Vr=Vt.allocType(Yn.dtype,fi.length);ct(Vr,fi),zi(Yn,Vr,$i),sr?Yn.persistentData=Vr:Vt.freeType(Vr)}else me(fi[0])?(Yn.dimension=fi[0].length,Yn.dtype=ar||De(fi[0])||ce,qi=ot(fi,[fi.length,fi[0].length],Yn.dtype),zi(Yn,qi,$i),sr?Yn.persistentData=qi:Vt.freeType(qi)):be.raise("invalid buffer data")}}else if(me(fi))Yn.dtype=ar||De(fi),Yn.dimension=Mi,zi(Yn,fi,$i),sr&&(Yn.persistentData=new Uint8Array(new Uint8Array(fi.buffer)));else if(Xr(fi)){Ni=fi.shape;var co=fi.stride,rr=fi.offset,ki=0,Ti=0,Yr=0,Eo=0;Ni.length===1?(ki=Ni[0],Ti=1,Yr=co[0],Eo=0):Ni.length===2?(ki=Ni[0],Ti=Ni[1],Yr=co[0],Eo=co[1]):be.raise("invalid shape"),Yn.dtype=ar||De(fi.data)||ce,Yn.dimension=Ti;var br=Vt.allocType(Yn.dtype,ki*Ti);lt(br,fi.data,ki,Ti,Yr,Eo,rr),zi(Yn,br,$i),sr?Yn.persistentData=br:Vt.freeType(br)}else fi instanceof ArrayBuffer?(Yn.dtype=G,Yn.dimension=Mi,zi(Yn,fi,$i),sr&&(Yn.persistentData=new Uint8Array(new Uint8Array(fi)))):be.raise("invalid buffer data")}function ir(Yn){Qt.bufferCount--,hi(Yn);var fi=Yn.buffer;be(fi,"buffer must not be deleted already"),mt.deleteBuffer(fi),Yn.buffer=null,delete di[Yn.id]}function Oi(Yn,fi,$i,ar){Qt.bufferCount++;var Mi=new mi(fi);di[Mi.id]=Mi;function sr(Ri){var Ui=m,Vr=null,co=0,rr=0,ki=1;return Array.isArray(Ri)||me(Ri)||Xr(Ri)||Ri instanceof ArrayBuffer?Vr=Ri:typeof Ri=="number"?co=Ri|0:Ri&&(be.type(Ri,"object","buffer arguments must be an object, a number or an array"),"data"in Ri&&(be(Vr===null||Array.isArray(Vr)||me(Vr)||Xr(Vr),"invalid data for buffer"),Vr=Ri.data),"usage"in Ri&&(be.parameter(Ri.usage,Ae,"invalid buffer usage"),Ui=Ae[Ri.usage]),"type"in Ri&&(be.parameter(Ri.type,en,"invalid buffer type"),rr=en[Ri.type]),"dimension"in Ri&&(be.type(Ri.dimension,"number","invalid dimension"),ki=Ri.dimension|0),"length"in Ri&&(be.nni(co,"buffer length must be a nonnegative integer"),co=Ri.length|0)),Mi.bind(),Vr?Qi(Mi,Vr,Ui,rr,ki,ar):(co&&mt.bufferData(Mi.type,co,Ui),Mi.dtype=rr||G,Mi.usage=Ui,Mi.dimension=ki,Mi.byteLength=co),Cn.profile&&(Mi.stats.size=Mi.byteLength*ve[Mi.dtype]),sr}function Ni(Ri,Ui){be(Ui+Ri.byteLength<=Mi.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ri.byteLength+" starting from offset "+Ui+" to a buffer of size "+Mi.byteLength),mt.bufferSubData(Mi.type,Ui,Ri)}function qi(Ri,Ui){var Vr=(Ui||0)|0,co;if(Mi.bind(),me(Ri)||Ri instanceof ArrayBuffer)Ni(Ri,Vr);else if(Array.isArray(Ri)){if(Ri.length>0)if(typeof Ri[0]=="number"){var rr=Vt.allocType(Mi.dtype,Ri.length);ct(rr,Ri),Ni(rr,Vr),Vt.freeType(rr)}else if(Array.isArray(Ri[0])||me(Ri[0])){co=Ee(Ri);var ki=ot(Ri,co,Mi.dtype);Ni(ki,Vr),Vt.freeType(ki)}else be.raise("invalid buffer data")}else if(Xr(Ri)){co=Ri.shape;var Ti=Ri.stride,Yr=0,Eo=0,br=0,Fo=0;co.length===1?(Yr=co[0],Eo=1,br=Ti[0],Fo=0):co.length===2?(Yr=co[0],Eo=co[1],br=Ti[0],Fo=Ti[1]):be.raise("invalid shape");var uo=Array.isArray(Ri.data)?Mi.dtype:De(Ri.data),vo=Vt.allocType(uo,Yr*Eo);lt(vo,Ri.data,Yr,Eo,br,Fo,Ri.offset),Ni(vo,Vr),Vt.freeType(vo)}else be.raise("invalid data for buffer subdata");return sr}return $i||sr(Yn),sr._reglType="buffer",sr._buffer=Mi,sr.subdata=qi,Cn.profile&&(sr.stats=Mi.stats),sr.destroy=function(){ir(Mi)},sr}function Zi(){Jr(di).forEach(function(Yn){Yn.buffer=mt.createBuffer(),mt.bindBuffer(Yn.type,Yn.buffer),mt.bufferData(Yn.type,Yn.persistentData||Yn.byteLength,Yn.usage)})}return Cn.profile&&(Qt.getTotalBufferSize=function(){var Yn=0;return Object.keys(di).forEach(function(fi){Yn+=di[fi].stats.size}),Yn}),{create:Oi,createStream:Vi,destroyStream:Ki,clear:function(){Jr(di).forEach(ir),Wi.forEach(ir)},getBuffer:function(Yn){return Yn&&Yn._buffer instanceof mi?Yn._buffer:null},restore:Zi,_initBuffer:Qi}}var It=0,Ft=0,jt=1,bn=1,Zn=4,Xn=4,gi={points:It,point:Ft,lines:jt,line:bn,triangles:Zn,triangle:Xn,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ji=0,vr=1,Un=4,fn=5120,Vo=5121,jo=5122,Uo=5123,qs=5124,ss=5125,va=34963,ps=35040,wo=35044;function Ss(mt,Qt,Cn,hi){var Ei={},di=0,mi={uint8:Vo,uint16:Uo};Qt.oes_element_index_uint&&(mi.uint32=ss);function Wi(Zi){this.id=di++,Ei[this.id]=this,this.buffer=Zi,this.primType=Un,this.vertCount=0,this.type=0}Wi.prototype.bind=function(){this.buffer.bind()};var Vi=[];function Ki(Zi){var Yn=Vi.pop();return Yn||(Yn=new Wi(Cn.create(null,va,!0,!1)._buffer)),Qi(Yn,Zi,ps,-1,-1,0,0),Yn}function zi(Zi){Vi.push(Zi)}function Qi(Zi,Yn,fi,$i,ar,Mi,sr){Zi.buffer.bind();var Ni;if(Yn){var qi=sr;!sr&&(!me(Yn)||Xr(Yn)&&!me(Yn.data))&&(qi=Qt.oes_element_index_uint?ss:Uo),Cn._initBuffer(Zi.buffer,Yn,fi,qi,3)}else mt.bufferData(va,Mi,fi),Zi.buffer.dtype=Ni||Vo,Zi.buffer.usage=fi,Zi.buffer.dimension=3,Zi.buffer.byteLength=Mi;if(Ni=sr,!sr){switch(Zi.buffer.dtype){case Vo:case fn:Ni=Vo;break;case Uo:case jo:Ni=Uo;break;case ss:case qs:Ni=ss;break;default:be.raise("unsupported type for element array")}Zi.buffer.dtype=Ni}Zi.type=Ni,be(Ni!==ss||!!Qt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ri=ar;Ri<0&&(Ri=Zi.buffer.byteLength,Ni===Uo?Ri>>=1:Ni===ss&&(Ri>>=2)),Zi.vertCount=Ri;var Ui=$i;if($i<0){Ui=Un;var Vr=Zi.buffer.dimension;Vr===1&&(Ui=ji),Vr===2&&(Ui=vr),Vr===3&&(Ui=Un)}Zi.primType=Ui}function ir(Zi){hi.elementsCount--,be(Zi.buffer!==null,"must not double destroy elements"),delete Ei[Zi.id],Zi.buffer.destroy(),Zi.buffer=null}function Oi(Zi,Yn){var fi=Cn.create(null,va,!0),$i=new Wi(fi._buffer);hi.elementsCount++;function ar(Mi){if(!Mi)fi(),$i.primType=Un,$i.vertCount=0,$i.type=Vo;else if(typeof Mi=="number")fi(Mi),$i.primType=Un,$i.vertCount=Mi|0,$i.type=Vo;else{var sr=null,Ni=wo,qi=-1,Ri=-1,Ui=0,Vr=0;Array.isArray(Mi)||me(Mi)||Xr(Mi)?sr=Mi:(be.type(Mi,"object","invalid arguments for elements"),"data"in Mi&&(sr=Mi.data,be(Array.isArray(sr)||me(sr)||Xr(sr),"invalid data for element buffer")),"usage"in Mi&&(be.parameter(Mi.usage,Ae,"invalid element buffer usage"),Ni=Ae[Mi.usage]),"primitive"in Mi&&(be.parameter(Mi.primitive,gi,"invalid element buffer primitive"),qi=gi[Mi.primitive]),"count"in Mi&&(be(typeof Mi.count=="number"&&Mi.count>=0,"invalid vertex count for elements"),Ri=Mi.count|0),"type"in Mi&&(be.parameter(Mi.type,mi,"invalid buffer type"),Vr=mi[Mi.type]),"length"in Mi?Ui=Mi.length|0:(Ui=Ri,Vr===Uo||Vr===jo?Ui*=2:(Vr===ss||Vr===qs)&&(Ui*=4))),Qi($i,sr,Ni,qi,Ri,Ui,Vr)}return ar}return ar(Zi),ar._reglType="elements",ar._elements=$i,ar.subdata=function(Mi,sr){return fi.subdata(Mi,sr),ar},ar.destroy=function(){ir($i)},ar}return{create:Oi,createStream:Ki,destroyStream:zi,getElements:function(Zi){return typeof Zi=="function"&&Zi._elements instanceof Wi?Zi._elements:null},clear:function(){Jr(Ei).forEach(ir)}}}var ts=new Float32Array(1),gr=new Uint32Array(ts.buffer),ns=5123;function xr(mt){for(var Qt=Vt.allocType(ns,mt.length),Cn=0;Cn<mt.length;++Cn)if(isNaN(mt[Cn]))Qt[Cn]=65535;else if(mt[Cn]===Infinity)Qt[Cn]=31744;else if(mt[Cn]===-Infinity)Qt[Cn]=64512;else{ts[0]=mt[Cn];var hi=gr[0],Ei=hi>>>31<<15,di=(hi<<1>>>24)-127,mi=hi>>13&(1<<10)-1;if(di<-24)Qt[Cn]=Ei;else if(di<-14){var Wi=-14-di;Qt[Cn]=Ei+(mi+(1<<10)>>Wi)}else di>15?Qt[Cn]=Ei+31744:Qt[Cn]=Ei+(di+15<<10)+mi}return Qt}function Jn(mt){return Array.isArray(mt)||me(mt)}var hr=function(mt){return!(mt&mt-1)&&!!mt},Pr=34467,Po=3553,Cs=34067,Ns=34069,as=6408,is=6406,Xs=6407,hl=6409,za=6410,fc=32854,xl=32855,fl=36194,ed=32819,Su=32820,js=33635,eu=34042,_a=6402,gl=34041,ea=35904,jl=35906,sa=36193,ml=33776,pl=33777,el=33778,vl=33779,Rc=35986,tu=35987,Eu=34798,td=35840,Za=35841,Pc=35842,Oc=35843,nu=36196,Il=5121,kc=5123,Kl=5125,ta=5126,Pa=10242,Wr=10243,Oa=10497,Ca=33071,na=33648,ia=10240,Lu=10241,$l=9728,os=9729,So=9984,zo=9985,bs=9986,Ws=9987,aa=33170,ks=4352,tl=4353,Nl=4354,ra=34046,dh=3317,hh=37440,nd=37441,qh=37443,Zo=37444,Fc=33984,iu=[So,bs,zo,Ws],_l=[0,hl,za,Xs,as],ba={};ba[hl]=ba[is]=ba[_a]=1,ba[gl]=ba[za]=2,ba[Xs]=ba[ea]=3,ba[as]=ba[jl]=4;function Tl(mt){return"[object "+mt+"]"}var id=Tl("HTMLCanvasElement"),ru=Tl("OffscreenCanvas"),Du=Tl("CanvasRenderingContext2D"),xa=Tl("ImageBitmap"),rd=Tl("HTMLImageElement"),nl=Tl("HTMLVideoElement"),fh=Object.keys(so).concat([id,ru,Du,xa,rd,nl]),Zl=[];Zl[Il]=1,Zl[ta]=4,Zl[sa]=2,Zl[kc]=2,Zl[Kl]=4;var Ys=[];Ys[fc]=2,Ys[xl]=2,Ys[fl]=2,Ys[gl]=4,Ys[ml]=.5,Ys[pl]=.5,Ys[el]=1,Ys[vl]=1,Ys[Rc]=.5,Ys[tu]=1,Ys[Eu]=1,Ys[td]=.5,Ys[Za]=.25,Ys[Pc]=.5,Ys[Oc]=.25,Ys[nu]=.5;function gc(mt){return Array.isArray(mt)&&(mt.length===0||typeof mt[0]=="number")}function xu(mt){if(!Array.isArray(mt))return!1;var Qt=mt.length;return!(Qt===0||!Jn(mt[0]))}function Ml(mt){return Object.prototype.toString.call(mt)}function ou(mt){return Ml(mt)===id}function su(mt){return Ml(mt)===ru}function Od(mt){return Ml(mt)===Du}function gh(mt){return Ml(mt)===xa}function kd(mt){return Ml(mt)===rd}function Iu(mt){return Ml(mt)===nl}function Al(mt){if(!mt)return!1;var Qt=Ml(mt);return fh.indexOf(Qt)>=0?!0:gc(mt)||xu(mt)||Xr(mt)}function au(mt){return so[Object.prototype.toString.call(mt)]|0}function mc(mt,Qt){var Cn=Qt.length;switch(mt.type){case Il:case kc:case Kl:case ta:var hi=Vt.allocType(mt.type,Cn);hi.set(Qt),mt.data=hi;break;case sa:mt.data=xr(Qt);break;default:be.raise("unsupported texture type, must specify a typed array")}}function ef(mt,Qt){return Vt.allocType(mt.type===sa?ta:mt.type,Qt)}function la(mt,Qt){mt.type===sa?(mt.data=xr(Qt),Vt.freeType(Qt)):mt.data=Qt}function Cl(mt,Qt,Cn,hi,Ei,di){for(var mi=mt.width,Wi=mt.height,Vi=mt.channels,Ki=mi*Wi*Vi,zi=ef(mt,Ki),Qi=0,ir=0;ir<Wi;++ir)for(var Oi=0;Oi<mi;++Oi)for(var Zi=0;Zi<Vi;++Zi)zi[Qi++]=Qt[Cn*Oi+hi*ir+Ei*Zi+di];la(mt,zi)}function Nu(mt,Qt,Cn,hi,Ei,di){var mi;if(typeof Ys[mt]!="undefined"?mi=Ys[mt]:mi=ba[mt]*Zl[Qt],di&&(mi*=6),Ei){for(var Wi=0,Vi=Cn;Vi>=1;)Wi+=mi*Vi*Vi,Vi/=2;return Wi}else return mi*Cn*hi}function Xl(mt,Qt,Cn,hi,Ei,di,mi){var Wi={"don't care":ks,"dont care":ks,nice:Nl,fast:tl},Vi={repeat:Oa,clamp:Ca,mirror:na},Ki={nearest:$l,linear:os},zi=a({mipmap:Ws,"nearest mipmap nearest":So,"linear mipmap nearest":zo,"nearest mipmap linear":bs,"linear mipmap linear":Ws},Ki),Qi={none:0,browser:Zo},ir={uint8:Il,rgba4:ed,rgb565:js,"rgb5 a1":Su},Oi={alpha:is,luminance:hl,"luminance alpha":za,rgb:Xs,rgba:as,rgba4:fc,"rgb5 a1":xl,rgb565:fl},Zi={};Qt.ext_srgb&&(Oi.srgb=ea,Oi.srgba=jl),Qt.oes_texture_float&&(ir.float32=ir.float=ta),Qt.oes_texture_half_float&&(ir.float16=ir["half float"]=sa),Qt.webgl_depth_texture&&(a(Oi,{depth:_a,"depth stencil":gl}),a(ir,{uint16:kc,uint32:Kl,"depth stencil":eu})),Qt.webgl_compressed_texture_s3tc&&a(Zi,{"rgb s3tc dxt1":ml,"rgba s3tc dxt1":pl,"rgba s3tc dxt3":el,"rgba s3tc dxt5":vl}),Qt.webgl_compressed_texture_atc&&a(Zi,{"rgb atc":Rc,"rgba atc explicit alpha":tu,"rgba atc interpolated alpha":Eu}),Qt.webgl_compressed_texture_pvrtc&&a(Zi,{"rgb pvrtc 4bppv1":td,"rgb pvrtc 2bppv1":Za,"rgba pvrtc 4bppv1":Pc,"rgba pvrtc 2bppv1":Oc}),Qt.webgl_compressed_texture_etc1&&(Zi["rgb etc1"]=nu);var Yn=Array.prototype.slice.call(mt.getParameter(Pr));Object.keys(Zi).forEach(function(gn){var ai=Zi[gn];Yn.indexOf(ai)>=0&&(Oi[gn]=ai)});var fi=Object.keys(Oi);Cn.textureFormats=fi;var $i=[];Object.keys(Oi).forEach(function(gn){var ai=Oi[gn];$i[ai]=gn});var ar=[];Object.keys(ir).forEach(function(gn){var ai=ir[gn];ar[ai]=gn});var Mi=[];Object.keys(Ki).forEach(function(gn){var ai=Ki[gn];Mi[ai]=gn});var sr=[];Object.keys(zi).forEach(function(gn){var ai=zi[gn];sr[ai]=gn});var Ni=[];Object.keys(Vi).forEach(function(gn){var ai=Vi[gn];Ni[ai]=gn});var qi=fi.reduce(function(gn,ai){var ci=Oi[ai];return ci===hl||ci===is||ci===hl||ci===za||ci===_a||ci===gl||Qt.ext_srgb&&(ci===ea||ci===jl)?gn[ci]=ci:ci===xl||ai.indexOf("rgba")>=0?gn[ci]=as:gn[ci]=Xs,gn},{});function Ri(){this.internalformat=as,this.format=as,this.type=Il,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zo,this.width=0,this.height=0,this.channels=0}function Ui(gn,ai){gn.internalformat=ai.internalformat,gn.format=ai.format,gn.type=ai.type,gn.compressed=ai.compressed,gn.premultiplyAlpha=ai.premultiplyAlpha,gn.flipY=ai.flipY,gn.unpackAlignment=ai.unpackAlignment,gn.colorSpace=ai.colorSpace,gn.width=ai.width,gn.height=ai.height,gn.channels=ai.channels}function Vr(gn,ai){if(!(typeof ai!="object"||!ai)){if("premultiplyAlpha"in ai&&(be.type(ai.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),gn.premultiplyAlpha=ai.premultiplyAlpha),"flipY"in ai&&(be.type(ai.flipY,"boolean","invalid texture flip"),gn.flipY=ai.flipY),"alignment"in ai&&(be.oneOf(ai.alignment,[1,2,4,8],"invalid texture unpack alignment"),gn.unpackAlignment=ai.alignment),"colorSpace"in ai&&(be.parameter(ai.colorSpace,Qi,"invalid colorSpace"),gn.colorSpace=Qi[ai.colorSpace]),"type"in ai){var ci=ai.type;be(Qt.oes_texture_float||!(ci==="float"||ci==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),be(Qt.oes_texture_half_float||!(ci==="half float"||ci==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),be(Qt.webgl_depth_texture||!(ci==="uint16"||ci==="uint32"||ci==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),be.parameter(ci,ir,"invalid texture type"),gn.type=ir[ci]}var pr=gn.width,bo=gn.height,ln=gn.channels,Gt=!1;"shape"in ai?(be(Array.isArray(ai.shape)&&ai.shape.length>=2,"shape must be an array"),pr=ai.shape[0],bo=ai.shape[1],ai.shape.length===3&&(ln=ai.shape[2],be(ln>0&&ln<=4,"invalid number of channels"),Gt=!0),be(pr>=0&&pr<=Cn.maxTextureSize,"invalid width"),be(bo>=0&&bo<=Cn.maxTextureSize,"invalid height")):("radius"in ai&&(pr=bo=ai.radius,be(pr>=0&&pr<=Cn.maxTextureSize,"invalid radius")),"width"in ai&&(pr=ai.width,be(pr>=0&&pr<=Cn.maxTextureSize,"invalid width")),"height"in ai&&(bo=ai.height,be(bo>=0&&bo<=Cn.maxTextureSize,"invalid height")),"channels"in ai&&(ln=ai.channels,be(ln>0&&ln<=4,"invalid number of channels"),Gt=!0)),gn.width=pr|0,gn.height=bo|0,gn.channels=ln|0;var Dn=!1;if("format"in ai){var Pn=ai.format;be(Qt.webgl_depth_texture||!(Pn==="depth"||Pn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),be.parameter(Pn,Oi,"invalid texture format");var qn=gn.internalformat=Oi[Pn];gn.format=qi[qn],Pn in ir&&("type"in ai||(gn.type=ir[Pn])),Pn in Zi&&(gn.compressed=!0),Dn=!0}!Gt&&Dn?gn.channels=ba[gn.format]:Gt&&!Dn?gn.channels!==_l[gn.format]&&(gn.format=gn.internalformat=_l[gn.channels]):Dn&&Gt&&be(gn.channels===ba[gn.format],"number of channels inconsistent with specified format")}}function co(gn){mt.pixelStorei(hh,gn.flipY),mt.pixelStorei(nd,gn.premultiplyAlpha),mt.pixelStorei(qh,gn.colorSpace),mt.pixelStorei(dh,gn.unpackAlignment)}function rr(){Ri.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ki(gn,ai){var ci=null;if(Al(ai)?ci=ai:ai&&(be.type(ai,"object","invalid pixel data type"),Vr(gn,ai),"x"in ai&&(gn.xOffset=ai.x|0),"y"in ai&&(gn.yOffset=ai.y|0),Al(ai.data)&&(ci=ai.data)),be(!gn.compressed||ci instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ai.copy){be(!ci,"can not specify copy and data field for the same texture");var pr=Ei.viewportWidth,bo=Ei.viewportHeight;gn.width=gn.width||pr-gn.xOffset,gn.height=gn.height||bo-gn.yOffset,gn.needsCopy=!0,be(gn.xOffset>=0&&gn.xOffset<pr&&gn.yOffset>=0&&gn.yOffset<bo&&gn.width>0&&gn.width<=pr&&gn.height>0&&gn.height<=bo,"copy texture read out of bounds")}else if(!ci)gn.width=gn.width||1,gn.height=gn.height||1,gn.channels=gn.channels||4;else if(me(ci))gn.channels=gn.channels||4,gn.data=ci,!("type"in ai)&&gn.type===Il&&(gn.type=au(ci));else if(gc(ci))gn.channels=gn.channels||4,mc(gn,ci),gn.alignment=1,gn.needsFree=!0;else if(Xr(ci)){var ln=ci.data;!Array.isArray(ln)&&gn.type===Il&&(gn.type=au(ln));var Gt=ci.shape,Dn=ci.stride,Pn,qn,In,yn,zn,cn;Gt.length===3?(In=Gt[2],cn=Dn[2]):(be(Gt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),In=1,cn=1),Pn=Gt[0],qn=Gt[1],yn=Dn[0],zn=Dn[1],gn.alignment=1,gn.width=Pn,gn.height=qn,gn.channels=In,gn.format=gn.internalformat=_l[In],gn.needsFree=!0,Cl(gn,ln,yn,zn,cn,ci.offset)}else if(ou(ci)||su(ci)||Od(ci))ou(ci)||su(ci)?gn.element=ci:gn.element=ci.canvas,gn.width=gn.element.width,gn.height=gn.element.height,gn.channels=4;else if(gh(ci))gn.element=ci,gn.width=ci.width,gn.height=ci.height,gn.channels=4;else if(kd(ci))gn.element=ci,gn.width=ci.naturalWidth,gn.height=ci.naturalHeight,gn.channels=4;else if(Iu(ci))gn.element=ci,gn.width=ci.videoWidth,gn.height=ci.videoHeight,gn.channels=4;else if(xu(ci)){var Ln=gn.width||ci[0].length,nn=gn.height||ci.length,Kn=gn.channels;Jn(ci[0][0])?Kn=Kn||ci[0][0].length:Kn=Kn||1;for(var ni=$o.shape(ci),bi=1,Si=0;Si<ni.length;++Si)bi*=ni[Si];var pi=ef(gn,bi);$o.flatten(ci,ni,"",pi),la(gn,pi),gn.alignment=1,gn.width=Ln,gn.height=nn,gn.channels=Kn,gn.format=gn.internalformat=_l[Kn],gn.needsFree=!0}gn.type===ta?be(Cn.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):gn.type===sa&&be(Cn.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ti(gn,ai,ci){var pr=gn.element,bo=gn.data,ln=gn.internalformat,Gt=gn.format,Dn=gn.type,Pn=gn.width,qn=gn.height;co(gn),pr?mt.texImage2D(ai,ci,Gt,Gt,Dn,pr):gn.compressed?mt.compressedTexImage2D(ai,ci,ln,Pn,qn,0,bo):gn.needsCopy?(hi(),mt.copyTexImage2D(ai,ci,Gt,gn.xOffset,gn.yOffset,Pn,qn,0)):mt.texImage2D(ai,ci,Gt,Pn,qn,0,Gt,Dn,bo||null)}function Yr(gn,ai,ci,pr,bo){var ln=gn.element,Gt=gn.data,Dn=gn.internalformat,Pn=gn.format,qn=gn.type,In=gn.width,yn=gn.height;co(gn),ln?mt.texSubImage2D(ai,bo,ci,pr,Pn,qn,ln):gn.compressed?mt.compressedTexSubImage2D(ai,bo,ci,pr,Dn,In,yn,Gt):gn.needsCopy?(hi(),mt.copyTexSubImage2D(ai,bo,ci,pr,gn.xOffset,gn.yOffset,In,yn)):mt.texSubImage2D(ai,bo,ci,pr,In,yn,Pn,qn,Gt)}var Eo=[];function br(){return Eo.pop()||new rr}function Fo(gn){gn.needsFree&&Vt.freeType(gn.data),rr.call(gn),Eo.push(gn)}function uo(){Ri.call(this),this.genMipmaps=!1,this.mipmapHint=ks,this.mipmask=0,this.images=Array(16)}function vo(gn,ai,ci){var pr=gn.images[0]=br();gn.mipmask=1,pr.width=gn.width=ai,pr.height=gn.height=ci,pr.channels=gn.channels=4}function Qo(gn,ai){var ci=null;if(Al(ai))ci=gn.images[0]=br(),Ui(ci,gn),ki(ci,ai),gn.mipmask=1;else if(Vr(gn,ai),Array.isArray(ai.mipmap))for(var pr=ai.mipmap,bo=0;bo<pr.length;++bo)ci=gn.images[bo]=br(),Ui(ci,gn),ci.width>>=bo,ci.height>>=bo,ki(ci,pr[bo]),gn.mipmask|=1<<bo;else ci=gn.images[0]=br(),Ui(ci,gn),ki(ci,ai),gn.mipmask=1;Ui(gn,gn.images[0]),gn.compressed&&(gn.internalformat===ml||gn.internalformat===pl||gn.internalformat===el||gn.internalformat===vl)&&be(gn.width%4==0&&gn.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Rs(gn,ai){for(var ci=gn.images,pr=0;pr<ci.length;++pr){if(!ci[pr])return;Ti(ci[pr],ai,pr)}}var ha=[];function Go(){var gn=ha.pop()||new uo;Ri.call(gn),gn.mipmask=0;for(var ai=0;ai<16;++ai)gn.images[ai]=null;return gn}function Us(gn){for(var ai=gn.images,ci=0;ci<ai.length;++ci)ai[ci]&&Fo(ai[ci]),ai[ci]=null;ha.push(gn)}function vs(){this.minFilter=$l,this.magFilter=$l,this.wrapS=Ca,this.wrapT=Ca,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ks}function Ps(gn,ai){if("min"in ai){var ci=ai.min;be.parameter(ci,zi),gn.minFilter=zi[ci],iu.indexOf(gn.minFilter)>=0&&!("faces"in ai)&&(gn.genMipmaps=!0)}if("mag"in ai){var pr=ai.mag;be.parameter(pr,Ki),gn.magFilter=Ki[pr]}var bo=gn.wrapS,ln=gn.wrapT;if("wrap"in ai){var Gt=ai.wrap;typeof Gt=="string"?(be.parameter(Gt,Vi),bo=ln=Vi[Gt]):Array.isArray(Gt)&&(be.parameter(Gt[0],Vi),be.parameter(Gt[1],Vi),bo=Vi[Gt[0]],ln=Vi[Gt[1]])}else{if("wrapS"in ai){var Dn=ai.wrapS;be.parameter(Dn,Vi),bo=Vi[Dn]}if("wrapT"in ai){var Pn=ai.wrapT;be.parameter(Pn,Vi),ln=Vi[Pn]}}if(gn.wrapS=bo,gn.wrapT=ln,"anisotropic"in ai){var qn=ai.anisotropic;be(typeof qn=="number"&&qn>=1&&qn<=Cn.maxAnisotropic,"aniso samples must be between 1 and "),gn.anisotropic=ai.anisotropic}if("mipmap"in ai){var In=!1;switch(typeof ai.mipmap){case"string":be.parameter(ai.mipmap,Wi,"invalid mipmap hint"),gn.mipmapHint=Wi[ai.mipmap],gn.genMipmaps=!0,In=!0;break;case"boolean":In=gn.genMipmaps=ai.mipmap;break;case"object":be(Array.isArray(ai.mipmap),"invalid mipmap type"),gn.genMipmaps=!1,In=!0;break;default:be.raise("invalid mipmap type")}In&&!("min"in ai)&&(gn.minFilter=So)}}function Do(gn,ai){mt.texParameteri(ai,Lu,gn.minFilter),mt.texParameteri(ai,ia,gn.magFilter),mt.texParameteri(ai,Pa,gn.wrapS),mt.texParameteri(ai,Wr,gn.wrapT),Qt.ext_texture_filter_anisotropic&&mt.texParameteri(ai,ra,gn.anisotropic),gn.genMipmaps&&(mt.hint(aa,gn.mipmapHint),mt.generateMipmap(ai))}var oa=0,Sa={},fa=Cn.maxTextureUnits,zs=Array(fa).map(function(){return null});function _o(gn){Ri.call(this),this.mipmask=0,this.internalformat=as,this.id=oa++,this.refCount=1,this.target=gn,this.texture=mt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new vs,mi.profile&&(this.stats={size:0})}function Qs(gn){mt.activeTexture(Fc),mt.bindTexture(gn.target,gn.texture)}function Xo(){var gn=zs[0];gn?mt.bindTexture(gn.target,gn.texture):mt.bindTexture(Po,null)}function Zr(gn){var ai=gn.texture;be(ai,"must not double destroy texture");var ci=gn.unit,pr=gn.target;ci>=0&&(mt.activeTexture(Fc+ci),mt.bindTexture(pr,null),zs[ci]=null),mt.deleteTexture(ai),gn.texture=null,gn.params=null,gn.pixels=null,gn.refCount=0,delete Sa[gn.id],di.textureCount--}a(_o.prototype,{bind:function(){var gn=this;gn.bindCount+=1;var ai=gn.unit;if(ai<0){for(var ci=0;ci<fa;++ci){var pr=zs[ci];if(pr){if(pr.bindCount>0)continue;pr.unit=-1}zs[ci]=gn,ai=ci;break}ai>=fa&&be.raise("insufficient number of texture units"),mi.profile&&di.maxTextureUnits<ai+1&&(di.maxTextureUnits=ai+1),gn.unit=ai,mt.activeTexture(Fc+ai),mt.bindTexture(gn.target,gn.texture)}return ai},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Zr(this)}});function Co(gn,ai){var ci=new _o(Po);Sa[ci.id]=ci,di.textureCount++;function pr(Gt,Dn){var Pn=ci.texInfo;vs.call(Pn);var qn=Go();return typeof Gt=="number"?typeof Dn=="number"?vo(qn,Gt|0,Dn|0):vo(qn,Gt|0,Gt|0):Gt?(be.type(Gt,"object","invalid arguments to regl.texture"),Ps(Pn,Gt),Qo(qn,Gt)):vo(qn,1,1),Pn.genMipmaps&&(qn.mipmask=(qn.width<<1)-1),ci.mipmask=qn.mipmask,Ui(ci,qn),be.texture2D(Pn,qn,Cn),ci.internalformat=qn.internalformat,pr.width=qn.width,pr.height=qn.height,Qs(ci),Rs(qn,Po),Do(Pn,Po),Xo(),Us(qn),mi.profile&&(ci.stats.size=Nu(ci.internalformat,ci.type,qn.width,qn.height,Pn.genMipmaps,!1)),pr.format=$i[ci.internalformat],pr.type=ar[ci.type],pr.mag=Mi[Pn.magFilter],pr.min=sr[Pn.minFilter],pr.wrapS=Ni[Pn.wrapS],pr.wrapT=Ni[Pn.wrapT],pr}function bo(Gt,Dn,Pn,qn){be(!!Gt,"must specify image data");var In=Dn|0,yn=Pn|0,zn=qn|0,cn=br();return Ui(cn,ci),cn.width=0,cn.height=0,ki(cn,Gt),cn.width=cn.width||(ci.width>>zn)-In,cn.height=cn.height||(ci.height>>zn)-yn,be(ci.type===cn.type&&ci.format===cn.format&&ci.internalformat===cn.internalformat,"incompatible format for texture.subimage"),be(In>=0&&yn>=0&&In+cn.width<=ci.width&&yn+cn.height<=ci.height,"texture.subimage write out of bounds"),be(ci.mipmask&1<<zn,"missing mipmap data"),be(cn.data||cn.element||cn.needsCopy,"missing image data"),Qs(ci),Yr(cn,Po,In,yn,zn),Xo(),Fo(cn),pr}function ln(Gt,Dn){var Pn=Gt|0,qn=Dn|0||Pn;if(Pn===ci.width&&qn===ci.height)return pr;pr.width=ci.width=Pn,pr.height=ci.height=qn,Qs(ci);for(var In=0;ci.mipmask>>In;++In){var yn=Pn>>In,zn=qn>>In;if(!yn||!zn)break;mt.texImage2D(Po,In,ci.format,yn,zn,0,ci.format,ci.type,null)}return Xo(),mi.profile&&(ci.stats.size=Nu(ci.internalformat,ci.type,Pn,qn,!1,!1)),pr}return pr(gn,ai),pr.subimage=bo,pr.resize=ln,pr._reglType="texture2d",pr._texture=ci,mi.profile&&(pr.stats=ci.stats),pr.destroy=function(){ci.decRef()},pr}function Jo(gn,ai,ci,pr,bo,ln){var Gt=new _o(Cs);Sa[Gt.id]=Gt,di.cubeCount++;var Dn=new Array(6);function Pn(yn,zn,cn,Ln,nn,Kn){var ni,bi=Gt.texInfo;for(vs.call(bi),ni=0;ni<6;++ni)Dn[ni]=Go();if(typeof yn=="number"||!yn){var Si=yn|0||1;for(ni=0;ni<6;++ni)vo(Dn[ni],Si,Si)}else if(typeof yn=="object")if(zn)Qo(Dn[0],yn),Qo(Dn[1],zn),Qo(Dn[2],cn),Qo(Dn[3],Ln),Qo(Dn[4],nn),Qo(Dn[5],Kn);else if(Ps(bi,yn),Vr(Gt,yn),"faces"in yn){var pi=yn.faces;for(be(Array.isArray(pi)&&pi.length===6,"cube faces must be a length 6 array"),ni=0;ni<6;++ni)be(typeof pi[ni]=="object"&&!!pi[ni],"invalid input for cube map face"),Ui(Dn[ni],Gt),Qo(Dn[ni],pi[ni])}else for(ni=0;ni<6;++ni)Qo(Dn[ni],yn);else be.raise("invalid arguments to cube map");for(Ui(Gt,Dn[0]),Cn.npotTextureCube||be(hr(Gt.width)&&hr(Gt.height),"your browser does not support non power or two texture dimensions"),bi.genMipmaps?Gt.mipmask=(Dn[0].width<<1)-1:Gt.mipmask=Dn[0].mipmask,be.textureCube(Gt,bi,Dn,Cn),Gt.internalformat=Dn[0].internalformat,Pn.width=Dn[0].width,Pn.height=Dn[0].height,Qs(Gt),ni=0;ni<6;++ni)Rs(Dn[ni],Ns+ni);for(Do(bi,Cs),Xo(),mi.profile&&(Gt.stats.size=Nu(Gt.internalformat,Gt.type,Pn.width,Pn.height,bi.genMipmaps,!0)),Pn.format=$i[Gt.internalformat],Pn.type=ar[Gt.type],Pn.mag=Mi[bi.magFilter],Pn.min=sr[bi.minFilter],Pn.wrapS=Ni[bi.wrapS],Pn.wrapT=Ni[bi.wrapT],ni=0;ni<6;++ni)Us(Dn[ni]);return Pn}function qn(yn,zn,cn,Ln,nn){be(!!zn,"must specify image data"),be(typeof yn=="number"&&yn===(yn|0)&&yn>=0&&yn<6,"invalid face");var Kn=cn|0,ni=Ln|0,bi=nn|0,Si=br();return Ui(Si,Gt),Si.width=0,Si.height=0,ki(Si,zn),Si.width=Si.width||(Gt.width>>bi)-Kn,Si.height=Si.height||(Gt.height>>bi)-ni,be(Gt.type===Si.type&&Gt.format===Si.format&&Gt.internalformat===Si.internalformat,"incompatible format for texture.subimage"),be(Kn>=0&&ni>=0&&Kn+Si.width<=Gt.width&&ni+Si.height<=Gt.height,"texture.subimage write out of bounds"),be(Gt.mipmask&1<<bi,"missing mipmap data"),be(Si.data||Si.element||Si.needsCopy,"missing image data"),Qs(Gt),Yr(Si,Ns+yn,Kn,ni,bi),Xo(),Fo(Si),Pn}function In(yn){var zn=yn|0;if(zn!==Gt.width){Pn.width=Gt.width=zn,Pn.height=Gt.height=zn,Qs(Gt);for(var cn=0;cn<6;++cn)for(var Ln=0;Gt.mipmask>>Ln;++Ln)mt.texImage2D(Ns+cn,Ln,Gt.format,zn>>Ln,zn>>Ln,0,Gt.format,Gt.type,null);return Xo(),mi.profile&&(Gt.stats.size=Nu(Gt.internalformat,Gt.type,Pn.width,Pn.height,!1,!0)),Pn}}return Pn(gn,ai,ci,pr,bo,ln),Pn.subimage=qn,Pn.resize=In,Pn._reglType="textureCube",Pn._texture=Gt,mi.profile&&(Pn.stats=Gt.stats),Pn.destroy=function(){Gt.decRef()},Pn}function Js(){for(var gn=0;gn<fa;++gn)mt.activeTexture(Fc+gn),mt.bindTexture(Po,null),zs[gn]=null;Jr(Sa).forEach(Zr),di.cubeCount=0,di.textureCount=0}mi.profile&&(di.getTotalTextureSize=function(){var gn=0;return Object.keys(Sa).forEach(function(ai){gn+=Sa[ai].stats.size}),gn});function Ul(){for(var gn=0;gn<fa;++gn){var ai=zs[gn];ai&&(ai.bindCount=0,ai.unit=-1,zs[gn]=null)}Jr(Sa).forEach(function(ci){ci.texture=mt.createTexture(),mt.bindTexture(ci.target,ci.texture);for(var pr=0;pr<32;++pr)if((ci.mipmask&1<<pr)!=0)if(ci.target===Po)mt.texImage2D(Po,pr,ci.internalformat,ci.width>>pr,ci.height>>pr,0,ci.internalformat,ci.type,null);else for(var bo=0;bo<6;++bo)mt.texImage2D(Ns+bo,pr,ci.internalformat,ci.width>>pr,ci.height>>pr,0,ci.internalformat,ci.type,null);Do(ci.texInfo,ci.target)})}function Kc(){for(var gn=0;gn<fa;++gn){var ai=zs[gn];ai&&(ai.bindCount=0,ai.unit=-1,zs[gn]=null),mt.activeTexture(Fc+gn),mt.bindTexture(Po,null),mt.bindTexture(Cs,null)}}return{create2D:Co,createCube:Jo,clear:Js,getTexture:function(gn){return null},restore:Ul,refresh:Kc}}var Ba=36161,Yl=32854,od=32855,Rl=36194,sd=33189,pc=36168,ad=34041,Tu=35907,ld=34836,cd=34842,Fd=34843,il=[];il[Yl]=2,il[od]=2,il[Rl]=2,il[sd]=2,il[pc]=1,il[ad]=4,il[Tu]=4,il[ld]=16,il[cd]=8,il[Fd]=6;function Ia(mt,Qt,Cn){return il[mt]*Qt*Cn}var Na=function(mt,Qt,Cn,hi,Ei){var di={rgba4:Yl,rgb565:Rl,"rgb5 a1":od,depth:sd,stencil:pc,"depth stencil":ad};Qt.ext_srgb&&(di.srgba=Tu),Qt.ext_color_buffer_half_float&&(di.rgba16f=cd,di.rgb16f=Fd),Qt.webgl_color_buffer_float&&(di.rgba32f=ld);var mi=[];Object.keys(di).forEach(function(Oi){var Zi=di[Oi];mi[Zi]=Oi});var Wi=0,Vi={};function Ki(Oi){this.id=Wi++,this.refCount=1,this.renderbuffer=Oi,this.format=Yl,this.width=0,this.height=0,Ei.profile&&(this.stats={size:0})}Ki.prototype.decRef=function(){--this.refCount<=0&&zi(this)};function zi(Oi){var Zi=Oi.renderbuffer;be(Zi,"must not double destroy renderbuffer"),mt.bindRenderbuffer(Ba,null),mt.deleteRenderbuffer(Zi),Oi.renderbuffer=null,Oi.refCount=0,delete Vi[Oi.id],hi.renderbufferCount--}function Qi(Oi,Zi){var Yn=new Ki(mt.createRenderbuffer());Vi[Yn.id]=Yn,hi.renderbufferCount++;function fi(ar,Mi){var sr=0,Ni=0,qi=Yl;if(typeof ar=="object"&&ar){var Ri=ar;if("shape"in Ri){var Ui=Ri.shape;be(Array.isArray(Ui)&&Ui.length>=2,"invalid renderbuffer shape"),sr=Ui[0]|0,Ni=Ui[1]|0}else"radius"in Ri&&(sr=Ni=Ri.radius|0),"width"in Ri&&(sr=Ri.width|0),"height"in Ri&&(Ni=Ri.height|0);"format"in Ri&&(be.parameter(Ri.format,di,"invalid renderbuffer format"),qi=di[Ri.format])}else typeof ar=="number"?(sr=ar|0,typeof Mi=="number"?Ni=Mi|0:Ni=sr):ar?be.raise("invalid arguments to renderbuffer constructor"):sr=Ni=1;if(be(sr>0&&Ni>0&&sr<=Cn.maxRenderbufferSize&&Ni<=Cn.maxRenderbufferSize,"invalid renderbuffer size"),!(sr===Yn.width&&Ni===Yn.height&&qi===Yn.format))return fi.width=Yn.width=sr,fi.height=Yn.height=Ni,Yn.format=qi,mt.bindRenderbuffer(Ba,Yn.renderbuffer),mt.renderbufferStorage(Ba,qi,sr,Ni),be(mt.getError()===0,"invalid render buffer format"),Ei.profile&&(Yn.stats.size=Ia(Yn.format,Yn.width,Yn.height)),fi.format=mi[Yn.format],fi}function $i(ar,Mi){var sr=ar|0,Ni=Mi|0||sr;return sr===Yn.width&&Ni===Yn.height||(be(sr>0&&Ni>0&&sr<=Cn.maxRenderbufferSize&&Ni<=Cn.maxRenderbufferSize,"invalid renderbuffer size"),fi.width=Yn.width=sr,fi.height=Yn.height=Ni,mt.bindRenderbuffer(Ba,Yn.renderbuffer),mt.renderbufferStorage(Ba,Yn.format,sr,Ni),be(mt.getError()===0,"invalid render buffer format"),Ei.profile&&(Yn.stats.size=Ia(Yn.format,Yn.width,Yn.height))),fi}return fi(Oi,Zi),fi.resize=$i,fi._reglType="renderbuffer",fi._renderbuffer=Yn,Ei.profile&&(fi.stats=Yn.stats),fi.destroy=function(){Yn.decRef()},fi}Ei.profile&&(hi.getTotalRenderbufferSize=function(){var Oi=0;return Object.keys(Vi).forEach(function(Zi){Oi+=Vi[Zi].stats.size}),Oi});function ir(){Jr(Vi).forEach(function(Oi){Oi.renderbuffer=mt.createRenderbuffer(),mt.bindRenderbuffer(Ba,Oi.renderbuffer),mt.renderbufferStorage(Ba,Oi.format,Oi.width,Oi.height)}),mt.bindRenderbuffer(Ba,null)}return{create:Qi,clear:function(){Jr(Vi).forEach(zi)},restore:ir}},Vs=36160,Ta=36161,vc=3553,_c=34069,ud=36064,bl=36096,Bd=36128,Cc=33306,Ql=36053,bc=36054,dd=36055,Mu=36057,mh=36061,Wd=36193,Au=5121,yc=5126,Vd=6407,wc=6408,ph=6402,Ut=[Vd,wc],o=[];o[wc]=4,o[Vd]=3;var h=[];h[Au]=1,h[yc]=4,h[Wd]=2;var A=32854,Z=32855,se=36194,Se=33189,$e=36168,rt=34041,ht=35907,xt=34836,Wt=34842,qt=34843,on=[A,Z,se,ht,Wt,qt,xt],_n={};_n[Ql]="complete",_n[bc]="incomplete attachment",_n[Mu]="incomplete dimensions",_n[dd]="incomplete, missing attachment",_n[mh]="unsupported";function Mn(mt,Qt,Cn,hi,Ei,di){var mi={cur:null,next:null,dirty:!1,setFBO:null},Wi=["rgba"],Vi=["rgba4","rgb565","rgb5 a1"];Qt.ext_srgb&&Vi.push("srgba"),Qt.ext_color_buffer_half_float&&Vi.push("rgba16f","rgb16f"),Qt.webgl_color_buffer_float&&Vi.push("rgba32f");var Ki=["uint8"];Qt.oes_texture_half_float&&Ki.push("half float","float16"),Qt.oes_texture_float&&Ki.push("float","float32");function zi(rr,ki,Ti){this.target=rr,this.texture=ki,this.renderbuffer=Ti;var Yr=0,Eo=0;ki?(Yr=ki.width,Eo=ki.height):Ti&&(Yr=Ti.width,Eo=Ti.height),this.width=Yr,this.height=Eo}function Qi(rr){rr&&(rr.texture&&rr.texture._texture.decRef(),rr.renderbuffer&&rr.renderbuffer._renderbuffer.decRef())}function ir(rr,ki,Ti){if(!!rr)if(rr.texture){var Yr=rr.texture._texture,Eo=Math.max(1,Yr.width),br=Math.max(1,Yr.height);be(Eo===ki&&br===Ti,"inconsistent width/height for supplied texture"),Yr.refCount+=1}else{var Fo=rr.renderbuffer._renderbuffer;be(Fo.width===ki&&Fo.height===Ti,"inconsistent width/height for renderbuffer"),Fo.refCount+=1}}function Oi(rr,ki){ki&&(ki.texture?mt.framebufferTexture2D(Vs,rr,ki.target,ki.texture._texture.texture,0):mt.framebufferRenderbuffer(Vs,rr,Ta,ki.renderbuffer._renderbuffer.renderbuffer))}function Zi(rr){var ki=vc,Ti=null,Yr=null,Eo=rr;typeof rr=="object"&&(Eo=rr.data,"target"in rr&&(ki=rr.target|0)),be.type(Eo,"function","invalid attachment data");var br=Eo._reglType;return br==="texture2d"?(Ti=Eo,be(ki===vc)):br==="textureCube"?(Ti=Eo,be(ki>=_c&&ki<_c+6,"invalid cube map target")):br==="renderbuffer"?(Yr=Eo,ki=Ta):be.raise("invalid regl object for attachment"),new zi(ki,Ti,Yr)}function Yn(rr,ki,Ti,Yr,Eo){if(Ti){var br=hi.create2D({width:rr,height:ki,format:Yr,type:Eo});return br._texture.refCount=0,new zi(vc,br,null)}else{var Fo=Ei.create({width:rr,height:ki,format:Yr});return Fo._renderbuffer.refCount=0,new zi(Ta,null,Fo)}}function fi(rr){return rr&&(rr.texture||rr.renderbuffer)}function $i(rr,ki,Ti){rr&&(rr.texture?rr.texture.resize(ki,Ti):rr.renderbuffer&&rr.renderbuffer.resize(ki,Ti),rr.width=ki,rr.height=Ti)}var ar=0,Mi={};function sr(){this.id=ar++,Mi[this.id]=this,this.framebuffer=mt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ni(rr){rr.colorAttachments.forEach(Qi),Qi(rr.depthAttachment),Qi(rr.stencilAttachment),Qi(rr.depthStencilAttachment)}function qi(rr){var ki=rr.framebuffer;be(ki,"must not double destroy framebuffer"),mt.deleteFramebuffer(ki),rr.framebuffer=null,di.framebufferCount--,delete Mi[rr.id]}function Ri(rr){var ki;mt.bindFramebuffer(Vs,rr.framebuffer);var Ti=rr.colorAttachments;for(ki=0;ki<Ti.length;++ki)Oi(ud+ki,Ti[ki]);for(ki=Ti.length;ki<Cn.maxColorAttachments;++ki)mt.framebufferTexture2D(Vs,ud+ki,vc,null,0);mt.framebufferTexture2D(Vs,Cc,vc,null,0),mt.framebufferTexture2D(Vs,bl,vc,null,0),mt.framebufferTexture2D(Vs,Bd,vc,null,0),Oi(bl,rr.depthAttachment),Oi(Bd,rr.stencilAttachment),Oi(Cc,rr.depthStencilAttachment);var Yr=mt.checkFramebufferStatus(Vs);!mt.isContextLost()&&Yr!==Ql&&be.raise("framebuffer configuration not supported, status = "+_n[Yr]),mt.bindFramebuffer(Vs,mi.next?mi.next.framebuffer:null),mi.cur=mi.next,mt.getError()}function Ui(rr,ki){var Ti=new sr;di.framebufferCount++;function Yr(br,Fo){var uo;be(mi.next!==Ti,"can not update framebuffer which is currently in use");var vo=0,Qo=0,Rs=!0,ha=!0,Go=null,Us=!0,vs="rgba",Ps="uint8",Do=1,oa=null,Sa=null,fa=null,zs=!1;if(typeof br=="number")vo=br|0,Qo=Fo|0||vo;else if(!br)vo=Qo=1;else{be.type(br,"object","invalid arguments for framebuffer");var _o=br;if("shape"in _o){var Qs=_o.shape;be(Array.isArray(Qs)&&Qs.length>=2,"invalid shape for framebuffer"),vo=Qs[0],Qo=Qs[1]}else"radius"in _o&&(vo=Qo=_o.radius),"width"in _o&&(vo=_o.width),"height"in _o&&(Qo=_o.height);("color"in _o||"colors"in _o)&&(Go=_o.color||_o.colors,Array.isArray(Go)&&be(Go.length===1||Qt.webgl_draw_buffers,"multiple render targets not supported")),Go||("colorCount"in _o&&(Do=_o.colorCount|0,be(Do>0,"invalid color buffer count")),"colorTexture"in _o&&(Us=!!_o.colorTexture,vs="rgba4"),"colorType"in _o&&(Ps=_o.colorType,Us?(be(Qt.oes_texture_float||!(Ps==="float"||Ps==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),be(Qt.oes_texture_half_float||!(Ps==="half float"||Ps==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ps==="half float"||Ps==="float16"?(be(Qt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),vs="rgba16f"):(Ps==="float"||Ps==="float32")&&(be(Qt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),vs="rgba32f"),be.oneOf(Ps,Ki,"invalid color type")),"colorFormat"in _o&&(vs=_o.colorFormat,Wi.indexOf(vs)>=0?Us=!0:Vi.indexOf(vs)>=0?Us=!1:Us?be.oneOf(_o.colorFormat,Wi,"invalid color format for texture"):be.oneOf(_o.colorFormat,Vi,"invalid color format for renderbuffer"))),("depthTexture"in _o||"depthStencilTexture"in _o)&&(zs=!!(_o.depthTexture||_o.depthStencilTexture),be(!zs||Qt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in _o&&(typeof _o.depth=="boolean"?Rs=_o.depth:(oa=_o.depth,ha=!1)),"stencil"in _o&&(typeof _o.stencil=="boolean"?ha=_o.stencil:(Sa=_o.stencil,Rs=!1)),"depthStencil"in _o&&(typeof _o.depthStencil=="boolean"?Rs=ha=_o.depthStencil:(fa=_o.depthStencil,Rs=!1,ha=!1))}var Xo=null,Zr=null,Co=null,Jo=null;if(Array.isArray(Go))Xo=Go.map(Zi);else if(Go)Xo=[Zi(Go)];else for(Xo=new Array(Do),uo=0;uo<Do;++uo)Xo[uo]=Yn(vo,Qo,Us,vs,Ps);be(Qt.webgl_draw_buffers||Xo.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),be(Xo.length<=Cn.maxColorAttachments,"too many color attachments, not supported"),vo=vo||Xo[0].width,Qo=Qo||Xo[0].height,oa?Zr=Zi(oa):Rs&&!ha&&(Zr=Yn(vo,Qo,zs,"depth","uint32")),Sa?Co=Zi(Sa):ha&&!Rs&&(Co=Yn(vo,Qo,!1,"stencil","uint8")),fa?Jo=Zi(fa):!oa&&!Sa&&ha&&Rs&&(Jo=Yn(vo,Qo,zs,"depth stencil","depth stencil")),be(!!oa+!!Sa+!!fa<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Js=null;for(uo=0;uo<Xo.length;++uo)if(ir(Xo[uo],vo,Qo),be(!Xo[uo]||Xo[uo].texture&&Ut.indexOf(Xo[uo].texture._texture.format)>=0||Xo[uo].renderbuffer&&on.indexOf(Xo[uo].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+uo+" is invalid"),Xo[uo]&&Xo[uo].texture){var Ul=o[Xo[uo].texture._texture.format]*h[Xo[uo].texture._texture.type];Js===null?Js=Ul:be(Js===Ul,"all color attachments much have the same number of bits per pixel.")}return ir(Zr,vo,Qo),be(!Zr||Zr.texture&&Zr.texture._texture.format===ph||Zr.renderbuffer&&Zr.renderbuffer._renderbuffer.format===Se,"invalid depth attachment for framebuffer object"),ir(Co,vo,Qo),be(!Co||Co.renderbuffer&&Co.renderbuffer._renderbuffer.format===$e,"invalid stencil attachment for framebuffer object"),ir(Jo,vo,Qo),be(!Jo||Jo.texture&&Jo.texture._texture.format===rt||Jo.renderbuffer&&Jo.renderbuffer._renderbuffer.format===rt,"invalid depth-stencil attachment for framebuffer object"),Ni(Ti),Ti.width=vo,Ti.height=Qo,Ti.colorAttachments=Xo,Ti.depthAttachment=Zr,Ti.stencilAttachment=Co,Ti.depthStencilAttachment=Jo,Yr.color=Xo.map(fi),Yr.depth=fi(Zr),Yr.stencil=fi(Co),Yr.depthStencil=fi(Jo),Yr.width=Ti.width,Yr.height=Ti.height,Ri(Ti),Yr}function Eo(br,Fo){be(mi.next!==Ti,"can not resize a framebuffer which is currently in use");var uo=Math.max(br|0,1),vo=Math.max(Fo|0||uo,1);if(uo===Ti.width&&vo===Ti.height)return Yr;for(var Qo=Ti.colorAttachments,Rs=0;Rs<Qo.length;++Rs)$i(Qo[Rs],uo,vo);return $i(Ti.depthAttachment,uo,vo),$i(Ti.stencilAttachment,uo,vo),$i(Ti.depthStencilAttachment,uo,vo),Ti.width=Yr.width=uo,Ti.height=Yr.height=vo,Ri(Ti),Yr}return Yr(rr,ki),a(Yr,{resize:Eo,_reglType:"framebuffer",_framebuffer:Ti,destroy:function(){qi(Ti),Ni(Ti)},use:function(br){mi.setFBO({framebuffer:Yr},br)}})}function Vr(rr){var ki=Array(6);function Ti(Eo){var br;be(ki.indexOf(mi.next)<0,"can not update framebuffer which is currently in use");var Fo={color:null},uo=0,vo=null,Qo="rgba",Rs="uint8",ha=1;if(typeof Eo=="number")uo=Eo|0;else if(!Eo)uo=1;else{be.type(Eo,"object","invalid arguments for framebuffer");var Go=Eo;if("shape"in Go){var Us=Go.shape;be(Array.isArray(Us)&&Us.length>=2,"invalid shape for framebuffer"),be(Us[0]===Us[1],"cube framebuffer must be square"),uo=Us[0]}else"radius"in Go&&(uo=Go.radius|0),"width"in Go?(uo=Go.width|0,"height"in Go&&be(Go.height===uo,"must be square")):"height"in Go&&(uo=Go.height|0);("color"in Go||"colors"in Go)&&(vo=Go.color||Go.colors,Array.isArray(vo)&&be(vo.length===1||Qt.webgl_draw_buffers,"multiple render targets not supported")),vo||("colorCount"in Go&&(ha=Go.colorCount|0,be(ha>0,"invalid color buffer count")),"colorType"in Go&&(be.oneOf(Go.colorType,Ki,"invalid color type"),Rs=Go.colorType),"colorFormat"in Go&&(Qo=Go.colorFormat,be.oneOf(Go.colorFormat,Wi,"invalid color format for texture"))),"depth"in Go&&(Fo.depth=Go.depth),"stencil"in Go&&(Fo.stencil=Go.stencil),"depthStencil"in Go&&(Fo.depthStencil=Go.depthStencil)}var vs;if(vo)if(Array.isArray(vo))for(vs=[],br=0;br<vo.length;++br)vs[br]=vo[br];else vs=[vo];else{vs=Array(ha);var Ps={radius:uo,format:Qo,type:Rs};for(br=0;br<ha;++br)vs[br]=hi.createCube(Ps)}for(Fo.color=Array(vs.length),br=0;br<vs.length;++br){var Do=vs[br];be(typeof Do=="function"&&Do._reglType==="textureCube","invalid cube map"),uo=uo||Do.width,be(Do.width===uo&&Do.height===uo,"invalid cube map shape"),Fo.color[br]={target:_c,data:vs[br]}}for(br=0;br<6;++br){for(var oa=0;oa<vs.length;++oa)Fo.color[oa].target=_c+br;br>0&&(Fo.depth=ki[0].depth,Fo.stencil=ki[0].stencil,Fo.depthStencil=ki[0].depthStencil),ki[br]?ki[br](Fo):ki[br]=Ui(Fo)}return a(Ti,{width:uo,height:uo,color:vs})}function Yr(Eo){var br,Fo=Eo|0;if(be(Fo>0&&Fo<=Cn.maxCubeMapSize,"invalid radius for cube fbo"),Fo===Ti.width)return Ti;var uo=Ti.color;for(br=0;br<uo.length;++br)uo[br].resize(Fo);for(br=0;br<6;++br)ki[br].resize(Fo);return Ti.width=Ti.height=Fo,Ti}return Ti(rr),a(Ti,{faces:ki,resize:Yr,_reglType:"framebufferCube",destroy:function(){ki.forEach(function(Eo){Eo.destroy()})}})}function co(){mi.cur=null,mi.next=null,mi.dirty=!0,Jr(Mi).forEach(function(rr){rr.framebuffer=mt.createFramebuffer(),Ri(rr)})}return a(mi,{getFramebuffer:function(rr){if(typeof rr=="function"&&rr._reglType==="framebuffer"){var ki=rr._framebuffer;if(ki instanceof sr)return ki}return null},create:Ui,createCube:Vr,clear:function(){Jr(Mi).forEach(qi)},restore:co})}var $n=5126,vi=34962;function Ii(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=$n,this.offset=0,this.stride=0,this.divisor=0}function Di(mt,Qt,Cn,hi,Ei){for(var di=Cn.maxAttributes,mi=new Array(di),Wi=0;Wi<di;++Wi)mi[Wi]=new Ii;var Vi=0,Ki={},zi={Record:Ii,scope:{},state:mi,currentVAO:null,targetVAO:null,restore:ir()?Mi:function(){},createVAO:sr,getVAO:Zi,destroyBuffer:Qi,setVAO:ir()?Yn:fi,clear:ir()?$i:function(){}};function Qi(Ni){for(var qi=0;qi<mi.length;++qi){var Ri=mi[qi];Ri.buffer===Ni&&(mt.disableVertexAttribArray(qi),Ri.buffer=null)}}function ir(){return Qt.oes_vertex_array_object}function Oi(){return Qt.angle_instanced_arrays}function Zi(Ni){return typeof Ni=="function"&&Ni._vao?Ni._vao:null}function Yn(Ni){if(Ni!==zi.currentVAO){var qi=ir();Ni?qi.bindVertexArrayOES(Ni.vao):qi.bindVertexArrayOES(null),zi.currentVAO=Ni}}function fi(Ni){if(Ni!==zi.currentVAO){if(Ni)Ni.bindAttrs();else for(var qi=Oi(),Ri=0;Ri<mi.length;++Ri){var Ui=mi[Ri];Ui.buffer?(mt.enableVertexAttribArray(Ri),mt.vertexAttribPointer(Ri,Ui.size,Ui.type,Ui.normalized,Ui.stride,Ui.offfset),qi&&Ui.divisor&&qi.vertexAttribDivisorANGLE(Ri,Ui.divisor)):(mt.disableVertexAttribArray(Ri),mt.vertexAttrib4f(Ri,Ui.x,Ui.y,Ui.z,Ui.w))}zi.currentVAO=Ni}}function $i(){Jr(Ki).forEach(function(Ni){Ni.destroy()})}function ar(){this.id=++Vi,this.attributes=[];var Ni=ir();Ni?this.vao=Ni.createVertexArrayOES():this.vao=null,Ki[this.id]=this,this.buffers=[]}ar.prototype.bindAttrs=function(){for(var Ni=Oi(),qi=this.attributes,Ri=0;Ri<qi.length;++Ri){var Ui=qi[Ri];Ui.buffer?(mt.enableVertexAttribArray(Ri),mt.bindBuffer(vi,Ui.buffer.buffer),mt.vertexAttribPointer(Ri,Ui.size,Ui.type,Ui.normalized,Ui.stride,Ui.offset),Ni&&Ui.divisor&&Ni.vertexAttribDivisorANGLE(Ri,Ui.divisor)):(mt.disableVertexAttribArray(Ri),mt.vertexAttrib4f(Ri,Ui.x,Ui.y,Ui.z,Ui.w))}for(var Vr=qi.length;Vr<di;++Vr)mt.disableVertexAttribArray(Vr)},ar.prototype.refresh=function(){var Ni=ir();Ni&&(Ni.bindVertexArrayOES(this.vao),this.bindAttrs(),zi.currentVAO=this)},ar.prototype.destroy=function(){if(this.vao){var Ni=ir();this===zi.currentVAO&&(zi.currentVAO=null,Ni.bindVertexArrayOES(null)),Ni.deleteVertexArrayOES(this.vao),this.vao=null}Ki[this.id]&&(delete Ki[this.id],hi.vaoCount-=1)};function Mi(){var Ni=ir();Ni&&Jr(Ki).forEach(function(qi){qi.refresh()})}function sr(Ni){var qi=new ar;hi.vaoCount+=1;function Ri(Ui){be(Array.isArray(Ui),"arguments to vertex array constructor must be an array"),be(Ui.length<di,"too many attributes"),be(Ui.length>0,"must specify at least one attribute");var Vr={},co=qi.attributes;co.length=Ui.length;for(var rr=0;rr<Ui.length;++rr){var ki=Ui[rr],Ti=co[rr]=new Ii,Yr=ki.data||ki;if(Array.isArray(Yr)||me(Yr)||Xr(Yr)){var Eo;qi.buffers[rr]&&(Eo=qi.buffers[rr],me(Yr)&&Eo._buffer.byteLength>=Yr.byteLength?Eo.subdata(Yr):(Eo.destroy(),qi.buffers[rr]=null)),qi.buffers[rr]||(Eo=qi.buffers[rr]=Ei.create(ki,vi,!1,!0)),Ti.buffer=Ei.getBuffer(Eo),Ti.size=Ti.buffer.dimension|0,Ti.normalized=!1,Ti.type=Ti.buffer.dtype,Ti.offset=0,Ti.stride=0,Ti.divisor=0,Ti.state=1,Vr[rr]=1}else Ei.getBuffer(ki)?(Ti.buffer=Ei.getBuffer(ki),Ti.size=Ti.buffer.dimension|0,Ti.normalized=!1,Ti.type=Ti.buffer.dtype,Ti.offset=0,Ti.stride=0,Ti.divisor=0,Ti.state=1):Ei.getBuffer(ki.buffer)?(Ti.buffer=Ei.getBuffer(ki.buffer),Ti.size=(+ki.size||Ti.buffer.dimension)|0,Ti.normalized=!!ki.normalized||!1,"type"in ki?(be.parameter(ki.type,en,"invalid buffer type"),Ti.type=en[ki.type]):Ti.type=Ti.buffer.dtype,Ti.offset=(ki.offset||0)|0,Ti.stride=(ki.stride||0)|0,Ti.divisor=(ki.divisor||0)|0,Ti.state=1,be(Ti.size>=1&&Ti.size<=4,"size must be between 1 and 4"),be(Ti.offset>=0,"invalid offset"),be(Ti.stride>=0&&Ti.stride<=255,"stride must be between 0 and 255"),be(Ti.divisor>=0,"divisor must be positive"),be(!Ti.divisor||!!Qt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in ki?(be(rr>0,"first attribute must not be a constant"),Ti.x=+ki.x||0,Ti.y=+ki.y||0,Ti.z=+ki.z||0,Ti.w=+ki.w||0,Ti.state=2):be(!1,"invalid attribute spec for location "+rr)}for(var br=0;br<qi.buffers.length;++br)!Vr[br]&&qi.buffers[br]&&(qi.buffers[br].destroy(),qi.buffers[br]=null);return qi.refresh(),Ri}return Ri.destroy=function(){for(var Ui=0;Ui<qi.buffers.length;++Ui)qi.buffers[Ui]&&qi.buffers[Ui].destroy();qi.buffers.length=0,qi.destroy()},Ri._vao=qi,Ri._reglType="vao",Ri(Ni)}return zi}var mr=35632,or=35633,Tr=35718,Er=35721;function cr(mt,Qt,Cn,hi){var Ei={},di={};function mi(Yn,fi,$i,ar){this.name=Yn,this.id=fi,this.location=$i,this.info=ar}function Wi(Yn,fi){for(var $i=0;$i<Yn.length;++$i)if(Yn[$i].id===fi.id){Yn[$i].location=fi.location;return}Yn.push(fi)}function Vi(Yn,fi,$i){var ar=Yn===mr?Ei:di,Mi=ar[fi];if(!Mi){var sr=Qt.str(fi);Mi=mt.createShader(Yn),mt.shaderSource(Mi,sr),mt.compileShader(Mi),be.shaderError(mt,Mi,sr,Yn,$i),ar[fi]=Mi}return Mi}var Ki={},zi=[],Qi=0;function ir(Yn,fi){this.id=Qi++,this.fragId=Yn,this.vertId=fi,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,hi.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Oi(Yn,fi,$i){var ar,Mi,sr=Vi(mr,Yn.fragId),Ni=Vi(or,Yn.vertId),qi=Yn.program=mt.createProgram();if(mt.attachShader(qi,sr),mt.attachShader(qi,Ni),$i)for(ar=0;ar<$i.length;++ar){var Ri=$i[ar];mt.bindAttribLocation(qi,Ri[0],Ri[1])}mt.linkProgram(qi),be.linkError(mt,qi,Qt.str(Yn.fragId),Qt.str(Yn.vertId),fi);var Ui=mt.getProgramParameter(qi,Tr);hi.profile&&(Yn.stats.uniformsCount=Ui);var Vr=Yn.uniforms;for(ar=0;ar<Ui;++ar)if(Mi=mt.getActiveUniform(qi,ar),Mi)if(Mi.size>1)for(var co=0;co<Mi.size;++co){var rr=Mi.name.replace("[0]","["+co+"]");Wi(Vr,new mi(rr,Qt.id(rr),mt.getUniformLocation(qi,rr),Mi))}else Wi(Vr,new mi(Mi.name,Qt.id(Mi.name),mt.getUniformLocation(qi,Mi.name),Mi));var ki=mt.getProgramParameter(qi,Er);hi.profile&&(Yn.stats.attributesCount=ki);var Ti=Yn.attributes;for(ar=0;ar<ki;++ar)Mi=mt.getActiveAttrib(qi,ar),Mi&&Wi(Ti,new mi(Mi.name,Qt.id(Mi.name),mt.getAttribLocation(qi,Mi.name),Mi))}hi.profile&&(Cn.getMaxUniformsCount=function(){var Yn=0;return zi.forEach(function(fi){fi.stats.uniformsCount>Yn&&(Yn=fi.stats.uniformsCount)}),Yn},Cn.getMaxAttributesCount=function(){var Yn=0;return zi.forEach(function(fi){fi.stats.attributesCount>Yn&&(Yn=fi.stats.attributesCount)}),Yn});function Zi(){Ei={},di={};for(var Yn=0;Yn<zi.length;++Yn)Oi(zi[Yn],null,zi[Yn].attributes.map(function(fi){return[fi.location,fi.name]}))}return{clear:function(){var Yn=mt.deleteShader.bind(mt);Jr(Ei).forEach(Yn),Ei={},Jr(di).forEach(Yn),di={},zi.forEach(function(fi){mt.deleteProgram(fi.program)}),zi.length=0,Ki={},Cn.shaderCount=0},program:function(Yn,fi,$i,ar){be.command(Yn>=0,"missing vertex shader",$i),be.command(fi>=0,"missing fragment shader",$i);var Mi=Ki[fi];Mi||(Mi=Ki[fi]={});var sr=Mi[Yn];if(sr&&(sr.refCount++,!ar))return sr;var Ni=new ir(fi,Yn);return Cn.shaderCount++,Oi(Ni,$i,ar),sr||(Mi[Yn]=Ni),zi.push(Ni),a(Ni,{destroy:function(){if(Ni.refCount--,Ni.refCount<=0){mt.deleteProgram(Ni.program);var qi=zi.indexOf(Ni);zi.splice(qi,1),Cn.shaderCount--}Mi[Ni.vertId].refCount<=0&&(mt.deleteShader(di[Ni.vertId]),delete di[Ni.vertId],delete Ki[Ni.fragId][Ni.vertId]),Object.keys(Ki[Ni.fragId]).length||(mt.deleteShader(Ei[Ni.fragId]),delete Ei[Ni.fragId],delete Ki[Ni.fragId])}})},restore:Zi,shader:Vi,frag:-1,vert:-1}}var Or=6408,Lo=5121,Kr=3333,us=5126;function hs(mt,Qt,Cn,hi,Ei,di,mi){function Wi(zi){var Qi;Qt.next===null?(be(Ei.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Qi=Lo):(be(Qt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Qi=Qt.next.colorAttachments[0].texture._texture.type,di.oes_texture_float?(be(Qi===Lo||Qi===us,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Qi===us&&be(mi.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):be(Qi===Lo,"Reading from a framebuffer is only allowed for the type 'uint8'"));var ir=0,Oi=0,Zi=hi.framebufferWidth,Yn=hi.framebufferHeight,fi=null;me(zi)?fi=zi:zi&&(be.type(zi,"object","invalid arguments to regl.read()"),ir=zi.x|0,Oi=zi.y|0,be(ir>=0&&ir<hi.framebufferWidth,"invalid x offset for regl.read"),be(Oi>=0&&Oi<hi.framebufferHeight,"invalid y offset for regl.read"),Zi=(zi.width||hi.framebufferWidth-ir)|0,Yn=(zi.height||hi.framebufferHeight-Oi)|0,fi=zi.data||null),fi&&(Qi===Lo?be(fi instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Qi===us&&be(fi instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),be(Zi>0&&Zi+ir<=hi.framebufferWidth,"invalid width for read pixels"),be(Yn>0&&Yn+Oi<=hi.framebufferHeight,"invalid height for read pixels"),Cn();var $i=Zi*Yn*4;return fi||(Qi===Lo?fi=new Uint8Array($i):Qi===us&&(fi=fi||new Float32Array($i))),be.isTypedArray(fi,"data buffer for regl.read() must be a typedarray"),be(fi.byteLength>=$i,"data buffer for regl.read() too small"),mt.pixelStorei(Kr,4),mt.readPixels(ir,Oi,Zi,Yn,Or,Qi,fi),fi}function Vi(zi){var Qi;return Qt.setFBO({framebuffer:zi.framebuffer},function(){Qi=Wi(zi)}),Qi}function Ki(zi){return!zi||!("framebuffer"in zi)?Wi(zi):Vi(zi)}return Ki}function Es(mt){return Array.prototype.slice.call(mt)}function go(mt){return Es(mt).join("")}function Ks(){var mt=0,Qt=[],Cn=[];function hi(Qi){for(var ir=0;ir<Cn.length;++ir)if(Cn[ir]===Qi)return Qt[ir];var Oi="g"+mt++;return Qt.push(Oi),Cn.push(Qi),Oi}function Ei(){var Qi=[];function ir(){Qi.push.apply(Qi,Es(arguments))}var Oi=[];function Zi(){var Yn="v"+mt++;return Oi.push(Yn),arguments.length>0&&(Qi.push(Yn,"="),Qi.push.apply(Qi,Es(arguments)),Qi.push(";")),Yn}return a(ir,{def:Zi,toString:function(){return go([Oi.length>0?"var "+Oi.join(",")+";":"",go(Qi)])}})}function di(){var Qi=Ei(),ir=Ei(),Oi=Qi.toString,Zi=ir.toString;function Yn(fi,$i){ir(fi,$i,"=",Qi.def(fi,$i),";")}return a(function(){Qi.apply(Qi,Es(arguments))},{def:Qi.def,entry:Qi,exit:ir,save:Yn,set:function(fi,$i,ar){Yn(fi,$i),Qi(fi,$i,"=",ar,";")},toString:function(){return Oi()+Zi()}})}function mi(){var Qi=go(arguments),ir=di(),Oi=di(),Zi=ir.toString,Yn=Oi.toString;return a(ir,{then:function(){return ir.apply(ir,Es(arguments)),this},else:function(){return Oi.apply(Oi,Es(arguments)),this},toString:function(){var fi=Yn();return fi&&(fi="else{"+fi+"}"),go(["if(",Qi,"){",Zi(),"}",fi])}})}var Wi=Ei(),Vi={};function Ki(Qi,ir){var Oi=[];function Zi(){var Mi="a"+Oi.length;return Oi.push(Mi),Mi}ir=ir||0;for(var Yn=0;Yn<ir;++Yn)Zi();var fi=di(),$i=fi.toString,ar=Vi[Qi]=a(fi,{arg:Zi,toString:function(){return go(["function(",Oi.join(),"){",$i(),"}"])}});return ar}function zi(){var Qi=['"use strict";',Wi,"return {"];Object.keys(Vi).forEach(function(Zi){Qi.push('"',Zi,'":',Vi[Zi].toString(),",")}),Qi.push("}");var ir=go(Qi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Oi=Function.apply(null,Qt.concat(ir));return Oi.apply(null,Cn)}return{global:Wi,link:hi,block:Ei,proc:Ki,scope:di,cond:mi,compile:zi}}var Ls="xyzw".split(""),Ts=5121,La=1,vh=2,Ud=0,_h=1,Ch=2,Ru=3,Pu=4,tf=5,nf=6,hd="dither",Sc="blend.enable",lu="blend.color",Ec="blend.equation",Jl="blend.func",bh="depth.enable",Da="depth.func",cu="depth.range",Ou="depth.mask",ku="colorMask",fd="cull.enable",gd="cull.face",yh="frontFace",Xa="lineWidth",Bc="polygonOffset.enable",md="polygonOffset.offset",rf="sample.alpha",Fu="sample.enable",uu="sample.coverage",wh="stencil.enable",Lc="stencil.mask",Wc="stencil.func",Vc="stencil.opFront",Bu="stencil.opBack",Sh="scissor.enable",yl="scissor.box",wl="viewport",du="profile",ya="framebuffer",ca="vert",Uc="frag",zc="elements",Dc="primitive",Pl="count",zd="offset",Ol="instances",pd="vao",Hd="Width",Ya="Height",ua=ya+Hd,ql=ya+Ya,Wu=wl+Hd,Vu=wl+Ya,hu="drawingBuffer",Gd=hu+Hd,vd=hu+Ya,rl=[Jl,Ec,Wc,Vc,Bu,uu,wl,yl,md],Hc=34962,Eh=34963,Lh=35632,Qa=35633,of=3553,sf=34067,tg=2884,Dh=3042,fu=3024,_d=2960,ec=2929,af=3089,Gc=32823,ng=32926,lf=32928,jd=5126,Cd=35664,bd=35665,kl=35666,Uu=5124,yd=35667,Kd=35668,tc=35669,xh=35670,zu=35671,$d=35672,Hu=35673,da=35674,jc=35675,wd=35676,nc=35678,Fl=35680,gu=4,ic=1028,Bl=1029,ig=2304,Sd=2305,Ed=32775,rg=32776,Wl=519,rc=7680,Zd=0,cf=1,Vl=32774,Gu=513,Ms=36160,og=36064,Yo={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Xd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},oc={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},As={frag:Lh,vert:Qa},Wa={cw:ig,ccw:Sd};function Ic(mt){return Array.isArray(mt)||me(mt)||Xr(mt)}function sc(mt){return mt.sort(function(Qt,Cn){return Qt===wl?-1:Cn===wl?1:Qt<Cn?-1:1})}function wa(mt,Qt,Cn,hi){this.thisDep=mt,this.contextDep=Qt,this.propDep=Cn,this.append=hi}function Ha(mt){return mt&&!(mt.thisDep||mt.contextDep||mt.propDep)}function $s(mt){return new wa(!1,!1,!1,mt)}function ka(mt,Qt){var Cn=mt.type;if(Cn===Ud){var hi=mt.data.length;return new wa(!0,hi>=1,hi>=2,Qt)}else if(Cn===Pu){var Ei=mt.data;return new wa(Ei.thisDep,Ei.contextDep,Ei.propDep,Qt)}else{if(Cn===tf)return new wa(!1,!1,!1,Qt);if(Cn===nf){for(var di=!1,mi=!1,Wi=!1,Vi=0;Vi<mt.data.length;++Vi){var Ki=mt.data[Vi];if(Ki.type===_h)Wi=!0;else if(Ki.type===Ch)mi=!0;else if(Ki.type===Ru)di=!0;else if(Ki.type===Ud){di=!0;var zi=Ki.data;zi>=1&&(mi=!0),zi>=2&&(Wi=!0)}else Ki.type===Pu&&(di=di||Ki.data.thisDep,mi=mi||Ki.data.contextDep,Wi=Wi||Ki.data.propDep)}return new wa(di,mi,Wi,Qt)}else return new wa(Cn===Ru,Cn===Ch,Cn===_h,Qt)}}var Ih=new wa(!1,!1,!1,function(){});function ju(mt,Qt,Cn,hi,Ei,di,mi,Wi,Vi,Ki,zi,Qi,ir,Oi,Zi){var Yn=Ki.Record,fi={add:32774,subtract:32778,"reverse subtract":32779};Cn.ext_blend_minmax&&(fi.min=Ed,fi.max=rg);var $i=Cn.angle_instanced_arrays,ar=Cn.webgl_draw_buffers,Mi={dirty:!0,profile:Zi.profile},sr={},Ni=[],qi={},Ri={};function Ui(ln){return ln.replace(".","_")}function Vr(ln,Gt,Dn){var Pn=Ui(ln);Ni.push(ln),sr[Pn]=Mi[Pn]=!!Dn,qi[Pn]=Gt}function co(ln,Gt,Dn){var Pn=Ui(ln);Ni.push(ln),Array.isArray(Dn)?(Mi[Pn]=Dn.slice(),sr[Pn]=Dn.slice()):Mi[Pn]=sr[Pn]=Dn,Ri[Pn]=Gt}Vr(hd,fu),Vr(Sc,Dh),co(lu,"blendColor",[0,0,0,0]),co(Ec,"blendEquationSeparate",[Vl,Vl]),co(Jl,"blendFuncSeparate",[cf,Zd,cf,Zd]),Vr(bh,ec,!0),co(Da,"depthFunc",Gu),co(cu,"depthRange",[0,1]),co(Ou,"depthMask",!0),co(ku,ku,[!0,!0,!0,!0]),Vr(fd,tg),co(gd,"cullFace",Bl),co(yh,yh,Sd),co(Xa,Xa,1),Vr(Bc,Gc),co(md,"polygonOffset",[0,0]),Vr(rf,ng),Vr(Fu,lf),co(uu,"sampleCoverage",[1,!1]),Vr(wh,_d),co(Lc,"stencilMask",-1),co(Wc,"stencilFunc",[Wl,0,-1]),co(Vc,"stencilOpSeparate",[ic,rc,rc,rc]),co(Bu,"stencilOpSeparate",[Bl,rc,rc,rc]),Vr(Sh,af),co(yl,"scissor",[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]),co(wl,wl,[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]);var rr={gl:mt,context:ir,strings:Qt,next:sr,current:Mi,draw:Qi,elements:di,buffer:Ei,shader:zi,attributes:Ki.state,vao:Ki,uniforms:Vi,framebuffer:Wi,extensions:Cn,timer:Oi,isBufferArgs:Ic},ki={primTypes:gi,compareFuncs:xc,blendFuncs:Yo,blendEquations:fi,stencilOps:oc,glTypes:en,orientationType:Wa};be.optional(function(){rr.isArrayLike=Jn}),ar&&(ki.backBuffer=[Bl],ki.drawBuffer=Kt(hi.maxDrawbuffers,function(ln){return ln===0?[0]:Kt(ln,function(Gt){return og+Gt})}));var Ti=0;function Yr(){var ln=Ks(),Gt=ln.link,Dn=ln.global;ln.id=Ti++,ln.batchId="0";var Pn=Gt(rr),qn=ln.shared={props:"a0"};Object.keys(rr).forEach(function(Ln){qn[Ln]=Dn.def(Pn,".",Ln)}),be.optional(function(){ln.CHECK=Gt(be),ln.commandStr=be.guessCommand(),ln.command=Gt(ln.commandStr),ln.assert=function(Ln,nn,Kn){Ln("if(!(",nn,"))",this.CHECK,".commandRaise(",Gt(Kn),",",this.command,");")},ki.invalidBlendCombinations=Xd});var In=ln.next={},yn=ln.current={};Object.keys(Ri).forEach(function(Ln){Array.isArray(Mi[Ln])&&(In[Ln]=Dn.def(qn.next,".",Ln),yn[Ln]=Dn.def(qn.current,".",Ln))});var zn=ln.constants={};Object.keys(ki).forEach(function(Ln){zn[Ln]=Dn.def(JSON.stringify(ki[Ln]))}),ln.invoke=function(Ln,nn){switch(nn.type){case Ud:var Kn=["this",qn.context,qn.props,ln.batchId];return Ln.def(Gt(nn.data),".call(",Kn.slice(0,Math.max(nn.data.length+1,4)),")");case _h:return Ln.def(qn.props,nn.data);case Ch:return Ln.def(qn.context,nn.data);case Ru:return Ln.def("this",nn.data);case Pu:return nn.data.append(ln,Ln),nn.data.ref;case tf:return nn.data.toString();case nf:return nn.data.map(function(ni){return ln.invoke(Ln,ni)})}},ln.attribCache={};var cn={};return ln.scopeAttrib=function(Ln){var nn=Qt.id(Ln);if(nn in cn)return cn[nn];var Kn=Ki.scope[nn];Kn||(Kn=Ki.scope[nn]=new Yn);var ni=cn[nn]=Gt(Kn);return ni},ln}function Eo(ln){var Gt=ln.static,Dn=ln.dynamic,Pn;if(du in Gt){var qn=!!Gt[du];Pn=$s(function(yn,zn){return qn}),Pn.enable=qn}else if(du in Dn){var In=Dn[du];Pn=ka(In,function(yn,zn){return yn.invoke(zn,In)})}return Pn}function br(ln,Gt){var Dn=ln.static,Pn=ln.dynamic;if(ya in Dn){var qn=Dn[ya];return qn?(qn=Wi.getFramebuffer(qn),be.command(qn,"invalid framebuffer object"),$s(function(yn,zn){var cn=yn.link(qn),Ln=yn.shared;zn.set(Ln.framebuffer,".next",cn);var nn=Ln.context;return zn.set(nn,"."+ua,cn+".width"),zn.set(nn,"."+ql,cn+".height"),cn})):$s(function(yn,zn){var cn=yn.shared;zn.set(cn.framebuffer,".next","null");var Ln=cn.context;return zn.set(Ln,"."+ua,Ln+"."+Gd),zn.set(Ln,"."+ql,Ln+"."+vd),"null"})}else if(ya in Pn){var In=Pn[ya];return ka(In,function(yn,zn){var cn=yn.invoke(zn,In),Ln=yn.shared,nn=Ln.framebuffer,Kn=zn.def(nn,".getFramebuffer(",cn,")");be.optional(function(){yn.assert(zn,"!"+cn+"||"+Kn,"invalid framebuffer object")}),zn.set(nn,".next",Kn);var ni=Ln.context;return zn.set(ni,"."+ua,Kn+"?"+Kn+".width:"+ni+"."+Gd),zn.set(ni,"."+ql,Kn+"?"+Kn+".height:"+ni+"."+vd),Kn})}else return null}function Fo(ln,Gt,Dn){var Pn=ln.static,qn=ln.dynamic;function In(cn){if(cn in Pn){var Ln=Pn[cn];be.commandType(Ln,"object","invalid "+cn,Dn.commandStr);var nn=!0,Kn=Ln.x|0,ni=Ln.y|0,bi,Si;return"width"in Ln?(bi=Ln.width|0,be.command(bi>=0,"invalid "+cn,Dn.commandStr)):nn=!1,"height"in Ln?(Si=Ln.height|0,be.command(Si>=0,"invalid "+cn,Dn.commandStr)):nn=!1,new wa(!nn&&Gt&&Gt.thisDep,!nn&&Gt&&Gt.contextDep,!nn&&Gt&&Gt.propDep,function(kr,mo){var _r=kr.shared.context,qr=bi;"width"in Ln||(qr=mo.def(_r,".",ua,"-",Kn));var ho=Si;return"height"in Ln||(ho=mo.def(_r,".",ql,"-",ni)),[Kn,ni,qr,ho]})}else if(cn in qn){var pi=qn[cn],Hi=ka(pi,function(kr,mo){var _r=kr.invoke(mo,pi);be.optional(function(){kr.assert(mo,_r+"&&typeof "+_r+'==="object"',"invalid "+cn)});var qr=kr.shared.context,ho=mo.def(_r,".x|0"),qo=mo.def(_r,".y|0"),Fs=mo.def('"width" in ',_r,"?",_r,".width|0:","(",qr,".",ua,"-",ho,")"),Ea=mo.def('"height" in ',_r,"?",_r,".height|0:","(",qr,".",ql,"-",qo,")");return be.optional(function(){kr.assert(mo,Fs+">=0&&"+Ea+">=0","invalid "+cn)}),[ho,qo,Fs,Ea]});return Gt&&(Hi.thisDep=Hi.thisDep||Gt.thisDep,Hi.contextDep=Hi.contextDep||Gt.contextDep,Hi.propDep=Hi.propDep||Gt.propDep),Hi}else return Gt?new wa(Gt.thisDep,Gt.contextDep,Gt.propDep,function(kr,mo){var _r=kr.shared.context;return[0,0,mo.def(_r,".",ua),mo.def(_r,".",ql)]}):null}var yn=In(wl);if(yn){var zn=yn;yn=new wa(yn.thisDep,yn.contextDep,yn.propDep,function(cn,Ln){var nn=zn.append(cn,Ln),Kn=cn.shared.context;return Ln.set(Kn,"."+Wu,nn[2]),Ln.set(Kn,"."+Vu,nn[3]),nn})}return{viewport:yn,scissor_box:In(yl)}}function uo(ln,Gt){var Dn=ln.static,Pn=typeof Dn[Uc]=="string"&&typeof Dn[ca]=="string";if(Pn){if(Object.keys(Gt.dynamic).length>0)return null;var qn=Gt.static,In=Object.keys(qn);if(In.length>0&&typeof qn[In[0]]=="number"){for(var yn=[],zn=0;zn<In.length;++zn)be(typeof qn[In[zn]]=="number","must specify all vertex attribute locations when using vaos"),yn.push([qn[In[zn]]|0,In[zn]]);return yn}}return null}function vo(ln,Gt,Dn){var Pn=ln.static,qn=ln.dynamic;function In(nn){if(nn in Pn){var Kn=Qt.id(Pn[nn]);be.optional(function(){zi.shader(As[nn],Kn,be.guessCommand())});var ni=$s(function(){return Kn});return ni.id=Kn,ni}else if(nn in qn){var bi=qn[nn];return ka(bi,function(Si,pi){var Hi=Si.invoke(pi,bi),kr=pi.def(Si.shared.strings,".id(",Hi,")");return be.optional(function(){pi(Si.shared.shader,".shader(",As[nn],",",kr,",",Si.command,");")}),kr})}return null}var yn=In(Uc),zn=In(ca),cn=null,Ln;return Ha(yn)&&Ha(zn)?(cn=zi.program(zn.id,yn.id,null,Dn),Ln=$s(function(nn,Kn){return nn.link(cn)})):Ln=new wa(yn&&yn.thisDep||zn&&zn.thisDep,yn&&yn.contextDep||zn&&zn.contextDep,yn&&yn.propDep||zn&&zn.propDep,function(nn,Kn){var ni=nn.shared.shader,bi;yn?bi=yn.append(nn,Kn):bi=Kn.def(ni,".",Uc);var Si;zn?Si=zn.append(nn,Kn):Si=Kn.def(ni,".",ca);var pi=ni+".program("+Si+","+bi;return be.optional(function(){pi+=","+nn.command}),Kn.def(pi+")")}),{frag:yn,vert:zn,progVar:Ln,program:cn}}function Qo(ln,Gt){var Dn=ln.static,Pn=ln.dynamic;function qn(){if(zc in Dn){var nn=Dn[zc];Ic(nn)?nn=di.getElements(di.create(nn,!0)):nn&&(nn=di.getElements(nn),be.command(nn,"invalid elements",Gt.commandStr));var Kn=$s(function(bi,Si){if(nn){var pi=bi.link(nn);return bi.ELEMENTS=pi,pi}return bi.ELEMENTS=null,null});return Kn.value=nn,Kn}else if(zc in Pn){var ni=Pn[zc];return ka(ni,function(bi,Si){var pi=bi.shared,Hi=pi.isBufferArgs,kr=pi.elements,mo=bi.invoke(Si,ni),_r=Si.def("null"),qr=Si.def(Hi,"(",mo,")"),ho=bi.cond(qr).then(_r,"=",kr,".createStream(",mo,");").else(_r,"=",kr,".getElements(",mo,");");return be.optional(function(){bi.assert(ho.else,"!"+mo+"||"+_r,"invalid elements")}),Si.entry(ho),Si.exit(bi.cond(qr).then(kr,".destroyStream(",_r,");")),bi.ELEMENTS=_r,_r})}return null}var In=qn();function yn(){if(Dc in Dn){var nn=Dn[Dc];return be.commandParameter(nn,gi,"invalid primitve",Gt.commandStr),$s(function(ni,bi){return gi[nn]})}else if(Dc in Pn){var Kn=Pn[Dc];return ka(Kn,function(ni,bi){var Si=ni.constants.primTypes,pi=ni.invoke(bi,Kn);return be.optional(function(){ni.assert(bi,pi+" in "+Si,"invalid primitive, must be one of "+Object.keys(gi))}),bi.def(Si,"[",pi,"]")})}else if(In)return Ha(In)?In.value?$s(function(ni,bi){return bi.def(ni.ELEMENTS,".primType")}):$s(function(){return gu}):new wa(In.thisDep,In.contextDep,In.propDep,function(ni,bi){var Si=ni.ELEMENTS;return bi.def(Si,"?",Si,".primType:",gu)});return null}function zn(nn,Kn){if(nn in Dn){var ni=Dn[nn]|0;return be.command(!Kn||ni>=0,"invalid "+nn,Gt.commandStr),$s(function(Si,pi){return Kn&&(Si.OFFSET=ni),ni})}else if(nn in Pn){var bi=Pn[nn];return ka(bi,function(Si,pi){var Hi=Si.invoke(pi,bi);return Kn&&(Si.OFFSET=Hi,be.optional(function(){Si.assert(pi,Hi+">=0","invalid "+nn)})),Hi})}else if(Kn&&In)return $s(function(Si,pi){return Si.OFFSET="0",0});return null}var cn=zn(zd,!0);function Ln(){if(Pl in Dn){var nn=Dn[Pl]|0;return be.command(typeof nn=="number"&&nn>=0,"invalid vertex count",Gt.commandStr),$s(function(){return nn})}else if(Pl in Pn){var Kn=Pn[Pl];return ka(Kn,function(Si,pi){var Hi=Si.invoke(pi,Kn);return be.optional(function(){Si.assert(pi,"typeof "+Hi+'==="number"&&'+Hi+">=0&&"+Hi+"===("+Hi+"|0)","invalid vertex count")}),Hi})}else if(In)if(Ha(In)){if(In)return cn?new wa(cn.thisDep,cn.contextDep,cn.propDep,function(Si,pi){var Hi=pi.def(Si.ELEMENTS,".vertCount-",Si.OFFSET);return be.optional(function(){Si.assert(pi,Hi+">=0","invalid vertex offset/element buffer too small")}),Hi}):$s(function(Si,pi){return pi.def(Si.ELEMENTS,".vertCount")});var ni=$s(function(){return-1});return be.optional(function(){ni.MISSING=!0}),ni}else{var bi=new wa(In.thisDep||cn.thisDep,In.contextDep||cn.contextDep,In.propDep||cn.propDep,function(Si,pi){var Hi=Si.ELEMENTS;return Si.OFFSET?pi.def(Hi,"?",Hi,".vertCount-",Si.OFFSET,":-1"):pi.def(Hi,"?",Hi,".vertCount:-1")});return be.optional(function(){bi.DYNAMIC=!0}),bi}return null}return{elements:In,primitive:yn(),count:Ln(),instances:zn(Ol,!1),offset:cn}}function Rs(ln,Gt){var Dn=ln.static,Pn=ln.dynamic,qn={};return Ni.forEach(function(In){var yn=Ui(In);function zn(cn,Ln){if(In in Dn){var nn=cn(Dn[In]);qn[yn]=$s(function(){return nn})}else if(In in Pn){var Kn=Pn[In];qn[yn]=ka(Kn,function(ni,bi){return Ln(ni,bi,ni.invoke(bi,Kn))})}}switch(In){case fd:case Sc:case hd:case wh:case bh:case Sh:case Bc:case rf:case Fu:case Ou:return zn(function(cn){return be.commandType(cn,"boolean",In,Gt.commandStr),cn},function(cn,Ln,nn){return be.optional(function(){cn.assert(Ln,"typeof "+nn+'==="boolean"',"invalid flag "+In,cn.commandStr)}),nn});case Da:return zn(function(cn){return be.commandParameter(cn,xc,"invalid "+In,Gt.commandStr),xc[cn]},function(cn,Ln,nn){var Kn=cn.constants.compareFuncs;return be.optional(function(){cn.assert(Ln,nn+" in "+Kn,"invalid "+In+", must be one of "+Object.keys(xc))}),Ln.def(Kn,"[",nn,"]")});case cu:return zn(function(cn){return be.command(Jn(cn)&&cn.length===2&&typeof cn[0]=="number"&&typeof cn[1]=="number"&&cn[0]<=cn[1],"depth range is 2d array",Gt.commandStr),cn},function(cn,Ln,nn){be.optional(function(){cn.assert(Ln,cn.shared.isArrayLike+"("+nn+")&&"+nn+".length===2&&typeof "+nn+'[0]==="number"&&typeof '+nn+'[1]==="number"&&'+nn+"[0]<="+nn+"[1]","depth range must be a 2d array")});var Kn=Ln.def("+",nn,"[0]"),ni=Ln.def("+",nn,"[1]");return[Kn,ni]});case Jl:return zn(function(cn){be.commandType(cn,"object","blend.func",Gt.commandStr);var Ln="srcRGB"in cn?cn.srcRGB:cn.src,nn="srcAlpha"in cn?cn.srcAlpha:cn.src,Kn="dstRGB"in cn?cn.dstRGB:cn.dst,ni="dstAlpha"in cn?cn.dstAlpha:cn.dst;return be.commandParameter(Ln,Yo,yn+".srcRGB",Gt.commandStr),be.commandParameter(nn,Yo,yn+".srcAlpha",Gt.commandStr),be.commandParameter(Kn,Yo,yn+".dstRGB",Gt.commandStr),be.commandParameter(ni,Yo,yn+".dstAlpha",Gt.commandStr),be.command(Xd.indexOf(Ln+", "+Kn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ln+", "+Kn+")",Gt.commandStr),[Yo[Ln],Yo[Kn],Yo[nn],Yo[ni]]},function(cn,Ln,nn){var Kn=cn.constants.blendFuncs;be.optional(function(){cn.assert(Ln,nn+"&&typeof "+nn+'==="object"',"invalid blend func, must be an object")});function ni(_r,qr){var ho=Ln.def('"',_r,qr,'" in ',nn,"?",nn,".",_r,qr,":",nn,".",_r);return be.optional(function(){cn.assert(Ln,ho+" in "+Kn,"invalid "+In+"."+_r+qr+", must be one of "+Object.keys(Yo))}),ho}var bi=ni("src","RGB"),Si=ni("dst","RGB");be.optional(function(){var _r=cn.constants.invalidBlendCombinations;cn.assert(Ln,_r+".indexOf("+bi+'+", "+'+Si+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var pi=Ln.def(Kn,"[",bi,"]"),Hi=Ln.def(Kn,"[",ni("src","Alpha"),"]"),kr=Ln.def(Kn,"[",Si,"]"),mo=Ln.def(Kn,"[",ni("dst","Alpha"),"]");return[pi,kr,Hi,mo]});case Ec:return zn(function(cn){if(typeof cn=="string")return be.commandParameter(cn,fi,"invalid "+In,Gt.commandStr),[fi[cn],fi[cn]];if(typeof cn=="object")return be.commandParameter(cn.rgb,fi,In+".rgb",Gt.commandStr),be.commandParameter(cn.alpha,fi,In+".alpha",Gt.commandStr),[fi[cn.rgb],fi[cn.alpha]];be.commandRaise("invalid blend.equation",Gt.commandStr)},function(cn,Ln,nn){var Kn=cn.constants.blendEquations,ni=Ln.def(),bi=Ln.def(),Si=cn.cond("typeof ",nn,'==="string"');return be.optional(function(){function pi(Hi,kr,mo){cn.assert(Hi,mo+" in "+Kn,"invalid "+kr+", must be one of "+Object.keys(fi))}pi(Si.then,In,nn),cn.assert(Si.else,nn+"&&typeof "+nn+'==="object"',"invalid "+In),pi(Si.else,In+".rgb",nn+".rgb"),pi(Si.else,In+".alpha",nn+".alpha")}),Si.then(ni,"=",bi,"=",Kn,"[",nn,"];"),Si.else(ni,"=",Kn,"[",nn,".rgb];",bi,"=",Kn,"[",nn,".alpha];"),Ln(Si),[ni,bi]});case lu:return zn(function(cn){return be.command(Jn(cn)&&cn.length===4,"blend.color must be a 4d array",Gt.commandStr),Kt(4,function(Ln){return+cn[Ln]})},function(cn,Ln,nn){return be.optional(function(){cn.assert(Ln,cn.shared.isArrayLike+"("+nn+")&&"+nn+".length===4","blend.color must be a 4d array")}),Kt(4,function(Kn){return Ln.def("+",nn,"[",Kn,"]")})});case Lc:return zn(function(cn){return be.commandType(cn,"number",yn,Gt.commandStr),cn|0},function(cn,Ln,nn){return be.optional(function(){cn.assert(Ln,"typeof "+nn+'==="number"',"invalid stencil.mask")}),Ln.def(nn,"|0")});case Wc:return zn(function(cn){be.commandType(cn,"object",yn,Gt.commandStr);var Ln=cn.cmp||"keep",nn=cn.ref||0,Kn="mask"in cn?cn.mask:-1;return be.commandParameter(Ln,xc,In+".cmp",Gt.commandStr),be.commandType(nn,"number",In+".ref",Gt.commandStr),be.commandType(Kn,"number",In+".mask",Gt.commandStr),[xc[Ln],nn,Kn]},function(cn,Ln,nn){var Kn=cn.constants.compareFuncs;be.optional(function(){function pi(){cn.assert(Ln,Array.prototype.join.call(arguments,""),"invalid stencil.func")}pi(nn+"&&typeof ",nn,'==="object"'),pi('!("cmp" in ',nn,")||(",nn,".cmp in ",Kn,")")});var ni=Ln.def('"cmp" in ',nn,"?",Kn,"[",nn,".cmp]",":",rc),bi=Ln.def(nn,".ref|0"),Si=Ln.def('"mask" in ',nn,"?",nn,".mask|0:-1");return[ni,bi,Si]});case Vc:case Bu:return zn(function(cn){be.commandType(cn,"object",yn,Gt.commandStr);var Ln=cn.fail||"keep",nn=cn.zfail||"keep",Kn=cn.zpass||"keep";return be.commandParameter(Ln,oc,In+".fail",Gt.commandStr),be.commandParameter(nn,oc,In+".zfail",Gt.commandStr),be.commandParameter(Kn,oc,In+".zpass",Gt.commandStr),[In===Bu?Bl:ic,oc[Ln],oc[nn],oc[Kn]]},function(cn,Ln,nn){var Kn=cn.constants.stencilOps;be.optional(function(){cn.assert(Ln,nn+"&&typeof "+nn+'==="object"',"invalid "+In)});function ni(bi){return be.optional(function(){cn.assert(Ln,'!("'+bi+'" in '+nn+")||("+nn+"."+bi+" in "+Kn+")","invalid "+In+"."+bi+", must be one of "+Object.keys(oc))}),Ln.def('"',bi,'" in ',nn,"?",Kn,"[",nn,".",bi,"]:",rc)}return[In===Bu?Bl:ic,ni("fail"),ni("zfail"),ni("zpass")]});case md:return zn(function(cn){be.commandType(cn,"object",yn,Gt.commandStr);var Ln=cn.factor|0,nn=cn.units|0;return be.commandType(Ln,"number",yn+".factor",Gt.commandStr),be.commandType(nn,"number",yn+".units",Gt.commandStr),[Ln,nn]},function(cn,Ln,nn){be.optional(function(){cn.assert(Ln,nn+"&&typeof "+nn+'==="object"',"invalid "+In)});var Kn=Ln.def(nn,".factor|0"),ni=Ln.def(nn,".units|0");return[Kn,ni]});case gd:return zn(function(cn){var Ln=0;return cn==="front"?Ln=ic:cn==="back"&&(Ln=Bl),be.command(!!Ln,yn,Gt.commandStr),Ln},function(cn,Ln,nn){return be.optional(function(){cn.assert(Ln,nn+'==="front"||'+nn+'==="back"',"invalid cull.face")}),Ln.def(nn,'==="front"?',ic,":",Bl)});case Xa:return zn(function(cn){return be.command(typeof cn=="number"&&cn>=hi.lineWidthDims[0]&&cn<=hi.lineWidthDims[1],"invalid line width, must be a positive number between "+hi.lineWidthDims[0]+" and "+hi.lineWidthDims[1],Gt.commandStr),cn},function(cn,Ln,nn){return be.optional(function(){cn.assert(Ln,"typeof "+nn+'==="number"&&'+nn+">="+hi.lineWidthDims[0]+"&&"+nn+"<="+hi.lineWidthDims[1],"invalid line width")}),nn});case yh:return zn(function(cn){return be.commandParameter(cn,Wa,yn,Gt.commandStr),Wa[cn]},function(cn,Ln,nn){return be.optional(function(){cn.assert(Ln,nn+'==="cw"||'+nn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ln.def(nn+'==="cw"?'+ig+":"+Sd)});case ku:return zn(function(cn){return be.command(Jn(cn)&&cn.length===4,"color.mask must be length 4 array",Gt.commandStr),cn.map(function(Ln){return!!Ln})},function(cn,Ln,nn){return be.optional(function(){cn.assert(Ln,cn.shared.isArrayLike+"("+nn+")&&"+nn+".length===4","invalid color.mask")}),Kt(4,function(Kn){return"!!"+nn+"["+Kn+"]"})});case uu:return zn(function(cn){be.command(typeof cn=="object"&&cn,yn,Gt.commandStr);var Ln="value"in cn?cn.value:1,nn=!!cn.invert;return be.command(typeof Ln=="number"&&Ln>=0&&Ln<=1,"sample.coverage.value must be a number between 0 and 1",Gt.commandStr),[Ln,nn]},function(cn,Ln,nn){be.optional(function(){cn.assert(Ln,nn+"&&typeof "+nn+'==="object"',"invalid sample.coverage")});var Kn=Ln.def('"value" in ',nn,"?+",nn,".value:1"),ni=Ln.def("!!",nn,".invert");return[Kn,ni]})}}),qn}function ha(ln,Gt){var Dn=ln.static,Pn=ln.dynamic,qn={};return Object.keys(Dn).forEach(function(In){var yn=Dn[In],zn;if(typeof yn=="number"||typeof yn=="boolean")zn=$s(function(){return yn});else if(typeof yn=="function"){var cn=yn._reglType;cn==="texture2d"||cn==="textureCube"?zn=$s(function(Ln){return Ln.link(yn)}):cn==="framebuffer"||cn==="framebufferCube"?(be.command(yn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+In+'"',Gt.commandStr),zn=$s(function(Ln){return Ln.link(yn.color[0])})):be.commandRaise('invalid data for uniform "'+In+'"',Gt.commandStr)}else Jn(yn)?zn=$s(function(Ln){var nn=Ln.global.def("[",Kt(yn.length,function(Kn){return be.command(typeof yn[Kn]=="number"||typeof yn[Kn]=="boolean","invalid uniform "+In,Ln.commandStr),yn[Kn]}),"]");return nn}):be.commandRaise('invalid or missing data for uniform "'+In+'"',Gt.commandStr);zn.value=yn,qn[In]=zn}),Object.keys(Pn).forEach(function(In){var yn=Pn[In];qn[In]=ka(yn,function(zn,cn){return zn.invoke(cn,yn)})}),qn}function Go(ln,Gt){var Dn=ln.static,Pn=ln.dynamic,qn={};return Object.keys(Dn).forEach(function(In){var yn=Dn[In],zn=Qt.id(In),cn=new Yn;if(Ic(yn))cn.state=La,cn.buffer=Ei.getBuffer(Ei.create(yn,Hc,!1,!0)),cn.type=0;else{var Ln=Ei.getBuffer(yn);if(Ln)cn.state=La,cn.buffer=Ln,cn.type=0;else if(be.command(typeof yn=="object"&&yn,"invalid data for attribute "+In,Gt.commandStr),"constant"in yn){var nn=yn.constant;cn.buffer="null",cn.state=vh,typeof nn=="number"?cn.x=nn:(be.command(Jn(nn)&&nn.length>0&&nn.length<=4,"invalid constant for attribute "+In,Gt.commandStr),Ls.forEach(function(kr,mo){mo<nn.length&&(cn[kr]=nn[mo])}))}else{Ic(yn.buffer)?Ln=Ei.getBuffer(Ei.create(yn.buffer,Hc,!1,!0)):Ln=Ei.getBuffer(yn.buffer),be.command(!!Ln,'missing buffer for attribute "'+In+'"',Gt.commandStr);var Kn=yn.offset|0;be.command(Kn>=0,'invalid offset for attribute "'+In+'"',Gt.commandStr);var ni=yn.stride|0;be.command(ni>=0&&ni<256,'invalid stride for attribute "'+In+'", must be integer betweeen [0, 255]',Gt.commandStr);var bi=yn.size|0;be.command(!("size"in yn)||bi>0&&bi<=4,'invalid size for attribute "'+In+'", must be 1,2,3,4',Gt.commandStr);var Si=!!yn.normalized,pi=0;"type"in yn&&(be.commandParameter(yn.type,en,"invalid type for attribute "+In,Gt.commandStr),pi=en[yn.type]);var Hi=yn.divisor|0;"divisor"in yn&&(be.command(Hi===0||$i,'cannot specify divisor for attribute "'+In+'", instancing not supported',Gt.commandStr),be.command(Hi>=0,'invalid divisor for attribute "'+In+'"',Gt.commandStr)),be.optional(function(){var kr=Gt.commandStr,mo=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(yn).forEach(function(_r){be.command(mo.indexOf(_r)>=0,'unknown parameter "'+_r+'" for attribute pointer "'+In+'" (valid parameters are '+mo+")",kr)})}),cn.buffer=Ln,cn.state=La,cn.size=bi,cn.normalized=Si,cn.type=pi||Ln.dtype,cn.offset=Kn,cn.stride=ni,cn.divisor=Hi}}qn[In]=$s(function(kr,mo){var _r=kr.attribCache;if(zn in _r)return _r[zn];var qr={isStream:!1};return Object.keys(cn).forEach(function(ho){qr[ho]=cn[ho]}),cn.buffer&&(qr.buffer=kr.link(cn.buffer),qr.type=qr.type||qr.buffer+".dtype"),_r[zn]=qr,qr})}),Object.keys(Pn).forEach(function(In){var yn=Pn[In];function zn(cn,Ln){var nn=cn.invoke(Ln,yn),Kn=cn.shared,ni=cn.constants,bi=Kn.isBufferArgs,Si=Kn.buffer;be.optional(function(){cn.assert(Ln,nn+"&&(typeof "+nn+'==="object"||typeof '+nn+'==="function")&&('+bi+"("+nn+")||"+Si+".getBuffer("+nn+")||"+Si+".getBuffer("+nn+".buffer)||"+bi+"("+nn+'.buffer)||("constant" in '+nn+"&&(typeof "+nn+'.constant==="number"||'+Kn.isArrayLike+"("+nn+".constant))))",'invalid dynamic attribute "'+In+'"')});var pi={isStream:Ln.def(!1)},Hi=new Yn;Hi.state=La,Object.keys(Hi).forEach(function(qr){pi[qr]=Ln.def(""+Hi[qr])});var kr=pi.buffer,mo=pi.type;Ln("if(",bi,"(",nn,")){",pi.isStream,"=true;",kr,"=",Si,".createStream(",Hc,",",nn,");",mo,"=",kr,".dtype;","}else{",kr,"=",Si,".getBuffer(",nn,");","if(",kr,"){",mo,"=",kr,".dtype;",'}else if("constant" in ',nn,"){",pi.state,"=",vh,";","if(typeof "+nn+'.constant === "number"){',pi[Ls[0]],"=",nn,".constant;",Ls.slice(1).map(function(qr){return pi[qr]}).join("="),"=0;","}else{",Ls.map(function(qr,ho){return pi[qr]+"="+nn+".constant.length>"+ho+"?"+nn+".constant["+ho+"]:0;"}).join(""),"}}else{","if(",bi,"(",nn,".buffer)){",kr,"=",Si,".createStream(",Hc,",",nn,".buffer);","}else{",kr,"=",Si,".getBuffer(",nn,".buffer);","}",mo,'="type" in ',nn,"?",ni.glTypes,"[",nn,".type]:",kr,".dtype;",pi.normalized,"=!!",nn,".normalized;");function _r(qr){Ln(pi[qr],"=",nn,".",qr,"|0;")}return _r("size"),_r("offset"),_r("stride"),_r("divisor"),Ln("}}"),Ln.exit("if(",pi.isStream,"){",Si,".destroyStream(",kr,");","}"),pi}qn[In]=ka(yn,zn)}),qn}function Us(ln,Gt){var Dn=ln.static,Pn=ln.dynamic;if(pd in Dn){var qn=Dn[pd];return qn!==null&&Ki.getVAO(qn)===null&&(qn=Ki.createVAO(qn)),$s(function(yn){return yn.link(Ki.getVAO(qn))})}else if(pd in Pn){var In=Pn[pd];return ka(In,function(yn,zn){var cn=yn.invoke(zn,In);return zn.def(yn.shared.vao+".getVAO("+cn+")")})}return null}function vs(ln){var Gt=ln.static,Dn=ln.dynamic,Pn={};return Object.keys(Gt).forEach(function(qn){var In=Gt[qn];Pn[qn]=$s(function(yn,zn){return typeof In=="number"||typeof In=="boolean"?""+In:yn.link(In)})}),Object.keys(Dn).forEach(function(qn){var In=Dn[qn];Pn[qn]=ka(In,function(yn,zn){return yn.invoke(zn,In)})}),Pn}function Ps(ln,Gt,Dn,Pn,qn){var In=ln.static,yn=ln.dynamic;be.optional(function(){var _r=[ya,ca,Uc,zc,Dc,zd,Pl,Ol,du,pd].concat(Ni);function qr(ho){Object.keys(ho).forEach(function(qo){be.command(_r.indexOf(qo)>=0,'unknown parameter "'+qo+'"',qn.commandStr)})}qr(In),qr(yn)});var zn=uo(ln,Gt),cn=br(ln,qn),Ln=Fo(ln,cn,qn),nn=Qo(ln,qn),Kn=Rs(ln,qn),ni=vo(ln,qn,zn);function bi(_r){var qr=Ln[_r];qr&&(Kn[_r]=qr)}bi(wl),bi(Ui(yl));var Si=Object.keys(Kn).length>0,pi={framebuffer:cn,draw:nn,shader:ni,state:Kn,dirty:Si,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(pi.profile=Eo(ln,qn),pi.uniforms=ha(Dn,qn),pi.drawVAO=pi.scopeVAO=Us(ln,qn),!pi.drawVAO&&ni.program&&!zn&&Cn.angle_instanced_arrays){var Hi=!0,kr=ni.program.attributes.map(function(_r){var qr=Gt.static[_r];return Hi=Hi&&!!qr,qr});if(Hi&&kr.length>0){var mo=Ki.getVAO(Ki.createVAO(kr));pi.drawVAO=new wa(null,null,null,function(_r,qr){return _r.link(mo)}),pi.useVAO=!0}}return zn?pi.useVAO=!0:pi.attributes=Go(Gt,qn),pi.context=vs(Pn,qn),pi}function Do(ln,Gt,Dn){var Pn=ln.shared,qn=Pn.context,In=ln.scope();Object.keys(Dn).forEach(function(yn){Gt.save(qn,"."+yn);var zn=Dn[yn],cn=zn.append(ln,Gt);Array.isArray(cn)?In(qn,".",yn,"=[",cn.join(),"];"):In(qn,".",yn,"=",cn,";")}),Gt(In)}function oa(ln,Gt,Dn,Pn){var qn=ln.shared,In=qn.gl,yn=qn.framebuffer,zn;ar&&(zn=Gt.def(qn.extensions,".webgl_draw_buffers"));var cn=ln.constants,Ln=cn.drawBuffer,nn=cn.backBuffer,Kn;Dn?Kn=Dn.append(ln,Gt):Kn=Gt.def(yn,".next"),Pn||Gt("if(",Kn,"!==",yn,".cur){"),Gt("if(",Kn,"){",In,".bindFramebuffer(",Ms,",",Kn,".framebuffer);"),ar&&Gt(zn,".drawBuffersWEBGL(",Ln,"[",Kn,".colorAttachments.length]);"),Gt("}else{",In,".bindFramebuffer(",Ms,",null);"),ar&&Gt(zn,".drawBuffersWEBGL(",nn,");"),Gt("}",yn,".cur=",Kn,";"),Pn||Gt("}")}function Sa(ln,Gt,Dn){var Pn=ln.shared,qn=Pn.gl,In=ln.current,yn=ln.next,zn=Pn.current,cn=Pn.next,Ln=ln.cond(zn,".dirty");Ni.forEach(function(nn){var Kn=Ui(nn);if(!(Kn in Dn.state)){var ni,bi;if(Kn in yn){ni=yn[Kn],bi=In[Kn];var Si=Kt(Mi[Kn].length,function(Hi){return Ln.def(ni,"[",Hi,"]")});Ln(ln.cond(Si.map(function(Hi,kr){return Hi+"!=="+bi+"["+kr+"]"}).join("||")).then(qn,".",Ri[Kn],"(",Si,");",Si.map(function(Hi,kr){return bi+"["+kr+"]="+Hi}).join(";"),";"))}else{ni=Ln.def(cn,".",Kn);var pi=ln.cond(ni,"!==",zn,".",Kn);Ln(pi),Kn in qi?pi(ln.cond(ni).then(qn,".enable(",qi[Kn],");").else(qn,".disable(",qi[Kn],");"),zn,".",Kn,"=",ni,";"):pi(qn,".",Ri[Kn],"(",ni,");",zn,".",Kn,"=",ni,";")}}}),Object.keys(Dn.state).length===0&&Ln(zn,".dirty=false;"),Gt(Ln)}function fa(ln,Gt,Dn,Pn){var qn=ln.shared,In=ln.current,yn=qn.current,zn=qn.gl;sc(Object.keys(Dn)).forEach(function(cn){var Ln=Dn[cn];if(!(Pn&&!Pn(Ln))){var nn=Ln.append(ln,Gt);if(qi[cn]){var Kn=qi[cn];Ha(Ln)?nn?Gt(zn,".enable(",Kn,");"):Gt(zn,".disable(",Kn,");"):Gt(ln.cond(nn).then(zn,".enable(",Kn,");").else(zn,".disable(",Kn,");")),Gt(yn,".",cn,"=",nn,";")}else if(Jn(nn)){var ni=In[cn];Gt(zn,".",Ri[cn],"(",nn,");",nn.map(function(bi,Si){return ni+"["+Si+"]="+bi}).join(";"),";")}else Gt(zn,".",Ri[cn],"(",nn,");",yn,".",cn,"=",nn,";")}})}function zs(ln,Gt){$i&&(ln.instancing=Gt.def(ln.shared.extensions,".angle_instanced_arrays"))}function _o(ln,Gt,Dn,Pn,qn){var In=ln.shared,yn=ln.stats,zn=In.current,cn=In.timer,Ln=Dn.profile;function nn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Kn,ni;function bi(_r){Kn=Gt.def(),_r(Kn,"=",nn(),";"),typeof qn=="string"?_r(yn,".count+=",qn,";"):_r(yn,".count++;"),Oi&&(Pn?(ni=Gt.def(),_r(ni,"=",cn,".getNumPendingQueries();")):_r(cn,".beginQuery(",yn,");"))}function Si(_r){_r(yn,".cpuTime+=",nn(),"-",Kn,";"),Oi&&(Pn?_r(cn,".pushScopeStats(",ni,",",cn,".getNumPendingQueries(),",yn,");"):_r(cn,".endQuery();"))}function pi(_r){var qr=Gt.def(zn,".profile");Gt(zn,".profile=",_r,";"),Gt.exit(zn,".profile=",qr,";")}var Hi;if(Ln){if(Ha(Ln)){Ln.enable?(bi(Gt),Si(Gt.exit),pi("true")):pi("false");return}Hi=Ln.append(ln,Gt),pi(Hi)}else Hi=Gt.def(zn,".profile");var kr=ln.block();bi(kr),Gt("if(",Hi,"){",kr,"}");var mo=ln.block();Si(mo),Gt.exit("if(",Hi,"){",mo,"}")}function Qs(ln,Gt,Dn,Pn,qn){var In=ln.shared;function yn(cn){switch(cn){case Cd:case yd:case zu:return 2;case bd:case Kd:case $d:return 3;case kl:case tc:case Hu:return 4;default:return 1}}function zn(cn,Ln,nn){var Kn=In.gl,ni=Gt.def(cn,".location"),bi=Gt.def(In.attributes,"[",ni,"]"),Si=nn.state,pi=nn.buffer,Hi=[nn.x,nn.y,nn.z,nn.w],kr=["buffer","normalized","offset","stride"];function mo(){Gt("if(!",bi,".buffer){",Kn,".enableVertexAttribArray(",ni,");}");var qr=nn.type,ho;if(nn.size?ho=Gt.def(nn.size,"||",Ln):ho=Ln,Gt("if(",bi,".type!==",qr,"||",bi,".size!==",ho,"||",kr.map(function(Fs){return bi+"."+Fs+"!=="+nn[Fs]}).join("||"),"){",Kn,".bindBuffer(",Hc,",",pi,".buffer);",Kn,".vertexAttribPointer(",[ni,ho,qr,nn.normalized,nn.stride,nn.offset],");",bi,".type=",qr,";",bi,".size=",ho,";",kr.map(function(Fs){return bi+"."+Fs+"="+nn[Fs]+";"}).join(""),"}"),$i){var qo=nn.divisor;Gt("if(",bi,".divisor!==",qo,"){",ln.instancing,".vertexAttribDivisorANGLE(",[ni,qo],");",bi,".divisor=",qo,";}")}}function _r(){Gt("if(",bi,".buffer){",Kn,".disableVertexAttribArray(",ni,");",bi,".buffer=null;","}if(",Ls.map(function(qr,ho){return bi+"."+qr+"!=="+Hi[ho]}).join("||"),"){",Kn,".vertexAttrib4f(",ni,",",Hi,");",Ls.map(function(qr,ho){return bi+"."+qr+"="+Hi[ho]+";"}).join(""),"}")}Si===La?mo():Si===vh?_r():(Gt("if(",Si,"===",La,"){"),mo(),Gt("}else{"),_r(),Gt("}"))}Pn.forEach(function(cn){var Ln=cn.name,nn=Dn.attributes[Ln],Kn;if(nn){if(!qn(nn))return;Kn=nn.append(ln,Gt)}else{if(!qn(Ih))return;var ni=ln.scopeAttrib(Ln);be.optional(function(){ln.assert(Gt,ni+".state","missing attribute "+Ln)}),Kn={},Object.keys(new Yn).forEach(function(bi){Kn[bi]=Gt.def(ni,".",bi)})}zn(ln.link(cn),yn(cn.info.type),Kn)})}function Xo(ln,Gt,Dn,Pn,qn){for(var In=ln.shared,yn=In.gl,zn,cn=0;cn<Pn.length;++cn){var Ln=Pn[cn],nn=Ln.name,Kn=Ln.info.type,ni=Dn.uniforms[nn],bi=ln.link(Ln),Si=bi+".location",pi;if(ni){if(!qn(ni))continue;if(Ha(ni)){var Hi=ni.value;if(be.command(Hi!==null&&typeof Hi!="undefined",'missing uniform "'+nn+'"',ln.commandStr),Kn===nc||Kn===Fl){be.command(typeof Hi=="function"&&(Kn===nc&&(Hi._reglType==="texture2d"||Hi._reglType==="framebuffer")||Kn===Fl&&(Hi._reglType==="textureCube"||Hi._reglType==="framebufferCube")),"invalid texture for uniform "+nn,ln.commandStr);var kr=ln.link(Hi._texture||Hi.color[0]._texture);Gt(yn,".uniform1i(",Si,",",kr+".bind());"),Gt.exit(kr,".unbind();")}else if(Kn===da||Kn===jc||Kn===wd){be.optional(function(){be.command(Jn(Hi),"invalid matrix for uniform "+nn,ln.commandStr),be.command(Kn===da&&Hi.length===4||Kn===jc&&Hi.length===9||Kn===wd&&Hi.length===16,"invalid length for matrix uniform "+nn,ln.commandStr)});var mo=ln.global.def("new Float32Array(["+Array.prototype.slice.call(Hi)+"])"),_r=2;Kn===jc?_r=3:Kn===wd&&(_r=4),Gt(yn,".uniformMatrix",_r,"fv(",Si,",false,",mo,");")}else{switch(Kn){case jd:be.commandType(Hi,"number","uniform "+nn,ln.commandStr),zn="1f";break;case Cd:be.command(Jn(Hi)&&Hi.length===2,"uniform "+nn,ln.commandStr),zn="2f";break;case bd:be.command(Jn(Hi)&&Hi.length===3,"uniform "+nn,ln.commandStr),zn="3f";break;case kl:be.command(Jn(Hi)&&Hi.length===4,"uniform "+nn,ln.commandStr),zn="4f";break;case xh:be.commandType(Hi,"boolean","uniform "+nn,ln.commandStr),zn="1i";break;case Uu:be.commandType(Hi,"number","uniform "+nn,ln.commandStr),zn="1i";break;case zu:be.command(Jn(Hi)&&Hi.length===2,"uniform "+nn,ln.commandStr),zn="2i";break;case yd:be.command(Jn(Hi)&&Hi.length===2,"uniform "+nn,ln.commandStr),zn="2i";break;case $d:be.command(Jn(Hi)&&Hi.length===3,"uniform "+nn,ln.commandStr),zn="3i";break;case Kd:be.command(Jn(Hi)&&Hi.length===3,"uniform "+nn,ln.commandStr),zn="3i";break;case Hu:be.command(Jn(Hi)&&Hi.length===4,"uniform "+nn,ln.commandStr),zn="4i";break;case tc:be.command(Jn(Hi)&&Hi.length===4,"uniform "+nn,ln.commandStr),zn="4i";break}Gt(yn,".uniform",zn,"(",Si,",",Jn(Hi)?Array.prototype.slice.call(Hi):Hi,");")}continue}else pi=ni.append(ln,Gt)}else{if(!qn(Ih))continue;pi=Gt.def(In.uniforms,"[",Qt.id(nn),"]")}Kn===nc?(be(!Array.isArray(pi),"must specify a scalar prop for textures"),Gt("if(",pi,"&&",pi,'._reglType==="framebuffer"){',pi,"=",pi,".color[0];","}")):Kn===Fl&&(be(!Array.isArray(pi),"must specify a scalar prop for cube maps"),Gt("if(",pi,"&&",pi,'._reglType==="framebufferCube"){',pi,"=",pi,".color[0];","}")),be.optional(function(){function Ea(Sl,pu){ln.assert(Gt,Sl,'bad data or missing for uniform "'+nn+'".  '+pu)}function Ku(Sl){be(!Array.isArray(pi),"must not specify an array type for uniform"),Ea("typeof "+pi+'==="'+Sl+'"',"invalid type, expected "+Sl)}function al(Sl,pu){Array.isArray(pi)?be(pi.length===Sl,"must have length "+Sl):Ea(In.isArrayLike+"("+pi+")&&"+pi+".length==="+Sl,"invalid vector, should have length "+Sl,ln.commandStr)}function pf(Sl){be(!Array.isArray(pi),"must not specify a value type"),Ea("typeof "+pi+'==="function"&&'+pi+'._reglType==="texture'+(Sl===of?"2d":"Cube")+'"',"invalid texture type",ln.commandStr)}switch(Kn){case Uu:Ku("number");break;case yd:al(2,"number");break;case Kd:al(3,"number");break;case tc:al(4,"number");break;case jd:Ku("number");break;case Cd:al(2,"number");break;case bd:al(3,"number");break;case kl:al(4,"number");break;case xh:Ku("boolean");break;case zu:al(2,"boolean");break;case $d:al(3,"boolean");break;case Hu:al(4,"boolean");break;case da:al(4,"number");break;case jc:al(9,"number");break;case wd:al(16,"number");break;case nc:pf(of);break;case Fl:pf(sf);break}});var qr=1;switch(Kn){case nc:case Fl:var ho=Gt.def(pi,"._texture");Gt(yn,".uniform1i(",Si,",",ho,".bind());"),Gt.exit(ho,".unbind();");continue;case Uu:case xh:zn="1i";break;case yd:case zu:zn="2i",qr=2;break;case Kd:case $d:zn="3i",qr=3;break;case tc:case Hu:zn="4i",qr=4;break;case jd:zn="1f";break;case Cd:zn="2f",qr=2;break;case bd:zn="3f",qr=3;break;case kl:zn="4f",qr=4;break;case da:zn="Matrix2fv";break;case jc:zn="Matrix3fv";break;case wd:zn="Matrix4fv";break}if(Gt(yn,".uniform",zn,"(",Si,","),zn.charAt(0)==="M"){var qo=Math.pow(Kn-da+2,2),Fs=ln.global.def("new Float32Array(",qo,")");Array.isArray(pi)?Gt("false,(",Kt(qo,function(Ea){return Fs+"["+Ea+"]="+pi[Ea]}),",",Fs,")"):Gt("false,(Array.isArray(",pi,")||",pi," instanceof Float32Array)?",pi,":(",Kt(qo,function(Ea){return Fs+"["+Ea+"]="+pi+"["+Ea+"]"}),",",Fs,")")}else qr>1?Gt(Kt(qr,function(Ea){return Array.isArray(pi)?pi[Ea]:pi+"["+Ea+"]"})):(be(!Array.isArray(pi),"uniform value must not be an array"),Gt(pi));Gt(");")}}function Zr(ln,Gt,Dn,Pn){var qn=ln.shared,In=qn.gl,yn=qn.draw,zn=Pn.draw;function cn(){var ho=zn.elements,qo,Fs=Gt;return ho?((ho.contextDep&&Pn.contextDynamic||ho.propDep)&&(Fs=Dn),qo=ho.append(ln,Fs)):qo=Fs.def(yn,".",zc),qo&&Fs("if("+qo+")"+In+".bindBuffer("+Eh+","+qo+".buffer.buffer);"),qo}function Ln(){var ho=zn.count,qo,Fs=Gt;return ho?((ho.contextDep&&Pn.contextDynamic||ho.propDep)&&(Fs=Dn),qo=ho.append(ln,Fs),be.optional(function(){ho.MISSING&&ln.assert(Gt,"false","missing vertex count"),ho.DYNAMIC&&ln.assert(Fs,qo+">=0","missing vertex count")})):(qo=Fs.def(yn,".",Pl),be.optional(function(){ln.assert(Fs,qo+">=0","missing vertex count")})),qo}var nn=cn();function Kn(ho){var qo=zn[ho];return qo?qo.contextDep&&Pn.contextDynamic||qo.propDep?qo.append(ln,Dn):qo.append(ln,Gt):Gt.def(yn,".",ho)}var ni=Kn(Dc),bi=Kn(zd),Si=Ln();if(typeof Si=="number"){if(Si===0)return}else Dn("if(",Si,"){"),Dn.exit("}");var pi,Hi;$i&&(pi=Kn(Ol),Hi=ln.instancing);var kr=nn+".type",mo=zn.elements&&Ha(zn.elements);function _r(){function ho(){Dn(Hi,".drawElementsInstancedANGLE(",[ni,Si,kr,bi+"<<(("+kr+"-"+Ts+")>>1)",pi],");")}function qo(){Dn(Hi,".drawArraysInstancedANGLE(",[ni,bi,Si,pi],");")}nn?mo?ho():(Dn("if(",nn,"){"),ho(),Dn("}else{"),qo(),Dn("}")):qo()}function qr(){function ho(){Dn(In+".drawElements("+[ni,Si,kr,bi+"<<(("+kr+"-"+Ts+")>>1)"]+");")}function qo(){Dn(In+".drawArrays("+[ni,bi,Si]+");")}nn?mo?ho():(Dn("if(",nn,"){"),ho(),Dn("}else{"),qo(),Dn("}")):qo()}$i&&(typeof pi!="number"||pi>=0)?typeof pi=="string"?(Dn("if(",pi,">0){"),_r(),Dn("}else if(",pi,"<0){"),qr(),Dn("}")):_r():qr()}function Co(ln,Gt,Dn,Pn,qn){var In=Yr(),yn=In.proc("body",qn);return be.optional(function(){In.commandStr=Gt.commandStr,In.command=In.link(Gt.commandStr)}),$i&&(In.instancing=yn.def(In.shared.extensions,".angle_instanced_arrays")),ln(In,yn,Dn,Pn),In.compile().body}function Jo(ln,Gt,Dn,Pn){zs(ln,Gt),Dn.useVAO?Dn.drawVAO?Gt(ln.shared.vao,".setVAO(",Dn.drawVAO.append(ln,Gt),");"):Gt(ln.shared.vao,".setVAO(",ln.shared.vao,".targetVAO);"):(Gt(ln.shared.vao,".setVAO(null);"),Qs(ln,Gt,Dn,Pn.attributes,function(){return!0})),Xo(ln,Gt,Dn,Pn.uniforms,function(){return!0}),Zr(ln,Gt,Gt,Dn)}function Js(ln,Gt){var Dn=ln.proc("draw",1);zs(ln,Dn),Do(ln,Dn,Gt.context),oa(ln,Dn,Gt.framebuffer),Sa(ln,Dn,Gt),fa(ln,Dn,Gt.state),_o(ln,Dn,Gt,!1,!0);var Pn=Gt.shader.progVar.append(ln,Dn);if(Dn(ln.shared.gl,".useProgram(",Pn,".program);"),Gt.shader.program)Jo(ln,Dn,Gt,Gt.shader.program);else{Dn(ln.shared.vao,".setVAO(null);");var qn=ln.global.def("{}"),In=Dn.def(Pn,".id"),yn=Dn.def(qn,"[",In,"]");Dn(ln.cond(yn).then(yn,".call(this,a0);").else(yn,"=",qn,"[",In,"]=",ln.link(function(zn){return Co(Jo,ln,Gt,zn,1)}),"(",Pn,");",yn,".call(this,a0);"))}Object.keys(Gt.state).length>0&&Dn(ln.shared.current,".dirty=true;")}function Ul(ln,Gt,Dn,Pn){ln.batchId="a1",zs(ln,Gt);function qn(){return!0}Qs(ln,Gt,Dn,Pn.attributes,qn),Xo(ln,Gt,Dn,Pn.uniforms,qn),Zr(ln,Gt,Gt,Dn)}function Kc(ln,Gt,Dn,Pn){zs(ln,Gt);var qn=Dn.contextDep,In=Gt.def(),yn="a0",zn="a1",cn=Gt.def();ln.shared.props=cn,ln.batchId=In;var Ln=ln.scope(),nn=ln.scope();Gt(Ln.entry,"for(",In,"=0;",In,"<",zn,";++",In,"){",cn,"=",yn,"[",In,"];",nn,"}",Ln.exit);function Kn(kr){return kr.contextDep&&qn||kr.propDep}function ni(kr){return!Kn(kr)}if(Dn.needsContext&&Do(ln,nn,Dn.context),Dn.needsFramebuffer&&oa(ln,nn,Dn.framebuffer),fa(ln,nn,Dn.state,Kn),Dn.profile&&Kn(Dn.profile)&&_o(ln,nn,Dn,!1,!0),Pn)Dn.useVAO?Dn.drawVAO?Kn(Dn.drawVAO)?nn(ln.shared.vao,".setVAO(",Dn.drawVAO.append(ln,nn),");"):Ln(ln.shared.vao,".setVAO(",Dn.drawVAO.append(ln,Ln),");"):Ln(ln.shared.vao,".setVAO(",ln.shared.vao,".targetVAO);"):(Ln(ln.shared.vao,".setVAO(null);"),Qs(ln,Ln,Dn,Pn.attributes,ni),Qs(ln,nn,Dn,Pn.attributes,Kn)),Xo(ln,Ln,Dn,Pn.uniforms,ni),Xo(ln,nn,Dn,Pn.uniforms,Kn),Zr(ln,Ln,nn,Dn);else{var bi=ln.global.def("{}"),Si=Dn.shader.progVar.append(ln,nn),pi=nn.def(Si,".id"),Hi=nn.def(bi,"[",pi,"]");nn(ln.shared.gl,".useProgram(",Si,".program);","if(!",Hi,"){",Hi,"=",bi,"[",pi,"]=",ln.link(function(kr){return Co(Ul,ln,Dn,kr,2)}),"(",Si,");}",Hi,".call(this,a0[",In,"],",In,");")}}function gn(ln,Gt){var Dn=ln.proc("batch",2);ln.batchId="0",zs(ln,Dn);var Pn=!1,qn=!0;Object.keys(Gt.context).forEach(function(bi){Pn=Pn||Gt.context[bi].propDep}),Pn||(Do(ln,Dn,Gt.context),qn=!1);var In=Gt.framebuffer,yn=!1;In?(In.propDep?Pn=yn=!0:In.contextDep&&Pn&&(yn=!0),yn||oa(ln,Dn,In)):oa(ln,Dn,null),Gt.state.viewport&&Gt.state.viewport.propDep&&(Pn=!0);function zn(bi){return bi.contextDep&&Pn||bi.propDep}Sa(ln,Dn,Gt),fa(ln,Dn,Gt.state,function(bi){return!zn(bi)}),(!Gt.profile||!zn(Gt.profile))&&_o(ln,Dn,Gt,!1,"a1"),Gt.contextDep=Pn,Gt.needsContext=qn,Gt.needsFramebuffer=yn;var cn=Gt.shader.progVar;if(cn.contextDep&&Pn||cn.propDep)Kc(ln,Dn,Gt,null);else{var Ln=cn.append(ln,Dn);if(Dn(ln.shared.gl,".useProgram(",Ln,".program);"),Gt.shader.program)Kc(ln,Dn,Gt,Gt.shader.program);else{Dn(ln.shared.vao,".setVAO(null);");var nn=ln.global.def("{}"),Kn=Dn.def(Ln,".id"),ni=Dn.def(nn,"[",Kn,"]");Dn(ln.cond(ni).then(ni,".call(this,a0,a1);").else(ni,"=",nn,"[",Kn,"]=",ln.link(function(bi){return Co(Kc,ln,Gt,bi,2)}),"(",Ln,");",ni,".call(this,a0,a1);"))}}Object.keys(Gt.state).length>0&&Dn(ln.shared.current,".dirty=true;")}function ai(ln,Gt){var Dn=ln.proc("scope",3);ln.batchId="a2";var Pn=ln.shared,qn=Pn.current;Do(ln,Dn,Gt.context),Gt.framebuffer&&Gt.framebuffer.append(ln,Dn),sc(Object.keys(Gt.state)).forEach(function(yn){var zn=Gt.state[yn],cn=zn.append(ln,Dn);Jn(cn)?cn.forEach(function(Ln,nn){Dn.set(ln.next[yn],"["+nn+"]",Ln)}):Dn.set(Pn.next,"."+yn,cn)}),_o(ln,Dn,Gt,!0,!0),[zc,zd,Pl,Ol,Dc].forEach(function(yn){var zn=Gt.draw[yn];!zn||Dn.set(Pn.draw,"."+yn,""+zn.append(ln,Dn))}),Object.keys(Gt.uniforms).forEach(function(yn){var zn=Gt.uniforms[yn].append(ln,Dn);Array.isArray(zn)&&(zn="["+zn.join()+"]"),Dn.set(Pn.uniforms,"["+Qt.id(yn)+"]",zn)}),Object.keys(Gt.attributes).forEach(function(yn){var zn=Gt.attributes[yn].append(ln,Dn),cn=ln.scopeAttrib(yn);Object.keys(new Yn).forEach(function(Ln){Dn.set(cn,"."+Ln,zn[Ln])})}),Gt.scopeVAO&&Dn.set(Pn.vao,".targetVAO",Gt.scopeVAO.append(ln,Dn));function In(yn){var zn=Gt.shader[yn];zn&&Dn.set(Pn.shader,"."+yn,zn.append(ln,Dn))}In(ca),In(Uc),Object.keys(Gt.state).length>0&&(Dn(qn,".dirty=true;"),Dn.exit(qn,".dirty=true;")),Dn("a1(",ln.shared.context,",a0,",ln.batchId,");")}function ci(ln){if(!(typeof ln!="object"||Jn(ln))){for(var Gt=Object.keys(ln),Dn=0;Dn<Gt.length;++Dn)if(at.isDynamic(ln[Gt[Dn]]))return!0;return!1}}function pr(ln,Gt,Dn){var Pn=Gt.static[Dn];if(!Pn||!ci(Pn))return;var qn=ln.global,In=Object.keys(Pn),yn=!1,zn=!1,cn=!1,Ln=ln.global.def("{}");In.forEach(function(Kn){var ni=Pn[Kn];if(at.isDynamic(ni)){typeof ni=="function"&&(ni=Pn[Kn]=at.unbox(ni));var bi=ka(ni,null);yn=yn||bi.thisDep,cn=cn||bi.propDep,zn=zn||bi.contextDep}else{switch(qn(Ln,".",Kn,"="),typeof ni){case"number":qn(ni);break;case"string":qn('"',ni,'"');break;case"object":Array.isArray(ni)&&qn("[",ni.join(),"]");break;default:qn(ln.link(ni));break}qn(";")}});function nn(Kn,ni){In.forEach(function(bi){var Si=Pn[bi];if(!!at.isDynamic(Si)){var pi=Kn.invoke(ni,Si);ni(Ln,".",bi,"=",pi,";")}})}Gt.dynamic[Dn]=new at.DynamicVariable(Pu,{thisDep:yn,contextDep:zn,propDep:cn,ref:Ln,append:nn}),delete Gt.static[Dn]}function bo(ln,Gt,Dn,Pn,qn){var In=Yr();In.stats=In.link(qn),Object.keys(Gt.static).forEach(function(zn){pr(In,Gt,zn)}),rl.forEach(function(zn){pr(In,ln,zn)});var yn=Ps(ln,Gt,Dn,Pn,In);return Js(In,yn),ai(In,yn),gn(In,yn),a(In.compile(),{destroy:function(){yn.shader.program.destroy()}})}return{next:sr,current:Mi,procs:function(){var ln=Yr(),Gt=ln.proc("poll"),Dn=ln.proc("refresh"),Pn=ln.block();Gt(Pn),Dn(Pn);var qn=ln.shared,In=qn.gl,yn=qn.next,zn=qn.current;Pn(zn,".dirty=false;"),oa(ln,Gt),oa(ln,Dn,null,!0);var cn;$i&&(cn=ln.link($i)),Cn.oes_vertex_array_object&&Dn(ln.link(Cn.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ln=0;Ln<hi.maxAttributes;++Ln){var nn=Dn.def(qn.attributes,"[",Ln,"]"),Kn=ln.cond(nn,".buffer");Kn.then(In,".enableVertexAttribArray(",Ln,");",In,".bindBuffer(",Hc,",",nn,".buffer.buffer);",In,".vertexAttribPointer(",Ln,",",nn,".size,",nn,".type,",nn,".normalized,",nn,".stride,",nn,".offset);").else(In,".disableVertexAttribArray(",Ln,");",In,".vertexAttrib4f(",Ln,",",nn,".x,",nn,".y,",nn,".z,",nn,".w);",nn,".buffer=null;"),Dn(Kn),$i&&Dn(cn,".vertexAttribDivisorANGLE(",Ln,",",nn,".divisor);")}return Dn(ln.shared.vao,".currentVAO=null;",ln.shared.vao,".setVAO(",ln.shared.vao,".targetVAO);"),Object.keys(qi).forEach(function(ni){var bi=qi[ni],Si=Pn.def(yn,".",ni),pi=ln.block();pi("if(",Si,"){",In,".enable(",bi,")}else{",In,".disable(",bi,")}",zn,".",ni,"=",Si,";"),Dn(pi),Gt("if(",Si,"!==",zn,".",ni,"){",pi,"}")}),Object.keys(Ri).forEach(function(ni){var bi=Ri[ni],Si=Mi[ni],pi,Hi,kr=ln.block();if(kr(In,".",bi,"("),Jn(Si)){var mo=Si.length;pi=ln.global.def(yn,".",ni),Hi=ln.global.def(zn,".",ni),kr(Kt(mo,function(_r){return pi+"["+_r+"]"}),");",Kt(mo,function(_r){return Hi+"["+_r+"]="+pi+"["+_r+"];"}).join("")),Gt("if(",Kt(mo,function(_r){return pi+"["+_r+"]!=="+Hi+"["+_r+"]"}).join("||"),"){",kr,"}")}else pi=Pn.def(yn,".",ni),Hi=Pn.def(zn,".",ni),kr(pi,");",zn,".",ni,"=",pi,";"),Gt("if(",pi,"!==",Hi,"){",kr,"}");Dn(kr)}),ln.compile()}(),compile:bo}}function uf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var df=34918,Nh=34919,Yd=35007,ol=function(mt,Qt){if(!Qt.ext_disjoint_timer_query)return null;var Cn=[];function hi(){return Cn.pop()||Qt.ext_disjoint_timer_query.createQueryEXT()}function Ei($i){Cn.push($i)}var di=[];function mi($i){var ar=hi();Qt.ext_disjoint_timer_query.beginQueryEXT(Yd,ar),di.push(ar),Oi(di.length-1,di.length,$i)}function Wi(){Qt.ext_disjoint_timer_query.endQueryEXT(Yd)}function Vi(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ki=[];function zi(){return Ki.pop()||new Vi}function Qi($i){Ki.push($i)}var ir=[];function Oi($i,ar,Mi){var sr=zi();sr.startQueryIndex=$i,sr.endQueryIndex=ar,sr.sum=0,sr.stats=Mi,ir.push(sr)}var Zi=[],Yn=[];function fi(){var $i,ar,Mi=di.length;if(Mi!==0){Yn.length=Math.max(Yn.length,Mi+1),Zi.length=Math.max(Zi.length,Mi+1),Zi[0]=0,Yn[0]=0;var sr=0;for($i=0,ar=0;ar<di.length;++ar){var Ni=di[ar];Qt.ext_disjoint_timer_query.getQueryObjectEXT(Ni,Nh)?(sr+=Qt.ext_disjoint_timer_query.getQueryObjectEXT(Ni,df),Ei(Ni)):di[$i++]=Ni,Zi[ar+1]=sr,Yn[ar+1]=$i}for(di.length=$i,$i=0,ar=0;ar<ir.length;++ar){var qi=ir[ar],Ri=qi.startQueryIndex,Ui=qi.endQueryIndex;qi.sum+=Zi[Ui]-Zi[Ri];var Vr=Yn[Ri],co=Yn[Ui];co===Vr?(qi.stats.gpuTime+=qi.sum/1e6,Qi(qi)):(qi.startQueryIndex=Vr,qi.endQueryIndex=co,ir[$i++]=qi)}ir.length=$i}}return{beginQuery:mi,endQuery:Wi,pushScopeStats:Oi,update:fi,getNumPendingQueries:function(){return di.length},clear:function(){Cn.push.apply(Cn,di);for(var $i=0;$i<Cn.length;$i++)Qt.ext_disjoint_timer_query.deleteQueryEXT(Cn[$i]);di.length=0,Cn.length=0},restore:function(){di.length=0,Cn.length=0}}},ac=16384,hf=256,mu=1024,Th=34962,Qd="webglcontextlost",sl="webglcontextrestored",Ld=1,ff=2,gf=3;function Mh(mt,Qt){for(var Cn=0;Cn<mt.length;++Cn)if(mt[Cn]===Qt)return Cn;return-1}function mf(mt){var Qt=Fn(mt);if(!Qt)return null;var Cn=Qt.gl,hi=Cn.getContextAttributes(),Ei=Cn.isContextLost(),di=Ht(Cn,Qt);if(!di)return null;var mi=je(),Wi=uf(),Vi=di.extensions,Ki=ol(Cn,Vi),zi=Be(),Qi=Cn.drawingBufferWidth,ir=Cn.drawingBufferHeight,Oi={tick:0,time:0,viewportWidth:Qi,viewportHeight:ir,framebufferWidth:Qi,framebufferHeight:ir,drawingBufferWidth:Qi,drawingBufferHeight:ir,pixelRatio:Qt.pixelRatio},Zi={},Yn={elements:null,primitive:4,count:-1,offset:0,instances:-1},fi=yr(Cn,Vi),$i=Nt(Cn,Wi,Qt,Mi),ar=Di(Cn,Vi,fi,Wi,$i);function Mi(Zr){return ar.destroyBuffer(Zr)}var sr=Ss(Cn,Vi,$i,Wi),Ni=cr(Cn,mi,Wi,Qt),qi=Xl(Cn,Vi,fi,function(){Vr.procs.poll()},Oi,Wi,Qt),Ri=Na(Cn,Vi,fi,Wi,Qt),Ui=Mn(Cn,Vi,fi,qi,Ri,Wi),Vr=ju(Cn,mi,Vi,fi,$i,sr,qi,Ui,Zi,ar,Ni,Yn,Oi,Ki,Qt),co=hs(Cn,Ui,Vr.procs.poll,Oi,hi,Vi,fi),rr=Vr.next,ki=Cn.canvas,Ti=[],Yr=[],Eo=[],br=[Qt.onDestroy],Fo=null;function uo(){if(Ti.length===0){Ki&&Ki.update(),Fo=null;return}Fo=pt.next(uo),fa();for(var Zr=Ti.length-1;Zr>=0;--Zr){var Co=Ti[Zr];Co&&Co(Oi,null,0)}Cn.flush(),Ki&&Ki.update()}function vo(){!Fo&&Ti.length>0&&(Fo=pt.next(uo))}function Qo(){Fo&&(pt.cancel(uo),Fo=null)}function Rs(Zr){Zr.preventDefault(),Ei=!0,Qo(),Yr.forEach(function(Co){Co()})}function ha(Zr){Cn.getError(),Ei=!1,di.restore(),Ni.restore(),$i.restore(),qi.restore(),Ri.restore(),Ui.restore(),ar.restore(),Ki&&Ki.restore(),Vr.procs.refresh(),vo(),Eo.forEach(function(Co){Co()})}ki&&(ki.addEventListener(Qd,Rs,!1),ki.addEventListener(sl,ha,!1));function Go(){Ti.length=0,Qo(),ki&&(ki.removeEventListener(Qd,Rs),ki.removeEventListener(sl,ha)),Ni.clear(),Ui.clear(),Ri.clear(),qi.clear(),sr.clear(),$i.clear(),ar.clear(),Ki&&Ki.clear(),br.forEach(function(Zr){Zr()})}function Us(Zr){be(!!Zr,"invalid args to regl({...})"),be.type(Zr,"object","invalid args to regl({...})");function Co(qn){var In=a({},qn);delete In.uniforms,delete In.attributes,delete In.context,delete In.vao,"stencil"in In&&In.stencil.op&&(In.stencil.opBack=In.stencil.opFront=In.stencil.op,delete In.stencil.op);function yn(zn){if(zn in In){var cn=In[zn];delete In[zn],Object.keys(cn).forEach(function(Ln){In[zn+"."+Ln]=cn[Ln]})}}return yn("blend"),yn("depth"),yn("cull"),yn("stencil"),yn("polygonOffset"),yn("scissor"),yn("sample"),"vao"in qn&&(In.vao=qn.vao),In}function Jo(qn,In){var yn={},zn={};return Object.keys(qn).forEach(function(cn){var Ln=qn[cn];if(at.isDynamic(Ln)){zn[cn]=at.unbox(Ln,cn);return}else if(In&&Array.isArray(Ln)){for(var nn=0;nn<Ln.length;++nn)if(at.isDynamic(Ln[nn])){zn[cn]=at.unbox(Ln,cn);return}}yn[cn]=Ln}),{dynamic:zn,static:yn}}var Js=Jo(Zr.context||{},!0),Ul=Jo(Zr.uniforms||{},!0),Kc=Jo(Zr.attributes||{},!1),gn=Jo(Co(Zr),!1),ai={gpuTime:0,cpuTime:0,count:0},ci=Vr.compile(gn,Kc,Ul,Js,ai),pr=ci.draw,bo=ci.batch,ln=ci.scope,Gt=[];function Dn(qn){for(;Gt.length<qn;)Gt.push(null);return Gt}function Pn(qn,In){var yn;if(Ei&&be.raise("context lost"),typeof qn=="function")return ln.call(this,null,qn,0);if(typeof In=="function")if(typeof qn=="number")for(yn=0;yn<qn;++yn)ln.call(this,null,In,yn);else if(Array.isArray(qn))for(yn=0;yn<qn.length;++yn)ln.call(this,qn[yn],In,yn);else return ln.call(this,qn,In,0);else if(typeof qn=="number"){if(qn>0)return bo.call(this,Dn(qn|0),qn|0)}else if(Array.isArray(qn)){if(qn.length)return bo.call(this,qn,qn.length)}else return pr.call(this,qn)}return a(Pn,{stats:ai,destroy:function(){ci.destroy()}})}var vs=Ui.setFBO=Us({framebuffer:at.define.call(null,Ld,"framebuffer")});function Ps(Zr,Co){var Jo=0;Vr.procs.poll();var Js=Co.color;Js&&(Cn.clearColor(+Js[0]||0,+Js[1]||0,+Js[2]||0,+Js[3]||0),Jo|=ac),"depth"in Co&&(Cn.clearDepth(+Co.depth),Jo|=hf),"stencil"in Co&&(Cn.clearStencil(Co.stencil|0),Jo|=mu),be(!!Jo,"called regl.clear with no buffer specified"),Cn.clear(Jo)}function Do(Zr){if(be(typeof Zr=="object"&&Zr,"regl.clear() takes an object as input"),"framebuffer"in Zr)if(Zr.framebuffer&&Zr.framebuffer_reglType==="framebufferCube")for(var Co=0;Co<6;++Co)vs(a({framebuffer:Zr.framebuffer.faces[Co]},Zr),Ps);else vs(Zr,Ps);else Ps(null,Zr)}function oa(Zr){be.type(Zr,"function","regl.frame() callback must be a function"),Ti.push(Zr);function Co(){var Jo=Mh(Ti,Zr);be(Jo>=0,"cannot cancel a frame twice");function Js(){var Ul=Mh(Ti,Js);Ti[Ul]=Ti[Ti.length-1],Ti.length-=1,Ti.length<=0&&Qo()}Ti[Jo]=Js}return vo(),{cancel:Co}}function Sa(){var Zr=rr.viewport,Co=rr.scissor_box;Zr[0]=Zr[1]=Co[0]=Co[1]=0,Oi.viewportWidth=Oi.framebufferWidth=Oi.drawingBufferWidth=Zr[2]=Co[2]=Cn.drawingBufferWidth,Oi.viewportHeight=Oi.framebufferHeight=Oi.drawingBufferHeight=Zr[3]=Co[3]=Cn.drawingBufferHeight}function fa(){Oi.tick+=1,Oi.time=_o(),Sa(),Vr.procs.poll()}function zs(){qi.refresh(),Sa(),Vr.procs.refresh(),Ki&&Ki.update()}function _o(){return(Be()-zi)/1e3}zs();function Qs(Zr,Co){be.type(Co,"function","listener callback must be a function");var Jo;switch(Zr){case"frame":return oa(Co);case"lost":Jo=Yr;break;case"restore":Jo=Eo;break;case"destroy":Jo=br;break;default:be.raise("invalid event, must be one of frame,lost,restore,destroy")}return Jo.push(Co),{cancel:function(){for(var Js=0;Js<Jo.length;++Js)if(Jo[Js]===Co){Jo[Js]=Jo[Jo.length-1],Jo.pop();return}}}}var Xo=a(Us,{clear:Do,prop:at.define.bind(null,Ld),context:at.define.bind(null,ff),this:at.define.bind(null,gf),draw:Us({}),buffer:function(Zr){return $i.create(Zr,Th,!1,!1)},elements:function(Zr){return sr.create(Zr,!1)},texture:qi.create2D,cube:qi.createCube,renderbuffer:Ri.create,framebuffer:Ui.create,framebufferCube:Ui.createCube,vao:ar.createVAO,attributes:hi,frame:oa,on:Qs,limits:fi,hasExtension:function(Zr){return fi.extensions.indexOf(Zr.toLowerCase())>=0},read:co,destroy:Go,_gl:Cn,_refresh:zs,poll:function(){fa(),Ki&&Ki.update()},now:_o,stats:Wi});return Qt.onDone(null,Xo),Xo}return mf})}}]);
